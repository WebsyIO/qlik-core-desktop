/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[53],{1059:function(t,e,n){"use strict";var i,r;!(i=[n(11),n(10),n(48),n(91),n(89),n(299),n(1629),n(1630),n(205),n(189),n(125),n(1631),n(1632),n(243),n(164),n(1263),n(104),n(100),n(113),n(142),n(50),n(101),n(1633),n(99),n(1264),n(986),n(424),n(167),n(90),n(393),n(1003),n(1634),n(1265),n(1636),n(1638),n(1640),n(1642),n(1644),n(1325),n(1653),n(1266),n(290),n(289)],r=function(t,e,n,i,r,o,s,l,a,c,u,d,p,h,f,v,g,m,b,C,x,q,S,y,w,A,I,O,E,T){var D,R;var P=23;var L=13;function H(t,e){t.tableStyles={header:{"font-size":e.getStyle("header","fontSize"),color:e.getStyle("header","color")},content:{"font-size":e.getStyle("content","fontSize"),color:e.getStyle("content","color")}};if(t.scrollApi){t.scrollApi.settings.minRowHeight=$(t);t.scrollApi.settings.maxRowHeight=3*$(t)}}function $(t){var e=parseInt(t.tableStyles.content["font-size"]);var n=e?P*(e/L):P;return n||P}function k(t,e,n,i){var r=null;n.layout&&n.layout.qStateName&&(r={qStateName:n.layout.qStateName});return t.showField(e,n.backendApi.model.app,{$alignToElement:i,qvaOutsideIgnoreFor:"qv-st-header-cell-search-"+n.$id,collision:"flipfit",direction:n.options.direction},r,function(){n.currentHeaderSearch&&(n.currentHeaderSearch.open=false);n.currentHeaderSearch=null})}function _(t,e,n){return t<e.length?e[t]:n[t-e.length]}R=h.extend({init:function t(e){this.visualizationCtrl=e},getRows:function t(){return this.visualizationCtrl.getRows()},getRowCount:function t(){return this.visualizationCtrl.getRowCount()},getFirstElementIndex:function t(){return this.visualizationCtrl.getFirstElementIndex()},getLastElementIndex:function t(){return this.visualizationCtrl.getLastElementIndex()},onVirtualScroll:function t(e,n,i,r,o,s){return this.visualizationCtrl.onVirtualScroll(e,n,i,r,o,s)},onInitialNativeScroll:function t(e,n){return this.visualizationCtrl.onInitialNativeScroll(e,n)},onGotoNextBlock:function t(e,n){return this.visualizationCtrl.onGotoNextBlock(e,n)},onGotoPreviousBlock:function t(e,n){return this.visualizationCtrl.onGotoPreviousBlock(e,n)}});function M(t,e,n,i){var r=t.getCellsInColumn(e,"data",n);r.forEach(function(t){t.hidden=i})}D=a.extend({init:function t(e,n,i,r,o){this.appliedSoftPatch=false;this._paintWatches=[];this._resizeWatches=[];this.$element=n;this.dataService=r;this.selectionService=o;this.$timeout=i;this.metaHeaders=[];this._super.apply(this,arguments);this._pendingUpdate=null;e.backendApi.setCacheOptions({width:1});e.options.navigation=false!==e.options.navigation;e.interactive=false;e.linksInteractive=false;e.isLoadPrevVisible=false;e.direction=e.options.direction;e.rtl="rtl"===e.options.direction;e.watchResize=this.watchResize.bind(this);this.styleService=m.initializeService("object.straightTable");var s=this;H(this.$scope,this.styleService);e.themeChangedCallback=function(){H(s.$scope,s.styleService)};m.ThemeChanged.bind(e.themeChangedCallback);var l=e.layout.qHyperCube;w.updatePropertiesOnRefresh(e.backendApi,l);this.attachColumnResizeEvents(e);this.attachColumnReorderEvents(e)},attachColumnResizeEvents:function t(e){var n=null;e.$on("onExplicitColumnChanged",function(){n=null;this.metaHeaders.filter(function(t){return!t.isSearchIcon&&!t.isFillColumn}).forEach(function(t,n){e.explicitColumnWidths[t.dataColIx]=e.visibleExplicitColumnWidths[n]});e.applyColumnWidthSoftPatch(false,e.explicitColumnWidths)}.bind(this));e.$on("onExplicitColumnChanging",function(){n||(n={initialTableWidth:this.$scope.appliedTableWidth});this.metaHeaders.filter(function(t){return!t.isSearchIcon&&!t.isFillColumn}).forEach(function(t,n){e.explicitColumnWidths[t.dataColIx]=e.visibleExplicitColumnWidths[n]});this.metaHeaders=this.dataService.getStraightMetaHeaders(e.layout,e.explicitColumnWidths,e.scrollApi.settings,e.$id,this.metaHeaders,this.$scope.options.customHeader);this.$scope.scrollApi.updateMetaHeaders(this.metaHeaders,{lockScrollPosition:true});this.$scope.scrollApi.updateVirtualViewport();this.metaHeaders.filter(function(t){return t.isFillColumn}).forEach(function(t){t.style.width="auto"});this.updateColumnInfo(this.metaHeaders);this.applyTableWidth(Math.max(n.initialTableWidth+10,this.getTableWidth()))}.bind(this))},attachColumnReorderEvents:function t(e){var n=null;var i=null;e.$on("onStopReorderingColumns",function(){n=null;i=null;e.reorderingColumn=void 0;e.$digest()});e.$on("onStartReorderingColumns",function(t,r){n=this.$scope.layout.qHyperCube.qColumnOrder;i=this.metaHeaders.reduce(function(t,e){e.isFillColumn||(e.isSearchIcon?t.length>0&&(t[t.length-1].width+=e.calculatedWidth):t.push({dataColIx:e.dataColIx,width:e.calculatedWidth}));return t},[]);e.reorderingColumn=i.filter(function(t){return t.dataColIx===r.dataColIx})[0];e.$digest()}.bind(this));e.$on("onReorderingColumns",function(t,r){if(!n||!e.reorderingColumn)return;var o=e.reorderingColumn;var s=0,l=0;var a=o.width/2;var c=r.offset+a;var u,d,p;for(u=0;u<i.length;++u){if(i[u].dataColIx===o.dataColIx)continue;d=l+a;p=l+i[u].width+a;if(Math.abs(d-c)<Math.abs(p-c))break;s+=1;l+=i[u].width}var h=i.indexOf(o);var f,v,g;if(h!==s){f=i.map(function(t){return n.indexOf(t.dataColIx)});v=f.slice();v.splice(s,0,v.splice(h,1)[0]);i.splice(s,0,i.splice(h,1)[0]);g=n.slice();v.forEach(function(t,e){g[f[e]]=n[t]});n=g;e.applyColumnOrderSoftPatch("replace",n)}})},setDirection:function t(e){this._super(e);this.$scope.direction=this.$scope.options.direction;this.$scope.rtl="rtl"===this.$scope.options.direction;this.$scope.scrollApi.setDirection(this.$scope.direction);this.processResize()},watchPaint:function t(e){var n=this;n._paintWatches.push(e);return function(){var t=n._paintWatches.indexOf(e);n._paintWatches.splice(t,1)}},watchResize:function t(e){var n=this;n._resizeWatches.push(e);return function(){var t=n._resizeWatches.indexOf(e);n._resizeWatches.splice(t,1)}},suppressOnPaint:function t(e){if(this.$scope.object._forcePaint){this.$scope.object._forcePaint=false;return false}return C.isInSelection(e)},_restrictColumnsToSnapshotData:function t(e){if(e.snapshotData){var n=e.snapshotData.object.origDataPages||e.qHyperCube.qDataPages;var i=this.dataService.columnOrder.getVisible(e.qHyperCube);var r=n.filter(function(t){return t&&t.qArea});var o=r.map(function(t){return i[t.qArea.qLeft]});this.metaHeaders=this.metaHeaders.filter(function(t){return t.isFillColumn||o.indexOf(t.dataColIx)>-1})}},update:function t(e,n,i,r,o){var s,l,a=this;if(this.$scope.options.viewState){e=this.$scope.options.viewState.qTop;l=this.$scope.options.viewState.qLeft}if(!o){var c=this.$scope.layout.qHyperCube.columnWidths.map(function(t){return"number"===typeof t?t:-1});this.$scope.explicitColumnWidths=c;this.metaHeaders=this.dataService.getStraightMetaHeaders(this.$scope.layout,this.$scope.explicitColumnWidths,this.$scope.scrollApi.settings,this.$scope.$id,this.metaHeaders,this.$scope.options.customHeader);this._restrictColumnsToSnapshotData(this.$scope.layout);this.$scope.scrollApi.updateMetaHeaders(this.metaHeaders,{},l);this.$scope.visibleExplicitColumnWidths=this.metaHeaders.filter(function(t){return!t.isSearchIcon&&!t.isFillColumn}).map(function(t){return c[t.dataColIx]})}s=this.getDataInfo(e,n,this.metaHeaders,this.$scope.layout);this._pendingUpdate=this.$scope.backendApi.getData(s.rects).then(function(t){var e={dataPages:t,dataInfo:s};return a.onUpdateData(e,i,r,o).then(function(){var e;if(a.$scope.hasFocus()||a.$scope.focus&&a.$scope.focus.forceRealign){e=a.$scope.focus;a.$scope.focus=a.$scope.navService.realignFocus(a.$scope.grid,a.$scope.focus,a.$scope.scrollApi);e&&e.cell&&"function"===typeof e.cell.blur&&e.cell.blur();if(a.$scope&&a.$scope.focus){a.$scope.focus.cell&&a.$scope.focus.cell.focus();a.$scope.focus.forceRealign=false}}return t}).finally(function(){a._pendingUpdate=null})});return this._pendingUpdate},whenUpdated:function t(){if(this._pendingUpdate)return this._pendingUpdate;return r.resolve()},updateLocked:function t(e){var n=this.dataService,i=this.selectionService,r=this.$scope.selections,o=r.activationCell,s,l,a,c=[],u,d,p,h;if(!o)return;s=e.getRowsByCellType(e.CELL_TYPE_DATA);d=n.getSiblingCells(e,o);l=s.length;for(h=0;h<l;++h)c=c.concat(s[h].cells);u=c.length;for(h=0;h<u;++h){a=c[h];p=-1!==d.indexOf(a);p&&!a.isDimensionValue||!p&&!a.isMeta?i[o&&r.active?"lockCell":"unlockCell"](e,a):i[o&&r.active?"removeCellStyle":"restoreCellStyle"](a)}},getDataInfo:function t(e,n,i,r){var o=this.dataService.columnOrder.getVisible(r.qHyperCube);var s,l,a=i.length,c=[];for(s=0;s<a;++s){l=i[s];if(l.isSearchIcon||l.isFillColumn)continue;c.push({qLeft:w.getLeftOfDataArea(l,o.indexOf(l.dataColIx),r),qTop:e||0,qWidth:1,qHeight:n})}c.length||c.push({qTop:0,qLeft:0,qWidth:0,qHeight:0});return{rects:c,metaHeaders:i}},updateColumnInfo:function t(e){var n=this.$scope;n.columns||(n.columns=[]);var i,r=0,o,s,l=0;for(s=0,o=e.length;s<o;s++){i=e[s];M(this.dataService,n.grid,i.dataColIx,i.shouldBeRemoved);if(i.isFillColumn)continue;if(i.isDimension){this.$scope.options.customHeader?r+=s>0?i.calculatedWidth+1:i.calculatedWidth:r+=i.calculatedWidth+e[s+1].calculatedWidth;s++}else r+=i.calculatedWidth;n.columns[l]||(n.columns[l]={});n.columns[l].width=i.calculatedWidth;n.columns[l].left=n.rtl?-r:r;n.columns[l].hidden=i.shouldBeRemoved;l++}},getTableWidth:function t(){var e=this.$scope.scrollApi.settings;var n=e.horizontalScroll.enabled?e.width:e.width-e.columnPicker.width;return Math.max(n,this.$scope.columns.map(function(t){return t.width}).reduce(function(t,e){return t+e},0))},applyTableWidth:function t(e){this.$scope.tableStyles=this.$scope.tableStyles||{header:{},content:{}};this.$scope.tableStyles.header.width=e+"px";this.$scope.tableStyles.content.width=e+"px";this.$scope.appliedTableWidth=e},onUpdateData:function t(e,n,i,r){i&&e.dataPages.forEach(function(t){t.qMatrix.reverse()});this.dataService.updateStraightItems(this.$scope,e.dataPages,e.dataInfo.metaHeaders,n,i,r);this.$scope.columns=[];this.updateColumnInfo(e.dataInfo.metaHeaders);this.applyTableWidth(this.getTableWidth());this.$scope.scrollApi.updateHorizontalScroll();i&&this.$scope.grid.rows.reverse();if(this.$scope.selections.active){this.selectionService.updateStraight(this.$scope.grid,this.$scope.selections,this.$scope.selections.activationCell);this.updateLocked(this.$scope.grid)}return this.$timeout(function(){},0,false)},getColumnIndexNativeScrolling:function t(e){var n=0;var i=this.$scope.scrollApi.domApi.getNativeScrollOffsetLeft();for(var r=0;r<e.length;r++){i-=e[r].calculatedWidth||e[r].left;if(!(i>0))break;n++}e[n].isSearchIcon&&n--;return n},setSnapshotData:function t(e){var n,i,r=!!e.sourceObjectId,o=this.$scope,s=o.scrollApi.domApi,l=s.getScrollAreaBoundingBox(),a=e.qHyperCube;r||(a.qColumnOrder=this.$scope.layout.qHyperCube.qColumnOrder);a.columnOrder=a.qColumnOrder;var c=s.$scrollArea.find(".qv-st-data-row");n=d.getIndexHeightAndWidth(c,a.qColumnOrder.length,l,e.totals&&e.totals.show);if(this.$scope.scrollApi.settings.horizontalScroll.useNativeScroll){var u=this.metaHeaders.slice(this.getColumnIndexNativeScrolling(this.metaHeaders));i=this.getDataInfo(n.index,n.height,u,this.$scope.layout)}else i=this.getDataInfo(n.index,n.height,this.metaHeaders,this.$scope.layout);return o.backendApi.getData(i.rects).then(function(t){e.qHyperCube.qDataPages=t;return e})},getViewState:function t(){var e,n;if(this.$scope.scrollApi.settings.horizontalScroll.useNativeScroll){var i=this.$scope.scrollApi.domApi.getScrollAreaBoundingBox();var r=this.$scope.scrollApi.domApi.$scrollArea.find(".qv-st-data-row");var o=d.getIndexHeightAndWidth(r,this.$scope.layout.qHyperCube.qColumnOrder.length,i,true);e=o.index;n=this.getColumnIndexNativeScrolling(this.$scope.columns)}else{var s=this.$scope.grid.rows.length;e=s?this.$scope.grid.rows[0].getIndex():0;var l=this.getDataInfo(e,s,this.metaHeaders,this.$scope.layout);n=l.rects[0].qLeft}return{qTop:e,qLeft:n}},process:function(t){function e(e,n,i){return t.apply(this,arguments)}e.toString=function(){return t.toString()};return e}(function(t,e,n){return this.update(t,e,false,false,false).then(function(){if(this.$scope.layout.qHyperCube){var t=this.$scope.scrollApi.settings.horizontalScroll.enabled;var e=t?this.$scope.layout.qHyperCube.qSize.qcx:this.$scope.scrollApi.getVisibleColumnCount();this.$scope.scrollApi.setTotalRows(this.$scope.layout.qHyperCube.qSize.qcy);this.$scope.scrollApi.setTotalColumns(e);return this.$scope.scrollApi.setVirtualSize(n)}}.bind(this)).catch(function(t){false})}),processPaint:function t(){this.$scope.scrollApi.updateViewport();var e=0,n=this.$scope.scrollApi.settings.viewportRowCount,i;i=this.$scope.scrollApi.resetNativeScroll();return this.process(e,n,false).then(function(){i()}).catch(function(t){false})},processResize:function t(){var e=this.$scope.grid.rows.length,n=e?this.$scope.grid.rows[0].getIndex():0,i=this.$scope.scrollApi.settings.viewportRowCount,r;if(this.$scope.scrollApi.totalRows&&n+i>this.$scope.scrollApi.totalRows){r=Math.min(n,n+i-this.$scope.scrollApi.totalRows);n-=r}i<e&&(i=e);return this.process(n,i,true)},onVirtualScroll:function t(e,n,i,r,o){this.$scope.options.externalInterface&&this.$scope.options.externalInterface.straightTableId&&this.$scope.$broadcast("straight-table-virtual-scroll",{id:this.$scope.options.externalInterface.straightTableId,grid:this.$scope.grid,headers:this.metaHeaders,scrollApi:this.$scope.scrollApi});return this.update(e,n,false,false,0===o)},gotoBlock:function t(e,n,i){var r=this.$scope.scrollApi.getSpliceArgs(),o=this.$scope.grid.rows,s=this.$scope.grid.getNextRowIx();i&&o.reverse();o.splice.apply(o,r);s-=r[1];this.$scope.grid.setNextRowIx(s);return this.update(e,n,true,i,true)},onGotoNextBlock:function t(e,n){return this.gotoBlock(e,n,false)},onGotoPreviousBlock:function t(e,n){return this.gotoBlock(e,n,true)},getRows:function t(){return this.$scope.grid.rows},getRowCount:function t(){return this.$scope.grid.rows.length},getFirstElementIndex:function t(){return this.$scope.grid.rows[0].getIndex()},getLastElementIndex:function t(){return this.$scope.grid.rows[this.$scope.grid.rows.length-1].getIndex()},getPreferredSize:function t(){var e=r(),n=function(){return this.$element.find(".qv-st-data")[0].offsetHeight}.bind(this);var i=this.$scope.$watch(n,function(t){if(t&&t>0){var n=this.$element.find(".qv-st-header")[0].offsetHeight,r=this.$element.find(".qv-st-bottom-header")[0].offsetHeight;e.resolve({w:this.$element.width(),h:t+n+r});i()}}.bind(this));return e.promise}});D.$inject=["$scope","$element","$timeout","qvGridObjectDataService","qvGridObjectSelectionService"];function W(t){var e=y.treatAsDesktop(),n=q.getValue(t,"layout.scrolling.horizontal",true),i={enabled:t.options.useHorizontalScroll||b.ST_HSCROLL&&n,useNativeScroll:t.options.useHorizontalScroll&&!t.options.virtualHorizontalScroll,useVirtualScroll:t.options.virtualHorizontalScroll||b.ST_HSCROLL&&!t.options.useHorizontalScroll,keepFirstColumnInView:t.options.keepFirstColumnInView||t.layout.scrolling&&t.layout.scrolling.keepFirstColumnInView};if(!e&&i.enabled){i.useNativeScroll=true;i.useVirtualScroll=false}return i}function F(t,e){t&&t[e]&&""===t[e].qExpression&&""===t[e].qLibraryId&&t.splice(e,1)}function V(t){var e=t.qAttributeExpressions;F(e,1);F(e,0)}n.directive("qvStraightTable",["$timeout","qvGridObjectDataService","qvGridObjectSelectionService","qvGridKeyboardNavigationService","qvListboxPopoverService","qvListboxPopoverServiceMobile","$window",function(n,o,s,a,c,d,h){return{restrict:"E",replace:true,template:l,require:"qvObjectContent",link:function l(y,w,A,D){var P=w.find(".qv-grid-object-scroll-area"),L=P.controller("qvScrollArea"),H=w.find(".qv-scroll-loader:not(.qv-scroll-row-loader)").controller("qvScrollLoader"),M=P.find(".qv-scroll-row-loader").controller("qvScrollLoader"),F="."+y.id+"-straight-table",V,z,N,B={alignToBottom:"reduce",minRowHeight:$(y),maxRowHeight:3*$(y),columnCount:0,horizontalScroll:W(y),useAllSpace:y.options.useAllSpace,column:{glyphWidth:8,paddingWidth:14,minSearchWidth:y.options.customHeader?1:35,minColWidth:y.options.minColumnWidth||34,maxColWidth:384},columnPicker:{show:false,width:21},blockSize:50},j=new S(n,B),G=new R(D);y.scrollApi=j;var U=p.create(y,w,P,j.settings);y.grid=new v("straight");y.selections=s.$new();y.objectId=y.layout.qInfo.qId;y.getSRLabelForTotals=function(t){var e=q.getValue(y,"layout.totals.label")||i.get("Object.Table.Totals");return t.isNumeric||"Â "===t.text?t.isNumeric?e+" "+t.text:i.get("Object.Table.Totals.NotApplicable"):t.text};y.TABLE_AREA=a.TABLE_AREA;y.navService=a;function Y(){y.focus?y.focus=a.realignFocus(y.grid,y.focus,y.scrollApi):y.focus=a.init(y.grid);y.focus.cell.focus()}y.setFocus=Y;y.object.setOnFocusHandler(Y);var K;function X(t){z.text("");n.cancel(K);K=n(function(){z.text(i.get(t))},100)}y.onClick=function(t){var n=e.element(t.target).scope();var i=n.cell||n.header;var r=n.area;i&&y.selections.active&&i.dataColIx!==y.selections.currentDataColIx&&y.selectionsApi.confirm();if(i&&r){y.focus={area:r,cell:i};i.focus()}};y.handleKeyUp=function(t){if(t.which===O.ENTER&&y.preventEnterKeyUpBubbling){t.originalEvent.stopPropagation();t.preventDefault()}if(event.which===O.SHIFT&&y.selections.active){N=void 0;y.multiselect()}y.preventEnterKeyUpBubbling=false};y.hasFocus=function(){return w[0].contains(document.activeElement)};y.handleKeyDown=function(t){var n;var r;z=z||w.find("#st-cell-selection-status-label-"+y.objectId);n=e.element(t.target).scope();r=n.cell||n.header;if(t.which===O.ESCAPE){if(!y.selections.active&&"function"===typeof y.object.blur){y.object.blur();t.preventDefault();t.stopPropagation();return}X("Accessibility.Table.SelectionsCanceled")}var o=function e(n,i){if(n.isNullValue||!n.isDimensionValue||t.which===O.ENTER&&y.selections.active){if(t.which===O.ENTER&&y.selections.active){y.focus.forceRealign=true;X("Accessibility.Table.SelectionsConfirmed")}}else{var r=y.selections.active,o=s.isSelected(y.selections,n),l=!o||i?"Accessibility.Table.ValueSelected":"Accessibility.Table.ValueDeselected";X(l);if(i){r||y.activateSelections(N);y.multiselectDimensionValues(N,n,n.dataColIx)}else y.selectDimensionValue(n,t);if(!r){X("Accessibility.Table.SelectionMode");y.preventEnterKeyUpBubbling=true}}};var l=function e(){var l={cell:r,area:n.area};try{var c,u=y.interactive&&t.shiftKey&&(t.which===O.ARROW_UP||t.which===O.ARROW_DOWN);if(y.selections.active){c=a.moveFocusWhileSelecting(y.grid,t.which,l,j);if(!u){var d=s.isSelected(y.selections,c.cell)?i.get("Accessibility.Table.SelectedStatusTrue"):i.get("Accessibility.Table.SelectedStatusFalse");X(d)}}else c=a.moveFocus(y.grid,t.which,l,y.rtl,j);if(!c.deferFocus){if(u){N||(N=E.extend({},r));D.whenUpdated().then(function(){o(c.cell,true)})}c.cell.focus()}y.focus=c;t.stopPropagation();t.preventDefault()}catch(t){}};switch(t.which){case O.TAB:y.selections.active&&y.selectionsApi.confirm();break;case O.ENTER:case O.SPACE:t.stopImmediatePropagation();t.preventDefault();t.originalEvent.repeat||(y.interactive&&n.cell?o(r,false):y.navigatable&&n.header&&!r.isSearchIcon&&!r.isTotal&&y.sort(r));break;case O.ARROW_LEFT:case O.ARROW_RIGHT:case O.ARROW_UP:case O.ARROW_DOWN:case O.PAGE_UP:case O.PAGE_DOWN:case O.HOME:case O.END:l();break}};b.ST_HSCROLL?y.multiline={wrapTextInHeaders:!y.layout.multiline||y.layout.multiline.wrapTextInHeaders,wrapTextInCells:!y.layout.multiline||y.layout.multiline.wrapTextInCells}:y.multiline={wrapTextInHeaders:true,wrapTextInCells:true};y.$on("$destroy",function(){j.destroy();w.off(F);y.themeChangedCallback&&m.ThemeChanged.unbind(y.themeChangedCallback)});w.on("contextmenu"+F,function(t){y.selections.active&&t.preventDefault()});w.on("focusout"+F,function(t){if(null===t.target.getAttribute("tabIndex"))return;var n=e.element(t.target).scope();var i=n.cell||n.header;i&&i.blur()});function Q(t){j.lockHorizontalScrollPosition(t)}function J(t,e){I.begin();return D[t]().then(function(){e.forEach(function(t){t()})}).catch(function(){}).finally(I.end)}function Z(t,e){var n=w.find(t),i,r,o;if(n.length){i=n[0].getBoundingClientRect();r=new g(e.left,e.top,e.width,e.height);o=new g(i.left,i.top,i.width,i.height);return o.intersectsWith(r)}return false}var tt=j.initialize(U,G,L,H,D).then(function(){j.setDirection(y.direction);D.setInteractionState=function(){var t=y.object.inAnalysisState(),e=t&&false!==y.options.navigation,n=t&&false!==y.options.selections;y.interactive=n;y.linksInteractive=t&&(y.options.navigation||y.options.limitedInteraction);if(e&&!y.navigatable){y.navigatable=true;y.scrollApi.activate()}else if(!e&&y.navigatable){y.navigatable=false;y.scrollApi.deactivate()}t||(y.isLoadPrevVisible=Z(".qv-st-load-prev",j.domApi.getScrollAreaBoundingBox()))};D.getContextMenu=function(e,n,i){if(i.target){var r=t(i.target).closest(".qv-st");if(r){var o=i.target.innerText;o&&""!==o&&n.addItem({icon:"lui-icon lui-icon--copy",translation:"contextMenu.copyCellValue",tid:"copy-cell-context-item",select:function t(){T.copyToClipboard(o)}})}}};D.onPaint=function(){if(this.suppressOnPaint(y.layout))return r.resolve();C.isModalSelectionModel(y.object.model)&&y.selectionsApi.confirm();if(b.ST_HSCROLL){var t=true;y.layout.scrolling&&(t=void 0===y.layout.scrolling.horizontal||y.layout.scrolling.horizontal);if(t!==j.settings.horizontalScroll.enabled){j.settings.horizontalScroll=W(y);var e=p.create(y,w,P,j.settings);j.initialize(e,G,L,H,D)}if(y.layout.scrolling&&y.layout.scrolling.keepFirstColumnInView!==j.settings.horizontalScroll.keepFirstColumnInView){j.settings.horizontalScroll.keepFirstColumnInView=y.layout.scrolling.keepFirstColumnInView;y.scrollApi.updateViewport()}if(y.layout.multiline&&(y.layout.multiline.wrapTextInHeaders!==y.multiline.wrapTextInHeaders||y.layout.multiline.wrapTextInCells!==y.multiline.wrapTextInCells)){y.multiline.wrapTextInHeaders=y.layout.multiline.wrapTextInHeaders;y.multiline.wrapTextInCells=y.layout.multiline.wrapTextInCells;y.scrollApi.updateViewport()}}return J("processPaint",D._paintWatches)};D.onResize=function(){y.scrollApi.updateViewport();return J("processResize",D._resizeWatches)};D.onInitialNativeScroll=function(t,e){return M.fadeIn(0,0,{width:"100%",height:"30px"}).then(function(){return D.update(t,e,true,false,true).then(function(){return M.fadeOut()})})};D.setInteractionState(y.options.interactionState)});D.onInit=function(){return tt};y.applyColumnOrderSoftPatch=function(t,e){var n=t?"add":"replace";var i=[{qPath:"/qHyperCubeDef/qColumnOrder",qOp:n.toString(),qValue:JSON.stringify(e)}];y.backendApi.applyPatches(i,true)};y.options.externalInterface&&(y.options.externalInterface.forceRedraw=function(){D.onPaint()});function et(){D.updateLocked(y.grid);V&&V();Q(false)}y.applyColumnWidthSoftPatch=function(t,e){var n=t?"add":"replace";var i=e.map(function(t){return void 0===t||null===t?-1:t});var r=[{qPath:"/qHyperCubeDef/columnWidths",qOp:n.toString(),qValue:JSON.stringify(i)}];y.backendApi.applyPatches(r,true);y._columnWidthsExistsInLayout=true};function nt(){o.getSiblingCells(y.grid,y.selections.activationCell).forEach(function(t){s.deselectCell(y.grid,t)});D.updateLocked(y.grid);V&&V();Q(false)}function it(){if(!y.selections.active||!y.selections.activationCell)return;o.getSiblingCells(y.grid,y.selections.activationCell).forEach(function(t){s.deselectCell(y.grid,t)});D.updateLocked(y.grid)}function rt(){y.object.selectionsClass="";D.updateLocked(y.grid);Q(true)}function ot(t,e){return q.getValue(t,"layout.qHyperCube.qDimensionInfo."+e+".qIsOneAndOnlyOne",false)}s.init(y.selectionsApi,y.backendApi,y.selections,et,nt,it);var st=y.selectionsApi.ignoreOnOutside;y.selectionsApi.ignoreOnOutside=function(t){if(t.closest(".qv-st-dim-columns").length)return true;if(st(t)||t.closest(".qv-st-selections-active").length)return true};y.selectionsApi.getMenuMaxHeight=function(){return w.outerHeight()};y.selectWhileLocked=function(){f.showLockedFeedback(y.layout.qHyperCube.qDimensionInfo)};y.selectDimensionValue=function(e,n){y.scrollApi.updateViewport();y.scrollApi.scrollColumnInView(e.dataColIx,D.metaHeaders);if(e.representation===e.REPRESENTATION_URL&&t(n.target).is("a"))return;var i=e.type,r=e.dataRowIx,l=e.dataColIx;if(ot(y,l)||!y.selectionsApi.getKeyAsToggleSelected(n)){it();s.reset(y.selections)}function a(){var t=o.getCellsInRow(y.grid,i,r).filter(function(t){return t.dataColIx===l})[0];if(!t)return;V=s.selectDimensionValue(y.$id,y.backendApi,y.selectionsApi,y.selections,t,y.grid,true);var e=y.selectionsApi.watchActivated(function(){rt();e()})}D.whenUpdated().then(a)};y.activateSelections=function(t){y.scrollApi.updateViewport();V=s.activateSelections(y.$id,y.backendApi,y.selectionsApi,y.selections,t);var e=y.selectionsApi.watchActivated(function(){rt();e()})};y.multiselectDimensionValues=function(t,e){var n,i=o.getSiblingCells(y.grid,t),r=t.dataRowIx-t.rowIx,l=e.dataRowIx-e.rowIx,a=t.rowIx,c=e.rowIx;a+=r-l;a=Math.max(a,0);a=Math.min(a,i.length-1);function u(t){var e=i[t];e&&e.isDimensionValue&&s.selectDimensionCells(y.backendApi,y.selectionsApi,y.selections,y.grid,e,false)}if(a<=c)for(n=a;n<=c;++n)u(n);else if(a>c)for(n=a;n>=c;--n)u(n)};y.multiselect=function(){y.selections.active&&s.sendSelection(y.backendApi,y.selectionsApi,y.selections,y.grid,y.selections.currentCell)};y.sort=function(t){if(!t)return;y.scrollApi.updateViewport();var e=t.dataColIx,n=[].concat(y.layout.qHyperCube.qEffectiveInterColumnSortOrder),i=n[0],r="",o,s,l,a=y.layout.qHyperCube;if(e!==i){l=n.indexOf(e);u.move(n,l,0)}var c=[{qPath:"/qHyperCubeDef/qInterColumnSortOrder",qOp:"replace",qValue:"["+n.join(",")+"]"}];if(e===i){r=t.isDimension?"/qHyperCubeDef/qDimensions/":"/qHyperCubeDef/qMeasures/";o=_(e,a.qDimensionInfo,a.qMeasureInfo);t.reversed=!o.qReverseSort;s=t.isDimension?e:e-y.layout.qHyperCube.qDimensionInfo.length;r+=s+"/qDef/qReverseSort";c.push({qPath:r,qOp:"replace",qValue:t.reversed.toString()})}y.backendApi.applyPatches(c,true)};y.currentHeaderSearch=null;y.search=function(e,n){if(y.currentHeaderSearch===n){n.open=false;y.currentHeaderSearch=null;x.isSmallDevice?d.close():c.close();return}if(y.currentHeaderSearch){y.currentHeaderSearch.open=false;y.currentHeaderSearch=null}x.isSmallDevice?k(d,n.fieldName,y,e):k(c,n.fieldName,y,e).then(function(e){var i;Q(true);e.closing.then(function(e){if(e&&!t(e.target).closest(".qv-st-header-cell-search").length>0){y.currentHeaderSearch=null;n.open=false}i=e});e.closed.then(function(){e=null;n.open=false;i||(y.currentHeaderSearch=null);Q(false)});y.currentHeaderSearch&&y.currentHeaderSearch===n&&(e=null)});n.open=true;y.currentHeaderSearch=n};y.openUrl=function(t){y.linksInteractive&&h.open(t,"_blank")};y.options.externalInterface&&y.options.externalInterface.straightTableId&&y.$emit("straight-table-initialized",{id:y.options.externalInterface.straightTableId,grid:y.grid,headers:D.metaHeaders,scrollApi:y.scrollApi})}}}]);return{initialProperties:{qHyperCubeDef:{qDimensions:[],qMeasures:[],qSuppressMissing:true,qMode:"S",columnOrder:[],columnWidths:[],qColumnOrder:[]}},data:{dimensions:{min:function t(e){return e>0?0:1},max:1e3,description:function t(){return i.get("Visualizations.Descriptions.Column")},add:function t(e,n,i){var r=i.hcProperties.qColumnOrder,o=i.hcProperties.columnOrder,s=i.hcProperties.columnWidths,l=i.getDimensions().length-1;u.indexAdded(r,l);u.indexAdded(o,l);s.splice(l,0,-1);return e},remove:function t(e,n,i,r){var o=i.hcProperties.qColumnOrder,s=i.hcProperties.columnOrder,l=i.hcProperties.columnWidths;u.indexRemoved(o,r);u.indexRemoved(s,r);l.splice(o[r],1)}},measures:{min:function t(e){return e>0?0:1},max:1e3,description:function t(){return i.get("Visualizations.Descriptions.Column")},add:function t(e,n,i){var r=i.hcProperties.qColumnOrder,o=i.hcProperties.columnOrder,s=i.hcProperties.columnWidths,l=i.getDimensions().length+i.getMeasures().length-1;u.indexAdded(r,l);u.indexAdded(o,l);s.splice(r[l],0,-1)},remove:function t(e,n,i,r){var o=i.hcProperties.qColumnOrder,s=i.hcProperties.columnOrder,l=i.hcProperties.columnWidths,a=(i.hcProperties.qDimensions?i.hcProperties.qDimensions.length:0)+r;u.indexRemoved(o,a);u.indexRemoved(s,a);l.splice(a,1)}}},support:{cssScaling:true,snapshot:true,export:true,exportData:true,sharing:false},type:"table",template:"<qv-straight-table></qv-straight-table>",BackendApi:o,definition:s,migrate:{properties:function t(e){return w.migrateProperties(A.migrateProperties(e))},snapshot:function t(e){return w.migrateSnapshot(e)}},importProperties:function t(e,i,r){var o=c.hypercube.importProperties(e,i,r),s=o.qProperty.qHyperCubeDef.qColumnOrder,l=o.qProperty.qHyperCubeDef.qDimensions,a=o.qProperty.qHyperCubeDef.qMeasures,u=n.getService("qvGridObjectDataService");c.unquarantineObject(o.qProperty,"straightTableColumnWidths")||q.setValue(o,"qProperty.qHyperCubeDef.columnWidths",i.qHyperCubeDef.columnWidths.concat());a.forEach(function(t){""===t.qDef.qAggrFunc&&t.qDef.qExpressions&&0===t.qDef.qExpressions.length&&(t.qDef.qAggrFunc="Expr")});for(var d=0;d<l.length;d++){var p=l[d].qDef.representation;if(p&&p.urlLabel&&p.urlLabel.qStringExpression){var h=[];h.push({qExpression:p.urlLabel.qStringExpression.qExpr,id:"urlLabel"});q.setValue(o,"qProperty.qHyperCubeDef.qDimensions."+d+".qAttributeExpressions",h)}}if(!u.columnOrder.isValid(s,l,a,true)){o.qProperty.qHyperCubeDef.qColumnOrder=u.columnOrder.create(l,a);o.qProperty.qHyperCubeDef.columnOrder=o.qProperty.qHyperCubeDef.qColumnOrder.concat()}o.qProperty.qHyperCubeDef.qDimensions.forEach(function(t){t.qOtherTotalSpec&&t.qOtherTotalSpec.qTotalMode&&(t.qOtherTotalSpec.qTotalMode="TOTAL_OFF")});o.qProperty.qHyperCubeDef.qMeasures.forEach(V);c.unquarantineConditionalShow(o);return o},exportProperties:function t(e){var n=c.hypercube.exportProperties(e);c.quarantineProperty("qHyperCubeDef.columnWidths",n,"straightTableColumnWidths");c.quarantineConditionalShow(n);return n},controller:D}}.apply(e,i),void 0!==r&&(t.exports=r))},1128:function(t,e,n){"use strict";var i,r;!(i=[n(48),n(11),n(96),n(99)],r=function(t,e,n,i){t.directive("qvSelectionsToggleValue",["$parse",function(t){return{restrict:"A",link:function n(i,r,o){var s=t(o.qvSelectionsToggleValue)(),l=s.selector,a="."+i.$id+"-toggle-value",c=s.itemKey||"cell";r.on("qv-activate"+a,l,function(t){var n=e(t.target).closest(l),r=n.scope()[c];if(!n.length||!r)return;i.$apply(function(){var e={$event:t};e[c]=r;i.$eval(o.qvSelectionsOnToggleValue,e)})});i.$on("$destroy",function(){r.off(a)})}}}]);t.directive("qvSelectionsToggleDimensionValue",["$parse",function(t){return{restrict:"A",link:function n(i,r,o){var s=t(o.qvSelectionsToggleDimensionValue)(),l=s.selector,a="."+i.$id+"-toggle-dimension-value",c=s.itemKey||"cell";r.on("qv-activate"+a,l,function(t){var n=e(t.target).closest(l),r=n.scope()[c];if(i.$eval(o.qvSelectionsExcludeToggleDimensionValue,{$event:t}))return;if(!r||!r.isDimensionValue)return;if(r.locked){i.$eval(o.qvSelectionsSelectWhileLocked);return}i.$apply(function(){var e={$event:t};e[c]=r;i.$eval(o.qvSelectionsOnToggleDimensionValue,e)})});i.$on("$destroy",function(){r.off(a)})}}}]);t.directive("qvSelectionsMultiselect",["$parse",function(t){return{restrict:"A",controller:function t(){},link:function r(o,s,l,a){var c=t(l.qvSelectionsMultiselect)(),u=c.selector,d=c.itemKey||"cell",p=o.$id+"-multiselect",h=o.$id+"-2finger-multiselect",f,v,g,m;function b(){n(s[0]).tap({id:p,options:{preventDefault:false},start:function t(n){g=e(n.target).closest(u)}});n(s[0]).swipe({id:p,options:{radiusThreshold:4,preventDefault:false},start:function t(e){var n,r;if(!i.isMouse(e)||!g.length){this.cancel();return}n=g.scope()[d];if(!n.isDimensionValue){this.cancel();return}if(n.locked){o.$eval(l.qvSelectionsSelectWhileLocked);this.cancel();return}m=n;r={$event:e};r[d]=n;o.$apply(o.$eval(l.qvSelectionsStartMultiselect,r))},update:function t(n){var i=e(n.target).closest(u),r;if(!i.length)return;r=i.scope()[d];o.$apply(o.$eval(l.qvSelectionsUpdateMultiselect,{start:m,current:r,dataColIx:r.dataColIx}))},end:function t(e){o.$apply(o.$eval(l.qvSelectionsEndMultiselect,{$event:e}))}});return function(){n(s[0]).off("*",p)}}function C(){n(s[0]).tap({id:h,options:{touches:2,preventDefault:false},end:function t(n,i){var r=i.pagePoints[0],s=i.pagePoints[1],a,c,p,h,f,v,g;a=r?e(document.elementFromPoint(r.x,r.y)):void 0;c=s?e(document.elementFromPoint(s.x,s.y)):void 0;p=a?a.closest(u).scope():void 0;h=c?c.closest(u).scope():void 0;f=p?p[d]:void 0;v=h?h[d]:void 0;if(!(f&&v&&f.isDimensionValue&&v.isDimensionValue))return;if(f.locked||v.locked){o.$eval(l.qvSelectionsSelectWhileLocked);return}o.$apply(function(){g={offsetLeft:a[0].offsetLeft,width:a[0].clientWidth,$event:n};g[d]=f;o.$eval(l.qvSelectionsStartMultiselect,g);o.$eval(l.qvSelectionsUpdateMultiselect,{start:f,current:v,dataColIx:f.dataColIx});o.$eval(l.qvSelectionsEndMultiselect,{$event:n})})}});return function(){n(s[0]).off("*",h)}}a.on=function(){f||(f=b());v||(v=C())};a.off=function(){if(f){f();f=void 0}if(v){v();v=void 0}};o.$watch("interactive",function(t){if(void 0===t)return;t?a.on():a.off()});o.$on("$destroy",function(){a.off()})}}}])}.apply(e,i),void 0!==r&&(t.exports=r))},1147:function(t,e,n){"use strict";var i,r;!(i=[n(1648)],r=function(t){var e={create:n};return e;function n(){return new t}}.apply(e,i),void 0!==r&&(t.exports=r))},1267:function(t,e){t.exports='<div class="pp-component pp-list-component pp-list pp-nm-hcd" tcl="data">\n\t<div class="pp-nm-hcd__lists" qv-sortable-list="sortableItemLists">\n\n\t\t\x3c!-- Lists --\x3e\n\t\t<div class="pp-nm-hcd__list"\n\t\t\t ng-class="{ \n\t\t\t\t \'disabled\': list.disabled, \n\t\t\t\t \'empty\': isAutoChart && !getUndraggedItems(list).length,\t\t\t\t \n\t\t\t\t \'has-headerless-sibling\': list.hasHeaderlessSibling }"\n\t\t\t ng-if="list.show() !== false"\n\t\t\t ng-repeat="list in sortableItemLists.lists"\n\t\t\t tid="{{::list.tid}}">\n\t\t\t\n\t\t\t \x3c!-- List header --\x3e\n\t\t\t<div class="pp-nm-hcd__list-header" ng-class="{ \'descriptionless\': list.descriptionless }" ng-if="::!list.hideHeader">\n\t\t\t\t<span class="pp-nm-hcd__list-header-title">{{list.title}}</span>\n\t\t\t</div>\n\n\t\t\t\x3c!-- List body --\x3e\n\t\t\t<div class="pp-nm-hcd__list-body">\n\n\t\t\t\t<ul class="pp-nm-hcd__list-items">\n\t\t\t\t\t\n\t\t\t\t\t\x3c!-- Dimensions / measures --\x3e\n\t\t\t\t\t<li class="pp-nm-hcd__list-item" \n\t\t\t\t\t\tng-class="item.classList"\n\t\t\t\t\t\tng-repeat="item in list.items track by item.id"\n\t\t\t\t\t\tng-include="item.templateSrc">\n\t\t\t\t\t</li>\n\n\t\t\t\t\t\x3c!-- Next possible item - Description and add button --\x3e\n\t\t\t\t\t<li class="pp-nm-hcd__list-item" ng-show="showNextPossibleItem(list)">\n\t\t\t\t\t\t<div class="pp-nm-di">\n\t\t\t\t\t\t\t<div class="pp-nm-di__description" ng-if="showNextPossibleItemDescription(list)">\n\t\t\t\t\t\t\t\t{{getNextPossibleItemDescription(list)}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button class="lui-button lui-button--block pp-nm-di__add-button"\n\t\t\t\t\t\t\t\t\tng-class="{ \'lui-active\': list.adding }"\n\t\t\t\t\t\t\t\t\tng-click="list.addClicked($event)"\n\t\t\t\t\t\t\t\t\tqv-enter="list.addClicked($event)"\n\t\t\t\t\t\t\t\t\tqva-outside-ignore-for="{{::\'addButton-\' + $id}}"\n\t\t\t\t\t\t\t\t\ttid="add-hc-data">\n\t\t\t\t\t\t\t\t\t<span class="lui-button__text">{{list.getAddLabel()}}</span>\n\t\t\t\t\t\t\t\t\t<i class="toggle-expand lui-button__caret lui-caret" ng-if="hasMultipleAddOptions()"></i>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},1268:function(t,e,n){"use strict";var i,r;!(i=[n(1649)],r=function(t){var e={create:n};return e;function n(e,n){return new t(e,n)}}.apply(e,i),void 0!==r&&(t.exports=r))},1269:function(t,e,n){"use strict";var i,r;!(i=[n(54),n(446)],r=function(t,e){var n={gather:i};return n;function i(t){t=t||{};if(!r(t))return;e.put(t.expression,t.aggregation)}function r(e){return!!e.expression&&t.isString(e.expression)&&!!e.aggregation&&t.isString(e.aggregation)}}.apply(e,i),void 0!==r&&(t.exports=r))},1325:function(t,e,n){"use strict";var i,r;!(i=[n(48),n(96),n(165),n(99),n(272),n(91),n(321),n(402),n(1326),n(101),n(207),n(1647),n(1267),n(1147),n(1268),n(1269),n(111)],r=function(t,e,n,i,r,o,s,l,a,c,u,d,p,h,f,v){return{name:"columns",template:p,controller:["$scope","$element","$timeout","qvGridObjectDataService","luiPopover",function(p,g,m,b,C){var x=p.args.cache,q="columns_",S=n.getComponent("items"),y=h.create(),w=f.create(p,C);p.expandClicked=function(t,e){if(e.disabled||t.target.classList.contains("pp-nm-di__draggable"))return;e.expanded=!e.expanded;x.put(q+e.id,e.expanded)};var A=null,I=null,O=null;p.addClicked=function(t){E(t)};p.hasMultipleAddOptions=function(){return true};p.getAddLabel=function(){return o.get("properties.columns.add")};function E(t){if(p.adding){T();p.adding=false;return}var e=t.currentTarget;A=C.show({template:a.template,controller:a.controller,input:{items:[{tid:"dimension",select:function t(){k("dimension",e)},disabled:function t(){return p.args.handler.getDimensions().length>=p.args.handler.maxDimensions()},translation:"Common.Dimension"},{tid:"measure",select:function t(){k("measure",e)},disabled:function t(){return p.args.handler.getMeasures().length>=p.args.handler.maxMeasures()},translation:"Common.Measure"}],closeTypeFoldout:T},alignTo:e});A.closing.then(function(t){t&&!t.target.classList.contains("lui-button__text")&&(p.adding=false)});A.closed.then(function(){A=null});p.adding=true}function T(t){if(A){A.close();A=null}t&&t.target.classList.contains("pp-toplist-add-button")&&e.preventGestures();p.addType=null}function D(){var t=c.getValue(p.data,p.definition.sortIndexRef);if(void 0===t){t=b.columnOrder.create(p.args.handler.getDimensionLayouts(),p.args.handler.getMeasureLayouts());c.setValue(p.data,p.definition.sortIndexRef,t);p.$emit("saveProperties")}else if(t.length&&"number"!==typeof t[0]){c.setValue(p.data,p.definition.sortIndexRef,t.map(function(t){return t.dataColIx}));p.$emit("saveProperties")}}function R(){D();var t=c.getValue(p.data,p.definition.sortIndexRef),e=p.data.qHyperCubeDef.qDimensions.length;p.sortableItemLists.reset();y.resetTitles();t.forEach(function(t,n){var i,o,s,l,a,c,u,d;if(t<e){o=t;s=p.data.qHyperCubeDef.qDimensions[o];l="dimension";a=s.qDef.cId;i=p.definition.items.dimensions;u=p.args.handler.getDimensionLayout(a)}else{o=t-e;s=p.data.qHyperCubeDef.qMeasures[o];a=s.qDef.cId;l="measure";i=p.definition.items.measures;u=p.args.handler.getMeasureLayout(a);u||(u=p.args.handler.getMeasureLayouts()[o]);d=w.isChangeable(s)}if("dimension"===l){var h=u;c=y.getDimensionTitle(h,s,true)}else{var f=u;if(f){c=y.getCachedMeasureTitle(f);y.getMeasureTitle(f,s,true,p.args.app).then(function(t){c=t})}}var v={getItemLayout:function t(){return u},title:function t(){return c},isInvalid:function t(){if("dimension"===l){var e=this.getItemLayout();return e&&!!e.qError&&!r.isCalcCondNotCalculatedErr(e.qError)}var n=this.getItemLayout();return n&&!!n.qError},component:S,definition:{type:"items",items:i.items},data:s,args:p.args,id:a,expanded:x.get(q+a)||false,index:n,type:l,sourceIndex:o,dataColIx:t,templateSrc:"pp-data-item.ng.html",markerClass:"dimension"===l?"pp-dimension":"pp-measure",sortable:false!==p.definition.allowMove};if(d){v.canChangeMeasureAggregation=true;v.currentAggregation=w.getAggregation(s.qDef.qDef);v.remainder=w.getRemainder(s.qDef.qDef)}W.addSortableItem(v)})}function P(t){p.args.handler.addFieldDimension(t.value,"").then(function(){p.$emit("saveProperties",p.data);_();M()})}function L(t){p.args.handler.addLibraryDimension(t.libraryId).then(function(){p.$emit("saveProperties",p.data);_();M()})}function H(t){p.args.handler.addLibraryMeasure(t.libraryId).then(function(){p.$emit("saveProperties",p.data);_();M()})}function $(t){p.args.handler.addExpressionMeasure(t.value,"").then(function(){p.$emit("saveProperties",p.data);_();M()})}function k(t,e){p.addType=t;T();F();var n,i={app:p.args.app,closeAddPopover:_};if("dimension"===t){n=s;i.addFieldDimension=P;i.addLibraryDimension=L}else{n=l;i.addLibraryMeasure=H;i.addExpressionMeasure=$}I=C.show({template:n.template,controller:n.controller,input:i,alignTo:e,dock:"bottom"})}function _(t){if(I){I.close();I=null}t&&t.target.classList.contains("pp-toplist-add-button")&&e.preventGestures();p.adding=false}p.removeItem=function(t){"dimension"===t.type?p.args.handler.removeDimension(t.sourceIndex).then(function(){p.$emit("saveProperties")}):p.args.handler.removeMeasure(t.sourceIndex).then(function(){p.$emit("saveProperties")})};p.openContextMenu=function(e,n){var i=t.getService("qvContextMenu").menu();i.addItem({translation:"Common.Delete",tid:"delete",select:function t(){p.removeItem(n)}});O=t.getService("qvContextMenu").show(i,{position:{x:e.pageX,y:e.pageY},docking:"Top"})};function M(){m(function(){var t=g.find(".pp-nm-hcd__lists"),e=t.find(".pp-nm-hcd__list-items").children().last();e[0]&&(t[0].scrollTop=e[0].offsetTop-1)},100)}p.$on("pp-open-path",function(t,e){var n=e.split("."),i=n[0],r=n[1];if("columns"===i&&r){x.put(q+r,true);M()}});p.add=function(t){t&&t.trim().length&&("measure"===p.addType?$({value:t,label:t}):"dimension"===p.addType&&P({value:t,label:t}))};p.sortableItemLists=u.create({options:{direction:"vertical",listKey:"list",scrollSelector:".pp-nm-hcd__lists",listSelector:".pp-nm-hcd__list-items",itemKey:"item",itemSelector:".qv-pp-sortable.draggable",itemDragSelector:".qv-pp-sortable-handle",itemGhostSelector:".pp-nm-di__header",gesture:{name:"swipe",options:{radiusThreshold:i.treatAsDesktop()?4:0,preventDefault:false}}},addPlaceholder:function t(){var e=this._super.apply(this,arguments);e.classList=["qv-pp-sortable"]},onBegin:function t(e){this._super.apply(this,arguments);e.isDragged=true;F()},onMove:function t(){var e=this.getIndexOfItem(arguments[0]),n;if(-1===e){this.onCancel();return false}this._super.apply(this,arguments);n=this.getIndexOfItem(arguments[0]);if(-1===n){this.onCancel();return false}n<e&&e--;p.data.qHyperCubeDef.qColumnOrder=W.get().filter(function(t){return"empty-item"!==t.id}).map(function(t){return t.dataColIx});d.fixTableHypercubeOrders(p.data.qHyperCubeDef);d.updateColumnInfoOrders(p.data.qHyperCubeDef,e,n);p.$emit("saveProperties");return true},onCancel:function t(e){this._super.apply(this,arguments);e&&(e.isDragged=false)},onEnd:function t(e){e&&(e.isDragged=false);p.$apply()}});var W=p.sortableItemLists.createList(1,{title:o.get("Common.Columns"),tid:"columns",getAddLabel:p.getAddLabel,addClicked:p.addClicked,descriptionless:true});function F(){W.items.forEach(function(t){t.expanded=false;x.put(q+t.id,false)})}p.isItemDraggable=function(t){if(!t.sortable)return false;var e=p.args.properties.qHyperCubeDef,n=e.qDimensions.length+e.qMeasures.length;return n>1};p.showChangeAggregation=function(t){return t.canChangeMeasureAggregation&&!t.isDragged};p.getItemHeaderTitle=function(t){return p.showChangeAggregation(t)?t.remainder:t.title()};p.openChangeAggregationPopover=function(t,e){if(!p.showChangeAggregation(e))return;var n={isOpenButton:function t(e){return e.classList.contains("pp-nm-di__header-aggregation")},onAggregationChanged:function t(e,n){v.gather({expression:e.extractedField,aggregation:n})}};w.openPopover(t,e.id,e,n)};p.isChangeAggregationPopoverOpen=function(t){return w.isPopoverOpen(t.id)};p.showItemDescription=function(){return false};p.showNextPossibleItem=function(t){var e=p.getUndraggedItems(t),n=0,i=0,r=0,o=0;e.forEach(function(t){"dimension"===t.type?n++:i++});r=p.args.handler.dimensionDefinition.max-n;o=p.args.handler.measureDefinition.max-i;return!!r||!!o};p.showNextPossibleItemDescription=function(){return false};p.getUndraggedItems=function(t){return t.get(function(t){return!t.isDragged})};p.$watchCollection("data.qHyperCubeDef.qColumnOrder",R);p.$watchCollection("data.qHyperCubeDef.qDimensions",R);p.$watchCollection("data.qHyperCubeDef.qMeasures",R);p.$on("$destroy",function(){T();_();O&&O.close()})}]}}.apply(e,i),void 0!==r&&(t.exports=r))},1326:function(t,e,n){"use strict";var i,r;!(i=[n(1646)],r=function(t){return{template:t,controller:["$scope",function(t){t.itemClicked=function(t,e){t.preventDefault();e.disabled()||e.select()}}],scope:{items:"=",alignTo:"=",closeTypeFoldout:"=",qvaOutsideIgnoreFor:"="}}}.apply(e,i),void 0!==r&&(t.exports=r))},1327:function(t,e,n){"use strict";var i,r;!(i=[n(54),n(178),n(187)],r=function(t,e,n){var i={addAggregation:r};return i;function r(i,r){if(!t.isString(i))throw new Error("Expression-assembler: Aggregation must be a string");if(!t.isString(r))throw new Error("Expression-assembler: Content must be a string");var o=n.SYMBOLS.FUNCTION.LEFT,s=n.SYMBOLS.FUNCTION.RIGHT;var l=e.getFormattedAggregation(i);var a=l+o+r+s;return a}}.apply(e,i),void 0!==r&&(t.exports=r))},1629:function(t,e,n){"use strict";var i,r;function o(t){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return o(t)}!(i=[n(383),n(90),n(101),n(91),n(160),n(113),n(99)],r=function(t,e,n,i,r,s,l){var a={textAlignAuto:{ref:"qDef.textAlign.auto",type:"boolean",component:"switch",translation:"Common.Text.TextAlignment",options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],defaultValue:true},textAlign:{ref:"qDef.textAlign.align",type:"string",component:"dropdown",options:[{value:"left",translation:"Common.Text.AlignLeft"},{value:"right",translation:"Common.Text.AlignRight"}],defaultValue:"left",show:function t(e){return void 0!==e.qDef.textAlign&&!e.qDef.textAlign.auto}}};var c={representationType:{ref:"qDef.representation.type",type:"string",component:"dropdown",translation:"Object.Table.Representation",options:[{value:"text",translation:"Object.Table.Representation.Text"},{value:"url",translation:"Object.Table.Representation.Url"}],defaultValue:"text",show:function t(e){if("object"!==o(e.qDef.representation)){var n=e.qDef.representation||"text";e.qDef.representation={type:n}}return true}},representationUrl:{ref:"qDef.representation.urlLabel",type:"string",expression:"optional",translation:"Object.Table.Representation.Url.Label",defaultValue:"",change:function t(e){var n=r.getIndexById(e.qAttributeExpressions,r.IDMAP.CELL_URL_LABEL);if(e.qDef.representation.urlLabel.qStringExpression){var i=e.qDef.representation.urlLabel.qStringExpression.qExpr;-1===n?e.qAttributeExpressions.push(r.create(r.IDMAP.CELL_URL_LABEL,{qExpression:i})):e.qAttributeExpressions[n].qExpression=i}else e.qAttributeExpressions&&n>-1&&e.qAttributeExpressions.splice(n,1)},show:function t(e){var n=e.qDef.representation;return n&&"url"===n.type}}};var u={tableCellColoring:{component:"attribute-expression-reference",defaultValue:[],ref:"qAttributeExpressions",items:[{component:"expression",ref:"qExpression",expressionType:"measure",translation:"Object.Table.Measure.BackgroundExpression",defaultValue:"",id:r.IDMAP.CELL_BACKGROUND_COLOR,tid:"tableColorBgByExpression"},{component:"expression",ref:"qExpression",expressionType:"measure",translation:"Object.Table.Measure.ForegroundExpression",defaultValue:"",id:r.IDMAP.CELL_FOREGROUND_COLOR,tid:"tableColorByExpression"}]},totalsAggr:{type:"items",items:{totalsAggrFunc:{type:"string",component:"dropdown",ref:"qDef.qAggrFunc",translation:"Object.Table.AggrFunc",options:[{value:"Expr",translation:"Common.Auto"},{value:"Avg",translation:"Object.Table.AggrFunc.Avg"},{value:"Count",translation:"Object.Table.AggrFunc.Count"},{value:"Max",translation:"Object.Table.AggrFunc.Max"},{value:"Min",translation:"Object.Table.AggrFunc.Min"},{value:"Sum",translation:"Object.Table.AggrFunc.Sum"},{value:"None",translation:"Object.Table.AggrFunc.None"}],defaultValue:"Expr"},totalsAggrFuncMessage:{component:"text",translation:"Object.Table.AggrFuncMessage",show:function t(e,i){return i&&!n.getValue(i,"properties.totals.show")&&"noTotals"===n.getValue(i,"properties.totals.position")}}}}};var d={tableCellColoring:{component:"attribute-expression-reference",defaultValue:[],ref:"qAttributeExpressions",items:[{component:"expression",ref:"qExpression",expressionType:"measure",translation:"Object.Table.Measure.BackgroundExpression",defaultValue:"",id:r.IDMAP.CELL_BACKGROUND_COLOR,tid:"tableColorBgByExpression"},{component:"expression",ref:"qExpression",expressionType:"measure",translation:"Object.Table.Measure.ForegroundExpression",defaultValue:"",id:r.IDMAP.CELL_FOREGROUND_COLOR,tid:"tableColorByExpression"},{component:"expression",ref:"qExpression",expressionType:"measure",defaultValue:"",id:r.IDMAP.CELL_URL_LABEL,tid:"URLLabelByExpression",show:false}]}};var p={visibilityCondition:{type:"string",component:"expression",ref:"qCalcCondition.qCond",expression:"optional",expressionType:"ValueExpr",translation:"Object.Table.Columns.VisibilityCondition",defaultValue:{qv:""},tid:"visibilityCondition",isExpression:function t(e){return"string"===typeof e&&e.trim().length>0}}};var h={uses:"settings",items:{presentation:{type:"items",translation:"properties.presentation",items:[{ref:"totals.show",type:"boolean",translation:"properties.totals",component:"switch",options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],defaultValue:true},{ref:"totals.position",translation:"Common.Position",type:"string",component:"dropdown",options:[{value:"noTotals",translation:"Common.None"},{value:"top",translation:"Common.Top"},{value:"bottom",translation:"Common.Bottom"}],defaultValue:"noTotals",show:function t(e){return!e.totals.show}},{ref:"totals.label",translation:"properties.totals.label",type:"string",expression:"optional",defaultValue:function t(){return i.get("Object.Table.Totals")}}]}}};if(s.ST_HSCROLL){h.items.presentation.grouped=true;h.items.presentation.items=[{type:"items",items:h.items.presentation.items},{type:"items",translation:"Object.Table.Scrolling",items:[{component:"text",translation:"Object.Table.Scrolling"},{ref:"scrolling.keepFirstColumnInView",type:"boolean",translation:"Object.Table.Scrolling.KeepFirstColumnInView",component:"checkbox",defaultValue:false},{ref:"scrolling.horizontal",type:"boolean",translation:"Object.Table.Scrolling.HorizontalScroll",component:"checkbox",defaultValue:true}],show:function t(){return l.treatAsDesktop()}},{type:"items",translation:"Object.Table.WrapText",items:[{component:"text",translation:"Object.Table.Multiline"},{ref:"multiline.wrapTextInHeaders",type:"boolean",translation:"Object.Table.Multiline.WrapTextInHeaders",component:"checkbox",defaultValue:true},{ref:"multiline.wrapTextInCells",type:"boolean",translation:"Object.Table.Multiline.WrapTextInCells",component:"checkbox",defaultValue:true}]}]}var f={type:"items",component:"expandable-items",translation:"properties.addons",items:{dataHandling:{uses:"dataHandling",items:{calcCond:{uses:"calcCond"}}}}};var v={type:"items",component:"columns",translation:"Common.Data",sortIndexRef:"qHyperCubeDef.qColumnOrder",allowMove:true,allowAdd:true,addTranslation:"Common.Columns",items:{dimensions:{type:"array",component:"expandable-items",ref:"qHyperCubeDef.qDimensions",grouped:true,items:e.extend(true,{},t.dimensions.items,p,d,a,c)},measures:{type:"array",component:"expandable-items",ref:"qHyperCubeDef.qMeasures",grouped:true,items:e.extend(true,{},t.measures.items,p,u,a)}}};var g={uses:"sorting"};return{type:"items",component:"accordion",items:{data:v,sorting:g,addons:f,settings:h}}}.apply(e,i),void 0!==r&&(t.exports=r))},1630:function(t,e){t.exports='<div class="qv-st" ng-class="{ \'qv-st-interactive\': interactive,\n\t\t\'qv-st-links-interactive\': linksInteractive,\n\t\t\'align-column-picker\': scrollApi.settings.columnPicker.show,\n\t\t\'qv-st-selections-active\': selections.active,\n\t\t\'qv-st-virtual-scroll-enabled\': scrollApi.virtualScrollEnabled,\n\t\t\'qv-st-navigatable\': navigatable,\n\t\t\'qv-rtl-layout\': rtl,\n\t\t\'qv-st-nowrap-in-headers\': !multiline.wrapTextInHeaders,\n\t\t\'qv-st-nowrap-in-cells\': !multiline.wrapTextInCells,\n\t\t\'qv-st-reordering-active\': reorderingColumn\n\t}" ng-keydown="handleKeyDown($event)" ng-keyup="handleKeyUp($event)"\n\tng-click="onClick($event)"\n\tng-focus="setFocus()"\n\ttabindex="-1" role="grid">\n\t<div class="qv-st-header-wrapper" dir="{{direction}}">\n\t\t<qv-table-column-width-adjuster\n\t\t\t\tmin-col-width="scrollApi.settings.column.minColWidth"\n\t\t\t\tng-if="navigatable && !selections.active"\n\t\t\t\tcolumns="columns"\n\t\t\t\texplicit-column-widths="visibleExplicitColumnWidths"\n\t\t\t\tx-rtl="rtl"\n\t\t\t\tdir="{{direction}}">\n\t\t</qv-table-column-width-adjuster>\n\t\t<qv-straight-table-top-header></qv-straight-table-top-header>\n\t</div>\n\t<qv-scroll-area class="qv-grid-object-scroll-area qv-animate" dir="{{direction}}"\n\t\t\t\t\tx-direction="direction">\n\t\t<qv-straight-table-data qv-selections-select-while-locked="selectWhileLocked()"\n\t\t\t\t\t\t\t\tqv-selections-toggle-dimension-value="{ selector: \'.qv-st-data-cell\'}"\n\t\t\t\t\t\t\t\tqv-selections-on-toggle-dimension-value="interactive && selectDimensionValue(cell, $event)"\n\t\t\t\t\t\t\t\tqv-selections-multiselect="{ selector: \'.qv-st-data-cell:not(.qv-st-data-cell-null-value)\' }"\n\t\t\t\t\t\t\t\tqv-selections-start-multiselect="interactive && activateSelections(cell)"\n\t\t\t\t\t\t\t\tqv-selections-update-multiselect="interactive && multiselectDimensionValues(start, current, dataColIx)"\n\t\t\t\t\t\t\t\tqv-selections-end-multiselect="interactive && multiselect()"></qv-straight-table-data>\n\t</qv-scroll-area>\n\t<qv-straight-table-bottom-header></qv-straight-table-bottom-header>\n\t<qv-scroll-loader></qv-scroll-loader>\n\t<qv-straight-table-column-picker-activator ng-if="scrollApi.settings.columnPicker.show"></qv-straight-table-column-picker-activator>\n</div>\n'},1631:function(t,e,n){"use strict";var i,r;!(i=[n(11)],r=function(t){function e(e,n,i,r){var o=i.top+i.height,s,l;var a=0;while(a<e.length){if(t(e[a]).offset().top+t(e[a]).height()>i.top){s=e[a];break}a++}a=e.length-1;while(a>=0){if(t(e[a]).offset().top<o){l=e[a];break}a--}if(!s||!l||n<=0)return{index:1,height:r?2:1,width:n||1};var c=t(s).scope().row.getIndex(),u=t(l).scope().row.getIndex();return{index:c,height:u-c+1,width:n}}return{getIndexHeightAndWidth:e}}.apply(e,i),void 0!==r&&(t.exports=r))},1632:function(t,e,n){"use strict";var i,r;!(i=[n(11),n(179)],r=function(t,e){var n=e.extend({init:function t(e,n,i,r,o,s,l,a){this.snapshotObject=l;this.options=a;this._super.apply(this,arguments)},getBoundingBox:function t(){var e;e=this.options.freeResize?this.$element[0].getBoundingClientRect():{height:this.snapshotObject.size.h,width:this.snapshotObject.size.w};return e},getScrollAreaClientWidth:function t(){if(!this.options.freeResize)return this.snapshotObject.size.w;return this._super.apply(this,arguments)},bindNativeHorizontalScroll:function t(){}});var i=e.extend({getScrollAreaClientHeight:function t(){var e=this.getScrollAreaBoundingBox();var n=this.getBoundingBox();return n.bottom-e.top},getScrollAreaBoundingBox:function e(){return t.extend(true,{},this._super.call(this))},getScrollAreaClientWidth:function t(){return this.$element.width()}});var r=i.extend({init:function t(e,n,i,r,o,s,l){this._super.apply(this,arguments);this.columnPicker=l},getBoundingBox:function e(){var n=t.extend(true,{},this._super.call(this));this.$element.find(".qv-st-column-picker").length>0&&(n.width+=this.columnPicker.width);return n}});var o=i.extend({init:function t(e){var n=Array.prototype.slice.call(arguments);n[0]=e.closest(".qv-object-content-container");this._super.apply(this,n);this.$element.css("-webkit-overflow-scrolling","touch");this.$element.find(".qv-object-content").first().css({overflow:"hidden",width:"inherit"})},destroy:function t(){this._super();this.unbindNativeHorizontalScroll();this.$element.find(".qv-object-content").first().css({overflow:"hidden",width:"100%"})},unbindNativeHorizontalScroll:function t(){this.$element.off("scroll"+this.namespace)},bindNativeHorizontalScroll:function t(e){this.$element.on("scroll"+this.namespace,e)},getScrollAreaBoundingBox:function t(){var e=this._super.call(this);e.width=this.$element[0].clientWidth+this.$element[0].scrollLeft;e.right=e.left+e.width;return e},getScrollAreaClientWidth:function t(){return this.$element[0].clientWidth},updateHorizontalScroll:function t(e){e.locked?this.$element.css({overflow:"hidden"}):this.$element.css({overflow:e.tableWidth>e.viewportWidth+1?"auto":"",direction:e.direction})},getHorizontalScroll:function t(){return this.$element.scrollLeft()},setHorizontalScroll:function t(e){this.$element.scrollLeft(e)}});var s=i.extend({});function l(t,e,i,l){var a=".qv-st-data-row",c=".qv-grid-object-data-first-row",u=".qv-grid-object-data-last-row";if(t.backendApi.isSnapshot)return new n(e,i,a,"","",null,t.layout.snapshotData.object,t.options);if(!l.horizontalScroll.enabled)return new r(e,i,a,c,u,null,l.columnPicker);if(l.horizontalScroll.useNativeScroll)return new o(e,i,a,c,u);return new s(e,i,a,c,u)}return{create:l,SnapshotScrollDOMApi:n,ColumnPickerTableScrollDOMApi:r,NativeHorizontalTableScrollDOMApi:o,VirtualHorizontalTableScrollDOMApi:s}}.apply(e,i),void 0!==r&&(t.exports=r))},1633:function(t,e,n){"use strict";var i,r;!(i=[n(206)],r=function(t){var e=t.extend({interactive:false,init:function t(e,n){this._super(e,n);if(!this.virtualScrollEnabled){this.settings.horizontalScroll.useVirtualScroll=false;this.settings.horizontalScroll.enabled=this.settings.horizontalScroll.useVirtualScroll||this.settings.horizontalScroll.useNativeScroll}this.direction="ltr"},initialize:function t(e,n,i,r){var o;this.settings.horizontalScroll.enabled&&this.settings.horizontalScroll.useNativeScroll&&e.bindNativeHorizontalScroll(function(){i.fadeScrollbarsWithoutDelay();this.$timeout.cancel(o);o=this.$timeout(function(){i.fadeInScrollbars();this.setVirtualSize(true)}.bind(this),100)}.bind(this));return this._super(e,n,i,r)},activate:function t(){this._super();this.interactive=true},deactivate:function t(){this._super();this.interactive=false},setDirection:function t(e){this.direction=e;this.domApi.setDirection(e)},updateHorizontalScroll:function t(){if(!(this.settings.horizontalScroll.enabled&&this.interactive))return;this.settings.horizontalScroll.useNativeScroll&&this.domApi.updateHorizontalScroll({locked:this.horizontalPositionLocked,viewportWidth:this.settings.width-(this.settings.columnPicker.show?this.settings.columnPicker.width:0),tableWidth:this.getAllColumnsWidth()})},columnWidths:null,updateMetaHeaders:function t(e,n,i){this.columnWidths=e.reduce(function(t,e){e.isFillColumn||(e.isSearchIcon?t.length>0&&(t[t.length-1]+=e.calculatedWidth):t.push(e.calculatedWidth));return t},[]);if(this.settings.horizontalScroll.enabled&&this.settings.horizontalScroll.useVirtualScroll){var r=this.domApi.getScrollAreaClientWidth()-this.getLockedColumnsWidth();var o=this.settings.horizontalScroll.keepFirstColumnInView;var s=this.virtualScrollApi.getVirtualPosition();var l=i||Math.floor(s.vPosX/this.settings.minColumnWidth);var a=this.columnWidths;var c=o?1:0;var u=0;n&&n.lockScrollPosition||this.updateViewportColumns(this.domApi.getScrollAreaClientWidth());l=Math.min(l,this.getScrollableColumnsCount()-this.viewportColumns);var d=-1;var p=0;e.forEach(function(t){if(t.isFillColumn)return;if(!t.isSearchIcon){d+=1;p=a[d]}if(0===d&&o)t.shouldBeRemoved=false;else if(d<l+c)t.shouldBeRemoved=true;else if(u>=r)t.shouldBeRemoved=true;else{(t.isSearchIcon||t.isMeasure)&&(u+=p);t.shouldBeRemoved=false}});for(var h=e.length-1;h>=0;--h)e[h].shouldBeRemoved&&e.splice(h,1)}},scrollColumnInView:function t(e,n){if(!this.settings.horizontalScroll.enabled)return;function i(t){if(!t)return 0;return t.reduce(function(t,e){return t+e},0)}var r=n.filter(function(t){return!t.isSearchIcon&&!t.isFillColumn});var o=r.filter(function(t){return t.dataColIx===e})[0];if(o){var s=o.qLeft;var l=i(this.columnWidths.slice(0,s));var a=this.columnWidths[s];var c=this.domApi.getScrollAreaClientWidth();if(this.settings.horizontalScroll.useNativeScroll){var u=this.domApi.getHorizontalScroll();u>l?u=Math.max(0,l-5):u+c<l+a&&(u=l+a-c+5);u!==this.domApi.getHorizontalScroll()&&this.domApi.setHorizontalScroll(u)}else{var d=this.virtualScrollApi.getVirtualPosition();var p=Math.floor(d.vPosX/this.settings.minColumnWidth);var h=this.columnWidths.slice();if(this.settings.horizontalScroll.keepFirstColumnInView){var f=h.shift();l-=f;c-=f;s--}p>0&&(l-=i(h.slice(0,p)));if(l+a>c){var v=a,g=s;for(var m=s-1;m>=0;--m){v+=h[m];if(v>c)break;g=m}this.virtualScrollApi.setVirtualViewport({width:(s-g+1)*this.settings.minColumnWidth,height:this.domApi.getVisibleRowCount(this.settings.maxRowHeight)*this.settings.minRowHeight});this.virtualScrollApi.scroll(g*this.settings.minColumnWidth-d.vPosX,0)}}}},horizontalPositionLocked:false,lockHorizontalScrollPosition:function t(e){if(!this.settings.horizontalScroll.enabled)return;this.horizontalPositionLocked=e;this.settings.horizontalScroll.useNativeScroll?this.updateHorizontalScroll():this.virtualScrollApi.setHorizontalScrollInteractive(!e)},getVirtualScrollAmount:function t(e,n,i){this.horizontalPositionLocked&&(e=0);if(this.settings.horizontalScroll.enabled){0!==e&&0!==n&&(Math.abs(e)>Math.abs(n)?n=0:e=0);if(i===this.DELTA_MODE.LINE)return{deltaX:e*this.settings.minColumnWidth,deltaY:this.settings.minRowHeight*n};if(i===this.DELTA_MODE.PAGE){var r=Math.max(0,this.domApi.getVisibleRowCount()-1);return{deltaX:this.getVisibleColumnCount()*this.settings.minColumnWidth*e,deltaY:r*this.settings.minRowHeight*n}}}return this._super(e,n,i)},getLockedColumnsWidth:function t(){var e=0;this.settings.horizontalScroll.enabled&&this.settings.horizontalScroll.keepFirstColumnInView&&this.columnWidths&&this.columnWidths.length>0&&(e=this.columnWidths[0]);return e},getAllColumnsWidth:function t(){if(!this.columnWidths)return 0;return this.columnWidths.reduce(function(t,e){return t+e},0)},getScrollableColumnsWidth:function t(){if(!this.columnWidths||0===this.columnWidths.length)return 0;var e=0;this.settings.horizontalScroll.enabled&&this.settings.horizontalScroll.keepFirstColumnInView&&(e=1);return this.columnWidths.slice(e).reduce(function(t,e){return t+e},0)},getScrollableColumnsCount:function t(){if(!this.columnWidths)return 0;var e=this.columnWidths.length;this.settings.horizontalScroll.enabled&&this.settings.horizontalScroll.keepFirstColumnInView&&(e-=1);return e},updateViewportColumns:function t(e){var n=0;var i=0;if(this.settings.horizontalScroll.keepFirstColumnInView){n+=this.columnWidths[0];i=1}this.viewportColumns=0;for(var r=this.columnWidths.length-1;r>=i;--r){n+=this.columnWidths[r];n<=e&&this.viewportColumns++;if(n>e)break}},getViewportColumns:function t(){if(this.settings.horizontalScroll.enabled)return this.viewportColumns;return this.getScrollableColumnsCount()},getVisibleColumnCount:function t(){var e=this.getPage();var n=0;var i=Math.ceil(this.domApi.getScrollAreaClientWidth());var r=0;for(var o=e.left;o<this.columnWidths.length;o++){r+=this.columnWidths[o];if(!(r<=i&&0!==this.columnWidths[o]))break;n++}return n},countColumnsToScrollOut:function t(e){var n=this.getPage();var i=this.getVisibleColumnCount();var r=this.columnWidths.slice(n.left);var o=r.splice(i).slice(0,e);var s=this.domApi.getScrollAreaClientWidth();var l=s-r.reduce(function(t,e){return t+e},0);if(!o.length)return 0;o[0]=o[0]-l;var a=o.reduce(function(t,e){return t+e},0);return r.reduce(function(t,e){t+=a>0?1:0;a-=e;return t},0)},onSetVirtualSize:function t(e){var n,i=this.domApi.getScrollAreaBoundingBox(),r=this.domApi.getScrollContentBoundingBox(),o=this.virtualScrollApi.getVirtualPosition(),s=this.settings.minRowHeight*this.totalRows,l=this.getViewportColumns(),a,c,u;var d=this.getLockedColumnsWidth();var p=this.getScrollableColumnsCount();if("reduce"===this.settings.alignToBottom){n=this.domApi.getVisibleRowCount(this.settings.maxRowHeight);r.height>=i.height&&this.settings.viewportRowCount>=this.totalRows&&n<this.settings.viewportRowCount&&(this.settings.viewportRowCount=n);c={width:l*this.settings.minColumnWidth,height:n*this.settings.minRowHeight}}else c={width:l*this.settings.minColumnWidth,height:i.height};a={width:this.settings.minColumnWidth*p,height:s};u={top:0,left:"rtl"!==this.direction?d:0,width:i.width-d,height:i.height};this.virtualScrollApi.setVirtualSize(a,c,u);e?this.virtualScrollApi.scroll(o.vPosX,o.vPosY,true):this.virtualScrollApi.scroll(Math.min(o.vPosX,(p-l)*this.settings.minColumnWidth),0,true)},updateVirtualViewport:function t(){var e=this.domApi.getVisibleRowCount(this.settings.maxRowHeight);var n=this.domApi.getScrollAreaBoundingBox();var i=this.getLockedColumnsWidth();this.virtualScrollApi.setViewport({top:0,left:"rtl"!==this.direction?i:0,width:n.width-i,height:n.height});this.virtualScrollApi.setVirtualViewport({width:this.getViewportColumns()*this.settings.minColumnWidth,height:e*this.settings.minRowHeight})},onVirtualScroll:function t(e,n){this.Scroll.emit();var i=this.virtualScrollApi.getVirtualPosition(),r=this.domApi.getVisibleRowCount(this.settings.maxRowHeight),o=this.getPage(i);if(o.top>0&&o.top+r>this.totalRows){o.top=Math.max(0,this.totalRows-r);o.height=Math.min(this.totalRows,o.height)}if(o.left>0&&o.left+o.width>this.totalColumns){o.left=Math.max(0,this.totalColumns-o.width);o.width=Math.min(this.totalColumns,o.width)}this.axisDelta.xAxis=e;this.axisDelta.yAxis=n;return this.dataApi.onVirtualScroll(o.top,o.height,o.left,o.width,e,n).then(function(){this.updateVirtualViewport()}.bind(this)).catch(function(t){false})}});return e}.apply(e,i),void 0!==r&&(t.exports=r))},1634:function(t,e,n){"use strict";var i,r;!(i=[n(48),n(167),n(1635)],r=function(t,e){t.service("qvGridKeyboardNavigationService",function(){var t={HEADERS:"headers",DATA:"data",FOOTER:"footer"};function n(e){var n=e.getCell(0,0);return{cell:n,area:t.DATA}}function i(e){return e.area===t.DATA}function r(e){return e.area===t.HEADERS}function o(e){return e.area===t.FOOTER}function s(e,n){switch(n.area){case t.HEADERS:return e.getHeaderCell(n.row,n.col);case t.DATA:return e.getCell(n.row,n.col);case t.FOOTER:return e.getFooterCell(n.row,n.col)}}function l(t,e){var n=t.getHeaderRow(0);var i;var r=0;for(i=0;i<=e;i++)n.cells[i].isSearchIcon&&r++;return e-r}function a(t,e){var n=t.getHeaderRow(0);var i;var r=0;for(i=0;i<=e+r;i++)n.cells[i].isSearchIcon&&r++;return e+r}function c(t){return r(t)&&0===t.cell.rowIx}function u(t,e){var n=t.headerRows[0];var i=n.cells.length;var r;var o=i;for(r=0;r<i;r++)e?n.cells[r].isFillColumn&&o--:(n.cells[r].isFillColumn||n.cells[r].isSearchIcon)&&o--;return o}function d(t){var e=t.domApi.getVisibleRowCount(t.settings.maxRowHeight);return Math.max(0,e-1)}function p(t,e,n){var i=n.getVisibleColumnCount();var r=h(t,i,e)-1;if(e){var o=t.headerRows[0];o.cells[r].isSearchIcon&&r--}return r}function h(t,e,n){var i=t.headerRows[0];var r=0;if(!n)return e;return i.cells.reduce(function(t,n){n.isSearchIcon||r++;if(r>e||n.isFillColumn)return t;return t+1},0)}function f(t,e){var n=e.domApi.getHeightOfRow(t)||e.settings.minRowHeight;var i=0;var r;for(r=0;r<t;r++){if(i>=n)break;i+=Math.max(e.domApi.getHeightOfRow(r),e.settings.minRowHeight)}return r}function v(t){return t.rowList.rows.length}function g(t){return t.footerList.rows.length>0}function m(t){var e=t.getPage();return e.top>0}function b(t){var e=t.getPage();var n=t.domApi.getVisibleRowCount();return t.interactive&&e.top+n<t.totalRows}function C(t){var e=t.getPage();var n=t.getVisibleColumnCount();return t.interactive&&e.left+n<t.totalColumns}function x(e,n,s){var l=n.cell.rowIx;var c=n.cell.colIx;var u=t.DATA;if(i(n)&&0===l)if(m(s))s.scroll(0,-1,s.DELTA_MODE.LINE);else{l=e.headerRows.length-1;u=t.HEADERS;0===l&&(c=a(e,c))}else if(r(n)){if(l>0){l--;0===l&&(c=a(e,c))}u=t.HEADERS}else if(o(n)){u=t.DATA;l=v(e)-1}else if(l>0){l--;u=t.DATA}return{area:u,row:l,col:c}}function q(e,n,i){var s=n.cell.rowIx;var a=n.cell.colIx;var c=t.DATA;if(r(n)&&s===e.headerRows.length-1){0===s&&(a=l(e,a));s=0;c=t.DATA}else if(r(n)&&s<e.headerRows.length-1){0===s&&(a=l(e,a));s++;c=t.HEADERS}else if(o(n))c=t.FOOTER;else{c=t.DATA;var u=d(i);if(s<u)s++;else if(b(i)){var p=f(u+1,i);s-=p-1;i.scroll(0,p,i.DELTA_MODE.LINE)}else if(g(e)){s=0;c=t.FOOTER}}return{area:c,row:s,col:a}}function S(e,n,i){var l=n.cell.rowIx;var a=n.cell.colIx;var c=t.DATA;r(n)?c=t.HEADERS:o(n)&&(c=t.FOOTER);if(a>0)a--;else{var u=i.getPage();u.left>0&&i.scroll(-1,0,i.DELTA_MODE.LINE)}if(c===t.HEADERS&&0===l){var d=s(e,{area:c,row:l,col:a});d.isSearchIcon&&(0===a?a++:a--)}return{area:c,row:l,col:a}}function y(e,n,i){var r=n.cell.rowIx;var o=n.cell.colIx;var l;var a=n.area;var d=c(n);var f=false;l=p(e,d,i);if(o<l)o++;else if(C(i)){var v=i.countColumnsToScrollOut(1);var g=s(e,{area:a,row:r,col:o+1});g.isSearchIcon&&o++;o-=h(e,v,d)-1;f=true;i.scroll(v,0,i.DELTA_MODE.LINE)}if(a===t.HEADERS&&0===r&&!f){var m=s(e,{area:a,row:r,col:o});m.isSearchIcon&&(o===u(e,true)-1?o--:o++)}return{area:a,row:r,col:o}}function w(t,e,n){var r=e.cell.rowIx;i(e)&&(m(n)?n.scroll(0,-1,n.DELTA_MODE.PAGE):r=0);return{area:e.area,row:r,col:e.cell.colIx}}function A(t,e,n){var r=e.cell.rowIx;i(e)&&(b(n)?n.scroll(0,1,n.DELTA_MODE.PAGE):r=d(n));return{area:e.area,row:r,col:e.cell.colIx}}function I(t,e,n){var i=e.cell.rowIx;var r=0;var o=n.getPage();var s=0===o.left;var l;if(0===e.cell.colIx&&0===o.left)return{area:e.area,row:i,col:r};if(!s){l=0-o.left;l<0&&n.scroll(l,0,n.DELTA_MODE.LINE)}return{area:e.area,row:i,col:r}}function O(t,e){if(e)return t.headerRows[0].cells.length-1;return t.rows[0].cells.length-1}function E(t,e,n){var i=e.cell.rowIx;var r=e.cell.colIx;var o=c(e);var s=false;if(!C(n))return{area:e.area,row:e.cell.rowIx,col:p(t,o,n)};var l=n.getPage();var a=n.totalColumns-l.left-n.getViewportColumns();r=n.getViewportColumns()-1;n.scroll(a,0,n.DELTA_MODE.LINE);r>O(t,o)&&(s=true);if(o){s=true;r=2*n.getViewportColumns()-1}return{deferFocus:s,area:e.area,row:i,col:r}}function T(t,n,i,r,o){var l;var a;switch(n){case e.ARROW_UP:a=x(t,i,o);break;case e.ARROW_DOWN:a=q(t,i,o);break;case e.ARROW_RIGHT:a=r?S(t,i,o):y(t,i,o);break;case e.ARROW_LEFT:a=r?y(t,i,o):S(t,i,o);break;case e.PAGE_UP:a=w(t,i,o);break;case e.PAGE_DOWN:a=A(t,i,o);break;case e.HOME:a=I(t,i,o);break;case e.END:a=E(t,i,o);break;default:throw new Error("Unsupported keyboard key.")}l=a.deferFocus?{rowIx:a.row,colIx:a.col}:s(t,a);return{deferFocus:!!a.deferFocus,cell:l,area:a.area}}function D(t,n,i,r){var o=i.cell;var l;switch(n){case e.ARROW_UP:if(o.rowIx>0||m(r)){l=x(t,i,r);o=s(t,l)}break;case e.ARROW_DOWN:if(o.rowIx<d(r)||b(r)){l=q(t,i,r);o=s(t,l)}break;default:throw new Error("Unsupported keyboard key.")}return{cell:o,area:i.area}}function R(t,e,n){if(!e)return;var i;var r=e.cell.rowIx;var o=e.cell.colIx;var l=d(n);var a=p(t,c(e),n);if(r>l||o>a){r=r>l?l:r;o=o>a?a:o}i={area:e.area,row:r,col:o};return{cell:s(t,i),area:i.area}}return{init:n,moveFocus:T,moveFocusWhileSelecting:D,realignFocus:R,TABLE_AREA:t,KEYS:e}})}.apply(e,i),void 0!==r&&(t.exports=r))},1635:function(t,e,n){"use strict";var i,r;!(i=[n(48)],r=function(t){var e="qvFocusableCell";t.directive(e,[function(){return{restrict:"A",link:function t(n,i,r){var o=n.$eval(r[e]);var s=n.cell||n.header;n.area=o.area;if(s){s.addFocusListener(function(){i[0].setAttribute("tabindex",0);i[0].focus()});s.addBlurListener(function(){i[0].setAttribute("tabindex",-1);i[0].blur()})}n.$watchGroup(["cell.isFillColumn","header.isFillColumn"],function(t){var e=void 0!==t[0]?t[0]:t[1];e?e&&i[0].removeAttribute("tabindex"):i[0].setAttribute("tabindex",-1)})}}}])}.apply(e,i),void 0!==r&&(t.exports=r))},1636:function(t,e,n){"use strict";var i,r;!(i=[n(48),n(11),n(1637),n(91)],r=function(t,e,n,i){t.directive("qvStraightTableTopHeader",function(){return{restrict:"E",replace:true,template:n,link:function t(n){var r=n.layout.qInfo.qId;n.sortHeader=function(t){var i=e(t.target).scope().header;n.sort(i)};n.searchHeader=function(t){var i=e(t.target).closest(".qv-st-header-cell");var r=i.scope().header;t.preventDefault();n.search(i,r)};n.getSRLabelForColumns=function(t){var e=i.get("Accessibility.Table.SortedAscending");var n=i.get("Accessibility.Table.SortedDescending");if(t.isSorted){if("A"===t.sortIndicator)return t.text+". "+e;if("D"===t.sortIndicator)return t.text+". "+n}return t.text};n.getTopHeaderColIx=function(t){return t.isSearchIcon||t.isTotal?void 0:r+"-header-"+t.dataColIx};n.getTotalsColIx=function(t){return t.isTotal?r+"-header-"+t.dataColIx:void 0}}}})}.apply(e,i),void 0!==r&&(t.exports=r))},1637:function(t,e){t.exports='<div class="qv-st-header" tid="qv-st-header-top" ng-style="scrollApi.topBottomStyle">\n\t<table\tdir="{{direction}}"\n\t\t\tng-style="tableStyles.header"\n\t\t\tqva-delegated-activate=".qv-st-header-sortable:not(.qv-st-custom-header)#navigatable && !selections.active && sortHeader($event);\n\t\t   .qv-st-header-cell-search:not(.qv-st-total-cell)#interactive && !selections.active && searchHeader($event)">\n\t\t<colgroup class="qv-st-columns">\n\t\t\t<col ng-repeat="header in grid.headerRows[0].cells"\n\t\t\t\t ng-style="header.style"\n\t\t\t\t ng-class="header.classList"/>\n\t\t</colgroup>\n\t\t<tbody>\n\t\t\t<tr ng-repeat="row in grid.headerRows">\n\t\t\t\t<th ng-repeat="header in row.cells"\n\t\t\t\t\ttid="{{header.tid}}"\n\t\t\t\t\tng-attr-id="{{getTopHeaderColIx(header)}}"\n\t\t\t\t\tng-attr-headers="{{getTotalsColIx(header)}}"\n\t\t\t\t\tng-attr-aria-sort="{{header.ariaSort}}"\n\t\t\t\t\tclass="qv-st-header-cell"\n\t\t\t\t\tqva-outside-ignore-for="{{header.qvaOutsideIgnoreFor}}"\n\t\t\t\t\tng-class="{ \'qv-st-header-cell-numeric\': header.isNumeric,\n\t\t\t\t\t\t\'qv-st-custom-header\': !!options.customHeader,\n\t\t\t\t\t\t\'qv-st-header-sortable\': header.sortable,\n\t\t\t\t\t\t\'qv-st-total-cell\': header.isTotal,\n\t\t\t\t\t\t\'qv-st-header-cell-hidden\': header.shouldBeRemoved,\n\t\t\t\t\t\t\'qv-st-header-cell-dimension\': header.isDimension,\n\t\t\t\t\t\t\'qv-st-header-cell-search\': header.isSearchIcon,\n\t\t\t\t\t\t\'qv-st-header-cell-search-open\': header.isSearchIcon && header.open,\n\t\t\t\t\t\t\'qv-st-reordering-column\': header.dataColIx === reorderingColumn.dataColIx\n\t\t\t\t\t }"\n\t\t\t\t\taria-label="{{header.isTotal ? getSRLabelForTotals(header) : getSRLabelForColumns(header)}}"\n\t\t\t\t\tcolspan="{{header.colspan}}"\n\t\t\t\t\tqv-st-column-reorder-handle="navigatable && !selections.active && !header.isSearchIcon && !header.isTotal"\n\t\t\t\t\tqv-focusable-cell="{ area: TABLE_AREA.HEADERS }">\n\t\t\t\t\t<qv-straight-table-header-cell ng-if="!header.isSearchIcon || !options.customHeader" aria-hidden="true"></qv-straight-table-header-cell>\n\t\t\t\t\t<qv-straight-table-header-cell-search ng-if="!header.isTotal && header.isSearchIcon"></qv-straight-table-header-cell-search>\n\t\t\t\t</th>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>\n'},1638:function(t,e,n){"use strict";var i,r;!(i=[n(48),n(1639),n(50),n(11),n(242)],r=function(t,e,n,i){t.directive("qvStraightTableHeaderCell",[function(){return{restrict:"E",replace:true,template:e,link:function e(i,r){i.hasCustomHeader=!!i.options.customHeader;var o=r.closest(".qv-st-header-cell");if(i.options.customHeader){i.customHeaderHeight=i.options.customHeader.height;var s=t.getService("$compile");i.dmmodel=i.options.customHeader.model;r.append(s(i.options.customHeader.template)(i))}i.$watch("!header.isSearchIcon && !header.isTotal && selections.currentDataColIx === header.dataColIx",function(t){var e;if(!t){if(-1!==i.selections.currentDataColIx){e=i.row.getPreviousCell(i.header);i.header.removeClass("qv-st-active-col");e&&e.removeClass("qv-st-pre-active-col")}return}e=i.row.getPreviousCell(i.header);i.header.addClass("qv-st-active-col");e&&e.addClass("qv-st-pre-active-col");i.selectionsApi.getDockToElement=function(){var t=i.rtl?o.next():o;return n.isSmallDevice?r.closest(".qv-object").parent():t}})}}}]);t.directive("qvStColumnReorderHandle",[function(){return{restrict:"A",link:function t(e,n,r){if(e.options.disableDragAndDropColumnReorder)return;n.draggable({delay:100,appendTo:n.closest(".qv-st"),axis:"x",zIndex:100,opacity:1,helper:function t(){var e=n.width();var r=i("<div class='qv-st-column-drag-helper'><table><tbody></tbody></table></div");var o=i(document.createElement("tr"));n.clone().css("box-sizing","border-box").css("width",n.width()).css("height",n.height()+"px").appendTo(o);if(n.next().is(".qv-st-header-cell-search")){n.next().clone().css("box-sizing","border-box").css("width",n.next().width()).css("height",n.next().height()+"px").appendTo(o);e+=n.next().width()}r.find("table > tbody").append(o);r.css("box-sizing","border-box").css("width",e+4+"px");return r},start:function t(){e.$emit("onStartReorderingColumns",{dataColIx:e.header.dataColIx})},drag:function t(i,r){e.$emit("onReorderingColumns",{dataColIx:e.header.dataColIx,offset:e.rtl?n.closest(".qv-st").innerWidth()-r.position.left-r.helper.width():r.position.left})},stop:function t(i,r){e.$emit("onStopReorderingColumns",{dataColIx:e.header.dataColIx,offset:e.rtl?n.closest(".qv-st").innerWidth()-r.position.left-r.helper.width():r.position.left})}});r.qvStColumnReorderHandle&&e.$watch(r.qvStColumnReorderHandle,function(t){n.draggable("option","disabled",!t)})}}}]);t.directive("qvStraightTableHeaderCellSearch",[function(){return{restrict:"E",replace:true,template:'<i class="lui-icon  lui-icon--search" q-title-translation="Common.Search"></i>',link:function t(e,i){var r=i.closest(".qv-st-header-cell");e.$watch("!header.isTotal && selections.currentDataColIx === header.dataColIx",function(t){if(!t){-1!==e.selections.currentDataColIx&&e.header.removeClass("qv-st-active-col");return}e.header.addClass("qv-st-active-col");e.selectionsApi.getSelectionToolbarWidthOffset=function(){var t=e.rtl?r.prev():r;return n.isSmallDevice?0:t[0].getBoundingClientRect().width+1}})}}}])}.apply(e,i),void 0!==r&&(t.exports=r))},1639:function(t,e){t.exports='<div class="qv-st-header-cell-wrapper" ng-style="{height: customHeaderHeight}">\n\t<div class="qv-st-value" ng-if="!hasCustomHeader"\n\t\t ng-class="{ \'qv-st-header-selections-active\': header.selectionsActive }"\n\t\t ng-style="{ \'textAlign\': header.textAlign }">\n\t\t<div class="qv-st-value-overflow"\n\t\t\t dir="{{header.dir}}"\n\t\t\t ng-class="{ \'qv-rtl-text\': header.isRtl }">\n\t\t\t<i ng-class="{\'lui-icon\': header.locked, \'lui-icon--lock\': header.locked }"></i><span ng-attr-title="{{header.text}}" ng-bind="header.text"></span>\n\t\t</div>\n\t</div>\n\n\t<i ng-if="header.isSorted && header.sortIndicator !== \'N\' && !hasCustomHeader"\n\t   class="qv-st-sorting-indicator"\n\t   ng-class="{ \'lui-icon lui-icon--triangle-top\': header.sortIndicator === \'A\', \'lui-icon lui-icon--triangle-bottom\': header.sortIndicator === \'D\', \'icon-triangle-light\': header.color.bgIsDark && header.reversed }"\n\t   ng-style="header.sortStyle"></i>\n</div>\n'},1640:function(t,e,n){"use strict";var i,r;!(i=[n(48),n(1641)],r=function(t,e){t.directive("qvStraightTableData",[function(){return{restrict:"E",replace:true,template:e}}])}.apply(e,i),void 0!==r&&(t.exports=r))},1641:function(t,e){t.exports='<div class="qv-st-data" tid="qv-st-data">\n\t<qv-scroll-load-button\n\t\t\tclass="qv-st-load-prev"\n\t\t\tdisabled="!navigatable"\n\t\t\tng-show="scrollApi.loadPrevious && scrollApi.settings.columnCount > 0 && ( navigatable || !isLoadPrevVisible )"\n\t\t\ton-load="scrollApi.gotoPreviousBlock()"\n\t\t\ttext="Object.Listbox.LoadPrevious"\n\t\t\tscroll-api="scrollApi"\n\t\t\tshow-button="scrollApi.loadPrevious"\n\t\t\twatch-resize="watchResize"\n\t\t\tprevious="true">\n\t</qv-scroll-load-button>\n\t<label class="hidden-screen-reader-label" ng-attr-id="{{\'st-cell-selection-status-label-\' + objectId }}" aria-live="assertive"></label>\n\t<table ng-style="tableStyles.content"\n\t\t   dir="{{direction}}">\n\t\t<colgroup class="qv-st-columns">\n\t\t\t<col ng-repeat="header in grid.headerRows[0].cells"\n\t\t\t\t ng-style="header.style"\n\t\t\t\t ng-class="header.classList"/>\n\t\t</colgroup>\n\t\t<tbody>\n\t\t\t<tr ng-repeat="row in grid.rows" class="qv-st-data-row" ng-class="{ \'qv-grid-object-data-first-row\': $first, \'qv-grid-object-data-last-row\': $last }">\n\t\t\t\t<td ng-repeat="cell in row.cells" class="qv-st-data-cell"\n\t\t\t\t\trowspan="{{ cell.rowspan }}"\n\t\t\t\t\tcolspan="{{ cell.colspan }}"\n\t\t\t\t\theaders="{{ objectId + \'-header-\' + cell.dataColIx}}"\n\t\t\t\t\tqv-focusable-cell="{ area: TABLE_AREA.DATA }"\n\t\t\t\t\tng-style="!cell.selected && !cell.selectedHighlighted && cell.style"\n\t\t\t\t\tng-class="{ \'qv-st-data-cell-dimension-value\' : cell.isDimensionValue,\n\t\t\t\t\t\t\'qv-st-data-cell-hidden\': cell.hidden,\n\t\t\t\t\t\t\'qv-st-data-cell-numeric\': cell.isNumeric,\n\t\t\t\t\t\t\'qv-st-data-cell-selected\': cell.selected,\n\t\t\t\t\t\t\'qv-st-data-cell-selected-highlighted\': cell.selectedHighlighted,\n\t\t\t\t\t\t\'qv-st-data-cell-null-value\': cell.isNullValue,\n\t\t\t\t\t\t\'qv-st-data-cell-locked\': cell.isSelectLocked,\n\t\t\t\t\t\t\'qv-st-data-cell-color-dark\': cell.color.bgByExpression && !cell.color.bgIsDark,\n\t\t\t\t\t\t\'qv-st-data-cell-color-light\': cell.color.bgByExpression && cell.color.bgIsDark,\n\t\t\t\t\t\t\'qv-st-data-cell-column-highlighted\': cell.columnHighlighted,\n\t\t\t\t\t\t\'qv-st-reordering-column\': cell.dataColIx === reorderingColumn.dataColIx\n\t\t\t\t\t}">\n\t\t\t\t\t<qv-straight-table-data-cell></qv-straight-table-data-cell>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t<qv-scroll-loader class="qv-scroll-row-loader"></qv-scroll-loader>\n\t<qv-scroll-load-button\n\t\t\tclass="qv-st-load-next"\n\t\t\tng-show="scrollApi.loadNext && scrollApi.settings.columnCount > 0 && navigatable"\n\t\t\ton-load="scrollApi.gotoNextBlock()"\n\t\t\ttext="Object.Listbox.LoadMore"\n\t\t\tscroll-api="scrollApi"\n\t\t\tshow-button="scrollApi.loadNext"\n\t\t\twatch-resize="watchResize">\n\t</qv-scroll-load-button>\n</div>\n'},1642:function(t,e,n){"use strict";var i,r;!(i=[n(48),n(1643)],r=function(t,e){t.directive("qvStraightTableDataCell",[function(){return{restrict:"E",replace:true,template:e,link:function t(){}}}])}.apply(e,i),void 0!==r&&(t.exports=r))},1643:function(t,e){t.exports='<div class="qv-st-value"\n\t ng-attr-title="{{cell.text}}"\n\t ng-style="{ \'textAlign\': cell.textAlign }"\n\t dir="{{cell.dir}}">\n\t<div class="qv-st-value-overflow"\n\t\t ng-class="{ \'qv-rtl-text\': cell.isRtl }">\n\t\t<a ng-if="cell.representation === \'url\' && !selections.active" ng-style="{\'color\': cell.style.color}" qva-activate="openUrl(cell.url)" ng-attr-title="{{cell.url}}" ng-bind="cell.text"></a>\n\t\t<span ng-if="cell.representation === \'text\' || cell.representation === \'url\' && selections.active" ng-bind="cell.text"></span>\n\t</div>\n</div>\n'},1644:function(t,e,n){"use strict";var i,r;!(i=[n(48),n(1645)],r=function(t,e){t.directive("qvStraightTableBottomHeader",function(){return{restrict:"E",replace:true,template:e,link:function t(){}}})}.apply(e,i),void 0!==r&&(t.exports=r))},1645:function(t,e){t.exports='<div class="qv-st-bottom-header" tid="qv-st-bottom-header" ng-style="tableStyles.header">\n\t<table dir="{{direction}}">\n\t\t<colgroup class="qv-st-columns">\n\t\t\t<col ng-repeat="header in grid.headerRows[0].cells"\n\t\t\t\t ng-style="header.style"\n\t\t\t\t ng-class="header.classList" />\n\t\t</colgroup>\n\t\t<tbody>\n\t\t\t<tr ng-repeat="row in grid.footerRows">\n\t\t\t\t<td ng-repeat="header in row.cells"\n\t\t\t\t\ttid="{{header.tid}}"\n\t\t\t\t\theaders="{{objectId + \'-header-\' + $index}}"\n\t\t\t\t\tclass="qv-st-header-cell"\n\t\t\t\t\tng-class="{ \'qv-st-header-cell-numeric\': header.isNumeric,\n\t\t\t\t\t\t\'qv-st-total-cell\': header.isTotal,\n\t\t\t\t\t\t\'qv-st-header-cell-hidden\': header.shouldBeRemoved,\n\t\t\t\t\t\t\'qv-st-header-cell-dimension\': header.isDimension,\n\t\t\t\t\t\t\'qv-st-header-cell-measure\': header.isMeasure,\n\t\t\t\t\t\t\'qv-st-header-cell-search\': header.isSearchIcon }"\n\t\t\t\t\tcolspan="{{header.colspan}}"\n\t\t\t\t\taria-label="{{getSRLabelForTotals(header)}}"\n\t\t\t\t\tqv-focusable-cell="{ area: TABLE_AREA.FOOTER }">\n\t\t\t\t\t<qv-straight-table-header-cell></qv-straight-table-header-cell>\n\t\t\t\t</th>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>\n'},1646:function(t,e){t.exports='<lui-popover style="min-width: 100px;width: 150px;" align-to="alignTo" position="\'bottom\'" on-close-view="closeTypeFoldout(event)" qva-outside-ignore-for="{{qvaOutsideIgnoreFor}}" class="pp-type-popover" tid="pp-type-popover">\n\t<ul class="lui-list">\n\t\t<li ng-repeat="item in items" class="lui-list__item" tid="{{item.tid}}" ng-class="{ \'lui-disabled\': item.disabled() }" qva-activate="itemClicked($event,item);" ng-disabled="item.disabled()">\n\t\t\t<span class="lui-list__text" q-translation="{{item.translation}}"></span>\n\t\t</li>\n\t</ul>\n</lui-popover>\n'},1647:function(t,e,n){"use strict";var i,r;!(i=[n(125)],r=function(t){function e(t){var e=t.qDimensions,i=t.qMeasures;function r(){var t=[];for(var n=0;n<e.length+i.length;n++)t.push(n);return t}n(e,i,t.qColumnOrder)&&(t.qColumnOrder=r());n(e,i,t.qInterColumnSortOrder)&&(t.qInterColumnSortOrder=r())}function n(t,e,n){var i={},r=[],o=false;n.forEach(function(t){i[t]?o=true:i[t]=true});o=o||t.length+e.length!==Object.keys(i).length;Object.keys(i).forEach(function(t){r.push(parseInt(t,10))});r=r.sort(function(t,e){return t-e});for(var s=0;s<r.length;++s)o=o||r[s]!==s;return o}function i(n){e(n);var i=n.qDimensions,r=n.qMeasures,o=n.qColumnOrder,s=n.qInterColumnSortOrder;var l=[],a=[],c;for(var u=0;u<o.length;u++){c=o[u];c<i.length?l.push(c):a.push(c)}function d(){for(var e=0;e<l.length;e++)if(l[e]!==e){var n=l[e];var r=l.indexOf(e);var a=l[r];t.swap(l,e,r);t.swap(i,n,a);t.swap(o,o.indexOf(n),o.indexOf(a));t.swap(s,s.indexOf(n),s.indexOf(a))}}function p(){for(var e=0;e<a.length;e++)if(a[e]!==e+i.length){var n=a[e];var l=a.indexOf(e+i.length);var c=a[l];t.swap(a,e,l);t.swap(r,n-i.length,c-i.length);t.swap(o,o.indexOf(n),o.indexOf(c));t.swap(s,s.indexOf(n),s.indexOf(c))}}d();p()}function r(e,n,i){var r;if(n<i)for(r=n;r<i;r++)t.swap(e.columnWidths,r,r+1);else for(r=n;r>i;r--)t.swap(e.columnWidths,r,r-1)}return{validateTableHyperCube:e,fixTableHypercubeOrders:i,isInvalidOrderArray:n,updateColumnInfoOrders:r}}.apply(e,i),void 0!==r&&(t.exports=r))},1648:function(t,e,n){"use strict";var i,r;!(i=[n(403)],r=function(t){function e(){this.titleRetriever=t.create();this.cache={}}e.prototype.getDimensionTitle=n;e.prototype.getMeasureTitle=i;e.prototype.getCachedMeasureTitle=r;e.prototype.resetTitles=o;return e;function n(t,e,n){return this.titleRetriever.getDimensionTitle(t,e,n)}function i(t,e,n,i){var r=this;return this.titleRetriever.getMeasureTitle(t,e,n,i).then(function(e){t&&l(r.cache,t.cId,e);return e})}function r(t){return t?s(this.cache,t.cId):""}function o(){this.titleRetriever.resetTitles()}function s(t,e){return t[e]||""}function l(t,e,n){t[e]=n}}.apply(e,i),void 0!==r&&(t.exports=r))},1649:function(t,e,n){"use strict";var i,r;!(i=[n(1650),n(369),n(178)],r=function(t,e,n){function i(t,e){r(t,e,this)}i.prototype.isChangeable=o;i.prototype.getAggregation=s;i.prototype.getRemainder=l;i.prototype.openPopover=a;i.prototype.closePopover=c;i.prototype.isPopoverOpen=u;return i;function r(e,n,i){e||d("Scope is required");n||d("LuiPopover is required");i.popovers=[];i.createPopover=function(){return t.create(e,n)}}function o(t){if(!t||!t.qDef)return false;var n=!!t.qDef.qLabel||!!t.qDef.qLabelExpression,i=!!t.qLibraryId;if(n||i)return false;var r=e.classify(t.qDef.qDef);return 1===r.count&&r.result.function.isCommon}function s(t){if(!t)return"";var i=e.classify(t);return n.getFormattedAggregation(i.result.function.content)}function l(t){if(!t)return"";var n=e.classify(t);return n.result.remainder.content}function a(t,e,n,i){var r=this,o=r.popovers[e];if(!o){o=r.createPopover();r.popovers[e]=o}Object.keys(this.popovers).forEach(function(t){if(t===e)return;r.popovers[t].close();delete r.popovers[t]});o.open(t,n,i)}function c(t){var e=this.popovers[t];if(e){e.close();delete this.popovers[t]}}function u(t){var e=this.popovers[t];return!!e&&e.isOpen()}function d(t){throw new Error("ChangeMeasureAggregationService: "+t)}}.apply(e,i),void 0!==r&&(t.exports=r))},1650:function(t,e,n){"use strict";var i,r;!(i=[n(1651)],r=function(t){var e={create:n};return e;function n(e,n){return new t(e,n)}}.apply(e,i),void 0!==r&&(t.exports=r))},1651:function(t,e,n){"use strict";var i,r;!(i=[n(187),n(178),n(1327),n(1652),n(90)],r=function(t,e,n,i,r){function o(t,e){s(this,t,e)}o.prototype.open=l;o.prototype.close=a;o.prototype.isOpen=c;return o;function s(n,r,o){r||u("Scope is required");o||u("LuiPopover is required");n.scope=r;n.luiPopover=o;n.popover=null;n.defaultConfig={isOpenButton:function t(){return false},onAggregationChanged:function t(){}};var s=t.COMMON_FUNCTIONS.map(function(t){return e.getFormattedAggregation(t)});n.settings={template:i,input:{aggregations:s},dock:"bottom",closeOnResize:true,closeOnOutside:true}}function l(t,e,i){t.stopPropagation();var o=this;if(o.popover){o.popover=null;return}var s=r.extend({},o.defaultConfig,i);o.settings.alignTo=t.target;o.settings.input.getCurrentAggregation=function(){return e.currentAggregation};o.settings.input.onAggregationChanged=function(t){e.currentAggregation=t;var i=n.addAggregation(t,e.remainder);e.data.qDef.qDef=i;s.onAggregationChanged(e,t);o.scope.$emit("saveProperties");a.call(o)};o.popover=o.luiPopover.show(o.settings);o.popover.closing.then(function(t){t&&!s.isOpenButton(t.target)&&(o.popover=null)})}function a(){if(this.popover){this.popover.close();this.popover=null}}function c(){return!!this.popover}function u(t){throw new Error("ChangeAggregationPopover: "+t)}}.apply(e,i),void 0!==r&&(t.exports=r))},1652:function(t,e){t.exports='<lui-popover class="pp-selectaggregation-popover">\n\t<div class="lui-popover__body lui-popover__body lui-nopad">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item" \n\t\t\t\tng-repeat="aggregation in aggregations" \n\t\t\t\tng-class="{ \'lui-active\': aggregation === getCurrentAggregation() }"\n\t\t\t\tng-click="onAggregationChanged(aggregation)"\n\t\t\t\ttitle="{{aggregation}}">\n\t\t\t\t<span class="lui-list__text lui-list__action">{{aggregation}}</span>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</lui-popover>'},1653:function(t,e,n){"use strict";var i,r;!(i=[n(48),n(1654),n(1655),n(97),n(207),n(1656),n(96),n(249),n(1003)],r=function(t,e,n,i,r,o,s){t.service("qvStraighTableColumnPickerService",["luiPopover",function(t){return{show:function e(i){var r=t.showToPosition({template:n,input:i,x:i.position.x,y:i.position.y,dock:"right",closeOnEscape:true,closeOnOutside:true,outsideIgnore:i.qvaOutsideIgnoreFor});r.closed.then(function(){i.closeColumnPicker();r=null});return function(){r&&r.close()}}}}]);t.directive("qvStraightTableColumnPicker",function(){return{restrict:"A",require:"qvSortableList",link:function t(e,n,i,r){e.columnPicker.cancel=function(){r.cancel()}}}});return t.directive("qvStraightTableColumnPickerActivator",["qvStraighTableColumnPickerService","qvGridObjectDataService",function(t,n){return{restrict:"E",replace:true,template:e,require:"^qvObjectContent",link:function e(l,a,c,u){var d;s(a[0]).tap({options:{preventDefault:false},end:function t(e,n){h(n);l.$digest()}}).swipe({options:{preventDefault:false},start:function t(){p();l.$digest()}});function p(){l.columnPicker.showPopover=false;d&&d();d=void 0}function h(e){if(!l.navigatable||l.selections.active)return;l.columnPicker.showPopover=!l.columnPicker.showPopover;if(l.columnPicker.showPopover){v();var n=a[0].getBoundingClientRect();var r=e.pagePoints[0].y;d=t.show({position:{x:n.left+Math.floor(n.width/2),y:r},columnPicker:l.columnPicker,onMoveBegin:l.onMoveBegin,onMoveEnter:l.onMoveEnter,onMoveCancel:l.onMoveCancel,onMove:l.onMove,closeColumnPicker:p,qvaOutsideIgnoreFor:l.columnPicker.qvaOutsideIgnoreFor,sortableItemLists:l.sortableItemLists,hc:l.layout.qHyperCube,options:l.options});i.on("start."+l.$id,g)}else p()}function f(){l.columnPicker.columns.get().forEach(function(t,e){l.scrollApi.settings.columnCount<e?t.disabled=true:t.disabled=false})}l.sortableItemLists=r.create({options:{direction:"vertical",itemKey:"col",itemSelector:".qv-st-cp-sortable",itemDragSelector:".qv-st-cp-handle"},addPlaceholder:function t(e,n){var i=this._super.apply(this,arguments);i.style.height=n.height;i.id=-1},onMove:function t(e){var n=this._super.apply(this,arguments);if(n){f();var i=!Array.isArray(l.layout.qHyperCube.qColumnOrder);var r=l.layout.qHyperCube.qColumnOrder;var s=l.columnPicker.columns.get(function(t){return t.id>=0}).map(function(t){return t.id});var a=o.applyPartialReorder(r,s,e.id);l.applyColumnOrderSoftPatch(i,a)}return n}});l.columnPicker={showPopover:false,columns:l.sortableItemLists.createList(),qvaOutsideIgnoreFor:"qv-st-column-picker-"+l.$id,cancel:function t(){}};function v(){var t=l.layout.qHyperCube,e=t.qDimensionInfo.concat(t.qMeasureInfo),i={},r,o;l.columnPicker.cancel();l.columnPicker.columns.reset();n.columnOrder.getVisible(t).forEach(function(t){var n={id:t,classList:["qv-st-cp-sortable"],title:e[t].qFallbackTitle};l.columnPicker.columns.addSortableItem(n)});i.title="";i.id=-2;i.classList=["qv-st-cp-divider"];i.isDivider=true;l.columnPicker.columns.addSortableItem(i,32);r=l.columnPicker.columns.getIndexByItem(i);o=l.scrollApi.settings.columnCount;l.columnPicker.columns.moveItem(r,o);f()}u.watchPaint(v);function g(){i.off("start."+l.$id,g);if(l.columnPicker.showPopover){d();l.columnPicker.showPopover=false;l.$digest()}}}}}])}.apply(e,i),void 0!==r&&(t.exports=r))},1654:function(t,e){t.exports='<div class="qv-st-column-picker"\n\t tid="qv-st-column-picker"\n\t ng-class="{ \'qv-st-column-picker-open\': columnPicker.showPopover }"\n\t tabindex="-1">\n\t<table>\n\t\t<tr>\n\t\t\t<td q-title-translation="{{columnPicker.showPopover ? \'Tooltip.CloseColumnPicker\' : \'Tooltip.ColumnPicker\'}}">\n\t\t\t\t<div class="qv-st-column-picker-more">\n\t\t\t\t\t<span class="lui-icon lui-icon--more" aria-hidden="true"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n'},1655:function(t,e){t.exports='<lui-popover\n\t\tclass="qv-st-column-picker-popover"\n\t\tqva-direction x-dir-setting="{{input.options.direction}}"\n\t\tqva-mouse-wheel-outside="closeColumnPicker()">\n\t<lui-popover-header>\n\t\t<lui-popover-title q-translation="Common.Columns"/>\n\t</lui-popover-header>\n\t<lui-popover-body class="lui-nopad">\n\t\t<ul class="qv-st-cp-popover-list"\n\t\t\tqv-sortable-list="input.sortableItemLists">\n\t\t\t<li class="qv-st-cp-popover-list-item"\n\t\t\t\tdraggable="false"\n\t\t\t\tng-repeat="col in input.columnPicker.columns.items track by col.id"\n\t\t\t\tng-class="col.classList"\n\t\t\t\tng-style="col.style">\n\t\t\t\t<table class="qv-st-cp-popover-table" ng-if="col.id !== -2">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td ng-class="{ \'disabled\': col.disabled }">\n\t\t\t\t\t\t\t<div class="qv-st-cp-overflow" ng-bind="col.title" qva-direction x-dir-setting="{{options.direction}}" x-dir-text="{{col.title}}"></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td ng-if="col.id !== -2" class="qv-st-cp-handle">\n\t\t\t\t\t\t\t<div class="lui-icon lui-icon--handle"></div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>\n'},1656:function(t,e,n){"use strict";var i,r;!(i=[],r=function(){function t(t,e,n){var i=t.slice();var r=i.indexOf(n);i.splice(r,1);if(e.length<2)return i;var o=e.indexOf(n);var s;var l;if(o>0){s=e[o-1];l=i.indexOf(s)+1}else{s=e[1];l=Math.max(0,i.indexOf(s))}i.splice(l,0,n);return i}return{applyPartialReorder:t}}.apply(e,i),void 0!==r&&(t.exports=r))},167:function(t,e,n){"use strict";var i,r;!(i=[],r=function(){var t={};Object.defineProperties(t,{ENTER:{value:13},ESCAPE:{value:27},SPACE:{value:32},TAB:{value:9},BACKSPACE:{value:8},DELETE:{value:46},ALT:{value:18},CTRL:{value:17},SHIFT:{value:16},ARROW_UP:{value:38},ARROW_DOWN:{value:40},ARROW_LEFT:{value:37},ARROW_RIGHT:{value:39},PAGE_DOWN:{value:34},PAGE_UP:{value:33},HOME:{value:36},END:{value:35},F10:{value:121},A:{value:65},F:{value:70}});t.isArrow=function(e){return e===t.ARROW_UP||e===t.ARROW_DOWN||e===t.ARROW_LEFT||e===t.ARROW_RIGHT};return t}.apply(e,i),void 0!==r&&(t.exports=r))},207:function(t,e,n){"use strict";var i,r;!(i=[n(92),n(90),n(249),n(303)],r=function(t,e,n,i){var r=t.extend("SortableItemList",{init:function t(e,n){this.items=[];this.disabled=false;this.typeFlag=e||1;this.locked=false;Object.keys(n||{}).forEach(function(t){this[t]=n[t]},this)},addSortableItem:function t(e,n){Object.defineProperty(e,"__sortableItem__",{configurable:false,enumerable:true,writable:true,value:{typeFlag:n||1}});this.items.push(e)},moveItem:function t(e,n){this.items.splice(n,0,this.items.splice(e,1)[0])},getIndexByItem:function t(e){return this.items.indexOf(e)},get:function t(e){return this.items.filter(e||function(){return true})},getLockedIndices:function t(){return this.get(function(t){return!!(t.__sortableItem__.typeFlag&i.TYPEFLAG_LOCKED)}).map(function(t){return this.getIndexByItem(t)},this)},reset:function t(){this.items.length=0;this.disabled=false},isEmpty:function t(){return 0===this.items.length},setLocked:function t(e){this.locked=e}});Object.defineProperties(r.prototype,{length:{get:function t(){return this.items.length}}});var o=n.extend("SortableItemLists",{init:function t(){this._super.apply(this,arguments);this.lists=[];this.dragPlaceholder=null},addPlaceholder:function t(n){var r=this.getList(n),o=r?r.items.indexOf(n):-1;this.dragPlaceholder=e.extend(true,{},n);this.dragPlaceholder.id="placeholder";this.dragPlaceholder.__sortableItem__.typeFlag=i.TYPEFLAG_PLACEHOLDER;this.dragPlaceholder.style={opacity:"0.3"};r&&r.items.splice(o,0,this.dragPlaceholder);return this.dragPlaceholder},removePlaceholder:function t(){if(!this.dragPlaceholder)return;var e=this.getList(this.dragPlaceholder),n=e?e.items.indexOf(this.dragPlaceholder):-1;if(-1!==n){e.items.splice(n,1);this.dragPlaceholder=null}},getPlaceholder:function t(){return this.dragPlaceholder},createList:function t(e,n){var i=new r(e,n);this.lists.push(i);return i},reset:function t(){this.lists.forEach(function(t){t.reset()})},getList:function t(e){return this.lists.filter(function(t){return-1!==t.items.indexOf(e)})[0]},disable:function t(e){this.lists.forEach(function(t){t.disabled=!(e.__sortableItem__.typeFlag&t.typeFlag)})},enable:function t(){this.lists.forEach(function(t){t.disabled=false})},getIndexOfItem:function t(e){var n=this.getList(e);var i=n?n.items.indexOf(e):-1;return i},moveItem:function t(e,n){var i=this.getList(e),r=this.getList(n),o,s;if(!i||!r)return;s=r.items.indexOf(n);o=i.items.indexOf(e);i.items.splice(o,1);r.items.splice(s,0,e)},onBegin:function t(e,n){this.addPlaceholder(e,n);this.disable(e)},onEnter:function t(e,n){var r=this.getList(e),o=r.getLockedIndices();if(e===this.dragPlaceholder)return;if(n===i.ENTER_BEFORE||n===i.ENTER_AFTER){var s=this.getList(this.dragPlaceholder),l,a;if(!s||!r)return;l=s.getIndexByItem(this.dragPlaceholder);s.items.splice(l,1);a=r.getIndexByItem(e);a+=n===i.ENTER_AFTER?1:0;r.items.splice(a,0,this.dragPlaceholder)}else this.moveItem(this.dragPlaceholder,e);var c=r.getLockedIndices();o.forEach(function(t,e){r.moveItem(c[e],t)})},onEnterList:function t(e){if(e.disabled||e.locked)return;var n=this.getList(this.dragPlaceholder);if(!n)return;var i=n.getIndexByItem(this.dragPlaceholder);n.items.splice(i,1);e.items.push(this.dragPlaceholder)},onMove:function t(e){if(-1===this.getIndexOfItem(e)){this.onCancel();return false}var n=this.dragPlaceholder;this.moveItem(e,n);this.removePlaceholder();this.enable();return true},onMoveToList:function t(e,n){var i=this.getList(e);if(i&&!(n.disabled||n.locked)){var r=i.items.indexOf(e);if(i===n){this.onMove(e,this.dragPlaceholder);return true}i.items.splice(r,1);n.items.push(e)}this.removePlaceholder();this.enable();return!!i},onCancel:function t(){this.removePlaceholder();this.enable()},allowEnter:function t(e,n){var i=this.getList(e);return void 0!==i&&!i.disabled&&!i.locked&&!!(n.__sortableItem__.typeFlag&i.typeFlag)},allowEnterList:function t(e,n){return!e.disabled&&!e.locked&&!!(n.__sortableItem__.typeFlag&e.typeFlag)}});o.create=function(t){var e=o.extend(t||{});t=new e(t&&t.options);return t};return o}.apply(e,i),void 0!==r&&(t.exports=r))},299:function(t,e,n){"use strict";var i,r;!(i=[n(198)],r=function(t){var e;e=t.extend("HyperCube",{init:function t(e,n){this._super(e,"/qHyperCubeDef",n);this.cacheCube.setMethodName("getHyperCubeData")},updateCache:function t(e){if(e&&e.qHyperCube){this.cacheCube.set(e.qHyperCube.qDataPages);this.cacheCube.setCubeSize(e.qHyperCube.qSize)}else this.cacheCube.clear()},getData:function t(e,n){return n?this.model.getHyperCubeData(n,e):this.cacheCube.getData(e)},getHyperCubeBinnedData:function t(e,n,i,r){return this.model.getHyperCubeBinnedData(this.path,e,{width:0,height:0},n,i,r,0)},getHyperCubeContinousData:function t(e,n){return this.model.getHyperCubeContinuousData(this.path,e,n)},getReducedData:function t(e,n,i){i=void 0!==i?i:"D1";return this.model.getHyperCubeReducedData(this.path,e,n,i)},selectDimensionRange:function t(e){var n=e.map(function(t){return{qDimIx:t.idx,qRange:{qMin:t.range.min,qMax:t.range.max,qMinInclEq:true,qMaxInclEq:t.range.maxIncluded}}});return this.model.selectHyperCubeContinuousRange(this.path,n)},selectRange:function t(e,n,i){var r;n=!!n;i=i||[];r=e.map(function(t){return{qMeasureIx:t.idx,qRange:{qMin:t.range.min,qMax:t.range.max,qMinInclEq:false!==t.range.minInclEq,qMaxInclEq:false!==t.range.maxInclEq}}});return this.model.rangeSelectHyperCubeValues(this.path,r,i,n)},selectRects:function t(e,n){var i;n=n||[];i=e.map(function(t){var e=t[0],i=t[1];return{qRanges:[{qMeasureIx:e.idx,qRange:{qMin:e.range.min,qMax:e.range.max,qMinInclEq:false!==e.range.minInclEq,qMaxInclEq:false!==e.range.maxInclEq}},{qMeasureIx:i.idx,qRange:{qMin:i.range.min,qMax:i.range.max,qMinInclEq:false!==i.range.minInclEq,qMaxInclEq:false!==i.range.maxInclEq}}],qColumnToSelect:n}});return this.model.multiRangeSelectHyperCubeValues(this.path,i,false)},select:function t(e,n){return this.model.selectHyperCubeCells(this.path,e,n)},selectValues:function t(e,n,i,r){return this.model.selectHyperCubeValues(r||this.path,e,n,i)},getProperties:function t(){return this.model.getProperties()},getDimensionInfos:function t(){return this.model.layout.qHyperCube.qDimensionInfo},getMeasureInfos:function t(){return this.model.layout.qHyperCube.qMeasureInfo},clearSelections:function t(){return this.model.resetMadeSelections()},hasSelections:function t(){return this.model.layout.qSelectionInfo.qMadeSelections}});return e}.apply(e,i),void 0!==r&&(t.exports=r))},369:function(t,e,n){"use strict";var i,r;!(i=[n(54),n(407),n(187),n(178),n(408)],r=function(t,e,n,i,r){var o={};var s={classify:l};return s;function l(n){if(!t.isString(n))throw new Error("Expression-classifier: Expression must be a string");var i=n;if(o[i])return o[i];var s={content:n,count:0,result:{},results:[]};if(""===n){o[i]=s;return s}"="===n.charAt(0)&&(n=n.substr(1));var l=r.stripComments(n);var c=e.tokenize(l);s.count=c.length;c.forEach(function(t,e){var n;if(t.isOperator)s.results.push(t);else{n=a(t.content);s.results.push(n)}0===e&&(s.result=n)});o[i]=s;return s}function a(t){var e={content:t,function:{content:"",isCommon:false},remainder:{content:"",isFunction:false,isCommonFunction:false,isCommaSeparated:false,isFieldlike:false,isString:false,isNumber:false,isQualifier:false,qualified:{qualifier:"",content:"",isFieldlike:false}}};var n=c(t);if(n.hasAggregation){e.function.content=u(t,n);e.function.isCommon=g(e.function.content);e.remainder.content=d(t,n);var i=c(e.remainder.content);e.remainder.isFunction=b(i);e.remainder.isCommonFunction=C(e.remainder.content,i);e.remainder.isQualifier=h(e.remainder.content);e.remainder.isCommaSeparated=m(e.remainder.content);if(e.remainder.isQualifier){var r=f(e.remainder.content),o=v(e.remainder.content,r),s=c(o);e.remainder.qualified={qualifier:r,content:o,isFieldlike:x(s)}}n=i}else e.remainder.content=e.content;e.remainder.isFieldlike=x(n);e.remainder.isString=q(e.remainder.content);e.remainder.isNumber=S(e.remainder.content);return e}function c(t){var e={};e.expression=t;e.hasPrefix="="===t.charAt(0);e.leftSymbolIndex=t.indexOf(n.SYMBOLS.FUNCTION.LEFT);e.hasAggregation=e.leftSymbolIndex>0;e.isRightSymbolLast=t.substring(t.length-1)===n.SYMBOLS.FUNCTION.RIGHT;e.isEncapsulated=e.hasAggregation&&e.isRightSymbolLast;e.hasOperator=p(t);return e}function u(t,e){var n=e.hasPrefix?1:0,i=e.hasPrefix?e.leftSymbolIndex+1:e.leftSymbolIndex;return t.substr(n,i).trim()}function d(t,e){var n=t.substr(e.leftSymbolIndex),i=n.substr(1,n.length-2);return i.trim()}function p(t){var e=n.OPERATORS,i=e.SINGLES,r=e.MULTIPLES,o=e.WORDS;var s=i.some(function(e){return t.indexOf(e)>-1});if(s)return true;var l=r.some(function(e){return t.indexOf(e)>-1});if(l)return true;var a=o.some(function(e){return t.indexOf(" "+e+" ")>-1});return a}function h(t){return n.QUALIFIERS.some(function(e){return 0===t.toLowerCase().indexOf(e)})}function f(t){var e=n.QUALIFIERS.filter(function(e){return 0===t.toLowerCase().indexOf(e)}).shift();return e}function v(t,e){return t.slice(e.length).trim()}function g(t){return n.COMMON_FUNCTIONS.some(function(e){return t.toLowerCase()===e})}function m(t){var e=i.getCharacterIndexes(t,",");return e.some(function(e){return!I(t,e)})}function b(t){return t.isEncapsulated&&!t.isBleedingOperator}function C(t,e){if(!e.isEncapsulated)return false;var n=t.substr(0,e.leftSymbolIndex);return g(n)}function x(t){var e=t.expression;if(q(t.expression))return false;var r=y(e,n.SYMBOLS.FIELD.LEFT),o=w(e,n.SYMBOLS.FIELD.RIGHT),s=i.getCharacterCount(e,n.SYMBOLS.FIELD.LEFT),l=i.getCharacterCount(e,n.SYMBOLS.FIELD.RIGHT);if(r&&o&&1===s&&1===l)return true;return A(t)}function q(t){var e=y(t,n.SYMBOLS.STRING.LEFT),r=w(t,n.SYMBOLS.STRING.RIGHT),o=n.SYMBOLS.STRING.LEFT===n.SYMBOLS.STRING.RIGHT,s=i.getCharacterCount(t,n.SYMBOLS.STRING.LEFT),l;if(o)l=2===s;else{var a=i.getCharacterCount(t,n.SYMBOLS.STRING.RIGHT);l=1===s&&1===a}return e&&r&&l}function S(t){return!Number.isNaN(+t)}function y(t,e){return t.charAt(0)===e}function w(t,e){return t.charAt(t.length-1)===e}function A(t){if(t.hasAggregation)return false;var e=t.expression,i=e.indexOf(" ")>-1;if(i)return false;var r=n.OPERATORS.SINGLES.concat(n.OPERATORS.MULTIPLES).some(function(t){return e.indexOf(t)>-1});return!r}function I(t,e){return Object.keys(n.SYMBOLS).some(function(r){var o=n.SYMBOLS[r];return i.getIsCharacterEncapsulated(t,e,o.LEFT,o.RIGHT)})}}.apply(e,i),void 0!==r&&(t.exports=r))},393:function(t,e,n){"use strict";var i,r;!(i=[n(10),n(48)],r=function(t,e){var n=document.createElement("textarea");n.style.position="absolute";n.style.left="-9999px";n.setAttribute("readonly","");function i(t){n.value=t;document.body.appendChild(n);n.select();n.setSelectionRange(0,n.value.length);document.execCommand("copy");document.body.removeChild(n)}e.service("qvCopy",["$window",function(e){var n=t.element(e.document.body);var i=t.element("<textarea/>");i.css({position:"fixed",opacity:"0"});return function(t){i.val(t);n.append(i);i[0].select();try{var e=document.execCommand("copy");if(!e)throw e}catch(e){window.prompt("Copy to clipboard: Ctrl+C, Enter",t)}i.remove()}}]);e.directive("qvClickCopy",["qvCopy",function(t){return{restrict:"A",link:function e(n,i,r){i.bind("click",function(){t(r.qvClickCopy)})}}}]);return{copyToClipboard:i}}.apply(e,i),void 0!==r&&(t.exports=r))},407:function(t,e,n){"use strict";var i,r;!(i=[n(54),n(187)],r=function(t,e){var n=o();var i={tokenize:r};return i;function r(e){if(!t.isString(e))throw new Error("Expression-tokenizer: Expression must be a string");e=e.trim();"="===e.charAt(0)&&(e=e.substr(1));var n=[],i=0,r=s(e);r.forEach(function(t){var r=e.substr(i,t.start-i).trim();r&&n.push({content:r,isOperator:false});n.push({content:t.content,isOperator:true});i=t.end});var o=e.substr(i,e.length);n.push({content:o.trim(),isOperator:false});return n}function o(){var t={};for(var n in e.SYMBOLS)if(e.SYMBOLS.hasOwnProperty(n)){var i=e.SYMBOLS[n];t[i.LEFT]=i.RIGHT}return t}function s(t){var e=[];for(var n=0;n<t.length;n++){var i=t.charAt(n);if(l(i)){n=a(t,i,n);continue}var r=[],o=false,s=c(i);r=u(i);if(r.length){var p=t.substr(n).toLowerCase();for(var h=0;h<r.length;h++){var f=r[h],v=d(p,f);if(v){e.push({content:f,start:n,end:n+f.length});o=true;n+=f.length-1;break}}}!o&&s&&e.push({content:i,start:n,end:n+1})}return e}function l(t){return n.hasOwnProperty(t)}function a(t,i,r){var o=i,s=n[o],l=t.substring(r).split(""),a=0,c=false;for(var u=0;u<l.length;u++){var d=l[u];d===e.SYMBOLS.STRING.LEFT&&(c=!c);if(c)continue;d===o&&a++;d===s&&a--;if(!a)return u+r}return r}function c(t){return e.OPERATORS.SINGLES.indexOf(t.toLowerCase())>-1}function u(t){var n=[];var i=e.OPERATORS.MULTIPLES.concat(e.OPERATORS.WORDS).filter(function(t){return t.length>1}).map(function(t){return t.toLowerCase()});i.forEach(function(e){0===e.indexOf(t.toLowerCase())&&n.push(e)});return n}function d(t,n){var i=0===t.indexOf(n+" "),r=e.OPERATORS.SINGLES.some(function(e){return 0===t.indexOf(n+e)});return i||r}}.apply(e,i),void 0!==r&&(t.exports=r))},408:function(t,e,n){"use strict";var i,r;!(i=[],r=function(){var t={stripComments:e};return t;function e(t){if(!t)return"";t=n(t);t=i(t);return t.trim()}function n(t){return t.replace(/\/\/(.*)$/gm,"")}function i(t){return t.replace(/\/\*[^]*?\*\//g,"")}}.apply(e,i),void 0!==r&&(t.exports=r))}}]);