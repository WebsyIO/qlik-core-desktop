/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[9],{1171:function(t,e,i){"use strict";var s,n;!(s=[i(180),i(100),i(203)],n=function(t,e,i){var s;function n(t){return Number(void 0!==t.value?t.value:t)}function a(t,i){if(!t||!t.paletteColor&&!t.color)return i;return t.paletteColor?e.resolveColor(t.paletteColor):e.resolveColor(t.color,e.deprecatedPalette)}function o(){if(!this._numRefLinesDataAxes||!this._numAxes)return false;var t,e,i,s,a,o,l;for(t=0;t<this._numAxes;t+=1){i=this._axes[t];o=i.getPlotMin();l=i.getPlotMax();this._axisPlotMinValues[t]=o;this._axisPlotMaxValues[t]=l;s=this._data[t]||[];for(e=0;e<s.length;e+=1){a=n(s[e].refLineExpr);if(s[e]&&s[e].show&&void 0!==s[e].refLineExpr&&null!==a&&!Number.isNaN(+a)&&a>=o&&a<=l)return true}}return false}function l(){var t,e,i,s;for(t=0;t<this._numAxes;t+=1){e=this._axes[t];i=e.getPlotMin();s=e.getPlotMax();if(this._axisPlotMinValues[t]!==i||this._axisPlotMaxValues[t]!==s)return true}return false}function r(){var t,e;for(t=0;t<this._numAxes;t+=1){e=this._axes[t];this._axisPlotMinValues[t]=e.getPlotMin();this._axisPlotMaxValues[t]=e.getPlotMax()}}s=t.extend("RefLines",{init:function t(){this._super.apply(this,arguments);this.renderer=new i(this.container);this.renderer.edgeBleed={top:1,left:1,right:0,bottom:0};this._$renderAreaWrap.addClass("qv-chart-component-reflines");this._hasVisibleRefLines=false;this._styleService=e.initializeService("object."+this.options.parentType);this._numAxes=0;this.renderers={lines:this.renderer}},setData:function t(){this._super.apply(this,arguments);this._numRefLinesDataAxes=void 0===this._data?0:this._data.length;this._hasVisibleRefLines=o.call(this);r.call(this)},setAxes:function t(e){var i=this;this._axes&&this._axes.forEach(function(t){t.stopListen("changed",i.invalidateDisplay,i)});this._axes=e;this._axes.forEach(function(t){t.listen("changed",i.invalidateDisplay,i)});this._numAxes=void 0===e?0:e.length;void 0!==this._axisPlotMinValues&&this._axisPlotMinValues.length===this._numAxes||(this._axisPlotMinValues=new Array(this._numAxes));void 0!==this._axisPlotMaxValues&&this._axisPlotMaxValues.length===this._numAxes||(this._axisPlotMaxValues=new Array(this._numAxes))},isVisible:function t(){var e=this._super.apply(this,arguments);if(!e||!this._numAxes||!this._numRefLinesDataAxes)return false;return true},hasValidData:function t(){return this._super()&&this._numRefLinesDataAxes&&this._numAxes},paint:function t(){var e=this._styleService.getStyle("referenceLine.label.name","color");this._super.apply(this,[].slice.call(arguments));if(l.call(this)){this._hasVisibleRefLines=o.call(this);r.call(this)}if(!this._hasVisibleRefLines){this.renderer.shapes=[];this.renderer.clear();return}var i,s,n,h,u,f,c,d,_,x,p,b,v,g=[];for(i=0;i<this._numRefLinesDataAxes;i+=1){n=this._data[i];h=this._axes[i];u=this._axisPlotMinValues[i];f=this._axisPlotMaxValues[i];for(s=0;s<n.length;s+=1){if(!n[s].show||void 0===n[s].refLineExpr)continue;c=this._currentProperties["value"+i+s];if(null===c||Number.isNaN(+c)||c>f||c<u)continue;d=h.getPositionOfValue(c);d=Math.floor(d)-.5;if(h.isVertical()){_=0;x=d;p=this.rect.width;b=d}else{_=d;x=0;p=d;b=this.rect.height}v=a(n[s],e);g.push({type:"line",stroke:v,strokeWidth:1,shape:{x1:_,y1:x,x2:p,y2:b}})}}this.renderer.shapes=g;this.renderer.render()},_updateProperties:function t(){if(!this._data)return;var e=this._data,i=e.length,s,n;for(s=0;s<i;s++)if(void 0!==e[s])for(n=0;n<e[s].length;n++)this._transitionProperties["value"+s+n]=e[s][n].refLineExpr.value;this._super()}});return s}.apply(e,s),void 0!==n&&(t.exports=n))},1172:function(t,e,i){"use strict";var s,n;!(s=[i(180),i(100),i(291),i(2085),i(2086),i(1032),i(1049),i(278),i(90),i(159)],n=function(t,e,i,s,n,a,o,l,r,h){var u,f,c,d,_,x,p="center",b="bottom",v=2;function g(t){t.forEach(function(t){t.size=t.shapeWrapper.measure().height})}function m(t,i){if(!t||!t.paletteColor&&!t.color)return i;return t.paletteColor?e.resolveColor(t.paletteColor):e.resolveColor(t.color,e.deprecatedPalette)}function M(t,e,i,s,n,o){void 0===n&&(n=Number.MAX_VALUE);void 0===o&&(o=1);var l=new a;l.setText(t);l.font=e;l.x=i;l.y=s;l.maxWidth=n;l.maxNumLines=o;l.align=p;l.baseline=b;return l}function w(t){if(void 0===t||""===t)return 0;f.setText(t);return f.measure().width}function L(t){if(void 0===t||""===t)return 0;d.setText(t);return d.measure()}function y(t){if(void 0===t||""===t)return 0;c.setText(t);return c.measure().width}function P(t,e){if(void 0===t||""===t)return{numLines:0,width:0,height:0,lines:[]};c.setText(t);c.maxWidth=e;return c.measure()}function O(t,e){if(void 0===t||""===t)return{index:-1,width1:0,width2:0,width:0};void 0===e&&(e=w(t));var i=Number.MAX_VALUE,s=t.length,n=Math.floor(s/2),a=t.substring(0,n),o=0,l=true,r=a.lastIndexOf(" "),h,u,f,c;while(r>-1&&l){a=t.substring(0,r);h=w(a);u=e-h-_;f=Math.max(h,u);if(i<f)l=false;else{i=f;o++;c={index:r,width1:h,width2:u,width:i};r=a.lastIndexOf(" ")}}if(o>1)return c;r=t.indexOf(" ",n);o=0;while(r>-1){a=t.substring(r+1);u=w(a);h=e-u-_;f=Math.max(h,u);if(i<f)return c;i=f;o++;c={index:r,width1:h,width2:u,width:i};r=t.indexOf(" ",r+1)}void 0===c&&(c={index:-1,width1:0,width2:e,width:e});return c}function V(t,e){if(void 0===t||""===t)return{index1:-1,index2:-1,width1:0,width2:0,width3:0,width:0};void 0===e&&(e=w(t));var i=Number.MAX_VALUE,s=t.length,n=Math.floor(s/3),a=t.substring(0,n),o=0,l=true,r=a.lastIndexOf(" "),h,u,f,c,d,x,p;while(r>-1&&l){a=t.substring(0,r);h=t.substring(r+1);f=w(h);u=e-f-_;x=O(h,f);d=x.width;c=Math.max(u,d);if(i<c)l=false;else{i=c;o++;p={index1:r,index2:x.index,width1:u,width2:x.width1,width3:x.width2,width:i};r=a.lastIndexOf(" ")}}if(o>1)return p;r=t.indexOf(" ",n);o=0;while(r>-1){h=t.substring(r+1);f=w(h);u=e-f-_;x=O(h,f);d=x.width;c=Math.max(u,d);if(i<c)return p;i=c;o++;p={index1:r,index2:x.index,width1:u,width2:x.width1,width3:x.width2,width:i};r=t.indexOf(" ",r+1)}void 0===p&&(p={index1:-1,index2:-1,width1:0,width2:0,width3:e,width:e});return p}function A(t,e,i){var s;if(e<=i)return{minTextWidth:e,level:1};if(e<=2*i){s=O(t,e);if(s.width<=i)return{minTextWidth:s.width,level:0===s.width1?3:2};if(0===s.width1)return{minTextWidth:Math.ceil(s.width/2)+x,level:3}}if(e<3*i){s=V(t,e);if(0===s.width1&&0===s.width2)return{minTextWidth:Math.min(Math.ceil(s.width/3)+Math.ceil(3*x/2),i),level:3};return{minTextWidth:Math.min(s.width,i),level:3}}return{minTextWidth:i,level:3}}function W(t,e,i,s,n){t.size=e;t.size2=i;t.numLines=s;t.level=n}function z(t,e,i){if(t.size/2<=e||3===t.numLines||3===t.level)return;var s,n;if(2===t.numLines){s=V(t.text,t.singleLineTextWidth);n=P(t.text,s.width);W(t,s.width,n.height,n.numLines,3);return}s=O(t.text,t.singleLineTextWidth);if(0===s.width1)return;if(s.width/2<=e||true===i){n=P(t.text,s.width);W(t,s.width,n.height,n.numLines,2);return}s=V(t.text,t.singleLineTextWidth);n=P(t.text,s.width);W(t,s.width,n.height,n.numLines,3)}function j(t,e,i){var s,n;if(t.position+t.size/2+i>e.position-e.size/2){if(t.size>e.size){s=t;n=e.position-e.size/2-i-t.position}else{s=e;n=e.position-(t.position+t.size/2+i)}z(s,n,true)}}function R(t,e,i,s,n,a){t.singleLineTextWidth=e;t.size=i;t.size2=s;t.numLines=n;t.level=a}function S(t){return String(void 0!==t.label?t.label:t)}function T(t,e){var i=t,s=r.escapeRegExp("+-"+(this.chartFormatter.getLocaleInfo().qDecimalSep||"")+(this.chartFormatter.getLocaleInfo().qThousandSep||"")),n=i.replace(new RegExp("[0-9e"+s+"]","g"),"");n=n.length?i:this._axis.format(e);return n}function N(t){if(!this._axis||!this._data)return;this._axis.updateFormatter();var e=this._data?this._data.length:0,i=[],s=this._axis.getPlotMin(),n=this._axis.getPlotMax(),a,o,l,r,u,f,c,d=[],_=[],x=-Number.MAX_VALUE,p=Number.MAX_VALUE,b=0,v=0;this._plotMinValueForRelevantSize=s;this._plotMaxValueForRelevantSize=n;this._maxLowerLabelIndex=void 0;this._minUpperLabelIndex=void 0;for(a=0;a<e;a+=1){if(!this._data[a]||!this._data[a].show||void 0===this._data[a].refLineExpr)continue;o=S(this._data[a].refLineExpr);l=t?this._currentProperties["value"+a]:this._data[a].refLineExpr.value;if(null===l||Number.isNaN(+l))continue;r=this._data[a].label;u=T.apply(this,[o,l]);f=" "+h.lrm+"("+u+")"+h.lrm;if(l<s){b++;_.push({label:r,value:u});x<l&&(this._maxLowerLabelIndex=a);continue}if(l>n){v++;d.push({label:r,value:u});p>l&&(this._minUpperLabelIndex=a);continue}c=r+f;i.push({index:a,text:c,value:l,text1:r,text2:f,tooltipRows:[{label:r,value:u}]})}v>0&&i.push({index:-1,text:v<10?v.toString():"9+",value:"max",type:1,tooltipRows:d});b>0&&i.push({index:-2,text:b<10?b.toString():"9+",value:"min",type:-1,tooltipRows:_});this._labelObjects=i;this._numLabelObjects=this._labelObjects?this._labelObjects.length:0;this._labelsMaxWidthNeedToUpdate=true;this._labelsMaxHeightNeedToUpdate=true;this._labelObjectsNeedToUpdate=false;this._numLowerLabels=b;this._numUpperLabels=v}function E(){if(!this._labelsMaxWidthNeedToUpdate)return;this._labelsMaxWidthNeedToUpdate=false;var t,e=0,i,s;c.maxWidth=this._labelMaxWidthForYAxis;for(t=0;t<this._numLabelObjects;t++){if(void 0!==this._labelObjects[t].type){i=L(this._labelObjects[t].text);s=F(i);e=Math.max(e,s+4)}else e=Math.max(e,y(this._labelObjects[t].text)+4);if(e>=this._labelMaxWidthForYAxis){this._labelsMaxWidth=this._labelMaxWidthForYAxis;return}}this._labelsMaxWidth=e}function U(t){if("max"===t)return Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMax()))-.5+(this.isVertical()?-.1:.1);if("min"===t)return Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMin()))-.5+(this.isVertical()?.1:-.1);return Math.floor(this._axis.getPositionOfValue(t))-.5}function C(){var t,e,i;for(t=0;t<this._numLabelObjects;t+=1){e=this._labelObjects[t];i=U.call(this,e.value);e.position=i}}function F(t){return Math.sqrt(t.width*t.width+t.height*t.height)}function k(){if(!this._labelsMaxHeightNeedToUpdate)return;this._labelsMaxHeightNeedToUpdate=false;C.call(this);var t,e=0,i,n;this.calculateLabelWidths(this._labelObjects,this._componentWidth,this._horizontalLabelGap,this._boundaryGap,this._labelMaxWidthForXAxis);s.positionRectanglesAlongAxis(this._labelObjects,this._horizontalLabelGap,this._boundaryGap,this._componentWidth,true);for(t=0;t<this._numLabelObjects;t+=1)if(void 0!==this._labelObjects[t].type){i=L(this._labelObjects[t].text);n=F(i);e=Math.max(e,n)}else e=Math.max(e,this._labelObjects[t].size2);this._labelsMaxHeight=e}function D(t,e){var i={label:{color:t.getStyle("referenceLine.label.name","color"),font:"normal "+t.scaleFontSize(t.getStyle("referenceLine.label.name","fontSize"),e,null)+" 'QlikView Sans'"},outOfBounds:{color:t.getStyle("referenceLine.outOfBounds","color"),backgroundColor:t.getStyle("referenceLine.outOfBounds","backgroundColor"),font:"normal "+t.scaleFontSize(t.getStyle("referenceLine.outOfBounds","fontSize"),e,null)+" 'QlikView Sans'"}};f=M("",i.label.font,0,0,Number.MAX_VALUE,1);c=M("",i.label.font,0,0,Number.MAX_VALUE,3);d=M("",i.outOfBounds.font,0,0,Number.MAX_VALUE,1);_=w("m m")-w("mm");x=w("m");return i}u=t.extend("RefLineLabels",{init:function t(){this._super.apply(this,arguments);this.renderer=new i(this.container);this._tooltips=new n(this.container);this._currentProperties={};this._transitionProperties={};this.renderers={labels:this.renderer};this._$renderAreaWrap.addClass("qv-chart-component-reflinelabels");this._hasVisibleRefLines=false;this._styleService=e.initializeService("object."+this.options.parentType);this._style=D(this._styleService);this._labelMargin=4;this._labelMaxWidthForYAxis=70;this._labelMaxWidthForXAxis=100;this._labelMaxHeightForXAxis=50;this._verticaLabelGap=4;this._horizontalLabelGap=6;this._boundaryGap=4},calculateRelevantSize:function t(){this._super();N.call(this);if(this.isVertical()){E.call(this);this.relevantSize=this._labelsMaxWidth+this._labelMargin}else{var e=this.rect.width?this.rect.width:this._axis._plotSize;if(this._componentWidth!==e){this._componentWidth=e;this._labelsMaxHeightNeedToUpdate=true}k.call(this);this.relevantSize=this._labelsMaxHeight+this._labelMargin}},calculatePreliminaryRelevantSize:function t(){this.relevantSize=this.isVertical()?this._labelMaxWidthForYAxis:this._labelMaxHeightForXAxis},setData:function t(){this._super.apply(this,arguments);this._hasVisibleRefLines=this.checkIfHavingVisibleRefLines();this.updateLocalPlotMaxMinValues();this._labelObjectsNeedToUpdate=true},setAxis:function t(e){var i=this;this._axis&&this._axis.stopListen("changed",i.invalidateDisplay,i);this._axis=e;this._axis.listen("changed",i.invalidateDisplay,i);this._labelObjectsNeedToUpdate=true},isVisible:function t(){var e=this._super.apply(this,arguments);if(!e)return false;if(this._axis&&(this._plotMinValue!==this._axis.getPlotMin()||this._plotMaxValue!==this._axis.getPlotMax())){this._hasVisibleRefLines=this.checkIfHavingVisibleRefLines();this.updateLocalPlotMaxMinValues()}return this._hasVisibleRefLines},calculateLabelWidths:function t(e,i,s,n,a){var o,l,r,h,u,f,c,d=e?e.length:0;if(0===d)return;for(o=0;o<d;o++){r=e[o];h=r.text;if(void 0===h||""===h)R(r,0,0,0,0,0,void 0);else{u=w(h);f=A(h,u,a);c=P(h,f.minTextWidth);R(r,u,f.minTextWidth,c.height,c.numLines,f.level,c)}}e.sort(function(t,e){return t.position>e.position?1:-1});r=e[d-1];void 0!==r.text&&""!==r.text&&z(r,i-r.position-n);r=e[0];void 0!==r.text&&""!==r.text&&z(r,r.position-n);for(o=0;o<d-1;o++)if(void 0!==e[o].text&&""!==e[o].text&&void 0!==e[o+1].text&&""!==e[o+1].text)for(l=0;l<4;l++)j(e[o],e[o+1],s)},checkIfHavingVisibleRefLines:function t(){if(!this._data||0===this._data.length||!this._axis)return false;var e;for(e=0;e<this._data.length;e+=1)if(this._data[e]&&this._data[e].show&&void 0!==this._data[e].refLineExpr){if("value"in this._data[e].refLineExpr&&(null===this._data[e].refLineExpr.value||Number.isNaN(+this._data[e].refLineExpr.value)))continue;return true}return false},updateLocalPlotMaxMinValues:function t(){if(this._axis){this._plotMinValue=this._axis.getPlotMin();this._plotMaxValue=this._axis.getPlotMax()}},setLabelMargin:function t(e){this._labelMargin=void 0===e?4:e},hasValidData:function t(){return this._super()&&this._data&&this._axis},paint:function t(){this._super.apply(this,arguments);this._style=D(this._styleService);if(this._plotMinValue!==this._axis.getPlotMin()||this._plotMaxValue!==this._axis.getPlotMax()){this._hasVisibleRefLines=this.checkIfHavingVisibleRefLines();this.updateLocalPlotMaxMinValues()}if(!this._hasVisibleRefLines){this._clearLabels();return}N.call(this,true);var e,i,n,r,h,u,f,c,d,_,x,b,M,w,L,y,P,O,V=this.isVertical()?"middle":"top"===this.dock?"bottom":"top",A="middle",W=this.rect.width,z=this.rect.height,j="top"===this.dock?z-this._labelMargin:this._labelMargin,R=new Array(this._numLabelObjects),S=this._labelMaxWidthForYAxis,T=this._style.label.font,E,C="top"===this.dock?(z-this._labelMargin)/2:(z+this._labelMargin)/2;if(this.yMirrorMode){c=.7;d=.3;_=W/2-(this._labelMargin/2+1)}else{c=.3;d=.7;_=W/2+this._labelMargin/2+1}E=_;for(e=0;e<this._numLabelObjects;e+=1){P=this._labelObjects[e];i=P.index;n=U.call(this,P.value);if(this.isVertical()){r=_;h=n}else{r=n;h=void 0!==P.type?C:j}x=i>-1?m(this._data[i],this._style.label.color):this._style.label.color;if(void 0!==P.type){T=this._style.outOfBounds.font;O=A;x=this._style.outOfBounds.color}else{T=this._style.label.font;O=V}b=new a;b.fill=x;b.x=r;b.y=h;b.align=p;b.baseline=O;b.font=T;b.maxWidth=S;b.maxHeight=92;b.maxNumLines=3;b.ellipsis="â€¦ "+P.text2;b.setText(P.text);R[e]=b;P.position=n;P.shapeWrapper=b}if(0===this._numLabelObjects){this._clearLabels();return}if(this.isVertical()){g(this._labelObjects);if(this._numUpperLabels>0){n=Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMax()))-.7;this._labelObjects.push({position:n,size:v})}if(this._numLowerLabels>0){n=Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMin()))-.3;this._labelObjects.push({position:n,size:v})}s.positionRectanglesAlongAxis(this._labelObjects,this._verticaLabelGap,this._boundaryGap,this.rect.height,false);for(e=this._labelObjects.length-1;e>-1;e--)void 0===this._labelObjects[e].shapeWrapper&&this._labelObjects.splice(e,1);for(e=0;e<this._numLabelObjects;e+=1){P=this._labelObjects[e];M=P.shapeWrapper;M.y=P.newPosition;if(1===P.type){w=P.shapeWrapper.measure();L={cx:M.x,cy:M.y,r:F(w)/2}}if(-1===P.type){w=P.shapeWrapper.measure();y={cx:M.x,cy:M.y,r:F(w)/2}}}}else{this.calculateLabelWidths(this._labelObjects,this.rect.width,this._horizontalLabelGap,this._boundaryGap,this._labelMaxWidthForXAxis);if(this._numUpperLabels>0){n=Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMax()))-c;this._labelObjects.push({position:n,size:v})}if(this._numLowerLabels>0){n=Math.floor(this._axis.getPositionOfValue(this._axis.getPlotMin()))-d;this._labelObjects.push({position:n,size:v})}s.positionRectanglesAlongAxis(this._labelObjects,this._horizontalLabelGap,this._boundaryGap,this.rect.width,false);for(e=this._labelObjects.length-1;e>-1;e--)void 0===this._labelObjects[e].shapeWrapper&&this._labelObjects.splice(e,1);for(e=0;e<this._numLabelObjects;e+=1){P=this._labelObjects[e];M=P.shapeWrapper;M.x=P.newPosition;M.maxWidth=P.size;if(1===P.type){w=P.shapeWrapper.measure();L={cx:M.x,cy:C,r:F(w)/2}}if(-1===P.type){w=P.shapeWrapper.measure();y={cx:M.x,cy:C,r:F(w)/2}}}}if(this._numLowerLabels>0){if(this.isVertical())b=new l([{x:E-3,y:z-5.2},{x:E,y:z},{x:E+3,y:z-5.2}]);else{u=this.yMirrorMode?W-5.2:5.2;f=this.yMirrorMode?W:0;b=new l([{x:u,y:C-3},{x:f,y:C},{x:u,y:C+3}])}b.fill=this._style.label.color;R.push(b);b=new o(y.cx,y.cy,y.r);b.fill=this._style.outOfBounds.backgroundColor;R.splice(0,0,b)}if(this._numUpperLabels>0){if(this.isVertical())b=new l([{x:E-3,y:5.2},{x:E,y:0},{x:E+3,y:5.2}]);else{u=this.yMirrorMode?5.2:W-5.2;f=this.yMirrorMode?0:W;b=new l([{x:u,y:C-3},{x:f,y:C},{x:u,y:C+3}])}b.fill=this._style.label.color;R.push(b);b=new o(L.cx,L.cy,L.r);b.fill=this._style.outOfBounds.backgroundColor;R.splice(0,0,b)}this.renderer.stage.removeChildren();this.renderer.stage.addChildren(R);this.renderer.render();this._tooltips.setLabelObjects(this._labelObjects)},release:function t(){this._super();this._axis&&this._axis.stopListen("changed",null,this);this._tooltips.release();this._tooltips=null},on:function t(){this._super();this._tooltips.on()},off:function t(){this._super();this._tooltips.off()},_updateProperties:function t(){if(!this._data)return;var e=this._data,i=e.length,s,n;for(n=0;n<i;n++){s="value"+n;this._transitionProperties[s]=e[n].refLineExpr.value}this.calculateRelevantSize();this._super()},_clearLabels:function t(){this.renderer.stage.removeChildren();this.renderer.clear()}});return u}.apply(e,s),void 0!==n&&(t.exports=n))},2085:function(t,e,i){"use strict";var s,n;!(s=[],n=function(){var t;t={positionRectanglesAlongAxis:function t(e,i,s,n,a){var o,l,r,h,u;o=e?e.length:0;true!==a&&e.sort(function(t,e){return t.position>e.position?1:-1});function f(){if(0===o){l=[];r=0;return}var t,s,n,a,h;l=[[0]];for(t=1;t<o;t++){s=e[t].position;n=e[t].size;a=e[t-1].position;h=e[t-1].size;a+h/2+i>s-n/2?l[l.length-1].push(t):l.push([t])}r=l?l.length:0}function c(){if(0===o)return;d();_();p();h=x();if(h)return;b()}function d(){var t,n,a,l,r;n=e[0].position;a=e[0].size;n=Math.max(s,n-a/2)+a/2;e[0].newPosition=n;for(t=1;t<o;t++){l=e[t-1].newPosition;r=e[t-1].size;n=e[t].position;a=e[t].size;n=Math.max(l+r/2+i,n-a/2)+a/2;e[t].newPosition=n}}function _(){var t,a,l,r,h;a=e[o-1].newPosition;l=e[o-1].size;if(a+l/2>n){e[o-1].newPosition=n-l/2-s;for(t=o-2;t>=0;t--){r=e[t+1].newPosition;h=e[t+1].size;a=e[t].newPosition;l=e[t].size;a=Math.min(r-h/2-i,a+l/2)-l/2;e[t].newPosition=a}}}function x(){var t,n,a,l=e[0].newPosition,r=e[0].size;if(l-r/2<s)return true;if(l-r/2>s)return false;for(t=1;t<o;t++){n=e[t-1].newPosition;a=e[t-1].size;l=e[t].newPosition;r=e[t].size;if(n+a/2+i<l-r/2)return false}return true}function p(){var t,i,s,n,a,o,h,f,c,d,_,x;u&&u.length===r||(u=new Array(r));for(t=0;t<r;t+=1){i=l[t];s=i[0];n=i[i.length-1];a=e[s];o=e[n];c=a.position;h=a.size;_=a.newPosition-h/2;d=o.position;f=o.size;x=o.newPosition+f/2;u[t]={firstPosition:c,lastPosition:d,minPosition:_,maxPosition:x}}}function b(){v(0,s);for(var t=1;t<r;t++)v(t,u[t-1].maxPosition+i)}function v(t,e){var i=l[t];i.length%2===0?g(t,e):m(t,e)}function g(t,i){var s,n,a,o,r,h,u,f,c,d,_,x,p;s=l[t];n=s[0];a=s[s.length/2-1];o=s[s.length/2];r=e[n];h=e[a];u=e[o];c=r.newPosition;f=r.size;_=(h.position+u.position)/2;x=(h.newPosition+u.newPosition)/2;p=x-_;d=c-p;M(t,c,d,f,i)}function m(t,i){var s,n,a,o,r,h,u,f,c,d,_;s=l[t];n=s[0];a=s[(s.length-1)/2];o=e[n];r=e[a];h=o.newPosition;u=o.size;f=r.position;c=r.newPosition;d=c-f;_=h-d;M(t,h,_,u,i)}function M(t,e,i,s,n){if(i>=e)return;i=Math.max(n+s/2,i);var a=e-i;u[t].minPosition-=a;u[t].maxPosition-=a;w(t,a)}function w(t,i){var s,n,a,o=l[t],r=o?o.length:0;for(s=0;s<r;s++){n=o[s];a=e[n];a.newPosition-=i}}f();c()}};return t}.apply(e,s),void 0!==n&&(t.exports=n))},2086:function(t,e,i){"use strict";var s,n;!(s=[i(11),i(48),i(92),i(99),i(146),i(453)],n=function(t,e,i,s,n,a){var o=t(document),l;function r(t,e,i){var s=t.offset();return new n(e-s.left,i-s.top)}function h(t,e,i){var s=t.offset();return new n(s.left+e,s.top+i)}function u(t,e){var i=t.shapeWrapper.getBoundingRect();return i.pointInside(e.x,e.y)}function f(t,e){return t.filter(function(t){return u(t,e)})[0]}function c(t,e){return{positions:[h(e,t.x+t.width/2,t.y),h(e,t.x+t.width,t.y+t.height/2),h(e,t.x,t.y+t.height/2),h(e,t.x+t.width/2,t.y+t.height)],directions:["top","right","left","bottom"]}}function d(){l&&(l=null)}var _=i.extend("RefLineLabelTooltip",{init:function e(i){this.$container=t(i)},setLabelObjects:function t(e){this._labelObjects=e},on:function t(){var i=this;this._onMouseMove=function(t){if(!i._labelObjects)return;var s=r(i.$container,t.pageX,t.pageY);var n=f(i._labelObjects,s);if(n&&l!==n){l=n;var o=c(n.shapeWrapper.getLocalBoundingRect(),i.$container);e.getService("qvChartTooltipService").open({content:[{rows:n.tooltipRows}],position:o.positions,direction:o.directions,hideCallback:d},a.getDuration(n.tooltipRows.length),500)}else if(!n){l=null;e.getService("qvChartTooltipService").close()}};this._onMouseLeave=function(){l=null;e.getService("qvChartTooltipService").close()};if(s.treatAsDesktop()){this.$container.on("mousemove",this._onMouseMove);this.$container.on("mouseleave",this._onMouseLeave);o.on("mouseleave.refLineLabels",this._onMouseLeave)}},off:function t(){this.$container.off("mousemove",this._onMouseMove);this.$container.off("mouseleave",this._onMouseLeave);o.off("mouseleave.refLineLabels",this._onMouseLeave)},release:function t(){this.$container=null}});return _}.apply(e,s),void 0!==n&&(t.exports=n))}}]);