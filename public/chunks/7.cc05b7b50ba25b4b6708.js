/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[7],{1127:function(t,e,i){"use strict";var n,s;!(n=[i(11),i(1047),i(2069),i(1739),i(1495),i(1303),i(410),i(2072),i(1740),i(1306),i(512),i(1741),i(104),i(305),i(1169),i(1170),i(420),i(164),i(89),i(1742),i(2081),i(2082),i(393),i(49),i(2083)],s=function(t,e,i,n,s,a,o,l,r,h,c,u,p,d,f,g,m,M,_,v,x,b,S,y){var D,k,w;k={debug:true,components:{}};function I(t){if(this._chartScale!==t){this._chartScale=t;this.$scope.dataAttributes.chartScale=t;Object.keys(this.components).forEach(function(t){this.components[t].chartScale=this._chartScale},this)}}function N(){var t=this.container.parentElement,e,i,n="",s="",a,o,l,r,h,c;t.style.height="100%";t.style.width="";t.style.left="";t.style.top="";if(!this._readStoredData||this.options.freeResize){I.call(this,1);return}e=this.container.clientWidth;i=this.container.clientHeight;h=this._data.snapshotData.content.size;a=h.w;o=h.h;var u=a/o;var p=e/i;if(u<=p){c=i/o;l=i*u/e;e=100*l+"%";i="100%";n=50*(1-l)+"%"}else{c=e/a;r=e/u/i;i=100*r+"%";e="";s=50*(1-r)+"%"}I.call(this,c);t.style.width=e;t.style.height=i;t.style.left=n;t.style.top=s}function C(){this._sizeChanged=false;N.call(this);var t=this.rect,e=this.container.clientWidth,i=this.container.clientHeight,n=new p(0,0,e,i),s,a;this.containerRect=new p(0,0,e,i);this._readStoredData&&!this.options.freeResize&&(a={width:this._data.snapshotData.content.size.w,height:this._data.snapshotData.content.size.h});a&&(n=new p(0,0,a.width,a.height));if(!t||t.width!==n.width||t.height!==n.height){for(s in this.components)this.components[s].setOuterRect(n.x+1,n.y+1,n.width-2,n.height-2);this.rect=n;this._updateLayoutMode(this.rect.width,this.rect.height);this._sizeChanged=true}}function T(t,e){Object.keys(this.components).forEach(function(i){["colorLegend","xAxis","dimensionAxis","timeAxis","continuousAxis","dataArea"].contains(i)&&this.components[i].setGlobalOpacity(t,e||false)},this)}function L(){var t;this.chartFormatter=new g(this.backendApi.localeInfo,this._data.qHyperCube.qMeasureInfo);for(t in this.components){this.components[t].chartFormatter=this.chartFormatter;this.components[t].measureFormatters=this.chartFormatter.getFormatters();this.components[t].combinedMeasuresFormatter=this.chartFormatter.getCombinedMeasuresFormatter()}}function P(){var t,i={};for(t in e.prototype)e.prototype.hasOwnProperty(t)&&"init"!==t&&(i[t]=e.prototype[t]);return i}function q(){var t=this;this.backendApi.clearSelections();var e=this.components.dataArea.getSelectableShapes();e.forEach(function(e){e.selected=false;t.onSelection.ToggleShape.call(t,e)});this.selectionsCacheCollection.clear();this.onSelection.scheduleInvalidation.call(this)}w=m.extend(P());D=w.extend({refreshSelections:function t(){this.specialCaseForSingleSelect=false},initialize:function t(){this._super();this._initiateBindings()},init:function n(s,a,o,l,r){e.prototype.init.call(this);o=t.extend(true,o||{},{},k);var h=a.find(".qv-viz");this._super(s,h,o,l);this.container=h[0];this.backendApi=l;this.selectionsApi=r;this.layoutEngine=new i;this.components={};this.providers={};this._changeWatchers=[];this._createComponents();this._createProviders();this._chartScale=1;this.chartFormatter=new g(this.backendApi.localeInfo);this.selectionsCache=new v;this.attributeSelectionsCache=new x;this.selectionsCacheCollection=new b([this.selectionsCache,this.attributeSelectionsCache]);this.selectionsCache.setSelectionMode(v.SELECTION_MODE.VALUE);this._chartContext=new u;this._layoutMode=d.LayoutMode.FULL;this.$scope.dataAttributes={};this.resize();this.specialCaseForSingleSelect=false;this._navigation=o.navigation},clearSelections:q,selectionModeAlpha:.5,getVerticalComponents:function t(){var e=[];this._data&&this._data.legend&&this.components&&this.components.colorLegend&&this.components.colorLegend.isVertical()&&e.push({comp:this.components.colorLegend,dock:this._data.legend.dock});return e},setYMirrorMode:function t(e){if(this.yMirrorMode===e)return;this.yMirrorMode=e;for(var i in this.components)this.components[i].setYMirrorMode(e);this.tooltips&&(this.tooltips.yMirrorMode=e);this.updateVerticalComponentsDock()},updateVerticalComponentsDock:function t(){var e,i,n,s,a;this._verticalComponents=this.getVerticalComponents();i=this._verticalComponents?this._verticalComponents.length:0;for(e=0;e<i;e++){n=this._verticalComponents[e];s=n.comp;if("far"===n.dock||"near"===n.dock||"auto"===n.dock){a="far"===n.dock||"auto"===n.dock;s.setDock(this.yMirrorMode?a?"left":"right":a?"right":"left")}}},setMinimumRequirements:function t(e,i){this._requirements={dimensions:{min:e},measures:{min:i}}},onToggleLasso:function t(e){this.toggleLasso=e},isLassoDisabled:function t(){return!this.selections.allowLasso},onSelection:{ToggleShape:function t(e){var i=this.$scope.layout.layers?this.$scope.layout.layers[0]:this.$scope.layout,n=i.qListObject?i.qListObject:i.qHyperCube;if(!e.selected&&1===n.qSize.qcy){this.specialCaseForSingleSelect=true;return}this.toggleCacheItem?this.toggleCacheItem(e):this.onSelection.scheduleInvalidation.call(this);if(e.id<-2||e.id>-1){this.selections.getActiveType().activeComponent&&this.selectionsCache.trackByIndices(this.selections.getActiveType().activeComponent.getSelectionIndices());this.selectionsCache.toggleByCacheItem(e)}this.specialCaseForSingleSelect=false;this._haveToggledShapes=this.selectionsCache.hasSelections()},Activated:function t(){T.apply(this,[this.selectionModeAlpha]);this._haveToggledShapes=false},Deactivated:function t(){T.apply(this,[1]);this.selectionsCacheCollection.clear();this.toggleLasso=false},Select:function t(e,i,n,s){var a=this;if(this.specialCaseForSingleSelect)return;var o=Array.isArray(n)?n:[n||0];if(this.selectionsCache.hasSelections()){var l,r=this.selectionsCache.getSelectedValuesInColumn(o[0]),h=-1;"K"===this._data.qHyperCube.qMode&&(h=r.indexOf(-3));l=1===o.length&&-1===h?this.backendApi.selectValues(o[0],r,false):this.backendApi.select(this.selectionsCache.rows,o,s);l.then(function(t){t||q.call(a)}).catch(function(t){t.isHandled=true})}else e.length&&e.every(function(t){return!t.selected})&&this.selectionsApi.clear()},SelectAttributeDim:function t(e,i){var n=this,s,a;e.forEach(function(t){this.attributeSelectionsCache.toggleValue(t,!!i&&void 0)},this);s=this.attributeSelectionsCache.getSelectedValuesInColumn(0);a=this.providers.colorMap&&this.providers.colorMap.getColorDataInfo();a&&a.legendPath&&this.backendApi.selectValues(0,s,false,a.legendPath).then(function(t){t||q.call(n)})},SelectRange:function t(e,i){var n=this;e&&0!==e.length?"dimension"===e[0].type?this.backendApi.selectDimensionRange(e).then(function(t){t||q.call(n)}):this.backendApi.selectRange(e,i).then(function(t){t||q.call(n)}):this.selectionsApi.clear()},Confirm:function t(){},Cancel:function t(){this.selectionsCacheCollection.clear()},Clear:function t(){this.selectionsCacheCollection.clear()},scheduleInvalidation:function t(){var e=this;this._invalidationTimer||(this._invalidationTimer=setTimeout(function(){e.onSelection.invalidate.call(e);e._invalidationTimer=null},10))},cancelInvalidation:function t(){clearTimeout(this._invalidationTimer);this._invalidationTimer=null},invalidate:function t(){this.components.dataArea.invalidateDisplay("Chart.onSelection.invalidate");this.components.colorLegend&&this.components.colorLegend.invalidateDisplay("Chart.onSelection.invalidate");Object.keys(this.components).forEach(function(t){(this.components[t]instanceof a||this.components[t]instanceof o&&this.components[t].isDimension)&&this.components[t].invalidateDisplay("Chart.onSelection.invalidate")},this)}},getLayoutMode:function t(){return this._layoutMode},getVerticalLayoutMode:function t(){return this._verticalLayoutMode},getHorizontalLayoutMode:function t(){return this._horizontalLayoutMode},setLayoutMode:function t(e){this._explicitLayoutMode=e;if(this._layoutMode!==e){this._layoutMode=e;this.fire("layoutModeChanged")}},getSnapshotSize:function t(){return this.rect?{w:this.rect.width,h:this.rect.height}:{w:0,h:0}},_updateLayoutMode:function t(e,i){if(this._explicitLayoutMode)return;this._layoutMode=d.getLayoutMode(e,i);this._horizontalLayoutMode=d.getHorizontalLayoutMode(e);this._verticalLayoutMode=d.getVerticalLayoutMode(i);this.fire("layoutModeChanged");this.fire("verticalLayoutModeChanged");this.fire("horizontalLayoutModeChanged")},_createProviders:function t(){var e=this.options;if(e.providers.colorMap){this.providers.colorMap="function"===typeof e.providers.colorMap.clazz?new e.providers.colorMap.clazz(e.providers.colorMap,this.backendApi.model.app):new c(e.providers.colorMap,this.backendApi.model.app);this.components.dataArea&&this.components.dataArea.setColorMap(this.providers.colorMap);this.components.colorLegend&&this.components.colorLegend.setColorMap(this.providers.colorMap)}},_initiateBindings:function t(){this._changeWatchers||(this._changeWatchers=[]);Object.keys(this.components).forEach(function(t){this._changeWatchers.push(f.bindProperty(this.components[t],"layoutMode",this,"layoutMode"));this._changeWatchers.push(f.bindProperty(this.components[t],"verticalLayoutMode",this,"verticalLayoutMode"));this._changeWatchers.push(f.bindProperty(this.components[t],"horizontalLayoutMode",this,"horizontalLayoutMode"))},this);this.components.dataArea&&this._changeWatchers.push(f.bindSetter(this._updateSelectionCache.bind(this),this.components.dataArea,"selectableShapes"))},_updateSelectionCache:function t(e){var i=this.selections&&this.selections.cache||this.tooltips&&this.tooltips.cache;if(!i)return;e=e||this.components.dataArea.getSelectableShapes();var n=this.selectionsCacheCollection,a=!(!this.selections||!this.selections.getActiveType)&&this.selections.getActiveType(),o=!!a;i.clear();e.forEach(function(t){i.add(t)});o&&(/^item/.test(a.getActiveMode())?e.forEach(function(t){t.selected=n.isCacheItemSelected(t)}):(a.activeComponent instanceof s&&"range.measure"===a.getActiveMode()||a.activeComponent instanceof l&&"range"===a.getActiveMode())&&a.updateShapesState());Object.keys(this.components).forEach(function(t){["colorLegend","xAxis","dimensionAxis"].contains(t)&&this.components[t].setSelectableShapes(e)},this)},_createComponents:function t(){var e=this,i=this.components,s=this.options,a,o,c;Object.keys(s.components).map(function(t){return{sortKey:s.components[t].sortKey||0,cmpKey:t}}).sort(function(t,e){return t.sortKey-e.sortKey}).forEach(function(t){var u=t.cmpKey;a=["component",u].join(".");o=s.components[u];o.label=u;c=null;if("function"===typeof s.components[u].clazz)c=s.components[u].clazz;else switch(u){case"dataArea":case"dataArea2":c=n;break;case"colorLegend":c=l;break;case"basicColorLegend":c=r;break}if(c){o.parentType=e.constructor.name.charAt(0).toLowerCase()+e.constructor.name.slice(1);o._disableSelections=s._disableSelections;i[u]=new c(this.container,o,a);i[u].selectionsApi=e.selectionsApi;i[u].backendApi=e.backendApi;i[u]instanceof h||this.layoutEngine.addComponent(i[u])}},this)},preLayout:function t(){},layout:function t(e,i){this.layoutEngine.layout(this.rect,this._layoutMode,this.containerRect,e,i)},resize:function t(){if(this._data&&this.isDataValid(this._data)){this.prePaint(this._data);return this._paint()}return _.resolve()},setSnapshotData:function t(e,i){var n=this.getSnapshotSize(),s={};Object.keys(this.components).forEach(function(t){s[t]={visible:this.components[t].isVisible(),dock:this.components[t].dock,size:{w:this.components[t].rect.width,h:this.components[t].rect.height}}},this);e.snapshotData.content={chartData:this.getSnapshotChartData(i),size:{w:n.w,h:n.h},components:s,v:.96}},getSnapshotChartData:function t(){var e={};if(this.components.colorLegend){e.legendScrollOffset=this.components.colorLegend.getScrollPosition();var i=this.components.colorLegend.getExternalDataPage();i&&(e.legendDataPage=i)}if(this.providers.colorMap){var n=this.providers.colorMap.getSnapshotChartData();n.forEach(function(t){e[t.key]=t.data})}return e},getViewState:function t(){return{legendScrollOffset:this.components.colorLegend?this.components.colorLegend.getScrollPosition():0}},getSnapshotStoredChartData:function t(){if(this._data&&this._data.snapshotData&&this._data.snapshotData.content)return this._data.snapshotData.content.chartData},setInteractionState:function t(e,i){this._super(e,i);var n=this;Object.keys(this.components).forEach(function(t){n.components[t].setUseTransition(n._navigation&&(n._inAnalysisState||n._inEditState))})},_postResize:function t(){this._data.legend&&this.components.colorLegend&&this._updateLegendDock(this.components.colorLegend,this._data)},_paint:function t(){if(!this.isValid(this._data))return this.clear().then(function(){return{invalid:true}});var e=this.getSnapshotStoredChartData();if(this.components.colorLegend){this.components.colorLegend.pagingMode=this._pagingMode||0;this._readStoredData&&e?this.components.colorLegend.setScrollPosition(e.legendScrollOffset||0):this.options.viewState&&this.components.colorLegend.setScrollPosition(this.options.viewState.legendScrollOffset||0)}C.call(this);this.$scope.dataAttributes.doesNotFit=this.rect.height<10;this._sizeChanged&&this._postResize();return _.resolve()},paint:function t(e){if(e.qSelectionInfo&&e.qSelectionInfo.qInSelections||!this.isValid(this._data))return _.resolve();return this._paint()},suppressOnPaint:function t(e){var i=this._super(e);i&&this.prePaint(e);return i},prePaint:function t(){this.$scope.dataAttributes.layoutMode=this._layoutMode;this.$scope.dataAttributes.onlyNullColor=false;return this._super()},_preUpdateData:function t(e){if(this.providers.colorMap){if(this._readStoredData){this.providers.colorMap.setSnapshotChartData(e.snapshotData.content.chartData);this.components.miniChart&&this.components.miniChart.setSnapshotChartData(e.snapshotData.content.chartData)}else{this.providers.colorMap.setSnapshotChartData();this.components.miniChart&&this.components.miniChart.setSnapshotChartData()}return this.providers.colorMap.setData(e).then(function(){return e})}return _.resolve(e)},updateData:function t(e){var i=this;if(i._destroyed)return _.reject();var n=i.isValid(e),s;for(s in i.components)i.components[s].setHasValidData(n);if(!n){i.updateSelectableState(e);i._updateSelectionCache([]);return i.clear()}this._readStoredData=this.options._readStoredData||e&&e.snapshotData&&e.snapshotData.content;return this._preUpdateData(e).then(a);function a(t){if(i._destroyed)return _.reject();i._data=t;var e=i._updateData(t);i.setYMirrorMode(i.options&&"rtl"===i.options.direction&&!(i._data&&i._data.reverseRtl));function n(){if(i._destroyed)return _.reject();if(i.providers.colorMap){var t=i.providers.colorMap.getColorDataInfo();if(i.components.colorLegend&&t&&t.legendPath){if(i._readStoredData){i.components.colorLegend.setExternalColorItems(i._data.snapshotData.content.chartData.legendDataPage);return _.resolve()}return _.all([i.backendApi.getData(t.legendPages,t.legendPath).then(function(t){i.components.colorLegend.setExternalColorItems(t)})])}i.components.colorLegend.setExternalColorItems(null);return _.resolve()}return _.resolve()}if(e&&"function"===typeof e.then)return e.then(n);e=n();return e}},_updateData:function t(e){var i;this._data=e;this._readStoredData=this.options._readStoredData||e&&e.snapshotData&&e.snapshotData.content;this.selectionsCacheCollection.clear();if(e.legend&&this.components.colorLegend){this.components.colorLegend[(e.legend.auto||e.legend.show?"show":"hide")+"Component"]();this.components.colorLegend.attributeSelectionsCache=this.attributeSelectionsCache;this._updateLegendDock(this.components.colorLegend,e)}L.call(this);if(this.providers.colorMap){this.providers.colorMap.setMeasureFormatters(this.chartFormatter.getFormatters());this.providers.colorMap.setGenericFormatter(this.chartFormatter.createFormatter())}if(this.tooltips){this.tooltips.measureFormatters=this.chartFormatter.getFormatters();this.tooltips.parentScope=this.$scope;this.tooltips.colorMap=this.providers.colorMap}this._chartContext.refresh(e);var n=this.isValid(this._data);for(i in this.components)this.components[i]._hasValidData=n;this.updateSelectableState();return _.resolve()},_updateLegendDock:function t(e,i){i.legend&&i.legend.dock&&"auto"!==i.legend.dock?e.setDock(i.legend.dock):e.setDock(e.outerRect.height/e.outerRect.width<1?this.yMirrorMode?"left":"right":"bottom")},destroy:function t(){this.off();while(this._changeWatchers.length)this._changeWatchers.pop().unbind();var e;for(e in this.components)this.components[e].release();for(e in this.providers)this.providers[e].release&&this.providers[e].release();this.$scope.dataAttributes={};if(this.selections){this.selections.cache.clear();this.selections.release();this.selections=null}if(this.tooltips){this.tooltips.release();this.tooltips=null}this._chartContext.release();this._super.apply(this,arguments)},clear:function t(){var e=[];Object.keys(this.components).forEach(function(t){e.push(this.components[t].clear())},this);return _.all(e)},isValid:function t(e){return this.isDataValid(e)},isDataValid:function t(e){var i=!!e&&!!e.qHyperCube&&e.qHyperCube.qDimensionInfo.length&&!e.qHyperCube.qDimensionInfo.some(function(t){return!!t.qError})&&e.qHyperCube.qMeasureInfo.length&&!e.qHyperCube.qMeasureInfo.some(function(t){return!!t.qError});return i},isDataSelectable:function t(e,i){if(!this.isValid(this._data)||!this._inAnalysisState)return false;return void 0!==i?true!==e.qHyperCube.qDimensionInfo[i].qLocked:e.qHyperCube.qDimensionInfo.some(function(t){return true!==t.qLocked})},updateSelectableState:function t(e){if(!this.selections)return;var i=!this.isDataSelectable(e||this._data);Object.keys(this.components).forEach(function(t){this.components[t].setSelectionLocked(i)},this);this.selections&&this.selections.setLocked(i)},on:function t(){this._navigation&&Object.keys(this.components).forEach(function(t){this.components[t].on()},this);this._super();this.updateSelectableState(this._data)},off:function t(){this._navigation&&Object.keys(this.components).forEach(function(t){this.components[t].off()},this);this._super()},selectWhileLocked:function t(e){M.showLockedFeedback(e||this._data.qHyperCube.qDimensionInfo)},selectWhileSingleSelect:function t(e){M.showLockedFeedback(e||this._data.qHyperCube.qDimensionInfo)},getPreferredSize:function t(){return this._super()},getContextMenu:function t(e,i,n){if(y.getFlag("COPY_DATA_CHART")&&n.target&&this.tooltips){var s=this.tooltips.shapesFrom.shapeFromPoint({x:n.offsetX,y:n.offsetY});if(s){var a=s.getDimensions().join(",")+";"+s.getMeasures().join(",")+";"+s.labels.join(",");a&&""!==a&&i.addItem({icon:"lui-icon lui-icon--copy",translation:"$Copy Cell",tid:"copy-cell-context-item",select:function t(){S.copyToClipboard(a)}})}}return this._super(e,i,n)}});return D}.apply(e,n),void 0!==s&&(t.exports=s))},1128:function(t,e,i){"use strict";var n,s;!(n=[i(48),i(11),i(96),i(99)],s=function(t,e,i,n){t.directive("qvSelectionsToggleValue",["$parse",function(t){return{restrict:"A",link:function i(n,s,a){var o=t(a.qvSelectionsToggleValue)(),l=o.selector,r="."+n.$id+"-toggle-value",h=o.itemKey||"cell";s.on("qv-activate"+r,l,function(t){var i=e(t.target).closest(l),s=i.scope()[h];if(!i.length||!s)return;n.$apply(function(){var e={$event:t};e[h]=s;n.$eval(a.qvSelectionsOnToggleValue,e)})});n.$on("$destroy",function(){s.off(r)})}}}]);t.directive("qvSelectionsToggleDimensionValue",["$parse",function(t){return{restrict:"A",link:function i(n,s,a){var o=t(a.qvSelectionsToggleDimensionValue)(),l=o.selector,r="."+n.$id+"-toggle-dimension-value",h=o.itemKey||"cell";s.on("qv-activate"+r,l,function(t){var i=e(t.target).closest(l),s=i.scope()[h];if(n.$eval(a.qvSelectionsExcludeToggleDimensionValue,{$event:t}))return;if(!s||!s.isDimensionValue)return;if(s.locked){n.$eval(a.qvSelectionsSelectWhileLocked);return}n.$apply(function(){var e={$event:t};e[h]=s;n.$eval(a.qvSelectionsOnToggleDimensionValue,e)})});n.$on("$destroy",function(){s.off(r)})}}}]);t.directive("qvSelectionsMultiselect",["$parse",function(t){return{restrict:"A",controller:function t(){},link:function s(a,o,l,r){var h=t(l.qvSelectionsMultiselect)(),c=h.selector,u=h.itemKey||"cell",p=a.$id+"-multiselect",d=a.$id+"-2finger-multiselect",f,g,m,M;function _(){i(o[0]).tap({id:p,options:{preventDefault:false},start:function t(i){m=e(i.target).closest(c)}});i(o[0]).swipe({id:p,options:{radiusThreshold:4,preventDefault:false},start:function t(e){var i,s;if(!n.isMouse(e)||!m.length){this.cancel();return}i=m.scope()[u];if(!i.isDimensionValue){this.cancel();return}if(i.locked){a.$eval(l.qvSelectionsSelectWhileLocked);this.cancel();return}M=i;s={$event:e};s[u]=i;a.$apply(a.$eval(l.qvSelectionsStartMultiselect,s))},update:function t(i){var n=e(i.target).closest(c),s;if(!n.length)return;s=n.scope()[u];a.$apply(a.$eval(l.qvSelectionsUpdateMultiselect,{start:M,current:s,dataColIx:s.dataColIx}))},end:function t(e){a.$apply(a.$eval(l.qvSelectionsEndMultiselect,{$event:e}))}});return function(){i(o[0]).off("*",p)}}function v(){i(o[0]).tap({id:d,options:{touches:2,preventDefault:false},end:function t(i,n){var s=n.pagePoints[0],o=n.pagePoints[1],r,h,p,d,f,g,m;r=s?e(document.elementFromPoint(s.x,s.y)):void 0;h=o?e(document.elementFromPoint(o.x,o.y)):void 0;p=r?r.closest(c).scope():void 0;d=h?h.closest(c).scope():void 0;f=p?p[u]:void 0;g=d?d[u]:void 0;if(!(f&&g&&f.isDimensionValue&&g.isDimensionValue))return;if(f.locked||g.locked){a.$eval(l.qvSelectionsSelectWhileLocked);return}a.$apply(function(){m={offsetLeft:r[0].offsetLeft,width:r[0].clientWidth,$event:i};m[u]=f;a.$eval(l.qvSelectionsStartMultiselect,m);a.$eval(l.qvSelectionsUpdateMultiselect,{start:f,current:g,dataColIx:f.dataColIx});a.$eval(l.qvSelectionsEndMultiselect,{$event:i})})}});return function(){i(o[0]).off("*",d)}}r.on=function(){f||(f=_());g||(g=v())};r.off=function(){if(f){f();f=void 0}if(g){g();g=void 0}};a.$watch("interactive",function(t){if(void 0===t)return;t?r.on():r.off()});a.$on("$destroy",function(){r.off()})}}}])}.apply(e,n),void 0!==s&&(t.exports=s))},1169:function(t,e,i){"use strict";var n,s;!(n=[i(92),i(1047),i(2079)],s=function(t,e,i){var n="__setters",s,a,o,l;s=e.extend("Link",{init:function t(e,i){this._super();this._property=i;this._host=e},setHost:function t(e){if(this._host===e&&this._hostObserved)return;this.unobserve();this._host=e;this.observe()},observe:function t(e){if(!this._host){this.fire("hostPropertyValueChanged",[void 0]);return}c(this._host,this._property);var i=this,n=h(this._property);this._callback=function(t){t.property===i._property&&i.fire("hostPropertyValueChanged",[t.newValue])};this._callbackSimple=function(){"function"===typeof this[n]&&i.fire("hostPropertyValueChanged",[this[n]()])};e||"function"!==typeof this._host[n]||i.fire("hostPropertyValueChanged",[this._host[n]()]);this._host.listen("propertyChange",this._callback);this._host.listen(this._property+"Changed",this._callbackSimple);this._hostObserved=true},unobserve:function t(){if(!this._host)return;this._callback&&this._host.stopListen("propertyChange",this._callback);this._callbackSimple&&this._host.stopListen(this._property+"Changed",this._callbackSimple);if(this._host[n]&&this._host[n][this._property]){var e=this._host[n][this._property],i;e.observers--;if(e.observers<=0){i="set"+this._property.substring(0,1).toUpperCase()+this._property.substring(1);if(e.isOriginalOwn)this._host[i]=e.original;else{this._host[i]=null;delete this._host[i]}e.original=null;this._host[n][this._property]=null;delete this._host[n][this._property]}}this._host=void 0;this._callback=void 0;this._callbackSimple=void 0;this._hostObserved=false}});a=t.extend("Chain",{init:function t(e,i){this._links=[];if(1===arguments.length&&"function"===typeof e)this._setter=e;else{this._wannabe=e;this._wannabeProp=i}},add:function t(e){var i=this,n;e.listen("hostPropertyValueChanged",function(t){n=i._links.indexOf(this);if(n===i._links.length-1)if(i._setter)i._setter(t);else{var e="set"+i._wannabeProp.substring(0,1).toUpperCase()+i._wannabeProp.substring(1);"function"===typeof i._wannabe[e]&&i._wannabe[e](t)}else i._links[n+1].setHost(t)});this._links.push(e)},startObserving:function t(e){this._links[0].observe(e)},isBroken:function t(){return this._isBroken},unwatch:function t(){var e=this._links.pop();while(e){e.unobserve();e.stopListen("hostPropertyValueChanged");e=this._links.pop()}this._setter=void 0;this._wannabe=void 0;this._wannabeProp=void 0}});o=t.extend("ChangeWatcher",{init:function t(e){this._chain=e},unbind:function t(){this._chain.unwatch()}});l={};l.bindProperty=function(t,e,i,n,s){return r(t,e,i,n,s)};l.bindSetter=function(t,e,i,n){return r(t,e,i,n)};function r(){var t,e,i,n,l,r,c,u;if(4===arguments.length){i=new a(arguments[0]);t=arguments[1];e=arguments[2];r=arguments[3]}else{i=new a(arguments[0],arguments[1]);t=arguments[2];e=arguments[3];r=arguments[4]}n=e.split(".");l=n[0];for(u=0;u<n.length;u++){c=new s(t,l);i.add(c);t=t&&"function"===typeof t[h(l)]?t[h(l)]():void 0;l=n[u+1]}i.startObserving(r);return new o(i)}function h(t){return"get"+t.substring(0,1).toUpperCase()+t.substring(1)}function c(t,e){var s=e.substring(0,1).toUpperCase()+e.substring(1),a,o;if("function"!==typeof t["set"+s])return;t[n]||(t[n]={});if(void 0===t[n][e]){a=t["set"+s];o=t.hasOwnProperty("set"+s);t["set"+s]=function n(o){var l="function"===typeof t["get"+s]?t["get"+s]():void 0;if("function"===typeof t["get"+s]&&o===l){a.call(t,o);return}a.call(t,o);t.fire(new i(e,l,o))};t[n][e]={observers:1,original:a,isOriginalOwn:o,keep:false}}else t[n][e].observers++}l.getter=h;return l}.apply(e,n),void 0!==s&&(t.exports=s))},1170:function(t,e,i){"use strict";var n,s;!(n=[i(11),i(92),i(511),i(246)],s=function(t,e,i){function n(t){return!!t.qIsAutoFormat&&["M","D","T","TS","IV"].indexOf(t.qNumFormat.qType)<0}var s=e.extend("ChartFormatting",{init:function e(i,n){this.localeInfo=i;var s=this.getFormattersForMeasures(n);var a=t.extend(true,[],s);if(a&&1===a.length&&n[0].isCustomFormatted)a=null;else{var o=0;for(var l=0;l<a.length;l++)if(n[l].isCustomFormatted){a[l]=null;o++}o===a.length&&(a=null)}this.measureFormatters=a;this.combinedMeasuresFormatter=this.getFormatterFromFormatters(s)},createFormatter:function t(){return new i(this.localeInfo)},getLocaleInfo:function t(){return this.localeInfo||{}},getFormatters:function t(){return this.measureFormatters||[]},getMeasureFormatter:function t(e){if(this.measureFormatters&&this.measureFormatters[e])return this.measureFormatters[e]},getCombinedMeasuresFormatter:function t(){return this.combinedMeasuresFormatter},formatMeasure:function t(e,i){var n=this.measureFormatters[i];if(n)return n.format(e);return e},getFormatterFromFormatters:function t(e){var n=0,s=0,a,o,l,r=0,h=e?e.filter(function(t){return!!t.values&&!Number.isNaN(+t.values.range)}):[],c,u;if(e&&e.length){e.forEach(function(t){"U"===t.type||t.values&&Number.isNaN(+t.values.range)?s++:["D","T","TS","IV"].contains(t.type)?n=1:r=1;t.prepare();return t});if(h.length){a=h.reduce(function(t,e){return Math.min(e.values.min,t)},h[0].values.min);o=h.reduce(function(t,e){return Math.max(e.values.max,t)},h[0].values.max);l=Math.abs(o-a)}if(n+r>1){u=e.filter(function(t){return"datetime"!==t.type})[0]||{};c=new i(this.localeInfo,u.pattern,u.thousandDelimiter,u.decimalDelimiter,"U");Number.isNaN(+l)||(c.pattern=c.createPatternFromRange(a,o,true))}else if(n+r===1&&0===s){u=e[0]||{};c=new i(this.localeInfo,u.pattern,u.thousandDelimiter,u.decimalDelimiter,u.type)}else{u=e.filter(function(t){return"U"!==t.type});u=u.length?u[0]:e[0]||{};c=new i(this.localeInfo,u.pattern,u.thousandDelimiter,u.decimalDelimiter,u.type);Number.isNaN(+l)||"U"!==u.type||(c.pattern=c.createPatternFromRange(a,o,true))}c.prepare()}c||(c=new i(this.localeInfo,"0"));return c},getFormattersForMeasures:function t(e,s){var a=[],o;if(e&&e.length){o=s?e.filter(function(t,e){return s.indexOf(e)>=0}):e;a=o.map(function(t){var e=n(t),s=new i(this.localeInfo,t.qNumFormat.qFmt,t.qNumFormat.qThou,t.qNumFormat.qDec,e?"U":t.qNumFormat.qType),a=Math.abs(t.qMax-t.qMin),o=Number.isNaN(+a);s.values={min:t.qMin,max:t.qMax,range:a};!o&&e&&(s.pattern=s.createPatternFromRange(t.qMin,t.qMax,true));s.prepare();return s},this)}return a}});return s}.apply(e,n),void 0!==s&&(t.exports=s))},1238:function(t,e,i){"use strict";var n,s;!(n=[i(11),i(48),i(180)],s=function(t,e,i){var n;n=i.extend({init:function i(n,s,a,o){this._super(n,s,a);var l=e.getService("$compile");this._innerContainer=t(o).appendTo(t(this.container));l(this._innerContainer)(t(this.container).scope().$new());this._innerScope=this._innerContainer.scope()},getInnerContainer:function t(){return this._innerContainer},setYMirrorMode:function t(e){this._super(e);this._innerScope.options.direction=this.readDirection},getInnerContainerScope:function t(){return this._innerScope},release:function t(){this._super();this._innerContainer.remove();this._innerContainer=null;this._innerScope.$destroy();this._innerScope=null}});return n}.apply(e,n),void 0!==s&&(t.exports=s))},1239:function(t,e,i){"use strict";var n,s;!(n=[i(454)],s=function(t){var e=t.extend({addShape:function t(e,i,n,s){this._super(e,i,n);if(void 0!==s){this._shapeMeasures||(this._shapeMeasures=[]);this._shapeMeasures.push(s)}},getMeasuresIndecies:function t(e){if(this._shapeMeasures&&void 0!==this._shapeMeasures[this._shapes.indexOf(e)]){var i=this._shapeMeasures[this._shapes.indexOf(e)];return void 0!==i?[i]:[]}return this._super()}});return e}.apply(e,n),void 0!==s&&(t.exports=s))},1303:function(t,e,i){"use strict";var n,s;function a(t){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return a(t)}!(n=[i(1495),i(104),i(118)],s=function(t,e,i){var n,s=0,o=1,l=3;function r(t){var e=this._cacheItems;return e&&t&&t.some(function(t){return e[t]&&e[t].selected})?1:this._globalAlpha}function h(t,e,i){var n,s,a=this.isHorizontal(),o=[],l=[],h=[],c=[],u=[],p=[],d=[];for(n=0;n<t.length;n+=1){s={center:this.getPositionOfValue(n,e),width:this.getWidthOfValue(n,e)};if(s.width>=2*this._discreteSpacing&&(s.center-this._discreteSpacing+s.width/2<0||s.center+this._discreteSpacing-s.width/2>i))continue;if(s.width<2*this._discreteSpacing&&(s.center<0||s.center>i))continue;c.push(s.width);a&&s.center+s.width/2>i?o.push(Math.min(i,i-(s.center-s.width/2))):a&&s.center-s.width/2<0?o.push(Math.min(i,s.width/2+s.center)):o.push(Math.min(i,s.width));if(s.width>this._discreteSpacing){var f=Math.max(1,Math.min(s.center,i-1));l.push(f);h.push(f-s.center)}else{l.push(s.center);h.push(0)}u.push(t[n].label);p.push(t[n].cacheIndex?t[n].cacheIndex:0);d.push(r.apply(this,[t[n].cacheIndex]))}return{labels:u,widths:o,positions:l,indecies:p,opacities:d,offsets:h,fullWidths:c}}function c(t,e,n,s,o,l){if(!t||!t.length)return[];var r=[],h,u,p,d,f,g;for(h=0;h<t.length;h++){u=t[h];p={};d="";f=null;if("object"===a(u)){d=u.label;f=u.children?c(u.children,e,n+1,p,o,l):null;p.cacheIndex="cacheIndex"in t[h]?t[h].cacheIndex:[];p.group=true===u.group;u.id&&(l[u.id]=p)}else d=u;p.label=d||"";p.parent=s;g=i.getCharacterRatios(p.label);f&&f.length&&(p.children=f);r.push(p);if(!e[n]){e[n]={data:[]};e[n].show=(!o||!o[n]||false!==o[n].show)&&!e[n].silo;e[n].qApprMaxGlyphCount=o&&o[n]&&o[n].qApprMaxGlyphCount||10;e[n].characterRatios={latin:0,cjk:0,longestCjk:{latin:0,cjk:0},longestLatin:{latin:0,cjk:0}};e[n].groupSize=o&&o[n]?o[n].groupSize:void 0}e[n].data.push(p);e[n].characterRatios.latin+=g.latin;e[n].characterRatios.cjk+=g.cjk;if(e[n].characterRatios.longestLatin.latin<g.latin){e[n].characterRatios.longestLatin.latin=g.latin;e[n].characterRatios.longestLatin.cjk=g.cjk}if(e[n].characterRatios.longestCjk.cjk<g.cjk){e[n].characterRatios.longestCjk.cjk=g.cjk;e[n].characterRatios.longestCjk.latin=g.latin}}return r}function u(t){var e=t.parent,i=[];while(e){e.collapseChildren||i.push(e);e=e.parent}return i}function p(t,e){var i=t[t.length-1].data;var n,s,a,o,l,r,h,c;i[0].distanceFrom=e/2;i[0].distanceTo=i[0].distanceFrom+1;n=u(i[0]);h=n.filter(function(t){return t.group})[0];for(o=1;o<i.length;o++){r=i[o-1].distanceTo;s=u(i[o]);c=s.filter(function(t){return t.group})[0];if(c!==h){for(l=0;l<s.length;l++)if(s[l]===n[l]&&(s[l]<0||s[l].group))break;r+=e*l;h=c;n=s}i[o].distanceFrom=r;i[o].distanceTo=i[o].distanceFrom+1}if(t.length>1)for(o=t.length-2;o>=0;o--){a=t[o].data;for(l=0;l<a.length;l++){a[l].distanceFrom=a[l].children[0].distanceFrom;a[l].distanceTo=a[l].children[a[l].children.length-1].distanceTo}}}function d(t,e,n,s){var a,o=e.getTextWidth("m",n),l=e.getAverageLetterWidth(n);if(s){a=e.getTextWidth("хов",n);var r=i.estimateLabelWidth(s.cjk*t,s.latin*t,a,o,l);var h=i.estimateLabelWidth(s.longestCjk.cjk,s.longestCjk.latin,a,o,l);var c=i.estimateLabelWidth(s.longestLatin.cjk,s.longestLatin.latin,a,o,l);return Math.max(r,h,c)}return i.estimateLabelWidth(0,t,0,o,l)}n=t.extend("DiscreteAxis",{init:function t(){this._super.apply(this,[].slice.call(arguments));this._unitsOffset=0;this._innerOffset=0;this._shrinkToFitThreshold=arguments[1]&&null!==arguments[1].shrinkToFitThreshold?arguments[1].shrinkToFitThreshold:.85;this._maxDiscreteUnitSize=null;this._minDiscreteUnitSize=null;this._alignmentOffset=0;this._unitAlignment="center";this._angle1=-40;this._angle2=-90},setYMirrorMode:function t(e){this._super(e);if(e){this._angle1=40;this._angle2=90}else{this._angle1=-40;this._angle2=-90}},updateSize:function t(){this._super();1===this._numDiscrete?this._discreteSpacing=Math.min(this._discreteSpacing,this._plotSize/this._numDiscrete):this._discreteSpacing-=(this._preliminarySize-this._plotSize)/(this._numUnitsInView||1);this._alignmentOffset=this._getAlignmentOffset(this._unitAlignment,this._plotSize);this.extendedRect=new e(this.rect.x-this._edgeBleed.left,this.rect.y-this._edgeBleed.top,this.rect.width+this._edgeBleed.left+this._edgeBleed.right,this.rect.height+this._edgeBleed.top+this._edgeBleed.bottom)},updateLevels:function t(){var e=this._oldLevels;this._levels.forEach(function(t,i){t.labelSpace=e[i].labelSpace;t.labelMode=e[i].labelMode;t.radians=e[i].radians;t.show=e[i].show})},setLabelLevelVisibility:function t(e){this._labelLevelVisibility=e;this._levels&&this._levels.forEach(function(t,i){t.show=false!==e[i]})},_getPerpendicularExtensionForTiltedLabels:function t(e,i,n,s){var a=this._angle1*Math.PI/180,o=Math.abs(Math.sin(a))*e.longestLabelWidth,l,r=0;o=Math.min(s,o);l=Math.abs(Math.cos(a))*o;l=Math.max(l-this._discreteSpacing/2,0);if("bottom"===this.dock){l=Math.max(l-this._alignmentOffset,0);l>i.x&&(r=l-i.x)}else if("top"===this.dock){l=Math.max(l-("center"===this._unitAlignment?this._alignmentOffset:this._getAlignmentOffset("far"===this._unitAlignment?"near":"far")),0);l>n.width-i.x-i.width&&(r=l-(n.width-n.x-i.x-i.width))}return r},_getLabelMode:function t(e,i,n){var a=e.qApprMaxGlyphCount,r;if(!this._showLabels||"none"===this._explicitLabelMode)return s;if(this._explicitLabelMode&&"auto"!==this._explicitLabelMode)return"none"===this._explicitLabelMode?s:"tilted"===this._explicitLabelMode?l:o;if(i&&this.isHorizontal()&&e.data&&e.data.length){r=d(a,this._renderer,this._style.label.font,e.characterRatios);e.groupSize&&(n*=e.groupSize);if(n<r)return l}return o},preRelevantSizeCalculation:function t(){this._super();var e,i=this._levels?this._levels.filter(function(t){return false!==t.show}):[],n=i.length,s=this.outerRect[this.isVertical()?"width":"height"]/4,a=0,o=0;if(this.isVisible()){for(e=0;e<n;e++){i[e].longestLabelWidth=d(i[e].qApprMaxGlyphCount,this._renderer,this._style.label.font,i[e].characterRatios);a+=i[e].longestLabelWidth}for(e=0;e<n;e++){i[e].labelSizeRatio=Math.min(1/n,i[e].longestLabelWidth/Math.min(a,s));o+=i[e].labelSizeRatio}o<1&&n>1?i[0].labelSizeRatio===1/n?i[0].labelSizeRatio+=1-o:i[1].labelSizeRatio===1/n&&(i[1].labelSizeRatio+=1-o):1===n&&(i[0].labelSizeRatio=1)}},calculatePreliminaryLabelSpace:function t(e,i){var n,a=this._hideMyLabels,r=this._levels?this._levels.filter(function(t){return false!==t.show&&!a}):[],h=r.length,c=this.outerRect[this._isVertical?"width":"height"]/4,u=this._fontHeight*this._style.label.lineHeight,p=0,d=0,f=0;this._preliminarySize=e[this._isVertical?"height":"width"];this._calculateDiscreteUnits(this._preliminarySize);if(this.isVisible())for(n=0;n<h;n++){r[n].labelMode=this._getLabelMode(r[n],n===r.length-1,this._discreteSpacing);var g=0;switch(r[n].labelMode){case o:var m=Math.min(r[n].labelSizeRatio*c,r[n].longestLabelWidth);r[n].labelSpace=this.isHorizontal()?u:Math.min(r[n].labelSizeRatio*c,r[n].longestLabelWidth);d=Math.max(0,m-r[n].labelSpace);break;case l:r[n].radians=this._angle1*Math.PI/180;g=this._getPerpendicularExtensionForTiltedLabels(r[n],e,i,c*r[n].labelSizeRatio);g>e.width/5&&(r[n].radians=this._angle2*Math.PI/180);r[n].labelSpace=Math.abs(Math.sin(r[n].radians))*r[n].longestLabelWidth+Math.abs(this._fontHeight*Math.sin(r[n].radians)*2);r[n].labelSpace=Math.min(d+r[n].labelSizeRatio*c+Math.abs(this._fontHeight*Math.sin(r[n].radians)/2),r[n].labelSpace);break;default:r[n].labelSpace=0}if(r[n].labelMode===l){p=Math.max(p,Math.min(e.width/3,Math.ceil(Math.cos(r[n].radians)*r[n].labelSpace)));p=Math.max(p-this._discreteSpacing/2,0);"bottom"===this.dock?p=Math.max(p-this._alignmentOffset,0):"top"===this.dock&&(p=Math.max(p-("center"===this._unitAlignment?this._alignmentOffset:this._getAlignmentOffset("far"===this._unitAlignment?"near":"far")),0));p=Math.ceil(p)}f+=r[n].labelSpace}if(p>0){"bottom"===this.dock&&p>e.x?this._preliminarySize=this._preliminarySize-(p-e.x):"top"===this.dock&&p>i.width-e.x-e.width&&(this._preliminarySize=this._preliminarySize-(p-(i.width-i.x-e.x-e.width)));this._calculateDiscreteUnits(this._preliminarySize)}this.fire("numDiscreteUnitsChanged");this.fire("numDiscreteUnitsInViewChanged");this._showLabels_internal=this._showLabels&&r&&r.some(function(t){return t.labelMode!==s});this._preliminaryRelevantSize={relevantLabelSize:f,relevantSpacing:p};return this._preliminaryRelevantSize},calculateLabelSpace:function t(){this.updateNow(["properties"]);return this._preliminaryRelevantSize},setDataRange:function t(e,i){var n,s,a,o;this._levels&&this._levels.length&&(this._oldLevels=this._levels.map(function(t){return{labelMode:t.labelMode,labelSpace:t.labelSpace,radians:t.radians,show:t.show,groupSize:t.groupSize}}));this._levels=[];this._labelIds={};c(e,this._levels,0,-1,i,this._labelIds);a=this._levels.length>1?1:0;if(this._levels&&this._levels.length){p(this._levels,a);for(var l=0;l<this._levels.length;l++)if(this._levels[l].characterRatios){o=this._levels[l].characterRatios.latin+this._levels[l].characterRatios.cjk||1;this._levels[l].characterRatios.latin=this._levels[l].characterRatios.latin/o;this._levels[l].characterRatios.cjk=this._levels[l].characterRatios.cjk/o}n=this._levels[this._levels.length-1].data;s=n[n.length-1].distanceTo+a/2;this._numDiscrete=n.length;this._numDiscrete=s||0;if(this._explicitNumDiscrete){this._numDiscrete=this._explicitNumDiscrete;this._numDiscrete=this._explicitNumDiscrete}}return this},setOffset:function t(e){if(this._unitsOffset===e)return;this._unitsOffset=e;this.invalidateProperties();this.invalidateDisplay("setOffset");this.fire("changed");return this},getOffset:function t(){return this._unitsOffset},setInnerOffset:function t(e){this._innerOffset=e},getInnerOffset:function t(){return this._innerOffset||0},getNumDiscreteUnits:function t(){return this._numDiscrete},setNumDiscreteUnits:function t(e){this._explicitNumDiscrete=e},getNumDiscreteUnitsInView:function t(){return this._numUnitsInView},setMaxDiscreteUnitSize:function t(e){this._maxDiscreteUnitSize=e},setMinDiscreteUnitSize:function t(e){this._minDiscreteUnitSize=e},setUnitAlignment:function t(e){this._unitAlignment=e},isDiscrete:function t(){return true},setLockedInfo:function t(e){this._lockedInfo=e},getLevels:function t(){var e=[],i,n;if(this._levels&&this._levels.length)for(n=0;n<this._levels.length;n++){if(!this._levels[n].show)continue;i=h.call(this,this._levels[n].data,n,this._plotSize);i.labelMode=this._levels[n].labelMode;i.labelSpace=this._levels[n].labelSpace;i.radians=this._levels[n].radians;e.push(i)}return e},calculateValuePositionMappingInfo:function t(){this._calculateDiscreteUnits(this._plotSize)},getDiscreteSpacing:function t(){return this._discreteSpacing},getPositionOfValue:function t(e,i){var n=this._levels.length-1,s,a;"undefined"!==typeof i&&(n=Math.min(this._levels.length-1,Math.max(0,i)));s=this._levels[n].data;a=s[e];var o=a.distanceFrom+.5*(a.distanceTo-a.distanceFrom)+this._innerOffset-this._unitsOffset;var l=o*this._discreteSpacing+this._alignmentOffset;return!this._isVertical&&this.yMirrorMode?this._plotSize-l:l},getWidthOfValue:function t(e,i){var n=this._levels.length-1,s;"undefined"!==typeof i&&(n=Math.min(this._levels.length-1,Math.max(0,i)));s=this._levels[n].data;return(s[e].distanceTo-s[e].distanceFrom)*this._discreteSpacing},getPositionOfId:function t(e){var i=this._labelIds[e]||this._labelIds[e.split(";").reverse().slice(-1).reverse().join(";")];if(!i)return 0;var n=i.distanceFrom+.5*(i.distanceTo-i.distanceFrom)+this._innerOffset-this._unitsOffset;var s=n*this._discreteSpacing+this._alignmentOffset;return!this._isVertical&&this.yMirrorMode?this._plotSize-s:s},getWidthOfId:function t(e){var i=this._labelIds[e]||this._labelIds[e.split(";").reverse().slice(-1).reverse().join(";")];if(!i)return 0;return(i.distanceTo-i.distanceFrom)*this._discreteSpacing},getValueOfPosition:function t(e){var i,n,s,a=this._levels[0].data,o=a.length,l;e=!this._isVertical&&this.yMirrorMode?this._plotSize-e:e;for(s=0;s<o;s+=1){l=a[s];i=(l.distanceFrom+this._innerOffset-this._unitsOffset)*this._discreteSpacing;n=i+(l.distanceTo-l.distanceFrom)*this._discreteSpacing;if(e>=i&&e<=n)return l.label}return""},_calculateDiscreteUnits:function t(e){this._discreteSpacing=Math.max(null!==this._minDiscreteUnitSize?this._minDiscreteUnitSize:0,e/this._numDiscrete);null!==this._maxDiscreteUnitSize&&(this._discreteSpacing=Math.min(this._maxDiscreteUnitSize,this._discreteSpacing));(1===this._numDiscrete||this._numDiscrete*this._discreteSpacing>e&&this._numDiscrete*this._discreteSpacing*this._shrinkToFitThreshold<e)&&(this._discreteSpacing=Math.min(this._discreteSpacing,e/this._numDiscrete));this._alignmentOffset=this._getAlignmentOffset(this._unitAlignment,e);this._numUnitsInView=Math.min(this._numDiscrete,Number((e/this._discreteSpacing).toFixed(5)))},_getAlignmentOffset:function t(e,i){var n=null!==this._maxDiscreteUnitSize&&this._discreteSpacing<i/this._numDiscrete?.5*(i-this._numDiscrete*this._discreteSpacing):0;return"near"===e?0:"far"===e?2*n:n}});return n}.apply(e,n),void 0!==s&&(t.exports=s))},1304:function(t,e,i){"use strict";var n,s;!(n=[i(92),i(1496)],s=function(t,e){var i=t.extend("LinearScale",{init:function t(){this.plotMin=null;this.plotMax=null;this.plotRange=null;this.tickMin=this.plotMin;this.tickMax=this.plotMax;this.mainValues=[];this.secondaryValues=[];this._plotSize=0;this._calculationSize=0},setSize:function t(e){this._plotSize=e},getPositionOfValue:function t(e){return(e-this.plotMin)/this.plotRange*this._plotSize},getValueOfPosition:function t(e){return this.plotMin+this.plotRange*e/this._plotSize},getNormalizedValue:function t(e){return(e-this.plotMin)/this.plotRange},calculateLimits:function t(){this._usedDataMin=Number.isNaN(+this._realDataMin)?this._dataMin:this._realDataMin;this._usedDataMax=Number.isNaN(+this._realDataMax)?this._dataMax:this._realDataMax;this.plotMin=null===this._explicitPlotMin||Number.isNaN(+this._explicitPlotMin)?this._usedDataMin:this._explicitPlotMin;this.plotMax=null===this._explicitPlotMax||Number.isNaN(+this._explicitPlotMax)?this._usedDataMax:this._explicitPlotMax;this.plotRange=this.plotMax-this.plotMin},calculateTicks:function t(){var i,n,s,a,o;s=Number.isNaN(+this._realDataMin)?this._dataMin:this._realDataMin;n=Number.isNaN(+this._realDataMax)?this._dataMax:this._realDataMax;i=e.calculateTicks(this._calculationSize,s,n,this._explicitPlotMin,this._explicitPlotMax,this._minTickSpacingInPixel,this._fontHeight,this._niceNumberEnabled,this._whiteSpaceOptimizingEnabled,.6,this._showExplicitMinMax,this._minTickDataSpacing);this._tickSpacing=i.tickSpacing;this.plotMin=i.plotMin;this.plotMax=i.plotMax;this.plotRange=this.plotMax-this.plotMin;this.tickMin=i.tickMinValue;this.tickMax=i.tickMaxValue;this.mainValues=i.mainTickValues;this.secondaryValues=i.secondaryTickValues;0===this.mainValues.length&&this.mainValues.push(i.minTickValue);0===this._tickSpacing&&(this._tickSpacing=1);if(this._showExplicitMinMax){o=this.mainValues[0];this.mainValues[0]=i.plotMin;o-i.plotMin>=i.tickSpacing/2&&this.mainValues.splice(1,0,o);a=i.mainTickValues[i.mainTickValues.length-1];i.plotMax-a<=i.tickSpacing/2?this.mainValues[i.mainTickValues.length-1]=i.plotMax:this.mainValues.push(i.plotMax)}},getValues:function t(){return{mainValues:this.mainValues,secondaryValues:this.secondaryValues}}});return i}.apply(e,n),void 0!==s&&(t.exports=s))},1305:function(t,e,i){"use strict";var n,s;function a(t){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return a(t)}!(n=[i(92),i(398)],s=function(t,e){var i,n=null,s=[],o=true,l=Math.PI,r=Math.cos;function h(){i.tick()&&(n=e.request(h))}function c(t){s.push(t);t._isRunning=true;null===n&&(n=e.request(h))}function u(t,e){for(var i in t){this._props[i]||(this._props[i]={});this._props[i][e]=Array.isArray(t[i])?t[i].slice():t[i]}}function p(){var t,e,i,n;for(t in this._props){n=this._props[t];e="from"in n?n.from:this._target[t];i=n.to;n.from=e;if(Array.isArray(e)){var s=e.map(function(t){return t.value});var a=i.map(function(t){return t.value});n.fresh=i.filter(function(t){return s.indexOf(t.value)<0});n.rotten=e.filter(function(t){return a.indexOf(t.value)<0});n.ripe=i.filter(function(t){return s.indexOf(t.value)>=0});n.combined=n.rotten.concat(n.ripe).concat(n.fresh);n.isArray=true}else Number.isNaN(+e)||Number.isNaN(+n.to)||(n.change=n.to-e)}}function d(t){var e;for(e in t)if(t[e].isArray){if(t[e].fresh.length||t[e].rotten.length)return true}else if(t[e].change)return true;return false}i=t.extend("Tween",{init:function t(e,n,s,o){var l,r,h,u={},f=true;this._target=e;this._enabled=true;for(l in n){r=Array.isArray(e[l])?e[l].slice():e[l];h=Array.isArray(n[l])?n[l].slice():n[l];u[l]={from:r,to:h}}this._props=u;p.call(this);if("object"===a(s)){this._duration=s.duration||200;this._easing="function"===typeof s.easing?s.easing:i.easing[s.easing||"linear"];f=false!==s.autoStart}else{this._duration=s||200;this._easing="function"===typeof o?o:i.easing[o||"linear"]}this._dfd=new g;this._pos=0;this._isRunning=false;if(!f)return;if(d(this._props)){this._startTime=Date.now();c(this)}else this._step(true)},from:function t(e){this._isRunning||u.call(this,e,"from");return this},to:function t(e){this._isRunning||u.call(this,e,"to");return this},start:function t(){if(!this._isRunning&&this._enabled&&o){p.call(this);d(this._props)?this._start():this._dfd.resolve()}return this},willStart:function t(){if(!this._isRunning&&this._enabled&&o){p.call(this);if(d(this._props))return true}return false},stop:function t(){if(this._isRunning){this._isRunning=false;s.splice(s.indexOf(this),1)}return this},end:function t(){this._isRunning&&this._step(true);return this},then:function t(){this._dfd.then.apply(this._dfd,[].slice.call(arguments));return this},progress:function t(){this._dfd.progress.apply(this._dfd,[].slice.call(arguments));return this},isRunning:function t(){return this._isRunning},on:function t(){this._enabled=true},off:function t(){this._enabled=false},destroy:function t(){this.stop();this._dfd.destroy()},_update:function t(){var e;for(e in this._props)this._target[e]=this._props[e].value},_step:function t(e){var i=Date.now()-this._startTime,n;if(i>=this._duration||e){this._pos=1;this._isRunning=false;n=s.indexOf(this);n>=0&&s.splice(n,1);f(this._props,this._pos,true);this._update();this._dfd.notify(i,i/this._duration,this._pos);this._dfd.resolve();return}this._pos=this._easing(i/this._duration);f(this._props,this._pos,false);this._update();this._dfd.notify(i,i/this._duration,this._pos)},_start:function t(){this._startTime=Date.now();c(this);this._step()}});function f(t,e,i){var n,s,a,o,l,r,h;for(s in t){a=t[s];o=a.to;l=a.from;if(a.isArray){r=a.fresh;h=a.rotten;a.value=i?a.to:a.combined;for(n=0;n<r.length;n++)r[n].opacity=e;for(n=0;n<h.length;n++)h[n].opacity=1-e;if(i){delete a.combined;delete a.fresh;delete a.rotten;delete a.ripe}}else a.value=!i&&"change"in a?l+a.change*e:o;i&&delete t[s].from}}i.off=function(){o=false};i.on=function(){o=true};i.tick=function(){var t,i,a=s.slice(),o=a.length;for(t=0;t<o;t++){i=a[t];i._step()}if(!s.length){e.cancel(n);n=null;return false}return true};i.clear=function(){};i.easing={linear:function t(e){return e},easeInOut:function t(e){return.5*(1-r(e*l))}};i.tweens=s;var g=function t(){this._onSuccess=[];this._onProgress=[];this._isResolved=false};g.prototype={then:function t(e){this._onSuccess.push(e);this._isResolved&&e.call(null,[].slice.apply(arguments))},progress:function t(e){this._onProgress.push(e)},resolve:function t(){this._isResolved=true;var e,i=this._onSuccess.length;for(e=0;e<i;e++)this._onSuccess[e].apply(null,[].slice.call(arguments))},notify:function t(){var e,i=this._onProgress.length;for(e=0;e<i;e++)this._onProgress[e].apply(null,[].slice.call(arguments))},destroy:function t(){this._onSuccess=[];this._onProgress=[]}};return i}.apply(e,n),void 0!==s&&(t.exports=s))},1306:function(t,e,i){"use strict";var n,s;!(n=[i(180),i(410),i(1739),i(1741),i(512),i(1169),i(109),i(89)],s=function(t,e,i,n,s,a,o,l){var r;function h(t){var e=[],i=[];t.qHyperCube.qMeasureInfo.forEach(function(t){t.series&&"bar"!==t.series.type&&1===t.series.axis?i.push(t):e.push(t)});return{primaryMeasures:e,secondaryMeasures:i}}function c(t,e){var i={},n;if(e)for(n in t)i[n]="qHyperCube"===n?{qDataPages:[],qDimensionInfo:t.qHyperCube.qDimensionInfo.slice(),qMeasureInfo:t.qHyperCube.qMeasureInfo.slice(),qStackedDataPages:[],qMode:"S",qSize:t.qHyperCube.qSize}:t[n];else{if(!t.reducedHyperCube)return t;i={};for(n in t)i[n]="qHyperCube"===n?t.reducedHyperCube:t[n]}return i}r=t.extend("MiniChart",{init:function t(e,i){this._super.apply(this,Array.prototype.slice.call(arguments));this.components={};this._changeWatchers=[];this.options=i;this._chartContext=new n;this._createComponents();var s=12303291;this._colorMap=void 0;this._constantColorMap={getColorByNode:function t(){return new o(s)},getColor:function t(){return new o(s)}};this.components.dataArea.setColorMap&&this.components.dataArea.setColorMap(this._constantColorMap);this.components.continuousAxis&&this.components.dataArea.setContinuousAxis(this.components.continuousAxis);this.components.dataArea.setLayoutMode(3);this._changeWatchers.push(a.bindProperty(this.components.dataArea,"dimensionTree",this._chartContext,"dimensionTree"));this._logScale=false},setYMirrorMode:function t(e){if(this.yMirrorMode===e)return;this.yMirrorMode=e;for(var i in this.components)this.components[i].setYMirrorMode(e)},setData:function t(e,i){this._reducedDataPromise=null;if(!e||!e.qHyperCube)return l.resolve();this.isDimensionContinuous=i;this.components.dataArea.setIsDimensionContinuous&&this.components.dataArea.setIsDimensionContinuous(i);if(i){this._data=e;return this.invalidateProperties("Mini-chart: setData")}this._data=null;var n,s,a=e.qHyperCube,o=this,r=Math.min(2e3,1e4/(a.qMeasureInfo.length+1)),h=-1,u=("linechart"===e.visualization||"barchart"===e.visualization&&e.barGrouping&&"stacked"===e.barGrouping.grouping)&&a.qDimensionInfo.length>1&&"K"===a.qMode?1:0;if("function"!==typeof this.backendApi.getReducedData){this._data=c(e);return this.invalidateProperties()}n=c(e,true);s=n.qHyperCube;this._reducedDataPromise=this.backendApi.getReducedData([{qTop:0,qLeft:u,qWidth:e.qHyperCube.qDimensionInfo.length+e.qHyperCube.qMeasureInfo.length+u,qHeight:r}],h).then(function(t){s.qDataPages=t;o._data=n;if(u&&t&&(t[0].isReduced||t[0].qIsReduced)){s.qDimensionInfo=a.qDimensionInfo.slice(0,1);s.qMeasureInfo=[a.qMeasureInfo[0],a.qMeasureInfo[0]]}return o.invalidateProperties()});return this._reducedDataPromise},calculateRelevantSize:function t(){this.relevantSize=Math.max(30,Math.min(40,this.outerRect[this.isVertical()?"width":"height"]/8))},setRect:function t(e,i,n,s){this.rect.width===n&&this.rect.height===s||this.invalidateDisplay();this._super(e,i,n,s);for(var a in this.components)this.components[a].setRect(0,0,n,s);this.updateSize()},setOuterRect:function t(e,i,n,s){this._super(e,i,n,s);for(var a in this.components)this.components[a].setOuterRect(e,i,n,s)},setLayoutToContainerRatios:function t(e,i){this._super(e,i);for(var n in this.components)this.components[n].setLayoutToContainerRatios(e,i)},setContainerRect:function t(e,i,n,s){this._super(e,i,n,s);for(var a in this.components)this.components[a].setContainerRect(e,i,n,s)},updateSize:function t(){this._super();for(var e in this.components)this.components[e].updateSize()},isVisible:function t(e){return this._super(e)&&this.rect&&this.rect.width>0&&this.rect.height>0},setLogScale:function t(e){this._logScale=e;true!==this._logScale&&(this._logScale=false)},getLogScale:function t(){return this._logScale},setHasValidData:function t(e){this._super(e);Object.keys(this.components).forEach(function(t){this.components[t].setHasValidData(e)},this)},setDock:function t(e){this._super(e);if(this.isVertical()){this.components.measureAxis.setDock("top");this.components.dimensionAxis.setDock("left")}else{this.components.measureAxis.setDock("left");this.components.dimensionAxis.setDock("bottom")}},paint:function t(e,i){if(!i||!this.isVisible())return l.resolve();this._super(e,i);var n,s=[];this.components.dataArea.rect=this.rect.clone();this.components.dimensionAxis.rect=this.components.dataArea.rect;this.components.measureAxis.rect=this.components.dataArea.rect;this.components.dataArea.rect.x=0;this.components.dataArea.rect.y=0;this.components.dimensionAxis.invalidateProperties("MiniChart.paint");this.components.dimensionAxis.updateNow(["properties"]);this.components.measureAxis.invalidateProperties("MiniChart.paint");this.components.measureAxis.updateNow(["properties"]);this.components.dimensionAxis.calculateValuePositionMappingInfo();this.components.measureAxis.calculateValuePositionMappingInfo();for(n in this.components)s.push(this.components[n].invalidateDisplay("MiniChart.paint"));return l.all(s)},_createComponents:function t(){var n=this.components,s=this.options;Object.keys(s.components).forEach(function(t){var a=[this.testId||"component",t].join("."),o=s.components[t],l;o.label=t;if("function"===typeof s.components[t].clazz)l=s.components[t].clazz;else switch(t){case"dataArea":l=i;break;case"yAxis":case"measureAxis":l=e;break}l&&(n[t]=new l(this.container,o,a));n[t].setUseTransition&&n[t].setUseTransition(false)},this)},setActiveDimensionAxis:function t(e){if(this.components[e]){this._activeDimAxis=this.components[e];this.components.dataArea&&this.components.dataArea.setActiveDimensionAxis(this.components[e])}},updateAxis:function t(e){var i,n,s,a,o,l,r,c,u,p;if("combochart"===e.visualization){r=e.qHyperCube.qMeasureInfo.filter(function(t){return!t.series||"bar"===t.series.type});c=h(e);u=c.primaryMeasures;p=c.secondaryMeasures;o=Math.min.apply(this,p.filter(function(t){return!Number.isNaN(+t.qMin)}).map(function(t){return t.qMin}));l=Math.max.apply(this,p.filter(function(t){return!Number.isNaN(+t.qMax)}).map(function(t){return t.qMax}));this.components.secondaryMeasureAxis.setDataRange(o,l);o=Math.min.apply(this,u.filter(function(t){return!Number.isNaN(+t.qMin)}).map(function(t){return t.qMin}));l=Math.max.apply(this,u.filter(function(t){return!Number.isNaN(+t.qMax)}).map(function(t){return t.qMax}))}else{o=Math.min.apply(this,e.qHyperCube.qMeasureInfo.filter(function(t){return!Number.isNaN(+t.qMin)}).map(function(t){return t.qMin}));l=Math.max.apply(this,e.qHyperCube.qMeasureInfo.filter(function(t){return!Number.isNaN(+t.qMax)}).map(function(t){return t.qMax}))}i=this.components.measureAxis;n=this.components.dimensionAxis;i.setNiceNumberEnabled(false);i.setLogScale(this._logScale);if("barchart"===e.visualization){l=Math.max(0,l);o=Math.min(0,o)}a=this.components.dataArea.getMinorAxisData();if(a){"combochart"===e.visualization&&u.forEach(function(t){if(r.indexOf(t)<0&&!Number.isNaN(+t.qMin)){a.min=Math.min(t.qMin,a.min);a.max=Math.max(t.qMax,a.max)}});l=a.max;o=a.min}if(o===l&&0===l||Number.isNaN(+o)&&Number.isNaN(+l)){l=10;o=-10;i.setDataRange(o,l)}else(a||this.isDimensionContinuous)&&i.setDataRange(o,l);if(this.isDimensionContinuous){if(e.qHyperCube.qDimensionInfo){o=e.qHyperCube.qDimensionInfo[0].qMin;l=e.qHyperCube.qDimensionInfo[0].qMax;this._activeDimAxis.setDataRange(o,l);this._activeDimAxis.setPlotMin(o);this._activeDimAxis.setPlotMax(l)}}else{s=this.components.dataArea.getMajorAxisData();s?n.setDataRange(s.data,s.info):n.setDataRange([],[])}},setBackendApi:function t(e){this.backendApi=e},setColorMap:function t(e){this._colorMap=e},getColorMap:function t(){return this._colorMap},getReducedDataHypercube:function t(){var e=this;return this._reducedDataPromise?this._reducedDataPromise.then(function(){return e._data.qHyperCube}):l.resolve()},setSnapshotChartData:function t(e){this._snapshotChartData=e},setOrientation:function t(e){this._orientation=e||"horizontal"},_updateProperties:function t(){if(!this._data)return;var e=this._data;var i=this;function n(){i._chartContext.refresh(e);i._miniColorMap&&i._miniColorMap.setDimensionTree(i._chartContext.getDimensionTree());i.components.dataArea.setData(e);i.components.dataArea.updateNow(["properties"]);i.updateAxis(e);return i._updateDisplay()}if(e&&e.qHyperCube&&e.qHyperCube.qDimensionInfo[0]){var a=e.qHyperCube.qDataPages[0]&&e.qHyperCube.qDataPages[0].qIsReduced;if(this.components.dataArea.setColorMap){if(this.isDimensionContinuous||!a&&(e.color.auto||"byExpression"!==e.color.mode)){this._miniColorMap||(this._miniColorMap=new s(null,this.backendApi.model.app));this._colorMap&&(e.color.persistent=!!this._colorMap.getColorDataInfo().persistentColors);this.components.dataArea.setColorMap(this._miniColorMap);this._miniColorMap.setSnapshotChartData(this._snapshotChartData);return this._miniColorMap.setData(e).then(n)}this.components.dataArea.setColorMap(this._constantColorMap)}}return n()},clear:function t(){Object.keys(this.components).forEach(function(t){this.components[t].clear()},this)},release:function t(){this._super();Object.keys(this.components).forEach(function(t){this.components[t].release()},this);this._miniColorMap&&this._miniColorMap.release();while(this._changeWatchers.length)this._changeWatchers.pop().unbind();this._chartContext.release()},showComponent:function t(){this._super.apply(this);if(this.components.dataArea&&this.components.dataArea.renderers)for(var e in this.components.dataArea.renderers)this.components.dataArea.renderers[e].show()},hideComponent:function t(){this._super.apply(this);if(this.components.dataArea&&this.components.dataArea.renderers)for(var e in this.components.dataArea.renderers)this.components.dataArea.renderers[e].hide()}});Object.defineProperty(r.prototype,"className",{value:"MiniChart"});return r}.apply(e,n),void 0!==s&&(t.exports=s))},1495:function(t,e,i){"use strict";var n,s;!(n=[i(11),i(180),i(486),i(203),i(200),i(104),i(401),i(100)],s=function(t,e,i,n,s,a,o,l){var r,h=0,c=1,u=3,p=1;function d(){var t,e=this;t=this.getLevels()||[];if(!t.length&&!this._showTitle_internal){this._renderer.clear();return}this._cacheItems&&this._cacheItems.length&&(this._cacheItems[0].objectShapes?this._cacheItems.forEach(function(t){t.objectShapes[e.selectionIdentifier]=null}):this._cacheItems.forEach(function(t){t.clearShapes(e.selectionIdentifier)}));this.isRadial()?i.renderRadial(t,this,this._windowSizeMultiplier):this.isVertical()?v.apply(this,[t]):S.apply(this,[t,this.indicators])}function f(t,e,i,n){var a=t.labels,l=t.positions,r=Math.abs(this._fontHeight*Math.sin(i)),h=t.labelSpace,c=Math.abs(h/Math.sin(i)),u=Math.cos(i),p,d,f,g,m,M,_,v,x=this.yMirrorMode?-Math.PI/2:Math.PI/2,b=(new s).skew(x-i,0).scale(this._discreteSpacing*(this._groupSize||1)/this._fontHeight,1).translate(0,-n*this._fontHeight/2).rotate(-x),S=[],k,w,I=i<0?"right":"left";w="middle";"near"===this.getAlignment()&&"center"!==I&&(I="left"===I?"right":"left");for(k=0;k<a.length;k++){p=l[k];if(p<0||p>this.rect.width)continue;_=new s;_.translate(l[k],e+n*r/2);_.rotate(i);M="right"===I?Math.min((p+this._edgeBleed.left)/u,c):Math.min((this.rect.width-p+this._edgeBleed.right)/u,c);M-=2*r;S.push({type:"text",fill:this._style.label.color,opacity:t.opacities[k],transform:_.elements,shape:{text:a[k]||"",font:this._style.label.font,maxWidth:M,align:I,baseline:w}});if(y(this._cacheItems,this.isDiscrete(),t.indecies,k)){d="left"===I?0:-Math.abs(h);f=this._fontHeight/2;g=[{x:d,y:-f},{x:d+h,y:-f},{x:d+h,y:f},{x:d,y:f}];v=new s;v.translate(l[k]-t.offsets[k],e+n*r/2);v.multiply(b);m=new o(v.transformPoints(g));D(this._cacheItems,t.indecies[k],this.selectionIdentifier,m)}}return S}function g(t,e){t<e/2?t+=e/2-t:e/2>this._plotSize-t+this._padding.left&&(t-=e/2-(this._plotSize-t+this._padding.left));return t}function m(t,e,i){var s=20;var o="near"===this.getAlignment()?"bottom":"top",l=t.align||"center",r,h,u,p,d,f,m,_,v=t.labels,x=t.positions,b=t.opacities,S=t.labelMode,k=this._style,w=t.widths,I=[];for(r=0;r<v.length;r++){_=w[r];if(t.labelsBetweenTicks){if(this.yMirrorMode&&(x[r+1]>this.rect.width||x[r]<0))continue;if(!this.yMirrorMode&&(x[r+1]<0||x[r]>this.rect.width))continue;f=Math.min(this.rect.width,Math.max(0,x[r]));m=Math.min(this.rect.width,Math.max(0,x[r+1]||(this.yMirrorMode?Number.MIN_VALUE:Number.MAX_VALUE)));h=f+("left"===l?this._labelPadding:-this._labelPadding);_=Math.min(_,Math.abs(f-m)-this._labelPadding);if(_<this._labelPadding+s)continue}else{h=x[r];if(h<-.5||h>this.rect.width+.5)continue}if(this.isDiscrete()&&S===c&&(0===r||r===v.length-1)){u=n.measureTextObject({type:"text",shape:{text:v[r]||"",x:h,y:e,maxWidth:w[r]-this._labelPadding,font:this._style.label.font,align:l,baseline:o}}).width;0===r&&h<u/2?h+=u/2-h:r===v.length-1&&u/2>this._plotSize-h&&(h-=u/2-(this._plotSize-h))}d=e+(S===c?0:1.5*this._fontHeight*(r%2)*i);if(y(this._cacheItems,this.isDiscrete(),t.indecies,r)){p=new a(x[r]-t.offsets[r]-t.fullWidths[r]/2,d-("bottom"===o?this._fontHeight*k.label.lineHeight:0),t.fullWidths[r],this._fontHeight*k.label.lineHeight);D(this._cacheItems,t.indecies[r],this.selectionIdentifier,p)}I.push({type:"text",fill:this._style.label.color,opacity:b?b[r]:1,_index:r,shape:{text:v[r]||"",x:h,y:d,maxWidth:_-this._labelPadding,font:this._style.label.font,align:l,baseline:o}})}var N=t.labelsBetweenTicks&&v.length>=2&&(this.yMirrorMode?-.5===x[v.length-1]:this.rect.width-x[v.length-1]===.5);N&&M.call(this,{objectsToRender:I,positions:x,values:v,opacities:b,widths:w,align:l,baseline:o,y:e});if(!this.isDiscrete()&&I.length>0&&!t.labelsBetweenTicks){var C=I[0];u=n.measureTextObject(C).width;C.shape.x=g.apply(this,[C.shape.x,u]);C=I[I.length-1];u=n.measureTextObject(C).width;C.shape.x=g.apply(this,[C.shape.x,u])}return I}function M(t){if(0===t.objectsToRender.length)return;var e=t.objectsToRender;var i=t.positions;var s=t.values;var a=t.opacities;var o=t.widths;var l=t.align;var r=t.baseline;var h=t.y;var c=Math.min(this.rect.width,Math.max(0,i[s.length-1]));var u=c+("left"===l?-this._labelPadding:this._labelPadding);var p=n.measureTextObject(e[e.length-1]).width;var d={text:s[s.length-1],font:this._style.label.font,baseline:r};var f=n.measureDisplayTextObject(d).width;if(p+f+3*this._labelPadding>o[s.length-2]){if(!(s.length>2))return;e.length=e.length-1}e.push({type:"text",fill:this._style.label.color,opacity:a?a[s.length-1]:1,_index:s.length-1,shape:{text:s[s.length-1]||"",x:u,y:h,maxWidth:o[s.length-2]-this._labelPadding,font:this._style.label.font,align:"left"===l?"right":"left",baseline:r}})}function _(t,e,i){var n=t.labels,s=t.positions,o=t.opacities,l=t.labelSpace,r,h=[],c=this._style,u,p,d,f;r=this._renderer.getFontHeight(c.label.font);d=s.length>1?Math.abs(s[0]-s[1]):this.rect.height;this.isDiscrete()||(d=0);for(p=0;p<n.length;p++){u=s[p];u=Math.max(r/2,Math.min(this._padding.top+this._plotSize-r/2,u));if(u-.5<0||u+.5>this.rect.height)continue;if(y(this._cacheItems,this.isDiscrete(),t.indecies,p)){f=new a(e-("right"===i?l:0),s[p]-t.fullWidths[p]/2-t.offsets[p],l,t.fullWidths[p]);D(this._cacheItems,t.indecies[p],this.selectionIdentifier,f)}h.push({type:"text",fill:c.label.color,opacity:o?o[p]:1,shape:{text:n[p],x:e,y:u-d/2,maxWidth:l,height:d,maxNumLines:1,font:c.label.font,align:i,baseline:"middle"}})}return h}function v(t){var e=t[0]?t[0].positions:[],i=t[0]?t[0].opacities:[],n=this._style,a=this.isDiscrete()?0:n.ticks.major.length,o=1,l,r,c=new s,u,p="far"===this.getAlignment()?"left":"right",d=[],f;u="left"===p?1:-1;a*=u;l=u>0?0:this.rect.width;r=0;l+=u*o/2;r+=this._padding.top;this._showLine_internal&&d.push({stroke:n.line.color,shape:{x1:l,x2:l,y1:r-1,y2:r+this._plotSize},type:"line"});if(!this.isDiscrete()&&this._showLabels_internal){if(this._showLabels_internal)for(f=0;f<e.length;f++)e[f]>=0&&e[f]<=this.rect.height&&d.push({stroke:n.ticks.major.color,opacity:i[f],shape:{x1:l,x2:l+a,y1:e[f],y2:e[f]},type:"line"});l+=n.ticks.major.length*u}if(this._showLabels_internal){l+=n.label.margin*u;t.reverse();for(f=0;f<t.length;f++){if(t[f].labelMode===h)continue;d=d.concat(_.apply(this,[t[f],l,p]));l+=t[f].labelSpace*u}t.reverse()}if(this._showTitle_internal){c=new s;c.translate((u>0?l:0)+(u>0?this.rect.width-l:l)/2,this._padding.top+this._plotSize/2);c.rotate(.5*Math.PI*("right"===p?-1:1));d.push({type:"text",fill:n.title.color,transform:c.elements,shape:{text:this._title||"",maxWidth:this._plotSize,font:n.title.font,align:"center",baseline:"middle"}})}this._renderer.shapes=d;this._renderer.render()}function x(t,e,i,n,s){if(!e)return;for(var a=0;a<e.positions.length;a++)e.positions[a]>=0&&e.positions[a]<=this.rect.width&&t.push({stroke:s,opacity:e.opacities[a],shape:{x1:e.positions[a],x2:e.positions[a],y1:i,y2:i+n},type:"line"})}function b(t,e){var i=this._padding.left||0;t.push({stroke:this._style.line.color,shape:{x1:i-1,x2:i+this._plotSize,y1:e,y2:e},type:"line"})}function S(t,e){var i=!!t[0]&&t[0].labelsBetweenTicks,n=this._style.ticks.major.length,s,a,o="far"===this.getAlignment()?1:-1,l=[],r,c,d;n*=o;s=this._padding.left||0;a="near"===this.getAlignment()?this.rect.height-1:this.isDiscrete()&&this.isHorizontal()?-1:0;a+=p/2*o;b.call(this,l,a);if(!this.isDiscrete()){a+=p*o/2;if(!i){x.call(this,l,t[0],a,n,this._style.ticks.major.color);a+=n}}if(this._showLabels_internal){x.call(this,l,e,a,3,this._style.ticks.major.color);a+=this._style.label.margin*o;for(r=0;r<t.length;r++){if(t[r].labelMode===h)continue;if(i){n=t[0].labelSpace*o*(r+(t[r].outOfSyncWithLevelBelow?0:1));c=a-this._style.label.margin*o-(t[r].outOfSyncWithLevelBelow?0:t[0].labelSpace*o*r);d=t.length>1&&r<t.length-1?this._style.ticks.minor.color:this._style.ticks.major.color;x.call(this,l,t[r],c,n,d)}l=t[r].labelMode===u?l.concat(f.apply(this,[t[r],a,t[r].radians,o])):l.concat(m.apply(this,[t[r],a,o]));t[r].labelSpace&&(a+=t[r].labelSpace*o)}}this._showTitle_internal&&l.push({type:"text",fill:this._style.title.color,shape:{x:s,y:o>0?a:0,width:this._plotSize,height:o>0?this.rect.height-a:a,text:this._title||"",font:this._style.title.font,align:"center",baseline:"middle"}});this._renderer.shapes=l;this._renderer.render()}function y(t,e,i,n){return e&&t&&i&&t[i[n][0]]}function D(t,e,i,n){Array.isArray(e)?e.forEach(function(e){t[e].addShape(i,n)}):t[e].addShape(i,n)}r=e.extend("Axis",{init:function e(i,s,o){this._super.apply(this,[i,t.extend(true,{},{components:{title:{show:true,showFlag:s.showFlag},labels:{show:false,showFlag:s.showFlag}}},s),o]);this._fontHeight=20;this._titleShowFlag=s.titleShowFlag||null;this._showLabels=true;this._showLabels_internal=true;this._showLine=true;this._showLine_internal=true;this._showTitle=false;this._dataIndex=0;this._radial=false;this._relevantAngle=0;this._labelPadding=4;this._cacheItems=null;this._styleService=l.initializeService("object."+s.parentType);this._style=this._getStyleObject(this._styleService);this._padding={top:0,bottom:0,left:0,right:0};this._renderer=new n(this.container);this._$renderAreaWrap&&this._$renderAreaWrap.addClass("qv-chart-component-axis");this.innerRect=new a(0,0,0,0);this.renderers={axis:this._renderer};this.isDimension=s.isDimension},getLevels:function t(){return[]},setSelectableShapes:function t(e){this._cacheItems=e},setSelectedRanges:function t(){},calculateValuePositionMappingInfo:function t(){},_calculatePlotSize:function t(e){var i=0,n,s;if(this.isRadial()){n=Math.min(e.height,e.width);s=.4*n;this._relevantAngle=Math.abs(this._radialOptions.end-this._radialOptions.start);i=Math.tan(-this._relevantAngle/4+Math.PI/2)*n*.02;this._radius=s+i;this._centerPoint={x:e.width/2,y:e.height/2+4*i}}else n=this.isVertical()?e.height-this._padding.top-this._padding.bottom:e.width-this._padding.left-this._padding.right;0===this._plotSize&&0!==n,this._plotSize=n},_calculateEdgeBleedAndPlotSize:function t(e){this._edgeBleed={top:(this.isVertical(),1),bottom:this.isVertical()?1:0,left:this.isVertical()?1:Math.max(e.x,1),right:this.isVertical()?0:Math.max(0,this.outerRect.width-e.width-e.x)};this._calculatePlotSize(e)},preRelevantSizeCalculation:function t(){this._isSizing=true;this.updateNow(["properties"]);this._isVertical=this.isVertical();this._style=this._getStyleObject(this._styleService,this._layoutMode,this.isDiscrete());this._fontHeight=Math.ceil(this._renderer.getFontHeight(this._style.label.font));var i=this._isVertical;this._showTitle_internal=e.prototype.isVisible.call({show:this._showTitle&&!!this._title,_verticalLayoutMode:this._verticalLayoutMode,_horizontalLayoutMode:this._horizontalLayoutMode,isVertical:function t(){return i},showFlag:null!==this._titleShowFlag?this._titleShowFlag:this.showFlag<<1},this._layoutMode);if(this._showTitle_internal){this._titleFontHeight=this._renderer.getFontHeight(this._style.title.font);this.relevantSize+=this._titleFontHeight*this._style.title.lineHeight}},calculatePreliminaryRelevantSize:function t(e,i){var n=0,s=0,a=e[this.isVertical()?"height":"width"],o;this._isSizing=true;this.relevantSize=0;this.preliminaryRelevantSize=0;this._preliminaryStatics=0;if(a<=0)return;o=this.calculatePreliminaryLabelSpace(e,i);n=o.relevantLabelSize||0;s=o.relevantSpacing||0;this.isDiscrete()?this._preliminaryStatics+=p:this._preliminaryStatics+=this._style.ticks.major.length;if(n){this.preliminaryRelevantSize+=n;this.preliminaryRelevantSize+=this._style.label.margin}this._showTitle_internal&&(this._preliminaryStatics+=this._titleFontHeight*this._style.title.lineHeight);this.preliminaryRelevantSize+=this._preliminaryStatics;this.preliminaryRelevantSize=Math.ceil(this.preliminaryRelevantSize);this.perpendicularlyRelevantSpacing={top:0,left:this.yMirrorMode&&"near"===this.getAlignment()||!this.yMirrorMode&&"far"===this.getAlignment()?s:0,right:this.yMirrorMode&&"far"===this.getAlignment()||!this.yMirrorMode&&"near"===this.getAlignment()?s:0,bottom:0};this.relevantSize=this.preliminaryRelevantSize},calculateRelevantSize:function t(e,i,n){this._isSizing=true;this._isVertical=this.isVertical();this.relevantSize=0;var s=n||e,a=0,o=0;this.rect.set(s.x,s.y,s.width,s.height);this._calculationSize=s[this.isVertical()?"height":"width"];this.isVertical()?this._calculationSize-=this._padding.top+this._padding.bottom:this._calculationSize-=this._padding.left+this._padding.right;this._plotSize=this._calculationSize;if(0===s.width)return;var l=this.calculateLabelSpace(e,i,n);a=l.relevantLabelSize||0;o=l.relevantSpacing||0;if(a){this.relevantSize+=a;this.relevantSize+=this._style.label.margin}this.relevantSize+=this._preliminaryStatics;this.relevantSize=Math.ceil(this.relevantSize);this.perpendicularlyRelevantSpacing={top:0,left:this.yMirrorMode&&"near"===this.getAlignment()||!this.yMirrorMode&&"far"===this.getAlignment()?o:0,right:this.yMirrorMode&&"far"===this.getAlignment()||!this.yMirrorMode&&"near"===this.getAlignment()?o:0,bottom:0};this._isSizing=false;return this},insertAdjacentTo:function t(e,i){this._super(e,i);if(!this.isDiscrete())switch(this.dock){case"top":this.rect.y+=1;break;case"bottom":this.rect.y-=1;break}},_getStyleObject:function t(e,i,n){var s=e.layoutMap[i]||"medium",a=n?".discrete":"",o={backgroundColor:e.getStyle("","backgroundColor"),label:{lineHeight:1.4,color:e.getStyle("axis.label.name","color"),margin:4,offset:1,font:"normal "+e.scaleFontSize(e.getStyle("axis.label.name","fontSize"),i,a)+" 'QlikView Sans'"},ticks:{major:{color:e.getStyle("axis.line.major","color"),length:8},minor:{color:e.getStyle("axis.line.minor","color"),length:8}},line:{color:e.getStyle("axis.line.major","color")},title:{lineHeight:1.4,font:"normal "+e.scaleFontSize(e.getStyle("axis.title","fontSize"),"full"===s?i:"medium",a)+" 'QlikView Sans'",color:e.getStyle("axis.title","color")}};return o},isVisible:function t(){return this._super.apply(this,[].slice.call(arguments))&&this._showSubcomponents},setShowLabels:function t(e){this._showLabels_internal=e;this._showLabels=e},getShowLabels:function t(){return this._showLabels},getSpacingMode:function t(){return},setShowLine:function t(e){this._showLine_internal=e;this._showLine=e},getShowLine:function t(){return this._showLine},setShowStrategy:function t(e){this._showSubcomponents="none"!==e;this._showTitle=["all","title"].contains(e);this._showTitle_internal=this._showTitle;this.components.title.show=this._showSubcomponents&&["all","title"].contains(e);this._showLabels=["all","labels"].contains(e);this._showLabels_internal=this._showLabels;this.components.labels.show=this._showSubcomponents&&["all","labels"].contains(e)},getShowStrategy:function t(){return this._showSubcomponents},setTitle:function t(e){this._title=e},setLabelMode:function t(e){this._explicitLabelMode=e},setLabels:function t(e){this._explicitLabels=e},setCurrentDataIndices:function t(e){this._currentDataIndices=Array.isArray(e)?e:[e]},setDataIndices:function t(e){this._dataIndices=Array.isArray(e)?e:[e]},setDataRange:function t(){},setOffset:function t(){},setInnerOffset:function t(){},getInnerOffset:function t(){},getNumDiscreteUnits:function t(){},setNumDiscreteUnits:function t(){},getNumDiscreteUnitsInView:function t(){},setMaxDiscreteUnitSize:function t(){},setMinDiscreteUnitSize:function t(){},setUnitAlignment:function t(){},_updateProperties:function t(){var e=this.getType().indices;this._formatter=1===e.length&&this.measureFormatters.length?this.measureFormatters[e[0]]:this.combinedMeasuresFormatter||this._defaultFormatter;this.container.setAttribute("data-type",this.isDiscrete()?"discrete":"continuous");return this},updateSize:function t(){this._super();this._calculateEdgeBleedAndPlotSize(this.rect);this._renderer.edgeBleed=this._edgeBleed;this.innerRect=new a(this.rect.x+this._padding.left,this.rect.y+this._padding.top,this.rect.width-this._padding.left-this._padding.right,this.rect.height-this._padding.top-this._padding.bottom);this._isVertical=this.isVertical()},paint:function t(){d.apply(this,[]);this.fire("rendered");return this},isDiscrete:function t(){return false},getPositionOfValue:function t(){},getAngleOfValue:function t(){},getValueOfPosition:function t(){},getType:function t(){return{type:this.isDimension||this.isDiscrete()?"dimension":"measure",indices:this._dataIndices||[0],current:this._currentDataIndices||[0]}},setPadding:function t(e,i,n,s){this._padding={top:e>0?e:0,right:i>0?i:0,bottom:n>0?n:0,left:s>0?s:0}},getPadding:function t(){return this._padding},isVertical:function t(){var e=this.options.dock;switch(e){case"left":case"right":return true;case"center":return"vertical"===this._orientation;default:return false}},setOrientation:function t(e){this._orientation=e},setAlignment:function t(e){this._align=e},getAlignment:function t(){var e=this.options.dock;switch(e){case"left":case"top":return"near";case"center":return this._align;default:return"far"}},setRadial:function t(e,i){this._radial=e;this._radialOptions=i},isRadial:function t(){return this._radial}});return r}.apply(e,n),void 0!==s&&(t.exports=s))},1496:function(t,e,i){"use strict";var n,s;!(n=[],s=function(){var t,e=Math.log(10),i=1e-12;function n(){var e,i,n,s;e=0===this.explicitPlotMax?1:t.getMagnitude(this.explicitPlotMax);i=this.explicitPlotMax;n=this.maxNumIntervals<2?i-e:i-2*e;n=Math.ceil(n/e)*e;s=i-n;this.tickDataSpacing=Math.max(s/this.maxNumIntervals,this.minTickDataSpacing);this.tickDataSpacingNN=Math.max(e/10,t.getNiceNumber(this.tickDataSpacing));this.plotMax=i;this.plotMin=n;this.plotRange=s;this.maxNumIntervals<1&&(this.tickBaseValue=this.plotMin)}function s(){var e,i,n,s;e=0===this.explicitPlotMin?1:t.getMagnitude(this.explicitPlotMin);n=this.explicitPlotMin;i=this.maxNumIntervals<2?n+e:n+2*e;i=Math.floor(i/e)*e;s=i-n;this.tickDataSpacing=Math.max(s/this.maxNumIntervals,this.minTickDataSpacing);this.tickDataSpacingNN=Math.max(e/10,t.getNiceNumber(this.tickDataSpacing));this.plotMax=i;this.plotMin=n;this.plotRange=s;this.maxNumIntervals<1&&(this.tickBaseValue=this.plotMax-this.tickDataSpacingNN)}function a(){null!==this.explicitPlotMax&&this.explicitPlotMax<this.usedDataMin?n.call(this):null!==this.explicitPlotMin&&this.explicitPlotMin>this.usedDataMax&&s.call(this)}function o(){this.tickBaseValue=this.usedDataMin;this.plotMin=this.usedDataMin;this.plotMax=this.usedDataMin;this.plotRange=0;this.tickDataSpacingNN=0===this.usedDataMin?1:Math.abs(this.usedDataMin);this.tickDataSpacing=this.tickDataSpacingNN;this.tickMinIndex=0;this.tickMaxIndex=0}function l(){if(0===this.usedDataMax){if(this.maxNumIntervals<2){this.plotMin=0;this.plotMax=1}else{this.plotMin=-1;this.plotMax=1}this.plotRange=this.plotMax-this.plotMin;this.tickDataSpacing=Math.max(this.plotRange/this.maxNumIntervals,this.minTickDataSpacing);this.tickDataSpacingNN=Math.max(.1,t.getNiceNumber(this.tickDataSpacing));this.tickMinIndex=Math.ceil(this.plotMin/this.tickDataSpacingNN);this.tickMaxIndex=Math.floor(this.plotMax/this.tickDataSpacingNN)}else{var e=c(Math.abs(this.usedDataMax),this.maxNumIntervals);if(this.usedDataMax>0){this.plotMax=e.max;this.plotMin=e.min;this.tickBaseValue=e.tickBaseValue}else{this.plotMax=-e.min;this.plotMin=-e.max;this.tickBaseValue=-e.tickBaseValue}this.plotRange=this.plotMax-this.plotMin;this.tickDataSpacing=Math.max(this.plotRange/this.maxNumIntervals,this.minTickDataSpacing);this.tickDataSpacingNN=Math.max(e.magnitude/10,t.getNiceNumber(this.tickDataSpacing));this.tickMinIndex=Math.floor((this.plotMin-this.tickBaseValue)/this.tickDataSpacingNN);this.tickMaxIndex=Math.floor((this.plotMax-this.tickBaseValue)/this.tickDataSpacingNN)}}function r(){if(0===this.explicitPlotMax){this.plotMax=0;this.plotMin=-1;this.plotRange=this.plotMax-this.plotMin;this.tickDataSpacingNN=Math.max(.1,t.getNiceNumber(this.plotRange/this.maxNumIntervals))}else n.call(this)}function h(){if(0===this.explicitPlotMin){this.plotMax=1;this.plotMin=0;this.plotRange=this.plotMax-this.plotMin;this.tickDataSpacingNN=Math.max(.1,t.getNiceNumber(this.plotRange/this.maxNumIntervals))}else s.call(this)}function c(e,i){var n=t.getMagnitude(e),s=e/n,a=Math.floor(s),o=Math.round(s),l,r,h=0;if(i<2){l=a*n;r=(a+1)*n;i<1&&(h=l)}else{l=(o-1)*n;r=(o+1)*n}return{min:l,max:r,tickBaseValue:h,magnitude:n}}function u(){null!==this.explicitPlotMin&&null!==this.explicitPlotMax?o.call(this):null===this.explicitPlotMin&&null===this.explicitPlotMax?l.call(this):null===this.explicitPlotMin&&null!==this.explicitPlotMax?r.call(this):h.call(this)}function p(e,i,n){void 0===e&&(e=null!==this.explicitPlotMin);void 0===i&&(i=null!==this.explicitPlotMax);this.tickDataSpacingNN=n?t.getGoodNumber(this.tickDataSpacing):t.getNiceNumber(this.tickDataSpacing);y.apply(this,[e,i])}function d(){var t,e,i;p.call(this);t=this.tickMaxIndex-this.tickMinIndex;e=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=e/this.plotRange;i=this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel||this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit;if(i&&this.maxNumIntervals>=5){while(this.tickDataSpacing<=this.absMax&&i){this.tickDataSpacing=Math.max(1.1*this.tickDataSpacingNN,this.minTickDataSpacing);p.call(this);e=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=e/this.plotRange;i=this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel||this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit}if(!i)return}this.tickDataSpacing=Math.max(this.usedDataRange/this.maxNumIntervals,this.minTickDataSpacing);(i||t<=2&&this.maxNumIntervals>=2*t)&&p.apply(this,[void 0,void 0,true]);e=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=e/this.plotRange;i=this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel||this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit;while(this.tickDataSpacing<=this.absMax&&i){this.tickDataSpacing=Math.max(1.1*this.tickDataSpacingNN,this.minTickDataSpacing);p.apply(this,[void 0,void 0,true]);e=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=e/this.plotRange;i=this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel||this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit}}function f(e){if(e){this.tickDataSpacingNN=t.getGoodNumber(this.absMax);this.tickBaseValue=-this.tickDataSpacingNN;this.plotMin=null===this.explicitPlotMin?-this.tickDataSpacingNN:this.explicitPlotMin;this.plotMax=null===this.explicitPlotMax?this.tickDataSpacingNN:this.explicitPlotMax;this.tickMinIndex=null===this.explicitPlotMin?0:1;this.tickMaxIndex=(null===this.explicitPlotMax,1);this.tickDataSpacingNN=2*this.tickDataSpacingNN}else{this.plotMax=this.usedDataMax;this.plotMin=this.usedDataMin;this.plotRange=this.plotMax-this.plotMin;this.tickMinIndex=0;this.tickMaxIndex=0;this.tickDataSpacingNN=t.getNiceNumber(this.absMax);this.tickDataSpacingNN===this.absMax&&(this.tickDataSpacingNN=t.getNiceNumber(1.1*this.absMax))}}function g(){var e;this.tickDataSpacingNN=t.getNiceNumber(this.tickDataSpacing);this.plotMin=this.usedDataMin;this.plotMax=this.usedDataMax;this.plotRange=this.plotMax-this.plotMin;this.tickMinIndex=0;this.tickMaxIndex=0;if(this.usedDataMax<0||this.usedDataMin>0){e=t.getSmallNiceNumber(this.plotRange);this.tickBaseValue=Math.ceil(this.plotMin/e)*e}}function m(){var t,e,i,n,s;i=this.usedDataMax>=-this.usedDataMin;t=i||null!==this.explicitPlotMin;e=!i||null!==this.explicitPlotMax;p.apply(this,[t,e,true]);s=(this.absMax+(1-this.spaceUseLimit)*this.absMin)/this.spaceUseLimit*1.0001;while(this.tickDataSpacing<=s&&this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel){this.tickDataSpacing=Math.max(1.1*this.tickDataSpacingNN,this.minTickDataSpacing);p.apply(this,[t,e,true])}n=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=n/this.plotRange;this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit&&f.call(this)}function M(){d.call(this);var t=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=t/this.plotRange;if(this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit){this.tickDataSpacing=Math.max(this.usedDataRange/this.maxNumIntervals,this.minTickDataSpacing);m.call(this)}}function _(){var e=t.getNiceNumber(this.tickDataSpacingNN),i,n,s,a,o,l,r,h,c;if(this.tickDataSpacingNN===e||0!==this.tickBaseValue)return;i=this.tickDataSpacingNN;a=this.tickMinIndex;o=this.tickMaxIndex;l=o-a;n=this.plotMin;s=this.plotMax;this.tickDataSpacingNN=e;y.apply(this,[null!==this.explicitPlotMin,null!==this.explicitPlotMax]);r=(this.plotMaxCanBeTuned?this.usedDataMax:this.plotMax)-(this.plotMinCanBeTuned?this.usedDataMin:this.plotMin);this.spaceUseFactor=r/this.plotRange;h=this.plotSize*this.tickDataSpacingNN/this.plotRange<this.minTickSpacingInPixel||this.spaceOptimizingEnabled&&this.spaceUseFactor<this.spaceUseLimit;c=this.tickMaxIndex-this.tickMinIndex;if(!h&&(c===l||c>=10||c>=3&&1.5*c>=l))return;this.tickDataSpacingNN=i;this.tickMinIndex=a;this.tickMaxIndex=o;this.plotMin=n;this.plotMax=s;this.plotRange=this.plotMax-this.plotMin}function v(){if(this.niceNumberEnabled&&this.plotMax!==this.plotMin&&0!==this.plotSize){this.minTickValue=this.tickBaseValue+this.tickMinIndex*this.tickDataSpacingNN;this.maxTickValue=this.tickBaseValue+this.tickMaxIndex*this.tickDataSpacingNN}else{this.minTickValue=this.plotMin;this.maxTickValue=this.plotMax}}function x(){var t,e,i;this.mainTickValues=[];this.secondaryTickValues=[];v.call(this);if(0===this.plotSize)return;if(!this.niceNumberEnabled){this.numIntervals=Math.floor(this.maxNumIntervals);this.tickDataSpacing=Math.max(this.usedDataRange/this.numIntervals,this.minTickDataSpacing);t=this.usedDataMin;for(e=0;e<=this.numIntervals;e++)this.mainTickValues.push(t+e*this.tickDataSpacing);t=this.usedDataMin+this.tickDataSpacing/2;for(e=0;e<this.numIntervals;e++)this.secondaryTickValues.push(t+e*this.tickDataSpacing);return}t=this.tickBaseValue;i=this.tickMaxIndex-this.tickMinIndex;if(i<1)return;for(e=0;e<=i;e++)this.mainTickValues.push(t+(e+this.tickMinIndex)*this.tickDataSpacingNN);t=this.tickBaseValue+this.tickDataSpacingNN/2;for(e=0;e<i;e++)this.secondaryTickValues.push(t+(e+this.tickMinIndex)*this.tickDataSpacingNN)}function b(){var t,e,i,n,s,a=[.5];t=this.mainTickValues[0];for(s=0;s<a.length;s++){e=t-this.tickDataSpacingNN*a[s];i=this.plotMax-e;n=this.plotSize*this.tickDataSpacingNN/i;if(n>3*this.fontHeight){this.plotMin=e;this.plotRange=i;this.mainTickValues.splice(0,0,e);return}}}function S(){var t,e,i,n,s,a=[.5];t=this.mainTickValues[this.mainTickValues.length-1];for(s=0;s<a.length;s++){e=t+this.tickDataSpacingNN*a[s];i=e-this.plotMin;n=this.plotSize*this.tickDataSpacingNN/i;if(n>3*this.fontHeight){this.plotMax=e;this.plotRange=i;this.mainTickValues.push(e);return}}}function y(t,e){this.tickMinIndex=t?Math.ceil(this.usedDataMin/this.tickDataSpacingNN):Math.floor(this.usedDataMin/this.tickDataSpacingNN);this.tickMaxIndex=e?Math.floor(this.usedDataMax/this.tickDataSpacingNN):Math.ceil(this.usedDataMax/this.tickDataSpacingNN);this.plotMin=t?this.usedDataMin:this.tickMinIndex*this.tickDataSpacingNN;this.plotMax=e?this.usedDataMax:this.tickMaxIndex*this.tickDataSpacingNN;this.plotRange=this.plotMax-this.plotMin}function D(){var e=this.plotMin,i=this.plotMax,n=this.tickMinIndex,s=this.tickMaxIndex,a=this.tickDataSpacingNN,o=this.tickMaxIndex-this.tickMinIndex,l=null!==this.explicitPlotMin,r=null!==this.explicitPlotMax,h=true,c=2*this.fontHeight,u=o,p,d,f,g,m;g=this.mainTickValues?this.mainTickValues.length:0;d=this.mainTickValues[0];f=this.mainTickValues[g-1];null===this.explicitPlotMin&&d>this.dataMin&&u++;null===this.explicitPlotMax&&f<this.dataMax&&u++;if(u===o)return;m=0;while(h&&m<10){this.tickDataSpacingNN=t.getSmallNiceNumber(.99*this.tickDataSpacingNN);y.apply(this,[l,r]);p=this.tickMaxIndex-this.tickMinIndex;p>u&&(h=false);m++}h=true;m=0;while(this.tickDataSpacingNN<a&&h&&m<10){this.tickDataSpacingNN=t.getGoodNumber(1.1*this.tickDataSpacingNN);y.apply(this,[l,r]);p=this.tickMaxIndex-this.tickMinIndex;p===u&&this.plotSize*this.tickDataSpacingNN/this.plotRange>c&&(h=false);m++}if(h){this.plotMin=e;this.plotMax=i;this.tickMinIndex=n;this.tickMaxIndex=s;this.tickDataSpacingNN=a}else x.call(this)}function k(){var t,e,i;i=this.mainTickValues?this.mainTickValues.length:0;t=this.mainTickValues[0];e=this.mainTickValues[i-1];if(null===this.explicitPlotMin&&t>this.dataMin&&null===this.explicitPlotMax&&e<this.dataMax)if(Math.abs(this.dataMin)<=Math.abs(this.dataMax)){b.call(this);S.call(this)}else{S.call(this);b.call(this)}else null===this.explicitPlotMin&&t>this.dataMin?b.call(this):null===this.explicitPlotMax&&e<this.dataMax&&S.call(this)}function w(){return{plotMin:this.plotMin,plotMax:this.plotMax,tickSpacing:this.tickDataSpacingNN,tickBaseValue:this.tickBaseValue,tickMinIndex:this.tickMinIndex,tickMaxIndex:this.tickMaxIndex,minTickValue:this.minTickValue,maxTickValue:this.maxTickValue,mainTickValues:this.mainTickValues,secondaryTickValues:this.secondaryTickValues}}t={log:function t(e,i){if(e<=0||i<=0)return NaN;return Math.log(e)/Math.log(i)},log10:function t(i){if(i<=0)return NaN;return Math.log(i)/e},eliminateFloatingError:function t(e){var n=Math.round(e);Math.abs(e-n)<i&&(e=n);return e},getNiceNumber:function t(i){var n,s,a;if(0===i)return 0;n=Math.floor(Math.log(Math.abs(i))/e);s=i/Math.pow(10,n);a=s<=1?1:s<=2?2:s<=5?5:10;return a*Math.pow(10,n)*(i<0?-1:1)},getSmallNiceNumber:function t(i){var n,s,a;if(0===i)return 0;n=Math.floor(Math.log(Math.abs(i))/e);s=i/Math.pow(10,n);if(s<1){a=5;n--}else a=s<2?1:s<5?2:5;return a*Math.pow(10,n)*(i<0?-1:1)},getMagnitude:function t(i){var n;if(0===i)return 0;n=Math.floor(Math.log(Math.abs(i))/e);return Math.pow(10,n)},getFraction:function t(i){var n;if(0===i)return 0;n=Math.floor(Math.log(Math.abs(i))/e);return i/Math.pow(10,n)},getGoodNumber:function t(i){var n,s,a;if(0===i)return 0;n=Math.floor(Math.log(Math.abs(i))/e);s=i/Math.pow(10,n);a=Math.ceil(s);7!==a&&9!==a||a++;s>1&&s<=1.5?a=1.5:s>2&&s<=2.5&&(a=2.5);return a*Math.pow(10,n)*(i<0?-1:1)},calculateTicks:function t(e,i,n,s,o,l,r,h,c,p,v,b){var S,y=false;void 0===v&&(v=false);Number.isNaN(+s)&&(s=null);Number.isNaN(+o)&&(o=null);if(i>n){S=i;i=n;n=S}if(null!==s&&null!==o&&s>o){S=s;s=o;o=S}this.plotSize=e;this.dataMin=i;this.dataMax=n;this.explicitPlotMin=s;this.explicitPlotMax=o;this.minTickSpacingInPixel=l;this.usedDataMin=null===this.explicitPlotMin?this.dataMin:this.explicitPlotMin;this.usedDataMax=null===this.explicitPlotMax?this.dataMax:this.explicitPlotMax;this.absMax=Math.max(Math.abs(this.usedDataMax),Math.abs(this.usedDataMin));this.absMin=Math.min(Math.abs(this.usedDataMax),Math.abs(this.usedDataMin));this.usedDataRange=this.usedDataMax-this.usedDataMin;this.maxNumIntervals=this.plotSize/this.minTickSpacingInPixel;this.maxNumTicks=this.maxNumIntervals+1;this.minTickDataSpacing=b||0;this.tickDataSpacing=Math.max(this.usedDataRange/this.maxNumIntervals,this.minTickDataSpacing);this.fontHeight=r;this.niceNumberEnabled=h;this.tickBaseValue=0;this.spaceUseLimit=void 0===p?.6:p;this.spaceOptimizingEnabled=c;this.plotMaxCanBeTuned=null===this.explicitPlotMax&&this.usedDataMax>0;this.plotMinCanBeTuned=null===this.explicitPlotMin&&this.usedDataMin<0;if(!h||0===e){this.plotMin=this.usedDataMin;this.plotMax=this.usedDataMax;this.tickDataSpacingNN=this.tickDataSpacing;x.call(this);return w.call(this)}if(null!==this.explicitPlotMax&&this.explicitPlotMax<this.usedDataMin||null!==this.explicitPlotMin&&this.explicitPlotMin>this.usedDataMax){y=true;a.call(this)}else if(0===this.usedDataRange)u.call(this);else if(this.maxNumIntervals<1)g.call(this);else{this.usedDataMax>0&&this.usedDataMin<0?1===this.maxNumIntervals?f.call(this,true):this.maxNumIntervals>=5?d.call(this):this.maxNumIntervals<2?m.call(this):M.call(this):d.call(this);if(this.tickMaxIndex<this.tickMinIndex){this.tickDataSpacing=Math.max(this.usedDataRange/this.maxNumIntervals,this.minTickDataSpacing);g.call(this)}else _.call(this)}x.call(this);if(v&&this.maxNumIntervals>=1&&!y){D.call(this);k.call(this)}return w.call(this)}};return t}.apply(e,n),void 0!==s&&(t.exports=s))},1497:function(t,e,i){"use strict";var n,s;!(n=[i(1168),i(1239),i(90)],s=function(t,e,i){var n,s,a,o,l;function r(t,e){var i=t?h(t):null;if(i){var n=i.getDimensions();if(n.length)return e.qText+","+n.join(",")}return e.qText}function h(t){return"P"===t.data.qType&&t.parent?t.parent.cacheItem:t.cacheItem}function c(t,e){return t.labelExpRef?i.getValue(e,t.labelExpRef):t.label}function u(e,i,l,r){var h=new t,c=[],u,d=[];if(e&&e.length){n=0;s=i&&i.length<2;a=i;o=l;h.data.qApprMaxGlyphCount=o[0]?o[0].qApprMaxGlyphCount:0;u=p(r,e[0].qSubNodes,h,c,d,0);return{dimensionTree:u,cacheItems:c}}return{dimensionTree:h,cacheItems:[]}}function p(i,u,d,f,g,m){var M,_,v,x,b,S;g[n]||(g[n]={});for(v=0;v<u.length;v++){var y=[];if("T"===u[v].qType)continue;M=new t;M.data.qType=u[v].qType;M.data.qMaxPos=u[v].qMaxPos;M.data.qMinNeg=u[v].qMinNeg;"P"===u[v].qType&&(l=u[v]);if("V"===u[v].qType||"E"===u[v].qType||"P"===u[v].qType){M.data.qText=u[v].qText;M.data.qNum=Number.isNaN(+u[v].qValue)?u[v].qNum:u[v].qValue;M.data.qValue=u[v].qValue;M.data.rowIndex=0;if(s){_=new t;_.data.qType="_M";_.data.qMaxPos=M.data.qMaxPos;_.data.qMinNeg=M.data.qMinNeg;_.data.qText=a[0].qFallbackTitle;_.data.rowIndex=u[v].qRow;_.addChild(M);M=_}else M.data.rowIndex=u[v].qRow}else{M.data.qText="O"===u[v].qType&&o[m]?o[m].othersLabel||"":u[v].qText;o[m+1]&&(M.data.qApprMaxGlyphCount=o[m+1].qApprMaxGlyphCount);M.data.qElemNo=u[v].qElemNo;M.data.rowIndex=u[v].qRow}d.addChild(M);if("V"!==u[v].qType&&"P"!==u[v].qType){var D=r(d,u[v]);if(g[n][D]&&l){b=g[n][D];M.cacheItem=b}else{b=new e(null,null,null,null,u[v].qRow,n);M.cacheItem=b;b.addDimension(M.data.qText);b.id=u[v].qElemNo;if("U"!==u[v].qType){u[v].qAttrDims&&u[v].qAttrDims.qValues.forEach(function(t,e){b.addAttributeDimension(t.qElemNo,t.qText,c(o[m].qAttrDimInfo[e],i))});u[v].qAttrExps&&u[v].qAttrExps.qValues.forEach(function(t,e){y.push({value:t.qNum,label:c(o[m].qAttrExprInfo[e],i)})})}var k=h(d);if(k){b=M.cacheItem;b.parent=k;k.children.push(b);S=b.parent.getDimensions();for(x in S)b.addDimension(S[x])}g[n][D]=b}}if("V"===u[v].qType){b=h(d);if(b){b.addMeasure(l?l.qText:M.data.qText,u[v].qValue,u[v].qText);f.contains(b)||f.push(b)}}if(u[v].qSubNodes&&u[v].qSubNodes.length>0){n++;M=p(i,u[v].qSubNodes,M,f,g,m+("V"!==u[v].qType?1:0))}y.forEach(function(t){b.addMeasure(t.label,t.value)})}--n;return d}return{prepareData:u}}.apply(e,n),void 0!==s&&(t.exports=s))},1739:function(t,e,i){"use strict";var n,s;!(n=[i(180)],s=function(t){var e;e=t.extend({paint:function t(e){this._super(e)}});return e}.apply(e,n),void 0!==s&&(t.exports=s))},1740:function(t,e,i){"use strict";var n,s;!(n=[i(11),i(91),i(2073),i(1238),i(2074),i(246),i(100),i(2075),i(2077)],s=function(t,e,i,n,s,a,o){var l,r=2,h=17,c=12;function u(t,e){return"normal "+parseInt(t)*e+"px 'QlikView Sans'"}function p(t,e){return{backgroundColor:t.getStyle("legend","backgroundColor"),label:{font:u(t.getStyle("legend.label","fontSize"),1),lineHeight:"1em"},scaledLabel:{font:u(t.getStyle("legend.label","fontSize"),e),color:t.getStyle("legend.label","color"),lineHeight:"1em"},ticks:{color:"#a6a6a6",length:8},line:{color:"#666666"},title:{font:u(t.getStyle("legend.title","fontSize"),1),lineHeight:"1em"},scaledTitle:{font:u(t.getStyle("legend.title","fontSize"),e),color:t.getStyle("legend.title","color"),lineHeight:"1.2em"}}}function d(t){return t&&"primary"!==t.colorMode}function f(t,e,i){var n={};n.maxItemsPerRow=Math.floor((t.width-(i.show?i.width:0))/e.cellWidth);n.numRows=Math.ceil(e.viewItems.length/n.maxItemsPerRow);n.itemsPerRow=Math.ceil(e.viewItems.length/n.numRows);n.w=n.itemsPerRow*e.cellWidth;n.h=Math.ceil(Math.max(i.height,Math.min(e.cellHeight*r,n.numRows*e.cellHeight)));return n}function g(t,e,i){var n=5;return(i?Math.max(t.width,e.maxLabelWidth+h+n):Math.max(e.labelHeight+h,t.height))+20}l=n.extend("BasicColorLegend",{init:function t(){var e=Array.prototype.slice.call(arguments);e.push(s);this._super.apply(this,e);this._styleService=o.initializeService("object."+this.options.parentType);this._legendContainer=this.getInnerContainer();this._dataInvalid=true;this.$scope=this.getInnerContainerScope();this.$scope.callbacks={};this._scrollPosition=0;this._mode={}},release:function t(){this._super();this.$scope=null;this._legendContainer=null},setColorMap:function t(e){this._colorMap=e;this.invalidateProperties("Legend.setColorMap");this.invalidateDisplay("Legend.setColorMap")},getColorMap:function t(){return this._colorMap},setProperties:function t(e){this._legendProperties=e;this._dataInvalid=true;return this.invalidateProperties("BasicColorMap.setProperties")},setExternalColorItems:function t(i){if(i&&i[0]&&i[0].qMatrix&&this._colorMap){this._externalDataPage=i;var n=i[0].qMatrix;var s=[];this._colorDataInfo=this._colorMap.getColorDataInfo();for(var a=0;a<n.length;a++){var o=n[a];s.push({id:[o[1].qNum],index:a,label:o[0].qText,type:"dimension"})}if(this._colorDataInfo&&this._colorDataInfo.hasOthers){var l=this._colorDataInfo.activeDimensionIndex;s.push({id:[-3],index:s.length,label:void 0!==l&&l>-1?this._colorDataInfo.othersLabels[l]:e.get("properties.dimensionLimits.others"),type:"others"})}this._externalColorItems=s}else this._externalColorItems=null;this.invalidateProperties("Legend.setExternalColorItems")},getExternalDataPage:function t(){return this._externalDataPage},isVisible:function t(e){return this._super(e)&&this.hasValidData()&&d(this._mode)&&this._legendProperties&&this._legendProperties.show},updateSize:function t(){this._super();this.invalidateProperties("LegendLight.calculateRelevantSize");this.updateNow(["properties"]);this._dataInvalid=true},_updateProperties:function e(){if(!this._colorMap||!this._legendProperties){this._clearScope(this.$scope);return false}this._colorDataInfo=this._colorMap.getColorDataInfo();this._mode=this._colorDataInfo.legendMode||{};this._marker=this._colorMap.getLegendDataProvider()?this._colorMap.getLegendDataProvider().getLegendMarker():"rect";if(!this._mode.colorMode||this._colorDataInfo.altMode&&!this._externalColorItems&&"dimension"===this._mode.colorMode){this._clearScope(this.$scope);return false}var n=p(this._styleService,this.chartScale);var s;if(this._externalColorItems&&"dimension"===this._mode.colorMode){s=this._externalColorItems;s.forEach(function(t){t.color=this._colorMap.getColorFromPreScaledValue(t.id[0],t.label);t.marker=this._marker}.bind(this));s=s.filter(function(t){return!t.color.isInvalid()}).slice(0,100)}else{s=this._colorMap.getColorMapping().concat();s=s.filter(function(t){return!t.color.isInvalid()})}this._mode.showTitle=this._data.legend.showTitle;if(!this.isVisible()||!s||!s.length){this._clearScope(this.$scope);return false}this.$scope.visible=true;this.$scope.selectionEnabled=false;if(this._mode.showTitle){this._titleMetrics=i.prepareLegendTitle(this._colorMap.getLegendTitle(),n.title);this._titleMetrics.show=this._mode.showTitle}else this._titleMetrics={show:false,width:0,height:0};if(this._mode.discrete){this._legendMetrics=i.prepareDiscreteData(s,this._selectableShapes,n.label,this.rect.width-(this._mode.showTitle&&this.isHorizontal()?this._titleMetrics.width:0),this.chartScale,this._colorMap.getDimensionIndex()[0],this._colorDataInfo.attrIndex);this.$scope.viewItems=this._legendMetrics.viewItems}else{this._formatter=this._colorMap.getValueFormatter()||a.getStaticFormatter();this._formatter.prepare();this._legendMetrics=i.prepareContinousData(s,n.label,this._formatter);this.$scope.viewItems=this._legendMetrics.viewItems}if(this.isHorizontal()){this._horizontalMetrics=f(this.rect,this._legendMetrics,this._titleMetrics);this.$scope.align=this._horizontalMetrics.numRows>=r}this.$scope.discrete=this._mode.discrete;this.$scope.options.vertical=this.isVertical();this.$scope.options.labelStyle=n.scaledLabel;if(this.isDiscrete()){this.$scope.options.titleStyle=t.extend(true,{width:Math.ceil(this._titleMetrics.width*this.chartScale)+"px"},n.scaledTitle);this.$scope.options.titleHeight=(Math.max(this._titleMetrics.height,c)+c)*this.chartScale;this.$scope.options.legendTitle=this._titleMetrics.show?this._titleMetrics.text:null}else{this.$scope.options.titleStyle=n.scaledTitle;this.$scope.options.legendTitle=this._titleMetrics.text}this.$scope.options.legendTitleTooltip=this._titleMetrics.fullText;this.$scope.options.cellWidth=Math.ceil(this._legendMetrics.cellWidth*this.chartScale);this.$scope.options.cellHeight=Math.ceil(this._legendMetrics.cellHeight*this.chartScale);this.$scope.options.yMirrorMode=this.yMirrorMode;this.$scope.options.dock=this.dock;this.$scope.isLocked=this.isSelectionLocked();this._dataInvalid=false;return true},paint:function t(){this.$scope.callbacks&&this.$scope.callbacks.paintLegend&&this.$scope.callbacks.paintLegend()},calculateRelevantSize:function t(e){this._super();this.relevantSize=0;this.invalidateProperties("Legend.calculateRelevantSize");this.updateNow(["properties"]);if(this.isVisible()&&this._titleMetrics&&this._legendMetrics)if(this.isDiscrete())if(this.isHorizontal()){var n=f(e,this._legendMetrics,this._titleMetrics);this.relevantSize=n.h+(n.numRows>r?r:n.numRows)+2*i.constants.PADDING}else this.relevantSize=Math.max(this._legendMetrics.cellWidth,this._titleMetrics.width);else this.relevantSize=g(this._titleMetrics,this._legendMetrics,this.isVertical(),this._values)},isDiscrete:function t(){return this._mode.discrete},clear:function t(){this._super()},isSelectionLocked:function t(){return this._colorDataInfo.altMode&&this._colorDataInfo.internalMode===(this._colorMap?this._colorMap.DIMENSION:"dimension")?this._colorDataInfo.altLocked:this._super()},getAttributeDimensionInfo:function t(){return this._colorMap&&this._colorMap.hasAttributeDimension()?this._colorMap.getAttributeDimensionInfo():[]},_clearScope:function t(e){e.visible=false;e.viewItems=null;this._titleMetrics=null;this._legendMetrics=null},on:function t(){this._super();this.$scope.interactionEnabled=true},off:function t(){this._super();this.$scope.interactionEnabled=false}});Object.defineProperty(l.prototype,"className",{value:"BasicColorLegend"});return l}.apply(e,n),void 0!==s&&(t.exports=s))},1741:function(t,e,i){"use strict";var n,s;function a(t){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return a(t)}!(n=[i(1047),i(1168),i(1497),i(1239),i(90)],s=function(t,e,i,n,s){var o;function l(t,i,n,s){var a=new e;a.text=t;a.title=i;a.id=n;a.idx=s;return a}function r(t,i){var n=new e,s;n.data.qApprMaxGlyphCount=0;for(s in i)n.data[s]=i[s];t&&t.addChild(n);return n}function h(t,e){return t.labelExpRef?s.getValue(e,t.labelExpRef):t.label}o=t.extend({init:function t(e){this._super();this._properties={};e&&this.refresh(e)},refresh:function t(e){this._data=e;this._qDataObject=e.qHyperCube?e.qHyperCube:e.qListObject;var i;if("K"===this._qDataObject.qMode&&this._qDataObject.qStackedDataPages&&this._qDataObject.qStackedDataPages.length>0)i=this._generatePivotTree();else{if(!("S"===this._qDataObject.qMode&&this._qDataObject.qDataPages&&this._qDataObject.qDataPages.length>0))return;i=this._generateDimensionTree()}this._dimensionTree=i?i.dimensionTree:null;this._cacheItems=i?i.cacheItems:null;this.fire("dimensionTreeChanged")},bindProperty:function t(){throw new Error("ChartContext bindProperty: Deprecated")},unBindProperty:function t(){throw new Error("ChartContext unBindProperty: Deprecated")},releaseAll:function t(){throw new Error("ChartContext releaseAll: Deprecated")},release:function t(){this._data=null;this._dimensionTree=null;this._cacheItems=null;this._qDataObject=null},_generateDimensionTree:function t(){var i=l(),s=this.getDataMatrix(),o=this._qDataObject,c=o.qMeasureInfo,u=o.qDimensionInfo,p=o.qDataPages[0].qArea.qTop,d=o.qDataPages[0].qTails,f=c.length,g=u.length,m=s&&s[0]?s[0].length:0,M,_,v,x,b,S,y,D,k,w,I,N=[],C,T=[],L,P,q=this;D=0;for(y=0;y<g;y++)if(!u[y].qError){N[D]=y;D++}g=D;if(0===g)return null;I=function t(e,i){for(var n=0;n<e.length;n++)if(e[n].data.qElemNo===i)return n;return-1};for(y=0;y<s.length;y++){M=s[y];x=i;var V=[];for(D=0;D<g;D++){_=M[D];v=u[N[D]];if(!_)return;w=_.qIsOtherCell?void 0===x.data.othersIndex?-1:x.data.othersIndex:I(x.children,_.qElemNumber);if(-1===w){b=r(x,{qElemNo:M[D].qElemNumber,qText:M[D].qText,rowIndex:p+y,type:"dimension"});void 0!==a(M[D].qNum)&&(b.data.qNum=M[D].qNum);if(_.qIsOtherCell){b.data.qIsOtherCell=true;b.data.qText=v.othersLabel||""}_.qIsTotalCell&&(b.data.qIsTotalCell=true);x.data.qApprMaxGlyphCount=v.qApprMaxGlyphCount;_.qIsOtherCell&&(x.data.othersIndex=x.children.length-1);C=new n([b.data.qText],null,null,null,p+y,D,b.data.qElemNo);_.qAttrDims&&v.qAttrDimInfo&&v.qAttrDimInfo.length&&_.qAttrDims.qValues.forEach(function(t,e){C.addAttributeDimension(t.qElemNo,t.qText,h(v.qAttrDimInfo[e],q._data))});_.qAttrExps&&v.qAttrExprInfo&&v.qAttrExprInfo.length&&_.qAttrExps.qValues.forEach(function(t,e){V.push({value:t.qNum,label:h(v.qAttrExprInfo[e],q._data)})});if(x.cacheItem){C.parent=x.cacheItem;C.parent.children.push(C);L=C.parent.getDimensions();for(P in L)C.addDimension(L[P])}b.cacheItem=C;x=b}else x=x.children[w]}C=x.cacheItem;T.push(C);for(k=0;k<f&&g+k<m;k++){b=r(x,{qText:c[k].qFallbackTitle,qNum:M[g+k].qNum,rowIndex:p+y,type:"measure"});x.data.qApprMaxGlyphCount=Math.max(x.qApprMaxGlyphCount,c[k].qApprMaxGlyphCount);C.addMeasure(b.data.qText,b.data.qNum,M[g+k].qText);S=new e;S.data={qText:M[g+k].qText,qNum:M[g+k].qNum,qElemNo:M[g+k].qElemNumber,qState:M[g+k].qState};b.addChild(S)}V.forEach(function(t){C.addMeasure(t.label,t.value)})}d&&d[0]&&(d[0].qUp>0||d[0].qDown>0)&&(i.children[i.children.length-1].incomplete=true);return{dimensionTree:i,cacheItems:T}},_generatePivotTree:function t(){return i.prepareData(this._qDataObject.qStackedDataPages[0].qData,this._qDataObject.qMeasureInfo,this._qDataObject.qDimensionInfo,this._data)},_extractProperties:function t(){throw new Error("ChartContext _extractProperties: Deprecated")},_updateProperty:function t(){throw new Error("ChartContext _updateProperty: Deprecated")},getDataMatrix:function t(){return this._qDataObject.qDataPages[0].qMatrix},getDimensionTree:function t(){return this._dimensionTree},getCacheItems:function t(){return this._cacheItems}});return o}.apply(e,n),void 0!==s&&(t.exports=s))},1742:function(t,e,i){"use strict";var n,s;!(n=[i(92)],s=function(t){var e,i={ROW:1,VALUE:2};function n(t,e,i){var n=e.indexOf(t);-1===n&&false!==i?e.push(t):-1===n||i||e.splice(n,1)}function s(t){var e=[],i;t.forEach(function(t){t.split(";").forEach(function(t){i=t.split(":");e[+i[0]]||(e[+i[0]]=[]);-1===e[i[0]].indexOf(+i[1])&&e[i[0]].push(+i[1])})});return e}function a(t){t._dirty&&(t.columns=s(t.values));t._dirty=false}function o(t,e){var i=[];do{e&&-1===e.indexOf(t.col)||i.push(t.col+":"+t.id)}while((t=t.parent)&&"undefined"!==typeof t.col&&"undefined"!==typeof t.id);return i.join(";")}e=t.extend({init:function t(){this.rows=[];this.values=[];this.columns=[];this.indicesToTrack=null;this._dirty=false;this.selectionMode=i.ROW|i.VALUE},clear:function t(){this.clearRows();this.clearValues()},toggle:function t(e,i){this.toggleRow(e.row,i);this.toggleValue(e.value,e.col,i)},toggleByCacheItem:function t(e){this.toggleRow(e.rowIndex||e.row||0,e.selected);var i=o(e,this.indicesToTrack);i&&n(i,this.values,e.selected);this._dirty=true},toggleRow:function t(e,i){n(e,this.rows,i)},toggleValue:function t(e,i,s){n((i||0)+":"+e,this.values,s);this._dirty=true},isRowSelected:function t(e){return!!(this.selectionMode&i.ROW)&&-1!==this.rows.indexOf(e)},isValueSelected:function t(e,n){if(!(this.selectionMode&i.VALUE))return false;a(this);return"undefined"!==typeof this.columns[n||0]&&-1!==this.columns[n||0].indexOf(e)},isValueChainSelected:function t(e){if(!(this.selectionMode&i.VALUE))return false;if(this.indicesToTrack){a(this);var n=o(e,this.indicesToTrack).split(";");return n.length&&!n.some(function(t){var e=t.split(":");return!("undefined"!==typeof this.columns[+e[0]||0]&&-1!==this.columns[+e[0]||0].indexOf(+e[1]))},this)}return-1!==this.values.indexOf("string"===typeof e?e:o(e,this.indicesToTrack))},isCacheItemSelected:function t(e){return this.isValueChainSelected(e)||this.isRowSelected(e.rowIndex||e.row||0)},hasSelections:function t(){return!!(this.selectionMode&i.ROW)&&this.rows.length>0||!!(this.selectionMode&i.VALUE)&&this.values.length>0},setRows:function t(e){this.rows=e.slice()},setValues:function t(e,i){this.values=e.map(function(t){return(i||0)+":"+t});this._dirty=true},getSelectedColumns:function t(){a(this);var e=this.columns;return e.filter(function(t){return"undefined"!==typeof t}).map(function(t){return e.indexOf(t)})},getSelectedValuesInColumn:function t(e){a(this);return this.columns[e||0]||[]},getSelectedValues:function t(){a(this);return this.columns},clearRows:function t(){this.rows.length=0},clearValues:function t(){this.values=[];this.columns.length=0;this._dirty=false},setSelectionMode:function t(e){this.selectionMode=e},trackByIndices:function t(e){this.indicesToTrack=Array.isArray(e)?e.slice():null}});e.prototype.SELECTION_MODE=i;e.SELECTION_MODE=i;return e}.apply(e,n),void 0!==s&&(t.exports=s))},2069:function(t,e,i){"use strict";var n,s;!(n=[i(104)],s=function(t){function e(){this._layoutComponents=[];this._componentSizes=[]}e.prototype={addComponent:function t(e){var i;i=this._layoutComponents;this.removeComponent(e);i.push(e)},removeComponent:function t(e){var i,n;n=this._layoutComponents;for(i=0;i<n.length;++i)if(n[i]===e){n.splice(i,1);return}},_reduceLayoutRectForComponents:function t(e,i,n,s,a,o){var l;for(l=0;l<e.length;++l){if(!e[l]||!["left","right","bottom","top"].contains(e[l].dock)||!o(e[l]))continue;e[l].calculateRelevantSize(i,n,s);if(!e[l].isVisible(a))continue;e[l].relevantSize=Math.round(e[l].relevantSize);e[l].reduceLayoutRect(i)}},_reducePreliminaryLayoutRectForComponents:function t(e,i,n,s,a){var o;for(o=0;o<e.length;++o){if(!e[o]||!["left","right","bottom","top"].contains(e[o].dock)||!a(e[o]))continue;e[o].calculatePreliminaryRelevantSize?e[o].calculatePreliminaryRelevantSize(i,n):e[o].calculateRelevantSize(i,n);if(!e[o].isVisible(s))continue;e[o].reduceLayoutRect(i)}},_reduceComponentRectBySpacingH:function t(e,i,n,s){var a,o;for(a=0;a<n.length;++a){o=n[a].perpendicularlyRelevantSpacing;if(o&&n[a].isVisible(s)){if(o.left>e.x&&e.x>=0){e.width-=o.left-e.x;e.x=o.left}o.right>i.width-e.x-e.width&&(e.width-=o.right-(i.width-e.x-e.width-i.x))}}},_reduceComponentRectBySpacingV:function t(e,i,n,s){var a,o;for(a=0;a<n.length;++a){o=n[a].perpendicularlyRelevantSpacing;if(o&&n[a].isVisible(s)){if(o.top>e.y&&e.y>=0){e.height-=o.top-e.y;e.y=o.top}o.bottom>i.height-e.y-e.height&&(e.height-=o.bottom-(i.height-e.y-e.height-i.y))}}},_layoutComponent:function t(e,i,n,s){e&&e.insertAdjacentTo(e.dock&&"center"!==e.dock?e.isVertical()?n.x:n.y:s,e.isVisible(i))},layout:function e(a,o,l,r,h){var c=2;a=new t(a.x,a.y,a.width,a.height);l=new t(l.x,l.y,l.width,l.height);var u,p,d,f,g=l.width/a.width,m=l.height/a.height,M;p=this._layoutComponents;p.sort(function(t,e){if("center"===t.dock)return"center"===e.dock?0:-1;if("center"===e.dock)return 1;return t.layoutOrder-e.layoutOrder});a=new t(a.x,a.y,a.width-2*c,a.height-2*c);d=new t(a.x,a.y,a.width,a.height);f={x:new t,y:new t};s.apply(this,[d,a,o,r,h]);d.x+=c;d.y+=c;f.x.set(d.x,d.y,d.width,d.height);f.y.set(d.x,d.y,d.width,d.height);for(u=0;u<p.length;++u){p[u].setLayoutToContainerRatios(g,m);this._layoutComponent(p[u],o,f,d);M=n.call(this,p[u]);p[u].updateSize(!M||M.rect.width!==p[u].rect.width||M.rect.height!==p[u].rect.height);i.call(this,p[u])}}};function i(t){var e=this._componentSizes.filter(function(e){return e.component===t})[0];if(!e){e={component:t};this._componentSizes.push(e)}e.rect=t.rect.clone()}function n(t){return this._componentSizes.filter(function(e){return e.component===t})[0]}function s(t,e,i,n,s){var a,o=this._layoutComponents.slice(),l=[{fn:"_reduceComponentRectBySpacingV",dock:["left","right"]},{fn:"_reduceComponentRectBySpacingH",dock:["top","bottom"]}];"vertical"===n&&l.reverse();o.sort(function(t,e){return(t.reductionOrder||1e3)-(e.reductionOrder||1e3)});for(a=0;a<o.length;a++){o[a].perpendicularlyRelevantSpacing={top:0,left:0,right:0,bottom:0};o[a].preRelevantSizeCalculation&&o[a].preRelevantSizeCalculation()}var r=t.clone();l.forEach(function(t){this._reducePreliminaryLayoutRectForComponents(o,r,e,i,function(e){return e&&t.dock.indexOf(e.dock)>=0})},this);l.forEach(function(t){this[t.fn](r,e,o,i)},this);if(s&&s()){r=t.clone();l.forEach(function(t){this._reducePreliminaryLayoutRectForComponents(o,r,e,i,function(e){return e&&t.dock.indexOf(e.dock)>=0});this[t.fn](r,e,o,i)},this)}l.forEach(function(n){this._reduceLayoutRectForComponents(o,t,e,r,i,function(t){return t&&n.dock.indexOf(t.dock)>=0})},this);l.forEach(function(n){this[n.fn](t,e,o,i)},this)}return e}.apply(e,n),void 0!==s&&(t.exports=s))},2070:function(t,e,i){"use strict";var n,s;!(n=[i(92),i(1496),i(2071)],s=function(t,e,i){var n=t.extend("LogScale",{init:function t(){this.plotMin=null;this.plotMax=null;this.plotRange=null;this.tickMin=this.plotMin;this.tickMax=this.plotMax;this.mainValues=[];this.secondaryValues=[];this._plotSize=0;this._calculationSize=0},setSize:function t(e){this._plotSize=e},getPositionOfValue:function t(i){var n;if(0===i)return this._usedDataMin>0?0:this._plotSize;n=i>0?e.log10(i):-e.log10(-i);return(n-this._plotMinLog10)/this._plotRangeLog10*this._plotSize},getNormalizedValue:function t(i){var n;if(0===i)return this._usedDataMin>0?0:1;n=i>0?e.log10(i):-e.log10(-i);return(n-this._plotMinLog10)/this._plotRangeLog10},getValueOfPosition:function t(e){var i;if(0===e)return 0;i=this._plotMinLog10+this._plotRangeLog10*e/this._plotSize;return this._usedDataMin>0?Math.pow(10,i):-Math.pow(10,-i)},calculateLimits:function t(){this._usedDataMin=Number.isNaN(+this._realDataMin)?this._dataMin:this._realDataMin;this._usedDataMax=Number.isNaN(+this._realDataMax)?this._dataMax:this._realDataMax;this.plotMin=null===this._explicitPlotMin||Number.isNaN(+this._explicitPlotMin)?this._usedDataMin:this._explicitPlotMin;this.plotMax=null===this._explicitPlotMax||Number.isNaN(+this._explicitPlotMax)?this._usedDataMax:this._explicitPlotMax;this.plotRange=this.plotMax-this.plotMin;this._plotMinLog10=e.log10(Math.abs(this.plotMin))*(this.plotMin<0?-1:1);this._plotMaxLog10=e.log10(Math.abs(this.plotMax))*(this.plotMax<0?-1:1);this._plotRangeLog10=this._plotMaxLog10-this._plotMinLog10},calculateTicks:function t(){var n;n=i.calculateTicks(this._calculationSize,this._usedDataMin,this._usedDataMax,this._explicitPlotMin,this._explicitPlotMax,this._minTickSpacingInPixel,this._fontHeight,this._niceNumberEnabled,this._whiteSpaceOptimizingEnabled);this.plotMin=n.plotMin;this.plotMax=n.plotMax;this.plotRange=this.plotMax-this.plotMin;this.tickMin=n.tickMin;this.tickMax=n.tickMax;this.mainValues=n.mainTickValues;this.secondaryValues=[];this._dataSign=n.sign;this._tickSpacing=this.mainValues.length>1?this.mainValues[1]-this.mainValues[0]:this.plotMax-this.plotMin;this._plotMinLog10=this._dataSign*e.log10(Math.abs(this.plotMin));this._plotMaxLog10=this._dataSign*e.log10(Math.abs(this.plotMax));this._plotRangeLog10=this._plotMaxLog10-this._plotMinLog10;0===this.mainValues.length&&this.mainValues.push(n.minTickValue);0===this._tickSpacing&&(this._tickSpacing=1)},getValues:function t(){return{mainValues:this.mainValues,secondaryValues:this.secondaryValues}}});return n}.apply(e,n),void 0!==s&&(t.exports=s))},2071:function(t,e,i){"use strict";var n,s;!(n=[i(1496)],s=function(t){var e,i=Math.log(10),n=1e-12,s=Math.log(3)/i,a=[[2,4,6],[2,4],[3]],o=[,[,,[[1,2]],[[1,2,3],[1,3]],[[1,2,4],[1,4]],[[1,2,4],[1,5]],[[1,2,4,6],[2,4,6],[1,3,6],[1,6]],[[1,2,4,6],[2,4,6],[1,3,6],[1,7]],[[1,2,4,8],[2,4,8],[1,8]],[[1,2,4,8],[2,4,8],[1,3,9],[1,9]],[[1,2,4,6,10],[1,2,4,10],[1,3,10],[3,10],[1,10]]],[,,,[[2,3]],[[2,3,4],[2,4]],[[2,3,4],[2,4],[2,5]],[[2,4,6],[2,6]],[[2,4,6],[2,6],[2,7]],[[2,4,8],[2,8]],[[2,4,8],[2,8],[2,9]],[[2,4,6,10],[2,4,10],[5,10],[3,10]]],[,,,,[[3,4]],[[3,4,5],[3,5]],[[3,4,5,6],[3,6]],[[3,4,5,6],[3,5,7],[3,7]],[[3,4,5,6,8],[3,5,7],[4,8],[3,8]],[[3,4,5,6,8],[3,4,6,9],[3,4,6,8],[3,6,9],[4,8],[3,9]],[[4,6,10],[5,10],[3,10]]],[,,,,,[[4,5]],[[4,5,6],[4,6]],[[4,5,6,7],[4,5,6],[4,6]],[[4,5,6,7,8],[4,5,6,7],[4,6,8],[4,8]],[[4,5,6,7,8],[4,6,9],[4,6,8],[4,8]],[[4,6,10],[5,7,9],[5,10],[4,10]]],[,,,,,,[[5,6]],[[5,6,7],[5,7]],[[5,6,7,8],[5,6,7],[6,8]],[[5,6,7,8,9],[5,6,7,8],[5,7,9],[5,9]],[[6,8,10],[5,10]]],[,,,,,,,[[6,7]],[[6,7,8],[6,8]],[[6,7,8,9],[6,7,8],[6,9]],[[6,7,8,9,10],[6,8,10],[6,10]]],[,,,,,,,,[[7,8]],[[7,8,9],[7,9]],[[7,8,9,10],[8,10],[7,10],[7,9]]],[,,,,,,,,,[[8,9]],[[8,9,10],[8,10]]],[,,,,,,,,,,[[9,10]]]],l=[,[,,[1,2],[1,3],[1,4],[1,5,1,6],[1,6],[1,10,1,8,1,7],[1,8,1,10],[1,10,1,9]],[,,,[2,3],[2,4],[2,6,2,5],[2,6,2,8],[2,8,2,7],[2,8,1,10],[1,10,2,10,2,9],[1,10,2,10]],[,,,,[3,4,2,4],[3,6,3,5],[3,6,2,6],[2,8,3,8,3,7],[2,8,3,8,3,9],[2,10,3,10,3,9]],[,,,,,[4,5,4,6,3,5],[4,6],[4,8,4,7],[4,8],[4,10,4,9,3,9],[4,10]],[,,,,,[5,6,4,6],[5,7,4,8],[4,8,5,8,5,10],[5,10,4,10,5,9],[5,10,4,10]],[,,,,,,[6,7,6,8],[6,8],[6,10,5,10,6,9],[6,10,5,10]],[,,,,,,,[7,8,6,8],[7,9,6,10],[6,10,7,10]],[,,,,,,,,[8,10,8,9],[8,10]],[,,,,,,,,,[9,10]]];function r(t,e,i){var n=t?t.length:0,s,a=void 0===e?Number.MAX_VALUE:t[0]/e;for(s=1;s<n;s++)a=Math.min(a,t[s]/t[s-1]);void 0!==i&&(a=Math.min(a,i/t[n-1]));t.splice(0,0,a)}function h(t,e,i){var n,s=t?t.length:0;for(n=0;n<s;n++)r(t[n],e,i)}function c(){var t,e;h(a,1,10);for(t=0;t<o.length;t++)if(o[t])for(e=0;e<o[t].length;e++)o[t][e]instanceof Array&&h(o[t][e])}c();function u(){var t=true,e=0,i,n,s,a,o,l,r;i=this.tickDataSpacingLog;r=0;while(t&&e<5){i=0===e?Math.ceil(this.tickDataSpacingLog):Math.ceil(1.01*i);n=this.minIsStrict?Math.ceil(this.usedDataMinLog/i):Math.floor(this.usedDataMinLog/i);s=this.maxIsStrict?Math.floor(this.usedDataMaxLog/i):Math.ceil(this.usedDataMaxLog/i);a=this.minIsStrict?this.explicitPlotMinLog:n*i;o=this.maxIsStrict?this.explicitPlotMaxLog:s*i;l=o-a;t=i/l*this.plotSize<this.minTickSpacingInPixel;e++}if(t){i=Math.ceil(this.tickDataSpacingLog);n=this.minIsStrict?Math.ceil(this.usedDataMinLog/i):Math.floor(this.usedDataMinLog/i);s=this.maxIsStrict?Math.floor(this.usedDataMaxLog/i):Math.ceil(this.usedDataMaxLog/i);a=this.minIsStrict?this.explicitPlotMinLog:n*i;o=this.maxIsStrict?this.explicitPlotMaxLog:s*i}return{plotMinLog:a,plotMaxLog:o,tickMinIndex:n,tickMaxIndex:s,tickDataSpacingNNLog:i,tickBaseValueLog:r,success:!t}}function p(){var t=true,e=0,i,n,s,a,o,l,r;i=this.tickDataSpacingLog;n=0;r=this.usedDataMinLogFloor;while(t&&e<5){i=0===e?Math.ceil(this.tickDataSpacingLog):Math.ceil(1.01*i);n=this.minIsStrict?Math.ceil((this.usedDataMinLog-r)/i):Math.floor((this.usedDataMinLog-r)/i);s=this.maxIsStrict?Math.floor((this.usedDataMaxLog-r)/i):Math.ceil((this.usedDataMaxLog-r)/i);a=this.minIsStrict?this.explicitPlotMinLog:n*i+r;o=this.maxIsStrict?this.explicitPlotMaxLog:s*i+r;l=o-a;t=i/l*this.plotSize<this.minTickSpacingInPixel;e++}if(t){i=0===e?Math.ceil(this.tickDataSpacingLog):Math.ceil(1.01*i);n=this.minIsStrict?Math.ceil((this.usedDataMinLog-r)/i):Math.floor((this.usedDataMinLog-r)/i);s=this.maxIsStrict?Math.floor((this.usedDataMaxLog-r)/i):Math.ceil((this.usedDataMaxLog-r)/i);a=this.minIsStrict?this.explicitPlotMinLog:n*i+r;o=this.maxIsStrict?this.explicitPlotMaxLog:s*i+r}return{plotMinLog:a,plotMaxLog:o,tickMinIndex:n,tickMaxIndex:s,tickDataSpacingNNLog:i,tickBaseValueLog:r,success:!t}}function d(){var t,e,i,n,s,a,o;e=p.call(this);if(!e.success){t=u.call(this);return t}i=this.usedDataMaxLog-this.usedDataMinLog;s=i/(e.plotMaxLog-e.plotMinLog);if(1===s)return e;t=u.call(this);if(!t.success)return e;n=i/(t.plotMaxLog-t.plotMinLog);a=t.tickMaxIndex-t.tickMinIndex;o=e.tickMaxIndex-e.tickMinIndex;if(o>a||o===a&&s>n||o===a&&s===n&&e.plotMinLog<t.plotMinLog)return e;return t}function f(e,i,n,s,a){var o=t.getNiceNumber(1.1*a),l=e?Math.ceil(n/o):Math.floor(n/o),r=i?Math.floor(s/o):Math.ceil(s/o),h=e||0===l?n:l*o,c=i?s:r*o;return{plotMin:h,plotMax:c,tickSpacing:o,tickBaseValue:0}}function g(t,e){var i;for(i=0;i<t.length;i++)if(t[i]>=e)return i-1}function m(t,e){var i;for(i=t.length-1;i>=0;i--)if(t[i]<=e)return i+1}function M(t,e,i,n,s){var a,o;a=g(t,e);o=m(t,i);!n&&void 0!==t[a+1]&&t[a+1]>e&&(a-=1);!s&&o>0&&void 0!==t[o-1]&&t[o-1]<i&&(o+=1);o<t.length&&t.splice(o,t.length-o);a>=0&&t.splice(0,a+1)}function _(e,i,s,a){var o,l,r,h=Number.MAX_VALUE,c=-Number.MAX_VALUE,u,p=t.log10(s),d=t.log10(i),f=p-d;l=e?e.length:0;r=new Array(l);(null===a||Number.isNaN(+a))&&(a=1.71);for(o=0;o<l;o++)r[o]=t.log10(e[o]);for(o=1;o<l;o++){u=r[o]-r[o-1];h=Math.min(h,u);c=Math.max(c,u)}c=Math.max(c,Math.abs(r[0]-d));c=Math.max(c,Math.abs(p-r[l-1]));return h/f*this.plotSize>=this.minTickSpacingInPixel-n&&c/h<=a&&e.length-1<=this.maxNumIntervals}function v(e){var i,n,s,a=Number.MAX_VALUE,o=-Number.MAX_VALUE,l,r=e.mainTickValues;n=r?r.length:0;s=new Array(n);for(i=0;i<n;i++)s[i]=t.log10(r[i]);for(i=1;i<n;i++){l=s[i]-s[i-1];a=Math.min(a,l);o=Math.max(o,l)}e.maxTickSpacing=o;e.minTickSpacing=a;e.tickSpacingRatio=o/a;e.spaceUseFactor=this.usedDataRange/(e.plotMax-e.plotMin);e.factor=e.spaceUseFactor/(e.tickSpacingRatio*e.tickSpacingRatio)}function x(e,i,n,s,a){var o,l,r,h,c;o=(s+n)/2;if(void 0===a){l=Math.round(o);if(l>=n&&l<=s)return Math.pow(10,l);r=Math.floor(o);if(r>=n&&r<=s)return Math.pow(10,r);h=Math.ceil(o);if(h>=n&&h<=s)return Math.pow(10,h);c=t.getSmallNiceNumber(Math.max(1,i-e));return Math.ceil(e/c)*c}r=Math.pow(10,Math.floor(o));h=Math.pow(10,Math.ceil(o));if(Math.abs(r-a)<Math.abs(h-a))return r;return h}function b(t,e,i,n,s,a){var o=s?Math.ceil((t-i)/n):Math.floor((t-i)/n),l=a?Math.floor((e-i)/n):Math.ceil((e-i)/n),r,h,c=[];for(r=o;r<=l;r++){h=r*n+i;h>0&&c.push(r*n+i)}return c}function S(t,e,i,n){t.mainTickValues=e;t.plotMin=i;t.plotMax=n}function y(){if(this.usedDataMax>=10*this.usedDataMin)return 1;if(this.usedDataMaxLogFloor===this.usedDataMinLogFloor){if(this.maxIsStrict&&this.minIsStrict)return 2;return 3}return 1}function D(t){t.sort(function(t,e){return t-e})}function k(t,e,i,s,a,o,l){var r=0,h,c,u,p,d,f,g,m=[];for(r=0;r<t.length;r++)if(e<=t[r][0]+n){d=i.concat();for(h=s;h<a;h++)for(c=1;c<t[r].length;c++)d.push(t[r][c]*Math.pow(10,h*o+l));D(d);M(d,this.usedDataMin,this.usedDataMax,this.minIsStrict,this.maxIsStrict);f=this.minIsStrict?this.explicitPlotMin:d[0];g=this.maxIsStrict?this.explicitPlotMax:d[d.length-1];_.apply(this,[d,f,g])&&m.push({mainTickValues:d,plotMin:f,plotMax:g})}if(0===m.length){d=i;M(d,this.usedDataMin,this.usedDataMax,this.minIsStrict,this.maxIsStrict);f=this.minIsStrict?this.explicitPlotMin:d[0];g=this.maxIsStrict?this.explicitPlotMax:d[d.length-1];return{mainTickValues:d,plotMin:f,plotMax:g}}if(1===m.length)return m[0];p=i.length-1;for(r=0;r<m.length;r++){u=m[r].mainTickValues.length-1;if(m[r].mainTickValues[0]===i[0]&&m[r].mainTickValues[u]===i[p])return m[r]}return m[0]}function w(t,e){var i=true,s=Math.ceil(this.fractionMinLog),a=Math.floor(this.fractionMaxLog),o=0,l,r,h,c,u,p;if(t[s]&&t[s][a]){u=t[s][a];u instanceof Array||(u=t[s][u]);p=u.length;while(o<p&&i){if(e<=u[o][0]+n&&u[o].length-2<=this.maxNumIntervals){r=[];for(l=1;l<u[o].length;l++)r.push(u[o][l]*this.dataMinMagnitude);i=!_.apply(this,[r,this.usedDataMin,this.usedDataMax])}i&&o++}}i&&(r=[x(this.usedDataMin,this.usedDataMax,this.usedDataMinLog,this.usedDataMaxLog)]);h=this.minIsStrict?this.explicitPlotMin:r[0];c=this.maxIsStrict?this.explicitPlotMax:r[r.length-1];return{mainTickValues:r,plotMin:h,plotMax:c}}function I(t,e){var i=this.minIsStrict?Math.ceil(this.fractionMinLog):Math.floor(this.fractionMinLog),s=this.maxIsStrict?Math.floor(this.fractionMaxLog):Math.ceil(this.fractionMaxLog),a,o,r,h,c,u,p={},d,f,g,m,v,b,y,D,k;if(l[i]&&l[i][s]){d=l[i][s];f=d instanceof Array?d.length/2:0;p.mainTickValues=[];for(a=0;a<f;a++){g=d[2*a];m=d[2*a+1];if(t[g]&&t[g][m]){v=t[g][m];b=v.length;for(o=0;o<b;o++){y=e<=v[o][0]+n&&v[o].length-2<=this.maxNumIntervals;D=v[o][1]*this.dataMinMagnitude;k=v[o][v[o].length-1]*this.dataMinMagnitude;y=this.minIsStrict?y&&D>=this.usedDataMin:y&&D<=this.usedDataMin;y=this.maxIsStrict?y&&k<=this.usedDataMax:y&&k>=this.usedDataMax;if(y){h=[];for(r=1;r<v[o].length;r++)h.push(v[o][r]*this.dataMinMagnitude);M(h,this.usedDataMin,this.usedDataMax,this.minIsStrict,this.maxIsStrict);c=this.minIsStrict?this.explicitPlotMin:h[0];u=this.maxIsStrict?this.explicitPlotMax:h[h.length-1];if(_.apply(this,[h,c,u])){p.mainTickValues.length<h.length&&S(p,h,c,u);break}}}}}}p.mainTickValues&&0!==p.mainTickValues.length||(p.mainTickValues=[x(this.usedDataMin,this.usedDataMax,this.usedDataMinLog,this.usedDataMaxLog)]);h=p.mainTickValues;p.plotMin=this.minIsStrict?this.explicitPlotMin:h[0];p.plotMax=this.maxIsStrict?this.explicitPlotMax:h[h.length-1];return p}function N(t,e,i){var s=t.length,a;if(i){for(a=s-1;a>=0;a--)if(Math.abs(t[a]-e[a]*this.dataMinMagnitude)>n)return false;return true}for(a=0;a<s;a++)if(Math.abs(t[a]-e[a]*this.dataMinMagnitude)>n)return false;return true}function C(t){var e=t.mainTickValues,i=e.length,n,s;if(i<2||i>4)return;s=5*this.dataMinMagnitude;if((this.minIsStrict&&this.usedDataMin<=s||!this.minIsStrict&&this.usedDataMin>=s)&&(N.apply(this,[e,[6,10,20,40]])||N.apply(this,[e,[4,10,20,40]]))){n=e[0];e[0]=s;t.plotMin=this.minIsStrict?this.explicitPlotMin:e[0];if(!_.apply(this,[e,t.plotMin,t.plotMax])){e[0]=n;t.plotMin=this.minIsStrict?this.explicitPlotMin:e[0]}return}s=80*this.dataMinMagnitude;if((this.maxIsStrict&&this.usedDataMax>=s||!this.maxIsStrict&&this.usedDataMax<=s)&&N.apply(this,[e,[10,20,40,60],true])){n=e[i-1];e[i-1]=s;t.plotMax=this.maxIsStrict?this.explicitPlotMax:e[i-1];if(!_.apply(this,[e,t.plotMin,t.plotMax])){e[i-1]=n;t.plotMax=this.maxIsStrict?this.explicitPlotMax:e[i-1]}return}}function T(e,i,n,s,a,o,l,r,h,c){var u=t.calculateTicks(e,i,n,s,a,o,l,r,h,c),p=null!==s,d=null!==a,g=p?s:i,m=d?a:n,M,v,x,S=1,y;0===u.plotMin&&(u.plotMin=p?s:i);M=u.mainTickValues;v=p?s:Math.min(i,M[0]);x=d?a:Math.max(M[M.length-1],n);while(!_.apply(this,[M,v,x])&&S<=20){u=f(p||u.tickSpacing>g,d,g,m,u.tickSpacing);M=b(g,m,u.tickBaseValue,u.tickSpacing,p,d);v=p?s:Math.min(i,M[0]);x=d?a:Math.max(M[M.length-1],n);S++}if(_.apply(this,[M,v,x])){y=t.getFraction(M[0])/2;if(2===M.length&&M[1]/M[0]===2&&M[0]/2>=v&&y===Math.floor(y)){M.splice(0,0,M[0]/2);y=t.getFraction(M[0])/2;M[0]/2>=v&&y===Math.floor(y)&&M.splice(0,0,M[0]/2)}}else M=[];u.mainTickValues=M;u.numLoops=S;return u}function L(){var t,e,i,n,l,r,h,c,u,p,f,g,m,v,b,D={};if(this.maxIsStrict&&this.explicitPlotMax<=this.usedDataMin){this.dataMinLog=Math.ceil(this.explicitPlotMaxLog-(this.maxNumIntervals<2?1:2));this.dataMin=Math.pow(10,this.dataMinLog)}else if(this.minIsStrict&&this.explicitPlotMin>=this.usedDataMax){this.dataMaxLog=Math.floor(this.explicitPlotMinLog+(this.maxNumIntervals<2?1:2));this.dataMax=Math.pow(10,this.dataMaxLog)}else if(this.usedDataMin===this.usedDataMax){i=this.usedDataMin;this.dataMinLog=Math.floor(this.dataMinLog);this.dataMaxLog=this.dataMinLog+1;this.dataMin=Math.pow(10,this.dataMinLog);this.dataMax=Math.pow(10,this.dataMaxLog)}this.usedDataMin=this.minIsStrict?this.explicitPlotMin:this.dataMin;this.usedDataMax=this.maxIsStrict?this.explicitPlotMax:this.dataMax;this.usedDataMinLog=this.minIsStrict?this.explicitPlotMinLog:this.dataMinLog;this.usedDataMaxLog=this.maxIsStrict?this.explicitPlotMaxLog:this.dataMaxLog;if(this.maxNumIntervals<1){S(D,[x(this.usedDataMin,this.usedDataMax,this.usedDataMinLog,this.usedDataMaxLog,i)],this.usedDataMin,this.usedDataMax);return D}this.tickDataSpacingLog=(this.usedDataMaxLog-this.usedDataMinLog)/this.maxNumIntervals;this.usedDataMinLogFloor=Math.floor(this.usedDataMinLog);this.usedDataMaxLogFloor=Math.floor(this.usedDataMaxLog);this.dataMinMagnitude=Math.pow(10,this.usedDataMinLogFloor);this.fractionMinLog=this.usedDataMin/this.dataMinMagnitude;this.fractionMaxLog=this.usedDataMax/this.dataMinMagnitude;t=Math.ceil(this.usedDataMaxLog);if(this.usedDataMinLog===this.usedDataMinLogFloor&&this.usedDataMaxLog===t&&this.maxNumIntervals>=2&&this.maxNumIntervals<3&&this.tickDataSpacingLog>1&&this.tickDataSpacingLog-Math.floor(this.tickDataSpacingLog)<s){e=Math.floor((this.usedDataMinLogFloor+t)/2);m=[Math.pow(10,this.usedDataMinLogFloor),3*Math.pow(10,e),Math.pow(10,t)];M(m,this.usedDataMin,this.usedDataMax,this.minIsStrict,this.maxIsStrict);v=this.minIsStrict?this.explicitPlotMin:m[0];b=this.maxIsStrict?this.explicitPlotMax:m[m.length-1];if(m.length>=2&&_.apply(this,[m,v,b])){S(D,m,v,b);return D}}h=d.call(this);if(!h.success){S(D,[x(this.usedDataMin,this.usedDataMax,this.usedDataMinLog,this.usedDataMaxLog)],this.usedDataMin,this.usedDataMax);return D}c=h.tickMinIndex;u=h.tickMaxIndex;l=h.tickDataSpacingNNLog;r=h.tickBaseValueLog;this.minIsStrict&&c--;this.maxIsStrict&&u++;f=[];for(p=c;p<=u;p++)f.push(Math.pow(10,p*l+r));n=Math.pow(10,this.tickDataSpacingLog);g=y.call(this);if(2===g)return w.apply(this,[o,n]);if(3===g)return I.apply(this,[o,n]);D=k.apply(this,[a,n,f,c,u,l,r]);C.call(this,D);return D}function P(){var t,e,i,n,s={};this.plotMin=this.usedDataMin;this.plotMax=this.usedDataMax;e=Math.floor(this.maxNumIntervals);i=(this.dataMaxLog-this.dataMinLog)/e;n=[this.usedDataMin];for(t=0;t<e;t++)n.push(Math.pow(10,this.dataMinLog+(t+1)*i));S(s,n,this.plotMin,this.plotMax);return s}e={calculateTicksLogPositive:function e(i,n,s,a,o,l,r,h,c){var u,p={},d,f;Number.isNaN(+a)&&(a=null);Number.isNaN(+o)&&(o=null);if(n>s){u=n;n=s;s=u}if(null!==a&&null!==o&&a>o){u=a;a=o;o=u}this.plotSize=i;this.dataMin=n;this.dataMax=s;this.explicitPlotMin=a;this.explicitPlotMax=o;this.minTickSpacingInPixel=l;this.minIsStrict=null!==a;this.maxIsStrict=null!==o;this.usedDataMin=this.minIsStrict?a:n;this.usedDataMax=this.maxIsStrict?o:s;this.usedDataRange=this.usedDataMax-this.usedDataMin;this.maxNumIntervals=i/l;this.maxNumTicks=this.maxNumIntervals+1;this.explicitPlotMinLog=this.minIsStrict?t.eliminateFloatingError(t.log10(a)):null;this.explicitPlotMaxLog=this.maxIsStrict?t.eliminateFloatingError(t.log10(o)):null;this.dataMinLog=t.eliminateFloatingError(t.log10(n));this.dataMaxLog=t.eliminateFloatingError(t.log10(s));if(!h||0===i)return P.call(this);if(this.minIsStrict&&this.maxIsStrict&&this.explicitPlotMin===this.explicitPlotMax){S(p,[this.explicitPlotMin],this.explicitPlotMin,this.explicitPlotMax);return p}f=L.call(this);if(this.usedDataMax>=10*this.usedDataMin)return f;d=T.apply(this,[i,n,s,a,o,l,r,h,c]);if(d.mainTickValues.length<2)return f;if(f.mainTickValues.length<2)return d;if(d.mainTickValues.length===f.mainTickValues.length){v.call(this,d);v.call(this,f);if(d.factor>f.factor)return d;return f}if(d.mainTickValues.length-1>=1.5*(f.mainTickValues.length-1)&&d.mainTickValues.length>f.mainTickValues.length)return d;return f},calculateTicks:function t(i,n,s,a,o,l,r,h,c){var u,p,d,f,g,m,M;Number.isNaN(+a)&&(a=null);Number.isNaN(+o)&&(o=null);if(n>s){u=n;n=s;s=u}if(null!==a&&null!==o&&a>o){u=a;a=o;o=u}if(n*s<=0){n=null===a?n:a;s=null===o?s:o}if(n>0&&s>0&&(null===a||a>0)&&(null===o||o>0)){p=e.calculateTicksLogPositive(i,n,s,a,o,l,r,h,c);p.sign=1;return p}if(n<0&&s<0&&(null===a||a<0)&&(null===o||o<0)){d=e.calculateTicksLogPositive(i,-s,-n,null===o?null:-o,null===a?null:-a,l,r,h,c);p={};p.plotMin=-d.plotMax;p.plotMax=-d.plotMin;g=d.mainTickValues;m=g?g.length:0;f=new Array(m);for(M=0;M<m;M++)f[M]=-g[m-1-M];p.mainTickValues=f;p.sign=-1;return p}return{plotMin:null===a?n:a,plotMax:null===o?s:o,mainTickValues:[]}}};return e}.apply(e,n),void 0!==s&&(t.exports=s))},2072:function(t,e,i){"use strict";var n,s;!(n=[i(1740),i(246)],s=function(t,e){var i;function n(t,e,i,n,s,a){var o,l,r=n[0].min,h=n[n.length-1].max,c=h-r;if(i){o=1-Math.max(t[0].y,t[1].y)/e;l=1-Math.min(t[0].y,t[1].y)/e}else if(s){o=1-Math.min(t[0].x,t[1].x)/e;l=1-Math.max(t[0].x,t[1].x)/e}else{o=Math.min(t[0].x,t[1].x)/e;l=Math.max(t[0].x,t[1].x)/e}o=0===o?r:o*c+r;l=1===l?h:l*c+r;return{idx:a,startVal:o,updateVal:l,isMax:true}}function s(t,e,i){var n,s=e[0].min,a=e[e.length-1].max,o=a-s;i&&(t=1-t);n=0===t?s:1===t?a:t*o+s;return n}function a(t,e,i){var n=[],s;for(var a=0;a<e.length;a++){s=e[a];n.push({idx:i,startVal:s.id[0],updateVal:s.id[1],isMax:s.isMax})}return n}function o(t){return!("measure"===t.colorMode&&"item"===t.boxType)}function l(t,i,s){i.selectionEnabled=!!t._mode.selectionEnabled&&!!s&&t._on&&!s.handler._disableSelections;if(!s||!i.selectionEnabled){t._watchers&&t._watchers.forEach(function(t){t()});t._watchers=null;return}if(t._watchers)return;t._watchers=[];t._watchers.push(i.$on("toggleSelect",function(e,n,l){s.initComponent(null,t);if(o(t._mode)){if("range"===t._mode.boxType){s.rangeStart();var r=a(i.viewItems,l,t._mode.rangeSelectionIndex);s.indices=[t._mode.rangeSelectionIndex];s.rangeUpdate(r,true);s.rangeEnd()}else{if(t.$scope.isLocked)t.selections.selectWhileLocked(t._mode.altMode?s.activeComponent.getAttributeDimensionInfo():void 0);else{var h=l.map(function(t){return t.id[0]});var c=[],u,p=l.length;for(u=0;u<p;u++)l[u].cacheItems&&(c=c.concat(l[u].cacheItems));s.updateFromItems(n,c,t._mode.altMode,h)}t._mode.altMode||t.selections._selectedShapes.length||t.selectionsApi.clear()}e.preventDefault()}}));t._watchers.push(i.$on("rangeStart",function(i,n,a){a&&s.initComponent(a.pagePoints[0]);t._formatter=t._colorMap.getValueFormatter()||e.getStaticFormatter();t._formatter.prepare();s.rangeStart(true);i.preventDefault()}));t._watchers.push(i.$on("rangeUpdate",function(e,i,a,o){var l=n(i,a,t.isVertical(),t.$scope.viewItems,t.yMirrorMode,t._mode.rangeSelectionIndex);s.indices=[t._mode.rangeSelectionIndex];o&&(0===o.index?l.startVal=o.value:l.updateVal=o.value);s.rangeUpdate([l]);e.preventDefault()}));t._watchers.push(i.$on("rangeEnd",function(t){s.rangeEnd();t.preventDefault()}));t._watchers.push(i.$on("rangeEditChanged",function(e,i){t._nrEditing=i?t._nrEditing+1:t._nrEditing-1;if(t._nrEditing>1){s.confirmEdit();t._nrEditing=1;e.targetScope.onEditBubble()}t._editing=t._nrEditing>0;s.setIsEditing(t._editing,t.$scope)}));t._watchers.push(i.$on("scrollPositionChanged",function(e,i){t._scrollPosition=i}));t._watchers.push(i.$on("selectWhileLocked",function(){t.selections&&t.selections.selectWhileLocked()}))}i=t.extend("ColorLegend",{init:function t(){var e=Array.prototype.slice.call(arguments);this._super.apply(this,e);this._nrEditing=0;this.$scope.options={};var i=this;this.formatValue=function(t){return i._formatter.formatValue(t)};this.$scope.positionToFormattedValue=function(t){return i.formatValue(s(t,i.$scope.viewItems,i.yMirrorMode&&!i.isVertical()))};this.$scope.positionToValue=function(t){return s(t,i.$scope.viewItems,i.yMirrorMode&&!i.isVertical())}},setData:function t(e){this._super(e);this.setProperties(e.legend)},getSelectionIndices:function t(){return this._colorMap.getSelectionIndices()},setSelectableShapes:function t(e){this._super(e);this._dataInvalid=true;this.invalidateProperties("Legend.setSelectableShapes")},setHasValidData:function t(e){this._super(e);if(!e){this.clear();this._clearScope(this.$scope)}},_updateProperties:function t(){if(!this._super())return false;this.$scope.selectionEnabled=!this.options._disableSelections&&this._mode.selectionEnabled&&this.$scope.interactionEnabled&&!!this.selections;this.$scope.selectionsApi=this.selectionsApi;this.$scope.selectionsCache=this._colorDataInfo&&this._colorDataInfo.altMode&&this.attributeSelectionsCache;l(this,this.$scope,this.selections)},on:function t(){this._super();l(this,this.$scope,this.selections)},off:function t(){this._super();l(this,this.$scope,this.selections)},getType:function t(){return this.selections},getSelectionMode:function t(){return this._mode.legend},clearSelection:function t(){this.$scope.$broadcast("clearSelection");this.$scope.$broadcast("cancelSelection")},cancelSelection:function t(){this.$scope.$broadcast("cancelSelection")},getScrollPosition:function t(){return this._scrollPosition},setScrollPosition:function t(e){this.$scope.explicitScrollPosition=e}});Object.defineProperties(i.prototype,{selections:{get:function t(){return this._selections},set:function t(e){this._selections=e;l(this,this.$scope,this.selections)}}});Object.defineProperty(i.prototype,"className",{value:"ColorLegend"});return i}.apply(e,n),void 0!==s&&(t.exports=s))},2073:function(t,e,i){"use strict";var n,s;!(n=[i(203)],s=function(t){var e=26,i=26,n=54,s=4,a=20,o=15,l=10,r=1,h=100;function c(t){return t.label?t.label:t.min&&t.max?t.min+" - "+(t.isMax?"":"<")+t.max:t.max?"<"+t.max:">"+t.min}function u(t){var e=0;while(t&&t.parent){e++;t=t.parent}return e}function p(t,e,i){var n={};if(t){var s,a,o=t.length,l,r;var h=u(t[0])-e;for(s=0;s<o;s++){l=t[s];if(!l)continue;a=0;while(a<h&&l.parent){l=l.parent;a--}r=!Number.isNaN(+i)&&i>=0?l.getAttributeDimensions(i):l.id;n[r]?n[r].push(t[s]):n[r]=[t[s]]}}return n}function d(o,l,u,d,f,g,m){var M=[],_,v,x=0,b=i,S,y,D,k,w=Math.min(h,o.length),I=0;g=g||0;k=p(l,g,m);u=u||{font:"13px 'QlikView Sans'"};D=t.getAverageLetterWidth(u.font)*a;d>(D+e)*o.length&&(D=d/o.length-e-r);var N={type:"text",fill:0,opacity:1,shape:{text:null,font:u.font,maxWidth:D,align:"left",baseline:"middle",maxNumLines:2}};for(_=0;_<w;_++){var C=o[_];v=C.color.toHex();N.shape.text=c(C);var T=t.measureTextObject(N);T.height=Math.ceil(T.height);x=Math.max(x,T.width);b=Math.max(b,T.height);var L=Math.floor(Math.max(T.height,i)*f);"range"===C.type?M.push({text:T.lines.join(" "),height:L,tipText:C.label,marker:"rect",color:v,isDimensionValue:true,locked:false,id:C.id,index:C.index,isMax:C.isMax,type:C.type}):M.push({text:T.lines.join(" "),tipText:C.label,height:L,marker:C.marker||"rect",color:v,isDimensionValue:true,locked:false,id:C.id,index:C.index,cacheItems:k[C.id],type:C.type});M[M.length-1].position=I;I+=M[M.length-1].height}S=b;y=Math.max(x+e,n);return{viewItems:M,cellHeight:S,cellWidth:y+r+2*s}}function f(e,i,n){var s=[],a,o=0;t.setFont(i.font);for(a=e.length-1;a>=0;a--){var r=e[a];var h={colorFrom:r.grad[0].toHex(),colorTo:r.grad[1].toHex(),maxText:n.formatValue(r.max),minText:n.formatValue(r.min),max:r.id[0],min:r.id[1],limits:r.limits};s.push(h)}var c=e.length-1;var u=s[0].max>s[c].max?s[0].maxText:s[c].maxText;var p=s[0].min<s[c].min?s[0].minText:s[c].minText;o=Math.max(o,t.getTextWidth(u.substr(0,l)),t.getTextWidth(p.substr(0,l)));return{viewItems:s,labelHeight:t.getFontHeight(i.font),maxLabelWidth:o+1}}function g(e,i){var n=t.getAverageLetterWidth(i.font)*o,s={type:"text",fill:0,opacity:1,shape:{text:e,font:i.font,maxWidth:n,align:"left",baseline:"middle",maxNumLines:2}};var a=t.measureTextObject(s);return{text:a.lines.join(" "),fullText:e,height:a.height,width:a.width+r}}return{prepareDiscreteData:d,prepareContinousData:f,prepareLegendTitle:g,Modes:{DISCRETE:"discrete",CONTINOUS:"continous"},constants:{PADDING:s}}}.apply(e,n),void 0!==s&&(t.exports=s))},2074:function(t,e){t.exports='<div qva-direction x-dir-setting="{{options.yMirrorMode ? \'rtl\' : \'ltr\'}}" class="color-legend">\n    <div qv-discrete-legend\n         ng-if="discrete && visible"\n         view-items="viewItems"\n         options="options">\n    </div>\n\n\t<div qv-continous-legend\n\t\t ng-if="!discrete && visible"\n\t\t view-items="viewItems"\n\t\t options="options"></div>\n</div>\n'},2075:function(t,e,i){"use strict";var n,s;!(n=[i(96),i(48),i(2076),i(146),i(302)],s=function(t,e,i,n){var s=".legendRangeSelection",a=Math.min,o=Math.max;function l(t,e){if(!t||t.length!==e){var i=[];var n=1/e*2;for(var s=0;s<e/2;s++){i.push(n*s);i.push(n*(s+1))}return i}return t}function r(t,e,i,n){var s="";n=l(n,t.length);var a=t.length;for(var o=0;o<a-1;o+=2){s+=", "+t[o]+" "+100*n[o]+"%";s+=", "+t[o+1]+" "+100*n[o+1]+"%"}var r=i?e?"bottom":"top":e?"left":"right";return"background: linear-gradient(to "+r+s+")"}function h(t,e,i){return e?t[0][i]>t[1][i]?0:1:t[0][i]<t[1][i]?0:1}function c(t){return["left","bottom"].contains(t)}function u(t,e,i){var n=i?e.height():e.width(),s=i?"y":"x";t[0][s]=a(o(t[0][s],0),n);t[1][s]=a(o(t[1][s],0),n)}function p(t,e,i,s){var a=[];if(i){a[e]=new n(t[e].x,t[e].y+s);a[1^e]=t[1^e]}else{a[e]=new n(t[e].x+s,t[e].y);a[1^e]=t[1^e]}return a}function d(t,e){var i=t.find(".ccl-axis");return e?i.outerWidth():i.outerHeight()}function f(t,e){return{vertical:t.options.vertical,direction:t.options.vertical?"y":"x",grt:t.options.vertical?e:!e}}e.directive("qvContinousLegend",function(){return{template:i,replace:true,scope:true,link:function e(i,a){var o=false;var l={gradient:a.find(".ccl-gradient"),rangeElement:a.find(".ccl-range"),rangeInner:a.find(".ccl-range-inner"),axisCover:a.find(".ccl-axis-cover"),nearEdge:a.find(".ccl-near-edge"),farEdge:a.find(".ccl-far-edge")};i.fakeAxis={getPositionOfValue:function t(e){var n=i.viewItems[0].min,s=i.viewItems[i.viewItems.length-1].max,a=(e-n)/(s-n),o=i.options.vertical?l.rangeElement.height():l.rangeElement.width(),r=i.options.vertical||!i.options.vertical&&i.options.yMirrorMode;r&&(a=1-a);return a*o},isDiscrete:function t(){return false}};i.activeOptions={far:false,near:false,cover:false};i.values={start:{},end:{}};i.setRangeStyle=function(t){if(!t||2!==t.length)return;i.relevantSize=d(a,i.options.vertical);var e=t[0],n=t[1],s=i.options.vertical?"y":"x";i.options.vertical?i.rangeStyle={height:Math.abs(e[s]-n[s]),top:Math.min(e[s],n[s])}:i.rangeStyle={width:Math.abs(e[s]-n[s]),left:Math.min(e[s],n[s])}};i.updateHandleValues=function(t,e){u(t,l.rangeElement,i.options.vertical);i.setRangeStyle(t);if(i.active){var n=i.options.vertical?"y":"x",s=i.options.vertical?l.rangeElement.height():l.rangeElement.width(),a=t[h(i.handlePoints,i.options.vertical,n)],o=t[h(i.handlePoints,!i.options.vertical,n)];i.cclNearValueLabel=g(a);i.values.start.text=i.cclNearValueLabel;i.cclFarValueLabel=g(o);i.values.end.text=i.cclFarValueLabel;if(e){if(e.switch){var r=i.values.start.value;i.values.start.value=i.values.end.value;i.values.end.value=r}var p=i.viewItems[0].min,d=i.viewItems[i.viewItems.length-1].max;0===e.index?i.values.start.value=Math.max(Math.min(e.value,d),p):i.values.end.value=Math.max(Math.min(e.value,d),p)}else if(i.options.vertical){i.values.start.value=i.positionToValue((s-a[n])/s);i.values.end.value=i.positionToValue((s-o[n])/s)}else{i.values.start.value=i.positionToValue(a[n]/s);i.values.end.value=i.positionToValue(o[n]/s)}}if(i.active&&i.options){var f=c(i.options.dock);I(i.options.vertical,f,false);I(i.options.vertical,f,true)}};i.updateHandlePoints=function(t){if(t){i.updateHandleValues(t);D(i.handlePoints)}};i.$on("rangeUpdate",function(t,e,n,s){if(!Number.isNaN(+n))return;i.handlePoints=[e[0],e[1]];i.updateHandleValues(i.handlePoints,s);i.$digest();D(e,s);t.stopPropagation()});i.$watchCollection("[viewItems, options.yMirrorMode, options.vertical]",function(t){var e=t[0],n=t[1],s=t[2],a=n&&!s;if(e&&e.length){var o=[];var l=[];for(var h=0;h<e.length;h++){o.push(e[h].colorTo);o.push(e[h].colorFrom);if(e[h].limits){l.push(e[h].limits[0]);l.push(e[h].limits[1])}}i.cclGradientStyle=r(o,a,s,l);var c=[e[0].minText,e[e.length-1].maxText];s&&c.reverse();i.axisValues=c}});function g(t){if(i.positionToFormattedValue&&t){var e,n;if(i.options.vertical){e=l.rangeElement.height();n=1-t.y/e}else{e=l.rangeElement.width();n=t.x/e}return i.positionToFormattedValue(n)}return t+""}var m={right:"",bottom:""},M={right:"0px",bottom:""},_={bottom:"0px",right:""};i.$watchCollection("[options.vertical, options.dock, relevantSize]",function(t){var e=t[0],n=c(t[1]),s=t[2];i.cclOrientationClass={vertical:e,horizontal:!e,near:n,far:!n};if(n){i.cclCoverStyle=e?{left:"0px",width:s+"px"}:{bottom:"0px",height:s+"px"};i.cclBubbleNearStyle=e?m:_;i.cclBubbleFarStyle=e?m:_}else{i.cclCoverStyle=e?{right:"0px",width:s+"px"}:{top:"0px",height:s+"px"};i.cclBubbleNearStyle=e?M:m;i.cclBubbleFarStyle=e?M:m}});v.call(this);i.$watch("selectionEnabled",function(t){t?v.call():b.call()});i.$on("$destroy",function(){b.call()});i.$on("cancelSelection",function(){i.active=false});function v(){if(o||!i.selectionEnabled)return;o=true;var e="hey",a;t(l.gradient[0]).swipe({id:s,options:{preventDefault:true},start:function e(n,s){if(i.isLocked)return;var o=s.pagePoints[0];a=w(o.x,o.y);t.preventGestures(this.gestureHandler);S(n,s)},update:function t(e,n){if(i.isLocked)return;i.active=true;i.swiping=true;var s=n.pagePoints[0];i.handlePoints=[a,w(s.x,s.y)];i.updateHandlePoints(i.handlePoints);i.$digest()},end:function t(){if(i.isLocked){y();return}i.swiping=false;k()}});t(l.axisCover[0]).tap({id:s,options:{preventDefault:true},start:function e(){t.preventGestures(this.gestureHandler)}}).swipe({id:s,options:{preventDefault:true},start:function n(s,a){e=i.handlePoints;t.preventGestures(this.gestureHandler);S(s,a);i.activeOptions.cover=true},update:function t(s,a){var o=i.options.vertical?a.swipe.deltaY:0,l=i.options.vertical?0:a.swipe.deltaX;i.handlePoints=[new n(e[0].x+l,e[0].y+o),new n(e[1].x+l,e[1].y+o)];i.updateHandlePoints(i.handlePoints);i.$digest()},end:function t(){k();i.activeOptions.cover=false}});if(!t.utils.touch){x(l.farEdge[0],false);x(l.nearEdge[0],true)}i.$broadcast("on")}function x(e,n){var a,o,l=f(i,n),r;t(e).tap({id:s,options:{preventDefault:true},start:function e(){t.preventGestures(this.gestureHandler)}}).swipe({id:s,options:{radiusThreshold:0},start:function e(s,r){l=f(i,n);o=h(i.handlePoints,l.grt,l.direction);a=i.handlePoints;t.preventGestures(this.gestureHandler);S(s,r)},update:function t(e,n){i.handlePoints=p(a,o,l.vertical,l.vertical?n.swipe.deltaY:n.swipe.deltaX);i.updateHandlePoints(i.handlePoints);i.activeOptions.near=false;i.activeOptions.far=false;r=h(i.handlePoints,l.grt,l.direction)?"far":"near";i.activeOptions[r]=true;i.$digest()},end:function t(){k(i.handlePoints);i.activeOptions.far=false;i.activeOptions.near=false;i.$digest()}})}function b(){i.active=false;Object.keys(l).forEach(function(e){t(l[e][0]).off("*",s)});o=false;i.$broadcast("off")}function S(t,e){i.$emit("rangeStart",t,e)}function y(){i.$emit("selectWhileLocked")}function D(t,e){i.$emit("rangeUpdate",t,i.options.vertical?l.rangeElement.height():l.rangeElement.width(),e)}function k(){var t;if(i.options.vertical&&i.handlePoints[0].y<i.handlePoints[1].y){t=[];t[1]=i.handlePoints[0];t[0]=i.handlePoints[1];i.handlePoints=t}else if(!i.options.vertical&&i.handlePoints[0].x>i.handlePoints[1].x){t=[];t[1]=i.handlePoints[0];t[0]=i.handlePoints[1];i.handlePoints=t}i.$emit("rangeEnd")}function w(t,e){var i=l.rangeElement.offset();return new n(t-i.left,e-i.top)}function I(t,e,n){if(!l.nearBubbleWrapper){l.nearBubbleWrapper=a.find(".ccl-outer-bubble-wrapper .bubble-wrapper.near");l.nearBubble=a.find(".ccl-outer-bubble-wrapper .bubble-wrapper.near .bubble");l.farBubbleWrapper=a.find(".ccl-outer-bubble-wrapper .bubble-wrapper.far");l.farBubble=a.find(".ccl-outer-bubble-wrapper .bubble-wrapper.far .bubble")}l.nearBubbleWrapper.css(i.cclBubbleNearStyle);l.farBubbleWrapper.css(i.cclBubbleFarStyle);var s=N(t,n);s=s>0?s:0;n?l.nearBubble.css({"margin-left":Math.round(s)+"px"}):l.farBubble.css({"margin-right":Math.round(s)+"px"})}function N(t,e){return t?0:e?a.offset().left-(l.nearBubbleWrapper.offset().left-.5*l.nearBubbleWrapper.width()-5):l.farBubbleWrapper.offset().left-a.offset().left+1.5*l.farBubbleWrapper.width()+5-a.width()}}}})}.apply(e,n),void 0!==s&&(t.exports=s))},2076:function(t,e){t.exports='<div class="qv-continous-color-legend"\n\t ng-class="cclOrientationClass"\n\t ng-style="options.titleStyle">\n\t<div class="cl-title ccl-title"\n\t\t ng-if="options.legendTitle"\n\t\t ng-class="cclOrientationClass">\n\t\t<div qva-direction x-dir-text="{{options.legendTitle}}" x-dir-setting="{{options.yMirrorMode ? \'rtl\' : \'ltr\'}}" class="ccl-title-inner"\n\t\t\t title="{{options.legendTitleTooltip}}">{{options.legendTitle}}</div>\n\t</div>\n    <div class="ccl-gradient"\n\t\t ng-class="cclOrientationClass"\n\t\t tid="ccl.gradient">\n        <div class="ccl-axis" ng-class="cclOrientationClass"  ng-style="options.labelStyle">\n\t\t\t<div ng-repeat="axisVal in axisValues track by $index" class="ccl-axis-value" ng-class="{\'first\': $first, \'last\':$last}" dir="ltr">{{axisVal}}</div>\n            \x3c!--\n                <div class="ccl-axis-top-value">{{axisValues[1]}}</div>\n                <div class="ccl-axis-bottom-value">{{axisValues[0]}}</div>\n                --\x3e\n        </div>\n\t\t<div class="ccl-gradient-color"\n\t\t\t ng-class="cclOrientationClass"\n\t\t\t qva-apply-style="cclGradientStyle">\n\t\t</div>\n\t\t<div dir="ltr" class="ccl-range"\n\t\t\t ng-show="selectionEnabled && !isLocked"\n\t\t\t ng-style="cclRangeStyle"\n\t\t\t ng-class="cclOrientationClass">\n\t\t\t<div ng-show="active" class="ccl-range-inner"\n\t\t\t\t ng-class="cclOrientationClass"\n\t\t\t\t ng-style="rangeStyle">\n\t\t\t\t<div class="ccl-axis-cover"\n\t\t\t\t\t ng-style="active && cclCoverStyle"\n\t\t\t\t\t tid="ccl.cover"\n\t\t\t\t\t ng-class="{\'active\' : activeOptions.cover}"></div>\n\t\t\t\t<div class="ccl-far-edge"\n\t\t\t\t\t tid="ccl.edge.far"\n\t\t\t\t\t ng-class="{\'active\' : activeOptions.far}">\n\t\t\t\t</div>\n\t\t\t\t<div class="ccl-near-edge"\n\t\t\t\t\t tid="ccl.edge.near"\n\t\t\t\t\t ng-class="{\'active\' : activeOptions.near}">\n\t\t\t\t</div>\n\t\t\t\t<div class="ccl-outer-bubble-wrapper"\n\t\t\t\t\t ng-class="active && cclOrientationClass">\n                    <qva-range-selection-bubble visible="active" active-component="fakeAxis" handle-points="handlePoints" horizontal="!options.vertical" far="false" data="values.start" active="activeOptions.near" tid="ccl.bubble.near"> </qva-range-selection-bubble>\n                    <qva-range-selection-bubble visible="active" active-component="fakeAxis" handle-points="handlePoints" horizontal="!options.vertical" far="true" data="values.end" active="activeOptions.far" tid="ccl.bubble.far"> </qva-range-selection-bubble>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},2077:function(t,e,i){"use strict";var n,s;!(n=[i(119),i(2078),i(96),i(164),i(159),i(1128)],s=function(t,e,i,n,s){var a=5,o=10,l=".discretelegend";t.directive("qvDiscreteLegend",["$timeout",function(t){return{template:e,replace:true,scope:true,link:function e(r,h){var c=h.find(".dcl-flex");r.$watch("viewItems",function(t){t&&t.forEach(function(t){var e={},i=Array.isArray(t.marker)?t.marker:[t.marker];for(var n=0;n<i.length;n++)switch(i[n]){case"line":case"!line":e["glyph-line"]=true;break;case"triangle":case"!triangle":e["glyph-triangle"]=true;break;case"inverse-triangle":case"!inverse-triangle":e["glyph-inverse-triangle"]=true;break;case"diamond":case"!diamond":e["glyph-diamond"]=true;break;case"circle":case"!circle":e["glyph-circle"]=true;break;case"rect":case"!rect":default:e["glyph-rect"]=true}t.markerClass=e})});r.callbacks&&(r.callbacks.paintLegend=function(){u();p()});r.$on("clearSelection",function(){if(r.viewItems){r.selectedValues=[];for(var t=0;t<r.viewItems.length;t++){var e=r.viewItems[t];e.selected=false}}});function u(){if(r.viewItems){r.selectedValues=[];for(var t=0;t<r.viewItems.length;t++){var e=r.viewItems[t];"dimension"===e.type&&(r.selectionsCache?e.selected=r.selectionsCache.isValueSelected(e.id[0]):"dimension"===e.type&&e.cacheItems&&e.cacheItems[0]&&(e.selected=e.cacheItems[0].selected))}}r.$digest()}r.select=function(t,e){if("others"!==e.type){"range"===e.type&&(e.selected=!e.selected);r.$emit("toggleSelect",t,[e]);"dimension"===e.type&&r.selectionsCache&&(e.selected=r.selectionsCache.isValueSelected(e.id[0]))}};r.$on("$destroy",function(){D(h)});r.$watch("explicitScrollPosition",function(t){r.explicitScrollPosition=t});function p(){if(void 0===r.explicitScrollPosition)x(r.options.vertical,true);else{var t=d(r.explicitScrollPosition,r.options.vertical);r.options.vertical?c.scrollTop(t):c.scrollLeft(t)}r.options.vertical?r.overflow=c[0].scrollHeight-c.height()>1:r.overflow=c[0].scrollWidth-c.width()>1}y(h,r);function d(t,e){var i=r.viewItems;if(!i)return 0;return e?i[t].position:t*r.options.cellWidth}function f(){return r.options.vertical?c.scrollTop():c.scrollLeft()}function g(t){m(f(),t*(r.options.vertical?1:-1))}function m(t,e,i){var n;n=r.options.vertical?{scrollTop:t+e+"px"}:{scrollLeft:s.getScrollPos("rtl"===r.options.direction,t,e)+"px"};c.animate(n,i?200:0)}function M(t){if(t&&t.some(function(t){return void 0===t.position})){t[0].position=0;for(var e=1;e<t.length;e++)t[e].position=t[e-1].position+t[e-1].height}}function _(t,e){for(var i=0;i<e.length;i++)if(e[i].position+e[i].height/2>=t)return i;return 0}function v(t,e){var i=r.viewItems;if(!i)return null;var n=0,a,o,l=0;if(e){M(i);var h=c[0].scrollHeight-c.height();if(t>h){l=_(t,i);i[l].position<h&&l++}else l=_(t,i);n=i[l].position;o=l<=0;a=t>=h}else{n=Math.round(t/r.options.cellWidth)*r.options.cellWidth;l=Math.abs(Math.round(t/r.options.cellWidth));if(t+c.width()>=c[0].scrollWidth){n=t;l++}if("rtl"!==r.options.direction||"default"===s.scrollImplementation){a=c.width()/r.options.cellWidth>=i.length/Math.floor(c.height()/r.options.cellHeight)-l;o=n<=0}else{o=c.width()/r.options.cellWidth>=i.length/Math.floor(c.height()/r.options.cellHeight)-l;a=l>=0}}return{position:n,index:l,end:a,start:o}}function x(e,i,n){n=n||0;var s=f(),a=v(s+n,e);if(a){if(a.position!==s){c.stop(true);m(a.position,0,i)}t(function(){r.scrollAtEnd=a.end;r.scrollAtStart=a.start});r.$emit("scrollPositionChanged",a.index)}}function b(t,e,n){var s=false;var c=h.find(t).first();i(h.find(t)[0]).longtap({id:l,options:{timeThreshold:1e4},update:function t(l,h){if(h.percentage>2&&r.interactionEnabled){S(e*(n?a:o));s=true;c.addClass("lui-active");i.preventGestures(this.gestureHandler)}},end:function t(){s=false;c.removeClass("lui-active");i.preventGestures(this.gestureHandler)},cancel:function t(){c.removeClass("lui-active");i.preventGestures(this.gestureHandler)}}).tap({end:function t(){if(r.interactionEnabled){if(s)x(n,true);else{S(e*(n?r.options.cellHeight:r.options.cellWidth));x(n,false)}s=false}}})}function S(t){g(t)}function y(t,e){var s=null;var a=n.throttle(function(t){if(e.interactionEnabled){var i=n.getMouseWheelData(t.originalEvent),s;s=(i.delta>0?-1:1)*(e.options.vertical?e.options.cellHeight:e.options.cellWidth);e.options.yMirrorMode&&!e.options.vertical&&(s=-s);x(e.options.vertical,false,s)}},20);c.on("mousewheel"+l+" DOMMouseScroll"+l,function(t){if(e.overflow){a(t);t.preventDefault();t.stopPropagation()}});b(".dcl-up",-1,true);b(".dcl-down",1,true);b(".dcl-left",-1,false);b(".dcl-right",1,false);i(c[0]).swipe({options:{useMomentum:true,inertia:.7,preventDefault:true},start:function t(n){if(e.interactionEnabled){s=f();e.isScrolling=true;i.preventGestures(this.gestureHandler);n.preventDefault()}},update:function t(i,n){if(null!==s&&n.swipe){var a=n.swipe.distance;e.options.vertical?"up"===n.swipe.direction?m(s,-a):"down"===n.swipe.direction&&m(s,a):"left"===n.swipe.direction?m(s,a):"right"===n.swipe.direction&&m(s,-a)}},end:function t(){if(null!==s){x(e.options.vertical,true);e.isScrolling=false;s=null}}})}function D(t){i(c[0]).off();i(t.find(".dcl-up")[0]).off();i(t.find(".dcl-down")[0]).off();i(t.find(".dcl-left")[0]).off();i(t.find(".dcl-right")[0]).off()}}}}])}.apply(e,n),void 0!==s&&(t.exports=s))},2078:function(t,e){t.exports='<div class="qv-discrete-color-legend"\n\t ng-class="{ \'vertical\': options.vertical }"\n\t ng-style="options.labelStyle">\n\t<div class="cl-title dcl-title"\n\t\t ng-if="options.legendTitle && options.legendTitle.length"\n\t\t ng-style="options.titleStyle"\n\t\t ng-class="{\'vertical\': options.vertical }">\n\t\t<div class="dcl-title-inner" title="{{options.legendTitleTooltip}}" qva-direction x-dir-text="{{options.legendTitle}}" x-dir-setting="{{options.yMirrorMode ? \'rtl\' : \'ltr\'}}">{{options.legendTitle}}</div>\n\t</div>\n\t<div class="dcl-flex" ng-class="{\'align\': align, \'vertical\': options.vertical, \'in-selections\': selectionsApi.active }"\n\t\t qv-selections-toggle-dimension-value="{ selector: \'.color-item\', itemKey: \'item\' }"\n\t\t qv-selections-on-toggle-dimension-value="selectionEnabled && !isScrolling && select($event, item)">\n\t\t<div ng-repeat="item in viewItems track by $index"\n\t\t\t ng-style="{\'height\':item.height,  \'width\': (options.vertical ? \'auto\' : options.cellWidth)}"\n\t\t\t class="color-item" ng-class="{\'selected\': item.selected}"\n\t\t\t tid="dcl.item">\n\t\t\t<div class="marker">\n\t\t\t\t<div ng-style="item.markerClass[\'glyph-triangle\']  ? {\'border-bottom-color\': item.color} : ( item.markerClass[\'glyph-inverse-triangle\'] ? {\'border-top-color\': item.color} : {background: item.color} )" ng-class="item.markerClass"></div>\n\t\t\t</div>\n\t\t\t<div qva-direction x-dir-text="{{item.text}}" class="text"\n\t\t\t\t title="{{item.tipText}}">{{item.text}}</div>\n\t\t</div>\n\t</div>\n\t<div class="dcl-buttons-v" ng-show="options.vertical && overflow">\n\t\t\x3c!--DOWN--\x3e\n\t\t<button class="dcl-down lui-fade-button" ng-disabled="!interactionEnabled || scrollAtEnd" tid="dcl.down">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--triangle-bottom"></span>\n\t\t</button>\n\t\t\x3c!--UP--\x3e\n\t\t<button class="dcl-up lui-fade-button" ng-disabled="!interactionEnabled || scrollAtStart" tid="dcl.up">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--triangle-top"></span>\n\t\t</button>\n\t</div>\n\t<div class="dcl-buttons-h" ng-show="!options.vertical && overflow">\n\t\t\x3c!--RIGHT--\x3e\n\t\t<button class="dcl-right lui-fade-button" ng-disabled="!interactionEnabled || scrollAtEnd" tid="dcl.right">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--triangle-right"></span>\n\t\t</button>\n\t\t\x3c!--LEFT--\x3e\n\t\t<button class="dcl-left lui-fade-button" ng-disabled="!interactionEnabled || scrollAtStart" tid="dcl.left">\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--triangle-left"></span>\n\t\t</button>\n\t</div>\n</div>\n'},2079:function(t,e,i){"use strict";var n,s;!(n=[i(2080)],s=function(t){return t.extend({init:function t(e,i,n){this._super("propertyChange");this.property=e;this.oldValue=i;this.newValue=n}})}.apply(e,n),void 0!==s&&(t.exports=s))},2080:function(t,e,i){"use strict";var n,s;!(n=[i(92)],s=function(t){return t.extend({init:function t(e){this._type=e},getType:function t(){return this._type}})}.apply(e,n),void 0!==s&&(t.exports=s))},2081:function(t,e,i){"use strict";var n,s;!(n=[i(1742)],s=function(t){var e=t.extend("AttributeSelectionsCache",{isCacheItemSelected:function t(e){var i=e.getAttributeDimensions();return i&&1===i.length&&this.isValueSelected(i[0])}});return e}.apply(e,n),void 0!==s&&(t.exports=s))},2082:function(t,e,i){"use strict";var n,s;!(n=[],s=function(){function t(t){this.collection=t||[]}t.prototype={clear:function t(){this.collection.forEach(function(t){t.clear()})},add:function t(e){-1===this.collection.indexOf(e)&&this.collection.push(e)},remove:function t(e){var i=this.collection.indexOf(e);-1!==i&&this.collection.splice(i,1)},isCacheItemSelected:function t(e){return this.collection.some(function(t){return t.isCacheItemSelected(e)})}};return t}.apply(e,n),void 0!==s&&(t.exports=s))},2083:function(t,e,i){"use strict";var n,s;!(n=[i(48),i(2084),i(91)],s=function(t,e,i){t.directive("qvaChartDisclaimer",function(){return{template:e,scope:{attributes:"=",visible:"=",direction:"="},link:function t(e){e.languageString=i.get("Object.Disclaimer.LimitedData")}}})}.apply(e,n),void 0!==s&&(t.exports=s))},2084:function(t,e){t.exports='<div class="qv-viz-disclaimer"\n\t ng-if="visible && (attributes.limitedData || attributes.onlyNullColor || attributes.hasNegativeOrZeroData || attributes.hasDataRangeIncludingZero) && !attributes.doesNotFit"\n\t style="font-size: 1em;"\n\t qva-direction x-dir-setting="{{direction}}" x-dir-text="{{languageString}}">\n\t<span class="ltr-star">*</span>\n\t<span ng-if="attributes.limitedData" q-translation="Object.Disclaimer.LimitedData" q-title-translation="Object.Disclaimer.LimitedData"></span>\n\t<span ng-if="attributes.onlyNullColor" q-translation="Object.Disclaimer.OnlyNanColor" q-title-translation="Object.Disclaimer.OnlyNanColor"></span>\n\t<span ng-if="attributes.hasNegativeOrZeroData" q-translation="Object.Disclaimer.NegativeOrZeroValues" q-title-translation="Object.Disclaimer.NegativeOrZeroValues"></span>\n\t<span ng-if="attributes.hasDataRangeIncludingZero" q-translation="Object.Disclaimer.DataRangeIncludingZero" q-title-translation="Object.Disclaimer.DataRangeIncludingZero"></span>\n\t<span class="rtl-star">*</span>\n</div>\n'},299:function(t,e,i){"use strict";var n,s;!(n=[i(198)],s=function(t){var e;e=t.extend("HyperCube",{init:function t(e,i){this._super(e,"/qHyperCubeDef",i);this.cacheCube.setMethodName("getHyperCubeData")},updateCache:function t(e){if(e&&e.qHyperCube){this.cacheCube.set(e.qHyperCube.qDataPages);this.cacheCube.setCubeSize(e.qHyperCube.qSize)}else this.cacheCube.clear()},getData:function t(e,i){return i?this.model.getHyperCubeData(i,e):this.cacheCube.getData(e)},getHyperCubeBinnedData:function t(e,i,n,s){return this.model.getHyperCubeBinnedData(this.path,e,{width:0,height:0},i,n,s,0)},getHyperCubeContinousData:function t(e,i){return this.model.getHyperCubeContinuousData(this.path,e,i)},getReducedData:function t(e,i,n){n=void 0!==n?n:"D1";return this.model.getHyperCubeReducedData(this.path,e,i,n)},selectDimensionRange:function t(e){var i=e.map(function(t){return{qDimIx:t.idx,qRange:{qMin:t.range.min,qMax:t.range.max,qMinInclEq:true,qMaxInclEq:t.range.maxIncluded}}});return this.model.selectHyperCubeContinuousRange(this.path,i)},selectRange:function t(e,i,n){var s;i=!!i;n=n||[];s=e.map(function(t){return{qMeasureIx:t.idx,qRange:{qMin:t.range.min,qMax:t.range.max,qMinInclEq:false!==t.range.minInclEq,qMaxInclEq:false!==t.range.maxInclEq}}});return this.model.rangeSelectHyperCubeValues(this.path,s,n,i)},selectRects:function t(e,i){var n;i=i||[];n=e.map(function(t){var e=t[0],n=t[1];return{qRanges:[{qMeasureIx:e.idx,qRange:{qMin:e.range.min,qMax:e.range.max,qMinInclEq:false!==e.range.minInclEq,qMaxInclEq:false!==e.range.maxInclEq}},{qMeasureIx:n.idx,qRange:{qMin:n.range.min,qMax:n.range.max,qMinInclEq:false!==n.range.minInclEq,qMaxInclEq:false!==n.range.maxInclEq}}],qColumnToSelect:i}});return this.model.multiRangeSelectHyperCubeValues(this.path,n,false)},select:function t(e,i){return this.model.selectHyperCubeCells(this.path,e,i)},selectValues:function t(e,i,n,s){return this.model.selectHyperCubeValues(s||this.path,e,i,n)},getProperties:function t(){return this.model.getProperties()},getDimensionInfos:function t(){return this.model.layout.qHyperCube.qDimensionInfo},getMeasureInfos:function t(){return this.model.layout.qHyperCube.qMeasureInfo},clearSelections:function t(){return this.model.resetMadeSelections()},hasSelections:function t(){return this.model.layout.qSelectionInfo.qMadeSelections}});return e}.apply(e,n),void 0!==s&&(t.exports=s))},410:function(t,e,i){"use strict";var n,s;!(n=[i(1495),i(1304),i(2070),i(486),i(90),i(1305),i(1034),i(104),i(401)],s=function(t,e,i,n,s,a,o){var l,r=1,h={autoStart:false,duration:500,easing:"easeInOut"};function c(t){return t.some(function(t){return null===t})}function u(t,e){var i=0,n=t[this._isVertical?"height":"width"],s=0,a,o,l=this._style;this._isVertical?n-=this._padding.top+this._padding.bottom:n-=this._padding.left+this._padding.right;if(this.isRadial())i=2*Math.sin(this._relevantAngle/4)*this._fontHeight*l.label.lineHeight;else if(this._isVertical){this._calculateScale(n);a=this._formatter;o=this._renderer;if(a){var r=this._scale.getValues().mainValues.map(function(t){return o.getTextWidth(a.formatValue(t)+"ml",l.label.font)});s=Math.max.apply(null,r.length?r:[0])}i=Math.min(e[this._isVertical?"width":"height"]/3,s<this.outerRect.width/2?s:this.outerRect.width/3)}else i=this._fontHeight*l.label.lineHeight;this._wantedLabelSpacePerLevel=i;return i}var p={onProgress:function t(){this._updateTickPositions();this.invalidateDisplay();this.fire("changed")},on:function t(){this._tickTween.on();this._linearTween.on()},off:function t(){this._tickTween.off();this._linearTween.off()},to:function t(){this._linearTween.stop().to({plotMin:this._scale.plotMin,plotMax:this._scale.plotMax,plotRange:this._scale.plotRange});this._tickTween.stop().to({ticks:this.ticks})},from:function t(){this._linearTween.stop().from({plotMin:this._scale.plotMin,plotMax:this._scale.plotMax,plotRange:this._scale.plotRange});this._tickTween.stop().from({ticks:this.ticks})},start:function t(){if(this._useTransition&&this._linearTween.willStart()){this._tickTween.start();this._linearTween.start()}},end:function t(){if(this._useTransition){this._tickTween.end();this._linearTween.end()}},stop:function t(){this._tickTween.stop();this._linearTween.stop()}};function d(){if(this._useTimeScaling)return 0;var t,e,i,n;t=this._formatter;if(t){e=t.pattern;i=t.thousandDelimiter;n=t.decimalDelimiter;switch(e){case"#"+i+"##0":return 1;case"#"+i+"##0"+n+"0":return.1;case"#"+i+"##0"+n+"00":case"0%":return.01;case"0"+n+"0%":return.001;case"0"+n+"00%":return 1e-4}return 0}}l=t.extend("ContinuousAxis",{init:function t(){this._super.apply(this,[].slice.call(arguments));this._scaleDetails={showExplicitMinMax:true,niceNumberEnabled:true,tickMultiplier:1};this.ticks=[];this.minorTicks=null;this._tickDates=[];this._minorTickDates=[];this._explicitLabels=[];this._defaultFormatter={formatValue:function t(e){return String(e)},format:function t(e){return String(e)}};this._formatter=this._defaultFormatter;this._useLogScaleIfPossible=false;this._cacheItems=null;this._useTransition=false;this._selectedRanges=[];this._initScales();this._linearTween=new a(this._scale,{},h).progress(p.onProgress.bind(this));this._tickTween=new a(this,{},h)},_initScales:function t(){this._logarithmicScale=new i;this._linearScale=new e;this._scale=this._linearScale},setSelectableShapes:function t(e){this._cacheItems=e},getDiscreteSpacing:function t(){return 4},updateSize:function t(){this._super();this._calculationSize=this._plotSize;this._updateScaleAndTicks();this._scale.setSize(this._plotSize);this._updateTickPositions();p.to.call(this);if(this._changed){this._changed=false;p.start.call(this)}else p.end.call(this)},getPlotSize:function t(){return this._plotSize},calculateValuePositionMappingInfo:function t(){this._scale.setSize(this._plotSize);this._scale._calculationSize=this._plotSize;this._scale.calculateLimits()},setUseTransition:function t(e){this._super(e);p[e?"on":"off"].call(this)},preRelevantSizeCalculation:function t(){this._super();this._areLabelsVisible=this.isVisible(this._layoutMode)&&this._showLabels},calculatePreliminaryLabelSpace:function t(e){var i=0;this._areLabelsVisible&&(i=u.call(this,e,e));return{relevantLabelSize:i||0,relevantSpacing:0}},calculateLabelSpace:function t(e,i,n){var s=0;this._calculateScale(this._calculationSize);this._areLabelsVisible&&(s=u.call(this,n||e,e));return{relevantLabelSize:s||0,relevantSpacing:0}},_getLabels:function t(e,i){var n=e?e.length:0,s,a=[],l=[],h=[],c=[],u=[],p=[],d,f;e.forEach(function(t){d=this.getPositionOfValue(t.value);d=o.roundToHalf(d);c.push(d);h.push(t.value);u.push("opacity"in t?t.opacity:1);a.push(t.value+"");l.push(t.qualifiedLabel)},this);if(n<=1)p=[this._plotSize];else if(i){f=this.yMirrorMode?this._padding.left+this._plotSize-c[0]:c[0];p[0]=Math.abs(c[1]-c[0])+f;for(s=1;s<e.length-1;s++)p.push(Math.abs(c[s]-c[s-1]));p[s]=this.yMirrorMode?c[s]:this._padding.left+this._plotSize-c[s]}else{f=this.yMirrorMode?this._padding.left+this._plotSize-c[0]:c[0];p[0]=Math.abs(c[1]-c[0])/2+f;for(s=1;s<e.length-1;s++)p.push(Math.abs(c[s]-c[s-1])/2+Math.abs(c[s+1]-c[s])/2);f=this.yMirrorMode?c[s]:this._padding.left+this._plotSize-c[s];p[s]=Math.abs(c[s]-c[s-1])/2+f}return{values:h,widths:p,positions:c,opacities:u,labels:a,labelMode:r,labelSpace:this._wantedLabelSpacePerLevel,qualifiedLabels:l[0]?l:null,labelsBetweenTicks:i}},_updateTickPositions:function t(){var e,i;for(i=0;i<this.ticks.length;i++){e=this.getPositionOfValue(this.ticks[i].value);this.ticks[i].position=o.roundToHalf(e)}for(i=0;i<this.minorTicks.length;i++){e=this.getPositionOfValue(this.minorTicks[i].value);this.minorTicks[i].position=o.roundToHalf(e)}this._initLevels();this._updateTickFormatting(this._levels,this._formatter);if(this.indicators)for(i=0;i<this.indicators.positions.length;i++){e=this.getPositionOfValue(this.indicators.values[i]);this.indicators.positions[i]=o.roundToHalf(e)}this._snapTicksAvgWidth=o.getAvgTickWidth(this.indicators?this.indicators.positions:this._levels[0].positions)||this._plotSize},_initLevels:function t(){this._levels=[this._getLabels(this.ticks,false)]},_calculateScale:function t(e){if(0===e)return;var i=this._scaleDetails,n=Number.isNaN(+i.realDataMin)?i.dataMin:i.realDataMin,s=Number.isNaN(+i.realDataMax)?i.dataMax:i.realDataMax,a=Number.isNaN(+i.explicitPlotMin)||null===i.explicitPlotMin?n:i.explicitPlotMin,o=Number.isNaN(+i.explicitPlotMax)||null===i.explicitPlotMax?s:i.explicitPlotMax,l;l=this.isRadial()?96:Math.max(96,this._getApproximateLabelWidth(a,o));var r=this.isVertical()?4*this._fontHeight:l,h=Math.max(2,e/r/i.tickMultiplier+1);r=e/(h-1);if(this._useLogScaleIfPossible&&a*o>0&&n*s>0){this._scale=this._logarithmicScale;this.setUseTransition(false)}else this._scale=this._linearScale;i.usedDataMin=n;i.usedDataMax=s;i.minTickSpacingInPixel=r;i.minTickDataSpacing=d.call(this);i.plotSize=this._plotSize;i.calculationSize="undefined"!==typeof e?e:this._calculationSize;i.fontHeight=this._fontHeight;Object.keys(i).forEach(function(t){this._scale["_"+t]=i[t]},this);this._scale.calculateTicks()},_getApproximateLabelWidth:function t(e,i,n){var s=this._formatter,a=this._renderer,o=this._style.label.font;if(!s)return 0;return Math.max.apply(null,[e,i,(i-e)/2].map(function(t){return a.getTextWidth(s.formatValue(t,n),o)}))},_generateTickObjects:function t(e,i){var n=e.getValues();this.ticks=o.getTicks(n.mainValues,this._padding,i);this.minorTicks=o.getTicks(n.secondaryValues,this._padding,i);this._tickDates=n.mainDates;this._minorTickDates=n.secondaryDates},_updateTickFormatting:function t(e,i){for(var n=0;e[0]&&n<e[0].values.length;n++)e[0].labels[n]=i?i.formatValue(e[0].values[n]):e[0].values[n]},setPlotMin:function t(e){this._scaleDetails.explicitPlotMin="number"===typeof e?e:null;this.invalidateProperties("setPlotMin")},getPlotMin:function t(){return this._scale.plotMin},setPlotMax:function t(e){this._scaleDetails.explicitPlotMax="number"===typeof e?e:null;this.invalidateProperties("setPlotMax")},getPlotMax:function t(){return this._scale.plotMax},setTickMultiplier:function t(e){this._scaleDetails.tickMultiplier=e||1;this.invalidateProperties("setTickMultiplier")},setSpacingMode:function t(e){this._scaleDetails.spacingMode=e;this.invalidateProperties("setSpacingMode")},getSpacingMode:function t(){return this._scaleDetails.spacingMode},setShowExplicitMinMax:function t(e){this._scaleDetails.showExplicitMinMax=e;this.invalidateProperties("setShowExplicitMinMax")},setLogScale:function t(e){this._useLogScaleIfPossible=e;this.invalidateProperties("setLogScale")},getLogScale:function t(){return this._scale===this._logarithmicScale},numberFormat:function t(e,i){if(this._discrete)return e;return s.numberFormat(e,i||this._precision,this._exponentUsed)},format:function t(e){if(this._discrete||!this._formatter)return e+"";return this._formatter.format(e,this._formatPattern)},formatValue:function t(e){if(this._discrete||!this._formatter)return e+"";return this._formatter.formatValue(e)},_transition:function t(){this._onAnimatitonEnd()},setDataRangeTransition:function t(e){this._transitionEnabled=e},setDataRange:function t(e,i){this._scaleDetails.dataMin=e;this._scaleDetails.dataMax=i;this.invalidateDisplay("setDataRange");this.invalidateProperties("setDataRange");return this},setRealDataRange:function t(e,i){this._scaleDetails.realDataMin=e;this._scaleDetails.realDataMax=i;this.invalidateProperties("setRealDataRange")},getDataMin:function t(){return this._scaleDetails.dataMin},getDataMax:function t(){return this._scaleDetails.dataMax},setNiceNumberEnabled:function t(e){if(this._scaleDetails.niceNumberEnabled===e)return;this._scaleDetails.niceNumberEnabled=e;this.invalidateProperties("setNiceNumberEnabled")},setWhiteSpaceOptimizingEnabled:function t(e){this._scaleDetails.whiteSpaceOptimizingEnabled=e;this.invalidateProperties("setWhiteSpaceOptimizingEnabled")},getLevels:function t(){return this._levels},updateFormatter:function t(){if(this.isDimension)this._formatter=this.dimensionFormatter||this._defaultFormatter;else{var e=this.getType().indices;this._formatter=1===e.length&&this.measureFormatters.length&&!c(this.measureFormatters)?this.measureFormatters[e[0]]:this.combinedMeasuresFormatter||this._defaultFormatter}this._formatter.prepare&&this._formatter.prepare()},_onAnimatitonEnd:function t(){this._super();this.rect.width>0&&this.calculateLabelSpace(this.rect)},_updateProperties:function t(){p.from.call(this);this._changed=this._oldIsVertical===this.isVertical()&&"number"===typeof this._scale.plotRange&&!Number.isNaN(+this._scale.plotRange);this._oldIsVertical=this.isVertical();this.updateFormatter();this._isSizing||this._updateScaleAndTicks()},_updateScaleAndTicks:function t(){this._calculateScale(this._calculationSize);this._generateTickObjects(this._scale,this._plotSize);this._updateTickPositions()},clear:function t(){this._linearTween.end();this._tickTween.end();this._super()},getWidthOfValue:function t(){return 1},getSnapTicksAvgWidth:function t(){return this._snapTicksAvgWidth},getPositionOfValue:function t(e){var i,n=this._scale.plotMin,s=this._scale.plotRange;i=0===s?e>n?100*this._plotSize:e<n?100*-this._plotSize:this._plotSize/2:this._scale.getPositionOfValue(e);(this._isVertical&&!this._reverse||!this._isVertical&&(this._reverse||this.yMirrorMode))&&(i=this._plotSize-i);return i+this._padding[this._isVertical?"top":"left"]},getNormalizedValue:function t(e){var i=this._scale.plotMin,n=this._scale.plotRange;return 0===n?e>i?1:e<i?0:.5:this._scale.getNormalizedValue(e)},getPositionOfNormalizedValue:function t(e){var i=this._scale.plotMin,n=this._scale.plotMax;return this.getPositionOfValue(e*(n-i)+i)},getValueOfPosition:function t(e){if(this._plotSize<=0)return NaN;e-=this._padding[this._isVertical?"top":"left"];(this._isVertical&&!this._reverse||!this._isVertical&&(this._reverse||this.yMirrorMode))&&(e=this._plotSize-e);return this._scale.getValueOfPosition(e)},getAngleOfValue:function t(e){return n.getAngleOfNormalizedValue((e-this._scale.plotMin)/(this._scale.plotMax-this._scale.plotMin),this)},getAngleOfNormalizedValue:function t(e){return n.getAngleOfNormalizedValue(e,this)},isLabelSelected:function t(e,i){return this._selectedRanges.some(function(t){return t.min<=e&&t.max>=i})},setSelectedRanges:function t(e){this._selectedRanges=e;this._updateTickPositions()},getLabelFromPoint:function t(e){if(this.isVertical())return null;var i=1;var n="far"===this.getAlignment()?1:-1;var s=(i+this._style.label.margin)*n;var a="near"===this.getAlignment()?this.rect.height-1:0;a+=s;var o=null;var l;for(l=0;l<this._levels.length;++l){a+=this._levels[l].labelSpace*n;if(e.y*n<a*n){o=this._levels[l];break}}if(!o)return null;for(l=0;l<o.labels.length;++l){var r=o.positions[l];var h=o.positions[l+1];var c=e.x>=r&&e.x<h||e.x<=r&&e.x>h;if(c)return{label:o.labels[l],start:o.values[l],end:o.values[l+1]}}return null}});return l}.apply(e,n),void 0!==s&&(t.exports=s))}}]);