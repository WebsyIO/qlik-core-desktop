/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[85],{1148:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=s(i(98));var a=s(i(116));var o=i(1149);var l=s(i(91));function s(t){return t&&t.__esModule?t:{default:t}}var r=function t(e){var i=e.children;return n.default.createElement("div",{className:"qs-view-error","data-tid":"unsupported-device"},n.default.createElement("div",{className:"qs-view-error__center"},n.default.createElement("div",{className:"qs-view-error__image"},n.default.createElement(o.ReactComponent,null)),n.default.createElement("div",{className:"qs-view-error__title"},l.default.get("UnsupportedDisplaySize.Title")),n.default.createElement("div",{className:"qs-view-error__message"},l.default.get("UnsupportedDisplaySize.Message")),i?n.default.createElement("div",null,i):null))};r.propTypes={children:a.default.node};r.defaultProps={children:null};var c=r;e.default=c;t.exports=e.default},1149:function(t,e,i){"use strict";i.r(e);i.d(e,"ReactComponent",function(){return r});var n=i(98);var a=i.n(n);function o(){o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};return o.apply(this,arguments)}var l=a.a.createElement("defs",null,a.a.createElement("path",{d:"M5 1h147a4 4 0 0 1 4 4v102a4 4 0 0 1-4 4H5a4 4 0 0 1-4-4V5a4 4 0 0 1 4-4z",id:"Display_size_not_supported_svg__a"}),a.a.createElement("mask",{id:"Display_size_not_supported_svg__b",maskContentUnits:"userSpaceOnUse",maskUnits:"objectBoundingBox",x:-2,y:-2,width:159,height:114},a.a.createElement("path",{fill:"#fff",d:"M-1-1h159v114H-1z"}),a.a.createElement("use",{xlinkHref:"#Display_size_not_supported_svg__a"})),a.a.createElement("path",{d:"M24.659 20.094c.783 1.25.156 2.343-1.254 2.343H1.625c-1.566 0-2.036-1.093-1.253-2.343L11.027 1.5c.783-1.25 2.037-1.25 2.82 0L24.66 20.094zm-10.596-12.5c0-.469-.313-.782-.782-.782H11.72c-.469 0-.781.313-.781.782v6.25c0 .469.312.781.78.781h1.563c.469 0 .781-.313.781-.781v-6.25zm0 9.375c0-.469-.313-.782-.782-.782H11.72c-.469 0-.781.313-.781.782v1.562c0 .469.312.782.78.782h1.563c.469 0 .781-.313.781-.782V16.97z",id:"Display_size_not_supported_svg__c"}),a.a.createElement("path",{d:"M16.563 0H25v8.438c0 .312-.469.468-.625.312l-2.5-2.5-2.5 2.5a.755.755 0 0 1-1.094 0L16.25 6.719a.755.755 0 0 1 0-1.094l2.5-2.5-2.5-2.5c-.156-.156 0-.625.313-.625zM8.438 25H0v-8.438c0-.312.469-.468.625-.312l2.5 2.5 2.5-2.5a.755.755 0 0 1 1.094 0l2.031 2.031a.755.755 0 0 1 0 1.094l-2.5 2.5 2.5 2.5c.156.156 0 .625-.313.625z",id:"Display_size_not_supported_svg__e"}),a.a.createElement("path",{d:"M24.659 20.094c.783 1.25.156 2.343-1.254 2.343H1.625c-1.566 0-2.036-1.093-1.253-2.343L11.027 1.5c.783-1.25 2.037-1.25 2.82 0L24.66 20.094zm-10.596-12.5c0-.469-.313-.782-.782-.782H11.72c-.469 0-.781.313-.781.782v6.25c0 .469.312.781.78.781h1.563c.469 0 .781-.313.781-.781v-6.25zm0 9.375c0-.469-.313-.782-.782-.782H11.72c-.469 0-.781.313-.781.782v1.562c0 .469.312.782.78.782h1.563c.469 0 .781-.313.781-.782V16.97z",id:"Display_size_not_supported_svg__g"}));var s=a.a.createElement("g",{fill:"none",fillRule:"evenodd"},a.a.createElement("g",{transform:"translate(31 1)",fillRule:"nonzero"},a.a.createElement("use",{strokeOpacity:.15,stroke:"#000",mask:"url(#Display_size_not_supported_svg__b)",strokeWidth:4,strokeDasharray:"5",xlinkHref:"#Display_size_not_supported_svg__a"}),a.a.createElement("rect",{stroke:"#A6A6A6",strokeWidth:2,fill:"#FFF",width:125,height:112,rx:4}),a.a.createElement("path",{d:"M4 0h117a4 4 0 0 1 4 4v5H0V4a4 4 0 0 1 4-4z",fill:"#A6A6A6"}),a.a.createElement("path",{fill:"#C7C7C7",d:"M1 4h123v8H1z"}),a.a.createElement("circle",{fill:"#FFF",cx:7,cy:8,r:2}),a.a.createElement("circle",{fill:"#FFF",cx:19,cy:8,r:2}),a.a.createElement("path",{fill:"#FFF",d:"M27 6h77v4H27z"}),a.a.createElement("circle",{fill:"#FFF",cx:13,cy:8,r:2}),a.a.createElement("path",{fill:"#FFF",d:"M116 6h4v4h-4zM110 6h4v4h-4z"})),a.a.createElement("g",{transform:"translate(82 47)"},a.a.createElement("mask",{id:"Display_size_not_supported_svg__d",fill:"#fff"},a.a.createElement("use",{xlinkHref:"#Display_size_not_supported_svg__c"})),a.a.createElement("use",{fill:"#000",fillRule:"nonzero",xlinkHref:"#Display_size_not_supported_svg__c"}),a.a.createElement("g",{mask:"url(#Display_size_not_supported_svg__d)",fill:"#CCC"},a.a.createElement("path",{d:"M0-1h25v25H0z"}))),a.a.createElement("g",{opacity:.099,transform:"scale(-1 1) rotate(45 -169.276 -149.794)"},a.a.createElement("mask",{id:"Display_size_not_supported_svg__f",fill:"#fff"},a.a.createElement("use",{xlinkHref:"#Display_size_not_supported_svg__e"})),a.a.createElement("use",{fill:"#000",fillRule:"nonzero",xlinkHref:"#Display_size_not_supported_svg__e"}),a.a.createElement("g",{mask:"url(#Display_size_not_supported_svg__f)",fill:"#000"},a.a.createElement("path",{d:"M0 0h25v25H0z"}))),a.a.createElement("g",{transform:"translate(1 51)"},a.a.createElement("rect",{stroke:"#A6A6A6",fill:"#A6A6A6",fillRule:"nonzero",x:.218,y:-.5,width:48.825,height:84,rx:4}),a.a.createElement("rect",{fill:"#FFF",fillRule:"nonzero",x:2.595,y:1.875,width:44.072,height:79.25,rx:2}),a.a.createElement("rect",{fill:"#A6A6A6",fillRule:"nonzero",x:11,width:27,height:7,rx:2}),a.a.createElement("g",{transform:"translate(12 30)"},a.a.createElement("mask",{id:"Display_size_not_supported_svg__h",fill:"#fff"},a.a.createElement("use",{xlinkHref:"#Display_size_not_supported_svg__g"})),a.a.createElement("use",{fill:"#000",fillRule:"nonzero",xlinkHref:"#Display_size_not_supported_svg__g"}),a.a.createElement("g",{mask:"url(#Display_size_not_supported_svg__h)",fill:"#CCC"},a.a.createElement("path",{d:"M0-1h25v25H0z"})))));var r=function t(e){return a.a.createElement("svg",o({width:189,height:135},e),l,s)};e["default"]="../../img/core/Display_size_not_supported.c7cb99290f301c32e6667975b2e71c07.svg"},1150:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(91),i(102),i(94),i(253),i(456)],a=function(t,e,i,n){t.service("qvDataManagerViewService",["$q","qvGuidancePopover",function(t,a){var o={OVERVIEW:"overview",BUBBLES:"bubbles"};var l=false;var s=false;var r={views:o,selectedView:o.BUBBLES,gridEditorOpen:l,editAssociationOpen:s,initializationComplete:false,initializationCompleteDeferred:t.defer(),subviews:{}};n.StateChanged.bind(c);i.mixin(r);r.notification("SelectedViewChanged");r.notification("OnGridEditorOpen");r.notification("OnAssociationEditorOpen");r.notification("OnViewSizeChange");function c(){r.gridEditorOpen&&!n.inDataManager()&&r.setGridEditorOpen(false)}r.setInitializationComplete=function(){this.initializationComplete=true;this.initializationCompleteDeferred.resolve()};r.initializationCompleted=function(){return this.initializationCompleteDeferred.promise};r.setGridEditorOpen=function(t,e){this.gridEditorOpen=t;this.OnGridEditorOpen.emit(this.gridEditorOpen,e)};r.isGridEditorOpen=function(){return this.gridEditorOpen};r.setAssociationEditorOpen=function(t){this.editAssociationOpen=t;this.OnAssociationEditorOpen.emit(this.editAssociationOpen)};r.isAssociationEditorOpen=function(){return this.editAssociationOpen};r.setSelectedView=function(t){this.isGridEditorOpen()&&this.setGridEditorOpen(false);this.selectedView=t;this.SelectedViewChanged.emit(this.selectedView)};r.subViewShown=function(t,e,i){this.subviews[t]&&this.subviews[t].view!==e&&this.subviews[t].view.hide();this.subviews[t]={view:e,behaviour:i}};r.subViewHidden=function(t,e){this.subviews[t]&&this.subviews[t].view===e&&(this.subviews[t]=void 0)};r.isShowingSubviewWithBehaviour=function(t,e){var i=false;for(var n in this.subviews)if(this.subviews.hasOwnProperty(n)&&this.subviews[n]&&this.subviews[n].behaviour&&this.subviews[n].behaviour&&this.subviews[n].behaviour[t]==e){i=true;break}return i};r.viewSizeChange=function(t,e,i){this.OnViewSizeChange.emit(t,e,i)};r.isTableSelectionCurrentlyAvailable=function(){var t=false;switch(this.selectedView){case"bubbles":case"overview":this.isGridEditorOpen()||this.isAssociationEditorOpen()||(t=true);break}return t};r.getSelectedView=function(){return this.selectedView};r.showGoToBubblesViewPopOver=function(t){var i={alignTo:t[0],class:"qv-bubbles-guidance-popover",closeAfter:1e4,title:e.get("DataManager.Overview.GoToBubblesGuidancePopOver.Title"),message:e.get("DataManager.Overview.GoToBubblesGuidancePopOver.Message"),menuOptions:{position:"bottom",width:"270",content:{}}};a.show(i)};return r}])}.apply(e,n),void 0!==a&&(t.exports=a))},1193:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(1677)],a=function(t,e){t.service("dsListPopoverService",["luiPopover",function(t){return{show:function i(n,a,o){var l=t.show({template:e.template,controller:e.controller,input:{items:a},dock:o,alignTo:n,closeOnEscape:true});return l}}}])}.apply(e,n),void 0!==a&&(t.exports=a))},1194:function(t,e,i){"use strict";var n,a;!(n=[i(54),i(493)],a=function(t,e){function i(t,i){var n;var a=e.LoadModelAssociations.getAssociationNames(t,i);n={};a.forEach(function(a){var o=e.LoadModelAssociations.getAssociation(t,a);var l=null;var s=[];o.nodes.forEach(function(t){i.data.id===t.tableId?l=t:s.push(t)});n[l.fieldId]||(n[l.fieldId]=[]);s.forEach(function(t){var e={table:t.table,field:t.field.name,tableId:t.tableId,fieldId:t.fieldId,association:a};n[l.fieldId].push(e)})});return n}function n(t,i,n){var a;a=[];var o=e.LoadModelAssociations.getAssociationNamesBetween(t,i,null,n,null);o.forEach(function(o){var l=e.LoadModelAssociations.getAssociation(t,o);var s,r;l.nodes.forEach(function(t){t.table.data.id===i.data.id&&(s=t);t.table.data.id===n.data.id&&(r=t)});var c={table1:i,field1:s.field.name,tableId1:i.data.id,fieldId1:s.fieldId,table2:n,field2:r.field.name,tableId2:n.data.id,fieldId2:r.fieldId,association:o};a.push(c)});return a}function a(t,i){var n,a;var l,s,r;var c=1===i.key1.length&&i.key1[0].fieldId;var d=1===i.key2.length&&i.key2[0].fieldId;c&&(l=i.table1.getField(i.key1[0].fieldId).name);d&&(s=i.table2.getField(i.key2[0].fieldId).name);if(c&&d){var u=e.LoadModelAssociations.getAssociationNamesBetween(t,i.table1,l,i.table2,s);if(1===u.length){var p=u[0];r=e.LoadModelAssociations.getAssociationNamesBetween(t,i.table1,null,i.table2,null);r.forEach(function(n){n!==p&&e.LoadModelAssociations.removeFromAssociation(t,n,i.table1,null)});e.LoadModelAssociations.renameAssociation(t,p,i.name);return}}r=e.LoadModelAssociations.getAssociationNamesBetween(t,i.table1,null,i.table2,null);r.forEach(function(n){e.LoadModelAssociations.removeFromAssociation(t,n,i.table1,null);n===i.name&&e.LoadModelAssociations.removeFromAssociation(t,n,i.table2,null)});if(!c){var f=i.table1;n=o(t,f,i.key1);l=f.generateUniqueFieldName(e.LoadModelAssociations.getFieldQualifiedName(f.data.name,i.name));f.createCalculatedField(l,n)}if(!d){var v=i.table2;a=o(t,v,i.key2);s=v.generateUniqueFieldName(e.LoadModelAssociations.getFieldQualifiedName(v.data.name,i.name));v.createCalculatedField(s,a)}e.LoadModelAssociations.addAssociationBetween(t,i.table1,l,i.table2,s,i.name);return}function o(t,e,i){var n="";i.forEach(function(t,i){i>0&&(n+="&");if(t.fieldId){var a=e.getField(t.fieldId);a&&"QueryExpressionField"===a.type&&(n+="("+a.expression+")");a&&"QueryField"===a.type&&(n+="{{"+t.fieldId+"}}")}t.delimiter&&(n+="'"+t.delimiter+"'")});return n}function l(t,i){var n="";if(1==i.key1.length&&i.key1[0].fieldId&&1==i.key2.length&&i.key2[0].fieldId){var a=i.table1.getField(i.key1[0].fieldId);var o=i.table2.getField(i.key2[0].fieldId);if(a&&o)return e.LoadModelAssociations.generateAssociationName(t,i.table1,a.name,i.table2,o.name)}i.key1.forEach(function(t){if(t.fieldId){var e=i.table1.getField(t.fieldId);if(e){n.length>0&&(n+="-");n+=e.name}}});i.key2.forEach(function(t){if(t.fieldId){var e=i.table2.getField(t.fieldId);if(e){n.length>0&&(n+="-");n+=e.name}}});return e.LoadModelAssociations.cleanUpKey(n)}function s(t,i,n,a,o){var l=i.getField(n);if(!l)return;var s=e.LoadModelAssociations.getAssociationNamesBetween(t,i,l.name,a,null);s.forEach(function(n){o&&o!==n||e.LoadModelAssociations.removeFromAssociation(t,n,i,null)});return}function r(e,i){return t.find(e.getFields(),function(t){return t.name===i})}return{getAssociationsForTable:i,getAssociationsBetweenTables:n,getDefaultAssociationName:l,setAssociation:a,breakAssociation:s,getTargetFieldByName:r}}.apply(e,n),void 0!==a&&(t.exports=a))},1195:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(91),i(105),i(513),i(1150)],a=function(t,e,i){t.service("qvDataManagerPreviewService",["qvDataManagerViewService","qvDataManagerSelectionService",function(t,e){return new n(t,e)}]);function n(t,e){this.viewService=t;this.selectionService=e;this.previewTypes={NONE:"none",NODATA:"noData",TABLE:"table",CENTRAL_HUB:"central-hub",ASSOCIATION:"association",MESSAGE:"message"};this.previewType=this.previewTypes.NONE;this.previewKey=this.previewTypes.NONE;this.previewData={};this.previewPaneActive=true;this.previewSizes={HIDDEN:"hidden",MINI:"mini",NORMAL:"normal",EXTENDED:"extended"};this.previewSize=this.previewSizes.HIDDEN}n.prototype.enableSync=function(){var t=false;"script"===this.previewData.type&&(t=true);return t};n.prototype.getPreviewPaneSize=function(){var t=this.getPreviewState();return t.size};n.prototype.previewPaneIsOpen=function(){return this.getPreviewPaneSize()!==this.previewSizes.HIDDEN};n.prototype.previewPaneIsEnabled=function(){var t=this.getPreviewState();return t.enabled};n.prototype.previewPaneIsActive=function(){return this.previewPaneActive};n.prototype.activatePreviewPanel=function(){this.previewPaneActive=true};n.prototype.deactivatePreviewPanel=function(){this.previewPaneActive=false};n.prototype.hide=function(){};n.prototype.clearPreview=function(){this.previewData={};this.setPreviewType(this.previewTypes.NONE);this.previewKey=this.previewTypes.NONE};n.prototype.noDataPreview=function(t,e,i){this.previewData={tableName:t||"",warningMsg:e,type:i};this.setPreviewType(this.previewTypes.NODATA);this.previewKey=this.previewTypes.NODATA};n.prototype.previewTable=function(t,e,i){var n=this.previewTypes.TABLE+e.data.id;if(this.previewKey!==n){this.previewData={loadModel:t,table:e,filter:i};this.setPreviewType(this.previewTypes.TABLE);this.previewKey=n}};n.prototype.previewCentralHub=function(t){var e=this.previewTypes.CENTRAL_HUB+t;if(this.previewKey!==e){this.previewData={name:t};this.setPreviewType(this.previewTypes.CENTRAL_HUB);this.previewKey=e}};n.prototype.previewAssociation=function(t,e,i){var n=this.previewTypes.ASSOCIATION+e+i;if(this.previewKey!==n){this.previewData={loadModel:t,source:e,target:i};this.setPreviewType(this.previewTypes.ASSOCIATION);this.previewKey=n}};n.prototype.previewMessage=function(t){this.previewData={messageKey:t};this.setPreviewType(this.previewTypes.MESSAGE);this.previewKey=this.previewTypes.MESSAGE};n.prototype.previewJoinMessage=function(t){this.previewMessage(t);this.previewData.joinSelected=true};n.prototype.getPreviewType=function(){return this.previewType};n.prototype.setPreviewType=function(t){this.previewType=t};n.prototype.tableSource=function(t){var n=t.data.sourceQueries?t.data.sourceQueries.length:0;var a=t.sourceName?t.sourceName:"";return n>0?e.get("DataManager.PreviewPanel.Table.Sources",n):a===i.AddData.InlineData?e.get("ManualData.Entry.Label"):a};n.prototype.togglePreview=function(){this.previewPaneIsEnabled()&&(this.previewPaneIsActive()?this.deactivatePreviewPanel():this.activatePreviewPanel())};n.prototype.getPreviewState=function(){var t={enabled:false,size:this.previewSizes.HIDDEN};var e=this.selectionService.getSelectedObjects();var i=this.viewService.isGridEditorOpen();var n=this.viewService.isAssociationEditorOpen();if(this.previewData.joinSelected){t.enabled=true;t.size=this.previewSizes.NORMAL}else if(e.length)if(n){t.enabled=false;t.size=this.previewSizes.EXTENDED}else{t.enabled=true;if(this.previewPaneActive)t.size=this.previewSizes.NORMAL;else{var a=this.viewService.getSelectedView();a===this.viewService.views.BUBBLES?t.size=this.previewSizes.MINI:t.size=this.previewSizes.HIDDEN}}else{t.enabled=false;t.size=this.previewSizes.HIDDEN}var o=this.selectionService.isSelectionCapturedByOther(this);if(i||o){t.enabled=false;o&&(t.size=this.previewSizes.HIDDEN)}t.enabled&&t.size==this.previewSizes.NORMAL?this.viewService.subViewShown("tableSelectionBottom",this):this.viewService.subViewHidden("tableSelectionBottom",this);return t};return n}.apply(e,n),void 0!==a&&(t.exports=a))},1274:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=r(i(98));var a=r(i(116));var o=r(i(1001));var l=r(i(48));var s=r(i(91));i(255);function r(t){return t&&t.__esModule?t:{default:t}}function c(){l.default.getService("addDataStateService").showAddData()}var d=function t(e){var i=e.closeMenu;return n.default.createElement(o.default,{tid:"4dfe25",iconName:"add",title:s.default.get("GlobalMenu.QuickImport"),onSelect:function t(){c();i()}},s.default.get("GlobalMenu.QuickImport"))};d.propTypes={closeMenu:a.default.func.isRequired};var u=d;e.default=u;t.exports=e.default},1275:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=s(i(98));var a=s(i(116));var o=i(1276);var l=s(i(91));function s(t){return t&&t.__esModule?t:{default:t}}var r=function t(e){var i=e.children;return n.default.createElement("div",{className:"qs-view-error"},n.default.createElement("div",{className:"qs-view-error__center"},n.default.createElement("div",{className:"qs-view-error__image"},n.default.createElement(o.ReactComponent,null)),n.default.createElement("div",{className:"qs-view-error__title"},l.default.get("UnsupportedDeviceDialog.Title")),n.default.createElement("div",{className:"qs-view-error__message"},i)))};r.propTypes={children:a.default.node.isRequired};var c=r;e.default=c;t.exports=e.default},1276:function(t,e,i){"use strict";i.r(e);i.d(e,"ReactComponent",function(){return r});var n=i(98);var a=i.n(n);function o(){o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};return o.apply(this,arguments)}var l=a.a.createElement("defs",null,a.a.createElement("rect",{id:"No_access_svg__a",x:0,y:0,width:201,height:32.931,rx:4}));var s=a.a.createElement("g",{fill:"none",fillRule:"evenodd"},a.a.createElement("g",{fill:"#C7C7C7",fillRule:"nonzero"},a.a.createElement("path",{d:"M173.556.25h-10.372a2 2 0 0 0-1.97 2.348l16.475 93.43a2 2 0 0 0 1.97 1.653l10.372-.001A2 2 0 0 0 192 95.333L175.525 1.902a2 2 0 0 0-1.97-1.653zM28.827.25H39.2a2 2 0 0 1 1.97 2.348l-16.475 93.43a2 2 0 0 1-1.97 1.653l-10.372-.001a2 2 0 0 1-1.97-2.347L26.858 1.902a2 2 0 0 1 1.97-1.653z"})),a.a.createElement("g",{transform:"translate(1 11)"},a.a.createElement("rect",{fill:"#E6E6E6",fillRule:"nonzero",width:201,height:32.931,rx:4}),a.a.createElement("mask",{id:"No_access_svg__b",fill:"#fff"},a.a.createElement("use",{xlinkHref:"#No_access_svg__a"})),a.a.createElement("rect",{stroke:"#A6A6A6",x:-.5,y:-.5,width:202,height:33.931,rx:4}),a.a.createElement("g",{mask:"url(#No_access_svg__b)",fill:"#FFF",fillRule:"nonzero"},a.a.createElement("path",{d:"M23.665-22.041L34.358-11.35-29.28 52.29l-10.693-10.693zM108.631-22.041l10.693 10.692L55.686 52.29 44.993 41.597zM192.57-22.041l10.693 10.692-63.638 63.639-10.693-10.693zM66.816-22.041L77.51-11.35 13.871 52.29 3.178 41.597zM150.755-22.041l10.693 10.692L97.81 52.29 87.117 41.597zM234.694-22.041l10.693 10.692-63.638 63.639-10.693-10.693z"}))));var r=function t(e){return a.a.createElement("svg",o({width:203,height:98},e),l,s)};e["default"]="../../img/core/No_access.ee7efd0ce4d90453132f9dcaeeb181e9.svg"},1278:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(97),i(1797)],a=function(t,e){t.service("qvDataManagerEditorSelectionService",["qvGridColumnHighlightService","$timeout",function(t,i){var n=[];var a=false;e.on("end",function(){i(function(){o.getSelectedColumns().forEach(function(e){t.highlightColumnByName(e.name)})},500)});var o={areSelectionsEnabled:function t(){return a},setSelectionsEnabled:function t(e){a=e},removeSelectionsForMissingColumns:function t(e){n.slice().forEach(function(t){e.some(function(e){return e.id===t.id})||this.deselectColumn(t.id)}.bind(this))},hasSelections:function t(){return n.length>0},getSelectedColumns:function t(){return n},getSelectedColumnIds:function t(){return n.map(function(t){return t.id})},toggleSelection:function t(e){a&&(this.isColumnSelected(e.id)?this.deselectColumn(e.id):this.selectColumn(e))},invertSelections:function t(e){if(this.hasSelections()){var i=this;e.forEach(function(t){i.toggleSelection(t)})}},selectColumn:function e(i){if(a&&!this.isColumnSelected(i.id)){t.highlightColumnByName(i.name);n.push(i)}},deselectColumn:function e(i){if(a){var o=-1;var l=n.some(function(t,e){o=e;return t.id===i});if(l){t.highlightColumnByName(n[o].name,false);n.splice(o,1)}}},isColumnSelected:function t(e){return n.some(function(t){return t.id===e})},clearSelections:function t(){this.hasSelections()&&n.slice().forEach(function(t){this.deselectColumn(t.id)}.bind(this))}};return o}])}.apply(e,n),void 0!==a&&(t.exports=a))},1279:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(97),i(1278)],a=function(t,e){t.service("qvDataManagerEditorDetailsViewService",["$timeout","qvDataManagerEditorSelectionService",function(t,e){return new i(t,e)}]);function i(t,e){this.columnSelectionService=e;this.$timeout=t;this.isPreviewPaneActive=true;this.isPreviewPaneEnabled=true}i.prototype.previewPaneIsEnabled=function(){return this.isPreviewPaneEnabled};i.prototype.enablePreviewPanel=function(){if(!this.previewPaneIsEnabled()){this.isPreviewPaneEnabled=true;if(this.previewPaneIsActive()){this.columnSelectionService.setSelectionsEnabled(true);this.$timeout(function(){e.force("end")})}}};i.prototype.disablePreviewPanel=function(){if(this.previewPaneIsEnabled()){if(this.previewPaneIsActive()){this.columnSelectionService.clearSelections();this.columnSelectionService.setSelectionsEnabled(false);this.$timeout(function(){e.force("end")})}this.isPreviewPaneEnabled=false}};i.prototype.previewPaneIsActive=function(){return this.previewPaneIsEnabled()&&this.isPreviewPaneActive};i.prototype.activatePreviewPanel=function(){if(this.previewPaneIsEnabled()){this.isPreviewPaneActive=true;this.columnSelectionService.setSelectionsEnabled(true);this.$timeout(function(){e.force("end")})}};i.prototype.deactivatePreviewPanel=function(){if(this.previewPaneIsEnabled()){this.columnSelectionService.clearSelections();this.columnSelectionService.setSelectionsEnabled(false);this.isPreviewPaneActive=false;this.$timeout(function(){e.force("end")})}};i.prototype.togglePreview=function(){this.previewPaneIsEnabled()&&(this.previewPaneIsActive()?this.deactivatePreviewPanel():this.activatePreviewPanel())};return i}.apply(e,n),void 0!==a&&(t.exports=a))},1300:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(1492),i(11),i(54)],a=function(t,e,i,n){t.filter("qvAutocompleteFilter",function(){function t(t,e){var i=false;var a=n.filter(t,function(t){if(t===e){i=true;return true}return t.indexOf(e)>-1});return a.length>0&&!i?a:t}return t});t.directive("qvAutocompleteInput",["$timeout","$filter",function(t,n){return{restrict:"E",replace:true,template:e,scope:{value:"=",listItems:"=",tooltip:"@",testid:"@",maxInputLength:"@",inputType:"@"},link:function e(a,o){var l=40;var s=13;var r=38;var c=27;var d=9;a.autoCapitalize="on";a.autoCorrect="on";a.maxInputLength||(a.maxInputLength="256");a.inputType||(a.inputType="text");if("url"===a.inputType){a.autoCapitalize="off";a.autoCorrect="off"}var u=o.find("input");var p=i(o[0]).find(".pop-up-list");a.suggestionsVisible=false;a.$watch("value",function(t){a.filteredList=n("qvAutocompleteFilter")(a.listItems,t)});a.showSuggestions=function(){a.suggestionsVisible=true;i(document).on("click",f)};a.hideSuggestions=function(){a.suggestionsVisible=false;i(document).off("click",f)};a.toggleSuggestions=function(){a.suggestionsVisible?a.hideSuggestions():a.showSuggestions()};function f(e){i(e.target).closest(i(o[0])).length||t(function(){a.hideSuggestions()},0)}a.selectItem=function(t){a.value=t;v(-1)};u.on("keydown",m);p.on("keydown",g);function v(e){t(function(){a.currentListIndex=e},0)}function g(e){if(e.keyCode===l){e.preventDefault();a.currentListIndex<a.filteredList.length-1?v(a.currentListIndex+1):v(0)}else if(e.keyCode===r){e.preventDefault();0===a.currentListIndex?v(a.filteredList.length-1):v(a.currentListIndex-1)}else if(e.keyCode===s||e.keyCode===d){e.preventDefault();t(function(){a.selectItem(a.filteredList[a.currentListIndex]);a.hideSuggestions()},0)}else if(e.keyCode===c){e.preventDefault();v(-1);t(function(){a.hideSuggestions()},0);u.focus()}}function m(e){if(e.keyCode===l){e.preventDefault();if(a.suggestionsVisible&&a.filteredList.length>0){u.blur();p.focus();t(function(){a.currentListIndex=0},0)}}else if(e.keyCode===c||e.keyCode===s){e.preventDefault();t(function(){a.hideSuggestions()},0)}else e.keyCode===d?t(function(){a.hideSuggestions()},0):a.suggestionsVisible||t(function(){a.showSuggestions()},0)}a.$on("$destroy",function(){i(document).off("click",f);u.off("keydown",m);p.off("keydown",g)})}}}])}.apply(e,n),void 0!==a&&(t.exports=a))},1332:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(54),i(91),i(89),i(253),i(493),i(235),i(2447),i(513)],a=function(t,e,i,n,a,o){t.service("qvDataManagerAssociationService",["qvDataManagerDataService","qvDataManagerToastService","qvDataManagerSelectionService",function(t,l,s){function r(){this.associationsToPreview=[];this.associationSelectedToPreview=null;t.registerInvalidationHandler(this.handleInvalidation.bind(this))}r.prototype.handleInvalidation=function(){this.setAssociationSelectedToPreview&&this.setAssociationSelectedToPreview(null);this.associationLinkToSelect&&this.associationLinkToSelect.length>0&&s.setSelectedObjects(this.associationLinkToSelect);this.associationLinkToSelect=[];this.associationsToPreview=[]};r.prototype.toggleAutoAssociate=function(){var e=this;return t.getLoadModel().then(function(t){return e.autoAssociate(t)})};r.prototype.createManualAssociationLink=function(t){var e=s.selectedObjectTypes;return t.isHubLink()?{type:e.LINK,preview:t.association&&t.association.preview,objects:[{type:e.TABLE,tableModel:t.source.table.tableModel,source:t.source},{type:e.HUB,name:t.target.name,id:t.target.id,source:t.target}],source:t}:{type:e.LINK,preview:t.association&&t.association.preview,objects:[{type:e.TABLE,tableModel:t.source.table.tableModel,source:t.source},{type:e.TABLE,tableModel:t.target.table.tableModel,source:t.target}],source:t}};r.prototype.createRecommendedAssociationLink=function(t,e){var i=[];if(2===e.links.length){var n=t.getTargetTableModel(e.links[0].query.name);var a=t.getTargetTableModel(e.links[1].query.name);var o=s.selectedObjectTypes;var l={type:o.LINK,preview:true,objects:[{type:o.TABLE,tableModel:n},{type:o.TABLE,tableModel:a}]};i=[l]}else if(e.links.length>2){var r={type:s.selectedObjectTypes.HUB,preview:true,name:e.name,id:"hub__"+e.name};i=[r]}return i};r.prototype.unAssociatedTables=function(t){var i=[];var n=[];var a=t.queries.map(function(t){return t.id});for(var o in t.associations)t.associations[o].forEach(function(t){e.contains(n,t.tableId)||n.push(t.tableId)});i=e.difference(a,n);return i};r.prototype.selectAssociationLnk=function(t){if(2===t.length){var e=this.createManualAssociationLink(t[0]);var i=this.createManualAssociationLink(t[1]);s.setSelectedObjects([e,i])}else if(1===t.length){var n=this.createManualAssociationLink(t[0]);s.setSelectedObjects([n])}else s.setSelectedObjects([])};r.prototype.handleRecommendationJoined=function(e){var n=this;return t.getLoadModel().then(function(t){var s=t.getTargetTableModel(e.source.tableName);var r=t.getTargetTableModel(e.target.tableName);o.LoadModelAssociations.addAssociationBetween(t,s,e.source.columnName,r,e.target.columnName);return a.updateProperties(t.serialize()).then(function(){l.showToast(i.get("DataManager.Toast.AssociationCreated"),true);n.setAssociationsToPreview([])})})};r.prototype.applyRecommendedAssociation=function(e){var n=this;n.setAssociationSelectedToPreview(null);t.getLoadModel().then(function(t){e.links.forEach(function(i){var n=t.getTargetTableModel(i.query.name);var a=i.field.name;o.LoadModelAssociations.addToAssociation(t,e.name,n,a)});return a.updateProperties(t.serialize())}).then(function(){l.showToast(i.get("DataManager.Toast.AssociationCreated"),true);return t.getLoadModel()}).then(function(t){n.associationLinkToSelect=n.createRecommendedAssociationLink(t,e)})};r.prototype.selectPreviewedAssociation=function(e){var i=this;0===e.length?s.setSelectedObjects([]):1===e.length&&t.getLoadModel().then(function(t){var n=i.createRecommendedAssociationLink(t,e[0]);s.setSelectedObjects(n);i.setAssociationSelectedToPreview(e[0])})};r.prototype.unAssociatedRecommendations=function(t,i){var n=[];for(var a in i.associations)n.push({name:a,links:i.associations[a]});return e.filter(t,function(t){return!e.some(n,function(i){if(t.name===i.name){var n=t.links.map(function(t){return t.query.id});var a=i.links.map(function(t){return t.tableId});return 0===e.difference(n,a).length}return false})}).map(function(t){var i=e.find(n,function(e){return e.name===t.name});if(i){var a=t.links.map(function(t){return t.query.id});var o=i.links.map(function(t){return t.tableId});var l=e.intersection(a,o);l.forEach(function(i){var n=e.find(t.links,function(t){return t.query.id===i});n["associated"]=true})}return t})};r.prototype.autoAssociate=function(i){this.setAssociationSelectedToPreview(null);i=i.clone();var l=o.LoadModelAssociations.serializeAssociations(i);return t.getAllRecommendations().then(function(t){o.LoadModelAssociations.setAssociationGraph(i,t.result.associationGraph);var s=i.serialize();return e.isEqual(l,s.associations)?n.resolve(false):a.updateProperties(s).then(function(){return true})})};r.prototype.setAssociationsToPreview=function(t){this.associationsToPreview=t};r.prototype.getAssociationsToPreview=function(){return this.associationsToPreview};r.prototype.setAssociationSelectedToPreview=function(t){this.associationSelectedToPreview=t};r.prototype.getAssociationSelectedToPreview=function(){return this.associationSelectedToPreview};r.prototype.getSelectedAssociation=function(t){var e=s.getSelectedObjects();if(e.length>0){var i=e[0];if(i.type===s.selectedObjectTypes.HUB)return c(t,i.name);if(i.type===s.selectedObjectTypes.LINK){var n=i.objects.filter(function(t){return t.type===s.selectedObjectTypes.HUB});if(n.length>0)return c(t,n[0].name);var a=i.objects.map(function(t){return t.tableModel.data.id});return d(t,a)}}return};function c(t,i){return e.find(t,function(t){return t.name===i})}function d(t,i){return e.find(t,function(t){return i.every(function(e){return t.links.some(function(t){return t.query.id===e})})})}return new r}])}.apply(e,n),void 0!==a&&(t.exports=a))},1333:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2452)],a=function(t,e){t.service("qvDataManagerPivotService",[function(){var t=false;var i={togglePivotEnabled:function e(){t=!t},setPivotEnabled:function e(i){t=i},getPivotEnabled:function e(){return t},discardPivot:function t(e,i){var n=e.replaceTargetTableWithSourceQueries(i);e.setProperties();return n},performPivot:function t(i,n,a){var o=i.getTargetTableModelById(n);var l=e.createCrossTableQuery(o.data,a,i);var s=i.updateTargetTableWithTransformation(n,l);i.setProperties();return s}};return i}])}.apply(e,n),void 0!==a&&(t.exports=a))},1492:function(t,e){t.exports='<div class="qv-autocomplete-input" q-title-translation="{{tooltip}}">\n\n\t<div class="input-box">\n\t\t<input maxlength="{{maxInputLength}}"\n\t\t\t   type="{{inputType}}"\n\t\t\t   autocapitalize="{{autoCapitalize}}"\n\t\t\t   autocorrect="{{autoCorrect}}"\n\t\t\t   class="lui-input"\n\t\t\t   ng-model="value"\n\t\t\t   tid="{{testid}}"\n\t\t/>\n\n\t\t<div class="lui-icon lui-icon--triangle-bottom" ng-click="toggleSuggestions()" ng-if="listItems.length > 0"></div>\n\t</div>\n\n\t<div class="pop-up-list" ng-show="suggestionsVisible && filteredList.length > 0" tabindex="1">\n\n\t\t<div class="list-item" ng-repeat="item in filteredList" ng-bind="item" qva-activate="selectItem(item); hideSuggestions();" ng-class="{selected: $index === currentListIndex}" tid="{{testid}}_list_item_{{$index}}"></div>\n\n\t</div>\n</div>\n'},1677:function(t,e,i){"use strict";var n,a;!(n=[i(1678)],a=function(t){return{template:t,controller:["$scope",function(t){t.itemClicked=function(t,e){t.preventDefault();e.disabled()||e.select()}}],scope:{items:"="}}}.apply(e,n),void 0!==a&&(t.exports=a))},1678:function(t,e){t.exports='<lui-popover class="ds-list-popover" x-arrow="arrow" tid="ds-list-popover">\n\t<lui-popover-body class="lui-nopad">\n\t\t<ul class="lui-list list">\n\t\t\t<li class="lui-list__item item" ng-repeat="item in items" ng-class="{ \'lui-disabled\': item.disabled() }" ng-click="itemClicked($event,item);">\n\t\t\t\t<div class="lui-list__text ds-text" title="{{item.label}}">{{item.label}}</div>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>\n'},1680:function(t,e,i){"use strict";var n,a;!(n=[i(2419),i(118),i(48),i(91),i(1194),i(1792),i(51),i(1008),i(54),i(235),i(2421),i(2426)],a=function(t,e,i,n,a,o,l,s,r){return{template:t,scope:{context:"="},controller:["$scope","qvDataManagerDataService",function(t,c){var d=true;var u=false;var p=null;t.loadingScores=false;t.context.editingAssociation&&(d=false);t.hideRecCircle=false;t.name=t.context.name?t.context.name:"";t.context.showBreakAssociationWarning=void 0===t.context.showBreakAssociationWarning||t.context.showBreakAssociationWarning;t.leftTableLocked=!t.context.leftTableLocked||t.context.leftTableLocked;t.rightTableLocked=!!t.context.rightTableLocked&&t.context.rightTableLocked;t.leftTableExpression=[];t.rightTableExpression=[];t.customAssocationScore="";t.customAssocationScoreNum=0;t.maxNameLength=e.MAX_CONNECTION_NAME_LENGTH;t.leftTableModel={id:"leftTable",tableId:t.context.leftTableId,initialFieldId:t.context.leftFieldId,loadModel:t.context.loadModel};t.rightTableModel={id:"rightTable",tableId:t.context.rightTableId?t.context.rightTableId:null,initialFieldId:t.context.rightFieldId?t.context.rightFieldId:null,loadModel:t.context.loadModel,excludeTableId:t.context.leftTableId};var f=t.context.loadModel.getTargetTableModelById(t.leftTableModel.tableId);function v(){if(p)return i.promise(p);if(!t.loadingScores){t.loadingScores=true;return c.getRecommendationsForTable(f.data.name).then(function(e){t.loadingScores=false;p=e.result.associatedFields;return p})}}var g=v();t.context.close=function(){t.destroyComponent();t.deferredResult.resolve()};t.cancel=function(){t.context.cancel&&t.context.cancel();t.context.close()};var m=function e(){var i={name:t.name,leftTable:{tableId:t.leftTableModel.tableId,expression:t.leftTableExpression},rightTable:{tableId:t.rightTableModel.tableId,expression:t.rightTableExpression}};t.context.setAssociation(i);t.context.close()};t.associateClicked=function(){var e=t.context.loadModel.getTargetTableModelById(t.leftTableModel.tableId);var i=t.context.loadModel.getTargetTableModelById(t.rightTableModel.tableId);if(t.context.showBreakAssociationWarning&&t.context.areTablesAlreadyAssociated(e,i)){var a={warningTitle:n.get("DataManager.CustomAssociationWarningDialog.DialogTitle"),warningMsg1:n.get("DataManager.CustomAssociationDialog.BreakAssociationWarningPart1",[e.data.name,i.data.name]),warningMsg2:n.get("DataManager.CustomAssociationDialog.BreakAssociationWarningPart2"),breakAssociation:function t(){m()}};return l.show(o,{context:a})}m()};t.isOkDisabled=function(){return!b()};function b(){var e=0==t.validateCustomName(t.name).length;e&&(e=t.rightTableExpression&&t.rightTableExpression.length&&t.leftTableExpression&&t.leftTableExpression.length);return e}t.validateCustomName=function(e){var i=[];var a=null;var o=!(1!==t.leftTableExpression.length||!t.leftTableExpression[0].fieldName);var l=!(1!==t.rightTableExpression.length||!t.rightTableExpression[0].fieldName);var c=t.context.loadModel.getTargetTableModelById(t.leftTableModel.tableId);var d=t.context.loadModel.getTargetTableModelById(t.rightTableModel.tableId);c&&(o?t.leftTableExpression[0].fieldName!==e&&c.isFieldNameInUse(e)&&(a=c.data.name):c.isFieldNameInUse(e)&&(a=c.data.name));d&&(l?t.rightTableExpression[0].fieldName!==e&&d.isFieldNameInUse(e)&&(a=d.data.name):d.isFieldNameInUse(e)&&(a=d.data.name));if(a)i.push({type:"error",msg:n.get("DataManager.CustomAssociationDialog.AssociationNameAlreadyInUse",a)});else{var u=[c,d];var p=null;o&&l?p=[t.leftTableExpression[0].fieldName,t.rightTableExpression[0].fieldName]:o&&!l?p=[t.leftTableExpression[0].fieldName]:l&&!o&&(p=[t.rightTableExpression[0].fieldName]);var f=s.validateAssociationName(t.context.loadModel,u,e,null,p);i=r.union(i,f)}return i};t.modifiedCustomNameCallback=function(e,i){t.name=i;u=true};function h(){if(!u&&d){var e=t.context.loadModel.getTargetTableModelById(t.leftTableModel.tableId);var i=t.context.loadModel.getTargetTableModelById(t.rightTableModel.tableId);var n={table1:e,key1:t.leftTableExpression,table2:i,key2:t.rightTableExpression};var o=a.getDefaultAssociationName(t.context.loadModel,n);t.name=o.substring(0,t.maxNameLength)}}function y(){if(t.leftTableExpression&&t.leftTableExpression.length&&t.rightTableExpression&&t.rightTableExpression.length){var e=t.leftTableExpression.filter(function(t){return t.fieldId});if(1==e.length){var i=t.rightTableExpression.filter(function(t){return t.fieldId});if(1==i.length)g.then(function(n){t.hideRecCircle=false;var a=e[0].fieldName;var o=i[0].fieldName;var l=t.context.loadModel.getTargetTableModelById(t.leftTableModel.tableId);var s=t.context.loadModel.getTargetTableModelById(t.rightTableModel.tableId);var r=l.data.name;var c=s.data.name;var d=n.filter(function(t){return t.fieldL.tableName===r&&t.fieldL.fieldName===a&&t.fieldR.tableName===c&&t.fieldR.fieldName===o||t.fieldL.tableName===c&&t.fieldL.fieldName===o&&t.fieldR.tableName===r&&t.fieldR.fieldName===a});if(d.length){t.customAssocationScore=Math.round(100*d[0].associationScore)+"%";t.customAssocationScoreNum=Math.max(5,Math.round(100*d[0].associationScore))}else{t.customAssocationScore="0%";t.customAssocationScoreNum=5}});else{t.customAssocationScore="";t.hideRecCircle=true;t.customAssocationScoreNum=0}}else{t.customAssocationScore="";t.hideRecCircle=true;t.customAssocationScoreNum=0}}else{t.customAssocationScore="";t.hideRecCircle=true;t.customAssocationScoreNum=0}}t.$watchCollection("leftTableExpression",function(e,i){t.$broadcast("forceBlurInput");e!==i&&h();y()});t.$watchCollection("rightTableExpression",function(e,i){t.$broadcast("forceBlurInput");e!==i&&h();y()})}]}}.apply(e,n),void 0!==a&&(t.exports=a))},1681:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(89),i(235)],a=function(t,e){t.service("qvDataManagerSpinnerService",["$timeout","qvLoader","qvDataManagerDataService",function(t,i,n){var a="loadModelInvalidation";function o(){this.callerIds=[];this.elementToAppendSpinner=void 0;this.loaderTimeout={};this.spinnerOn=false;n.registerInvalidationHandler(l.bind(this))}o.prototype.showSpinner=function(e,n){var a=this.callerIds.indexOf(e);a<0&&this.callerIds.push(e);if(!this.spinnerOn)if(i.isOpen()){var o=this;t.cancel(this.loaderTimeout[e]);this.loaderTimeout[e]=t(function(){o.showSpinner(e,n)},100)}else{this.spinnerOn=true;i.show({messageObj:{task:n||"DataManager.Overview.LoadingTables"},appendTo:this.elementToAppendSpinner,hugeLoader:true})}};o.prototype.stopSpinner=function(e){var n=this.callerIds.indexOf(e);n>=0&&this.callerIds.splice(n,1);t.cancel(this.loaderTimeout[e]);if(0===this.callerIds.length&&this.spinnerOn){this.spinnerOn=false;i.close(true)}};o.prototype.forceStopSpinner=function(){this.callerIds=[];if(this.spinnerOn){this.spinnerOn=false;i.close(true)}};o.prototype.waitForInvalidationSpinner=function(t){this.showSpinner(a,t)};o.prototype.cancelInvalidationSpinner=function(){this.stopSpinner(a)};function l(){this.stopSpinner(a);return e.resolve()}return new o}])}.apply(e,n),void 0!==a&&(t.exports=a))},1683:function(t,e,i){"use strict";var n,a;!(n=[],a=function(){function t(t){return t.map(function(t){return t.toLowerCase()})}var e,i,n,a,o,l,s,r,c,d,u,p,f,v,g;e=["Capitalize","FindOneOf","KeepChar","Left","Len","Lower","LTrim","Mid","PurgeChar","Replace","Right","RTrim","TextBetween","Trim","Upper","Repeat","Chr","Index","Ord","SubStringCount"];i=["Day","Week","Month","Year","MakeDate","MakeTime","Age","AddYears","AddMonths","YearStart","YearEnd","QuarterStart","QuarterEnd","QuarterName","MonthStart","MonthEnd","MonthName","WeekStart","WeekEnd","WeekName","DaylightSaving","TimeZone","UTC","GMT","Now","Today","Hour","Minute","Second","WeekDay","WeekYear","DayNumberOfYear","DayNumberOfQuarter","Year2Date","YearToDate","InYear","InYearToDate","InQuarter","InQuarterToDate","InMonth","InMonthToDate","InMonths","InMonthsToDate","InWeek","InWeekToDate","InLunarWeek","InLunarWeekToDate","InDay","InDayToTime","MonthsStart","LunarWeekStart","DayStart","MonthsEnd","LunarWeekEnd","DayEnd","YearName","MonthsName","LunarWeekName","DayName","LocalTime","ConvertToLocalTime","NetWorkDays","LastWorkDate","FirstWorkDate","MakeWeekDate"];n=["Date","Dual","Interval","Money","Num","Time","Timestamp"];a=["Date#","Interval#","Money#","Num#","Text","Time#","Timestamp#"];o=["Floor","Round","fmod","Ceil","fabs","Sign","Fact","Mod","Odd","Even","Frac","Div"];l=["If","Match","WildMatch","Pick","MixMatch","Alt","Class"];s=["Null","IsNull"];r=["Rand","e"];c=["pow","exp","log","log10","sqrt","sqr"];d=["CHIDIST","CHIINV","NORMDIST","NORMINV","TDIST","TINV","FDIST","FINV"];u=["GeoMakePoint"];p=["RGB","ARGB","HSL"];f=["IsNum","IsText"];v=["OSUser","ReloadTime"];g=[{category:"DataManager.ExpressionHelpers.Category.String",functions:e},{category:"DataManager.ExpressionHelpers.Category.Date",functions:i},{category:"DataManager.ExpressionHelpers.Category.Formatting",functions:n},{category:"DataManager.ExpressionHelpers.Category.Numeric",functions:o},{category:"DataManager.ExpressionHelpers.Category.Conditional",functions:l},{category:"DataManager.ExpressionHelpers.Category.Interpretation",functions:a},{category:"DataManager.ExpressionHelpers.Category.Null",functions:s},{category:"DataManager.ExpressionHelpers.Category.Mathematical",functions:r},{category:"DataManager.ExpressionHelpers.Category.ExponentialAndLogarithmic",functions:c},{category:"DataManager.ExpressionHelpers.Category.Distribution",functions:d},{category:"DataManager.ExpressionHelpers.Category.Geospatial",functions:u},{category:"DataManager.ExpressionHelpers.Category.Color",functions:p},{category:"DataManager.ExpressionHelpers.Category.Logical",functions:f},{category:"DataManager.ExpressionHelpers.Category.System",functions:v}];return{stringFunctions:e,dateFunctions:i,formattingFunctions:n,numericFunctions:o,conditionalFunctions:l,allFunctions:t([].concat(e,i,n,o,l,a,s,r,c,d,u,p,f,v)),categorizedArray:g}}.apply(e,n),void 0!==a&&(t.exports=a))},1684:function(t,e,i){"use strict";var n,a;!(n=[i(48)],a=function(t){t.service("qvDataManagerThrottleService",[function(){var t={};t.throttleAsyncFunction=function(t){var e=false;var i=false;var n=function n(){if(e)i=true;else{e=true;t().then(function(){e=false;if(i){i=false;n()}},function(){e=false;i=false})}};return n};return t}])}.apply(e,n),void 0!==a&&(t.exports=a))},1790:function(t,e,i){"use strict";var n,a;!(n=[i(2400),i(91),i(2401)],a=function(t,e){return{template:t,scope:{context:"="},controller:["$scope",function(t){t.titleText=e.get("DataManager.Lineage.LineageDialogTitle",t.context.lineageSelection.name);t.context.close=function(){t.destroyComponent();t.deferredResult.resolve()};t.cancel=function(){t.context.cancel&&t.context.cancel();t.context.close()}}]}}.apply(e,n),void 0!==a&&(t.exports=a))},1792:function(t,e,i){"use strict";var n,a;!(n=[i(2420)],a=function(t){return{template:t,scope:{context:"="},controller:["$scope",function(t){t.context.close=function(){t.destroyComponent();t.deferredResult.resolve()};t.breakAssociationClicked=function(){t.context.breakAssociation();t.context.close()};t.cancelClicked=function(){t.context.close()}}]}}.apply(e,n),void 0!==a&&(t.exports=a))},1793:function(t,e,i){"use strict";var n,a;!(n=[i(10),i(48),i(11),i(91),i(2423),i(262),i(2424)],a=function(t,e,i,n,a,o,l){e.directive("simpleExpressionBuilder",function(){return{scope:{expressionArray:"=",targetTableModel:"=",tableId:"="},restrict:"E",template:a,controller:["$scope","$element","$rootElement",function(a,s,r){a.editable=true;a.noExpression=true;i(s.find(".left-side")).sortable({cursor:"move",containment:"parent",tolerance:"pointer",stop:function t(){var e=s.find(".left-side").children(":visible");var n=[];for(var o=0;o<e.length;o++){var l=i(e[o]).scope().item;n.push(l)}a.expressionArray=n;a.$apply()}});function c(){var t=a.targetTableModel.getFields();var e=[];if(t&&t.length)for(var i=0;i<t.length;i++){var n=t[i];var o={};o.text=n.name;o.fieldId=n.id;o.fieldSelected=function(t,e){var i={name:t,fieldId:e};d("field",i)};e.push(o)}return e}a.isAddFieldButtonDisabled=function(){return a.noTable};a.delimiterEntered=function(t){var e={name:t};d("delimiter",e)};a.onSelectFieldsAreaClicked=function(t){if(!a.noTable&&0==a.expressionArray.length){t.target=i(t.currentTarget).parent().find(".simple-expression-add-field-popover-button")[0];a.onAddFieldClicked(t)}};a.onAddFieldClicked=function(i){var s=false;a.targetTableModel.isConcatenatedTable()&&(s=true);if(s&&1==a.expressionArray.length)o.show({title:n.get("DataManager.SimpleExpressionBuilder.ConcatenatedTable.AddFieldWarning.Title"),message:n.get("DataManager.SimpleExpressionBuilder.ConcatenatedTable.AddFieldWarning.ErrorMessage")});else{var d=t.element(i.target);var u=r.height();var p=u-d.offset().top;var f="simple-expression-add-field-popover-button-content-"+a.tableId;var v=e.getService("luiPopover");v.show({template:l.template,alignTo:i.target,closeOnResize:true,controller:l.controller,input:{popupHeight:p,tableTid:"simple-expression-add-field-popover-id-"+a.tableId,showOnlyFields:s,contentTid:f,menuItems:c(),delimiterEntered:a.delimiterEntered,model:{}}})}};function d(t,e){"field"===t?a.expressionArray.push({fieldName:e.name,fieldId:e.fieldId}):a.expressionArray.push({delimiter:e.name})}a.$watchCollection("targetTableModel",function(){a.targetTableModel?a.noTable=false:a.noTable=true});a.$watchCollection("expressionArray",function(){a.expressionArray&&a.expressionArray.length?a.noExpression=false:a.noExpression=true});a.deleteToken=function(t,e){if(t&&t.preventDefault){t.preventDefault();t.stopPropagation()}a.expressionArray.splice(e,1)};a.$on("$destroy",function(){})}]}})}.apply(e,n),void 0!==a&&(t.exports=a))},1794:function(t,e,i){"use strict";var n,a;!(n=[i(91),i(54),i(493),i(1194)],a=function(t,e,i,n){var a={BAD:0,GOOD:1,RECOMMENDATION:2,KEEP:3,CUSTOM:10,NONE:-1,BREAK:-2,BADGROUP:-3,GOODGROUP:-4};function o(t){var e=[t.fieldL.tableName+"."+t.fieldL.fieldName,t.fieldR.tableName+"."+t.fieldR.fieldName];e.sort();return e.join(";")}function l(t,e){var i=[t,e];i.sort();return i.join(";")}function s(t){var e=t.lastIndexOf(".");return e>0&&e<t.length-1?t.slice(e+1):""}function r(t,e){if(!e)return;this.loadModel=t;this.id=o(e);this.groupId=l(e.fieldL.tableName,e.fieldR.tableName);this.score=e.associationScore;this.scoreTxt=Math.max(10,Math.round(100*e.associationScore))+"%";this.type=e.associationStatus;this.show=true;this.left={table:e.fieldL.tableName,tableModel:t.getTargetTableModel(e.fieldL.tableName),field:e.fieldL.fieldName,type:e.associationStatus};this.right={table:e.fieldR.tableName,tableModel:t.getTargetTableModel(e.fieldR.tableName),field:e.fieldR.fieldName,type:e.associationStatus};this.affected={left:null,right:null};this.status={resolution:void 0};this.templateSrc=this.type===a.BAD?"association-panel-bad.ng.html":"association-panel-recommendation.ng.html"}r.prototype.doesAssociationExist=function(){var t=i.LoadModelAssociations.getAssociationNamesBetween(this.loadModel,this.left.tableModel,this.left.field,this.right.tableModel,this.right.field);return t.length>0};r.prototype.isDefault=function(){return this.doesAssociationExist()&&this.type!==a.KEEP};r.prototype.cloneForEditing=function(t){var e=new r;var i=t&&this.right.table===t;e.loadModel=this.loadModel;e.id=this.id;e.groupId=this.groupId;e.type=this.type;e.score=this.score;e.scoreTxt=this.scoreTxt;e.show=this.show;e.left=i?this.right:this.left;e.right=i?this.left:this.right;e.associationNames=this.associationNames;e.status={resolution:void 0};e.affected={left:i?this.affected.right:this.affected.left,right:i?this.affected.left:this.affected.right};e.templateSrc=this.templateSrc;return e};function c(e){var i=e.map(function(t){return t.left.field});var n=e[0];this.groupId=l(n.left.table,n.right.table);this.id=this.groupId+":key:"+i.join(",");this.score=e.reduce(function(t,e){return Math.min(e.score,t)},1);this.scoreTxt=Math.max(10,Math.round(100*this.score))+"%";this.type=a.GOODGROUP;e.some(function(t){return t.type!==a.GOOD&&t.type!==a.KEEP})&&(this.type=a.BADGROUP);this.text=i.slice(0,3).join(", ");i.length>3&&(this.text+=",  "+t.get("DataPrep.Recommendations.NMore",i.length-3));this.left_text=this.text;var o=e.map(function(t){return t.right.field});this.right_text=o.slice(0,3).join(", ");o.length>3&&(this.right_text+=",  "+t.get("DataPrep.Recommendations.NMore",o.length-3));this.show=true;this.left={table:n.left.table,fields:e.map(function(t){return t.left})};this.right={table:n.right.table,fields:e.map(function(t){return t.right})};this.status={resolution:void 0};this.templateSrc=this.type===a.BADGROUP?"association-panel-group-bad.ng.html":"association-panel-group-good.ng.html"}c.prototype.isDefault=function(){return true};function d(e){var i=e.map(function(t){return t.left.field});var n=e[0];this.groupId=l(n.left.table,n.right.table);this.id=this.groupId+":break:"+i.join(",");this.score=0;this.scoreTxt="";this.type=a.BREAK;this.text=t.get("DataPrep.Recommendations.BreakAssociation");this.show=true;this.left={table:n.left.table,fields:e.map(function(t){return t.left})};this.right={table:n.right.table,fields:e.map(function(t){return t.right})};this.status={resolution:void 0};this.templateSrc="association-panel-message.ng.html"}d.prototype.isDefault=function(){return false};function u(e,i){this.groupId=l(e,i);this.id=this.groupId+":none";this.score=0;this.type=a.NONE;this.text=t.get("DatePrep.Recommendations.NoAssociation");this.show=true;this.left={table:e};this.right={table:i};this.status={resolution:void 0};this.templateSrc="association-panel-message.ng.html"}u.prototype.isDefault=function(){return true};function p(e,i){this.groupId=l(e,i);this.id=this.groupId+":custom";this.score=0;this.type=a.CUSTOM;this.text=t.get("DataPrep.Recommendations.CustomAssociation");this.show=true;this.left={table:e};this.right={table:i};this.status={resolution:void 0};this.templateSrc="association-panel-custom.ng.html"}p.prototype.isDefault=function(){return false};function f(t){if(!t)return;this.id=t.groupId;this.leftTable=t.left.table;this.rightTable=t.right.table;this.associations=[];this.name=t.left.table+"   -   "+t.right.table}f.prototype.add=function(t){this.associations.push(t)};f.prototype.cloneForEditing=function(){var t=new f;t.id=this.id;t.leftTable=this.leftTable;t.rightTable=this.rightTable;t.associations=this.associations;t.name=this.name;return t};function v(t){var s=[];function d(){s.length=0}function u(e){return t.getTargetTableModel(e)}function v(e){d();var i={};e.associatedFields.forEach(function(e){var n=o(e);if(!(n in i)){var a=new r(t,e);i[n]=a;s.push(a)}})}function g(){var t={};s.forEach(function(e){var i=t[e.groupId];i||(t[e.groupId]=[e.left.table,e.right.table])});var e=[];for(var i in t){var n=t[i];e.push(m(n[0],n[1]))}return e}function m(n,o,d){var v;var g={groupId:l(n,o),left:{table:n},right:{table:o}};var m=new f(g);s.filter(function(t){return t.groupId===m.id}).filter(function(t){return t.type!==a.BAD||t.doesAssociationExist()}).forEach(function(t){var e=t.cloneForEditing(m.leftTable);e.type===a.RECOMMENDATION&&e.doesAssociationExist()&&(e.type=a.GOOD);m.associations.push(e)});if(d){var b,h;if(d.links.length>2){b=e.find(d.links,function(t){return t.query.name===n});h=e.find(d.links,function(t){return t.query.name===o})}else{b=d.links[0];h=d.links[1]}var y={fieldL:{fieldName:b.field.name,tableName:b.query.name},fieldR:{fieldName:h.field.name,tableName:h.query.name},associationScore:0,associationStatus:a.BAD};v=e.find(m.associations,function(t){var i={fieldName:t.right.field,tableName:t.right.table};var n={fieldName:t.left.field,tableName:t.left.table};return e.isEqual(y.fieldL,i)&&e.isEqual(y.fieldR,n)||e.isEqual(y.fieldL,n)&&e.isEqual(y.fieldR,i)});if(!v){var T=new r(t,y);T.type=a.CUSTOM;T.isDefault=function(){return true};m.associations.push(T)}}var M=u(m.leftTable),w=u(m.rightTable);var S=i.LoadModelAssociations.getAssociationNamesBetween(t,M,null,w,null);S.forEach(function(e){var n=i.LoadModelAssociations.getAssociation(t,e);var o=n.nodes.filter(function(t){if(M)return t.table.data.id===M.data.id});var l=o.length>0?o[0].field:null;var s=n.nodes.filter(function(t){if(w)return t.table.data.id===w.data.id});var c=s.length>0?s[0].field:null;if(l&&c){var d=m.associations.some(function(t){return t.left.field===l.name&&t.right.field===c.name});if(!d){var u={fieldL:{tableName:M.data.name,fieldName:l.name},fieldR:{tableName:w.data.name,fieldName:c.name},associationScore:0,associationStatus:a.BAD};var p=new r(t,u);m.associations.push(p)}}});m.associations.sort(function(t,e){return e.score-t.score});if(v){var D=e.indexOf(m.associations,v);if(D>-1){m.associations.splice(D,1);m.associations.unshift(v)}}var x=m.associations.filter(function(t){return t.doesAssociationExist()});if(x.length>1){x.forEach(function(t){if(t.type===a.GOOD){t.type=a.RECOMMENDATION;t.show=true}else t.show=false});m.associations.unshift(new c(x));m.associations.push(new p(m.leftTable,m.rightTable))}else{var C=m.associations.filter(function(t){return t.type===a.BAD});0===C.length&&m.associations.push(new p(m.leftTable,m.rightTable))}m.associations.filter(function(t){return t.type===a.GOOD&&!t.isDefault()}).forEach(function(t){t.type=a.RECOMMENDATION});var E=x.map(function(t){return t.left});var A=x.map(function(t){return t.right});m.associations.filter(function(t){return t.type===a.RECOMMENDATION||t.type===a.KEEP}).forEach(function(t){t.affected.left=E;t.affected.right=A});return m}function b(e,a){var o=u(e.leftTable);var l=u(e.rightTable);var s=a.left.field;var r=a.right.field;var c=n.getTargetFieldByName(o,s).id;var d=n.getTargetFieldByName(l,r).id;var p=i.LoadModelAssociations.generateAssociationName(t,o,s,l,r);var f={table1:o,key1:[{fieldId:c}],table2:l,key2:[{fieldId:d}],name:p};n.setAssociation(t,f)}function h(e,i){e.resolving=true;if(i.type===a.RECOMMENDATION){b(e,i);t.setProperties()}e.resolving=false}return{clear:d,setAssociationData:v,getAllRecommendations:g,getRecommendation:m,resolve:h}}return{create:v,ASSOCIATION:a,extractCommonFieldName:s}}.apply(e,n),void 0!==a&&(t.exports=a))},1797:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(1003)],a=function(t){t.service("qvGridColumnHighlightService",["qvGridObjectDataService",function(t){var e;function i(t,e){var i=e.filter(function(e){return e.text===t});return 1===i.length?i[0].dataColIx:-1}e={grid:null,headers:[],init:function t(e,i){this.grid=e;this.headers=i},highlightColumnByName:function e(n,a){if(!this.grid)return;1===arguments.length&&(a=true);var o=i(n,this.headers);var l=t.getCellsInColumn(this.grid,"data",o);l.forEach(function(t){t.columnHighlighted=a})},resetHighlightedColumns:function e(){var i;var n=this.headers.length;for(i=0;i<n;++i)t.getColumnCells(this.grid,i).forEach(function(t){t.columnHighlighted=false})}};return e}])}.apply(e,n),void 0!==a&&(t.exports=a))},1798:function(t,e,i){"use strict";var n,a;!(n=[i(2460),i(1799),i(91)],a=function(t,e,i){var n=function t(e,i){this.functions=this.preprocessFunctionSignatures(e||{});this.fields=i||[];this.errors=[]};function a(t,e){if(!t)return;if(t.args)t.args.forEach(function(t){a(t,e)});else{t.left&&a(t.left,e);t.right&&a(t.right,e)}e(t)}n.prototype={compile:function e(i){var n=this;this.str=i;var a=[];try{this.ast=null;this.ast=t.parse(i);var o=this.getUsedFunctions();o.forEach(function(t){n.checkFunctionArguments(t,a)});var l=this.getUsedFields();l.forEach(function(t){n.checkField(t,a)})}catch(t){a.push(t)}this.errors.length=0;if(a.length){a.forEach(function(t){n.errors.push(t)});return a}},preprocessFunctionSignatures:function t(e){var i={};function n(t,e){e.count=e.count||0;for(var i=0;i<t.length;i++){if("..."===t[i])return true;if(Array.isArray(t[i])){e.count++;if(n(t[i],e))return true}}return false}for(var a in e){var o=e[a].slice(0);for(var l=0;l<o.length;l++)if(Array.isArray(o[l])){o.atLeast=o.atLeast||l;var s={count:l+1};n(o[l],s)?o.lessOrEqThan=Number.MAX_VALUE:o.lessOrEqThan=s.count}o.atLeast=o.atLeast||o.length;o.lessOrEqThan=o.lessOrEqThan||o.length;i[a.toLowerCase()]=o}return i},checkFunctionArguments:function t(e,n){var a;var o=e.token.value;var l=e.args.length+1;var s=this.functions[o.toLowerCase()];if(s){if(l<s.atLeast){a=s.atLeast!==s.lessOrEqThan?i.get("DataManager.GridEditor.Expression.InvalidNumberOfArgumentsAtLeast",[o,s.atLeast-1]):i.get("DataManager.GridEditor.Expression.InvalidNumberOfArgumentsExact",[o,s.atLeast-1]);n.push({msg:a,offset:e.token.offset})}else if(l>s.lessOrEqThan){a=i.get("DataManager.GridEditor.Expression.InvalidNumberOfArgumentsLessThan",[o,s.lessOrEqThan-1]);n.push({msg:a,offset:e.token.offset})}}else{a=i.get("DataManager.GridEditor.Expression.InvalidFunction",o);n.push({msg:a,offset:e.token.offset})}},checkField:function t(e,a){var o=e.token.value;o='"'===o[0]||"["===o[0]?o.slice(1,-1):o;o=n.unescapeFieldName(o);-1===this.fields.indexOf(o)&&a.push({msg:i.get("DataManager.GridEditor.Expression.InvalidField",o),offset:e.token.offset})},find:function t(e){var i=[];a(this.ast,function(t){e(t)&&i.push(t)});return i},getUsedFields:function t(){var e=function t(e){return"FIELD"===e.type||"IDENTIFIER"===e.type};return this.find(e)},getUsedFieldNames:function t(){return d(this.getUsedFields().map(function(t){return t.token.value}))},getUsedFunctions:function t(){var e=function t(e){return"FUNCTION"===e.type};return this.find(e)},getUsedFunctionNames:function t(){return d(this.getUsedFunctions().map(function(t){return t.token.value}))},getFieldTokenAtCursor:function t(e,i){var n,a=this.getUsedFields().sort(c);var o,l=this.str.split("\n");for(var s=0;s<a.length;s++){var r=a[s].token;o=0;for(var d=0;d<l.length;d++)if(o+l[d].length>r.offset&&d===i){n=e+o;if(n>=r.offset&&n<r.offset+r.value.length)return r}else o+=l[d].length}},renameField:function t(e,i){i=r(i);var n=this.getUsedFields().filter(function(t){var i=t.token;var n=o(i);return n===e}).sort(c);var a=this;n.forEach(function(t){a.str=s(a.str,t,i)});return this.compile(this.str)},toScript:function t(e,i){var n=this.str;var a={};if(!this.errors.length&&this.ast){var l=this.getUsedFields().filter(function(t){var i=t.token;var n=o(i);return e?!!e[n]:!!n}).sort(c);l.forEach(function(t){var l=o(t.token);var r=e?e[l]:l;a[r]=true;i&&(r="{{"+r+"}}");n=s(n,t,r)})}return{expression:n,fieldRefs:Object.keys(a)}}};function o(t){var e=t.value;"["!==e[0]&&'"'!==e[0]||(e=e.slice(1,-1));return n.unescapeFieldName(e)}function l(t,e,i,n){return t.substr(0,e)+n+t.substr(e+i)}function s(t,e,i){var n=e.token;return l(t,n.offset,n.value.length,i)}function r(t){if(t.match(/\]|\[/))return'"'+t+'"';return"["+t+"]"}function c(t,e){var i=t.token;var n=e.token;return i.offset>n.offset?-1:i.offset===n.offset?0:1}function d(t){return Object.keys(t.reduce(function(t,e){"undefined"===typeof t[e]&&(t[e]=true);return t},{}))}var u=[{pattern:"\\s+",symbol:"WS"},{pattern:"\\[",symbol:"LB"},{pattern:"\\]",symbol:"RB"},{pattern:"\\w+#?",symbol:"IDENTIFIER"},{pattern:"\\(",symbol:"LP"},{pattern:"\\)",symbol:"RP"},{pattern:"\\[",symbol:"LB"},{pattern:"\\]",symbol:"RB"},{pattern:"\\{",symbol:"LCB"},{pattern:"\\}",symbol:"RCB"},{pattern:"\\,",symbol:"COMMA"},{pattern:"\\<",symbol:"LOWER"},{pattern:"\\>",symbol:"GREATER"}];n.getFunctionSignatures=function(t,e){var i={};t&&e.forEach(function(e){var a=n.getFunctionSignature(t,e);i[a.fnName]=a.args});return i};n.getFunctionSignature=function t(i,n){var a=i.getSignatureFromKeyword(n);var o=e.tokenize(a,u).filter(function(t){return"WS"!==t.symbol});return p(o)};n.fromScript=function(t,e){return t.replace(/{{([^{}]*)}}/g,function(t,i){var n=e&&e[i]||i;if(n&&"="==n.charAt(0))return n.substring(1);return n})};n.escapeFieldName=function(t){var i;t=t.trim();try{i=e.tokenize(t)}catch(t){i=void 0}if(!i||i.length>1||"IDENTIFIER"!==i[0].symbol){t=t.replace(/\]/g,"]]");t="["+t+"]"}return t};n.unescapeFieldName=function(t){return t.replace(/\]\]/g,"]")};function p(t){var e;t.index=0;var n=t[0].value;t.index+=2;if("LP"!==t[t.index].symbol)throw Error(i.get("DataManager.GridEditor.Expression.MissingLeftFunctionSignatureParenthesis"));t.index++;e=f(t);e.unshift(n);return{fnName:t[1].value,args:e}}function f(t){var e=[];while(t.length-t.index>=2){if("LB"===t[t.index].symbol&&"COMMA"!==t[t.index+1].symbol){t.index++;e.push(f(t));t.index++;break}e.push(t[t.index+1].value);t.index+=2;if("COMMA"!==t[t.index].symbol){if("LB"===t[t.index].symbol&&"COMMA"===t[t.index+1].symbol){t.index+=2;e.push(f(t));if("RB"!==t[t.index].symbol)throw Error(i.get("DataManager.GridEditor.Expression.MissingRightFunctionSignatureBracket"));t.index++;break}if("LCB"===t[t.index].symbol&&"COMMA"===t[t.index+1].symbol){t.index+=3;if("RCB"!==t[t.index].symbol)throw Error(i.get("DataManager.GridEditor.Expression.MissingRightFunctionSignatureCurlyBrace"));t.index++;e.push(["..."]);break}break}t.index++}return e}return n}.apply(e,n),void 0!==a&&(t.exports=a))},1799:function(t,e,i){"use strict";var n,a;!(n=[],a=function(){var t=[{pattern:"\\s+",symbol:"WS"},{pattern:"\\d+(?:\\.\\d+)?",symbol:"NUMBER"},{pattern:"'[^']*'",symbol:"STRING"},{pattern:'"[^"]*"',symbol:"FIELD"},{pattern:"\\[(?:[^\\]]|]])*\\]",symbol:"FIELD"},{pattern:"<>",symbol:"NOT_EQUAL"},{pattern:"=",symbol:"EQUAL"},{pattern:"<=",symbol:"LOWER_EQUAL"},{pattern:"<",symbol:"LOWER"},{pattern:">=",symbol:"GREATER_EQUAL"},{pattern:">",symbol:"GREATER"},{pattern:"\\+",symbol:"ADD"},{pattern:"-",symbol:"SUB"},{pattern:"\\*",symbol:"MULT"},{pattern:"\\/",symbol:"DIV"},{pattern:"\\&",symbol:"CONCAT"},{pattern:"like",symbol:"LIKE"},{pattern:"\\(",symbol:"LP"},{pattern:"\\)",symbol:"RP"},{pattern:"\\,",symbol:"COMMA"},{pattern:"\\w+#?",symbol:"IDENTIFIER"}];var e={pattern:".+",symbol:"UNRECOGNIZED SYMBOL"};var i={};function n(t){t=t.slice(0);t.push(e);var i=t.shift();var n=t.reduce(function(t,e){return t+"|("+e.pattern+")"},"("+i.pattern+")");t.unshift(i);var a=new RegExp(n,"gi");a.rules=t;return a}var a=n(t);i.tokenize=function(t,i){var o;var l=[];if(!t)return l;var s=a;i&&(s=n(i));i=s.rules;s.lastIndex=0;do{var r;var c=s.lastIndex;o=s.exec(t);if(o)for(var d=1;d<o.length;d++)if("undefined"!==typeof o[d]){r=i[d-1].symbol;l.push({symbol:r,value:o[d],offset:c});break}if(!o||r===e.symbol)throw{symbol:r,value:t[c],offset:c}}while(o&&s.lastIndex<t.length);return l};return i}.apply(e,n),void 0!==a&&(t.exports=a))},1800:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(54),i(105),i(91),i(1008)],a=function(t,e,i,n,a){t.service("fieldSplitHelperService",[function(){return new o}]);function o(){this.idCount=0}o.prototype.treeToList=function(t,n,a){if(!t)return[{id:this.idCount++,data:n,text:true}];var o=t.del;var l=t.pos;var s=t.subFields;var r,c,d;if(void 0!==o){var u=n.split(o);var p=s[0].idx;var f=e.first(u,p);r=[{data:f.join(o),text:true}];var v=s[1].afterIdx;var g=e.rest(u,v);d=[{data:g.join(o),text:true}];c={data:o,delimiter:true}}else{r=[{data:n.slice(0,l),text:true}];d=[{data:n.slice(l),text:true}];c={data:"",position:true}}if(a===i.Visualization.Actions.SplitAddress){r[0].data=r[0].data.trim();d[0].data=d[0].data.trim()}if(s[0].splitInfo)r=this.treeToList(s[0].splitInfo,r[0].data,a);else{r[0].id=this.idCount++;s[0].id=r[0].id}if(s[1].splitInfo)d=this.treeToList(s[1].splitInfo,d[0].data,a);else{d[0].id=this.idCount++;s[1].id=d[0].id}t.id=this.idCount++;c.id=t.id;var m=e.union(r,[c],d);return m};o.prototype.updateTreePropsByDefn=function(t,e){var i=this.getLeafNodes(t);var n=e.options.qHyperCubeDef.qDimensions;i.forEach(function(t,e){var a={};a.name=n[e].qDef.qFieldLabels[0];a.selected=true;l(i[e],a)});return t};o.prototype.updateAllFieldProperties=function(t,e){var i=this.getLeafNodes(t);i.forEach(function(t,i){l(t,e[i])})};o.prototype.updateFieldProperties=function(t,e,i){var n=this.getLeafNodes(t);l(n[e],i);return n[e]};function l(t,e){for(var i in e)t[i]=e[i]}o.prototype.getNodeById=function(t,e){return u(t,e)};o.prototype.addDelimiterToNodeById=function(t,e,i,n){var a={del:i,subFields:[{idx:n},{afterIdx:n}]};if(!t)return a;var o=this.getNodeById(t,e);o&&(o.splitInfo=a);return t};o.prototype.addPositionToNodeById=function(t,e,i,n){var a={pos:i,subFields:[{idx:1},{afterIdx:1}]};void 0!==n&&i!==n&&(a.subFields[1].splitInfo={pos:n-i,subFields:[{idx:1},{afterIdx:1}]});if(!t)return a;var o=this.getNodeById(t,e);o&&(o.splitInfo=a);return t};o.prototype.deleteNodeById=function(t,e,i){if(t.id===e)return p(t,e,i);g(t,e,i);return t};o.prototype.getLeafNodes=function(t){var e=[];t&&this.visitLeafNodes(t,function(t){e.push(t)});return e};o.prototype.visitLeafNodes=function(t,e){if(!t.subFields&&!t.splitInfo){e(t);return}!t.subFields&&t.splitInfo&&(t=t.splitInfo);this.visitLeafNodes(t.subFields[0],e);this.visitLeafNodes(t.subFields[1],e)};o.prototype.validateTree=function(t,e,i){var n=this.getLeafNodes(i);var o;var l=n.length>1;var s=false;var r=true;if(l){o=n.filter(function(t){return t.selected});if(o.length>0){s=true;var c={};o.some(function(i){var n=Boolean(i.name);var o=null;if(n){o=a.validateFieldName(t,e,i.name);n=0===o.length}n&&c[i.name]&&(n=false);r=r&&n;c[i.name]=true;return!r})}}return l&&s&&r};o.prototype.validateName=function(t,e,i,o,l){var s={isValid:true,errors:[]};var r=o||"";var c=a.validateFieldName(t,e,r);s.isValid=0===c.length;s.errors=c;if(s.isValid){var d=this.getLeafNodes(i);d.some(function(t,e){if(t.selected&&o===t.name&&e!==l){s.isValid=false;s.errors.push({type:"error",msg:n.get("SplitAction.Header.Invalidation.DuplicateName")})}return!s.isValid})}return s};o.prototype.getNumSplits=function(t){var e=0;d(t,function(t){r(t)||e++});return e};o.prototype.checkIdenticalDelimiters=function(t){if(!s(t))return false;var e=t.del;var i=true;d(t,function(t){c(e,t)||(i=false)});return i};function s(t){return t&&(t.subFields||t.splitInfo)}function r(t){return t.pos||t.splitInfo&&t.splitInfo.pos}function c(t,e){if(!e.del&&e.splitInfo)return t===e.splitInfo.del;return t===e.del}function d(t,e){if(!s(t))return;e(t);var i;var n;if(t.subFields){i=t.subFields[0];n=t.subFields[1];s(i)&&d(i,e);s(n)&&d(n,e)}else if(t.splitInfo&&t.splitInfo.subFields){i=t.splitInfo.subFields[0];n=t.splitInfo.subFields[1];s(i)&&d(i,e);s(n)&&d(n,e)}}function u(t,e){if(t.id===e)return t;if(t.subFields[0].id===e)return t.subFields[0];if(t.subFields[1].id===e)return t.subFields[1];if(t.subFields[0].splitInfo){var i=u(t.subFields[0].splitInfo,e);if(i)return i}if(t.subFields[1].splitInfo){var n=u(t.subFields[1].splitInfo,e);if(n)return n}return}function p(t,i,n){var a="";if(void 0!==t.del&&t.subFields[1].splitInfo&&void 0!==t.subFields[1].splitInfo.pos){var l=(new o).getLeafNodes(t.subFields[0]);a+=t.del;e.each(n,function(t){var i=e.find(l,function(e){return t.id===e.id});i&&(a+=t.data)})}if(t.subFields[0].splitInfo&&t.subFields[1].splitInfo){var s=t.subFields[0];while(s.splitInfo)s=s.splitInfo.subFields[1];s.splitInfo=t.subFields[1].splitInfo;var r=t.del;var c=e.find(n,function(t){return t.id===s.id});c&&(r+=c.data);r.length&&void 0!==t.subFields[1].splitInfo.pos&&(t.subFields[1].splitInfo.pos+=r.length);return t.subFields[0].splitInfo}if(t.subFields[0].splitInfo)return t.subFields[0].splitInfo;if(t.subFields[1].splitInfo){void 0!==t.del?f(t.subFields[1].splitInfo,t.del,t.subFields[1].afterIdx):void 0!==t.pos&&v(t.subFields[1].splitInfo,t.pos);a.length&&void 0!==t.subFields[1].splitInfo.pos&&(t.subFields[1].splitInfo.pos+=a.length);return t.subFields[1].splitInfo}return}function f(t,e,i){if(t.del===e){t.subFields[0].idx+=i;t.subFields[1].afterIdx+=i}t.subFields[0].splitInfo&&f(t.subFields[0].splitInfo,e,i)}function v(t,e){void 0!==t.pos&&(t.pos+=e);t.subFields[0].splitInfo&&v(t.subFields[0].splitInfo,e)}function g(t,e,i){if(t.subFields[0].splitInfo){if(t.subFields[0].splitInfo.id===e){t.subFields[0].splitInfo=p(t.subFields[0].splitInfo,e,i);return true}var n=g(t.subFields[0].splitInfo,e,i);if(n)return true}if(t.subFields[1].splitInfo){if(t.subFields[1].splitInfo.id===e){t.subFields[1].splitInfo=p(t.subFields[1].splitInfo,e,i);return true}var a=g(t.subFields[1].splitInfo,e,i);if(a)return true}}return o}.apply(e,n),void 0!==a&&(t.exports=a))},1801:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(495),i(235),i(513),i(1150)],a=function(t,e){t.service("qvDataManagerConcatService",["qvDataManagerViewService","qvDataManagerSelectionService","qvDataManagerDataService","$q",function(t,i,n,a){function o(){this.sizes={HIDDEN:"hidden",NORMAL:"normal",LARGE:"large"};this.isInForcedConcatMode=false;this.dirty=false}o.prototype.setDirty=function(t){this.dirty=t};o.prototype.isForcedConcatMode=function(){return this.isInForcedConcatMode};o.prototype.toggleForcedConcatMode=function(){if(this.isInForcedConcatMode){this.hide();t.subViewHidden("tableSelectionBottom",this)}else{this.isInForcedConcatMode=true;i.setSelectionMode("multiple",{limit:2,selectionOwner:this,noscripttables:true,nodeleted:true,allowSelectionChange:function(){return a(function(t){this.dirty?this.promptChangeSelection().then(function(e){t(e)}):t(true)}.bind(this))}.bind(this)});t.subViewShown("tableSelectionBottom",this,{modalMode:"selectionOnly"})}};o.prototype.promptChangeSelection=function(){return a(function(t){e.confirmAction({header:"DataManager.ForcedConcatDialog.ChangeSelectionTitle",content:"DataManager.ForcedConcatDialog.ChangeSelectionContent",declineButtonTitle:"Common.Cancel",confirmButtonTitle:"Common.Continue"}).resultPromise.then(function(){t(true)},function(){t(false)})})};o.prototype.hide=function(){this.isInForcedConcatMode=false;i.setSelectionMode("single",{});i.setSelectedObjects([])};o.prototype.isTableSelectionCurrentlyAvailable=function(){return t.isTableSelectionCurrentlyAvailable()};o.prototype.shouldEnableForcedConcat=function(){return true};o.prototype.getForcedConcatSize=function(){return this.isInForcedConcatMode?this.sizes.NORMAL:this.sizes.HIDDEN};o.prototype.concatenateQueries=function(t,e,i){var a=this;return n.forceConcatenatedQuery(t,e,i).then(function(){a.toggleForcedConcatMode()})};o.prototype.getSuggestedMappings=function(t){return n.getForcedConcatRecommendations(t)};o.prototype.canConcatenate=function(t){var e=false;t.table2&&t.table2.table&&t.mappings.length>=0&&(e=true);var i=false;var n=false;t.mappings.forEach(function(t){void 0!==t.leftField&&(i=true);t.rightField&&(n=true)});return e&&n&&i};o.prototype.countFieldMappings=function(t,e){var i=0;var n=0;t.mappings.forEach(function(t){void 0!==t.leftField&&i++;t.rightField&&n++});if("left"===e)return i;if("right"===e)return n};return new o}])}.apply(e,n),void 0!==a&&(t.exports=a))},2388:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=s(i(98));var a=s(i(2389));var o=s(i(2390));var l=s(i(2576));i(2577);function s(t){return t&&t.__esModule?t:{default:t}}var r={helpKey:"DataManager",loaderTranslationKey:"",titleTranslationKey:"",renderContent:function t(){return n.default.createElement(o.default,null)},renderMenuItems:function t(e){var i=e.closeMenu,a=e.showAddData;return n.default.createElement(l.default,{closeMenu:i,showAddData:a})},renderToolbarContent:function t(){return n.default.createElement(a.default,null)}};e.default=r;t.exports=e.default},2389:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=g(i(98));var a=v(i(116));var o=i(171);var l=v(i(48));var s=v(i(91));var r=v(i(103));var c=v(i(1081));var d=v(i(1039));i(175);var u=i(1096);var p=v(i(1044));var f=v(i(411));function v(t){return t&&t.__esModule?t:{default:t}}function g(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};n.get||n.set?Object.defineProperty(e,i,n):e[i]=t[i]}e.default=t;return e}function m(){m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};return m.apply(this,arguments)}function b(t){b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return b(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function T(t,e,i){e&&y(t.prototype,e);i&&y(t,i);return t}function M(t,e){if(e&&("object"===b(e)||"function"===typeof e))return e;return S(t)}function w(t){w=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return w(t)}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&x(t,e)}function x(t,e){x=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return x(t,e)}function C(){c.default.reloadData();r.default.trackEvent(r.default.customEvents.LOAD_DATA_CLICK)}var E=function(t){D(e,t);function e(t){var i;h(this,e);i=M(this,w(e).call(this,t));i.state={isDataManagerDirty:void 0,bubbleViewButtonPressed:true,tableViewButtonPressed:false,hasNoTable:c.default.hasNoTable()};i.toggleBubbles=i.toggleBubbles.bind(S(i));i.toggleTables=i.toggleTables.bind(S(i));return i}T(e,[{key:"componentDidMount",value:function t(){var e=this;this.getView();d.default.waitForInitialization().then(function(){return e.setState({hasNoTable:c.default.hasNoTable()})});this.unwatchIsDataManagerDirty=l.default.$rootScope.$watch("isDataManagerDirty",function(t){e.setState(function(){return{isDataManagerDirty:t}})})}},{key:"componentWillUnmount",value:function t(){this.unwatchIsDataManagerDirty()}},{key:"getView",value:function t(){var e=l.default.getService("qvDataManagerViewService").getSelectedView();"bubbles"===e?this.setState({bubbleViewButtonPressed:true,tableViewButtonPressed:false}):this.setState({bubbleViewButtonPressed:false,tableViewButtonPressed:true})}},{key:"toggleBubbles",value:function t(){this.setState({bubbleViewButtonPressed:true,tableViewButtonPressed:false});l.default.getService("qvDataManagerViewService").setSelectedView(l.default.getService("qvDataManagerViewService").views.BUBBLES);r.default.trackEvent(r.default.customEvents.BUBBLE_VIEW_CLICK)}},{key:"toggleTables",value:function t(){l.default.getService("qvDataManagerViewService").setSelectedView(l.default.getService("qvDataManagerViewService").views.OVERVIEW);this.setState({bubbleViewButtonPressed:false,tableViewButtonPressed:true})}},{key:"render",value:function t(){var e=this.props,i=e.appLayout,a=e.isButtonTab;var r=this.state,c=r.isDataManagerDirty,d=r.bubbleViewButtonPressed,u=r.tableViewButtonPressed,p=r.hasNoTable;var f=l.default.getService("qvGlobalSelectionsService");var v=f.isSelectActive()||f.getCaoActive()||!c&&p;var g="lui-buttongroup__button";c&&(g+=" lui-button--success");if(!i.permissions.update)return null;return n.default.createElement(n.Fragment,null,n.default.createElement(o.ButtonGroup,{className:"qs-toolbar__element"},n.default.createElement(o.Button,{tid:"datamanager-toolbar-bubbleView",title:s.default.get("DataManager.Toolbar.BubbleView.Tooltip"),pressed:"dataManagerViewService.selectedView === $scope.dataManagerViewService.views.BUBBLES",onClick:this.toggleBubbles,className:d?"lui-buttongroup__button lui-active":"lui-buttongroup__button"},n.default.createElement("span",{className:"lui-button__icon"},n.default.createElement(o.Button.Icon,{name:"bubbles"})),a?null:n.default.createElement("span",{className:"lui-button__text"},s.default.get("DataManager.Toolbar.BubbleView.Tooltip"))),n.default.createElement(o.Button,{tid:"datamanager-toolbar-tableView",title:s.default.get("DataManager.Toolbar.TableView.Tooltip"),onClick:this.toggleTables,className:u?"lui-buttongroup__button lui-active":"lui-buttongroup__button"},n.default.createElement("span",{className:"lui-button__icon"},n.default.createElement(o.Button.Icon,{name:"table"})),a?null:n.default.createElement("span",{className:"lui-button__text"},s.default.get("DataManager.Toolbar.TableView.Tooltip")))),n.default.createElement(o.ButtonGroup,{className:"qs-toolbar__element"},n.default.createElement(o.Button,{tid:"datamanager-toolbar-runscript",title:s.default.get("datamanager.toolbar.qvdcaching.runscript.tooltip"),onClick:C,className:g,disabled:v},a?null:n.default.createElement("span",{className:"lui-button__text"},s.default.get("scripteditor.toolbar.runscript")),n.default.createElement("span",{className:"lui-button__icon"},n.default.createElement(o.Button.Icon,{name:"play"})))))}}]);return e}(n.Component);E.propTypes={appLayout:a.default.object.isRequired,isButtonTab:a.default.bool.isRequired};var A=(0,f.default)(function(t){return n.default.createElement(u.ToolbarConsumer,null,function(e){return n.default.createElement(E,m({},t,{isButtonTab:e<=p.default.medium}))})});e.default=A;t.exports=e.default},2390:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=u(i(98));var a=u(i(116));var o=u(i(91));var l=u(i(1043));var s=u(i(1275));var r=u(i(411));var c=u(i(1148));var d=u(i(2391));function u(t){return t&&t.__esModule?t:{default:t}}function p(){p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};return p.apply(this,arguments)}function f(t){var e=t.isSmallDevice,i=t.appLayout;if(!i.permissions.update)return n.default.createElement(s.default,null,o.default.get("UnsupportedDevice.DataSpaceEditorMessage"));if(e)return n.default.createElement(c.default,null);return n.default.createElement(d.default,t)}f.propTypes={isSmallDevice:a.default.bool.isRequired,app:a.default.object.isRequired,appLayout:a.default.object.isRequired};var v=(0,r.default)(function(t){return n.default.createElement(l.default,null,function(e){return n.default.createElement(f,p({},t,{isSmallDevice:e}))})});e.default=v;t.exports=e.default},2391:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=f(i(98));var a=p(i(116));var o=p(i(11));var l=p(i(94));var s=p(i(2392));var r=p(i(1151));var c=p(i(1005));var d=p(i(90));var u=p(i(177));function p(t){return t&&t.__esModule?t:{default:t}}function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};n.get||n.set?Object.defineProperty(e,i,n):e[i]=t[i]}e.default=t;return e}function v(t){v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return v(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(t,n.key,n)}}function b(t,e,i){e&&m(t.prototype,e);i&&m(t,i);return t}function h(t,e){if(e&&("object"===v(e)||"function"===typeof e))return e;return y(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t){T=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return T(t)}function M(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&w(t,e)}function w(t,e){w=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return w(t,e)}var S=function(t){M(e,t);function e(){g(this,e);return h(this,T(e).apply(this,arguments))}b(e,[{key:"componentDidMount",value:function t(){var e=this.props.appLayout;var i=d.default.getParameterByName("app");r.default.init(i);l.default.setView(l.default.Views.dataManager);l.default.setState(l.default.States.analysis);u.default.setData(i,"datamanager");if(e.permissions.update){this.component=(0,o.default)(this.elem).showComponent(s.default);c.default.setBeforeUnloadFunctions(null,true)}}},{key:"componentWillUnmount",value:function t(){try{this.component.destroy()}catch(t){console.error(t)}}},{key:"render",value:function t(){var e=this;return n.default.createElement("div",{id:"qv-data-container",ref:function t(i){e.elem=i}})}}]);return e}(n.PureComponent);S.propTypes={appLayout:a.default.object.isRequired};var D=S;e.default=D;t.exports=e.default},2392:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(90),i(11),i(95),i(54),i(2393),i(2394),i(93),i(1340),i(97),i(91),i(135),i(184),i(199),i(1156),i(151),i(1287),i(493),i(105),i(2395),i(2396),i(2398),i(1790),i(2412),i(2414),i(103),i(611),i(235),i(2417),i(2448),i(2536),i(1195),i(2560),i(1801),i(2567),i(513),i(1681),i(1150),i(2571),i(1279),i(255),i(2572),i(2574),i(1332)],a=function(t,e,i,n,a,o,l,s,r,c,d,u,p,f,v,g,m,b,h,y,T,M,w,S,D,x){var C={restrict:"EA",scope:{},template:o,controller:["$scope","$rootScope","$element","$q","$timeout","qvDataManagerDataService","qvDataManagerViewService","qvDataManagerSelectionService","qvDataManagerPreviewService","qvDataManagerConcatService","qvDataManagerDataService","qvDataManagerSpinnerService","qvDataManagerEditorDetailsViewService","addDataStateService","luiPopover","luiDialog","qvDataManagerAssociationService","qvDataManagerCapabilityService",function(o,C,E,A,k,I,F,O,P,q,L,V,N,B,$,_,R,j){var z=false;var H=false;o.isIos=e.isIos();o.editorDetailsViewService=N;o.previewService=P;o.selectionService=O;o.spinnerService=V;o.viewService=F;o.concatService=q;o.selectedTable=null;o.bubblesPopupMessageShownOnce=false;o.loadWarnings=null;o.warningMessage="";o.errorDetails={};o.gridEditorBoxObj={hidden:true};o.tableToBeEdited={table:null};o.spinnerService.elementToAppendSpinner=E.find(".qv-data-manager")[0];o.viewService.initializationComplete=false;o.gridEditStyling={left:"0px",right:"0px",bottom:"0px",opacity:"0",scale:"scale(0.1,0.2)"};o.enabledAssociateDebug=f.ASSOCIATE;o.enabledPerformanceDebug=f.DM_PERF;o.previewToggleTooltipTitle=Z;o.isAssociationsRecommendationsPanelOpened=true;o.splitIndividualTablesFeature=j.getFlag("sui-3868");o.joinTablesFlag=j.getFlag("DM_join_tables");m.Defaults.instance().setTreatConcatAsForcedConcat(true);o.disableBarButtons=function(){var t=false;F.isShowingSubviewWithBehaviour("modalMode","selectionOnly")&&(t=true);return t};o.showAssociationsRecommendations=function(){return o.isAssociationsRecommendationsPanelOpened&&o.associationGraph&&o.isTables};o.splitService={splitSelected:function t(e){if(o.selectedTable)if(o.splitIndividualTablesFeature)if(o.selectedTable.sourceQueries.length>2){e.stopPropagation();var i=o.viewService.selectedView;o.expansionModel.onTableExpanded(o.selectedTable,i)}else o.selectionService.splitObject();else o.selectionService.splitObject()},openSplitTablesDialog:function t(){o.selectedTable&&o.onTableSplit(o.selectedTable)}};o.onTableSplit=function(t){t.sourceQueries.length>2?_.show({template:S.template,controller:S.controller,input:{context:{selectedTable:t}},closeOnEscape:true}):o.selectionService.splitObject()};o.isTranformationsPopupActive=function(){return z};o.importScriptedTables=function(){I.convertScriptedToManaged("all")};o.openTransformationsPopover=function(t){z=true;var e=$.show({template:l,alignTo:t.target,variant:o.variant,controller:["$scope",function(t){t.syncScriptedDisabled=K();t.lineageDisabled=Q();t.openForceConcatDisabled=J();if(o.joinTablesFlag){t.joinTablesFlag=o.joinTablesFlag;t.openJoinTablesDisabled=Y();t.openJoinTables=function(){var t=o.selectionService.getSelectedLinkSourceObjects();if(a.isEmpty(o.loadModel.associations))o.previewService.previewJoinMessage(d.get("DataManager.JoinTables.MustHaveAssociation"));else if(t&&t.length>0)_.show({template:D.template,controller:D.controller,input:{context:{associationLink:t,loadModel:o.loadModel}},closeOnEscape:true});else{o.previewService.viewService.setAssociationEditorOpen(true);o.previewService.previewJoinMessage(d.get("DataManager.JoinTables.SelectAssociation"))}z=false;e.close()}}t.openForceConcat=function(){o.isAssociationsRecommendationsPanelOpened&&U();q.toggleForcedConcatMode();z=false;e.close()};t.importScriptedTables=function(){I.convertScriptedToManaged("all");z=false;e.close()};t.showLineage=function(){var t=O.getSelectedTables();z=false;e.close();_.show({template:w.template,controller:w.controller,input:{context:{lineageSelection:{queryId:t[0].data.id,name:t[0].data.name},loadModel:o.loadModel}}})}}],closeOnResize:true,closeOnEscape:true});e.closed.then(function(){z=false})};o.isTransformationsPopoverDisabled=function(){return!o.concatService.isTableSelectionCurrentlyAvailable()||(o.disableBarButtons()||!o.concatService.shouldEnableForcedConcat()||W())};o.$on(h.Events.Associations.ToggleAssociationsRecommendationsPanel,function(){U()});o.$on("bubblesStateChanged",function(){G()});function G(){L.getAllRecommendations().then(function(t){if(o.loadModel){var e=t.result.associationGraph;var i=R.unAssociatedRecommendations(e,o.loadModel);o.associationGraph=e;o.$broadcast(h.Events.Associations.UpdateAssociationsRecommendationsToolbarButtonState,{isAssociationsRecommendationsPanelOpened:o.isAssociationsRecommendationsPanelOpened,associationsCount:i.length})}})}function U(){var t=true;if(o.isAssociationsRecommendationsPanelOpened){var e=O.getSelectedObjects();e&&e.length&&e[0].preview&&O.setSelectedObjects([]);t=false}q.isForcedConcatMode()&&(t=false);G();R.setAssociationsToPreview([]);R.setAssociationSelectedToPreview(null);o.isAssociationsRecommendationsPanelOpened=t}function W(){if(o.tables)return K()&&J()&&Q();return true}function Q(){var t=false;if(0===O.getSelectedLinkSourceObjects().length){var e=O.getSelectedTables();e.length&&1==e.length&&"ScriptTable"!==e[0].sourceType&&(t=true)}return!t}function K(){return 0===o.tables.filter(function(t){return"ScriptTable"===t.sourceType}).length}function J(){return o.tables.filter(function(t){return"ScriptTable"!==t.sourceType}).length<2}function Y(){var t=o.selectionService.getSelectedLinkSourceObjects(),e=false;t&&t.length>0&&(e=void 0===t[0].association);return J()||e}function Z(){var t=o.previewPaneIsActive()&&o.previewPaneIsEnabled();return F.isGridEditorOpen()?t?d.get("DataManager.Footer.Preview.TooltipHideSTU"):d.get("DataManager.Footer.Preview.TooltipShowSTU"):t?d.get("DataManager.Footer.Preview.TooltipHide"):d.get("DataManager.Footer.Preview.TooltipShow")}function X(t,e){t||(e=null);it(e)}function tt(t){R.setAssociationsToPreview([]);R.setAssociationSelectedToPreview(null);o.history.reset();if(t===F.views.OVERVIEW){var e=O.getSelectedTableIds();if(e.length){var i=e.length?o.tables.filter(function(t){return e.indexOf(t.tableModel.data.id)>=0}):[];i.length>1?o.onTableSelected(i[0]):i.length>0?o.selectedTable!==i[0]&&o.onTableSelected(i[0]):o.onTableSelected(null,false)}at&&k(ut,0)}}function et(){var t=O.getSelectedTables();if(t.length&&1==t.length){var e=[];if("ScriptTable"===t[0].sourceType){var i=t[0].data.name;o.tables&&(e=o.tables.filter(function(t){return t.name==i}))}else{var n=t[0].data.id;o.tables&&(e=o.tables.filter(function(t){return t.id==n}))}e.length&&gt(e[0])}else if(o.selectedTable){o.selectedTable.selected=false;o.selectedTable=null}o.selectedTables=[];t.forEach(function(t){if(o.tables){var e=o.tables.filter(function(e){return e.id==t.data.id});o.selectedTables.push.apply(o.selectedTables,e)}});O.canClearFilters().then(function(t){o.canFilterSelectedTables=t})}function it(t){if(t&&o.viewService.getSelectedView()===o.viewService.views.BUBBLES){var e={width:window.innerWidth,height:window.innerHeight};var i=h.Toolbar.height;o.gridEditStyling.left=e.width/2-115+"px";o.gridEditStyling.right=e.width/2+115+"px";o.gridEditStyling.bottom=(e.height+i)/2+70+"px";o.gridEditorBoxObj.hidden=false}o.tableToBeEdited.table=t;o.history.reset()}o.viewService.SelectedViewChanged.bind(tt);o.viewService.OnGridEditorOpen.bind(X);o.$watchCollection("selectionService.selectedObjects",et);var nt=p.createGroup("dataManager",10);var at=false;function ot(){s.getApp().then(function(t){t.getLayout().then(function(e){if(!H&&!e.qIsOpenedWithoutData){H=true;t.Invalidated.unbind(ot);pt()}})})}u.isSuffixInUse("noData")&&s.getApp().then(function(t){o.$$destroyed||t.Invalidated.bind(ot)});function lt(t){var e=void 0;t&&t.data.propertiesList&&t.data.propertiesList.length>0&&(e=t.data.propertiesList[0].value);return e}function st(t){var e={name:t.data.name,id:t.data.id?t.data.id:null,noOfRows:t.noOfRows,sourceName:t.sourceName?t.sourceName:"",sourceType:t.sourceType?t.sourceType:"",numOfConcatenatedTables:t.data.sourceQueries?t.data.sourceQueries.length:0,fields:t.getFields(),status:t.getStatus(),isSourceTable:false,tableModel:t,visibleFieldCount:v.filterTransformationFieldsWithType(t,[g.DSMTypes.Transformations.lookupGeoInfo]).length,hasGeoField:v.doesTableContainTransformQuery(t,[g.DSMTypes.Transformations.geoPoint,g.DSMTypes.Transformations.lookupGeoInfo])};var i=[];var n;if(e.numOfConcatenatedTables)for(var a=0;a<t.data.sourceQueries.length;a++){var l=t.data.sourceQueries[a];"CrossTableQuery"==l.type&&(l=l.sourceQueries[0]);n=o.loadModel.getSourceTableByTableRefId(l.tableRef);var s={name:l.name,id:l.id?l.id:null,noOfRows:0,hint:lt(n),sourceName:n?n.getSourceName():"",sourceType:"Query",numOfConcatenatedTables:0,fields:l.fields,status:"",sourceQueries:[],isSourceTable:true};i.push(s)}else n=o.loadModel.getSourceTableByTableRefId(t.data.tableRef);n&&(e.isFiltered=n.isFiltered());e.sourceQueries=i;return e}function rt(t){o.loadWarnings=null;var e=L.getLoadModel().then(function(t){o.loadModel=t});var i=mt();return A.all([e,i]).then(function(e){if(!e[1])return L.getAllTargetTables(t).then(function(t){var e=t.tables.sort(vt);var i=[];for(var n=0;n<e.length;++n){var a=e[n];var l=st(a);i.push(l)}o.tables=i;ht();dt(t);ct();o.isTables=o.tables&&o.tables.length>0;return t.tables});return[]})}function ct(){var t=[];var e=[];var i=O.getSelectedObjects();var n=o.loadModel;var a=O.selectedObjectTypes;i.forEach(function(i){if(i.type===a.TABLE){var l=i.tableModel;var s=o.tables.filter(function(t){return t.tableModel.data.id===l.data.id});if(s.length>0){t.push(s[0]);e.push(i)}}else if(i.type===a.HUB){var r=n.associations[i.name];r&&r.length>2&&e.push(i)}else if(i.type===a.LINK){var c=i.objects.filter(function(t){return t.type===a.HUB});if(c.length>0){var d=n.associations[c[0].name];if(d){var u=i.objects.filter(function(t){return t.type===a.TABLE}).every(function(t){return d.some(function(e){return e.tableId===t.tableModel.data.id})});u&&e.push(i)}}else{var p=i.objects.map(function(t){return n.getTargetTableModelById(t.tableModel.data.id)});if(p.length>1){var f=b.LoadModelAssociations.getAssociationNamesBetween(n,p[0],null,p[1],null);f&&f.length>0&&e.push(i)}}}});i.length!==e.length&&O.setSelectedObjects([]);t.length&&o.onTableSelected(t[0]);o.$broadcast(h.Events.TablePreview.UpdateTablePreview)}function dt(t){o.loadWarnings=t;o.errorDetails.sync=false;o.errorDetails.syncOnly=false;t.scriptErrors?o.warningMessage=d.get("DataManager.Overview.WarningSyntaxError"):t.scriptExecutionErrors?o.warningMessage=d.get("DataManager.Overview.WarningScriptLoad"):o.warningMessage="";if(t.outOfSync){o.errorDetails.sync=true;if(!o.warningMessage){o.errorDetails.syncOnly=true;o.warningMessage=d.get("DataManager.Overview.WarningScriptOutOfSync")}}else t.scriptErrors||t.scriptExecutionErrors||(o.warningMessage="")}function ut(t){if(o.viewService.initializationComplete){o.expansionModel.expanded=false;at=false;return rt(t)}return A.resolve()}function pt(){o.splitIndividualTablesFeature&&(o.expansionModel.expanded=false);var t=A.defer();O.canClearFilters().then(function(t){o.canFilterSelectedTables=t});if(o.viewService.isGridEditorOpen()){at=true;t.resolve()}else o.viewService.getSelectedView()===o.viewService.views.BUBBLES?rt().then(function(){t.resolve()}):ut().then(function(){t.resolve()});return t.promise.then(function(){return L.getLoadModel().then(function(t){t.isDirty()?C.isDataManagerDirty=true:C.isDataManagerDirty=false})})}var ft=[{eventKey:h.Events.PubSub.StartSpinInvalidation,handler:function t(){V.waitForInvalidationSpinner()}},{eventKey:h.Events.PubSub.StopSpinInvalidation,handler:function t(){V.cancelInvalidationSpinner()}},{eventKey:h.Events.PubSub.StartSpin,handler:function t(e){V.showSpinner(e.method)}},{eventKey:h.Events.PubSub.StopSpin,handler:function t(e){V.stopSpinner(e.method)}},{eventKey:h.Events.PubSub.ConnectionDeleted,handler:function t(){k(o.forceReload)}},{eventKey:h.Events.PubSub.ConnectionCreated,handler:function t(){k(o.forceReload)}},{eventKey:h.Events.PubSub.AppDetailsViewChange,handler:function t(e){bt(e)}}];o.forceReload=function(){ut(true).then(function(){n.publish(h.Events.PubSub.ForceReloadComplete)})};function vt(t,e){if("ScriptTable"===t.sourceType&&"ScriptTable"!==e.sourceType)return 1;if("ScriptTable"!==t.sourceType&&"ScriptTable"===e.sourceType)return-1;return t.data.name.localeCompare(e.data.name)}o.onOverviewBackgroundClicked=function(t){if(F.getSelectedView()===F.views.OVERVIEW){t.stopPropagation();o.onTableSelected(null,false)}};o.onAddDataSelected=function(e){if(o.disableBarButtons())return;e.stopPropagation();o.history.reset();t.getService("addDataStateService").showAddData()};o.onErrorInfoButtonClicked=function(t){t.stopPropagation();if(o.loadWarnings&&(o.loadWarnings.scriptErrors||o.loadWarnings.scriptExecutionErrors)){var e=a.uniq(o.loadWarnings.scriptExecutionErrors.map(function(t){return void 0!==t.qLine?t.qErrorString+": "+t.qLine:t.qErrorString}));$.show({template:y,alignTo:t.target,controller:["$scope",function(t){t.scriptErrorStrArray=e}]})}};o.previewPaneIsActive=function(){return o.viewService.isGridEditorOpen()?o.editorDetailsViewService.previewPaneIsActive():o.previewService.previewPaneIsActive()};o.previewPaneIsEnabled=function(){return o.viewService.isGridEditorOpen()?o.editorDetailsViewService.previewPaneIsEnabled():o.previewService.previewPaneIsEnabled()};o.togglePreview=function(){return o.viewService.isGridEditorOpen()?o.editorDetailsViewService.togglePreview():o.previewService.togglePreview()};o.history={undoList:null,redoCount:0,undoCount:0,onHistoryModelInvalidated:function t(){o.history.updateUndoRedoCount()},setup:function t(){var e={qInfo:{qId:"DM.UndoList",qType:"Undo"},qUndoInfoDef:{}};s.getApp().then(function(t){t.enigmaModel.createSessionObject(e).then(function(t){if(!o.$$destroyed){o.history.undoList=t;o.history.undoList.Invalidated.bind(o.history.onHistoryModelInvalidated);o.history.updateUndoRedoCount()}})})},canGoBack:function t(){return 0!==this.undoCount},canGoForward:function t(){return 0!==this.redoCount},back:function t(){s.getApp().then(function(t){return t.undo()})},forward:function t(){s.getApp().then(function(t){return t.redo()})},reset:function t(){s.getApp().then(function(t){return t.clearUndoBuffer()})},unbind:function t(){o.history.undoList&&o.history.undoList.Invalidated.unbind(o.history.onHistoryModelInvalidated)},updateUndoRedoCount:function e(){if(!this.undoList)return;this.undoList.getLayout().then(function(e){o.history.redoCount=e.qUndoInfo.qRedoCount;o.history.undoCount=e.qUndoInfo.qUndoCount;t.$apply(o)})}};o.expansionModel={expanded:false,isInitiatedBy:function t(e){return this.source===e},onTableExpanded:function t(e,i){this.source=i;o.selectedTable===e?this.expanded=!this.expanded:this.expanded=true;this.expanded&&k(function(){var t=document.getElementsByClassName("concatenated-row-inner");t.length>0&&t[0].scrollIntoView(false)},0);o.onTableSelected(e,true)}};function gt(t,e){e||o.selectedTable===t||(o.expansionModel.expanded=false);o.selectedTable&&(o.selectedTable.selected=false);t&&(t.selected=true);o.selectedTable=t}o.onTableSelected=function(t,e){var i=t&&t.tableModel?[t.tableModel]:[];o.selectionService.setSelectedTables(i);var n=o.selectionService.getSelectedTables();if(i.length>0){var a=function e(i){return i.data&&i.data.id===t.id};n&&n.some(a)&&gt(t,e)}else gt(t,e)};o.isSelected=function(t){var e=t===o.selectedTable;if(!e)for(var i=0;o.selectedTables&&o.selectedTables.length&&i<o.selectedTables.length;i++)if(t===o.selectedTables[i]){e=true;break}return e};o.onTableEdit=function(t){o.onTableSelected(t,false,true);if(!o.selectionService.canEditObject())return;i(".qv-datamanager-preview").addClass("delayPreviewTransition");i(".qv-data-manager").addClass("delayPreviewTransition");k(function(){o.selectionService.editTable(t.tableModel)})};o.onEditorClosed=function(){o.history.reset();at&&k(ut,0)};o.onTableDelete=function(t){o.onTableSelected(t,false,true);o.selectionService.deleteTable(t.tableModel)};o.onFilterRemoved=function(t){t&&o.onTableSelected(t,false,true);o.selectionService.removeFilters().then(function(){o.history.reset()})};o.selectedTableInRow=function(t){var e;e=0===t?o.tables.slice(0,o.tablesPerRow-1):o.tables.slice(t*o.tablesPerRow-1,t*o.tablesPerRow-1+o.tablesPerRow);var i=a.contains(e,o.selectedTable);return i};o.openPerformanceDebug=function(){t.getService("luiDialog").show({template:T.template,controller:T.controller,input:{}})};o.openAssociateDebug=function(){t.getService("luiDialog").show({template:M.template,controller:M.controller,input:{}})};this.destroy=function(){o.destroyComponent();o.viewService.SelectedViewChanged.unbind(tt);o.viewService.OnGridEditorOpen.unbind(X);o.history.unbind()};function mt(){return L.getNoDataFlag().then(function(t){o.noData=t;o.messageObj={message:"AppDetails.NoData"};return t})}function bt(){o.viewService.isGridEditorOpen()&&c.force("end")}function ht(){var t=window.innerWidth;k(function(){var e=o.tables?o.tables.length:0;o.tablesPerRow=Math.floor(t/250);o.numberOfTableRows=a.range(0,Math.ceil((e+1)/o.tablesPerRow))},0)}function yt(){ht()}c.on("end",yt);o.$on("$destroy",function(){nt.delete();c.off("end",yt);L.unregisterInvalidationHandler(pt);ft.forEach(function(t){n.unsubscribe(t.eventKey,t.handler)});V.forceStopSpinner()});nt.registerKeys("ctrl+z",o.history.back,{allowInInput:false});nt.registerKeys("ctrl+y",o.history.forward,{allowInInput:false});nt.registerKeys("backspace",Tt);nt.registerKeys("del",Tt);nt.on();function Tt(){!o.gridEditorBoxObj.hidden||B.isOpen()||B.isEditOpen()||O.canDeleteObject()&&!o.disableBarButtons()&&O.deleteObject()}function Mt(){o.history.setup();L.initialize();L.registerInvalidationHandler(pt);L.getLoadModel().then(function(t){t.isDirty()?C.isDataManagerDirty=true:C.isDataManagerDirty=false});ft.forEach(function(t){n.subscribe(t.eventKey,t.handler)});rt().then(function(){if(o.tables){o.onTableSelected(o.tables[0]);x.trackEvent(x.customEvents.DATA_MANAGER_LOAD,{Tables:o.tables.length,Tables_unAssociated:o.tables.Tables_unAssociated})}o.viewService.setInitializationComplete()},function(){o.viewService.setInitializationComplete();ht()}).then(function(){G()})}s.getApp().then(function(t){return t.getLayout()}).then(function(t){r.init(t,"Title.DataManager");mt().then(function(){Mt()})})}]};return C}.apply(e,n),void 0!==a&&(t.exports=a))},2393:function(t,e){t.exports='<div class="qv-data-manager borderbox preview-panel-{{previewService.getPreviewPaneSize()}} forced-concat-panel-{{concatService.getForcedConcatSize()}}" ng-click="expansionModel.expanded = false">\n\t<dm-ui-blocker ng-show="noData" message-obj="messageObj"></dm-ui-blocker>\n\t<div class="data-manager-main-content" ng-click="onOverviewBackgroundClicked($event)">\n\t\t<div class="data-manager-warning-bar" ng-if="warningMessage">\n\t\t\t<div class="warning-icon lui-icon lui-icon--warning-triangle"></div>\n\t\t\t<div class="warning-message" ng-bind="warningMessage"></div>\n            <div class="data-manager-info-icon lui-icon lui-icon--info" q-title-translation="DataManager.Overview.ErrorInfo.Tooltip" ng-click="onErrorInfoButtonClicked($event)"></div>\n\t\t\t<button class="warning-button lui-button" ng-click="forceReload()" q-translation="DataManager.Overview.Reload" ng-if="!errorDetails.syncOnly"></button>\n\t\t\t<button class="warning-button lui-button" ng-click="importScriptedTables()" q-translation="DataManager.ScriptedTables.Sycrhonize" ng-if="errorDetails.sync"></button>\n\t\t</div>\n\n\t\t<div class="data-manager-tables table-rows-container" ng-show="viewService.selectedView === viewService.views.OVERVIEW" ng-class="{\'warning-showing\': warningMessage}">\n\t\t\t<div class="qv-datamanager-add-data" ng-if="!spinnerService.spinnerOn && tables.length === 0">\n\t\t\t\t<div class="qv-datamanager-add-data-title" q-translation="Bubbles.Warning.NoTables.Title" q-title-translation="Bubbles.Warning.NoTables.Title"></div>\n\t\t\t\t<div class="qv-datamanager-add-data-message" q-translation="DataManager.Warning.NoTables.Message" q-title-translation="DataManager.Warning.NoTables.Message"></div>\n\t\t\t\t<div class="add-data-box-without-tables" ng-click="onAddDataSelected( $event )">\n\t\t\t\t\t<div class="add-icon lui-icon lui-icon--add" q-title-translation="dataspace.addtable.title"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div ng-repeat="row in numberOfTableRows" class="table-row" ng-if="!spinnerService.spinnerOn">\n\n\t\t\t\t<div class="row-tables">\n\n\t\t\t\t\t<div class="add-data-box-with-tables" ng-if="tables.length > 0 && viewService.initializationComplete && row === 0" ng-click="onAddDataSelected( $event )" ng-class="{disabled:disableBarButtons()}">\n\t\t\t\t\t\t<div class="add-icon lui-icon lui-icon--add" q-title-translation="dataspace.addtable.title"></div>\n\t\t\t\t\t\t<div class="sub-title"></div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<qv-data-manager-table qva-table-animations\n\t\t\t\t\t\t\t\t\t\t   ng-if="row === 0"\n\t\t\t\t\t\t\t\t\t\t   ng-repeat="table in tables | qvArraySlice:0:tablesPerRow-1"\n\t\t\t\t\t\t\t\t\t\t   table-obj="table"\n\t\t\t\t\t\t\t\t\t\t   select-callback="onTableSelected"\n\t\t\t\t\t\t\t\t\t\t   split-callback="onTableSplit"\n\t\t\t\t\t\t\t\t\t\t   edit-callback="onTableEdit"\n\t\t\t\t\t\t\t\t\t\t   delete-callback="onTableDelete"\n\t\t\t\t\t\t\t\t\t\t   remove-filter-callback="onFilterRemoved"\n\t\t\t\t\t\t\t\t\t\t   expansion-model="expansionModel"\n\t\t\t\t\t\t\t\t\t\t   disable-buttons="disableBarButtons()"\n\t\t\t\t\t\t\t\t\t\t   split-object="selectionService.splitObject()"\n\t\t\t\t\t\t\t\t\t\t   no-data="noData"\n\t\t\t\t\t\t\t\t\t\t   is-selected-callback="isSelected"></qv-data-manager-table>\n\n\t\t\t\t\t<qv-data-manager-table qva-table-animations\n\t\t\t\t\t\t\t\t\t\t   ng-if="row > 0"\n\t\t\t\t\t\t\t\t\t\t   ng-repeat="table in tables | qvArraySlice:(row*tablesPerRow-1):(row*tablesPerRow-1+tablesPerRow)"\n\t\t\t\t\t\t\t\t\t\t   table-obj="table"\n\t\t\t\t\t\t\t\t\t\t   select-callback="onTableSelected"\n\t\t\t\t\t\t\t\t\t\t   split-callback="onTableSplit"\n\t\t\t\t\t\t\t\t\t\t   edit-callback="onTableEdit"\n\t\t\t\t\t\t\t\t\t\t   delete-callback="onTableDelete"\n\t\t\t\t\t\t\t\t\t\t   expansion-model="expansionModel"\n\t\t\t\t\t\t\t\t\t\t   disable-buttons="disableBarButtons()"\n\t\t\t\t\t\t\t\t\t\t   split-object="selectionService.splitObject()"\n\t\t\t\t\t\t\t\t\t\t   remove-filter-callback="onFilterRemoved"\n\t\t\t\t\t\t\t\t\t\t   no-data="noData"\n\t\t\t\t\t\t\t\t\t\t   is-selected-callback="isSelected"></qv-data-manager-table>\n\t\t\t\t</div>\n\n\t\t\t\t<qv-data-manager-concatenated-view table="selectedTable" ng-if="expansionModel.expanded  && expansionModel.isInitiatedBy(viewService.views.OVERVIEW) && selectedTableInRow(row) " load-model="loadModel"></qv-data-manager-concatenated-view>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="data-manager-associations" ng-if="viewService.selectedView === viewService.views.BUBBLES" ng-class="{\'warning-showing\': warningMessage}">\n\t\t\t<qv-data-manager-bubbles ng-class="{\'show-association-panel\': showAssociationsRecommendations(), \'qv-animate\': viewService.initializationComplete, \'width-transition\' : !isIos}">\n\t\t\t</qv-data-manager-bubbles>\n\t\t\t<associations-recommendations-panel\n\t\t\t\ttid="dm-panel-asso-rec"\n\t\t\t\tng-class="{ \'opened\' : showAssociationsRecommendations(), \'closed\': !showAssociationsRecommendations(), \'width-transition\' : !isIos}"\n\t\t\t\tclass="associations-panel" association-graph="associationGraph" load-model="loadModel">\n\t\t\t</associations-recommendations-panel>\n\t\t\t<qv-data-manager-concatenated-view table="selectedTable" ng-if="expansionModel.expanded  && expansionModel.isInitiatedBy(viewService.views.BUBBLES)" load-model="loadModel" class="absoluteVariant"></qv-data-manager-concatenated-view>\n\t\t</div>\n\t</div>\n\n\t<qv-data-manager-preview></qv-data-manager-preview>\n\t\n\t<qv-data-manager-forced-concat></qv-data-manager-forced-concat>\n\t<qv-data-manager-editor\n\t\t\tid="qv-data-manager-editor"\n\t\t\tclass="qv-gridEditor-box data-manager-editor"\n\t\t\tng-hide="gridEditorBoxObj.hidden"\n\t\t\tng-style="{\'top\': \'0px\', \'left\': gridEditStyling.left, \'right\': gridEditStyling.right, \'bottom\': gridEditStyling.bottom, \'transform\': gridEditStyling.scale, \'opacity\': gridEditStyling.opacity, \'border\': gridEditStyling.border }"\n\t\t\ttable-to-be-edited="tableToBeEdited"\n\t\t\tload-model="loadModel"\n\t\t\tclose-callback="onEditorClosed()"></qv-data-manager-editor>\n\n\t<div class="data-manager-footer-bar">\n\t\t<div class="leftSide"></div>\n\t\t<div class="center">\n\t\t\t<button class="lui-fade-button"\n\t\t\t\t\tng-disabled="disableBarButtons() || !selectionService.canEditObject()"\n\t\t\t\t\tng-class="{\'lui-active\': selectionService.editIsActive()}"\n\t\t\t\t\tng-click="selectionService.editObject()"\n\t\t\t\t\ttid="data-manager-edit-table"\n\t\t\t\t\tq-title-translation="{{ selectionService.getEditButtonTooltip() }}">\n\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--edit"></span>\n\t\t\t</button>\n\t\t\t<button class="lui-fade-button"\n\t\t\t\t\tng-disabled="disableBarButtons() ||!selectionService.canRefreshObject()"\n\t\t\t\t\tng-click="selectionService.refreshTables()"\n\t\t\t\t\ttid="data-manager-load-table-from-source"\n\t\t\t\t\tq-title-translation="DataManager.Footer.Tooltip.RefreshTables">\n\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--sync"></span>\n\t\t\t</button>\n\t\t\t<button class="lui-fade-button"\n\t\t\t\t\tng-disabled="disableBarButtons() ||!selectionService.canDeleteObject()"\n\t\t\t\t\tng-click="selectionService.deleteObject()"\n\t\t\t\t\ttid="data-manager-delete-table"\n\t\t\t\t\tq-title-translation="{{ selectionService.isEditDeleteTable() ? \'DataManager.Footer.Tooltip.DeleteTable\' : selectionService.isEditDeleteAssociation() ? \'DataManager.Footer.Tooltip.BreakAssociation\' : \'\' }}">\n\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--bin"></span>\n\t\t\t</button>\n\t\t\t<button class="split-button lui-fade-button"\n\t\t\t\t\tng-disabled="disableBarButtons()"\n\t\t\t\t\tng-if="selectionService.canSplitObject() && !splitIndividualTablesFeature"\n\t\t\t\t\tng-click="splitService.splitSelected($event)"\n\t\t\t\t\ttid="data-manager-split-table"\n\t\t\t\t\tq-title-translation="DataManager.Overview.Tooltip.Split">\n\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--split"></span>\n\t\t\t</button>\n\t\t\t<button class="split-button lui-fade-button"\n\t\t\t\t\tng-disabled="disableBarButtons()"\n\t\t\t\t\tng-if="selectionService.canSplitObject() && splitIndividualTablesFeature"\n\t\t\t\t\tng-click="splitService.openSplitTablesDialog()"\n\t\t\t\t\ttid="data-manager-split-table"\n\t\t\t\t\tq-title-translation="DataManager.Overview.Tooltip.Split">\n\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--split"></span>\n\t\t\t</button>\n\t\t\t<button class="split-button lui-fade-button"\n\t\t\t\t\tng-disabled="disableBarButtons() || !canFilterSelectedTables"\n\t\t\t\t\tng-click="onFilterRemoved()"\n\t\t\t\t\tq-title-translation="DataManager.Overview.Tooltip.ClearFilter">\n\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--clear-filter"></span>\n\t\t\t</button>\n\t\t\t<button class="lui-fade-button" \n\t\t\t\tng-class="{\'lui-active\': isTranformationsPopupActive()}"\n\t\t\t\tng-disabled="isTransformationsPopoverDisabled()"\n\t\t\t\tng-click="openTransformationsPopover($event)"\n\t\t\t\ttid="data-manager-transformations"\n\t\t\t\tq-title-translation="DataManager.Overview.Tooltip.Transformations">\n\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--more"></span>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="rightSide">\n\t\t\t<div class="performance-debug"\n\t\t\t\t ng-if="enabledPerformanceDebug">\n\t\t\t\t<button class="lui-fade-button"\n\t\t\t\t\t\tng-click="openPerformanceDebug()"\n\t\t\t\t\t\tq-title-translation="Performance Debug Options">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--cogwheel"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="associate-debug"\n\t\t\t\t ng-if="enabledAssociateDebug">\n\t\t\t\t<button class="lui-fade-button"\n\t\t\t\t\t\tng-click="openAssociateDebug()"\n\t\t\t\t\t\tq-title-translation="Associate Debug Report">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--cogwheel"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="undo-redo">\n\t\t\t\t<button class="lui-fade-button"\n\t\t\t\t\t\tng-disabled="disableBarButtons() || !history.canGoBack()"\n\t\t\t\t\t\tng-click="history.back()"\n\t\t\t\t\t\ttid="data-manager-undo"\n\t\t\t\t\t\tq-title-translation="Common.Undo">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--back"></span>\n\t\t\t\t</button>\n\t\t\t\t<button class="lui-fade-button group-left"\n\t\t\t\t\t\tng-disabled="disableBarButtons() || !history.canGoForward()"\n\t\t\t\t\t\ttid="data-manager-redo"\n\t\t\t\t\t\tng-click="history.forward()"\n\t\t\t\t\t\tq-title-translation="Common.Redo">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--forward"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="preview-toggle">\n\t\t\t\t<button class="lui-fade-button"\n\t\t\t\t\t\tng-class="{\'lui-active\': previewPaneIsActive() && previewPaneIsEnabled()}"\n\t\t\t\t\t\tng-disabled="!previewPaneIsEnabled()"\n\t\t\t\t\t\tng-click="togglePreview()"\n\t\t\t\t\t\ttid="data-manager-preview-toggle"\n\t\t\t\t\t\ttitle="{{previewToggleTooltipTitle()}}">\n\t\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--toggle-bottom"></span>\n\t\t\t\t</button>\n\t\t\t</div>\t\t\t\n\t\t</div>\n\t</div>\n</div>\n'},2394:function(t,e){t.exports='<lui-popover x-variant="{{::variant}}" x-arrow="arrow">\n\t<lui-popover-body class="lui-nopad">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item" ng-click="openForceConcat()" tid="openForceConcat" ng-class="openForceConcatDisabled ? \'lui-disabled no-pointer-events\' : \'\'">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="DataManager.ForcedConcat.ButtonBarTitle">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li ng-if="joinTablesFlag" class="lui-list__item" id="openJoinTables" ng-click="openJoinTables()" tid="openJoinTables" ng-class="openJoinTablesDisabled ? \'lui-disabled no-pointer-events\' : \'\'">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="DataManager.JoinTables.JoinTablesTitle">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item" ng-click="importScriptedTables()" tid="syncScripted" ng-class="syncScriptedDisabled ? \'lui-disabled no-pointer-events\' : \'\'">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="DataManager.ScriptedTables.Sycrhonize">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item" ng-click="showLineage()" tid="showLineage" ng-class="lineageDisabled ? \'lui-disabled no-pointer-events\' : \'\'">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="DataManager.Lineage.LineageTitle">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>'},2395:function(t,e){t.exports='<lui-popover class="data-manager-error-popover">\n\t<div class="lui-popover__header">\n\t  <div class="lui-popover__title" q-translation="DataManager.Overview.ErrorInfo.ErrorDetails"></div>\n\t</div>\n   \n\t<lui-popover-body class="data-manager-error-popover__body">\n\t  <div class="data-manager-error-popover__message-item" ng-repeat="textVal in scriptErrorStrArray">{{textVal}}</div>\n\t</lui-popover-body>\n</lui-popover>\n'},2396:function(t,e,i){"use strict";var n,a;!(n=[i(2397),i(396),i(235)],a=function(t,e){return{template:t,controller:["$scope","qvDataManagerDataService",function(t,i){var n=new e;t.save=function(){n.set(t.globalDefaults).then(function(){i.updateLoadModel(t.loadModel).then(function(){t.close()})})};t.cancel=function(){t.close()};t.convertToHumanReadable=function(t){var e=-1;var i=["kB","MB","GB","TB"];do{t/=1024;e++}while(t>1024&&e<3);return t.toFixed(2)+i[e]};t.toggleCaching=function(e){var i=t.tablesHashMap[e];i.caching.enabled?i.caching.type="qvd":delete i.caching.type};i.getLoadModel().then(function(e){i.getAllTargetTables().then(function(i){n.get().then(function(n){t.globalDefaults=n;t.loadModel=e.clone();t.tables=t.loadModel.tableModels.filter(function(t){return t.data.fields.some(function(t){return t.selected})});t.tablesHashMap={};for(var a=0;a<t.tables.length;a++)t.tablesHashMap[t.tables[a].data.id]=t.tables[a].data;t.qvdCacheInfo={};for(var o=0;o<i.tables.length;o++){var l=i.tables[o].qvdFileInfo;if(l)for(var s=0;s<l.length;s++)t.qvdCacheInfo[l[s].sourceTableRef]=l[s]}})})})}]}}.apply(e,n),void 0!==a&&(t.exports=a))},2397:function(t,e){t.exports='<lui-dialog class="performance-debug-dialog">\n\t<lui-dialog-header >\n\t\t<lui-dialog-title>Performance debug options</lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body>\n\t\t<div class="tables">\n\t\t\t<table style="width: 25%;">\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Global Defaults</th>\n\t\t\t\t\t<th></th>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>Enable QVD cache</td>\n\t\t\t\t\t<td><lui-switch x-model="globalDefaults.enableQVDCaching"></lui-switch></td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t\t<div class="tables">\n\t\t\t<table>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Table</th>\n\t\t\t\t\t<th>Enable QVD cache</th>\n\t\t\t\t\t<th>QVD Cache Info</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr ng-repeat="table in tablesHashMap">\n\t\t\t\t\t<td>{{table.tableName}}</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<div class="lui-switch">\n\t\t\t\t\t\t\t<label class="lui-switch__label">\n\t\t\t\t\t\t\t\t<input type="checkbox" class="lui-switch__checkbox"  ng-model="table.caching.enabled" ng-change="toggleCaching(table.id)">\n\t\t\t\t\t\t\t\t<span class="lui-switch__wrap">\n\t\t\t\t\t\t\t\t\t<span class="lui-switch__inner"></span>\n\t\t\t\t\t\t\t\t\t<span class="lui-switch__switch" ></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td ng-if="qvdCacheInfo[table.id].sourceTableRef !== undefined">\n\t\t\t\t\t\t<b>File Name: </b>{{qvdCacheInfo[table.id].fileName}}<br/>\n\t\t\t\t\t\t<b>Created At: </b>{{qvdCacheInfo[table.id].createdAt}}<br/>\n\t\t\t\t\t\t<b>File Size: </b>{{convertToHumanReadable(qvdCacheInfo[table.id].fileSize)}}<br/>\n\t\t\t\t\t\t<b>Last Modified: </b>{{qvdCacheInfo[table.id].lastModified}}<br/>\n\t\t\t\t\t\t<b>Source Table Ref: </b>{{qvdCacheInfo[table.id].sourceTableRef}}<br/>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td style="padding:10px 0px 30px 0px;" ng-if="qvdCacheInfo[table.id].sourceTableRef === undefined">\n\t\t\t\t\t\tNo cache found\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="save()">Save</lui-button>\n\t\t<lui-button ng-click="cancel()">Cancel</lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>'},2398:function(t,e,i){"use strict";var n,a;!(n=[i(2399),i(235)],a=function(t){return{template:t,controller:["$scope","qvDataManagerDataService",function(t,e){e.getAllRecommendations().then(function(e){t.report=e})}]}}.apply(e,n),void 0!==a&&(t.exports=a))},2399:function(t,e){t.exports='<lui-dialog class="associate-debug-dialog">\n\t<lui-dialog-header >\n\t\t<lui-dialog-title>Associate debug report</lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body>\n\t\t<textarea class="report">{{report.result.__report | json : 4}}</textarea>\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="close()">Close</lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>'},2400:function(t,e){t.exports='<div tid="data-manager-lineage-dialog" class="lui-dialog data-manager-lineage-dialog" ng-style="containerStyle" >\n\t<div class="lui-dialog__header">\n\t\t<div tid="data-manager-lineage-dialog-title" class="lui-dialog__title" ng-bind="titleText" title="{{titleText}}">{{titleText}}</div>\n\t</div>\n\t<div class="lui-dialog__body dm-main" style="padding:0px">\n\n\t\t\n\t\t<div class="main-bottom">\n\t\t\t<dm-lineage-view lineage-selection=context.lineageSelection load-model=context.loadModel class="data-manager-lineage-view" \n\t\t\t\n\t\t\t></dm-lineage-view>\n\t\t</div>\n\n\t</div>\n\n\t<div class="lui-dialog__footer">\n\t\t<lui-button ng-click="cancel()"  q-translation="Common.Close" tid="lineageCloseButton"></lui-button>\n\t</div>\n</div>\n'},2401:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2402),i(199),i(2403),i(2405),i(2406),i(263),i(2407)],a=function(t,e,i,n,a){var o=["qvDataManagerLineageService","qvDataManagerTableIconService",function(t,e){var o=this;o.$onInit=function(){o.lineage={specVisible:i.DM_LINEAGE,specHelper:void 0,viewHelper:void 0};o.lineage.specHelper=new n(o.loadModel,e);o.lineage.viewHelper=new a(o.lineageSelection,o.lineage.specHelper);if(o.lineageSelection.queryId){var l;l=o.lineageSelection.fieldId?t.getFieldLineage(o.lineageSelection.queryId,o.lineageSelection.fieldId):t.getQueryLineage(o.lineageSelection.queryId);l.then(function(t){o.lineage.specHelper.setLineageSpec(t);o.lineage.viewHelper.setLineageSpec(t);o.lineage.lineageSpec=t;o.lineage.lineageSources=o.lineage.specHelper.getLineageSources();o.lineage.lineageOperations=o.lineage.specHelper.getLineageOperations()})}}}];t.nativeComponent("dmLineageView",{bindings:{loadModel:"<",lineageSelection:"<"},template:e,controller:o})}.apply(e,n),void 0!==a&&(t.exports=a))},2402:function(t,e){t.exports='<div>\n    <div class="sources-holder">\n        \n        <div class="sources-label" q-translation="DataManager.Lineage.LineageTableSources, {{$ctrl.lineage.lineageSpec.sources.length}}" ng-if="$ctrl.lineage.viewHelper.isTableLineage()" tid="tableSourcesLabel"></div>\n        <div class="sources-label" q-translation="DataManager.Lineage.LineageFieldSources, {{$ctrl.lineage.lineageSpec.sources.length}}" ng-if="$ctrl.lineage.viewHelper.isFieldLineage()" tid="fieldSourcesLabel"></div>\n        <div ng-repeat="source in $ctrl.lineage.lineageSources" >\n             <div class="source-holder" ng-class="{\'multi-line\': source.contextName !== undefined}" tid="source">\n                <img ng-src="{{source.iconPath}}" class="source-icon" ng-if="source.iconPath" tid="source-image"></img>\n                <div class="source-icon status-icon lui-icon {{source.luiIcon}}" ng-if="source.luiIcon" tid="source-icon"></div>\n                <span ng-bind="source.typeLabel" class="source-type-header" ng-if="!source.iconPath && !source.luiIcon && !$ctrl.lineage.viewHelper.isFieldLineage()"></span>\n                <div class="source-info">\n                <span ng-bind="source.name" class="source-name" title="{{source.name}}"></span>\n                <div ng-if="source.contextName" ng-bind="source.contextName" class="source-detail" title="{{source.contextName}}"></div>\n                <div ng-repeat="sourceDetail in source.details">\n                    <span class="source-detail" ng-bind="sourceDetail" title="{{sourceDetail}}"></span>\n                </div>\n                </div>\n            </div>\n            \n        </div>\n    </div>\n    <div q-translation="DataManager.Lineage.NoOperations" class="nooperations-detail"  ng-if="$ctrl.lineage.lineageSpec.operations.length  === 0" tid="nooperations"></div>\n    <div ng-repeat="operation in $ctrl.lineage.lineageOperations" class="operation-holder" tid="operation">\n        <div ng-bind="$ctrl.lineage.specHelper.getTranslatedOperationName(operation)" class="operation-name" tid="opName"></div>\n\n        <div ng-if="$ctrl.lineage.viewHelper.hasQueryOrTable(operation.details)" class="detail-holder">\n            <div q-translation="DataManager.Lineage.InputTables" class="detail-header" ng-if="$ctrl.lineage.viewHelper.isShowInputTablesHeader(operation)"></div>\n            <div ng-repeat="detail in operation.details">\n                <div ng-if="$ctrl.lineage.viewHelper.shouldShowDetails(detail)" class="detail" tid="inputTable">\n                    <div class="source-name">\n                        <b ng-if="detail.objectref.type === \'join\'" q-translation="DataManager.Lineage.JoinTypeLabel"></b>\n                        <span ng-bind="detail.objectref.name" label="{{detail.objectref.name}}"></span>\n                    </div>\n                    <div ng-bind="detail.objectref.contextName" class="source-detail" ng-if="detail.objectref.contextName"></div>\n                </div>\n            </div>\n        </div>\n\n        <div ng-if="$ctrl.lineage.viewHelper.showInputFields(operation)" class="detail-holder">\n            <div q-translation="DataManager.Lineage.InputFields" class="detail-header"></div>\n            <div ng-repeat="detail in operation.details">\n                <div ng-if="$ctrl.lineage.viewHelper.isInputField(detail)" class="detail" tid="inputField">\n                    <span ng-bind="detail.objectref.name" class="constrained-detail" title="{{detail.objectref.name}}"></span><span ng-if="$ctrl.lineage.viewHelper.hasDetailTypeInfo(operation, detail.objectref)"> [<span ng-bind="$ctrl.lineage.specHelper.getDetailTypeInfo(operation, detail.objectref)" tid="detailInfo"></span>]</span>\n                    <div ng-if="detail.objectref.contextName" ng-bind="detail.objectref.contextName" class="source-field-detail"></div>\n                    <div class="unused-pivot-field" ng-if="$ctrl.lineage.viewHelper.shouldShowUnusedPivotField(operation, detail.objectref)" q-translation="DataManager.Lineage.UnpivotUnused"></div>\n                </div>\n            </div>\n        </div>\n\n         <div ng-if="$ctrl.lineage.viewHelper.hasOperationDetails(operation)" class="detail-holder">\n\t\t\t<div class="transformation-detail" ng-class="{\'highlighted-transformation-detail\': $ctrl.lineage.viewHelper.isHighlightedOperationDetails(operation)}">\n\t\t\t\t<span ng-repeat="transformationDetail in $ctrl.lineage.viewHelper.getOperationDetails(operation) track by $index" >\n                    <div ng-bind="transformationDetail" tid="transformationDetail" ng-class="{highlighted: $index === 0, detail: $index !== 0}"></div>\n                </span>\n\t\t\t</div>\n        </div>\n\n          <div ng-if="$ctrl.lineage.viewHelper.hasExpression(operation.details)" class="detail-holder">\n            <div q-translation="DataManager.Lineage.ExpressionDetail" class="detail-header" tid="expressionHeader"></div>\n            <div ng-repeat="detail in operation.details" class="detail">\n                <div ng-if="$ctrl.lineage.viewHelper.isExpression(detail)" >\n                    <span ng-bind="detail.expression" class="detail-expression" tid="operationDetail"></span>\n                </div>\n            </div>\n        </div>\n\n        <div ng-if="$ctrl.lineage.viewHelper.hasOutputField(operation.details)" class="detail-holder">\n            <div q-translation="DataManager.Lineage.OutputFields" class="detail-header"></div>\n            <div ng-repeat="detail in operation.details">\n                <div ng-if="$ctrl.lineage.viewHelper.isOutputField(detail)" class="detail" tid="outputField">\n                    \n                    <span ng-bind="detail.objectref.name" tid="outputFieldName" class="constrained-detail" title="{{detail.objectref.name}}"></span>\n                    <span ng-if="$ctrl.lineage.viewHelper.hasDetailTypeInfo(operation, detail.objectref)" class="pivot-indicator"> [<span ng-bind="$ctrl.lineage.specHelper.getDetailTypeInfo(operation, detail.objectref)" tid="outputFieldDetail"></span>]</span>\n                \n                    <div ng-bind="detail.objectref.contextName" class="source-detail"></div>\n                </div>\n            </div>\n        </div>\n\n        <div class="subject-holder"  ng-if="$ctrl.lineage.viewHelper.isShowOutput(operation, $ctrl.lineage.lineageOperations)" tid="subject">\n         <span class="source-icon status-icon lui-icon lui-icon--direction-right"></span><div class="subject-name-holder" ng-if="$ctrl.lineage.viewHelper.isShowOutput(operation, $ctrl.lineage.lineageOperations)">\n             <span ng-bind="operation.subject.name" tid="subjectName" title="{{operation.subject.name}}"></span></div>\n         </div>\n    </div>\n    \n    <div ng-show="$ctrl.lineage.specVisible">{{lineage.lineageSpec}}</div>\n\n\n</div>'},2403:function(t,e,i){"use strict";var n,a;!(n=[i(54),i(91),i(105),i(1286),i(2404),i(1791)],a=function(t,e,i,n,a,o){function l(t,e){this.loadModel=t;this.transformationDetails={};this.tableTransformDetails={};this.tableIconService=e;this.setupTransformationDetails();this.setupTableTransformDetails()}l.prototype.setLineageSpec=function(t){this.lineageSpec=t};l.prototype.setupTransformationDetails=function(){this.transformationDetails["mapValues"]=function(t,i){var n=new o.TransformationOperations(this.getQuery(i),t);return[e.get("MappingAction.Label.GroupingStatus",n.getMappingsCount()-n.getNullMappingCount())]}.bind(this);this.transformationDetails["mapNulls"]=function(t,i){var n=new o.TransformationOperations(this.getQuery(i),t);return[e.get("MappingAction.Label.GroupingStatus",n.getNullMappingCount())]}.bind(this);this.transformationDetails["bucketed"]=function(t){return[e.get("DataManager.Lineage.BucketDetails",t.arguments.intervals.length)]};this.transformationDetails["fieldSplit"]=function(t){var i=[];i.push(e.get("DataManager.Lineage.SplitDetails"));var n=[];this.getSplitDetails(t.arguments,n);n=n.reverse();i.push.apply(i,n);return i}.bind(this);this.transformationDetails["defineOrder"]=function(){return[e.get("DataManager.Lineage.ReorderDetails")]};this.transformationDetails["interpretValues"]=function(t){return[e.get("DataManager.Lineage.InterpetValuesDetails_"+t.arguments.targetType)]}};l.prototype.setupTableTransformDetails=function(){this.tableTransformDetails["forceconcat"]=function(t){var i=this.loadModel.findQueryById(t.subject.id);if(i){var a=new n.CompositeQueryOperations(i);var o=a.getInfo();return e.get("DataManager.Lineage.ForceConcatDetails",[o.totalConcatFields,o.fieldsMapped])}return}.bind(this);this.tableTransformDetails["autoconcat"]=function(t){var i=this.loadModel.findQueryById(t.subject.id);if(i){var n=new a.AutoConcatOperations(i);var o=n.getInfo();return e.get("DataManager.Lineage.AutoConcatDetails",[o.totalConcatFields])}return}.bind(this)};l.prototype.getTransformationDetails=function(t){var e=this.getTransformation(t);var i=[];this.transformationDetails[t.op]&&(i=this.transformationDetails[t.op](e,t));return i};l.prototype.getClassificationDetails=function(i){var n="";var a=t.findWhere(i.details,{type:"classification"});var o=void 0;"country"===a.classification.value?o="country":"city"===a.classification.value&&(o="city");o&&(n=e.get("DataManager.Lineage.Classification_geo_"+o));return[n,e.get("DataManager.Lineage.MapDetails")]};l.prototype.getTableTransformDetails=function(t){var e=void 0;"field"!==t.opType&&this.tableTransformDetails[t.op]&&(e=[this.tableTransformDetails[t.op](t)]);return e};l.prototype.getTableFilterDetails=function(t){var i=void 0;t.details&&t.details.some(function(t){return"tableFilter"===t.type})&&(i=[e.get("DataManager.Lineage.TableFilterHeader"),e.get("DataManager.Lineage.TableFilterDetails"),e.get("DataManager.Lineage.TableFilterSubDetails")]);return i};l.prototype.getDetailTypeInfo=function(t,i){var n=void 0;"unpivot"===t.op&&i.hints&&(-1!==i.hints.indexOf("attributeField")?n=e.get("DataManager.Lineage.AttributeField"):-1!==i.hints.indexOf("dataField")&&(n=e.get("DataManager.Lineage.DataField")));return n};l.prototype.isUnusedPivotField=function(t,e){var i=false;"unpivot"===t.op&&e.hints&&-1===e.hints.indexOf("attributeField")&&-1===e.hints.indexOf("dataField")&&(i=true);return i};l.prototype.getQuery=function(t){var e=t.subject.parentId;var i=this.loadModel.findQueryById(e);return i};l.prototype.getTransformation=function(e){var i=void 0;var n=e.subject.id;var a=t.findWhere(e.details,{type:"transformationIndex"}).value;var o=this.getQuery(e);if(o){var l=o.getField(n);l&&(i=l.transformations[a])}return i};l.prototype.getSplitDetails=function(t,i){if(t.splitInfo&&t.splitInfo.subFields){var n=t.splitInfo.subFields.some(function(t){var e=false;this.getSplitDetails(t,i)&&(e=true);return e}.bind(this));n&&(t.splitInfo.pos?i.push(e.get("DataManager.Lineage.SplitPosition",t.splitInfo.pos)):t.splitInfo.del&&i.push(e.get("DataManager.Lineage.SplitDelimiter",t.splitInfo.del)));return n}if(true==t.selected){t.splitInfo&&(t.splitInfo.pos?i.push(e.get("DataManager.Lineage.SplitPosition",t.splitInfo.pos)):t.splitInfo.del&&i.push(e.get("DataManager.Lineage.SplitDelimiter",t.splitInfo.del)));return true}return false};l.prototype.getNullMappingsOperation=function(e){var i=this.getTransformation(e);var n=new o.TransformationOperations(this.getQuery(e),i);var a=n.getNullMappingCount();var l=n.get;if(a>0){l=t.clone(e);l.op="mapNulls"}return{mapNullsOperation:l,nullCount:a,totalMappings:n.getMappingsCount()}};l.prototype.getLineageOperations=function(){var t=[];this.lineageSpec.operations.forEach(function(e){if("mapValues"===e.op){var i=this.getNullMappingsOperation(e);i.mapNullsOperation&&t.push(i.mapNullsOperation);i.nullCount!=i.totalMappings&&t.push(e)}else t.push(e)}.bind(this));return t};l.prototype.getSourceTypeLabel=function(t){var i="";switch(t.type){case"field":void 0!=t.queryId?i=e.get("DataManager.Lineage.FieldLabel"):void 0!=t.tableId&&(i=e.get("DataManager.Lineage.SourceFieldLabel"));break;case"table":i=e.get("DataManager.Lineage.SourceTableLabel");break;case"query":i=e.get("DataManager.Lineage.TableLabel");break}return i};l.prototype.getTranslatedOperationName=function(t){switch(t.op){case"add":case"join":case"autoconcat":case"forceconcat":case"unpivot":case"expression":case"lookupGeoInfo":case"bucketed":case"makeGeoPoint":case"fieldSplit":case"ignoreValues":case"defineOrder":case"interpretValues":case"classification":case"synchronize":case"mapNulls":case"mapValues":return e.get("DataManager.Lineage.ActionLabel_"+t.op)}};l.prototype.getTableIconPath=function(t){return this.tableIconService.getIconPathForTable(t)};l.prototype.getLineageSources=function(){var t=[];this.lineageSpec.sources.forEach(function(n){n.contextName===i.AddData.InlineData&&(n.contextName=e.get("ManualData.Entry.Label"));var a={details:[]};t.push(a);a.name=n.name;a.typeLabel=this.getSourceTypeLabel(n);a.contextName=n.contextName;var o;if("table"===n.type){var l=this.loadModel.getSourceTableByTableRefId(n.tableId);this.getTableIconPath(l).then(function(t){t.imgPath?a.iconPath=t.imgPath:t.luiClass&&(a.luiIcon=t.luiClass)});o=true;l&&"folder"!==l.data.connectionInfo.typeName&&"script"!==l.data.connectionInfo.typeName&&l.data.connectionInfo.typeName!==i.AddData.InlineData&&a.details.push(l.data.connectionInfo.typeName+":"+l.data.dataconnectorName)}o&&(a.context=n.contextName)}.bind(this));return t};return l}.apply(e,n),void 0!==a&&(t.exports=a))},2405:function(t,e,i){"use strict";var n,a;!(n=[],a=function(){function t(t,e){this.lineageSelection=t;this.lineageSpecHelper=e}t.prototype.setLineageSpec=function(t){this.lineageSpec=t};t.prototype.isInputField=function(t){return t.objectref&&"field"===t.objectref.type&&-1!==t.objectref.hints.indexOf("input")};t.prototype.shouldShowDetails=function(t){return t.objectref&&("query"===t.objectref.type||"table"===t.objectref.type||"join"===t.objectref.type)};t.prototype.isExpression=function(t){return"expression"===t.type};t.prototype.isOutputField=function(t){return t.objectref&&"field"===t.objectref.type&&-1!==t.objectref.hints.indexOf("output")};t.prototype.isFieldLineage=function(){return void 0!==this.lineageSelection.fieldId};t.prototype.isTableLineage=function(){return void 0===this.lineageSelection.fieldId};t.prototype.isShowInputTablesHeader=function(t){var e=true;switch(t.op){case"add":case"join":case"autoconcat":case"forceconcat":case"unpivot":e=false;break}return e};t.prototype.shouldShowUnusedPivotField=function(t,e){var i=false;this.lineageSelection.fieldId&&this.lineageSpecHelper.isUnusedPivotField(t,e)&&(i=true);return i};t.prototype.hasDetailTypeInfo=function(t,e){return void 0!==this.lineageSpecHelper.getDetailTypeInfo(t,e)};t.prototype.hasTransformationDetails=function(t){return t.details.some(function(t){return"transformationIndex"===t.type})};t.prototype.hasOperationDetails=function(t){return this.hasTransformationDetails(t)||this.hasClassificationDetails(t)||this.canGenerateTableTransformDetails(t)||this.hasTableFilterDetails(t)};t.prototype.isHighlightedOperationDetails=function(t){return this.hasTableFilterDetails(t)};t.prototype.canGenerateTableTransformDetails=function(t){var e=false;"field"!==t.opType&&this.lineageSpecHelper.getTableTransformDetails(t)&&(e=true);return e};t.prototype.hasTableFilterDetails=function(t){var e=false;t.details&&t.details.some(function(t){return"tableFilter"===t.type})&&(e=true);return e};t.prototype.getOperationDetails=function(t){var e=void 0;this.hasTransformationDetails(t)?e=this.lineageSpecHelper.getTransformationDetails(t):this.hasClassificationDetails(t)?e=this.lineageSpecHelper.getClassificationDetails(t):this.canGenerateTableTransformDetails(t)?e=this.lineageSpecHelper.getTableTransformDetails(t):this.hasTableFilterDetails(t)&&(e=this.lineageSpecHelper.getTableFilterDetails(t));return e};t.prototype.hasClassificationDetails=function(t){return t.details.some(function(t){return"classification"===t.type})};t.prototype.isShowOutput=function(t,e){var i=false;this.isTableLineage()?i=true:e.indexOf(t)===e.length-1&&(i=true);return i};t.prototype.isTransformationDetail=function(t){return t.transformationIndex};t.prototype.showInputFields=function(t){var e=false;this.lineageSelection.fieldId&&"forceconcat"!==t.op&&"autoconcat"!==t.op&&"unpivot"!==t.op||(e=t.details.some(function(t){return t.objectref&&"field"===t.objectref.type&&-1!==t.objectref.hints.indexOf("input")}));return e};t.prototype.hasOutputField=function(t){return t.some(function(t){return t.objectref&&"field"===t.objectref.type&&-1!==t.objectref.hints.indexOf("output")})};t.prototype.hasQueryOrTable=function(t){return t.some(function(t){return t.objectref&&("query"===t.objectref.type||"table"===t.objectref.type)})};t.prototype.hasExpression=function(t){return t.some(function(t){return"expression"===t.type})};return t}.apply(e,n),void 0!==a&&(t.exports=a))},2406:function(t,e,i){"use strict";var n,a;!(n=[i(54),i(48),i(1039),i(416)],a=function(t,e,n,a){e.service("qvDataManagerTableIconService",["$q",function(e){function o(){}o.prototype.getConnections=function(){return n.getDataSpaceInput().then(function(t){var e=t.dataconnectorsModel.connections;return e})};o.prototype.getIconPathForTable=function(n){var o=n.data.connectionInfo.sourceConnectorID;return"folder"===o?e.resolve({imgPath:a.getIconForFile(n.data.databaseName)}):this.getConnections().then(function(e){var a=e.find(function(t){return t.connectorInstance.name===n.data.dataconnectorName});var l;a&&o&&(l=t.findWhere(a.connectorMain.entrypoints,{id:o.toLowerCase()}));if(l&&l.imagePath)return{imgPath:l.imagePath};if(a&&a.connectorMain.entrypoints[0].imagePath)return{imgPath:a.connectorMain.entrypoints[0].imagePath};if(a)return{imgPath:i.p+"img/connector-logos/connector-generic-logo.png"};if("script"===n.data.connectionInfo.typeName)return{luiClass:"lui-icon--script"};if("inlinedata"===n.data.connectionInfo.typeName)return{luiClass:"lui-icon--edit"};return{}})};return new o}])}.apply(e,n),void 0!==a&&(t.exports=a))},2407:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2408),i(235)],a=function(t,e){t.service("qvDataManagerLineageService",["qvDataManagerDataService",function(i){function n(){}n.prototype.getFieldLineage=function(t,n){return i.getLoadModel().then(function(i){var a=i.getTargetTableModelById(t);var o=void 0;if(a){var l=new e.LineageGenerator(i);var s=a.getField(n);s&&(o=l.getFieldLineage(a.data,s))}return o})};n.prototype.getQueryLineage=function(i){var n=t.getService("qvDataManagerDataService");return n.getLoadModel().then(function(t){var n=void 0;var a=t.getTargetTableModelById(i);var o=new e.LineageGenerator(t);a&&(n=o.getQueryLineage(a.data));return n})};return new n}])}.apply(e,n),void 0!==a&&(t.exports=a))},2412:function(t,e,i){"use strict";var n,a;!(n=[i(2413),i(235)],a=function(t){return{template:t,scope:{context:"="},controller:["$scope","qvDataManagerDataService",function(t,e){t.context.allSelected=true;t.toggleAll=function(){t.context.selectedTable.sourceQueries.forEach(function(e){e.selected=t.context.allSelected})};t.toggled=function(){t.context.allSelected=t.context.selectedTable.sourceQueries.every(function(t){return t.selected})};t.toggleAll();t.isNoneSelected=function(){return t.context.selectedTable.sourceQueries.every(function(t){return!t.selected})};t.isAllSelected=function(){return t.context.selectedTable.sourceQueries.every(function(t){return t.selected})};t.split=function(){var i=t.context.selectedTable.sourceQueries.filter(function(t){return t.selected}).map(function(t){return t.id});e.splitQuery(t.context.selectedTable.id,i).then(function(){t.close()})}}]}}.apply(e,n),void 0!==a&&(t.exports=a))},2413:function(t,e){t.exports='<lui-dialog class="st-dialog" x-variant="{{::variant}}" x-arrow="arrow">\n    <lui-dialog-header>\n        <span q-translation="DataManager.SplitTables.SplitTableLabel, {{context.selectedTable.name}}"></span>\n    </lui-dialog-header>\n    <lui-dialog-body class="st-dialog-body">\n        <ul class="lui-list st-tables-list">\n            <li class="lui-list__item all-tables-list-item">\n                <span class="lui-list__text table-name-header" q-translation="DataManager.SplitTables.TableNameLabel"></span>\n                <span class="lui-list__aside">\n                    <label class="lui-checkbox">\n                        <input class="lui-checkbox__input" type="checkbox" aria-label="Label" ng-model="context.allSelected" ng-click="toggleAll()" qva-indeterminate="!isAllSelected() && !isNoneSelected()"/>\n                        <div class="lui-checkbox__check-wrap">\n                            <span class="lui-checkbox__check-text" q-translation="DataManager.SplitTables.SplitAllLabel"></span>\n                            <span class="lui-checkbox__check"></span>\n                        </div>\n                    </label>\n                </span>\n            </li>\n            <li class="lui-list__item tables-list-item" ng-repeat="table in context.selectedTable.sourceQueries">\n                <span class="lui-list__text">\n                    <span class="lui-icon  lui-icon--table" aria-hidden="true"></span>\n                    <span class="table-name">{{table.name}}</span>\n                </span>\n                <span class="lui-list__aside">\n                    <label class="lui-checkbox">\n                        <input class="lui-checkbox__input" type="checkbox" aria-label="Label" ng-model="table.selected" ng-click="toggled()"/>\n                        <div class="lui-checkbox__check-wrap">\n                            <span class="lui-checkbox__check"></span>\n                        </div>\n                    </label>\n                </span>\n            </li>\n        </ul>\n    </lui-dialog-body>\n    <lui-dialog-footer>\n        <button class="lui-button" ng-click="close()" q-translation="DataManager.SplitTables.CancelButton"></button>\n        <button class="lui-button  lui-button--success" ng-click="split()" ng-class="{\'lui-disabled\': isNoneSelected()}" q-translation="DataManager.SplitTables.SplitButton"></button>\n    </lui-dialog-footer>\n</lui-dialog>'},2414:function(t,e,i){"use strict";var n,a;!(n=[i(11),i(2415),i(2416),i(105),i(1008),i(163),i(235)],a=function(t,e,i,n,a,o){return{template:e,scope:{context:"="},controller:["$scope","$window","qvDataManagerSelectionService","qvDataManagerDataService",function(e,l,s,r){var c=t.extend(true,{},e.context.associationLink);var d=new i(c,e.context.loadModel);var u=d.getAssociationLink();e.context.joinTableName=u.association.source.tableName;e.leftTableName=e.context.joinTableName;e.rightTableName=u.association.target.tableName;e.joinTypes=n.JoinTables.joinTypes;e.context.selectedJoinType=e.joinTypes.outerJoin;e.tableNameErrors=[];e.help={syntheticKeyUrl:o.path+"QuickDataLoad_SyntheticKey"};e.openHelpWindow=function(t){l.open(t)};e.validateJoinTableName=function(){e.tableNameErrors=a.validateTableName(e.context.loadModel,e.leftTableName,e.context.joinTableName)};e.selectJoinButton=function(t){e.context.selectedJoinType=t};e.joinQueries=function(){var t=d.getMappingsForJoining(u);return r.joinQueries(e.context.joinTableName,e.context.selectedJoinType,t.tables,t.fields).then(function(){e.close();s.setSelectedTables([])})}}]}}.apply(e,n),void 0!==a&&(t.exports=a))},2415:function(t,e){t.exports='<lui-dialog class="st-dialog" x-variant="{{::variant}}" x-arrow="arrow">\n    <lui-dialog-header>\n        <span q-translation="DataManager.JoinTables.JoinTablesTitle"></span>\n    </lui-dialog-header>\n\n    <lui-dialog-body class="join-tables-dialog">\n        <div class="table-names">\n            <div class="left-table">\n                <div q-translation="DataManager.JoinTables.LeftTable"></div>\n                <div class="table-name" tid="left-table-name">{{leftTableName}}</div>\n            </div>\n            <div class="right-table">\n                <div q-translation="DataManager.JoinTables.RightTable"></div>\n                <div class="table-name" tid="right-table-name">{{rightTableName}}</div>\n            </div>\n        </div>\n        <div class="table-name-input">\n            <div class="table-name-input-label" q-translation="DataManager.JoinTables.JoinTableName"></div>\n            <input class="lui-input join-input" type="text" tid="table-name-input" ng-model="context.joinTableName" ng-change="validateJoinTableName()"/>\n            <div class="table-name-error" ng-if="tableNameErrors.length > 0">\n                <span ng-repeat="error in tableNameErrors">{{error.msg}}</span>\n            </div>\n        </div>\n        <div class="join-types">\n            <div class="join-type-header">\n                <span q-translation="DataManager.JoinTables.JoinType"></span>\n                <span class="lui-icon lui-icon--help help-icon" ng-click="openHelpWindow(help.joinTablesUrl)" q-title-translation="{{warning.helpTooltip}}"></span>\n            </div>\n            <div class="join-types-buttons">\n                <div class="join-type-btn outer-join" tid="join-btn-outer" ng-class="{\'selected\':context.selectedJoinType===joinTypes.outerJoin}" ng-click="selectJoinButton(joinTypes.outerJoin)">\n                    <div class="join-type-btn-contents">\n                        <div class="join-type-btn-svg outer"></div>\n                        <div class="join-type-label">{{joinTypes.outerJoin}}</div>\n                    </div>\n                </div>\n                <div class="join-type-btn inner-join" tid="join-btn-inner" ng-class="{\'selected\':context.selectedJoinType===joinTypes.innerJoin}" ng-click="selectJoinButton(joinTypes.innerJoin)">\n                    <div class="join-type-btn-contents">\n                        <div class="join-type-btn-svg inner"></div>\n                        <div class="join-type-label">{{joinTypes.innerJoin}}</div>\n                    </div>\n                </div>\n                <div class="join-type-btn left-join" tid="join-btn-left" ng-class="{\'selected\':context.selectedJoinType===joinTypes.leftJoin}" ng-click="selectJoinButton(joinTypes.leftJoin)">\n                    <div class="join-type-btn-contents">\n                        <div class="join-type-btn-svg left"></div>\n                        <div class="join-type-label">{{joinTypes.leftJoin}}</div>\n                    </div>\n                </div>\n                <div class="join-type-btn right-join" tid="join-btn-right" ng-class="{\'selected\':context.selectedJoinType===joinTypes.rightJoin}" ng-click="selectJoinButton(joinTypes.rightJoin)">\n                    <div class="join-type-btn-contents">\n                        <div class="join-type-btn-svg right"></div>    \n                        <div class="join-type-label">{{joinTypes.rightJoin}}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </lui-dialog-body>\n\n    <lui-dialog-footer>\n        <button class="lui-button" ng-click="close()" q-translation="DataManager.JoinTables.Cancel"></button>\n        <button class="lui-button  lui-button--success" tid="join-btn" ng-click="joinQueries()" ng-disabled="tableNameErrors.length > 0" q-translation="DataManager.JoinTables.Join"></button>\n    </lui-dialog-footer>\n</lui-dialog>'},2416:function(t,e,i){"use strict";var n,a;!(n=[i(151)],a=function(t){function e(t,e){this.associationLinks=t;this.loadModel=e}e.prototype.getMappingsForJoining=function(t){var e=[],i=[];e.push(t.source.id);e.push(t.target.id);o(t,i);s(this.loadModel,t.source.table,t.association.source.fieldName,i);s(this.loadModel,t.target.table,t.association.target.fieldName,i);return{tables:e,fields:i}};e.prototype.getAssociationLink=function(){var t,e;var i=a(this.associationLinks);t=i.association.target.tableName===i.source.name?i.association.target:i.association.source;e=i.association.source.tableName===i.target.name?i.association.source:i.association.target;i.association.source=t;i.association.target=e;return i};function i(t,e){if(t.includes(e.association.source.tableName))return e.association.source;if(t.includes(e.association.target.tableName))return e.association.target}function n(t,e,i){if(t.includes(i.association.source.tableName)&&i.association.source.tableName!==e.association.source.tableName)return i.association.source;if(t.includes(i.association.target.tableName)&&i.association.target.tableName!==e.association.source.tableName)return i.association.target}function a(t){var e=t[0];if(2===t.length){var a=t[1];e.target=a.source;var o=[e.source.name,e.target.name];o.includes(e.association.source.tableName)||(e.association.source=i(o,a));o.includes(e.association.target.tableName)||(e.association.target=i(o,a));e.association.source.tableName===e.association.target.tableName&&(e.association.target=n(o,e,a))}return e}function o(t,e){var i={name:t.association.name,sourceFields:[]};var n=t.source.table.columnStats.find(function(e){return e.name===t.association.source.fieldName}).id;var a=t.target.table.columnStats.find(function(e){return e.name===t.association.target.fieldName}).id;i.sourceFields.push(n);i.sourceFields.push(a);e.push(i)}function l(e,i){var n;var a=e.getField(i);if(a){var o=e.wasGeneratedByTransformation(a,t.DSMTypes.QueryTransformField.name,[t.DSMTypes.Transformations.lookupGeoInfo,t.DSMTypes.Transformations.geoPoint]);o||(n=a)}return n}function s(t,e,i,n){var a=t.getTargetTableModelById(e.id);e.columnStats.filter(function(t){return t.name!==i}).forEach(function(t){var e=l(a,t.id);e&&n.push({name:t.name,sourceFields:[t.id]})})}return e}.apply(e,n),void 0!==a&&(t.exports=a))},2417:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2418),i(90),i(91),i(89),i(199),i(95),i(50),i(105),i(253),i(493),i(1680),i(1194),i(2428),i(611),i(255),i(414),i(235),i(513),i(1681),i(2429),i(1195),i(1332)],a=function(t,e,i,n,a,o,l,s,r,c,d,u,p,f){var v={replace:true,restrict:"E",template:e,scope:{},controller:["$scope","$rootScope","$timeout","qvSizeNotSupported","qvDataManagerAppStorageService","qvDataManagerDataService","qvDataManagerSelectionService","qvDataManagerPreviewService","qvDataManagerViewService","qvDataManagerSpinnerService","qvDataManagerAssociationService","qvDataManagerCapabilityService",function(e,v,g,m,b,h,y,T,M,w,S,D){e.dataManagerAssociationService=S;e.bubblesDataProvider=new f(h,S);e.previewService=T;e.dataManagerCapabilityService=D;e.viewService=M;e.selectionService=y;e.debugEnabled=true===o.BUBBLES;e.showWarningMessage=false;e.warningMessageTitle="";e.warningMessageContent="";e.tablesLoaded=false;e.params={enableSVGFilters:!i.isEdge()};var x="bubblesState";var C=new a;var E=t.getService("luiDialog");e.$watch("dataManagerAssociationService.associationsToPreview",function(t,e){t!==e&&P()});e.$watch('viewService.isShowingSubviewWithBehaviour("modalMode", "selectionOnly")',function(t){e.bubblesEventsBridge.readOnlyStateChanged(t)});e.$on(r.Events.Associations.UpdateAssociationsRecommendationsToolbarButtonState,function(t,i){var n=i.associationsCount>0&&!i.isAssociationsRecommendationsPanelOpened;e.bubblesEventsBridge.bubblesAssociationPanelChanged({showBadge:n,isAssociationsRecommendationsPanelOpened:i.isAssociationsRecommendationsPanelOpened,associationsCount:i.associationsCount});g(function(){e.bubblesEventsBridge.resize()},350)});e.$on("bubbles-initialized",function(i,n){e.bubblesEventsBridge=n;n.onBubbleSelected(function(t){g(function(){t.isHub()?y.setSelectedObjects([{type:y.selectedObjectTypes.HUB,name:t.name,id:t.id,source:t}]):y.setSelectedTables([t.table.tableModel])})});n.onBubbleDoubleClicked(function(){g(function(){y.canEditObject()&&y.editObject()})});n.onLinksSelected(function(t){g(function(){S.selectAssociationLnk(t)})});n.onRecommendationJoined(function(t){g(function(){var e=t.recommendation;S.handleRecommendationJoined(e).then(function(){P()})})});n.onBubblesJoined(function(t){var e=new a;g(function(){I(e,t).then(function(){P()})});return e.promise});n.onBubblesSplit(function(t){g(function(){F(t).then(function(){P()})})});n.onSelectionCleared(function(){g(function(){y.setSelectedTables([])})});n.onModelReloaded(function(){g(function(){V()})});n.onLaunchAddData(function(){g(function(){t.getService("addDataStateService").showAddData()})});n.onAutoAssociateBubbles(function(){g(function(){e.$emit(r.Events.Associations.ToggleAssociationsRecommendationsPanel)})});n.onBubblesStateUpdated(function(t){g(function(){b.set(x,t)})});C.resolve()});function A(t,i,n){"tableSelectionBottom"===t&&i!==n&&g(function(){e.bubblesEventsBridge.resize()},350)}M.OnViewSizeChange.bind(A);e.$watch("showWarningMessage",function(t,i){i&&!t&&g(function(){e.bubblesEventsBridge.resize()})});e.addDataClicked=function(){t.getService("addDataStateService").showAddData()};function k(){return h.getAllTargetTables().then(function(t){if(t.tables&&0!==t.tables.length){e.showWarningMessage=false;e.warningMessageTitle="";e.warningMessageContent="";return true}e.showWarningMessage=true;e.warningMessageTitle=n.get("Bubbles.Warning.NoTables.Title");e.warningMessageContent=n.get("Bubbles.Warning.NoTables.Message");return false})}function I(t,e){return h.getLoadModel().then(function(i){var n=i.getTargetTableModelById(e[0].table.id);var a=i.getTargetTableModelById(e[1].table.id);var o={title:"AnalyzeModel.title",message:"AnalyzeModel.loading.message",leftTableId:n.data.id,leftFieldId:null,leftTableLocked:true,rightTableId:a.data.id,rightFieldId:null,rightTableLocked:true,name:null,editingAssociation:false,showBreakAssociationWarning:false,loadModel:i,setAssociation:function n(a){var o=i.getTargetTableModelById(a.leftTable.tableId);var l=i.getTargetTableModelById(a.rightTable.tableId);var s={table1:o,key1:a.leftTable.expression,table2:l,key2:a.rightTable.expression,name:a.name};y.setSelectedTables([e[0].table.tableModel,e[1].table.tableModel]);p.setAssociation(i,s);i.setProperties();t.resolve(true)},cancel:function e(){t.resolve(false)},areTablesAlreadyAssociated:function t(e,n){return p.getAssociationsBetweenTables(i,e,n).length>0}};return E.show({template:u.template,controller:u.controller,input:{context:o}})})}function F(t){return h.getLoadModel().then(function(e){var i,n;if(t[0].isHub()){i=e.getTargetTableModelById(t[1].table.id);n=t[0].name;d.LoadModelAssociations.removeFromAssociation(e,n,i,null)}else if(t[1].isHub()){i=e.getTargetTableModelById(t[0].table.id);n=t[1].name;d.LoadModelAssociations.removeFromAssociation(e,n,i,null)}else{var a=e.getTargetTableModelById(t[0].table.id);var o=e.getTargetTableModelById(t[1].table.id);d.LoadModelAssociations.removeAssociationBetween(e,a,null,o,null)}return c.updateProperties(e.serialize())})}function O(t){t?m.show({mode:"warning",message:"Fullscreen.SizeNotSupported",scope:e}):m.close()}function P(t){L();h.getNoDataFlag().then(function(i){i||k().then(function(i){e.tablesLoaded=true;if(i){var n={bubblesState:t,bubblesSelectionState:{selected:{selectedObjects:y.selectedObjects}}};e.bubblesEventsBridge.modelChanged(n)}})})}function q(){P();L();return a.resolve()}function L(){v.$broadcast("bubblesStateChanged")}function V(t){t&&w.cancelInvalidationSpinner();w.stopSpinner("bubbles")}s.ViewChanged.bind(O);O(s.isSmallDevice);e.$on("$destroy",function(){e.bubblesEventsBridge.getBubbleState().then(function(t){b.set(x,t)});M.OnViewSizeChange.unbind(A);s.ViewChanged.unbind(O);h.unregisterInvalidationHandler(q);l.unsubscribe(r.Events.PubSub.ForceReloadComplete,q);V()});a.all([C,M.initializationCompleted()]).then(function(){b.get(x).then(function(t){P(t)});h.registerInvalidationHandler(q);l.subscribe(r.Events.PubSub.ForceReloadComplete,q);e.$watchCollection("selectionService.selectedObjects",function(){var t={selectionOnly:true,bubblesSelectionState:{selected:{selectedObjects:y.selectedObjects}}};e.bubblesEventsBridge.modelChanged(t)})})}]};t.directive("qvDataManagerBubbles",function(){return v})}.apply(e,n),void 0!==a&&(t.exports=a))},2418:function(t,e){t.exports='<div class="qv-datamanager-bubbles">\n\t<div ng-if="tablesLoaded && showWarningMessage" class="qv-datamanager-warning-message">\n\t\t<div class="qv-datamanager-bubbles-warning-title">{{warningMessageTitle}}</div>\n\t\t<div class="qv-datamanager-bubbles-warning-message">{{warningMessageContent}}</div>\n\t\t<div class="add-data-bubble" ng-click="addDataClicked()" tid=\'qv-datamanager-bubbles-addData-btn\'>\n\t\t\t<div class="add-icon lui-icon lui-icon--add" q-title-translation="dataspace.addtable.title"></div>\n\t\t</div>\n\n\t</div>\n\t<qv-bubbles ng-hide="!tablesLoaded || showWarningMessage" bubbles-data-provider="bubblesDataProvider" params="params" debug-enabled="debugEnabled"></qv-bubbles>\n</div>'},2419:function(t,e){t.exports='<div class="lui-dialog qv-custom-association-dialog" ng-style="containerStyle">\n\t<div class="lui-dialog__header">\n\t\t<div class="lui-dialog__title" q-translation="DataManager.CustomAssociationDialog.DialogTitle"></div>\n\t</div>\n\t<div class="lui-dialog__body dm-main">\n\n\t\t<div class="dm-dialogInfo" q-translation="DataManager.CustomAssociationDialog.DialogInformation"></div>\n\t\t<div class="tables-container">\n\t\t\t<custom-association-table class="custom-association-table-div" model="leftTableModel" editable-table="!leftTableLocked" expression-array="leftTableExpression" ></custom-association-table>\n\t\t\t<div class="custom-association-score">\n\t\t\t\t<qv-spinner class="spinner" show="loadingScores" spinner-height="50px" spinner-width="50px" center-in-parent="true"></qv-spinner>\n\t\t\t\t<association-recommendation-circle ng-class="{\'hide-circle\': hideRecCircle}" tid="association-recommendation-circle" ng-hide="loadingScores" progress-percentage="customAssocationScoreNum"></association-recommendation-circle>\t\t\t\t\n\t\t\t</div>\n\t\t\t<custom-association-table class="custom-association-table-div" model="rightTableModel" editable-table="!rightTableLocked" expression-array="rightTableExpression" ></custom-association-table>\n\t\t</div>\n\t\t<div class="main-bottom">\n\t\t\t<div class="name-label" q-translation="DataManager.CustomAssociationDialog.AssociationName"></div>\n\t\t\t<association-recommendations-input\n\t\t\t\tclass="name"\n\t\t\t\tmodel="name"\t\t\t\n\t\t\t\teditable="true"\n\t\t\t    validate="validateCustomName"\n\t\t\t    modified-callback="modifiedCustomNameCallback"\t\t\t\t\t\t\t\t\t    \n\t\t\t    maxlength="{{maxNameLength}}"\n\t\t\t    input-placeholder-text="\'\'"\n\t\t\t    validation-popup-position="\'top\'"\n\t\t\t    tid="custom-association-dialog-name-input" \n\t\t\t></association-recommendations-input>\n\t\t</div>\n\n\t</div>\n\n\t<div class="lui-dialog__footer">\n\t\t<lui-button ng-click="cancel()" q-translation="Common.Cancel"></lui-button>\t\t\t\n\t\t<lui-button tid="custom-association-dialog-ok-button" ng-click="associateClicked()" ng-disabled="isOkDisabled()" q-translation="DataManager.CustomAssociationDialog.OkButton"></lui-button>\t\n\t</div>\n</div>\n'},2420:function(t,e){t.exports='<div class="lui-dialog qv-custom-association-warning-dialog" tid="dm-custom-association-warning-dialog">\n\t<div class="lui-dialog__header">\n\t\t<div class="lui-dialog__title">{{context.warningTitle}}</div>\n\t</div>\n\t<div class="lui-dialog__body dm-main">\n\t\t<div class="message-part1">{{context.warningMsg1}}</div>\n\t\t<div class="message-part2">{{context.warningMsg2}}</div>\n\t</div>\n\t<div class="lui-dialog__footer">\n\t\t<lui-button tid="dm-custom-association-warning-dialog-Cancel" ng-click="cancelClicked()" q-translation="Common.Cancel"></lui-button>\t\t\t\n\t\t<lui-button tid="dm-custom-association-warning-dialog-OK" ng-click="breakAssociationClicked()" ng-disabled="isOkDisabled()" q-translation="Common.OK"></lui-button>\n\t</div>\n</div>\n'},2421:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2422),i(1793),i(235)],a=function(t,e){t.directive("customAssociationTable",["qvDataManagerDataService",function(t){return{scope:{model:"=",editableTable:"=",expressionArray:"="},restrict:"E",template:e,controller:["$scope",function(e){e.options={selections:false,showSearch:true,zoomEnabled:false,layoutMode:1};e.object={};void 0===e.expressionArray&&(e.expressionArray=[]);e.editableTable&&(e.tables=e.model.loadModel.targetTableModels.filter(function(t){return!e.model.excludeTableId||t.data.id!==e.model.excludeTableId}));e.model.tableId&&i(e.model.tableId);function i(t){e.targetTableModel=e.model.loadModel.getTargetTableModelById(t);e.tableName=e.targetTableModel.data.name;if(e.model.initialFieldId){var i=e.targetTableModel.getField(e.model.initialFieldId);e.expressionArray.push({fieldId:e.model.initialFieldId,fieldName:i.name})}else e.expressionArray=[]}function n(t){var e={qInfo:{qType:"listbox"},qMetaDef:{},qListObjectDef:{qDef:{qGrouping:"N",qFieldDefs:[t.name],qFieldLabels:[t.label],qSortCriterias:[{qSortByState:1,qSortByNumeric:1,qSortByAscii:1,qSortByLoadOrder:1,qExpression:{}}],qNumberPresentations:[],qActiveField:0,autoSort:true},qFrequencyMode:"N",qShowAlternatives:true,qInitialDataFetch:[],qExpressions:[]},title:"",visualization:"listbox"};return e}function a(t){var i="";if(e.expressionArray.length){i="=";for(var n=0;n<e.expressionArray.length;n++){n>0&&(i+="&");var a=e.expressionArray[n];if(a.fieldId){var o=e.targetTableModel.getField(a.fieldId);var l=t[o.name];l.expression?i+="="===l.expression.charAt(0)?l.expression.slice(1):l.expression:i+="["+l.internalName+"]"}else i=i+"'"+a.delimiter+"'"}}else i="=''";return i}function o(i){var o=a(i);var l={name:o,label:"CustomAssociation"};return t.sendGenericCommand({handle:-1,method:"createScratchAppSessionObject",params:[n(l)]}).then(function(t){e.qvObjectModel=t},function(t){console.log(t)})}function l(){return e.targetTableModel?t.getTableFields(e.targetTableModel.data.name).then(function(t){return o(t.fieldNameMapping)}):o(null)}e.onTableChanged=function(){e.model.initialFieldId=null;i(e.model.tableId)};e.$watchCollection("model.tableId",function(){e.model.tableId?e.noTable=false:e.noTable=true});e.$watchCollection("expressionArray",function(){l()});e.$on("$destroy",function(){})}]}}])}.apply(e,n),void 0!==a&&(t.exports=a))},2422:function(t,e){t.exports='<div class="customAssociationTable">\n\t<div class="customAssociationTableHeader">\n\t\t<div ng-if="editableTable" class="customAssociation-editable-table">\n\t\t\t<span class="lui-icon  lui-icon--table"></span>\n\t\t\t<div class="customAssociation-table-selector">\n\t\t\t\t<div class="no-table-text" ng-show="noTable" q-translation="DataManager.SimpleExpressionBuilder.SelectTable"></div>\n\t\t\t\t<lui-select x-model="model.tableId" tid="custom-association-table-selector-{{model.id}}" x-change="onTableChanged()" x-options="table.data.id as table.data.name for table in tables"></lui-select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="!editableTable" class="table-header-name"><span class="lui-icon  lui-icon--table"></span>\n\t\t\t<div class="header-text" title="{{tableName}}">{{tableName}}</div>\n\t\t</div>\n\t</div>\n\t<div class="customAssociationTableExpression">\n\t\t<simple-expression-builder table-id="model.id" target-table-model="targetTableModel" expression-array="expressionArray"></simple-expression-builder>\n\t</div>\n\t<div class="customAssociationTablePreview">\n\t\t<qv-object model="qvObjectModel" ng-if="qvObjectModel" options="options" object="object" class="custom-preview"></qv-object>\n\t</div>\n</div>\n\n'},2423:function(t,e){t.exports='<div class="qv-simple-expression-container">\n\t<div class="left-side" ng-click="onSelectFieldsAreaClicked( $event )">\n\t\t<div class="no-expression-text" ng-show="noExpression" q-translation="DataManager.SimpleExpressionBuilder.SelectFields" ng-if="!isAddFieldButtonDisabled()"></div>\n\t\t<div ng-repeat="item in expressionArray" class="simple-expression-row">\n\t\t\t\t<div ng-if="item.fieldName" class="expression-token"><div class="name-token" title="{{item.fieldName}}">{{item.fieldName}}</div><div class="lui-icon lui-icon--remove delete-token" ng-click="deleteToken( $event, $index )"></div></div>\n\t\t\t\t<div ng-if="item.delimiter" class="expression-token"><div class="name-token" title="{{item.delimiter}}">{{item.delimiter}}</div><div class="lui-icon lui-icon--remove delete-token" ng-click="deleteToken( $event, $index )"></div></div>\t\t\n\t\t</div>\n\t</div>\n\t<div class="right-side">\n\t\t<button\n\t\t\tclass="simple-expression-add-field-popover-button qui-popover-button lui-icon lui-icon--plus"\n\t\t\ttid="simple-expression-add-field-popover-button-{{tableId}}"\n\t\t\tng-disabled="isAddFieldButtonDisabled()"\t\t\t\n\t\t\tq-title-translation="DataManager.SimpleExpressionBuilder.AddFieldsButton"\n\t\t\tng-click="onAddFieldClicked( $event )"></button>\n\t</div>\n</div>\n\n'},2424:function(t,e,i){"use strict";var n,a;!(n=[i(2425)],a=function(t){var e={template:t,scope:{popupHeight:"=",tableTid:"=",showOnlyFields:"=",contentTid:"=",menuItems:"=",delimiterEntered:"=",model:"="},controller:["$scope",function(t){void 0===t.model.delimiterInput&&(t.model.delimiterInput="");t.selectFieldMenuItem=function(e,i){i&&i.preventDefault&&i.preventDefault();if(!e.disable){e.fieldSelected(e.text,e.fieldId);t.close()}};t.selectDelimiter=function(){if(""===t.model.delimiterInput)return;if(t.delimiterEntered){t.delimiterEntered(t.model.delimiterInput);t.model.delimiterInput=""}t.close()};t.onKeyDown=function(e){13===e.which&&t.selectDelimiter()}}]};return e}.apply(e,n),void 0!==a&&(t.exports=a))},2425:function(t,e){t.exports='<lui-popover class="qv-simple-expression-add-menu-popup" tid="simple-expression-add-field-content-{{tableTid}}">\n\t<lui-popover-body class="lui-nopad">\n\t\t<div ng-if="!showOnlyFields" class="qv-simple-expression-menu-title" q-translation="DataManager.SimpleExpressionBuilder.AddMenu.Delimiter"></div>\n\t\t\t\n\t\t<div ng-if="!showOnlyFields" class="dv-delimiter-input">\n\t\t\t<input\n\t\t\t\tng-class="{ inputClass: inputClass, \'invalid-input\': errorState }"\n\t\t\t\tclass="lui-input"\n\t\t\t\ttype="text"\n\t\t\t\tng-model="model.delimiterInput"\n\t\t\t\tq-placeholder="DataManager.SimpleExpressionBuilder.AddMenu.AddDelimiterPlaceholder"\n\t\t\t\tng-keydown="onKeyDown( $event )"\n\t\t\t\tmaxlength="255"\n\t\t\t\tminlength="0"\n\t\t\t\tng-trim="false"\n\t\t\t\ttid="simple-expression-add-field-delimiter-input-{{tableTid}}" \n\t\t\t/>\n\t\t\t<span class="simple-expression-add-field-delimiter-return-key lui-icon  lui-icon--submit" ng-disabled="quiModel.delimiterInput === \'\'" ng-click="selectDelimiter()"></span>\n\t\t</div>\n\n\t\t<div class="qv-simple-expression-menu-title" q-translation="DataManager.SimpleExpressionBuilder.AddMenu.Fields"></div>\n\n\t\t<ul class="lui-list field-list" ng-style="{\'max-height\': popupHeight - 162}" tid="{{contentTid}}">\n\t\t\t<li class="qv-simple-expression-menu lui-list__item"\n\t\t\t\ttid="simple-expression-add-field-list-{{tableTid}}-{{$index}}"\n\t\t\t\tng-repeat="menuItem in menuItems"\n\t\t\t\tng-disabled="menuItem.disable"\n\t\t\t\tng-class="{\'open-in-new-tab-always\': menuItem.openInNewTab == \'always\'}"\n\t\t\t\tng-hide="menuItem.hide"\n\t\t\t\tng-click="selectFieldMenuItem(menuItem, $event)"\n\t\t\t>\n\t\t\t\t<span class="lui-list__text menu-item-text"\n\t\t\t\t\t\ttid="{{menuItem.tid}}"\n\t\t\t\t\t\tq-title-translation="{{ menuItem.title || menuItem.text}}"\n\t\t\t\t\t\tng-class="{\'open-in-new-tab-text-optional\': menuItem.openInNewTab == \'optional\', \'open-in-new-tab-always\': menuItem.openInNewTab == \'always\'}"\n\t\t\t\t\t\tng-disabled="menuItem.disable"> {{menuItem.text}}\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>\n'},2426:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2427)],a=function(t,e){t.directive("associationRecommendationCircle",function(){return{scope:{progressPercentage:"="},restrict:"E",template:e,controller:["$scope","$timeout",function(t,e){var i={GREEN:"good",ORANGE:"ok",RED:"bad"};var n=0;var a=null;t.rotateAmount=0;t.circleState=i.RED;t.$watch("progressPercentage",function(){t.rotateAmount=1.8*t.progressPercentage;var o=i.RED;var l=t.progressPercentage>=75?1:t.progressPercentage<50?3:2;switch(l){case 1:o=i.GREEN;break;case 2:o=i.ORANGE;break;case 3:o=i.RED;break}if(l<=n){e.cancel(a);t.circleState=o}else a=e(function(){t.circleState=o;a=null},800);n=l});t.$on("$destroy",function(){a&&e.cancel(a)})}]}})}.apply(e,n),void 0!==a&&(t.exports=a))},2427:function(t,e){t.exports="<div class=\"qv-association-recommendation-circle\" data-progress=\"progressPercentage\">\n\t<div class=\"circle\">\n\t\t<div class=\"mask full\"  ng-style=\"{'transform': 'rotate('+ rotateAmount+'deg)'}\">\n\t\t\t<div class=\"fill\" ng-class=\"{'fixFill': rotateAmount === 180, 'good':circleState === 'good', 'ok':circleState === 'ok', 'bad':circleState === 'bad' }\" ng-style=\"{'transform': 'rotate('+ rotateAmount+'deg)'}\"></div>\n\t\t</div>\n\t\t<div class=\"mask half\" >\n\t\t\t<div class=\"fill\"  ng-class=\"circleState\" ng-style=\"{'transform': 'rotate('+ rotateAmount+'deg)'}\"></div>\n\t\t\t<div class=\"fill fix\" ng-class=\"circleState\" ng-style=\"{'transform': 'rotate('+rotateAmount*2+'deg)'}\"></div>\n\t\t</div>\n\t</div>\n\t<div class=\"inset\">\t\t\n\t</div>\n</div>"},2428:function(t,e,i){"use strict";var n,a;!(n=[i(54),i(89),i(151),i(1794),i(493)],a=function(t,e,i,n,a){function o(t,e){this.dataService=t;this.associationService=e}o.prototype.getTableData=function(){var t=new e;var i=this.dataService;var o=this.associationService;i.getLoadModel().then(function(e){return i.getAllTargetTables().then(function(d){return i.getAllRecommendations().then(function(i){var u=n.create(e);u.setAssociationData(i.result);var p=l(u);var f=s(d,e);var v=a.LoadModelAssociations.getAssociationNames(e);var g=r(v,e);var m=o.getAssociationsToPreview();g=c(g,m);t.resolve({tables:f,associations:g,recommendations:p})})})}).catch(function(e){t.reject(e)});return t.promise};function l(t){return t.getAllRecommendations().map(function(t){var e=t.associations.reduce(function(t,e){if(e.type===n.ASSOCIATION.GOOD||e.type===n.ASSOCIATION.BAD)return e;if(t.type===n.ASSOCIATION.GOOD||t.type===n.ASSOCIATION.BAD)return t;return e.score>t.score?e:t},t.associations[0]);var i={value:e.score,text:e.scoreTxt};return{source:{tableName:e.left.table,columnName:e.left.field},target:{tableName:e.right.table,columnName:e.right.field},score:i}})}function s(t,e){return t.tables.map(function(t){var i=e.getSourceTableByTableRefId(t.data.tableRef);var n={id:t.data.id,name:t.data.name,rowCount:t.noOfRows,status:p(t),type:f(t),tableModel:t,isFiltered:i&&i.isFiltered(),columnStats:t.getFields().map(function(t){return{id:t.id,name:t.name}})};n.id||(n.id=n.type+"__"+n.name);return n})}function r(e,i){var n=[];t.forEach(e,function(e){var o=a.LoadModelAssociations.getAssociation(i,e);t.forEach(o.nodes,function(e){t.forEach(o.nodes,function(t){if(e!==t&&!u(n,o.name,e,t)){var i={name:o.name,preview:false,source:{tableName:e.table.data.name,fieldName:e.field.name},target:{tableName:t.table.data.name,fieldName:t.field.name}};n.push(i)}})})});return n}function c(e,i){t.forEach(i,function(i){t.forEach(i.links,function(n){t.forEach(i.links,function(t){if(n!==t&&!d(e,i.name,n,t)){var a={name:i.name,preview:true,source:{tableName:n.query.name,fieldName:n.field.name},target:{tableName:t.query.name,fieldName:t.field.name}};e.push(a)}})})});return e}function d(t,e,i,n){var a={table:{data:{name:i.query.name}},field:{name:i.field.name}};var o={table:{data:{name:n.query.name}},field:{name:n.field.name}};return u(t,e,a,o)}function u(t,e,i,n){return t.some(function(t){return t.name===e&&(t.source.tableName===i.table.data.name&&t.source.fieldName===i.field.name&&t.target.tableName===n.table.data.name&&t.target.fieldName===n.field.name||t.source.tableName===n.table.data.name&&t.source.fieldName===n.field.name&&t.target.tableName===i.table.data.name&&t.target.fieldName===i.field.name)})}function p(t){var e=t.getStatus()===i.DSMTypes.QueryStatus.delete?"Deleted":-1===t.noOfRows?"Invalid":t.getStatus()===i.DSMTypes.QueryStatus.add||t.getStatus()===i.DSMTypes.QueryStatus.update?"Pending":"Normal";return e}function f(t){var e="";switch(t.sourceType){case"ScriptTable":e="Script";break;case"ConcatenationQuery":case"ForcedConcatenationQuery":e="Concatenated";break;case"JoinedQuery":e="Joined";break;default:e="Normal"}return e}return o}.apply(e,n),void 0!==a&&(t.exports=a))},2447:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(91),i(89),i(93),i(235)],a=function(t,e,i,n){t.service("qvDataManagerToastService",["qvDataManagerDataService",function(a){var o=[];var l=function t(){n.getApp().then(function(t){return t.undo()})};function s(){a.registerInvalidationHandler(r.bind(this))}s.prototype.showToast=function(t,i,n,a){var s={message:t,appearOnInvalidation:i,action:n||l,actionMessage:a||e.get("DataManager.Toast.Undo")};i?o.push(s):c(s)};function r(){o.forEach(function(t){c(t)});o=[];return i.resolve()}function c(e){var i=t.getService("luiToast");i.show({message:e.message,actionMessage:e.actionMessage,action:e.action})}return new s}])}.apply(e,n),void 0!==a&&(t.exports=a))},2448:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(11),i(97),i(91),i(105),i(2449),i(50),i(151),i(54),i(89),i(1039),i(993),i(101),i(1696),i(1680),i(1194),i(1156),i(456),i(2450),i(2453),i(2456),i(1359),i(1195),i(2471),i(2472),i(2482),i(235),i(513),i(1150),i(1278),i(1333),i(1279),i(1797)],a=function(t,e,i,n,a,o,l,s,r,c,d,u,p,f,v,g,m){var b={restrict:"EA",template:o,scope:{tableToBeEdited:"=",loadModel:"=",closeCallback:"&"},controller:["$scope","$element","qvSizeNotSupported","$timeout","qvDataManagerViewService","qvDataManagerSelectionService","qvDataManagerEditorSelectionService","qvDataManagerPivotService","qvDataManagerDataService","qvDataManagerEditorDetailsViewService","qvDataManagerPreviewService","qvGridColumnHighlightService","qvGuidancePopover",function(o,b,h,y,T,M,w,S,D,x,C,E,A){var k;o.emptyClickHandler=function(){};o.editorDetailsViewService=x;o.dataManagerSelectionService=M;o.dataManagerViewService=T;o.dataManagerViewService.OnGridEditorOpen.bind(J);o.properties={isConcatenated:false};o.disableHeaderItems={};o.tableBeingEdited={instance:null};o.properties.tableEditable=function(){return!o.tableBeingEdited.instance.isConcatenatedTable()};o.tableSource="";o.pivotService=S;o.gridColumnHighlightService=E;var I=t.getService("luiDialog");var F=t.getService("qvConfirmDialog");o.currentDisplayedTable=null;o.$watch("sourceTable",function(t){t&&(o.sourceFilter=t.getFilter())});o.$watch("tableBeingEdited.instance",function(t,e){if(t!==e&&o.tableBeingEdited.instance){if(o.tableBeingEdited.instance.isQueryTable())o.disableHeaderItems={};else if(o.tableBeingEdited.instance.isConcatenatedTable()){var i=false;o.disableHeaderItems={tableRename:false,transformations:i,addFields:i,updateFromSource:true}}else if(o.tableBeingEdited.instance.isCrossTable()){o.disableHeaderItems={tableRename:true,addFields:true,updateFromSource:true};o.disableHeaderItems.addFields=false}O();var n=o.tableToBeEdited.table;o.tableSource=C.tableSource(n)}});o.$watch("tableToBeEdited.table",function(t,i){t!==i&&y(function(){o.tableBeingEdited.instance=o.tableToBeEdited.table;e(".qv-datamanager-preview").removeClass("delayPreviewTransition");e(".qv-data-manager").removeClass("delayPreviewTransition")},300)});function O(){D.getAllTargetTables().then(function(t){var e=r.find(t.tables,function(t){return t.data.id===o.tableBeingEdited.instance.data.id});var i=K().length,a=0,l="",s="";if(e&&e.noOfRows){a=e.noOfRows;l=n.get("DataManager.Editor.DimensionColumns",[i]);s=n.get("DataManager.Editor.DimensionRows",[a])}o.tableDimension={columns:i,columnsLabel:l,rows:a,rowsLabel:s}})}function P(){o.contentLoading=true}function q(){o.contentLoading=false}var L={};function V(){o.loadModel&&o.tableBeingEdited.instance&&(L=g.getAssociationsForTable(o.loadModel,o.loadModel.getTargetTableModelById(o.tableBeingEdited.instance.getId())))}function N(t,e,i,n,a,l){var s={title:"AnalyzeModel.title",message:"AnalyzeModel.loading.message",leftTableId:o.tableBeingEdited.instance.getId(),leftFieldId:i.id,rightTableId:n,rightFieldId:a,rightTableLocked:t,name:l,editingAssociation:t,showBreakAssociationWarning:!t,loadModel:this.loadModel,setAssociation:function t(e){var i=o.loadModel.getTargetTableModelById(e.leftTable.tableId);var n=o.loadModel.getTargetTableModelById(e.rightTable.tableId);var a={table1:i,key1:e.leftTable.expression,table2:n,key2:e.rightTable.expression,name:e.name};g.setAssociation(o.loadModel,a);o.loadModel.setProperties()},areTablesAlreadyAssociated:function t(e,i){return g.getAssociationsBetweenTables(o.loadModel,e,i).length>0}};return I.show({template:v.template,controller:v.controller,input:{context:s}})}function B(t,e,i){var a=o.loadModel.getTargetTableModelById(o.tableBeingEdited.instance.getId());var l=o.loadModel.getTargetTableModelById(e);F.show({title:n.get("DataManager.GridEditor.AssociationsPopup.Break.Confirmation.Title"),message:n.get("DataManager.GridEditor.AssociationsPopup.Break.Confirmation.Content",[a.data.name,l.data.name]),okLabel:n.get("DataManager.GridEditor.AssociationsPopup.Break.Confirmation.BreakButton"),cancelLabel:n.get("Common.Cancel")}).closed.then(function(e){if(e){g.breakAssociation(o.loadModel,a,t,l,i);o.loadModel.setProperties()}})}S.setPivotEnabled(false);o.getDataSpaceInput=function(){return d.getDataSpaceInput()};o.getDataSpaceInput();o.redraw=function(){o.qvObjectOptions&&o.qvObjectOptions.externalInterface&&o.qvObjectOptions.externalInterface.forceRedraw&&o.qvObjectOptions.externalInterface.forceRedraw()};o.showCalculatedFieldPane=function(t){o.showAddCalculatedPane=true;o.calculatedField=t};o.hideCalculatedFieldPane=function(){if(o.showAddCalculatedPane){o.showAddCalculatedPane=false;o.calculatedField=null;o.qvObjectOptions&&y(o.redraw,0)}};var $=null;var _=null;var R;var j=0;o.unpivotCb=function(t){$=t};function z(t){if(t>-1){var e=o.tableBeingEdited.instance.getId();var n=o.tableBeingEdited.instance.fields[t].id;y(function(){i.force("end");o.$broadcast("selectedFieldChange",{tableId:e,fieldId:n})})}}function H(t,e){e&&j<25&&(R=y(function(){var i=o.tableBeingEdited.instance;if(i){j++;o.tableRendered?e.scroll(t,0,e.DELTA_MODE.LINE):H(t,e)}},250,false))}function G(t){var e=o.tableBeingEdited.instance;if(e){var i=r.find(e.fields,function(e){return e.name===t});if(i)return e.fields.indexOf(i)}return 0}function U(t,e,i){var n;o.tableBeingEdited.instance&&t>=0&&t<o.tableBeingEdited.instance.fields.length&&(n=o.tableBeingEdited.instance.fields[t]);if(S.getPivotEnabled()&&n)W(n);else if(x.previewPaneIsActive()&&n){w.clearSelections();w.setSelectionsEnabled(true);w.selectColumn(n);y.cancel(R);j=0;H(t,i)}if($!==t||e){$=t;z($)}}function W(t){if(o.tableBeingEdited.instance){var e=o.tableBeingEdited.instance;if(!w.isColumnSelected(t.id)&&w.getSelectedColumns().length===e.getFields().length-1){var i={alignTo:b.find("#header_"+t.id),title:n.get("DataManager.GridEditor.CrossTable.SelectionErrorTitle"),message:n.get("DataManager.GridEditor.CrossTable.SelectionErrorText"),menuOptions:{position:"bottom",width:"270",content:{}}};A.show(i);return}w.toggleSelection(t)}}function Q(t,e){_=e}function K(){return m.filterTransformationFieldsWithType(o.tableBeingEdited.instance,[s.DSMTypes.Transformations.lookupGeoInfo])}o.$on("straight-table-initialized",function(t,e){if("data-manager-editor-straight-table"===e.id){E.init(e.grid,e.headers);if(o.dataManagerViewService.isGridEditorOpen()){var i=$;if(_){i=G(_);_=null}o.$broadcast("field-selected",i||0,true,e.scrollApi)}}});o.$watch("editorDetailsViewService.isPreviewPaneEnabled",function(t){t||($=void 0)});o.$watch("editorDetailsViewService.isPreviewPaneActive",function(t){t||($=void 0)});o.$on("field-selected",function(t,e,i,n){U(e,i,n)});o.$on("column-selected",function(t,e,i){var n=o.tableBeingEdited.instance;var a=i.left+e;if(n){var l=K();if(l&&l.length>a){var s=l[a];var r=n.fields.indexOf(s);r>=0&&U(r,false)}}});o.$on(a.Events.EditorDetailsPane.FieldCreated,Q);o.$on("$destroy",function(){o.dataManagerViewService.OnGridEditorOpen.unbind(J)});function J(t){if(t)w.setSelectionsEnabled(true);else{e("qv-data-manager-editor").removeClass("qv-grid-open");o.tableBeingEdited.instance=null;o.qvObjectModel=null;o.tableToBeEdited.table=null;w.clearSelections();S.setPivotEnabled(false);w.setSelectionsEnabled(false);o.hideCalculatedFieldPane();o.closeCallback&&o.closeCallback();o.$broadcast("selectedFieldChange",void 0)}}o.closeGridEditor=function(){$=null;o.dataManagerViewService.setGridEditorOpen(false,null);o.$broadcast("exploreFieldChange",{field:void 0,refreshOnly:true})};function Y(t){t?h.show({mode:"warning",message:"Fullscreen.SizeNotSupported",scope:o}):h.close()}l.ViewChanged.bind(Y);o.$on("$destroy",function(){o.qvObjectModel=null;l.ViewChanged.unbind(Y)});Y(l.isSmallDevice);o.$watch("tableBeingEdited.instance",function(t,i){t||e("qv-data-manager-editor").removeClass("qv-grid-open");if(t&&t.data.name&&(!i||t.data.id!==i.data.id)){e("qv-data-manager-editor").addClass("qv-grid-open");X(true)}});var Z;function X(t){o.tableRendered=false;o.tableBeingEdited.instance.data.sourceQueries&&o.tableBeingEdited.instance.data.sourceQueries.length>0?o.sourceTable=o.loadModel.getSourceTableByQueryId(o.tableBeingEdited.instance.data.sourceQueries[0].id):o.sourceTable=o.loadModel.getSourceTableByQueryId(o.tableBeingEdited.instance.getId());V();if(t||it()){o.qvObjectModel=null;P();var e=Z&&Z.model.lastSort?Z.model.lastSort:null;D.getStraightTablePreview(o.loadModel,o.tableBeingEdited.instance.getId(),e).then(function(t){if(!o.tableBeingEdited.instance)return;k=r.map(o.loadModel.getTargetTableModelById(o.tableBeingEdited.instance.getId()).getFields(),r.clone);w.removeSelectionsForMissingColumns(k);Z={template:'<qv-data-manager-editor-header header-model="header" options="options" dm-model="dmmodel"></qv-data-manager-editor-header>',model:{loadModel:o.loadModel,tableId:o.tableBeingEdited.instance.getId(),sourceTable:o.sourceTable,editCalculatedField:o.showCalculatedFieldPane,editAssociationClicked:N,breakAssociationClicked:B,associations:L,editable:function t(){return!o.showAddCalculatedPane},lastSort:e},height:"57px"};o.qvObjectOptions={selections:false,useAllSpace:true,disableDragAndDropColumnReorder:true,customHeader:Z,virtualHorizontalScroll:true,minColumnWidth:80,externalInterface:{straightTableId:"data-manager-editor-straight-table"},onRendered:function t(){o.tableRendered=true}};o.qvObjectModel=t.genObj}).finally(function(){q()})}else{o.qvObjectOptions.customHeader.model.associations=L;D.getTableFields(o.tableBeingEdited.instance.data.name).then(function(t){if(o.qvObjectModel){var e=t.fieldNameMapping;var i=f.getDimensions(o.loadModel.getTargetTableModelById(o.tableBeingEdited.instance.getId()),e);o.qvObjectModel.getProperties().then(function(t){p.setValue(t,"qHyperCubeDef.qDimensions",i);o.qvObjectModel.setProperties(t)},function t(e){e.isHandled=true;X(true)})}})}}function tt(t,e){var i=t?t.data.loadSelectStatement:void 0;var n=e?e.data.loadSelectStatement:void 0;var a=t?t.data.selectStatement:void 0;var o=e?e.data.selectStatement:void 0;return i!==n||a!==o}function et(t,e){if(e){if(e.length!==t.length)return true;for(var i=0;i<t.length;i++)if(!u.LoadModelHelpers.areQueryFieldsEqual(t[i],e[i],function(t){return"name"===t||"tags"===t},function(t){return"defineOrder"==t.op}))return true;return false}return true}function it(){var t=o.loadModel.getSourceTableByQueryId(o.tableBeingEdited.instance.getId());var e=o.sourceTable;var i=o.loadModel.getTargetTableModelById(o.tableBeingEdited.instance.getId()).getFields();return tt(t,e)||et(i,k)}function nt(t,e){if(!e&&o.tableBeingEdited.instance&&t){var i=o.tableBeingEdited.instance.getTableRefs();i&&t.some(function(t){return i.indexOf(t)>=0})&&X(true)}return c.resolve()}D.registerTablesRefreshedHandler(nt);function at(){D.getLoadModel().then(function(t){if(!o.tableBeingEdited.instance)return;var e=r.find(t.queries,function(t){return t.id===o.tableBeingEdited.instance.getId()&&t.status!==s.DSMTypes.QueryStatus.delete});if(e)y(function(){if(o.tableBeingEdited.instance){o.tableBeingEdited.instance=t.getTargetTableModelById(o.tableBeingEdited.instance.getId());X()}},0);else{if(o.tableBeingEdited.instance){if(o.tableBeingEdited.instance.isCrossTable()&&r.find(o.tableBeingEdited.instance.getSources(),function(e){return e.id===t.queries[0].id})){o.tableBeingEdited.instance=t.getTargetTableModelById(t.queries[0].id);return}if("CrossTableQuery"===t.queries[0].type&&r.find(t.queries[0].sourceQueries,function(t){return t.id===o.tableBeingEdited.instance.getId()})){o.tableBeingEdited.instance=t.getTargetTableModelById(t.queries[0].id);return}}o.dataManagerSelectionService.setSelectedObjects([])}})}D.registerInvalidationHandler(at);o.$on("$destroy",function(){D.unregisterTablesRefreshedHandler(nt);D.unregisterInvalidationHandler(at)})}]};t.directive("qvDataManagerEditor",function(){return b})}.apply(e,n),void 0!==a&&(t.exports=a))},2449:function(t,e){t.exports='<ds-grid-header header-icon="lui-icon--table"\n\t\t\t\ttable-name="tableBeingEdited.instance.data.name"\n\t\t\t\tfilter="sourceFilter"\n\t\t\t\ttable-source="tableSource"\n\t\t\t\ttable-dimension="tableDimension"\n\t\t\t\teditable="properties.tableEditable && !showAddCalculatedPane"\n\t\t\t\tclose-callback="closeGridEditor"\n\t\t\t\tshow-calculated-pane="showCalculatedFieldPane"\n\t\t\t\tload-model="loadModel"\n\t\t\t\tget-data-space-input="getDataSpaceInput"\n\t\t\t\tsource-table="sourceTable"\n\t\t\t\tdisable-items="disableHeaderItems"\n\t\t\t\ttable-being-edited="tableBeingEdited"\n\t\t\t\tcontent-loading="contentLoading"\n\t\t\t\tng-click="emptyClickHandler()"\n>\n</ds-grid-header>\n\n<div class="dataManagerContentRegion" ng-click="emptyClickHandler()" ng-class="{\'pivot-enabled\': pivotService.getPivotEnabled()}">\n\t<div class="grid-body" ng-class="{\'scrolling-on\': qvObjectOptions.useHorizontalScroll}">\n\n\t\t<div class="grid" tid="data-manager-editor-grid">\n\t\t\t<qv-object model=\'qvObjectModel\'\n\t\t\t\t\t   ng-if="qvObjectModel"\n\t\t\t\t\t   options=\'qvObjectOptions\' data-ds-straight-table-selection></qv-object>\n\t\t</div>\n\n\t\t<qv-spinner class="spinner" show="contentLoading"  show-delay="200" show-for-at-least="400" spinner-height="100px" spinner-width="100px" center-in-parent="true"></qv-spinner>\n\n\n\t\t<ds-add-calculated-field ng-if="showAddCalculatedPane"\n\t\t\t\t\t\t\t\t load-model="loadModel"\n\t\t\t\t\t\t\t\t table-id="tableBeingEdited.instance.data.id"\n\t\t\t\t\t\t\t\t calculated-field="calculatedField"\n\t\t\t\t\t\t\t\t column-layout="columnLayout"\n\t\t\t\t\t\t\t\t hide-calculated-pane="hideCalculatedFieldPane"\n\t\t\t\t\t\t\t\t column-highlight-service="gridColumnHighlightService"\n\t\t\t\t\t\t\t\t load-finished-callback="redraw"></ds-add-calculated-field>\n\n\t</div>\n\n\t<qv-data-manager-editor-details-pane ng-if="editorDetailsViewService.previewPaneIsActive()"></qv-data-manager-editor-details-pane>\n\t\n</div>\n\n<div class="grid-footer" ng-show="pivotService.getPivotEnabled()">\n\t<qv-data-manager-pivot-preview\n\t\t\ttable-being-edited="tableBeingEdited"\n\t\t\tload-model="loadModel"\n\t\t\tredraw="redraw"\n\t\t\ton-unpivot="unpivotCb(index)"\n\t\t\tcolumn-highlight-service="gridColumnHighlightService">\n\t</qv-data-manager-pivot-preview>\n\n</div>'},2450:function(t,e,i){"use strict";var n,a;!(n=[i(54),i(11),i(48),i(91),i(2451),i(253),i(993),i(495),i(103),i(1278),i(1333),i(513),i(1279)],a=function(t,e,i,n,a,o,l,s,r){i.directive("qvDataManagerPivotPreview",["qvDataManagerSelectionService","qvDataManagerEditorDetailsViewService",function(i,c){return{scope:{tableBeingEdited:"=",loadModel:"=",redraw:"=",columnHighlightService:"=",onUnpivot:"&"},restrict:"E",template:a,controller:["$scope","$timeout","qvDataManagerEditorSelectionService","qvDataManagerPivotService",function(a,d,u,p){a.columnSelectionService=u;a.pivotService=p;a.editorDetailsViewService=c;a.onClose=function(){p.setPivotEnabled(false);u.clearSelections();u.setSelectionsEnabled(false);a.editorDetailsViewService.enablePreviewPanel();d(a.redraw,0)};a.isPivoted=function(){return a.tableBeingEdited.instance&&a.tableBeingEdited.instance.isCrossTable()};function f(){if(u.hasSelections()){a.tableBeingEdited.instance=p.performPivot(a.loadModel,a.tableBeingEdited.instance.getId(),u.getSelectedColumnIds());i.setSelectedObjects([{tableModel:a.tableBeingEdited.instance,type:"table"}]);u.clearSelections();a.onUnpivot&&a.onUnpivot({index:-1});r.trackEvent(r.customEvents.APPLY_UNPIVOT)}a.onClose()}a.onAccept=function(){a.loadModel.hasAssociations(a.tableBeingEdited.instance.getId())?s.confirmAction({header:"DataManager.GridEditor.CrossTable.BreakAssociationsConfirmTitle",content:"DataManager.GridEditor.CrossTable.BreakAssociationsConfirmContent",declineButtonTitle:"Common.Cancel",confirmButtonTitle:"Common.OK"}).resultPromise.then(function(){f()}).catch(function(){}):f()};function v(){u.hasSelections()&&g()}var g=t.throttle(m,300);a.$watch("pivotService.getPivotEnabled()",function(t){if(t){u.setSelectionsEnabled(!a.isPivoted());v()}else a.editorDetailsViewService.enablePreviewPanel()});a.$watchCollection("columnSelectionService.getSelectedColumns()",function(){p.getPivotEnabled()&&v()});function m(){d(function(){var i,o;var s=[];var r=0;var c=200;e('table[ng-style="tableStyles.content"] tbody tr').each(function(){if(s.length*r>c)return;var t=[];var i=e(this).find("td");if(i.length>0){i.each(function(){t.push(e.trim(e(this).text()))});s.push(t);r||(r=t.length)}});var p=a.tableBeingEdited.instance.data.fields.map(function(t){return t.id});var f=[];var v=u.getSelectedColumns();v=v.map(function(t){return p.indexOf(t.id)});v.sort();var g=[];for(i=0;i<p.length;i++)if(-1===v.indexOf(i)){o=t.find(a.tableBeingEdited.instance.data.fields,function(t){return t.id===p[i]});g.push(o.name)}g.push(l.LoadModelHelpers.getQualifiedFieldName(a.loadModel,a.tableBeingEdited.instance.getName(),n.get("DataManager.CrossTable.AttributeFieldName")));g.push(l.LoadModelHelpers.getQualifiedFieldName(a.loadModel,a.tableBeingEdited.instance.getName(),n.get("DataManager.CrossTable.DataFieldName")));var m=0;for(var b=0;b<s.length&&m<c;b++)for(var h=0;h<v.length;h++){var y=[];for(i=0;i<p.length;i++)-1===v.indexOf(i)&&y.push({text:s[b][i]});o=t.find(a.tableBeingEdited.instance.data.fields,function(t){return t.id===p[v[h]]});y.push({text:o.name,isPivotColumn:true});y.push({text:s[b][v[h]],isPivotColumn:true});m+=y.length;m<c&&f.push(y)}a.pivotedHeader=g;a.pivotedData=f;d(function(){var t=document.getElementById("pivot_header_column_"+(a.pivotedHeader.length-1));t&&t.scrollIntoView()},0)},0)}function b(){p.getPivotEnabled()&&v()}o.registerInvalidationFn(b);a.$on("$destroy",function(){o.unregisterInvalidationFn(b)})}]}}])}.apply(e,n),void 0!==a&&(t.exports=a))},2451:function(t,e){t.exports='<div class="data-manager-pivot-preview">\r\n\r\n\t<div class="data-manager-pivot-preview-header">\r\n\r\n\t\t<div class="title-block" q-translation="DataManager.GridEditor.CrossTable.PreviewTitle"></div>\r\n\r\n\t\t<div class="button-block">\r\n\t\t\t<lui-button outline\r\n\t\t\t\t\t\tng-click="onClose()"\r\n\t\t\t\t\t\ttid="crosstable-table-preview-header-cancel"\r\n\t\t\t\t\t\tq-translation="Common.Cancel">\r\n\t\t\t</lui-button>\r\n\r\n\t\t\t<lui-button outline\r\n\t\t\t\t\t\tx-variant="info"\r\n\t\t\t\t\t\tng-show="!isPivoted()"\r\n\t\t\t\t\t\tng-click="onAccept()"\r\n\t\t\t\t\t\tng-disabled="!columnSelectionService.hasSelections()"\r\n\t\t\t\t\t\ttid="crosstable-table-preview-header-accept"\r\n\t\t\t\t\t\tq-translation="DataManager.GridEditor.CrossTable.Apply">\r\n\t\t\t</lui-button>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="data-manager-pivot-preview-container" ng-show="!isPivoted()">\r\n\r\n\t\t<div class="data-manager-pivot-preview-hint-container" ng-if="!columnSelectionService.hasSelections()">\r\n\t\t\t<div class="data-manager-pivot-preview-hint" q-translation="DataManager.GridEditor.CrossTable.Hint" tid="crosstable-table-preview-hint">\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="data-manager-pivot-preview-table" ng-if="columnSelectionService.hasSelections()">\r\n\t\t\t<table>\r\n\t\t\t\t<thead>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th style="" ng-repeat="header in pivotedHeader" id="pivot_header_column_{{$index}}"  title="{{header}}">{{header}}</th>\r\n\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\r\n\t\t\t\t<tbody>\r\n\t\t\t\t<tr ng-repeat="data in pivotedData">\r\n\t\t\t\t\t<td ng-repeat="value in data track by $index" ng-class="{\'pivot-column\': value.isPivotColumn}" title="{{value.text}}">\r\n\t\t\t\t\t\t{{value.text}}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t</div>\r\n\t</div>\r\n\r\n</div>\r\n'},2452:function(t,e,i){"use strict";var n,a;!(n=[i(91),i(54),i(992),i(993),i(151)],a=function(t,e,i,n,a){function o(o,l,s){var r=[];o.fields.forEach(function(t){if(-1===l.indexOf(t.id)){var e={};e.id=t.id;e.name=t.name;e.classifications=t.classifications;e.originalClassification=t.classifications;e.transformations=t.transformations;r.push(e)}});r.forEach(function(t){t.fieldRef=t.id;t.id=i.LoadModelIds.createQueryFieldId();t.transformations=[];t.expression="";t.type=a.DSMTypes.QueryField.name});var c=n.LoadModelHelpers.getQualifiedFieldName(s,o.name,t.get("DataManager.CrossTable.AttributeFieldName"));var d={id:i.LoadModelIds.createQueryFieldId(),name:c,type:a.DSMTypes.QueryField.name};r.push(d);var u=n.LoadModelHelpers.getQualifiedFieldName(s,o.name,t.get("DataManager.CrossTable.DataFieldName"));var p={id:i.LoadModelIds.createQueryFieldId(),name:u,type:a.DSMTypes.QueryField.name};r.push(p);var f={id:i.LoadModelIds.generateUUID(),type:a.DSMTypes.CrossTableQuery.name,name:o.name,sourceQueries:[e.clone(o)],fields:r,attributeFieldRef:d.id,dataFieldRef:p.id};return f}return{createCrossTableQuery:o}}.apply(e,n),void 0!==a&&(t.exports=a))},2453:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(90),i(2454),i(1008),i(91),i(495),i(2455),i(611),i(1278),i(513),i(1333),i(1279),i(255)],a=function(t,e,i,n,a,o,l){t.directive("dsGridHeader",["qvDataManagerEditorSelectionService","qvDataManagerSelectionService","qvDataManagerPivotService","qvDataManagerEditorDetailsViewService",function(s,r,c,d){return{scope:{headerIcon:"@",tableName:"=",tableSource:"=",tableDimension:"=",editable:"=",closeCallback:"=",showCalculatedPane:"=",hideCalclatedPane:"=",loadModel:"=",getDataSpaceInput:"=",sourceTable:"=",disableItems:"=",tableBeingEdited:"=",contentLoading:"=",filter:"="},controller:["$scope","$element",function(i,u){var p;i.isFirefox=e.isFirefox();i.pivotService=c;i.editorDetailsViewService=d;i.addFieldBtnActive=false;var f;i.showAddFieldPopover=function(){if(i.addFieldBtnActive&&f){f.close();return}var e=t.getService("luiPopover");var n=u.find(".add-field-btn")[0];i.addFieldBtnActive=true;f=e.show({template:l,alignTo:n,controller:["$scope",function(t){t.showAddCalculatedFieldPane=function(){i.addField();t.close()}}],closeOnResize:true,closeOnEscape:true});f.closed.then(function(){i.addFieldBtnActive=false})};i.shouldDisableAddFieldBtn=function(){var t=!i.editable||i.disableItems.addFields||c.getPivotEnabled()||i.contentLoading;return t};i.transformationString=function(){return i.tableBeingEdited.instance&&i.tableBeingEdited.instance.isCrossTable()?a.get("DataManager.GridEditor.CrossTable.Discard"):a.get("DataManager.GridEditor.Transformations")};i.updateTransformations=function(t){t.stopPropagation();if(i.tableBeingEdited.instance&&i.tableBeingEdited.instance.isCrossTable()){var e="DataManager.GridEditor.CrossTable.DiscardConfirmationContent";i.loadModel.hasAssociations(i.tableBeingEdited.instance.getId())&&(e="DataManager.GridEditor.CrossTable.DiscardConfirmationWithAssociationsContent");o.confirmAction({header:"DataManager.GridEditor.CrossTable.DiscardConfirmationTitle",content:e,declineButtonTitle:"Common.Cancel",confirmButtonTitle:"Common.OK"}).resultPromise.then(function(){i.tableBeingEdited.instance=c.discardPivot(i.loadModel,i.tableBeingEdited.instance.getId());r.setSelectedTables([i.tableBeingEdited.instance])}).finally(function(){i.editorDetailsViewService.enablePreviewPanel()})}else{c.togglePivotEnabled();i.editorDetailsViewService.disablePreviewPanel();c.getPivotEnabled()||s.clearSelections()}};i.updateFields="$Update fields";i.addField=function(){i.editorDetailsViewService.disablePreviewPanel();i.showCalculatedPane()};i.updateFields=function(e){e.stopPropagation();var n=t.getService("$timeout");var a=t.getService("addDataStateService");return n(a.showEditAddData(i.sourceTable))};i.navigateToTableEditor=function(){console.log("navigate to table editor")};i.navigateToScriptEditor=function(){console.log("navigate to script editor")};p=function e(){return function(){var e=[{name:"$Table editor",text:"$Table editor",selected:i.navigateToTableEditor},{name:"$Script Editor",text:"$Script Editor",selected:i.navigateToScriptEditor}];return t.promise(e)}};i.switchEditorButton={tooltipInactive:"$Switch Editor",isToggleButton:true,buttonClass:"lui-button",buttonText:"$Switch Editor",menuOptions:{position:"bottom",width:"170",content:{menuClasses:"toolbar-menu lui-list",createMenuItems:p()}}};i.modifiedCallback=function(t,e){if(i.loadModel&&e){var n=i.tableBeingEdited.instance.getId();var a=i.loadModel.getTargetTableModelById(n);a.rename(e);i.loadModel.setProperties()}};i.validate=function(t){var e=i.sourceTable?i.sourceTable.data.tableName:null;var a=n.validateTableName(i.loadModel,e,t);i.errors=a;return a};i.tableNameInputId="table-name";i.state={errors:false};i.focusCallback=function(t){i.tableNameActive=null!==t};i.$on("$destroy",function(){})}],restrict:"E",template:i}}])}.apply(e,n),void 0!==a&&(t.exports=a))},2454:function(t,e){t.exports='<div class="header">\n\t<div class="left-aligned-buttons">\n\t\t<i class="lui-icon lui-icon--table table-header-icon {{headerIcon}}"/>\n\n\t\t<div class="table-data-fields">\n\t\t\t<div class="table-name-border-div {{( fieldState[tableNameInputId] ) ? \'table-name-border-div-invalid\': ( tableNameActive ) ? \'table-name-border-div-active\': ( editable && !concatenated ) ? \'table-name-border-div-inactive\':\'table-name-border-disabled\'}}">\n\t\t\t\t<div class="validationAlignAnchor"></div>\n\n\t\t\t\t<ds-grid-input input-class="table-name"\n\t\t\t\t\t\t\t   input-id="table-name"\n\t\t\t\t\t\t\t   model="tableName"\n\t\t\t\t\t\t\t   auto-expand="::true"\n\t\t\t\t\t\t\t   size="5"\n\t\t\t\t\t\t\t   maxlength="300"\n\t\t\t\t\t\t\t   minlength="100"\n\t\t\t\t\t\t\t   validate="validate"\n\t\t\t\t\t\t\t   error-state="state.errors"\n\t\t\t\t\t\t\t   field-state="fieldState"\n\t\t\t\t\t\t\t   clear-field-state-callback="clearFieldStateCallback"\n\t\t\t\t\t\t\t   editable="!disableItems.tableRename"\n\t\t\t\t\t\t\t   focus-callback="focusCallback"\n\t\t\t\t\t\t\t   modified-callback="modifiedCallback"\n\t\t\t\t\t\t\t   title="{{tableName}}"/>\n\t\t\t</div>\n\t\t\t<div class="table-source-div" title="{{tableSource}}">{{tableSource}}</div>\n\t\t</div>\n\n\t\t<div class="table-source-dimension">\n\t\t\t<div>\n\t\t\t\t<div>{{tableDimension.columnsLabel}}</div>\n\t\t\t\t<div>{{tableDimension.rowsLabel}}</div>\n\t\t\t</div>\n\t\t\t<span ng-if="filter && filter.filterClause" title="{{filter.filterClause}}" class="lui-icon lui-icon--filter"></span>\n\t\t</div>\n\t</div>\n\n\t<div class="right-aligned-buttons">\n\n\n\t\t<lui-button tid="dm-transformations-button"\n\t\t\t\toutline id="stageheader-action-transformations"\n\t\t\t\tng-click="updateTransformations($event)"\n\t\t\t\tng-disabled="!editable || disableItems.transformations || contentLoading"\n\t\t\t\tng-bind="transformationString()"\n\t\t\t\tng-class="{\'lui-active\': pivotService.getPivotEnabled()}">\n\t\t</lui-button>\n\n\t\t\x3c!-- Note reversed order due to use of float: right --\x3e\n\t\t<button class="lui-button add-field-btn"\n\t\t\t\tng-class="{ \'lui-active\': addFieldBtnActive, \'ff-no-overflow\': isFirefox }"\n\t\t\t\tng-click="showAddFieldPopover()"\n\t\t\t\tng-disabled="shouldDisableAddFieldBtn()"\n\t\t\t\ttid="ds-grid-add-field-popover-button"\n\t\t\t\tq-title-translation="DataManager.GridEditor.AddField"> \n\t\t\t<span class="lui-button__icon lui-icon lui-icon--"></span> \n\t\t\t<span class="lui-button__text" q-translation="DataManager.GridEditor.AddField"></span>\n\t\t\t<span class="lui-caret lui-button__caret"></span> \n\t\t</button>\n\n\t\t\x3c!-- Hack to have them not labled as unused\n\t\tDataManager.GridEditor.RemovedField --\x3e\n\n\n\t\t<lui-button outline id="stageheader-action-update-fields"\n\t\t\t\t\tng-click="updateFields($event)"\n\t\t\t\t\tng-disabled="!editable || disableItems.updateFromSource || pivotService.getPivotEnabled() || contentLoading || tableSource === \'script\'"\n\t\t\t\t\tq-translation="DataManager.GridEditor.UpdateFields">\n\t\t</lui-button>\n\n\t\t<button tid="dm-table-edit-exit-button"\n\t\t\t\tclass="lui-fade-button" \n\t\t\t\tid="stageheader-action-close"\n\t\t\t\tng-click="closeCallback()"\n\t\t\t\tng-disabled="!editable"\n\t\t\t\tq-title-translation="DataManager.ButtonGroup.Associations.Done">\n\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--close"></span>\n\t\t</button>\n\n\t</div>\n\n\n\n</div>\n<div class="border-bottom"></div>\n\n'},2455:function(t,e){t.exports='<lui-popover class="add-field-popover">\n\t<lui-popover-body class="lui-nopad">\n\t\t<ul class="lui-list toolbar-menu">\n\t\t\t<li class="lui-list__item add-field-popover__list-item"\n\t\t\t\tng-class="{ \'lui-disabled\': concatenated }"\n\t\t\t\tng-click="showAddCalculatedFieldPane()"\n\t\t\t\tq-translation="DataManager.GridEditor.CalculatedField"\n\t\t\t\tq-title-translation="DataManager.GridEditor.CalculatedField"\n\t\t\t\ttid="ds-grid-add-calc-field-button">\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>\n'},2456:function(t,e,i){"use strict";var n,a;!(n=[i(10),i(48),i(54),i(105),i(91),i(89),i(2457),i(2458),i(163),i(439),i(455),i(2459),i(1683),i(1798),i(1008),i(103),i(2461),i(2469),i(235),i(1279)],a=function(t,e,i,n,a,o,l,s,r,c,d,u,p,f,v,g){var m=e.getService("$cacheFactory")("calculated-field-cache");e.directive("dsAddCalculatedField",["qvDataManagerEditorDetailsViewService","qvDataManagerDataService",function(e,b){return{restrict:"E",template:l,replace:true,scope:{columnLayout:"=",loadModel:"=",tableId:"=",calculatedField:"=?",hideCalculatedPane:"=",unmarkColumn:"=",columnHighlightService:"=",loadFinishedCallback:"="},controller:["$scope","$attrs","$document","$rootScope","$timeout",function(l,h,y,T,M){var w=true;l.expanded=false;l.qvPreviewObjectModel=null;l.previewOptions={selections:false,showSearch:true,zoomEnabled:false,layoutMode:1};l.editorDetailsViewService=e;l.previewObject={};var S=void 0!==h.componentTest;l.showValidationMessages={display:false};function D(){return l.loadModel.getTargetTableModelById(l.tableId)}var x=new c.LoadModelUtils(D());var C=i.filter(D().getFields(),function(t){var e="QueryExpressionField"===t.type||"QueryTransformField"===t.type;var i=true;e&&l.calculatedField&&(x.canBeBasedOn(l.calculatedField.id,t.id)||(i=false));return i});var E=A(C);function A(t){var e={};i.each(t,function(t){e[t.name]=f.escapeFieldName(t.name)});return e}var k={CalculatedFieldBNF:S?null:s.get(E)};return o.all(k).then(function(e){T.isCalculatedFieldPaneOpen=true;l.model=null;var s=t.element('<div class="calculated-field-pane-hider"></div>');var c=t.element('<div class="calculated-field-pane-hider"></div>');var h=y.find(".qui-toolbar").eq(0);h.append(s);var x=y.find("ds-grid-header").eq(0);x.append(c);l.expandPane=function(){l.expanded=true};l.collapsePane=function(){l.expanded=false};l.$on("$destroy",function(){l.close()});l.compareWithField=function(t){return function(e){return e!==t}};l.close=function(){l.editorDetailsViewService.enablePreviewPanel();T.isCalculatedFieldPaneOpen=false;if(l.dsGridColumnLayout){l.dsGridColumnLayout.cleanColumnMarkedUsed();l.dsGridColumnLayout.cleanColumnMarkedPointed()}s.remove();c.remove();l.hideCalculatedPane()};var E;var A=S?null:e.CalculatedFieldBNF.model;var k=f.getFunctionSignatures(A,p.allFunctions);E=new f(k,i.pluck(C,"name"));l.validationMessages=E;l.dsGridColumnLayout=null;l.columnHighlightService&&(l.dsGridColumnLayout=new u(l.columnHighlightService.highlightColumnByName.bind(l.columnHighlightService),l.unmarkColumn,l.columnHighlightService.resetHighlightedColumns.bind(l.columnHighlightService),E,C));var I={name:"qlikviewscript",service:e.CalculatedFieldBNF};var F={service:e.CalculatedFieldBNF,view:d};var O={completeSingle:false,service:e.CalculatedFieldBNF};l.isNew=!l.calculatedField;l.headerTitle=l.isNew?a.get("DataManager.GridEditor.AddCalculatedField"):a.get("DataManager.GridEditor.Header.UpdateCalculatedField");l.calculatedField=l.calculatedField||{expression:"",name:""};var P={};var q={};i.each(C,function(t){P[t.id]=f.escapeFieldName(t.name);q[t.name]=t.id});var L={alias:l.calculatedField.name,expr:{content:f.fromScript(l.calculatedField.expression,P)}};l.calculatedFieldForPanel=L;var V=[];var N=l.calculatedField.name;function B(){var t=true;var e=[].concat(l.validationMessages.errors);l.validationMessages.errors.length=0;var i=e.filter(function(t){return!t.customType});i.forEach(function(t){l.validationMessages.errors.push(t)});if(l.createButtonClicked&&L.alias!==N){var n=L.alias.trim();V=v.validateFieldName(l.loadModel,D(),n)}if(V.length>0||!L.expr.content||""===L.expr.content.trim()||!L.alias||l.dsGridColumnLayout&&l.dsGridColumnLayout.expressionService.errors.length){t=false;if(0===l.validationMessages.errors.length)if(L.expr.content&&""!==L.expr.content.trim())if(L.alias){if(V.length>0){V[0].customType=true;V[0].aliasError=true;l.validationMessages.errors.push(V[0])}}else l.validationMessages.errors.push({customType:true,aliasError:true,msg:a.get("Add.Calculated.Field.Blank.Name")});else l.validationMessages.errors.push({customType:true,msg:a.get("Add.Calculated.Field.Blank.Expression")})}return t}function $(){V.length=0;if(l.createButtonClicked&&L.alias!==N){var t=L.alias.trim();V=v.validateFieldName(l.loadModel,D(),t);return V.length>0}return false}function _(t){var e={qInfo:{qType:"listbox"},qMetaDef:{},qListObjectDef:{qDef:{qGrouping:"N",qFieldDefs:[t.name],qFieldLabels:[t.label],qSortCriterias:[{qSortByState:1,qSortByNumeric:1,qSortByAscii:1,qSortByLoadOrder:1,qExpression:{}}],qNumberPresentations:[],qActiveField:0,autoSort:true},qFrequencyMode:"N",qShowAlternatives:true,qInitialDataFetch:[],qExpressions:[]},title:"",visualization:"listbox"};return e}function R(t,e){var i=E.toScript(q,true);var n={};for(var a in e){var o=e[a];var l=q[a];if(l){var s="";var r=o.expression;s=r&&"="===r.substring(0,1)?r.replace("=","=(")+")":r||f.escapeFieldName(o.internalName);n[l]=s}}var c="";t&&(c=f.fromScript(i.expression,n));return c}l.showNoPreviewMessage=function(){return""===l.calculatedFieldForPanel.expr.content.trim()||l.validationMessages.errors.some(function(t){return!t.aliasError})};l.showHelp=function(){var t=r.path+"DataManager_CalculatedFields";window.open(t,"_blank")};function j(t){var e="";if(""===l.calculatedFieldForPanel.expr.content.trim()||l.validationMessages.errors.length>0)e="=['']";else{e=R(l.calculatedFieldForPanel.expr.content,t);e=e?"="+e:"=''"}var i={name:e,label:"PreviewExpression"};return b.sendGenericCommand({handle:-1,method:"createScratchAppSessionObject",params:[_(i)]}).then(function(t){l.qvPreviewObjectModel=t},function(t){console.log(t)})}function z(){if(S)return o.resolve(true);var t=D();return t?b.getTableFields(t.data.name).then(function(t){return j(t.fieldNameMapping)}):j(null)}l.model=null;S||(l.model={cache:m,expr:l.calculatedFieldForPanel.expr,functionTipOptions:F,qlikviewReloadScriptMode:I,autocompleteOptions:O,dsGridColumnLayout:l.dsGridColumnLayout,validationMessages:l.validationMessages.errors,showValidationMessages:l.showValidationMessages});l.$watch("calculatedFieldForPanel.expr.content",function(){l.showValidationMessages.display=false});l.$watch("calculatedFieldForPanel.alias",function(){l.showValidationMessages.display=false});l.createButtonClicked=false;l.changeCalculatedFieldName=function(){l.invalidCalcFieldName=$()};l.$watch("calculatedFieldForPanel.expr.content",function(){z().then(function(){if(w){w=false;M(l.loadFinishedCallback,0)}})});l.createExpression=function(){l.createButtonClicked=true;l.showValidationMessages.display=true;if(B()){var t=E.toScript(q,true);l.isNew?D().createCalculatedField(L.alias,t.expression):D().updateCalculatedField(l.calculatedField.id,L.alias,t.expression);l.$emit(n.Events.EditorDetailsPane.FieldCreated,L.alias);l.loadModel.setProperties();l.close();g.trackEvent(g.customEvents.ADD_CALCULATED_FIELD)}}})}]}}])}.apply(e,n),void 0!==a&&(t.exports=a))},2457:function(t,e){t.exports='<div class="ds-add-calculated-field" ng-class="{\'expanded\': expanded}">\n<div class="qv-hldm-property-panel">\n\t<div class="add-calculated-field-header" >\n\t\t<div class="header-wrapper">\n\n\t\t\t<div class="title">{{headerTitle}}</div>\n\t\t\t<div class="add-calculated-field-buttons">\n\t\t\t\t<button tid="calculated-field-button-help"\n\t\t\t\t\t\tclass="lui-fade-button lui-fade-button--inverse help"\n\t\t\t\t\t\tng-click="showHelp()"\n\t\t\t\t\t\tq-title-translation="GlobalMenu.Help"\n\t\t\t\t\t\ttid="calculated-field-panel-help">\n\t\t\t\t\t<span class="lui-fade-button__icon lui-icon  lui-icon--help"></span>\n\t\t\t\t</button>\n\n\t\t\t\t<button tid="calculated-field-button-expand"\n\t\t\t\t\t\tng-if="!expanded"\n\t\t\t\t\t\tclass="lui-fade-button lui-fade-button--inverse"\n\t\t\t\t\t\tng-click="expandPane()"\n\t\t\t\t\t\tq-title-translation="AppOverview.Expand">\n\t\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--expand"></span>\n\t\t\t\t</button>\t\t\t\n\t\t\t\t<button tid="calculated-field-button-collapse"\n\t\t\t\t\t\tng-if="expanded"\n\t\t\t\t\t\tclass="lui-fade-button lui-fade-button--inverse"\n\t\t\t\t\t\tng-click="collapsePane()"\n\t\t\t\t\t\tq-title-translation="AppOverview.Collapse">\n\t\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--collapse"></span>\n\t\t\t\t</button>\t\t\t\n\t\t\t\t<button tid="calculated-field-button-close"\n\t\t\t\t\t\tclass="lui-fade-button lui-fade-button--inverse"\n\t\t\t\t\t\tng-click="close()"\n\t\t\t\t\t\tq-title-translation="Common.Close"\n\t\t\t\t\t\ttid="calculated-field-panel-close">\n\t\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--close"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="add-calculated-field-content">\n \t\t<div class="property-content">\n \t\t\t<div class="panel-section"  style="min-height: 60px">\n\t\t\t\t<div class="label" q-translation="Common.Name"></div> \t\t\t\n\t \t\t\t<input tid="calculated-field-name-input" type="text" maxlength="255" class="lui-input" qva-focus="true" ng-class="{\'lui-invalid\': invalidCalcFieldName}" ng-model="calculatedFieldForPanel.alias" ng-model-options="{ updateOn: \'blur\', allowInvalid: true }" ng-change="changeCalculatedFieldName()">\n\t \t\t</div>\n\t \t\t<div class="panel-section" style="min-height: 150px">\n\t \t\t\t<ds-expression-editor ng-if="model" model="model"></ds-expression-editor> \n\t \t\t</div>\n\t \t\t<div class="panel-section previewSection" style="min-height: 180px">\n\t\t\t\t<div class="label" q-translation="DataManager.GridEditor.PreviewCalculatedField"></div>\n\t\t\t\t<div class="previewExpression-container">\n\t\t\t\t\t<div tid="calculated-field-no-preview-content" class="no-preview-content" ng-if="qvPreviewObjectModel" ng-show="showNoPreviewMessage()"><div class="no-preview-text" q-translation="DataManager.GridEditor.NoPreview1"></div><div class="no-preview-text" q-translation="DataManager.GridEditor.NoPreview2"></div></div>\n\t\t\t\t\t<qv-object tid="calculated-field-preview" model="qvPreviewObjectModel" ng-if="qvPreviewObjectModel" options="previewOptions" object="previewObject" class="custom-preview"></qv-object>\n\t\t\t\t</div>\n\t\t\t</div>\n\n \t\t</div>\n\n\t\t<div class="property-footer">\n\t\t\t<div ng-if="showValidationMessages.display" class="validation-container panel-section"><ds-validation-bar validation-messages="validationMessages.errors"></ds-validation-bar></div>\n\t\t\t<div class="panel-section">\n\t\t\t\t<lui-button tid="calculated-field-button-create" ng-class="{\'expanded\': expanded}" ng-click="createExpression()" q-translation="{{isNew ? \'DataManager.GridEditor.CreateCalculatedField\' : \'DataManager.GridEditor.Button.UpdateCalculatedField\'}}"></lui-button>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n</div>\n</div>\n'},2458:function(t,e,i){"use strict";var n,a;!(n=[i(54),i(89),i(286),i(1683)],a=function(t,e,i,n){var a=t.object(n.allFunctions.map(function(t){return[t,true]}));function o(e,i,n,a){var o=t.isArray(a)?i:n;return{text:o,type:e,value:"boolean"!==typeof i?i:void 0}}function l(e){var i=e.bnf;var n=e.fields;var l=[];var s=t.map(l,o.bind(null,"variable"));var r=t.map(n,o.bind(null,"field"));var c=t.map(i.getAllFunctions().filter(function(t){return!!a[t.toLowerCase()]}),o.bind(null,"function"));var d=s.concat(r,c);function u(t){return!!a[t.toLowerCase()]&&i.isFunction(t)}function p(t){return i.getFunctionTip(t)}function f(){return false}function v(t){return!!n[t]}function g(){return false}function m(){return d}var b={getAutocompleteList:m,getFunctionTip:p,isFunction:u,isField:v,isKeyword:f,isVariable:g,model:i};return b}function s(t){return e.all({bnf:i.getExpressionBnfModel(),fields:t}).then(l)}return{get:s}}.apply(e,n),void 0!==a&&(t.exports=a))},2459:function(t,e,i){"use strict";var n,a;!(n=[],a=function(){var t=function t(e,i,n,a,o){this.expressionService=a;this.fields=o;function l(t){e&&e(t)}function s(){n&&n()}return{markUsedColumn:l,cleanColumnMarkedUsed:s,cleanColumnMarkedPointed:function t(){},markPointedColumn:function t(){},expressionService:a,fields:o}};return t}.apply(e,n),void 0!==a&&(t.exports=a))},2460:function(t,e,i){"use strict";var n,a;!(n=[i(1799),i(91)],a=function(t,e){var i=["NUMBER","BOOLEAN","FIELD","STRING","IDENTIFIER"];var n;var a;var o={Error:function t(e,i){this.msg=e;this.offset=i},parse:function i(l){var s,r;n=0;try{a=t.tokenize(l).filter(function(t){return"WS"!==t.symbol})}catch(t){r=e.get("DataManager.GridEditor.ExpressionParser.UnrecognizedSymbol",t.value);throw new o.Error(r,t.offset)}if(a.length){s=c();if(!s)throw new o.Error(e.get("DataManager.GridEditor.ExpressionParser.ErrorParsingExpression"));if(n<a.length){var d=a[n];r=e.get("DataManager.GridEditor.ExpressionParser.UnexpectedToken",d.value);throw new o.Error(r,d.offset)}}else s={};return s}};function l(t){t=t||1;n+=t}function s(t){t=t||0;return a[n+t]}function r(t){var e=a[n];if(Array.isArray(t)){if(e&&-1!==t.indexOf(e.symbol)){n++;return e}}else if(e&&e.symbol===t){n++;return e}}function c(){var t;var e=r(["ADD","SUB"]);if(e)return d(e,c);var i=u(e);e=r(["ADD","SUB"]);if(e){t=d(e,c);t.left=i}else t=i;return t}function d(t,i){var n;try{n=i(t)}catch(i){var a=e.get("DataManager.GridEditor.ExpressionParser.MissingRightTerm");throw new o.Error(a,t.offset+t.value.length-1)}return{type:t.symbol,token:t,right:n}}function u(t){var i;var n=p(t);if(!n){var a=e.get("DataManager.GridEditor.ExpressionParser.MissingLeftTerm");throw new o.Error(a,t&&t.offset||0)}var l=r(["CONCAT","LIKE","NOT_EQUAL","EQUAL","LOWER_EQUAL","LOWER","GREATER_EQUAL","GREATER"]);if(l){i=d(l,u);return{type:l.symbol,token:l,left:n,right:i}}return n}function p(t){var i;var n=f();if(!n){var a=e.get("DataManager.GridEditor.ExpressionParser.MissingLeftTerm");throw new o.Error(a,t&&t.offset||0)}var l=r(["MULT","DIV"]);if(l){i=d(l,p);return{type:l.symbol,token:l,left:n,right:i}}return n}function f(){var t=m();t=t||v();t=t||g();return t}function v(){if(r("LP")){var t=c();if(r("RP"))return t;var i=s()||s(-1);var n=i?i.offset+i.value.length:e.get("DataManager.GridEditor.ExpressionParser.EndOfScript");var a=e.get("DataManager.GridEditor.ExpressionParser.MissingRightParenthesis");throw new o.Error(a,n)}}function g(){var t=r(i);if(t)return{type:"IDENTIFIER"===t.symbol?"FIELD":t.symbol,token:t}}function m(){if(n+1>=a.length)return;var t=s();var i=s(1);if(t&&i&&"IDENTIFIER"===t.symbol&&"LP"===i.symbol){l(2);var c=b();if(r("RP"))return{type:"FUNCTION",args:c,token:t};var d=e.get("DataManager.GridEditor.ExpressionParser.MissingRightParenthesis");throw new o.Error(d,a[a.length-1].offset)}}function b(){var t=[];var e=s();if(e&&"RP"!==e.symbol)do{t.push(c())}while(r("COMMA"));return t}return o}.apply(e,n),void 0!==a&&(t.exports=a))},2461:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2462),i(91),i(138),i(90),i(1683),i(2463),i(425),i(2465),i(1793),i(2466),i(2467)],a=function(t,e,i,n,a,o,l){t.directive("dsExpressionEditor",function(){return{scope:{model:"="},restrict:"E",replace:true,template:e,controller:["$scope","$element","luiPopover",function(t,e,s){t.expressionHelper={cursorPos:{ch:0,line:0},expression:"",updateExpression:function t(){},focusExpression:function t(){},focusExpressionAtEndOfLine:function t(){}};t.fields=null;t.model&&t.model.dsGridColumnLayout&&(t.fields=t.model.dsGridColumnLayout.fields);t.$watch("model.dsGridColumnLayout",function(){if(t.model&&t.model.dsGridColumnLayout){t.fields=t.model.dsGridColumnLayout.fields;t.setFieldsData()}});t.categories=o.categorizedArray;t.operations=[{name:i.get("DataManager.ExpressionHelpers.Operator.Add"),character:"+"},{name:i.get("DataManager.ExpressionHelpers.Operator.Subtract"),character:"-"},{name:i.get("DataManager.ExpressionHelpers.Operator.Multiply"),character:"*"},{name:i.get("DataManager.ExpressionHelpers.Operator.Divide"),character:"/"},{name:i.get("DataManager.ExpressionHelpers.Operator.Concatenate"),character:"&"},{name:i.get("DataManager.ExpressionHelpers.Operator.Like"),character:"like"}];t.lastTarget=null;t.insertIntoScript=function(e,i,n){var o=e;n&&(o=a.escapeField(e));t.expressionHelper.updateExpression(o,i)};t.setExpressionFocus=function(){t.expressionHelper.focusExpression()};t.operationsBtnModel={icon:"operators",title:"DataManager.ExpressionEditor.Operations"};t.fieldsBtnModel={icon:"field",title:"DataManager.ExpressionEditor.Fields"};var r=function t(e){return function(t){return{label:t.name,select:function i(){e(t)},disabled:function t(){return false}}}};t.setOperationsData=function(){var e=function e(i){t.insertIntoScript(i.character,false,false)};t.operationsData=t.operations.map(r(e))};t.setFieldsData=function(){var e=t.fields;var i=function e(i){t.insertIntoScript(i.name,false,true)};if(e){var a="pseudo"===n.locale.get()?"en-US":n.locale.get();var o=function t(e,i){return e.name.localeCompare(i.name,a)};e=e.sort(o).map(r(i))}t.fieldsData=e};t.popoverShowing=false;var c;t.showFunctionsPopover=function(){if(t.popoverShowing&&c){c.close();return}var i=e.find(".ds-expression-editor-popover-button")[0];t.popoverShowing=true;c=s.show({template:l.template,alignTo:i,closeOnResize:true,controller:l.controller,input:{categories:t.categories,onFunctionSelected:function e(i){t.insertIntoScript(i+"()",true,false)}}});c.closed.then(function(){t.popoverShowing=false})};t.setOperationsData();t.setFieldsData();t.$on("$destroy",function(){})}]}})}.apply(e,n),void 0!==a&&(t.exports=a))},2462:function(t,e){t.exports='<div class="ds-expression-editor" >\n\t<div class="label" q-translation="DataManager.GridEditor.CalculatedField.Expression"></div>\n\t<qv-codearea ng-click="setExpressionFocus()"\n\t\t\t\t tid="ds-expression-editor-codearea"\n\t\t\t\t data-show-line-numbers="false"\n\t\t\t\t data-show-breakpoint-gutter="false"\n\t\t\t\t data-disabled="false"\n\t\t\t\t data-mode="model.qlikviewReloadScriptMode"\n\t\t\t\t data-use-line-wrapping="true"\n\t\t\t\t qv-codearea-code-container=\'model.expr\'\n\t\t\t\t qv-codearea-function-tip="model.functionTipOptions"\n\t\t\t\t qv-codearea-autocomplete="model.autocompleteOptions"\n\t\t\t\t qv-codearea-pointed-fields="model.dsGridColumnLayout"\n\t\t\t\t qv-codearea-expression-helper="expressionHelper"\n\t\t\t\t qv-codearea-exposed-touch-api=\'model.codeareaTouchApi\'\n\t\t\t\t qv-codearea-composition-event>\n\t</qv-codearea>\n\n\t<div class="pp-expression-helpers">\n\t\t<button class="lui-fade-button ds-expression-editor-popover-button"\n\t\t\tng-click="showFunctionsPopover()"\n\t\t\tng-class="{ \'lui-active\': popoverShowing }"\n\t\t\tng-disabled="isDisabled()"\n\t\t\ttid="ds-expression-editor-button-functions codearea-property-functions-popover"\n\t\t\tq-title-translation="DataManager.ExpressionEditor.Functions">\n\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--expression"></span>\n\t\t\t<span ng-if="!quiModel.hideCaret" class="lui-fade-button__caret lui-caret"></span>\n\t\t</button>\n\t\t\n\t\t<ds-list-popover-button tid="ds-expression-editor-button-fields" model="fieldsBtnModel" list-items="fieldsData" close-on-item-select="::true"></ds-list-popover-button>\n\t\t<ds-list-popover-button tid="ds-expression-editor-button-operations" model="operationsBtnModel" list-items="operationsData" close-on-item-select="::true"></ds-list-popover-button>\n\t</div> \t\t\n</div>'},2463:function(t,e,i){"use strict";var n,a;!(n=[i(54),i(91),i(2464)],a=function(t,e,i){return{template:i,scope:{categories:"=",onFunctionSelected:"="},controller:["$scope","$timeout",function(i,n){i.selectedOption=e.get(i.categories[0].category);i.functions=i.categories[0].functions;i.onCategoryChanged=function(n){var a=t.filter(i.categories,function(t){return e.get(t.category)===n});i.functions=a[0].functions};i.onFunctionClicked=function(t,e){e&&e.preventDefault&&e.preventDefault();i.close();n(function(){i.onFunctionSelected(t)},0)}}]}}.apply(e,n),void 0!==a&&(t.exports=a))},2464:function(t,e){t.exports='<lui-popover class="ds-add-calc-field-functions-popover">\n\t<lui-popover-body class="ds-add-calc-field-functions-popover__body">\n\t\t<div class="ds-add-calc-field-functions-popover__label" q-translation="DataManager.ExpressionEditor.Popover.FunctionsType"></div>\n\t\t\n\t\t<select tid="codearea-property-panel-functions-selector" title="{{selectedOption}}" class="lui-select" ng-model="selectedOption" ng-init="selectedOption=selectedOption" ng-change="onCategoryChanged( selectedOption )">\n\t\t\t<option ng-repeat="category in categories" title="{{category.category | translate}}">{{category.category | translate}}</option>\n\t\t</select>\n\t\t\n\t\t<ul class="ds-add-calc-field-functions-popover__list lui-list">\n\t\t\t<li class="lui-list__item" ng-repeat="function in functions | orderBy: \'valueOf()\'" ng-click="onFunctionClicked(function, $event)">\n\t\t\t\t<span class="lui-list__text" title="{{function}}">{{function}}</span>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>\n'},2465:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(54),i(1798)],a=function(t,e,i){t.directive("qvCodeareaPointedFields",[function(){return{restrict:"A",require:"qvCodearea",link:function t(n,a,o,l){var s,r,c=[],d,u,p;n.$watch(o.qvCodeareaPointedFields,function(t){s=t;p=e.pluck(t.fields,"name");f()});l.codemirror.on("cursorActivity",f);function f(){v();g()}function v(){if(!s)return;var t,e,i,n,a,o;d&&d.clear();var u=s.expressionService.compile(l.codemirror.doc.getValue());var f=s.expressionService.getUsedFields();if(f.length>0){s.cleanColumnMarkedUsed();b();f.forEach(function(t){if(null!=t.token.offset&&t.token.value&&p.indexOf(m(t.token.value))>-1){s.markUsedColumn(m(t.token.value));i=l.codemirror.doc.getValue();n=i.substring(0,t.token.offset);e=(n.match(/\n/g)||[]).length;a=n.lastIndexOf("\n");a++;o=t.token.offset-a;r=l.codemirror.doc.markText({line:0+e,ch:o},{line:0+e,ch:o+t.token.value.length},{className:"codemirror-fieldUsed"});c.push(r)}})}else{b();s.cleanColumnMarkedUsed();s.cleanColumnMarkedPointed()}if(u&&u.length&&u[0].msg&&null!=u[0].offset){t=l.codemirror.doc.getCursor().line;d=l.codemirror.doc.markText({line:t,ch:u[0].offset},{line:t,ch:u[0].offset+1},{className:"codemirror-error"})}}function g(){if(!s)return;var t,e,i,n,a;var o=l.codemirror.doc.getCursor();s.expressionService.compile(l.codemirror.doc.getValue());s.cleanColumnMarkedPointed();u&&u.clear();var r=s.expressionService.getFieldTokenAtCursor(o.ch,o.line);if(r&&null!=r.offset&&r.value&&p.indexOf(m(r.value))>-1){s.markPointedColumn(m(r.value));u&&u.clear();e=l.codemirror.doc.getValue();i=e.substring(0,r.offset);t=(i.match(/\n/g)||[]).length;n=i.lastIndexOf("\n");n++;a=r.offset-n;u=l.codemirror.doc.markText({line:0+t,ch:a},{line:0+t,ch:a+r.value.length},{className:"codemirror-fieldPointed"})}}function m(t){"["!==t[0]&&'"'!==t[0]||(t=t.slice(1,-1));return i.unescapeFieldName(t)}function b(){c.forEach(function(t){t.clear()});c=[]}n.$on("$destroy",function(){l.codemirror.off("cursorActivity",f)})}}}])}.apply(e,n),void 0!==a&&(t.exports=a))},2466:function(t,e,i){"use strict";var n,a;!(n=[i(48)],a=function(t){t.directive("qvCodeareaExpressionHelper",[function(){return{restrict:"A",require:"qvCodearea",link:function t(e,i,n,a){var o;e.$watch(n.qvCodeareaExpressionHelper,function(t){o=t;o.updateExpression=function(t,e){o.expression=a.codemirror.doc.replaceSelection(t,"end");o.focusExpression();if(e){var i=a.codemirror.doc.getCursor();i.ch=0!==i.ch?i.ch-1:0;a.codemirror.doc.setCursor(i)}};o.focusExpression=function(){a.codemirror.focus()};o.focusExpressionAtEndOfLine=function(){a.codemirror.setCursor(a.codemirror.lineCount(),0);a.codemirror.focus()}});a.codemirror.on("cursorActivity",l);function l(){if(o){o.expression=a.codemirror.doc.getValue();o.cursorPos=a.codemirror.doc.getCursor()}}e.$on("$destroy",function(){a.codemirror.off("cursorActivity",l)})}}}])}.apply(e,n),void 0!==a&&(t.exports=a))},2467:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2468),i(1193)],a=function(t,e){var i={template:e,bindings:{model:"<?",listItems:"<?",closeOnItemSelect:"<?"},controller:["dsListPopoverService","$element",function(t,e){var i=this;var n=null;i.listPopover=null;function a(){if(i.listPopover){i.listPopover.close();i.listPopover=null}}this.$onInit=function(){n=e.find(".ds-list-popover-btn")[0]};this.$onChanges=function(t){t.listItems.currentValue!==t.listItems.previousValue&&i.closeOnItemSelect&&i.listItems.forEach(function(t){var e=t.select;t.select=function(){e();a()}})};this.showListPopover=function(){a();i.active=true;i.listPopover=t.show(n,i.listItems);i.listPopover.closed.then(function(){i.active=false})}}]};t.nativeComponent("dsListPopoverButton",i)}.apply(e,n),void 0!==a&&(t.exports=a))},2468:function(t,e){t.exports='<button class="lui-fade-button ds-list-popover-btn" q-title-translation="{{$ctrl.model.title}}" ng-class="{\'lui-active\': $ctrl.active }" ng-click="$ctrl.showListPopover()">\n\t<span class="lui-fade-button_icon lui-icon lui-icon--{{$ctrl.model.icon}}"></span>\n\t<span class="lui-fade-button__caret lui-caret"></span>\n</button>'},2469:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2470)],a=function(t,e){t.directive("dsValidationBar",function(){return{scope:{validationMessages:"="},controller:["$scope",function(t){t.errorIcon="validation-icon lui-icon lui-icon--warning-triangle";t.warningIcon="validation-icon lui-icon lui-icon--warning";t.$on("$destroy",function(){})}],restrict:"E",template:e}})}.apply(e,n),void 0!==a&&(t.exports=a))},2470:function(t,e){t.exports='<div ng-if="validationMessages.length > 0">\n\t<div class="validationBar {{(validation.type === \'warning\') ? \'warning\': \'error\'}}" ng-repeat="validation in validationMessages">\n\t\t<span class="{{(validation.type === \'warning\') ? warningIcon: errorIcon}}"></span>\n\t\t<span tid="add-calc-field-validation-msg">{{validation.msg}}</span>\n\t</div>\n</div>\n'},2471:function(t,e,i){"use strict";var n,a;!(n=[i(10),i(48),i(11)],a=function(t,e,i){e.directive("dsStraightTableSelection",function(){return{restrict:"A",link:function e(n){i("article").on("click","td",function(e){var a=t.element(e.target);var o=a.scope();if(n){var l=i(this).index();n.$apply(function(){n.$emit("column-selected",l,o.scrollApi.getPage())})}})}}})}.apply(e,n),void 0!==a&&(t.exports=a))},2472:function(t,e,i){"use strict";var n,a;!(n=[i(54),i(48),i(10),i(2473),i(2474),i(1008),i(91),i(2475),i(151),i(2477),i(1156),i(1790),i(105),i(1278),i(1333),i(2480),i(611)],a=function(t,e,i,n,a,o,l,s,r,c,d,u,p){e.directive("qvDataManagerEditorHeader",["$timeout","qvDataManagerEditorSelectionService","qvDataManagerPivotService","qvDataManagerEditorDetailsViewService","luiDialog","qvDataManagerCapabilityService",function(f,v,g,m,b,h){return{scope:{headerModel:"=",dmModel:"=",options:"="},controller:["$scope",function(n){n.columnSelectionService=v;n.editorDetailsViewService=m;n.hideFieldFeatureFlag=h.getFlag("DM_hide_fields");var y=e.getService("qvConfirmDialog");var T=e.getService("luiPopover");var M=false,w;var S;function D(){return n.dmModel.loadModel.getTargetTableModelById(n.dmModel.tableId)}var x=function e(){var i=D();var a=t.find(i.getFields(),function(t){var e=t.name;var i=n.headerModel.text;while("="===e.charAt(0))e=e.substr(1);while("="===i.charAt(0))i=i.substr(1);return e===i});if(a){n.fieldNameForCreatingId=a.id;n.relatedField=a;n.showClassifications=n.relatedField.type!==r.DSMTypes.QueryTransformField.name&&n.relatedField.type!==r.DSMTypes.QueryExpressionField.name&&D().data.type!==r.DSMTypes.ConcatenationQuery.name&&D().data.type!==r.DSMTypes.ForcedConcatenationQuery.name;n.fieldType=n.relatedField.type;n.showGeoIcon=n.relatedField.type===r.DSMTypes.QueryTransformField.name&&d.doesFieldContainTransformType(i,a,[r.DSMTypes.Transformations.geoPoint,r.DSMTypes.Transformations.lookupGeoInfo]);n.hasAssociations=n.dmModel.associations[n.relatedField.id];var o=d.filterFieldTransformations(n.relatedField,[r.DSMTypes.Transformations.geoPoint,r.DSMTypes.Transformations.lookupGeoInfo]);S="";if(1===o.length){n.geoTransform=o[0];n.geoFieldId=n.headerModel.text+"_geoInfoButton";if(n.geoTransform.op===r.DSMTypes.Transformations.lookupGeoInfo){var l=D().getField(n.geoTransform.appliedTo);n.geoTransformAppliedFieldName=l?l.name:n.geoTransform.appliedTo}}}};n.isColumnSelected=function(){return v.isColumnSelected(n.relatedField.id)};n.selectColumn=function(){if(n.dmModel.editable()&&v.areSelectionsEnabled()){var t=D().fields.map(function(t){return t.id}).indexOf(n.relatedField.id);n.$emit("field-selected",t)}};n.$watch("headerModel",function(){n.headerModel.text&&(n.headerModel.info.qFallbackTitle=n.headerModel.text);x()},true);x();n.linkable=true;n.linkPopoverContainer=c;n.isFieldHidden=n.relatedField&&n.relatedField.tags&&n.relatedField.tags.includes(p.Tags.Hidden);n.createAssociation=function(t){n.dmModel.editAssociationClicked(false,t,n.relatedField,null,null)};n.toggleSorting=function(){n.$parent.sort(n.headerModel);n.dmModel.lastSort={col:n.headerModel.text,reversed:n.headerModel.reversed}};n.popoverContainer=s;n.modifiedCallback=function(t,e){if(n.dmModel.loadModel){n.dmModel.loadModel.renameTargetTableField(D().data.name,t,e);n.dmModel.loadModel.setProperties()}};n.validateField=function(t){var e=o.validateFieldName(n.dmModel.loadModel,D(),t);n.errors=e;return e};n.createEditName=function(t){return function(){var e=i.element("#column-"+t);f(function(){e.focus()},0)}};n.$watchCollection("dmModel.associations",function(){n.relatedField&&n.relatedField.id&&(n.hasAssociations=n.dmModel.associations[n.relatedField.id])});n.headerModel.text&&(n.associationMenuItems=C());function C(){var t=n.dmModel.associations[n.relatedField.id];var e=[];t&&t.forEach(function(t){var i={};i.text=t.association;i.tableName=t.table.data.name;i.tableId=t.tableId;var a=t.association;i.editSelected=function(){n.dmModel.editAssociationClicked(true,n.headerModel.dataColIx,n.relatedField,t.tableId,t.fieldId,a)};i.breakSelected=function(){n.dmModel.breakAssociationClicked(n.relatedField.id,i.tableId,a)};e.push(i)});return e}n.toggleHide=function(t){n.isFieldHidden=t;t?n.dmModel.loadModel.hideTargetTableField(D().data.name,n.relatedField.id):n.dmModel.loadModel.unhideTargetTableField(D().data.name,n.relatedField.id);n.dmModel.loadModel.setProperties()};n.openUnhidePopover=function(t){if(M&&w){w.close();return}M=true;w=T.show({template:a,alignTo:t.target,closeOnResize:true,closeOnEscape:true,controller:["$scope",function(t){t.unHide=function(){n.toggleHide(false);this.close()}}]});w.closed.then(function(){M=false})};var E=function t(){return function(){var t=n.relatedField.type===r.DSMTypes.QueryExpressionField.name;var i=n.relatedField.type===r.DSMTypes.QueryTransformField.name;var a=n.headerModel.dataColIx;var o=n.dmModel.loadModel.targetTableModels;var s=[{name:"$Rename",text:l.get("DataManager.GridEditor.Rename"),selected:n.createEditName(a),tid:"table-editor-menu-rename"}];s.push({name:"$Associate",text:l.get("DataManager.GridEditor.Associate"),disable:g.getPivotEnabled()||1===o.length,selected:function t(){n.createAssociation(a)}});s.push({name:"$Sort",text:l.get("DataManager.GridEditor.Sort"),selected:n.toggleSorting,tid:"table-editor-menu-sort"});n.hideFieldFeatureFlag&&(n.isFieldHidden?s.push({name:"$UnhideField",text:l.get("DataManager.GridEditor.UnhideField"),selected:function t(){n.toggleHide(false)},tid:"table-editor-menu-unhidefield"}):s.push({name:"$HideField",text:l.get("DataManager.GridEditor.HideField"),selected:function t(){n.toggleHide(true)},tid:"table-editor-menu-hidefield"}));if(v.areSelectionsEnabled()&&!n.editorDetailsViewService.previewPaneIsEnabled()){s.push({name:"SelectExcluded",text:l.get("DataManager.GridEditor.SelectExcluded"),tid:"table-editor-menu-select-excluded",disable:!v.hasSelections(),selected:function t(){v.invertSelections(D().getFields())}});s.push({name:"DeselectAll",text:l.get("DataManager.GridEditor.DeselectAll"),tid:"table-editor-menu-deselect-all",disable:!v.hasSelections(),selected:function t(){v.clearSelections()}})}i&&s.push({name:"$Delete",text:l.get("Common.Delete"),selected:function t(){y.show({title:l.get("DataManager.GridEditor.ConfirmDeleteCalculatedFieldTitle"),message:l.get("DataManager.GridEditor.ConfirmDeleteCalculatedField",[n.relatedField.name])}).closed.then(function(t){if(t){D().deleteTransformField(n.relatedField.id);n.dmModel.loadModel.setProperties()}})},disable:n.concatenated,tid:"table-editor-menu-delete"});if(t){s.unshift({name:"$Edit",text:l.get("Common.Edit"),selected:function t(){n.editorDetailsViewService.disablePreviewPanel();n.dmModel.editCalculatedField(n.relatedField)},disable:n.concatenated||g.getPivotEnabled(),tid:"table-editor-menu-edit"});s.push({name:"$Delete",text:l.get("Common.Delete"),selected:function t(){var e=l.get("DataManager.GridEditor.ConfirmDeleteCalculatedField",n.relatedField.name);n.hasAssociations&&(e=l.get("DataManager.GridEditor.ConfirmDeleteCalculatedFieldUsedInAssociation",n.relatedField.name));y.show({title:l.get("DataManager.GridEditor.ConfirmDeleteCalculatedFieldTitle"),message:e}).closed.then(function(t){if(t){D().deleteCalculatedField(n.relatedField.id);n.dmModel.loadModel.setProperties()}})},disable:n.concatenated,tid:"table-editor-menu-delete"})}s.push({name:"$Lineage",text:l.get("DataManager.Lineage.LineageTitle"),selected:function t(){b.show({template:u.template,controller:u.controller,input:{context:{lineageSelection:{queryId:D().data.id,fieldId:n.relatedField.id,name:n.relatedField.name},loadModel:n.dmModel.loadModel}}})},disable:n.concatenated,tid:"table-editor-menu-lineage"});return e.promise(s)}};var A;n.createColumnMenuButton=function(){A||(A={tid:"ds-grid-column-header-popover-button-"+n.headerModel.dataColIx,tooltipInactive:l.get("DataManager.GridEditor.ColumnMenu"),isToggleButton:true,luiStyle:true,noPadding:true,icon:"menu",buttonClass:"lui-fade-button",hideCaret:true,isDisabled:function t(){return!n.dmModel.editable()},menuOptions:{position:"bottom",width:"170",content:{menuClasses:"datamanager-textlist toolbar-menu lui-list",createMenuItems:E()}}});return A};n.createFieldTypeMenuButton=function(){S||(S={field:n.relatedField,tableId:n.dmModel.tableId,loadModel:n.dmModel.loadModel,tid:"ds-grid-column-header-classification-button-"+n.headerModel.dataColIx,isDisabled:function t(){return!n.dmModel.editable()}});return S};n.$on("$destroy",function(){})}],restrict:"E",template:n}}])}.apply(e,n),void 0!==a&&(t.exports=a))},2473:function(t,e){t.exports='<div tid="dm-gridview-editor-header" class="data-manager-editor-header" id=\'{{"header_" + fieldNameForCreatingId}}\'>\n\t<div tid="dm-gridview-field-selector" ng-if="fieldType" class="button-row"  ng-class="{\'selected\': isColumnSelected(), \'selections-enabled\': columnSelectionService.areSelectionsEnabled()}">\n\t\t<div class="button-inner-container">\n\t\t\t<div class="column-selecter" ng-click="selectColumn($event)">\n\t\t\t</div>\n\n\t\t\t<div class="button-div link" ng-if="hasAssociations">\n\t\t\t\t<qv-association-menu-button\n\t\t\t\t\tbutton-tid="headerModel.text"\n\t\t\t\t\tmenu-tid="headerModel.dataColIx"\n\t\t\t\t\teditable="dmModel.editable()"\n\t\t\t\t\tmenu-items="associationMenuItems"></qv-association-menu-button> \n\t\t\t</div>\n\n\t\t\t<div class="button-div" ng-if="hideFieldFeatureFlag && isFieldHidden" ng-click="openUnhidePopover($event)" ng-class="{ \'selected-column-button\': isColumnSelected() }">\n\t\t\t\t<span class="hidden-icon lui-icon lui-icon--view" aria-hidden="true"></span>\n\t\t\t</div>\n\n\t\t\t<div class="button-div" ng-class="{ \'selected-column-button\': isColumnSelected() }" ng-if="showGeoIcon || showClassifications">\n\t\t\t\t<qv-data-manager-geo-info-button \n\t\t\t\t\ttid="dm-gridview-geo-button"\t\n\t\t\t\t\tclass="button-wrapper" ng-if="showGeoIcon" transformation="geoTransform" applied-field-name="geoTransformAppliedFieldName" disabled="!dmModel.editable()" highlighted="geoInfoNew"></qv-data-manager-geo-info-button>\n\n\t\t\t\t<qv-data-manager-classification-button  \n\t\t\t\t\ttid="dm-gridview-classification-button"\n\t\t\t\t\tclass="button-wrapper" ng-if="showClassifications" button-id=\'buttonId\' model="createFieldTypeMenuButton()" disabled="!dmModel.editable()" highlighted="false"></qv-data-manager-classification-button>\n\t\t\t</div>\n\n\t\t\t<div class="button-divider"></div>\n\n\t\t\t<div class="button-div">\n\t\t\t\t<qv-popover-button\n\t\t\t\t\t\tdata-extra="col"\n\t\t\t\t\t\tqui-model="createColumnMenuButton()"\n\t\t\t\t\t\tclass="column-menu"></qv-popover-button>\n\t\t\t</div>\n\n\t\t</div>\n\t</div>\n\n\t<div ng-if="fieldType" class="field-name-row">\n\t\t<ds-grid-input model="headerModel.text"\n\t\t\t\t\t   input-id="{{headerModel.dataColIx}}"\n\t\t\t\t\t   maxlength="300"\n\t\t\t\t\t   minlength="100"\n\t\t\t\t\t   validate="validateField"\n\t\t\t\t\t   error-state="state.errors"\n\t\t\t\t\t   editable="dmModel.editable()"\n\t\t\t\t\t   modified-callback="modifiedCallback"\n\t\t\t\t\t   field-type="fieldType"\n\t\t></ds-grid-input>\n\t</div>\n\n\n\t<i ng-if="headerModel.isSorted &&\n\theaderModel.sortIndicator !== \'N\'"\n\t   class="data-manager-editor-header-column-sorting ng-scope lui-icon lui-icon--triangle-top"\n\t   ng-class="{ \'lui-icon--triangle-top\': headerModel.sortIndicator === \'A\', \'lui-icon--triangle-bottom\': headerModel.sortIndicator === \'D\' }" ng-style="headerModel.sortStyle"></i>\n\n</div>'},2474:function(t,e){t.exports='<lui-popover>\n    <lui-popover-body class="lui-nopad">\n        <ul class="lui-list">\n            <li class="lui-list__item" ng-click="unHide()">\n                <span class="lui-list__text lui-list__action"\n                    q-translation="DataManager.GridEditor.UnhideField">\n                </span>\n            </li>\n        </ul>\n    </lui-popover-body>\n</lui-popover>\n'},2475:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(11),i(54),i(2476),i(91),i(151),i(439),i(1357),i(1300)],a=function(t,e,i,n,a,o,l){var s;var r;t.nativeComponent("qvDataManagerClassificationButton",{bindings:{model:"<",disabled:"<"},controller:["$element","luiPopover","qvDataManagerAppSessionService",function(t,c,d){var u;var p=false;this.setupModels=function(){this.initialized=false;this.formats=["DD/MM/YYYY","D/M/YYYY","MM/DD/YYYY","M/DD/YYYY","YYYY-MM-DD","YYYY-MM-DD hh:mm[:ss[.fff]]","YYYYMMDD"];this.specifiedByProviderText=a.get("DataManager.Classification.AsSpecifiedByProvider");this.targetTable=this.model.loadModel.getTargetTableModelById(this.model.tableId);this.field=this.targetTable.getField(this.model.field.id);this.loadModelUtils=new l.LoadModelUtils(this.targetTable);this.geoTypes=[{id:"cityAlias",label:a.get("DataManager.Classification.City")},{id:"countryAlias",label:a.get("DataManager.Classification.CountryName")},{id:"countryCodeISO2",label:a.get("DataManager.Classification.CountryCodeISO2")},{id:"countryCodeISO3",label:a.get("DataManager.Classification.CountryCodeISO3")}];d.getDefaultTimeFormat().then(function(t){s=t.dateFormat;r=t.timestampFormat;this.initialize()}.bind(this));s="YYYYMMDD";r="YYYY-MM-DD";this.initialize()};this.$onInit=function(){this.setupModels()};this.$onChanges=function(){this.initialized&&this.setupModels()};this.disambiguationFields=function(){var t=this.loadModelUtils.findFieldsWithRecommendedCountryLookupTR();var e=i.find(t,function(t){return t.id===this.field.id}.bind(this));if(e){var n=i.indexOf(t,e);t.splice(n,1)}return t};this.initialize=function(){this.setDefaultDisplayPattern=function(){if(!this.dialogModel.transformationModel.arguments.displayPattern){this.dialogModel.wasDefaultDisplayPatternSet=true;"date"===this.dialogModel.transformationModel.arguments.targetType?this.dialogModel.transformationModel.arguments.displayPattern=s:"timestamp"===this.dialogModel.transformationModel.arguments.targetType&&(this.dialogModel.transformationModel.arguments.displayPattern=r)}};this.isSpecifiedFromProvider=this.field.originalClassification&&i.isEmpty(this.field.originalTransformations)&&("date"===this.field.originalClassification[0]||"timestamp"===this.field.originalClassification[0]);if(this.isSpecifiedFromProvider){this.classifications=[{id:this.field.originalClassification[0],label:a.get("date"===this.field.originalClassification[0]?"DataManager.Classification.Date":"DataManager.Classification.Timestamp")}];var t="";var n="";if(this.field.transformations&&this.field.transformations[0]){t=this.field.transformations[0].arguments.displayPattern;n=this.field.transformations[0].arguments.sourceFieldType}this.dialogModel={targetType:this.field.originalClassification[0],transformationModel:{}};this.dialogModel.transformationModel.op=o.DSMTypes.Transformations.interpretValues;this.dialogModel.transformationModel.appliedTo=this.field.id;this.dialogModel.transformationModel.arguments={displayPattern:t,sourceFieldType:n,targetType:this.field.originalClassification[0]}}else{this.classifications=[{id:"noclassification",label:a.get("DataManager.Classification.General")},{id:"date",label:a.get("DataManager.Classification.Date")},{id:"timestamp",label:a.get("DataManager.Classification.Timestamp")},{id:"geo",label:a.get("DataManager.Classification.GeoData")}];if(this.field.transformations&&this.field.transformations[0]&&-1!==[o.DSMTypes.Transformations.lookupGeoInfo,o.DSMTypes.Transformations.interpretValues].indexOf(this.field.transformations[0].op)){var l=this.field.transformations[0];if(l.op===o.DSMTypes.Transformations.lookupGeoInfo&&this.loadModelUtils.findCorrespondingTransformedField(this.field.id,l.op)){this.dialogModel={targetType:"geo",transformationModel:{}};this.dialogModel.transformationModel=e.extend(true,this.dialogModel.transformationModel,l)}else if(l.op===o.DSMTypes.Transformations.interpretValues){this.dialogModel={targetType:l.arguments.targetType,transformationModel:{}};this.dialogModel.transformationModel=e.extend(true,this.dialogModel.transformationModel,l);this.setDefaultDisplayPattern()}else this.dialogModel={targetType:"noclassification",transformationModel:{appliedTo:this.field.id,arguments:{}}}}else this.dialogModel={targetType:"noclassification",transformationModel:{appliedTo:this.field.id,arguments:{}}}}this.icon="general-data-class";this.tooltip=a.get("DataManager.Classification.General");var c;if("noclassification"==this.dialogModel.targetType){c=this.targetTable.wasGeneratedByTransformation(this.field,void 0,[o.DSMTypes.Transformations.lookupGeoInfo]);c&&(this.dialogModel={targetType:"geo",transformationModel:{}})}if(this.dialogModel.transformationModel.op===o.DSMTypes.Transformations.lookupGeoInfo||c){this.icon="map";this.tooltip=a.get("DataManager.Classification.GeoData")}if(this.dialogModel.transformationModel.op===o.DSMTypes.Transformations.interpretValues)if("date"===this.dialogModel.transformationModel.arguments.targetType){this.icon="calendar";this.tooltip=a.get("DataManager.Classification.Date")}else if("timestamp"===this.dialogModel.transformationModel.arguments.targetType){this.icon="clock";this.tooltip=a.get("DataManager.Classification.Timestamp")}this.fieldCopy=e.extend(true,{},this.field);this.initialized=true};this.updateTargetType=function(t){this.dialogModel.transformationModel={};this.dialogModel.transformationModel.appliedTo=this.field.id;this.dialogModel.transformationModel.arguments={};this.dialogModel.wasDefaultDisplayPatternSet=false;if("geo"!==t){this.dialogModel.transformationModel.arguments.targetType=t;this.dialogModel.transformationModel.op=o.DSMTypes.Transformations.interpretValues}else this.dialogModel.transformationModel.op=o.DSMTypes.Transformations.lookupGeoInfo};this.applySelections=function(){var t=this.field.id;var i=this.targetTable;if("noclassification"===this.dialogModel.targetType){i.deleteFieldTransformations(this.field.id,this.model.loadModel);i.setUpdateStatus();this.model.loadModel.setProperties();return true}if("geo"===this.dialogModel.targetType){if(this.dialogModel.transformationModel.arguments.geoType){i.deleteFieldTransformations(this.field.id,this.model.loadModel);i.updateFieldTransformation(this.model.loadModel,t,o.DSMTypes.Transformations.lookupGeoInfo,e.extend(true,{},this.dialogModel.transformationModel),a.localeDetected);i.setUpdateStatus();this.model.loadModel.setProperties();return true}return false}if(this.dialogModel.transformationModel.arguments.patterns&&this.dialogModel.transformationModel.arguments.patterns[0]){this.dialogModel.transformationModel.arguments.patterns[0]=this.dialogModel.transformationModel.arguments.patterns[0].replace(/'/g,"");if(("date"===this.dialogModel.targetType||"timestamp"===this.dialogModel.targetType)&&""===this.dialogModel.transformationModel.arguments.patterns[0])return false}else if(("date"===this.dialogModel.targetType||"timestamp"===this.dialogModel.targetType)&&!this.isSpecifiedFromProvider)return false;this.dialogModel.transformationModel.arguments.displayPattern&&(this.dialogModel.transformationModel.arguments.displayPattern=this.dialogModel.transformationModel.arguments.displayPattern.replace(/'/g,""));this.dialogModel.wasDefaultDisplayPatternSet&&("date"===this.dialogModel.transformationModel.arguments.targetType?this.dialogModel.transformationModel.arguments.displayPattern=this.dialogModel.transformationModel.arguments.displayPattern!==s?this.dialogModel.transformationModel.arguments.displayPattern:void 0:"timestamp"===this.dialogModel.transformationModel.arguments.targetType&&(this.dialogModel.transformationModel.arguments.displayPattern=this.dialogModel.transformationModel.arguments.displayPattern!==r?this.dialogModel.transformationModel.arguments.displayPattern:void 0));i.deleteFieldTransformations(this.field.id,this.model.loadModel);i.updateFieldTransformation(this.model.loadModel,t,o.DSMTypes.Transformations.interpretValues,e.extend(true,{},this.dialogModel.transformationModel),a.localeDetected);i.setUpdateStatus();this.model.loadModel.setProperties()};function f(){var i=e.extend(true,{},this.dialogModel);if(p&&u){u.close();return}var a={template:n,input:this,controller:["$scope",function(t){t.onOkClicked=function(){this.applySelections()&&(i=null);this.close()};t.onCancelClicked=function(){this.close()}}],dock:"bottom",alignTo:t[0],closeOnResize:true,outsideIgnore:this.model.tid};p=true;u=c.show(a);u.closed.then(function(){if(i){this.dialogModel={};e.extend(true,this.dialogModel,i);i=null}p=false}.bind(this))}this.displayClassificationMenu=f}],template:['<span class="lui-icon lui-icon--{{$ctrl.icon}} classification-button" q-title-translation="{{$ctrl.tooltip}}" tid="{{$ctrl.model.tid}}" id="{{$ctrl.model.tid}}" qva-outside-ignore-for="{{$ctrl.model.tid}}" ng-class="{ disabled: $ctrl.disabled, highlighted: $ctrl.highlighted && !$ctrl.disabled }" ng-click="$ctrl.displayClassificationMenu()">',"</span>"].join("")})}.apply(e,n),void 0!==a&&(t.exports=a))},2476:function(t,e){t.exports='<lui-popover id="classification-menu-popover" x-arrow="arrow">\n\n\t<div class="qv-classification-menu">\n\t\t<div class="field-type-section">\n\t\t\t<span class="field-type-label" q-translation="DataManager.Classification.FieldType"></span>\n\t\t\t<select class="lui-select"\n\t\t\t\t\tng-disabled="isSpecifiedFromProvider"\n\t\t\t\t\tng-model="dialogModel.targetType"\n\t\t\t\t\ttid="{{model.tid}}-field-type"\n\t\t\t\t\tng-options="classification.id as classification.label for classification in classifications"\n\t\t\t\t\tng-change="updateTargetType(dialogModel.targetType)"></select>\n\t\t</div>\n\n\t\t<div class="input-format-section" ng-if="isSpecifiedFromProvider">\n\t\t\t<span class="input-format-label" q-translation="DataManager.Classification.InputFormat"></span>\n\t\t\t<input type="text"\n\t\t\t\t   disabled="true"\n\t\t\t\t   readonly="true"\n\t\t\t\t   ng-model="specifiedByProviderText"\n\t\t\t\t   class="lui-input"\n\t\t\t\t   tid="{{model.tid}}-input-format"/>\n\t\t</div>\n\n\t\t<div ng-if="dialogModel.targetType !== \'geo\'">\n\n\t\t\t<div class="input-format-section" ng-hide="dialogModel.targetType === \'noclassification\' || isSpecifiedFromProvider">\n\t\t\t\t<span class="input-format-label" q-translation="DataManager.Classification.InputFormat"></span>\n\n\t\t\t\t<qv-autocomplete-input ng-if="initialized" value="dialogModel.transformationModel.arguments.patterns[0]" list-items="formats" testid="{{model.tid}}-input-format" tooltip="DataManager.Classification.InputFormat.Tooltip">\n\t\t\t\t</qv-autocomplete-input>\n\n\t\t\t</div>\n\n\t\t\t<div class="display-format-section" ng-hide="dialogModel.targetType === \'noclassification\'">\n\t\t\t\t<span class="display-format-label" q-translation="DataManager.Classification.DisplayFormat"></span>\n\n\t\t\t\t<qv-autocomplete-input ng-if="initialized" value="dialogModel.transformationModel.arguments.displayPattern" list-items="formats" testid="{{model.tid}}-display-format" tooltip="DataManager.Classification.InputFormat.Tooltip">\n\t\t\t\t</qv-autocomplete-input>\n\n\t\t\t</div>\n\n\t\t</div>\n\n\t\t<div class="geo-type-section" ng-if="dialogModel.targetType === \'geo\'">\n\t\t\t<span class="geo-type-label" q-translation="DataManager.Classification.GeoData"></span>\n\t\t\t<select class="lui-select"\n\t\t\t\t\tng-model="dialogModel.transformationModel.arguments.geoType"\n\t\t\t\t\ttid="{{model.tid}}-field-type"\n\t\t\t\t\tng-options="geoType.id as geoType.label for geoType in geoTypes"></select>\n\n\t\t\t<div class="disambiguation-section" ng-if="dialogModel.transformationModel.arguments.geoType === \'cityAlias\' && disambiguationFields().length > 0">\n\t\t\t\t<span class="geo-type-label" q-translation="DataManager.Classification.GeoDisambiguate"></span>\n\t\t\t\t<select class="lui-select"\n\t\t\t\t\t\tng-model="dialogModel.transformationModel.arguments.disambiguatingCountry"\n\t\t\t\t\t\ttid="{{model.tid}}-field-type"\n\t\t\t\t\t\tng-options="field.id as field.name for field in disambiguationFields()"></select>\n\t\t\t</div>\n\n\t\t</div>\n\n\t</div>\n\n\t<lui-popover-footer>\n\t\t<lui-button tid="classifications_cancel_button" ng-click="onCancelClicked()" q-translation="Common.Cancel"></lui-button>\n\t\t<lui-button tid="classifications_OK_button" ng-click="onOkClicked()" q-translation="Common.OK"></lui-button>\n\t</lui-popover-footer>\n</lui-popover>\n\n'},2477:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2478),i(2479)],a=function(t,e,i){t.nativeComponent("qvAssociationMenuButton",{template:e,bindings:{buttonTid:"=",menuTid:"=",editable:"=",menuItems:"="},controller:[function(){var e=this;var n;e.$onInit=function(){e.buttonTidString="associations_"+e.buttonTid;e.menuTidString="ds-grid-column-header-link-popover-button-"+e.menuTid;e.shouldDisableAssociationButton=e.editable;e.isOpen=false};e.openAssociationsPopover=function(a){if(e.isOpen&&n){n.close();return}var o=t.getService("luiPopover");e.isOpen=true;n=o.show({template:i,alignTo:a.target,closeOnResize:true,closeOnEscape:true,controller:["$scope",function(t){t.menuItems=e.menuItems;t.menuTidString=e.menuTidString;t.selectEditMenuItem=function(e,i){i&&i.preventDefault&&i.preventDefault();if(!e.disable){e.editSelected(i);t.close()}};t.selectBreakMenuItem=function(e,i){i&&i.preventDefault&&i.preventDefault();if(!e.disable){e.breakSelected(e,i);t.close()}}}]});n.closed.then(function(){e.isOpen=false})}}]})}.apply(e,n),void 0!==a&&(t.exports=a))},2478:function(t,e){t.exports='<div class="lui-fade-button" ng-class="{ \'lui-active\': $ctrl.isOpen }">\n\t<span class="lui-fade-button__icon lui-icon lui-icon--associate"\n\t\tng-click="$ctrl.openAssociationsPopover( $event )"\n\t\ttid="{{$ctrl.buttonTidString}}"\n\t\tq-title-translate="DataManager.GridEditor.LinkColumnMenu">\n\t</span>\n</div>\n'},2479:function(t,e){t.exports='<lui-popover class="association-menu-popover">\n\t<lui-popover-header>\n\t\t<div class="lui-popover__title" q-translation="DataManager.GridEditor.AssociationsPopup.Title"></div>\n\t</lui-popover-header>\n\n\t<lui-popover-body class="lui-nopad">\n\t\t<ul class="lui-list" tid="{{menuTidString}}">\n\t\t\t<li class="lui-list__item" ng-repeat="menuItem in menuItems" ng-disabled="menuItem.disable"\n\t\t\t ng-click=\'menuItem.fn()\' ng-class="{\'open-in-new-tab-always\': menuItem.openInNewTab == \'always\'}" ng-hide="menuItem.hide">\n\n\t\t\t\t<div class="lui-list__text" tid="{{menuItem.tid}}" q-title-translation="{{menuItem.text}}" ng-disabled="menuItem.disable">\n\t\t\t\t\t<span class="association-text">{{menuItem.text}}</span>\n\t\t\t\t\t<span ng-if="menuItem.tableName"> ( {{menuItem.tableName}} )</span>\n\t\t\t\t</div>\n\n\t\t\t\t<span class="lui-list__aside association-menu-item-edit" q-title-translation="DataManager.GridEditor.AssociationsPopup.Edit"\n\t\t\t\t ng-click="selectEditMenuItem(menuItem, $event)" ng-disabled="menuItem.disable">\n\t\t\t\t\t<span class="lui-icon  lui-icon--edit"></span>\n\t\t\t\t</span>\n\n\t\t\t\t<span class="lui-list__aside association-menu-item-break" q-title-translation="DataManager.GridEditor.AssociationsPopup.Break"\n\t\t\t\t ng-click="selectBreakMenuItem(menuItem, $event)" ng-disabled="menuItem.disable">\n\t\t\t\t\t<span class="lui-icon  lui-icon--break-association"></span>\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>'},2480:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(91),i(2481),i(163)],a=function(t,e,i,n){t.nativeComponent("qvDataManagerGeoInfoButton",{bindings:{transformation:"<",appliedFieldName:"<",disabled:"<",highlighted:"<",buttonId:"<"},controller:["$element","luiPopover",function(t,a){var o;var l=false;var s=["countryAlias","countryCodeISO3","countryCodeISO2"];var r=["cityAlias"];this.title="DataManager.GeoInfo.Created";function c(){if(l&&o){o.close();return}if(this.transformation){var c=e.get("DataManager.GeoInfo.GeoPointFound");r.indexOf(this.transformation.arguments.geoType)>-1&&(c=e.get("DataManager.GeoInfo.CitiesFound",this.appliedFieldName));s.indexOf(this.transformation.arguments.geoType)>-1&&(c=e.get("DataManager.GeoInfo.CountriesFound",this.appliedFieldName));var d={title:this.title,message:c,extraInfo:{stats:100*this.transformation.arguments.matchRatio,missing:this.transformation.arguments.unmatched}};var u={template:i,input:d,controller:["$scope",function(t){t.onOkClicked=function(){t.close()};t.onLearnMoreClicked=function(){window.open(n.path+"LoadingMapData")}}],dock:"bottom",alignTo:t[0],closeOnResize:true,outsideIgnore:this.buttonId};l=true;o=a.show(u);o.closed.then(function(){l=false})}}this.displayGeoInfoMessage=c}],template:['<span class="lui-icon lui-icon--map transform-icon" tid="{{$ctrl.buttonId}}" id="{{$ctrl.buttonId}}" q-title-translation="{{$ctrl.title}}" qva-outside-ignore-for="{{$ctrl.buttonId}}" ng-class="{ disabled: $ctrl.disabled, highlighted: $ctrl.highlighted && !$ctrl.disabled }" ng-click="$ctrl.displayGeoInfoMessage()">',"</span>"].join("")})}.apply(e,n),void 0!==a&&(t.exports=a))},2481:function(t,e){t.exports='<lui-popover id="geo-field-info-popover" x-arrow="arrow">\n\n\t<lui-popover-header>\n\t\t<lui-popover-title q-translation="{{input.title}}"></lui-popover-title>\n\t</lui-popover-header>\n\n\t<lui-popover-body class="body">\n\t\t<div class="description" ng-bind-html="input.message"></div>\n\n\t\t\x3c!--<div ng-if="input.extraInfo.stats">--\x3e\n\t\t\x3c!--<div class="subheading" q-translation="DataManager.GeoInfo.Matched"></div>--\x3e\n\t\t\x3c!--<div class="stats">{{input.extraInfo.stats}}%</div>--\x3e\n\t\t\x3c!--</div>--\x3e\n\n\t\t\x3c!--<div ng-if="input.extraInfo.missing">--\x3e\n\t\t\t\x3c!--<div class="subheading" q-translation="DataManager.GeoInfo.Unmatched"></div>--\x3e\n\t\t\t\x3c!--<div>--\x3e\n\t\t\t\x3c!--<ul class="unmatched-list">--\x3e\n\t\t\t\t\x3c!--<li ng-repeat="unmatched in input.extraInfo.missing" ng-bind="unmatched"></li>--\x3e\n\t\t\t\x3c!--</ul>--\x3e\n\t\t\t\x3c!--</div>--\x3e\n\t\t\x3c!--</div>--\x3e\n\n\t</lui-popover-body>\n\n\t<lui-popover-footer>\n\t\t<lui-button tid="geo-field-info-popover_learn_more_button" ng-click="onLearnMoreClicked()" q-translation="DataManager.GeoInfo.LearnMore"></lui-button>\n\t\t<lui-button tid="geo-field-info-popover_OK_button" ng-click="onOkClicked()" q-translation="Common.OK"></lui-button>\n\t</lui-popover-footer>\n</lui-popover>\n\n'},2482:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(91),i(2483),i(2484),i(2485),i(2486),i(2487),i(2488),i(2489),i(105),i(199),i(2490),i(2506),i(2508),i(2532)],a=function(t,e,i,n,a,o,l,s,r,c,d){var u=t.getService("$templateCache");u.put("simple-card.ng.html","<div class='simple-card'>{{message}}</div>");u.put("single-visualization-card.ng.html",n);u.put("debug-visualizations-card.ng.html",a);u.put("field-summary-card.ng.html",o);u.put("field-action-card.ng.html",l);var p={replace:true,restrict:"E",template:i,scope:{},controller:["$scope","qvDataManagerDataService",function(t,i){t.enableDebug=d.DM_STU;t.showDebug=false;t.debugCards=[];t.cards=[];var n={};var a=false;function o(e){t.selectionInfo=e;if(!a){a=true;l(e).then(function(e){a=false;t.selectionInfo!==e&&o(t.selectionInfo)},function(){a=false})}}function l(e){var a=new s(i);var o=new r(a);return o.buildCards(e).then(function(i){n=i.context;t.allCards=i.cards;t.debugCards=i.debugCards;f(i.classification);return e})}function u(t){t.name=e.get("DataManager.Editor.Bucketed",[n.field.name]);i.bucketField(n.table.data.id,n.field.id,t)}function p(t){i.applyOrdinal(n.table.data.id,n.field.id,t)}function f(e){t.cards=t.allCards.filter(function(t){return!t.classificationFilter||t.classificationFilter===e})}t.$on("selectedFieldChange",function(t,e){o(e)});t.$on(c.Events.EditorDetailsPane.BucketingChange,function(t,e){u(e)});t.$on(c.Events.EditorDetailsPane.OrderingChange,function(t,e){p(e)});t.$on("classificationChange",function(t,e){t.stopPropagation();f(e)});t.toggleDebugCards=function(){t.showDebug=!t.showDebug}}]};t.directive("qvDataManagerEditorDetailsPane",function(){return p})}.apply(e,n),void 0!==a&&(t.exports=a))},2483:function(t,e){t.exports='<div class="qv-data-manager-editor-details-pane">\n\t<div class="message-container" ng-if="!cards.length && !debugCards.length">\n\t\t<div class="message" q-translation="DataManager.EditorDetails.SelectAColumn"></div>\n\t</div>\n\n\t<qv-card-panel ng-if="!showDebug && cards.length" cards="cards"></qv-card-panel>\n\t<qv-card-panel ng-if="showDebug && debugCards.length" cards="debugCards"></qv-card-panel>\n\n\t<div class="toggle-debug" ng-if="enableDebug">\n\t\t<button class="lui-fade-button"\n\t\t\t\tng-click="toggleDebugCards()"\n\t\t\t\tq-title-translation="Show Debug">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--cogwheel"></span>\n\t\t</button>\n\t</div>\n</div>\n'},2484:function(t,e){t.exports='<div class="single-chart-card">\n\t<data-ds-visualization\n\t\t\tdata-chart-type="vis.chartType"\n\t\t\tdata-app="vis.app"\n\t\t\tdata-cols="vis.cols"\n\t\t\tdata-options="vis.options"\n\t\t\tdata-analysis="vis.analysis"\n\t\t\tdata-field-id="context.field.id"\n\t\t\tdata-target-table-model="context.table" />\n</div>'},2485:function(t,e){t.exports='<div class="debug-card">\n\t<textarea>{{debugText}}</textarea>\n</div>'},2486:function(t,e){t.exports='<qv-field-summary context="context" summary="summary"></qv-field-summary>'},2487:function(t,e){t.exports='<qv-field-action context="context" actions="actions"></qv-field-action>'},2488:function(t,e,i){"use strict";var n,a;!(n=[i(10),i(54),i(91),i(105)],a=function(t,e,i,n){function a(t){this.dataService=t}a.prototype.getVisualizations=function(t,e){var i=this;return i.dataService.getLoadModel().then(function(n){var a={loadModel:n};var l=n.getTargetTableModelById(t);if(!l)return a;var s=l.getField(e);a["table"]=l;if(!s)return a;a["field"]=s;return i.dataService.getVisRecommendations(l.data.name,[{name:s.name}]).then(function(t){var e=o(a,t);return{context:a,recommendation:e,report:t}})})};function o(i,n){var a={classifications:[]};if(!n.recommendations)return a;var o=e.find(n.recommendations,function(t){return t.queryID===i.table.getId()&&t.fieldID===i.field.id});if(!o)return a;a.classifications=o.alternatives.map(function(n){var a=[];var c=n.inspect.map(function(t){return e.find(o.visualizations,function(e){return e.visID===t})});l(i,c,a);var u=n.dataQuality.map(function(t){return e.find(o.visualizations,function(e){return e.visID===t})});l(i,u,a);var p=[];var f=n.actions.map(function(i){return{action:t.copy(i),specs:e.filter(o.visualizations,function(t){return t.visID===i.visRef||i.relatedAnalysisRefs&&i.relatedAnalysisRefs.indexOf(t.visID)>=0})}});r(i,f);s(i,f,p);p=d(p);var v={isDefault:n.isDefault,name:n.classification,summaryVisualizations:a,actions:p};return v});return a}function l(t,e,a){for(var o=0;e&&o<e.length;o++){var l=[];var s=e[o];if(s.chartType===n.Visualization.ChartTypes.Custom&&s.analysis.analysis===n.Visualization.CustomVisualizations.TemporalFacts)continue;s.analysis.actions&&s.analysis.actions.length>0&&l.push(function(t){t.analysis.actions=[]});s.chartType===n.Visualization.ChartTypes.Kpi&&s.analysis.analysis===n.Visualization.CustomVisualizations.TemporalFacts&&l.push(function(t){t.options.showTitles=true;t.options.title=i.get("Visualization.ValueRanges.Title");t.options.qHyperCubeDef.qMeasures[0].qDef.qLabel=" "});var r={chart:u(t,s,l)};if(s.chartType===n.Visualization.ChartTypes.BarChart&&s.analysis.analysis===n.Visualization.CustomVisualizations.ValueFrequency){r.chart.options.showTitles=true;r.chart.options.title=i.get("Visualization.CircleChart.DistinctValuesTitle");r.chart.options.qHyperCubeDef.qMeasures[0].qDef.qLabel=i.get("Visualization.UniqueValues.DistinctValuesLabel",[t.field.name]);var c=r.chart.options.qHyperCubeDef.qDimensions[0];c.qDef.qFieldLabels[0]=t.field.name;c.qOtherTotalSpec&&(c.qDef.othersLabel=i.get("Visualization.ValueFrequency.OthersLabel"))}a.push(r)}}function s(t,a,o){for(var l=0;l<a.length;l++){var s=[];var r=a[l].action;var c=a[l].specs;var d=true;switch(r.action){case n.Visualization.Actions.Bucketing:var p=u(t,c[0]);p.options.showTitles=true;p.options.title=i.get("BucketAction.Label.CartTitle");s.push(p);var f={chartType:n.Visualization.ChartTypes.Custom,analysis:c[0].analysis};var v=u(t,f);s.push(v);break;case n.Visualization.Actions.Ordinal:var g=u(t,c[0],function(t){t.chartType=n.Visualization.CustomVisualizations.Ordinal});g.options.showTitles=true;g.options.title=i.get("OrderingAction.Label.EditorTitle");s.push(g);var m=u(t,c[0]);m.options.showTitles=true;m.options.title=i.get("OrderingAction.Label.ChartTitle");s.push(m);break;case n.Visualization.Actions.SplitValuesDef:case n.Visualization.Actions.SplitValues:case n.Visualization.Actions.SplitEmail:case n.Visualization.Actions.SplitAddress:r.actionSubType=r.action;r.action=n.Visualization.Actions.SplitField;var b=u(t,e.find(c,function(t){return t.analysis.analysis===r.actionSubType}));b.analysis.analysis=r.action;b.options.showTitles=false;s.push(b);break;case n.Visualization.Actions.MapValues:var h=u(t,c[0]);h.options.showTitles=false;h.options.title=i.get("MapValuesAction.Label.EditorTitle");s.push(h);break;case n.Visualization.Actions.MapNulls:var y=u(t,c[0]);y.options.showTitles=false;y.options.title=i.get("MapValuesAction.Label.EditorTitle");s.push(y);break;default:d=false;break}if(d){var T={action:r,charts:s};o.push(T)}}}function r(t,i){if(!e.some(i,function(t){return t.action.action===n.Visualization.Actions.Bucketing})){var a=e.findWhere(t.field.transformations,{op:"bucketed"});if(a){var o={action:{action:"bucket",isDefault:true},specs:[{chartType:"barchart",analysis:{analysis:"bucket",descLabel:"bucketedValueFrequency",dims:[{bucketInfo:{buckets:a.arguments.intervals,method:a.arguments.method}}]}}]};i.unshift(o)}}}var c={};c[n.Visualization.Actions.Bucketing]=1;c[n.Visualization.Actions.MapValues]=2;c[n.Visualization.Actions.MapNulls]=3;c[n.Visualization.Actions.Ordinal]=4;function d(t){return e.sortBy(t,function(t){return c[t.action.action]||c.length})}function u(i,a,o){var l={chartType:a.chartType,analysis:t.copy(a.analysis),options:t.copy(a.options)||{}};o&&(e.isArray(o)?e.each(o,function(t){t(l)}):o(l));l.sizeCategory=p(l.chartType,l);l.analysis.analysis!==n.Visualization.Actions.MapValues&&l.analysis.analysis!==n.Visualization.Actions.MapNulls||l.chartType!==n.Visualization.ChartTypes.Table||(l.chartType=n.Visualization.ChartTypes.Mapping);return l}function p(t,e){var i={height:n.Visualization.Size.Auto,width:5};switch(t){case n.Visualization.ChartTypes.Custom:switch(e.analysis.analysis){case n.Visualization.CustomVisualizations.CountFact:i.width=3;i.height=n.Visualization.Size.Auto;break;case n.Visualization.CustomVisualizations.UniValueFrequency:i.width=3;i.height=n.Visualization.Size.Large;break;case n.Visualization.CustomVisualizations.RangeFacts:i.width=2;i.height=n.Visualization.Size.Medium;break;case n.Visualization.CustomVisualizations.NullFacts:case n.Visualization.CustomVisualizations.DTypeFacts:i.width=1;i.height=n.Visualization.Size.Medium;break;default:break}return i;case n.Visualization.ChartTypes.Kpi:i.height=n.Visualization.Size.Small;i.width=2;return i;case n.Visualization.ChartTypes.BarChart:case n.Visualization.CustomVisualizations.Ordinal:i.height=n.Visualization.Size.Large;i.width=3;return i;default:return i}}return a}.apply(e,n),void 0!==a&&(t.exports=a))},2489:function(t,e,i){"use strict";var n,a;!(n=[i(54),i(89)],a=function(t,e){function i(t){this.fieldVisualizationsProvider=t}i.prototype.buildCards=function(i){var n={context:void 0,cards:[],debugCards:[]};if(i)return this.fieldVisualizationsProvider.getVisualizations(i.tableId,i.fieldId).then(function(e){n.context=e.context;if(e.recommendation){n.classification=t.find(e.recommendation.classifications,function(t){return t.isDefault});n.cards.push({template:"field-summary-card.ng.html",tid:"summary-card",model:{context:n.context,summary:{classifications:e.recommendation.classifications}}});e.recommendation.classifications.filter(function(t){return t.actions.length>0}).forEach(function(t){var i={template:"field-action-card.ng.html",tid:"action-card",classificationFilter:t.name,model:{context:e.context,actions:t.actions}};n.cards.push(i)})}else n.cards=[];e.report?n.debugCards=[{template:"debug-visualizations-card.ng.html",model:{debugText:JSON.stringify(e.report,null,2)}}]:n.debugCards=[];return n});return e.resolve(n)};return i}.apply(e,n),void 0!==a&&(t.exports=a))},2490:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(54),i(2491),i(2492)],a=function(t,e,i){t.directive("dsVisualization",["qvDataManagerVisualizationService",function(t){return{restrict:"E",template:i,replace:true,scope:{visDefinition:"=",targetTableModel:"=",fieldId:"="},controller:["$scope","$element",function(i,n){i.$on("$destroy",function(){i._visual&&i._visual.close()});function a(){i.$watch("visDefinition.options",function(t,n){e.isEqual(t,n)||l(i)})}i.model={targetTableModel:i.targetTableModel,fieldId:i.fieldId};function o(){i.visDefinition&&t.getVisualization(i.visDefinition,i).then(function(t){i.model.saveState&&i.model.saveState();var e=n.find(".visRoot");t.show(e,i.model).then(function(e){t.$scope=e;i._visual||a();i._visual=t}).catch(function(t){i._visual=void 0;t.isHandled=true})})}function l(){i._visual&&i._visual.close();o()}o()}]}}])}.apply(e,n),void 0!==a&&(t.exports=a))},2491:function(t,e){t.exports='<div class="ds-visualization">\n\t<div class="visRoot"></div>\n</div>'},2492:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(89),i(91),i(158),i(90),i(124),i(93),i(450),i(115),i(2493),i(2495),i(406),i(105),i(235),i(484),i(2500),i(2502)],a=function(t,e,i,n,a,o,l,s,r,c,d,u,p){t.service("qvDataManagerVisualizationService",["$compile","$q","qvDataManagerDataService",function(t,e,i){return new v(t,e,i)}]);var f={Null:"Null",Mix:"Mix",Distinct:"Distinct"};function v(t,e,i){this.$compile=t;this.$q=e;this.dataService=i;n.registerExtension("Ordinal",c,{type:"visualization",isLibraryItem:false});n.registerExtension("Mapping",d,{type:"visualization",isLibraryItem:false})}v.prototype.getVisualization=function(t,e,i){if(t.chartType===p.Visualization.ChartTypes.Custom)return this.getCustomVisualization(t,e);return this.getServerVisualization(t,i)};v.prototype.getCustomVisualization=function(t,i){var n=this.getExpressions(t.analysis);var a=this.evaluateExpressions(n);if(t.analysis.analysis===p.Visualization.CustomVisualizations.CountFact)return a.then(function(e){return this.buildUniqueValuesControl(t,e,i)}.bind(this));if(t.analysis.analysis===p.Visualization.CustomVisualizations.RangeFacts)return a.then(function(e){return this.buildValueRangesControl(t,e,i)}.bind(this));if(t.analysis.analysis===p.Visualization.CustomVisualizations.NullFacts)return a.then(function(e){return this.buildNullValuesControl(t,e,i)}.bind(this));if(t.analysis.analysis===p.Visualization.CustomVisualizations.UniValueFrequency)return a.then(function(e){return this.buildUniValueFrequencyControl(t,e,i)}.bind(this));if(t.analysis.analysis===p.Visualization.CustomVisualizations.DTypeFacts)return a.then(function(e){return this.buildMixValuesControl(t,e,i)}.bind(this));return e.reject("unknown visualization")};v.prototype.getServerVisualization=function(t,e){function i(e){return o.load().then(function(){var i=r.getType(t.chartType);return i.getInitialProperties().then(function(i){a.extend(true,i,t.options);t.options=i;return u.createChart(t.options,e,false).then(function(i){return new m(i,t,e)})})})}return e?l.getApp().then(function(t){return i(t)}):this.dataService.openDataPrepApp().then(function(t){return i(t)})};v.prototype.evaluateExpressions=function(t){var e=[];var i=function(i){var n={};var a=0;for(var o in t){var l=i.evaluateEx(t[o]);n[a]=o;a++;e.push(l)}return this.$q.all(e).then(function(t){var e={};for(var i=0;i<t.length;i++){var a=n[i];var o=t[i];e[a]={};e[a].formattedValue=o.qText;o.qIsNumeric&&(e[a].numericValue=o.qNumber)}return e})}.bind(this);return this.dataService.openDataPrepApp().then(i)};v.prototype.getExpressions=function(t){var e="=";var i={};for(var n in t){var a="string"===typeof t[n];a&&0===t[n].indexOf(e)&&(i[n]=t[n])}return i};v.prototype.buildUniqueValuesControl=function(t,e,i){var n=i.$new(true);n.model=e;var a=this.$compile("<unique-values model='model'></unique-values>")(n);return new g(a,n)};v.prototype.initializeCircleChart=function(t,e,n,a,o){var l={},s,r,c;if(o.hasHeader){s=i.get("Visualization.CircleChart."+a+"ValuesTitle");l["header"]=s}l["numerator"]=e;l["denominator"]=n;if(o.hasSubtext){r=i.get("Visualization.CircleChart."+a+"ValuesSubText");l["chartValueSubText"]=r}if(o.hasFooter){c=i.get("Visualization.CircleChart."+a+"ValuesFooter",[e,n]);l["footer"]=c}var d=t.$new(true);d.model=l;var u=this.$compile("<circle-chart model='model'></circle-chart>")(d);return new g(u,d)};v.prototype.buildNullValuesControl=function(t,e,i){return this.initializeCircleChart(i,e.nullCount.numericValue,e.count.numericValue+e.nullCount.numericValue,f.Null,{hasHeader:true,hasFooter:true})};v.prototype.buildUniValueFrequencyControl=function(t,e,i){return this.initializeCircleChart(i,e.count.numericValue,e.count.numericValue,f.Distinct,{hasHeader:true,hasSubtext:false,hasFooter:true})};v.prototype.buildMixValuesControl=function(t,e,i){return this.initializeCircleChart(i,e.textCount.numericValue,e.count.numericValue,f.Mix,{hasHeader:true,hasFooter:true})};v.prototype.buildValueRangesControl=function(t,e,i){var n=i.$new(true);n.model=e;var a=t.sizeCategory.width===p.Visualization.Layout.Cellspan.Small?" display-mode='"+p.Visualization.ValueRangeDisplayModes.Text+"'":"";var o="<value-ranges model='model'"+a+"></value-ranges>";var l=this.$compile(o)(n);return new g(l,n)};v.prototype.createShowVisualizationWrapper=function(t,e){return new g(t,e)};function g(e,i){this.visualization=e;this.$scope=i;this.$q=t.getService("$q");this.node=void 0}g.prototype.show=function(t){t.append(this.visualization);this.node=t;return this.$q.when(this.$scope)};g.prototype.resize=function(){};g.prototype.close=function(){this.node&&(this.node.innerHTML="")};function m(t,e,i){this.visualization=new s(i,t);this.visDefinition=e}m.prototype.show=function(t,e){if(this.visualization){var i={model:e,noSelections:true,noInteraction:false,isZoomed:true};this.visDefinition&&this.visDefinition.augmentVisualizationOptions&&this.visDefinition.augmentVisualizationOptions(i);return this.visualization.show(t,i)}};m.prototype.resize=function(){if(this.visualization)return this.visualization.resize()};m.prototype.close=function(){var t=this.visualization;if(t){this.visualization=void 0;return t.qapp.destroySessionObject(t.model.id).then(function(){return t.close()})}};return v}.apply(e,n),void 0!==a&&(t.exports=a))},2493:function(t,e,i){"use strict";var n,a;!(n=[i(11),i(54),i(239),i(99),i(2494)],a=function(t,e,i,n,a){return{template:a,initialProperties:{version:1,qHyperCubeDef:{qDimensions:[],qMeasures:[],qInitialDataFetch:[{qWidth:2,qHeight:5e3}]}},definition:{type:"items",component:"accordion",items:{dimensions:{uses:"dimensions",min:1,max:1},measures:{uses:"measures",min:1,max:1},sorting:{uses:"sorting"},settings:{uses:"settings"}}},snapshot:{canTakeSnapshot:true},paint:function t(){this.$scope.table||(this.$scope.table=i.table(this))},controller:["$scope","$element",function(i,a){i.contentClass="content";var o=false;var l=false;i.ordinalRowClass="row";i.loaded=false;var s=i.options.model.targetTableModel;"function"===typeof s&&(s=s());i.customOrder=s.hasOrdinal(i.options.model.fieldId);i.options.model.saveState=function(){i.options.model.visState={scrollTop:t(a[0]).find(".sortable")[0].scrollTop};l=false};i.$watch("table",function(){r()});i.$on("orderingReset",function(){r();i.$emit("ordinalChange",i.chartData.map(function(t){return t.label}))});function r(){if(i.table){var t=e.chain(i.table.rows).map(function(t){return t.dimensions[0].qText}).uniq().map(function(t,e){return{label:t,value:e+1}}).value();i.chartData=t}else i.chartData=[]}function c(){var e=i.chartData;var n=t(a[0]).find("."+i.contentClass);i.customOrder=false;var o=[];for(var l=0;l<n.length;l++){var s=n[l];var r=s.innerText;var c=null;e.some(function(t){var e=t.label===r||!r&&!t.label;c=e?t:null;return e});if(null!==c){c.label!=i.table.rows[l].dimensions[0].qText&&(i.customOrder=true);c.value=l+1}o.push(r)}i.$apply();i.$emit("ordinalChange",o)}function d(){var e=t(a[0]).find(".sortable");if(!l&&i.table&&e[0].childElementCount>=i.table.rows.length){i.loaded=true;if(i.options.model.visState){e[0].scrollTop=i.options.model.visState.scrollTop;l=true}}if(!o){var s=!n.treatAsDesktop();e.sortable({placeholder:i.ordinalRowClass,axis:"y",containment:"parent",tolerance:"pointer",handle:s?".qv-pp-sortable-handle":"",update:function t(){c()},change:function t(){}});o=true}}i.setupBars=function(){d()}}]}}.apply(e,n),void 0!==a&&(t.exports=a))},2494:function(t,e){t.exports='<div qv-extension class="hldm-ordinal" ng-cloak>\n\t<div class="sortable">\n\t\t<div ng-repeat="row in chartData" class="{{ordinalRowClass}}">\n\t\t\t<div class="index row-item" ng-bind="row.value"> </div>\n\t\t\t<div class="{{contentClass}} row-item" ng-bind="row.label"> </div>\n\t\t\t<span class="row-item move-icon lui-icon lui-icon--handle pp-move-item qv-pp-sortable-handle ng-scope" q-title-translation="Common.Move"></span>\n\t\t</div>\n\t</div>\n\t{{setupBars()}}\n</div>'},2495:function(t,e,i){"use strict";var n,a;!(n=[i(239),i(2496),i(105),i(2497)],a=function(t,e,i){return{template:e,initialProperties:{version:1,qHyperCubeDef:{qDimensions:[],qMeasures:[],qInitialDataFetch:[{qWidth:2,qHeight:5e3}]}},definition:{type:"items",component:"accordion",items:{dimensions:{uses:"dimensions",min:1,max:1},measures:{uses:"measures",min:0,max:0},settings:{uses:"settings"}}},snapshot:{canTakeSnapshot:true},paint:function e(){this.$scope.table||(this.$scope.table=t.table(this))},controller:["$scope",function(t){t.mappingLimit=i.Visualization.Actions.MappingLimit;t.$watch("table",function(){t.options&&t.table&&(t.rows=t.table.rows.map(function(t){return{label:t.dimensions[0].qText,count:t.measures[0].qNum}}))})}]}}.apply(e,n),void 0!==a&&(t.exports=a))},2496:function(t,e){t.exports='<qv-map-values rows="rows" options="options" mapping-limit="mappingLimit"></qv-map-values>'},2497:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(10),i(54),i(91),i(105),i(2498),i(264),i(611),i(2499)],a=function(t,e,i,n,a,o,l){var s={restrict:"E",replace:true,template:o,scope:{rows:"=",options:"=",mappingLimit:"="},controller:["$scope","$element","luiTooltip","qvMapValuesService","$timeout","qvDataManagerCapabilityService",function(t,o,s,r,c,d){var u=null;t.query="";t.target={name:"",table:[]};t.isGroupingMode=false;t.validReplacementName=true;t.targetGroupName="";t.Constants=a;t.addFieldToGroup=F;t.setTargetGroupName=N;t.removeFieldInReplaceTargetTable=R;t.removeFieldInNullTargetTable=j;t.confirmGroups=W;t.saveTargetGroup=H;t.removeFieldsFromTargetGroup=z;t.replaceGroupName=V;t.shouldRemoveDistinctValueWithSameMappedValue=T;t.groupNameInputPlaceHolder=n.get("MappingAction.Content.WarningEmptyGroupName");t.searchInputPlaceHolder=n.get("MappingAction.Content.SearchInputPlaceHolder");t.handleNullFeatureFlag=d.getFlag("DM_handle_nulls");t.$watch("rows",function(){if(t.options.mappingType){t.mappingType=t.options.mappingType;t.mapValues=t.options.mapValues;h();f()}});t.$on(a.Events.EditorDetailsPane.MappingReset,function(e,i){t.mapValues=i.mapValues;t.target.name="";t.target.table=[];D();I();h();W();f()});t.$on("$destroy",function(){D()});function p(){var e=m();return r.canAddMapping(e.length,t.mappingLimit)}function f(){var e=m();r.mappingLimitReached(t.isNullMode,e.length,t.mappingLimit)&&v()}function v(){t.distinctValues.forEach(function(t){t.mappedData.length<1&&(t.editable=false)})}function g(){t.distinctValues.forEach(function(t){t.editable=true})}function m(){return t.mapValues.filter(function(t){return""!==t.to})}function b(){t.isReplaceMode=t.mappingType===a.Visualization.Actions.RenameMapping;t.isNullMode=t.mappingType===a.Visualization.Actions.MapNulls;t.isGroupingMode=t.target.table.length>0||t.isNullMode;t.validReplacementName=M(t.target.name);D();if(!t.target.name&&t.isGroupingMode&&t.isReplaceMode){w(n.get("MappingAction.Content.WarningEmptyGroupName"));t.$emit(a.Events.EditorDetailsPane.DisableMappingActionButtons)}C()}function h(){if(t.rows){t.handleNullFeatureFlag?t.distinctValues=r.getDistinctValuesWithNull(t.rows,t.options.fieldContainsNull,t.options.nullPercentage):t.distinctValues=r.getDistinctValues(t.rows);t.mapValues.length>0&&(t.handleNullFeatureFlag?t.distinctValues=r.mappedValuesToChartData(t.rows,t.mapValues,t.options.fieldContainsNull,t.options.nullPercentage,t.handleNullFeatureFlag):t.distinctValues=r.mappedValuesToChartData(t.rows,t.mapValues));y()}else t.distinctValues=[];b()}function y(){if(t.distinctValues.length>0){if(t.mappingType===a.Visualization.Actions.MapNulls){E();t.distinctValues=t.distinctValues.filter(function(t){return!("-"===t.label&&0===t.mappedData.length)})}else t.mappingType===a.Visualization.Actions.RenameMapping&&(t.nullGroup=i.find(t.distinctValues,function(t){return""===t.label&&t.mappedData.length>0}));t.distinctValues=t.distinctValues.filter(function(t){return""!==t.label});t.distinctValues=i.uniq(t.distinctValues,false,function(t){return t.label});t.distinctValues=i.sortBy(t.distinctValues,function(t){return t.mappedData?!t.mappedData.length:!t.mappedData});A()}}function T(t){return 1===t.mappedData.length&&t.mappedData[0].label===t.label}function M(e){return t.isReplaceMode&&t.target.name&&!x(e)}function w(t){c(function(){var e=o.find(".target-name-input");if(e&&e[0]){u=s.show({template:l.template,controller:l.controller,input:{item:t,style:{width:"150px"}},alignTo:e[0],dock:"bottom"});S()}},0,false)}function S(){t.distinctValues.forEach(function(t){t.editable=false})}function D(){c(function(){u&&u.close()},0,false)}function x(e){return Boolean(i.find(t.distinctValues,function(t){return t.label===e&&!t.isEditMode}))}function C(){if(t.mapValues.length>0){var e=t.mapValues.filter(function(t){return""!==t.to});t.groupCount=e.length;t.distinctValuesCount=t.distinctValues.length}else{t.groupCount=0;t.distinctValuesCount=t.distinctValues.length}}function E(){var n=i.findWhere(t.distinctValues,{label:""});n||(n=r.chartField());n.label="";L(e.copy(n))}function A(){t.mappingType===a.Visualization.Actions.MapNulls?t.distinctValues.forEach(function(t){t.editable=0===t.mappedData.length}):t.mappingType===a.Visualization.Actions.RenameMapping&&t.distinctValues.forEach(function(t){t.editable=true})}function k(){I();var e=i.findWhere(t.distinctValues,{label:t.target.name});e&&(e.isEditMode=true)}function I(){t.distinctValues.forEach(function(t){t.isEditMode=false})}function F(e){e.editable&&t.mappingType===a.Visualization.Actions.MapNulls?P(e):e.editable&&t.mappingType===a.Visualization.Actions.RenameMapping&&O(e)}function O(i){if(i.mappedData.length>0){g();i=e.copy(i);L(i)}else if(t.target.name||0!==t.target.table.length){if(!B(i)&&i.label!==t.target.name){i=e.copy(i);t.target.table.unshift(i);_(i);q()}}else p()&&t.$evalAsync(function(){t.target.name=i.label;t.target.table.unshift(e.copy(i));i.mappedData=e.copy(t.target.table);i.isEditMode=true;W()})}function P(i){i=e.copy(i);if(0===i.mappedData.length&&!B(i)){t.target.table.unshift(i);_(i);W()}}function q(){var e=i.findWhere(t.distinctValues,{isEditMode:true});if(e){e.label=t.target.name;e.mappedData=t.target.table;e.isEditMode=true}b();k();W()}function L(e){if(e.isEditMode)H();else{t.target.name=e.label;t.target.table=e.mappedData;k()}b()}function V(e){t.target.name=e;N()}function N(e){D();var o=e&&e.keyCode===a.KeyCodes.Esc;if(o){t.target.name=t.target.table.slice(-1).pop().label;b()}var l=t.target.name?t.target.name:null;var s=Boolean(i.find(t.distinctValues,function(t){return t.label===l&&t.mappedData.length>0}));var r=Boolean(i.find(t.distinctValues,function(t){return t.label===l&&t.isEditMode}));var c=Boolean(i.find(t.distinctValues,function(t){return t.label===l}));var d=function e(){var n=i.findWhere(t.distinctValues,{isEditMode:true});n&&(n.label=t.target.name);W()};if(t.target.name)if(s&&c&&!o&&e&&!r){t.validReplacementName=false;t.$emit(a.Events.EditorDetailsPane.DisableMappingActionButtons);w(n.get("MappingAction.Content.WarningTwoGroupsWithSameName"))}else if(!s&&c){var u=i.findWhere(t.distinctValues,{label:l});_(u);F(u);d()}else c||d();else b();if(e&&e.keyCode===a.KeyCodes.Enter){U();f()}}function B(e){return i.find(t.target.table,function(t){return t.label===e.label})}function $(e){var n=i.find(t.distinctValues,function(t){return t.label===e.label});if(!n){n=r.chartField();n.label=e.label;n.mappedData=[];n.isNull=e.isNull;n.barCss=e.barCss?e.barCss:"";t.distinctValues.unshift(n)}}function _(e){t.distinctValues=t.distinctValues.filter(function(t){return t.label!==e.label})}function R(e){if(B(e)&&e.label!==t.target.name){t.target.table=t.target.table.filter(function(t){return t.label!==e.label});q();$(e)}else if(1===t.target.table.length&&e.label===t.target.name){t.distinctValues=t.distinctValues.filter(function(t){return!t.isEditMode});U();$(e)}}function j(e){t.target.table=t.target.table.filter(function(t){return t.label!==e.label});$(e);W()}function z(){var e=i.findWhere(t.distinctValues,{isEditMode:true});e&&(t.distinctValues=t.distinctValues.filter(function(t){return t.label!==e.label}));t.target.table.forEach(function(e){t.distinctValues.unshift({label:e.label,mappedData:[],count:e.count,barCss:e.barCss,isNull:e.isNull})});U();f()}function H(){var e=function t(){W();U()};if(t.target.table.length>0)if(u){G();e()}else e();f()}function G(){t.target.name=t.target.table.slice(-1).pop().label;N(t.target.name)}function U(){t.target.name="";t.target.table=[];I();W();D()}function W(){t.nullGroup&&t.mappingType===a.Visualization.Actions.RenameMapping&&t.distinctValues.push(t.nullGroup);if(t.mappingType===a.Visualization.Actions.MapNulls){var e=r.chartField();e.label="";e.mappedData=t.target.table;t.distinctValues.push(e)}Q();y();b()}function Q(){t.mapValues=r.createMappedValues(t.distinctValues,t.handleNullFeatureFlag);t.$emit(a.Events.EditorDetailsPane.MappingCreated,{mapValues:t.mapValues})}}]};t.directive("qvMapValues",function(){return s})}.apply(e,n),void 0!==a&&(t.exports=a))},2498:function(t,e){t.exports='<div qv-extension class="hldm-mapping" ng-cloak>\n\t<div class="components">\n\t\t<div class="component source" tid="source-table">\n\t\t\t<div class="source-header">\n\t\t\t\t<div class="source-header-label" q-translation="MappingAction.Content.renameDistinctValues"></div>\n\t\t\t</div>\n\t\t\t<div class="source-table">\n\t\t\t\t<div class="lui-search source-search">\n\t\t\t\t\t<span class="lui-icon lui-icon--search"></span>\n\t\t\t\t\t<input tid="distinct-value-search"  class="lui-search__input" ng-model="query" maxlength="255" spellcheck="false" type="text"\n\t\t\t\t\t\t   placeholder="{{searchInputPlaceHolder}}"/>\n\t\t\t\t\t<span class="lui-icon lui-icon--close" ng-show="query !== \'\'" ng-click="query = \'\'"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="source-fields" tid="replace-card-distinct-values">\n\t\t\t\t\t<div ng-if="!handleNullFeatureFlag" ng-repeat="field in distinctValues | filter: query === \'\' ? {label: undefined} : {label: query}" class="row"\n\t\t\t\t\t\t ng-class="{\'grouping-mode\': field.isEditMode, \'disabled-field\': !field.editable, \'active-field\': field.editable} "\n\t\t\t\t\t\t ng-click="addFieldToGroup(field)">\n\t\t\t\t\t\t<div class="content row-item" ng-bind="field.label"\n\t\t\t\t\t\t\t ng-class="{\'grouping-mode\': field.isEditMode}" title="{{field.label}}"></div>\n\t\t\t\t\t\t<div class=" source-notification-count" ng-if="field.mappedData.length > 0">\n\t\t\t\t\t\t\t<span ng-if="!shouldRemoveDistinctValueWithSameMappedValue(field)">{{field.mappedData.length}}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<span ng-if="handleNullFeatureFlag" ng-repeat="field in distinctValues | filter: query === \'\' ? {label: undefined} : {label: query}">\n\t\t\t\t\t\t<div class="row" ng-if="!isNullMode || !field.isNull"\n\t\t\t\t\t\t\tng-class="{\'null-field\': field.isNull, \'grouping-mode\': field.isEditMode, \'disabled-field\': !field.editable, \'active-field\': field.editable} "\n\t\t\t\t\t\t\tng-click="addFieldToGroup(field)">\n\t\t\t\t\t\t   <div class="content row-item" ng-bind="field.label"\n\t\t\t\t\t\t\t\tng-class="{\'grouping-mode\': field.isEditMode}" title="{{field.label}}"></div>\n\t\t\t\t\t\t   <div class=" source-notification-count" ng-if="field.mappedData.length > 0">\n\t\t\t\t\t\t\t   <span ng-if="!shouldRemoveDistinctValueWithSameMappedValue(field)">{{field.mappedData.length}}</span>\n\t\t\t\t\t\t   </div>\n\t\t\t\t\t   </div>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="component empty" ng-if="!isGroupingMode" tid="empty-target-table">\n\t\t\t<div class="empty-target">\n\t\t\t\t<div class="message">\n\t\t\t\t\t<div ng-if="groupCount > 0">\n\t\t\t\t\t\t<div q-translation="MappingAction.Label.Groups"></div>\n\t\t\t\t\t\t<div class="count" ng-bind="groupCount"></div>\n\n\t\t\t\t\t\t<div class="distinct-values-count"  q-translation="MappingAction.Label.DistinctValues"></div>\n\t\t\t\t\t\t<div class="count" ng-bind="distinctValuesCount"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div ng-if="groupCount === 0">\n\t\t\t\t\t\t<div tid="empty-message-upper" q-translation="MappingAction.Label.GroupsEmptyMessage1"></div>\n\t\t\t\t\t\t<div tid="empty-message-lower" q-translation="MappingAction.Label.GroupsEmptyMessage2" class="empty-message-lower"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="component target">\n\t\t\t<div ng-if="isReplaceMode && isGroupingMode">\n\t\t\t\t<div class="target-header">\n\t\t\t\t\t<div class="target-header-label" q-translation="MappingAction.Content.dataQualityGroupName"></div>\n\t\t\t\t\t<div class="lui-icon  lui-icon--close target-close-button" aria-hidden="true"\n\t\t\t\t\t\t ng-click="saveTargetGroup()" tid="target-close-btn" q-title-translation="MappingAction.Content.targetTableCloseTooltip"></div>\n\n\t\t\t\t</div>\n\t\t\t\t<div class="target-name-input">\n\t\t\t\t\t<input class="lui-input ds-input target-group-name"\n\t\t\t\t\t\t   ng-class="{\'empty-group-name\': !validReplacementName}"\n\t\t\t\t\t\t   tid="targetTableGroupName"\n\t\t\t\t\t\t   placeholder="{{groupNameInputPlaceHolder}}"\n\t\t\t\t\t\t   type="text"\n\t\t\t\t\t\t   ng-model="target.name"\n\t\t\t\t\t\t   ng-keyup="setTargetGroupName($event)"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div ng-if="isNullMode && isGroupingMode">\n\t\t\t\t<div class="null-target-header">\n\t\t\t\t\t<div class="null-target-header-label"\n\t\t\t\t\t\t q-translation="MappingAction.Content.dataQualitySelectedValues"></div>\n\t\t\t\t\t<div class="null-target-header-count">{{target.table.length}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="target-table-null" ng-if="isNullMode && isGroupingMode" tid="null-target-table">\n\t\t\t\t<div ng-repeat="field in target.table" class="row">\n\t\t\t\t\t<span class="row-item" title="{{field.label}}">{{field.label}}</span>\n\t\t\t\t\t<div class="row-bar" ng-style="field.barCss"></div>\n\t\t\t\t\t<span ng-if="field.label !== target.name ||  target.table.length === 1"\n\t\t\t\t\t\t  class="row-icon lui-icon lui-icon--remove remove-icon"\n\t\t\t\t\t\t  ng-click="removeFieldInNullTargetTable(field)" q-title-translation="MappingAction.Content.targetTableRemoveTooltip"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="target-table-rename" ng-if="isReplaceMode && isGroupingMode" tid="rename-target-table">\n\t\t\t\t<div ng-repeat="field in target.table" class="row">\n\t\t\t\t\t<span ng-if="!handleNullFeatureFlag" class="row-item" title="{{field.label}}" ng-click="replaceGroupName(field.label)">{{field.label}}</span>\n\t\t\t\t\t<span ng-if="handleNullFeatureFlag" class="row-item" ng-class="{\'null-field\': field.isNull}" title="{{field.label}}" ng-click="replaceGroupName(field.label)">{{field.label}}</span>\n\t\t\t\t\t<div class="row-bar" ng-style="field.barCss"></div>\n\t\t\t\t\t<span ng-if="field.label !== target.name ||  target.table.length === 1"\n\t\t\t\t\t\t  class="row-icon lui-icon lui-icon--remove remove-icon"\n\t\t\t\t\t\t  ng-click="removeFieldInReplaceTargetTable(field)" q-title-translation="MappingAction.Content.targetTableRemoveTooltip"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div tid="remove-all-btn" class="target-table-remove-all-btn" ng-if="isGroupingMode"\n\t\t\t\t ng-click="removeFieldsFromTargetGroup()">\n\t\t\t\t<span q-translation="MappingAction.Content.removeAllButton"></span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},2499:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(54),i(91)],a=function(t,e,i){t.service("qvMapValuesService",[function(){return{createMappedValues:a,mappedValuesToChartData:o,getDistinctValues:t,getDistinctValuesWithNull:n,chartField:d,canAddMapping:u,mappingLimitReached:p};function t(t){if(t){var i=e.reduce(t,function(t,e){return t+e.count},0);return t.map(function(t){return{label:t.label,mappedData:[],count:t.count,barCss:{width:100*t.count/i+"%"},isEditMode:false}})}return[]}function n(e,n,a){var o=[];if(n){var l=a||0;o.push({label:i.get("MappingAction.Label.NullLabel"),mappedData:[],isEditMode:false,barCss:{width:l+"%"},isNull:true})}if(1===e.length&&0===e[0].count)return o;t(e).forEach(function(t){o.push(t)});return o}function a(t,e){return t.map(function(t){if(!(1===t.mappedData.length&&t.mappedData[0].label===t.label)&&t.mappedData.length>0){if(e){var i=[],n;t.mappedData.forEach(function(t){t.isNull?n=true:i.push(t.label)});return n?{from:i,to:t.label,hasNullValue:n}:{from:i,to:t.label}}return{from:t.mappedData.map(function(t){return t.label}),to:t.label}}}).filter(function(t){return!!t})}function o(e,i,a,o,d){var u=d?n(e,a,o):t(e);var p=r(i);var f=c(i,d);u=l(p,u,d);u=s(f,u);return u}function l(t,i,n){return i.map(function(i){var a=e.find(t,function(t){null===t.label&&(t.label=void 0);return t.label===i.label});if(!a)return n?{label:i.label,mappedData:[],count:i.count,barCss:i.barCss,isNull:i.isNull}:{label:i.label,mappedData:[],count:i.count,barCss:i.barCss}}).filter(function(t){return!!t})}function s(t,e){t.forEach(function(t){e.unshift(t)});return e}function r(t){var e=[];t.forEach(function(t){t.from.forEach(function(t){e.push({label:t})});t.hasNullValue&&e.push({label:i.get("MappingAction.Label.NullLabel")})});return e}function c(t,e){if(e){var n=[];t.forEach(function(t){var e=t.from.map(function(t){return{label:t,mappedData:[],count:void 0,barCss:void 0}});t.hasNullValue&&e.push({label:i.get("MappingAction.Label.NullLabel"),mappedData:[],count:void 0,barCss:void 0,isNull:true});n.push({label:t.to,mappedData:e,count:t.from.length,barCss:void 0})});return n}return t.map(function(t){return{label:t.to,mappedData:t.from.map(function(t){return{label:t,mappedData:[],count:void 0,barCss:void 0}}),count:t.from.length,barCss:void 0}})}function d(){return{label:"",mappedData:[],count:0,barCss:"",isEditMode:false,editable:true}}function u(t,e){return t<e}function p(t,e,i){return!t&&!u(e,i)}}])}.apply(e,n),void 0!==a&&(t.exports=a))},2500:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(91),i(2501)],a=function(t,e,i){var n={template:i,bindings:{model:"<"},controller:["$scope",function(t){this.$onChanges=function(i){var n=i["model"];if(n){var a=n.currentValue;var o='<span class="unique-value-numeric" >'+a.distinctCount.formattedValue+"</span>";var l='<span class="unique-value-numeric">'+a.count.formattedValue+"</span>";t.distinctCountContent=e.get("Visualization.UniqueValues.DistinctCountText",[o]);t.factCountContent=e.get("Visualization.UniqueValues.TotalCountText",[l])}}}]};t.nativeComponent("uniqueValues",n)}.apply(e,n),void 0!==a&&(t.exports=a))},2501:function(t,e){t.exports='<div class="unique-value-content">\n\t<span class="unique-value-text" ng-bind-html="distinctCountContent"></span>\n\t<span class="unique-value-text" ng-bind-html="factCountContent"></span>\n</div>'},2502:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(91),i(105),i(2503),i(2504)],a=function(t,e,i,n,a){var o={template:n,bindings:{model:"<",displayMode:"@?"},controller:["$scope","$element","$timeout",function(t,n,o){var l,s,r,c,d,u,p,f;var v=.3;var g=0;var m=1;var b=0;var h=n;var y=["blue","blue-darken-30"];this.$onInit=function(){this.calculatedDisplayMode=this.displayMode;this.textModeBreakpoint=120.6;this.popover=null;this.fontSize="12px";this.fontFamily="QlikView Sans";l=this.fontSize+" "+this.fontFamily;this.minColour="blue-lighten-30";this.maxColour="blue-darken-60";this.minElLabel=e.get("Visualization.ValueRanges.Min");this.minElLabelTextAnchor="middle";this.avgElLabel=e.get("Visualization.ValueRanges.Avg");this.maxElLabel=e.get("Visualization.ValueRanges.Max");this.maxElLabelTextAnchor="middle";this.dotRadius=7.5;this.minValuePos=10;this.svgPadding=2*this.minValuePos;this.formattedMinVal=this.model.min.formattedValue;this.formattedMaxVal=this.model.max.formattedValue;this.formattedMedianVal=this.model.median.formattedValue;this.formattedAvgVal=this.model.avg.formattedValue;this.minValueTextPos=this.addValueTextOverflowOffset(this.minValuePos,this.formattedMinVal,l);s=this.model.min.numericValue;r=this.model.median.numericValue;c=this.model.avg.numericValue;d=this.model.max.numericValue;this.isMedianDistinct=r!=s&&r!=c&&r!=d;u=d-s;p=v*u+s;f=d-v*u;this.truncateMaxArea=c<p&&r<p;this.truncateMinArea=c>f&&r>f;this.showTruncatedChart=this.truncateMinArea||this.truncateMaxArea;if(!this.isMedianDistinct)if(r===s){this.minElLabel=e.get("Visualization.ValueRanges.MinAndMedian");this.minElLabelTextAnchor="start"}else if(r===c)this.avgElLabel=e.get("Visualization.ValueRanges.MedianAndAvg");else if(r===d){this.maxElLabel=e.get("Visualization.ValueRanges.MaxAndMedian");this.maxElLabelTextAnchor="end"}t.$on(i.Events.EditorDetailsPane.ResizeChart,this.drawChart.bind(this))};this.addValueTextOverflowOffset=function(t,e,i){var n=this.getTextWidth(e,i);var a=this.maxValuePos&&this.maxValuePos>0?this.maxValuePos+this.svgPadding-(t+n/2):0;var o=this.minValuePos&&this.minValuePos>0?t-n/2-(this.minValuePos-this.svgPadding):0;var l=0;a<0?l=a:o<0&&(l=Math.abs(o));return t+l};this.getTextWidth=function(t,e){var i=this.getTextWidth.canvas||(this.getTextWidth.canvas=document.createElement("canvas"));var n=i.getContext("2d");n.font=e;var a=n.measureText(t);return a.width};this.getValueTranslationWithHTML=function(t,i){return e.get(i,'<span class="value-ranges-textChart-value">'+t+"</span>")};this.getValueTranslation=function(t,i){return e.get(i,t)};this.computePositionBetweenPoints=function(t,e,i,n,a){var o=i-e;var l=a-n;var s=o/l;return(t-e)/s+n};this.generatePopOverContent=function(){this.minValuePopOverContent=this.getValueTranslation(this.formattedMinVal,"Visualization.ValueRanges.MinLabelAndValue");this.medianValuePopOverContent=this.getValueTranslation(this.formattedMedianVal,"Visualization.ValueRanges.MedianLabelAndValue");this.avgValuePopOverContent=this.getValueTranslation(this.formattedAvgVal,"Visualization.ValueRanges.AvgLabelAndValue");this.maxValuePopOverContent=this.getValueTranslation(this.formattedMaxVal,"Visualization.ValueRanges.MaxLabelAndValue");if(this.calculatedDisplayMode!=i.Visualization.ValueRangeDisplayModes.Text){this.model.min.numericValue===this.model.median.numericValue&&(this.minValuePopOverContent=this.getValueTranslation(this.formattedMinVal,"Visualization.ValueRanges.MinMedianLabelAndValue"));this.model.avg.numericValue===this.model.median.numericValue&&(this.avgValuePopOverContent=this.getValueTranslation(this.formattedAvgVal,"Visualization.ValueRanges.MedianAvgLabelAndValue"));this.model.max.numericValue===this.model.median.numericValue&&(this.maxValuePopOverContent=this.getValueTranslation(this.formattedMaxVal,"Visualization.ValueRanges.MaxMedianLabelAndValue"))}};this.drawTextChart=function(){this.minValueContent=this.getValueTranslationWithHTML(this.formattedMinVal,"Visualization.ValueRanges.MinLabelAndValue");this.medianValueContent=this.getValueTranslationWithHTML(this.formattedMedianVal,"Visualization.ValueRanges.MedianLabelAndValue");this.avgValueContent=this.getValueTranslationWithHTML(this.formattedAvgVal,"Visualization.ValueRanges.AvgLabelAndValue");this.maxValueContent=this.getValueTranslationWithHTML(this.formattedMaxVal,"Visualization.ValueRanges.MaxLabelAndValue")};this.$postLink=function(){o(this.drawChart.bind(this))};this.drawChart=function(){this.displayMode||(this.displayMode=i.Visualization.ValueRangeDisplayModes.RangeLine);this.displayMode!==i.Visualization.ValueRangeDisplayModes.Text&&h.height()<this.textModeBreakpoint?this.calculatedDisplayMode=i.Visualization.ValueRangeDisplayModes.Text:this.calculatedDisplayMode=this.displayMode;this.generatePopOverContent();this.calculatedDisplayMode===i.Visualization.ValueRangeDisplayModes.Text?this.drawTextChart():this.drawRangeLineChart()};this.drawRangeLineChart=function(){var t=30;var i=h.width()-t;this.width=i;this.height=100;var n=this.width-this.svgPadding/2;this.maxValuePos=this.width-this.svgPadding/2;this.maxValueTextPos=this.addValueTextOverflowOffset(this.maxValuePos,this.formattedMaxVal,l);this.axisBreakpoint=n;if(this.showTruncatedChart){if(this.truncateMaxArea){b=.75*this.axisBreakpoint;this.axisBreakpoint=b-2.5;this.axisRestartpoint=b+2.5;if(c>r){this.avgPos=n/2+this.minValuePos;this.medianPos=this.computePositionBetweenPoints(r,s,c,this.minValuePos,this.avgPos)}else{this.medianPos=n/2+this.minValuePos;this.avgPos=this.computePositionBetweenPoints(c,s,r,this.minValuePos,this.medianPos)}m=0;g=0}else if(this.truncateMinArea){b=.25*this.axisBreakpoint;this.axisBreakpoint=b-2.5;this.axisRestartpoint=b+2.5;if(c<r){this.avgPos=n/2+this.minValuePos;this.medianPos=this.computePositionBetweenPoints(r,c,d,this.avgPos,this.maxValuePos)}else{this.medianPos=n/2+this.minValuePos;this.avgPos=this.computePositionBetweenPoints(c,r,d,this.medianPos,this.maxValuePos)}m=1;g=1}}else{this.avgPos=this.computePositionBetweenPoints(c,s,d,this.minValuePos,this.maxValuePos);this.isMedianDistinct&&(this.medianPos=this.computePositionBetweenPoints(r,s,d,this.minValuePos,this.maxValuePos));if(this.avgPos>this.medianPos){g=1;m=0}}this.avgValTextPos=this.addValueTextOverflowOffset(this.avgPos,this.formattedAvgVal,l);this.medianValTextPos=this.addValueTextOverflowOffset(this.medianPos,this.formattedMedianVal,l);this.avgColour=y[g];this.medianColour=y[m];var a=this.getTextWidth(e.get("Visualization.ValueRanges.Median"),l);var o=this.getTextWidth(this.model.median.formattedValue,l);this.medianAvgLabelSpaceAvailable=!this.isMedianDistinct||Math.abs(this.avgPos-this.medianPos)>Math.floor(a/2);this.medianAvgValueSpaceAvailable=!this.isMedianDistinct||Math.abs(this.avgPos-this.medianPos)>Math.floor(o/2);this.avgValueGapPos=this.medianAvgValueSpaceAvailable?85:71;this.medianAvgCircleSpaceAvailable=Math.abs(this.avgPos-this.medianPos)>2*this.dotRadius;this.medianLabelSpaceAvailable=!this.isMedianDistinct||Math.abs(this.medianPos-this.minValuePos)>Math.floor(a/2)&&Math.abs(this.maxValuePos-this.medianPos)>Math.floor(a/2);this.medianValueSpaceAvailable=!this.isMedianDistinct||Math.abs(this.medianPos-this.minValuePos)>Math.floor(o/2)&&Math.abs(this.maxValuePos-this.medianPos)>Math.floor(o/2);var u=this.medianLabelSpaceAvailable&&this.medianValueSpaceAvailable;this.medianValueGap=u?30:68;this.endPointLabelYPos=u?40:43;this.endPointValueYPos=u?74:70};this.hidePopOver=function(){this.popover&&this.popover.close()};this.showPopOver=function(t,e){this.popover&&this.popover.close();this.popupInput={x:t.clientX,y:t.clientY,content:e};this.popover=a.show(this.popupInput)}}]};t.nativeComponent("valueRanges",o)}.apply(e,n),void 0!==a&&(t.exports=a))},2503:function(t,e){t.exports='\n\n<div class="value-range-title" q-translation="Visualization.ValueRanges.Title"></div>\n<div ng-switch="$ctrl.calculatedDisplayMode">\n\t<div ng-switch-when="text" class="value-range-textChart value-range-spacing">\n\t\t<div class="value-range-textChart-row value-range-textChart-firstRow" ng-bind-html="$ctrl.minValueContent" ng-mouseover="$ctrl.showPopOver($event, $ctrl.minValuePopOverContent)" ng-mouseleave="$ctrl.hidePopOver()"></div>\n\t\t<div class="value-range-textChart-row value-range-textChart-rowSpacing" ng-bind-html="$ctrl.medianValueContent" ng-mouseover="$ctrl.showPopOver($event, $ctrl.medianValuePopOverContent)" ng-mouseleave="$ctrl.hidePopOver()"></div>\n\t\t<div class="value-range-textChart-row value-range-textChart-rowSpacing" ng-bind-html="$ctrl.avgValueContent" ng-mouseover="$ctrl.showPopOver($event, $ctrl.avgValuePopOverContent)" ng-mouseleave="$ctrl.hidePopOver()"></div>\n\t\t<div class="value-range-textChart-row value-range-textChart-rowSpacing" ng-bind-html="$ctrl.maxValueContent" ng-mouseover="$ctrl.showPopOver($event, $ctrl.maxValuePopOverContent)" ng-mouseleave="$ctrl.hidePopOver()"></div>\n\t</div>\n\t<div ng-switch-when="rangeLine">\n\t\t<svg class="value-range-container value-range-spacing" tid="value-range-container" ng-attr-height="{{$ctrl.height}}" ng-attr-width="{{$ctrl.width}}">\n\t\t\t<g ng-attr-font-size="{{$ctrl.fontSize}}" text-anchor="middle" ng-attr-font-family="{{$ctrl.fontFamily}}" style="fill:#666">\n\t\t\t\t<line tid="unbroken-chart-line" x1="10" y1="50" ng-attr-x2="{{$ctrl.axisBreakpoint}}" y2="50" stroke-width="3.5" stroke="#ccc"/>\n\t\t\t\t<line ng-if="$ctrl.showTruncatedChart" ng-attr-x1="{{$ctrl.axisRestartpoint}}" y1="50" ng-attr-x2="{{$ctrl.width - $ctrl.svgPadding}}" y2="50" stroke-width="3.5" stroke="#ccc"/>\n\t\t\t\t<line ng-if="$ctrl.showTruncatedChart" ng-attr-x1="{{$ctrl.axisBreakpoint - 10}}" y1="60" ng-attr-x2="{{$ctrl.axisBreakpoint + 10}}" y2="40" stroke-width="2" stroke="#ccc"/>\n\t\t\t\t<line ng-if="$ctrl.showTruncatedChart" ng-attr-x1="{{$ctrl.axisRestartpoint - 10}}" y1="60" ng-attr-x2="{{$ctrl.axisRestartpoint + 10}}" y2="40" stroke-width="2" stroke="#ccc"/>\n\n\t\t\t\t<g class="min-value" tid="value-ranges-min-value">\n\t\t\t\t\t<text class="value-range-textNode" tid="min-label" dy="-2" ng-attr-x="{{$ctrl.minValuePos}}" text-anchor="{{$ctrl.minElLabelTextAnchor}}" ng-attr-y="{{$ctrl.endPointLabelYPos}}">{{$ctrl.minElLabel}}</text>\n\t\t\t\t\t<text class="value-range-textNode" tid="min-value-text" ng-mouseover="$ctrl.showPopOver($event, $ctrl.minValuePopOverContent)" ng-mouseleave="$ctrl.hidePopOver()" ng-attr-x="{{$ctrl.minValueTextPos}}" dy="-2" ng-attr-y="{{$ctrl.endPointValueYPos}}">\n\t\t\t\t\t\t{{$ctrl.formattedMinVal}}\n\t\t\t\t\t</text>\n\t\t\t\t</g>\n\n\t\t\t\t<g class="avg-value" tid="value-ranges-avg-value">\n\t\t\t\t\t<line ng-if="!$ctrl.medianAvgLabelSpaceAvailable" ng-attr-x1="{{$ctrl.avgPos}}" y1="9.5" ng-attr-x2="{{$ctrl.avgPos}}" y2="17" stroke-width="1.2" stroke="#aaa"/>\n\t\t\t\t\t<text class="value-range-textNode avg-label" dy="7.5" ng-attr-x="{{$ctrl.avgPos}}" y="1">{{$ctrl.avgElLabel}}</text>\n\t\t\t\t\t<line ng-if="$ctrl.medianAvgLabelSpaceAvailable && $ctrl.medianAvgValueSpaceAvailable" ng-attr-x1="{{$ctrl.avgPos}}" y1="15" ng-attr-x2="{{$ctrl.avgPos}}" y2="85" stroke-width="1.2" stroke="#aaa"/>\n\t\t\t\t\t<line ng-if="!$ctrl.medianAvgLabelSpaceAvailable" ng-attr-x1="{{$ctrl.avgPos}}" y1="30" ng-attr-x2="{{$ctrl.avgPos}}" ng-attr-y2="{{$ctrl.avgValueGapPos}}" stroke-width="1.2" stroke="#aaa"/>\n\t\t\t\t\t<line ng-if="!$ctrl.medianAvgValueSpaceAvailable" ng-attr-x1="{{$ctrl.avgPos}}" y1="82" ng-attr-x2="{{$ctrl.avgPos}}" y2="88" stroke-width="1.2" stroke="#aaa"/>\n\t\t\t\t\t<text class="value-range-textNode avg-value-text" dy="15" ng-attr-x="{{$ctrl.avgValTextPos}}" y="84" ng-mouseover="$ctrl.showPopOver($event, $ctrl.avgValuePopOverContent)" ng-mouseleave="$ctrl.hidePopOver()">{{$ctrl.formattedAvgVal}}</text>\n\t\t\t\t</g>\n\n\t\t\t\t<g class="median-value" tid="value-ranges-median-value">\n\t\t\t\t\t<text ng-if="$ctrl.isMedianDistinct" class="value-range-textNode median-label" dy="-5" ng-attr-x="{{$ctrl.medianPos}}" y="32" q-translation="Visualization.ValueRanges.Median"></text>\n\t\t\t\t\t<line ng-if="!$ctrl.medianLabelSpaceAvailable" ng-attr-x1="{{$ctrl.medianPos}}" y1="28" ng-attr-x2="{{$ctrl.medianPos}}" y2="32" stroke-width="1.2" stroke="#aaa"/>\n\t\t\t\t\t<line ng-if="!$ctrl.medianValueSpaceAvailable" ng-attr-x1="{{$ctrl.medianPos}}" y1="57.5" ng-attr-x2="{{$ctrl.medianPos}}" y2="59.5" stroke-width="1.2" stroke="#aaa"/>\n\t\t\t\t\t<line ng-if="$ctrl.isMedianDistinct" ng-attr-x1="{{$ctrl.medianPos}}" ng-attr-y1="{{$ctrl.medianValueGap}}" ng-attr-x2="{{$ctrl.medianPos}}" y2="72" stroke-width="1.2" stroke="#aaa"/>\n\t\t\t\t\t<text ng-if="$ctrl.isMedianDistinct" class="value-range-textNode median-value-text" dy="5" ng-attr-x="{{$ctrl.medianValTextPos}}" y="77" ng-mouseover="$ctrl.showPopOver($event, $ctrl.medianValuePopOverContent)" ng-mouseleave="$ctrl.hidePopOver()">{{$ctrl.formattedMedianVal}}</text>\n\t\t\t\t</g>\n\n\t\t\t\t<g class="max-value" tid="value-ranges-max-value">\n\t\t\t\t\t<text dy="-2" tid="max-label" class="value-range-textNode" text-anchor="{{$ctrl.maxElLabelTextAnchor}}" ng-attr-x="{{$ctrl.maxValuePos}}" ng-attr-y="{{$ctrl.endPointLabelYPos}}">{{$ctrl.maxElLabel}}</text>\n\t\t\t\t\t<text dy="-2" tid="max-value-text" class="value-range-textNode" ng-attr-x="{{$ctrl.maxValueTextPos}}" ng-attr-y="{{$ctrl.endPointValueYPos}}" ng-mouseover="$ctrl.showPopOver($event, $ctrl.maxValuePopOverContent)" ng-mouseleave="$ctrl.hidePopOver()">{{$ctrl.formattedMaxVal}}</text>\n\t\t\t\t</g>\n\n\t\t\t\t<g class="circles">\n\t\t\t\t\t<circle tid="min-circle" ng-attr-cx="{{$ctrl.minValuePos}}" cy="50" ng-attr-r="{{$ctrl.dotRadius}}" class="vis-background-{{$ctrl.minColour}}" ng-mouseover="$ctrl.showPopOver($event, $ctrl.minValuePopOverContent)" ng-mouseleave="$ctrl.hidePopOver()"/>\n\t\t\t\t\t<circle ng-if="$ctrl.isMedianDistinct" ng-attr-cx="{{$ctrl.medianPos}}" cy="50" ng-attr-r="{{$ctrl.dotRadius}}" ng-class="{\'value-range-overlap\': !$ctrl.medianAvgCircleSpaceAvailable}" fill="#FFFFFF" class="vis-background-circle" ng-mouseover="$ctrl.showPopOver($event, $ctrl.medianValuePopOverContent)" ng-mouseleave="$ctrl.hidePopOver()"/>\n\t\t\t\t\t<circle ng-attr-cx="{{$ctrl.avgPos}}" cy="50" ng-attr-r="{{$ctrl.dotRadius}}" ng-class="{\'value-range-overlap\': !$ctrl.medianAvgCircleSpaceAvailable}" fill="#FFFFFF" class="vis-background-circle" ng-mouseover="$ctrl.showPopOver($event, $ctrl.avgValuePopOverContent)" ng-mouseleave="$ctrl.hidePopOver()"/>\n\t\t\t\t\t<circle tid="median-circle" ng-if="$ctrl.isMedianDistinct" ng-attr-cx="{{$ctrl.medianPos}}" cy="50" ng-attr-r="{{$ctrl.dotRadius}}" ng-class="{\'value-range-overlap\': !$ctrl.medianAvgCircleSpaceAvailable}" class="vis-background-{{$ctrl.medianColour}}" ng-mouseover="$ctrl.showPopOver($event, $ctrl.medianValuePopOverContent)" ng-mouseleave="$ctrl.hidePopOver()"/>\n\t\t\t\t\t<circle tid="avg-overlap-circle" ng-attr-cx="{{$ctrl.avgPos}}" cy="50" ng-attr-r="{{$ctrl.dotRadius}}" ng-class="{\'value-range-overlap\': !$ctrl.medianAvgCircleSpaceAvailable}" class="vis-background-{{$ctrl.avgColour}}" ng-mouseover="$ctrl.showPopOver($event, $ctrl.avgValuePopOverContent)" ng-mouseleave="$ctrl.hidePopOver()"/>\n\t\t\t\t\t<circle tid="max-circle" ng-attr-cx="{{$ctrl.maxValuePos}}" cy="50" ng-attr-r="{{$ctrl.dotRadius}}" class="vis-background-{{$ctrl.maxColour}}" ng-mouseover="$ctrl.showPopOver($event, $ctrl.maxValuePopOverContent)" ng-mouseleave="$ctrl.hidePopOver()"/>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</svg>\n\t</div>\n</div>'},2504:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2505)],a=function(t,e){function i(i){var n={template:e,controller:["$scope",function(t){t.content=i.content}],dock:"bottom",x:i.x,y:i.y};return t.getService("luiPopover").showToPosition(n)}return{show:i}}.apply(e,n),void 0!==a&&(t.exports=a))},2505:function(t,e){t.exports='<lui-popover x-arrow="arrow">\n\t<lui-popover-body class="lui-nopad">\n\t\t<div>{{content}}</div>\n\t</lui-popover-body>\n</lui-popover>'},2506:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(11),i(54),i(91),i(2507),i(10),i(105),i(163)],a=function(t,e,i,n,a,o,l,s){var r={restrict:"E",replace:true,template:a,scope:{context:"=",summary:"="},controller:["$scope","$window","$timeout","$element",function(t,a,r,c){o.element(a).on("click",f);t.classifications=m();t.selectClassification=T;t.showClassificationDropDown=v;t.showHelp=u;t.selectedClassification=i.find(t.classifications,function(t){return t.isDefault});t.$on(l.Events.EditorDetailsPane.CardsResize,function(){y()});t.$on("$destroy",function(){o.element(a).off("click",f)});var d={};d[l.Visualization.Size.Auto]=0;d[l.Visualization.Size.Small]=1;d[l.Visualization.Size.Medium]=2;d[l.Visualization.Size.Large]=3;function u(){var t=s.path+"STU_Summary";window.open(t,"_blank")}function p(){T(t.selectedClassification)}function f(t){var e=t.target.className;e&&"string"===typeof e&&(-1!==e.indexOf("summary-classification-drop-down-btn")||-1!==e.indexOf("summary-classification-drop-down-icon"))||g()}function v(){t.classifications.length>1&&(t.classificationDropDownIsVisible=true)}function g(){t.$evalAsync(t.classificationDropDownIsVisible=false)}function m(){var e=t.summary.classifications.map(function(t){var e=n.get("FieldSummary.Header."+t.name);var a={buttonLabel:"("+e+")",dropDownLabel:t.isDefault?e+" ("+n.get("FieldSummary.Classification.recommended")+")":e};return i.extend(t,a)});return b(e)}function b(t){return i.sortBy(t,function(t){var e={dimension:1,measure:2,temporal:3};return e[t.name]})}function h(e){e=i.map(e,function(t){t.tid=t.chartType+"-"+t.analysis.analysis;return t});var n=e.filter(function(t){return 3===t.sizeCategory.width});var a=e.filter(function(t){return 2===t.sizeCategory.width});var o=e.filter(function(t){return 1===t.sizeCategory.width});t.rows=[];while(n.length>0){var s=n.shift();t.rows.push({maxHeightCategory:s.sizeCategory.height,rowData:[s]})}while(a.length>0){var r=a.shift();var c=r.chartType===l.Visualization.ChartTypes.Custom&&r.analysis.analysis===l.Visualization.CustomVisualizations.RangeFacts;if(c&&1!==o.length){var u=i.clone(r);u.sizeCategory={height:r.sizeCategory.height,width:3};if(0===o.length)t.rows.push({maxHeightCategory:u.sizeCategory.height,rowData:[u]});else{u.sizeCategory.width=1;t.rows.push({maxHeightCategory:l.Visualization.Size.Large,rowData:[u,o.shift(),o.shift()]})}}else if(o.length>0){var p=o.shift();var f=i.max([r,p],function(t){return d[t.sizeCategory.height]}).sizeCategory.height;t.rows.push({maxHeightCategory:f,rowData:[r,p]})}else t.rows.push({maxHeightCategory:r.sizeCategory.height,rowData:[r,{isFiller:true,sizeCategory:{width:1,height:l.Visualization.Size.Auto}}]})}while(o.length>0){var v=[];for(var g=0;g<3;g++){if(0===o.length)break;v.push(o.shift())}v.length<3&&v.push({isFiller:true,sizeCategory:{width:3-v.length,height:l.Visualization.Size.Auto}});var m=i.max(v,function(t){return d[t.sizeCategory.height]}).sizeCategory.height;t.rows.push({maxHeightCategory:m,rowData:v})}y()}function y(){r(function(){var n=c.find(".charts");var a=c.find(".chart-row");var o=i.map(c.find(".chartRow-maxHeight-auto"),function(t){return e(t)});var s=i.map(c.find(".chartRow-maxHeight-small"),function(t){return e(t)});var d=i.map(c.find(".chartRow-maxHeight-medium"),function(t){return e(t)});var u=i.map(c.find(".chartRow-maxHeight-large"),function(t){return e(t)});var p=n.height()-5*a.length;var f=i.map(o,function(t){return t.height()});var v=i.reduce(f,function(t,e){return t+e},0);var g=p-v;var m=s.length+2*d.length+3*u.length;var b=g/m;s.forEach(function(t){t.height(b)});d.forEach(function(t){t.height(2*b)});u.forEach(function(t){t.height(3*b)});m>0&&o.forEach(function(t,e){t.height(f[e])});r(function(){t.$broadcast(l.Events.EditorDetailsPane.ResizeChart)})})}function T(e){var n=i.find(t.classifications,function(t){return t.name===e.name});var a=n.summaryVisualizations.map(function(t){return t.chart});h(a);t.$emit("classificationChange",n.name);t.selectedClassification=n;g()}p()}]};t.directive("qvFieldSummary",function(){return r})}.apply(e,n),void 0!==a&&(t.exports=a))},2507:function(t,e){t.exports='<div class="field-summary-card">\n\t<div class="title">\n\t\t<div class="title-group">\n\t\t\t<div class="field">{{context.field.name}}</div>\n\t\t\t<div class="title-text" q-translation="FieldSummary.Title.Summary"></div>\n\n\t\t\t<div class="summary-classification">\n\t\t\t\t<button class="lui-button summary-classification-drop-down-btn" ng-class="{\'summary-classification-drop-down-btn-cursor-default\': !(classifications.length > 1) }"\n\t\t\t\t\t\tng-click="showClassificationDropDown()">\n\t\t\t\t\t<span class="lui-button__text summary-classification-drop-down-btn-text"> {{selectedClassification.buttonLabel}} </span>\n\t\t\t\t\t<span class="lui-button__icon  lui-icon lui-icon--triangle-bottom summary-classification-drop-down-icon" ng-if="classifications.length > 1"></span>\n\t\t\t\t</button>\n\n\t\t\t\t<ul class="lui-list summary-classification-drop-down-content" ng-show="classificationDropDownIsVisible">\n\t\t\t\t\t<li ng-repeat="classification in classifications" class="lui-list__item"\n\t\t\t\t\tng-click="selectClassification(classification)">\n\t\t\t\t\t\t<span class="lui-list__text">{{classification.dropDownLabel}}</span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<button class="lui-fade-button help-button" ng-click="showHelp()">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--help"></span>\n\t\t</button>\n\t</div>\n\t<div class="charts">\n\t\t<div class="chart-row chartRow-maxHeight-{{row.maxHeightCategory}}" ng-repeat="row in rows">\n\t\t\t<div class="chart chart-sizeWidth-{{vis.sizeCategory.width}}" ng-repeat="vis in row.rowData" tid="{{vis.tid}}">\n\t\t\t\t<data-ds-visualization\n\t\t\t\t\t\tng-if="!vis.isFiller"\n\t\t\t\t\t\tdata-vis-definition="vis"\n\t\t\t\t\t\tdata-field-id="context.field.id"\n\t\t\t\t\t\tdata-target-table-model="context.table" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},2508:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2509),i(163),i(105),i(2510),i(2518),i(2520),i(2522),i(2524),i(2530)],a=function(t,e,i,n){var a={restrict:"E",replace:true,template:e,scope:{context:"=",actions:"="},controller:["$scope",function(t){t.showHelp=a;t.mappingAction=n.Visualization.Actions.MapValues;t.nullMappingAction=n.Visualization.Actions.MapNulls;t.orderingAction=n.Visualization.Actions.Ordinal;t.splitAction=n.Visualization.Actions.SplitField;t.bucketingAction=n.Visualization.Actions.Bucketing;var e={};e[t.mappingAction]="MappingAction.Label.MappingUnrecommended";e[t.nullMappingAction]="NullMappingAction.Label.NullMappingUnrecommended";e[t.orderingAction]="OrderingAction.Label.OrderingUnrecommended";e[t.splitAction]="SplitValuesAction.Label.SplitUnrecommended";e[t.bucketingAction]="BucketAction.Label.BucketingUnrecommended";function a(){var e,a;var o=t.selectedAction.action.action;a=o===n.Visualization.Actions.Bucketing?"STU_Bucket":o===n.Visualization.Actions.MapValues?"STU_mapValues":o===n.Visualization.Actions.SplitField?"STU_split":o===n.Visualization.Actions.MapNulls?"STU_mapNulls":o===n.Visualization.Actions.Ordinal?"STU_Order":"";e=i.path+a;window.open(e,"_blank")}t.actionsList=t.actions.map(function(e){var i=e.action.action;return{testId:i+"-tab",label:"FieldAction.Header."+i,isSelected:function i(){return t.selectedAction===e},isDisabled:function i(){return t.selectedAction.shouldDisableOtherTabs&&t.selectedAction!==e},select:function t(){o(e)},isRecommended:function t(){return e.action.isDefault}}});function o(i){if(t.selectedAction!==i){t.selectedAction=i;t.placeholderMessage=e[i.action.action]}}o(t.actions[0])}]};t.directive("qvFieldAction",function(){return a})}.apply(e,n),void 0!==a&&(t.exports=a))},2509:function(t,e){t.exports='<div class="field-action-card">\n\t<div class="header">\n\t\t<ul class="lui-tabset">\n\t\t\t<li class="lui-tab" tid={{action.testId}} ng-repeat="action in actionsList" ng-class="{\'lui-active\': action.isSelected(), \'lui-disabled\': action.isDisabled(), \'placeholder-tab-disabled\': !action.isRecommended()}"\n\t\t\t ng-click="action.select()">\n\t\t\t\t<span class="lui-tab__text action-tab-label" q-translation="{{action.label}}"></span>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t<button class="lui-fade-button action-help-button" ng-click="showHelp()">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--help"></span>\n\t\t</button>\n\t</div>\n\t<div class="action-contents" ng-if="selectedAction">\n\t\t<div class="action-content" ng-if="selectedAction.action.action === bucketingAction && selectedAction.action.isDefault">\n\t\t\t<qv-bucketing-action action-definition="selectedAction" tid="action-tab-bucket" context="context"></qv-bucketing-action>\n\t\t</div>\n\t\t<div class="action-content" ng-if="selectedAction.action.action === orderingAction && selectedAction.action.isDefault">\n\t\t\t<qv-ordering-action action-definition="selectedAction" tid="action-tab-ordinal" context="context"></qv-ordering-action>\n\t\t</div>\n\t\t<div class="action-content" ng-if="selectedAction.action.action === splitAction && selectedAction.action.isDefault">\n\t\t\t<qv-split-action class="action-component" action-definition="selectedAction" tid="action-tab-split-field" context="context"></qv-split-action>\n\t\t</div>\n\t\t<div class="action-content" ng-if="selectedAction.action.action === mappingAction && selectedAction.action.isDefault">\n\t\t\t<qv-mapping-action class="action-component" action-definition="selectedAction" tid="action-tab-map-values" context="context"></qv-mapping-action>\n\t\t</div>\n\t\t<div class="action-content" ng-if="selectedAction.action.action === nullMappingAction && selectedAction.action.isDefault">\n\t\t\t<qv-null-mapping-action class="action-component" action-definition="selectedAction" tid="action-tab-map-nulls" context="context"></qv-null-mapping-action>\n\t\t</div>\n\t\t<div class="action-content" ng-if="selectedAction.action.action === mixedValues && selectedAction.action.isDefault">\n\t\t\t<qv-mixed-values-action class="action-component" action-definition="selectedAction" tid="action-tab-mixed-type-values" context="context"></qv-mixed-values-action>\n\t\t</div>\n\t\t<div class="action-content" ng-if="!selectedAction.action.isDefault">\n\t\t\t<qv-placeholder-action class="action-component" action-definition="selectedAction" placeholder-message="placeholderMessage" tid="action-tab-placeholder" context="context"></qv-placeholder-action>\n\t\t</div>\n\t</div>\n</div>\n'},2510:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(91),i(2511),i(105),i(103),i(263),i(2512),i(1684)],a=function(t,e,i,n,a){var o={restrict:"E",replace:true,template:i,scope:{context:"=",actionDefinition:"="},controller:["$scope","qvDataManagerDataService","qvDataManagerBucketNameGenerator","qvDataManagerThrottleService",function(t,i,o,l){t.bucketEditorDefinition=t.actionDefinition.charts[1];t.isDirty=false;t.isValid=true;t.actionDefinition["shouldDisableOtherTabs"]=false;var s=t.bucketEditorDefinition.analysis;var r=t.context.table.getBucketingAppliesTo(t.context.field.id);var c=r?r.name:t.context.field.name;t.isEdit=!!r;t.subTitleText=t.isEdit?e.get("BucketAction.Label.SubTitle.EditMode"):e.get("BucketAction.Label.SubTitle");t.createBucketText=!t.isDirty&&t.isEdit?e.get("BucketAction.Button.UpdateBuckets"):e.get("BucketAction.Button.CreateBuckets");var d=void 0;var u=l.throttleAsyncFunction(y);g();var p=t.actionDefinition.charts[0];var f;if(t.isEdit)h(p).then(function(e){f=e.options;t.barChartDefinition=e});else{v(p);t.barChartDefinition=p;f=t.barChartDefinition.options}function v(t){if(t&&t.options&&t.options.qHyperCubeDef){t.options.qHyperCubeDef.qDimensions[0].qDef.qFieldLabels[0]=e.get("Visualization.BucketingEditor.DistributionChart.Dimension");t.options.qHyperCubeDef.qMeasures[0].qDef.qLabel=e.get("Visualization.BucketingEditor.DistributionChart.Measure")}}function g(e){var i=t.bucketEditorDefinition.analysis.dims[0].bucketInfo||{buckets:[],method:{}};var n=!t.isEdit&&!i.method.userDefinedIntervals||e;t.buckets=i.buckets.map(function(t){return t.range?{name:t.name,min:t.range.start,max:t.range.end}:{name:t.name,min:t.start,max:t.end}});if(t.buckets.length>1){t.buckets[0].min=void 0;t.buckets[t.buckets.length-1].max=void 0}n&&m();i.method.equalDistribution=false;t.metaData=i.method}function m(){t.buckets.forEach(function(t){t.name=o.generateDefaultName(t)})}function b(e){var i,n;var a={custom:true,buckets:e.map(function(t){i=void 0===i?t.min:Math.min(i,t.min);n=void 0===n?t.max:Math.max(n,t.max);return{name:t.name,start:t.min,end:t.max}})};var o=t.metaData;a.bucketMethod=o;a.method=o;return a}function h(e){var n={field:c,bucketInfo:b(t.buckets)};return i.adaptVisualization(t.context.table.data.name,e.chartType,e.analysis.analysis,[n]).then(function(t){var i=t[0];e.options=i.options;v(e);return i})}function y(){var e={field:c,bucketInfo:b(t.buckets)};return i.adaptVisualization(t.context.table.data.name,t.barChartDefinition.chartType,t.barChartDefinition.analysis.analysis,[e]).then(function(e){var i=e[0];t.barChartDefinition.options=i.options;v(t.barChartDefinition)})}function T(e){var n={custom:true,buckets:[]};for(var a=0;a<e;a++)n.buckets.push(void 0);var o=t.metaData;o.equalDistribution=true;n.bucketMethod=o;n.method=o;var l={field:c,bucketInfo:n};return i.adaptVisualization(t.context.table.data.name,t.barChartDefinition.chartType,t.barChartDefinition.analysis.analysis,[l]).then(function(t){return{numberOfBucketsRefreshed:e,result:t}})}function M(e){if(void 0!==d)d=e;else{w();d=e;T(e).then(function(e){var i=d;d=void 0;if(i!==e.numberOfBucketsRefreshed)M(i);else{var n=e.result[0];t.barChartDefinition.options=n.options;t.bucketEditorDefinition.analysis=n.analysis;v(t.barChartDefinition);g(true)}},function(){d=void 0}).finally(function(){S()})}}function w(){t.refreshing=true}function S(){t.refreshing=false}t.$on("bucketingEditorChange",function(e){e.stopPropagation();t.isDirty=true;t.actionDefinition.shouldDisableOtherTabs=true;u()});t.$on("bucketingEditorRefreshBuckets",function(e,i){e.stopPropagation();t.isDirty=true;t.actionDefinition.shouldDisableOtherTabs=true;M(i)});t.commitBuckets=function(){var e=b(t.buckets);t.isDirty=false;t.actionDefinition.shouldDisableOtherTabs=false;t.$emit(n.Events.EditorDetailsPane.BucketingChange,e);t.$emit(n.Events.EditorDetailsPane.FieldCreated,e.name);a.trackEvent(a.customEvents.STU_BUCKETING_CLICK)};t.resetBuckets=function(){t.$broadcast(n.Events.EditorDetailsPane.BucketingReset);t.barChartDefinition.options=f;t.bucketEditorDefinition.analysis=s;g(true);t.isDirty=false;t.actionDefinition.shouldDisableOtherTabs=false}}]};t.directive("qvBucketingAction",function(){return o})}.apply(e,n),void 0!==a&&(t.exports=a))},2511:function(t,e){t.exports='<div class="bucketing-action">\n\t<div class="action-content-header">\n\t\t<div>{{subTitleText}}</div>\n\t</div>\n\t<div class="components">\n\t\t<qv-spinner class="spinner" show="refreshing" show-for-at-least="500" center-in-parent="true"></qv-spinner>\n\t\t<div class="component bucketing-editor">\n\t\t\t<ds-bucketing-editor is-valid="isValid" buckets="buckets" meta-data="metaData">\n\t\t\t\t<data-ds-visualization\n\t\t\t\t\t\tdata-vis-definition="barChartDefinition"\n\t\t\t\t\t\tdata-field-id="context.field.id"\n\t\t\t\t\t\tdata-target-table-model="context.table"/>\n\t\t\t</ds-bucketing-editor>\n\t\t</div>\n\t</div>\n\t<div class="action-content-footer">\n\t\t<button class="lui-button reset-button" tid="reset-buckets" ng-class="{\'lui-disabled\': !isDirty}" ng-click="resetBuckets()">\n\t\t\t<span class="lui-button__text" q-translation="BucketAction.Button.Reset"></span>\n\t\t</button>\n\t\t<button class="lui-button commit-button" tid="create-update-buckets" ng-class="{\'lui-disabled\': !isValid || (!isDirty && isEdit)}" ng-click="commitBuckets()">\n\t\t\t<span class="lui-button__text">{{createBucketText}}</span>\n\t\t</button>\n\t</div>\n</div>\n'},2512:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(90),i(99),i(2513),i(2514),i(105),i(2516),i(2517)],a=function(t,e,i,n,a,o){t.directive("dsBucketingEditor",function(){return{scope:{isValid:"=",buckets:"=",metaData:"="},restrict:"E",replace:true,transclude:true,template:n,controller:["$scope","$element","$timeout","qvDataManagerBucketNameGenerator","qvBucketEditorService",function(t,n,l,s,r){t.debug=false;var c=n.find("#buckets-id");var d=n.find(".bucket-count");var u=c[0];var p=u.children;var f=20;var v=2;var g=20;t.focusIndex=-1;t.selectedIndex=-1;t.count=t.buckets.length;t.thumb1={isActive:false};t.thumb2={isActive:false};t.$watch("count",function(){t.isValid=b()});t.blurCount=function(){b()||(t.count=t.buckets.length)};e.isEdge()&&d.on("keyup",m);function m(){t.count=Number(d.val());b()}function b(){if(h(t.count)){t.count!==t.buckets.length&&(t.popupInput&&t.popupInput.close?t.popupInput.close().then(function(){y()}):y());return true}return false}function h(t){return!(Number.isNaN(+t)||t<v||t>g)}function y(){var e=t.count-t.buckets.length;if(0!==e)if(t.metaData.userDefinedIntervals){e>0?T(e):e<0&&M(-e);t.$emit("bucketingEditorChange")}else t.$emit("bucketingEditorRefreshBuckets",t.count)}t.$watch("buckets",function(){t.count=t.buckets.length;C()});function T(e){for(var i=0;i<e;i++){var n=t.buckets[t.buckets.length-1];var a=t.buckets[t.buckets.length-2];var o=a.max-(Number.isNaN(+a.min)?t.metaData.min:a.min);n.max=n.min+Math.abs(o);var l={min:n.max,max:void 0};l.name=s.generateDefaultName(l);t.buckets.push(l)}e>0&&C()}function M(e){for(var i=0;i<e;i++){t.buckets.pop();var n=t.buckets[t.buckets.length-1];n.max=void 0}e>0&&C()}function w(t,e){var i=t.min+e;var n=t.max+e;Number.isNaN(+i)&&(i=void 0);Number.isNaN(+n)&&(n=void 0);S(t,i,n)}function S(t,e,i){var n=s.generateDefaultName(t);t.min=e;t.max=i;t.name===n&&(t.name=s.generateDefaultName(t))}function D(){t.focusIndex=-1;t.selectedIndex=-1;t.selectedBucket=void 0;t.popupInput.popup=void 0}function x(e){if(t.buckets.length<=v)return;var i=t.buckets[e];t.buckets.splice(e,1);t.count=t.buckets.length;if(0===e){var n=t.buckets[0];S(n,void 0,n.max)}else if(e===t.buckets.length){var a=t.buckets[t.buckets.length-1];S(a,a.min,void 0)}else{if(!(e>0&&e<t.buckets.length))return;var o=i.max-i.min;for(var l=e;l<t.buckets.length;l++)w(t.buckets[l],-o)}C();t.$emit("bucketingEditorChange")}t.getParentWidth=function(){return c.width()};t.$watch("getParentWidth()",function(t,e){t!==e&&C()});function C(){var e=c.width();t.buckets=r.resizeBuckets(t.buckets,t.metaData,e)}function E(e,i,n,a){var o=t.buckets;if(e<0||e>o.length)return;var l=o[e];if(e>0&&e<o.count-1&&(!n||!a))return;if(a<=n)return;var s=l.name!==i;l.name=i;if(l.min!==n||l.max!==a){s=true;t.metaData.userDefinedIntervals=true;var r=n-l.min;var c=a-l.max;Number.isNaN(+r)&&(r=0);Number.isNaN(+c)&&(c=0);S(l,n,a);var d;for(d=0;d<o.length;d++){d<e&&w(o[d],r);d>e&&w(o[d],c)}}if(s){C();t.$emit("bucketingEditorChange")}}t.closePopup=function(){t.popupInput&&t.popupInput.close&&t.popupInput.close()};t.deactivateThumbs=function(){t.thumb1&&(t.thumb1.isActive=false);t.thumb2&&(t.thumb2.isActive=false)};t.activateThumb=function(e){t.selectBucket(e-1);t.activateThumb2()};t.activateThumb1=function(){t.thumb2.isActive=false;t.thumb1.isActive=true;var e=t.thumb1;var i=p[0];e.minLeft=i.offsetLeft;e.maxLeft=t.thumb2.left};t.activateThumb2=function(){t.thumb1.isActive=false;t.thumb2.isActive=true;var e=t.thumb2;var i=p[p.length-1];e.minLeft=t.thumb1.left;e.maxLeft=i.offsetLeft+i.offsetWidth};t.moveThumb=function(e){e.stopPropagation();if(!t.thumb1.isActive&&!t.thumb2.isActive)return;var i=e.touches?e.touches[0].clientX:e.clientX;var n=i-c.offset().left+f;var a=t.thumb1.isActive?t.thumb1:t.thumb2;if(n>=a.minLeft&&n<=a.maxLeft){var o=n-a.left;a.left=n;A(a,o)}};function A(e,i){var n=t.thumb1;var a=t.thumb2;var o=n.left;var l=a.left;t.editedBucket.left=o;t.editedBucket.width=l-o;e.rawValue=e.rawValue+i*e.sliderRatio;e.value=Math.round(e.rawValue);t.thumb1.isActive?t.popupInput.bucket.min=e.value:t.popupInput.bucket.max=e.value}t.selectBucket=function(e){if(t.popupInput&&t.popupInput.popup){t.popupInput.popup.close();t.popupInput.popup=null;return}t.selectedIndex=e;var i=t.buckets[e];t.selectedBucket=i;var n=p[e];var o=p[0];var s=p[p.length-1];var r=i.left;var c=i.width;t.editedBucket={left:r,width:c};var d=(i.max-i.min)/i.width;Number.isNaN(+d)&&(d=1);t.thumb1={left:r,isActive:false,defaultLeft:r,defaultValue:i.min,value:i.min,rawValue:i.min,sliderRatio:d};t.thumb2={left:r+c,isActive:false,defaultLeft:r+c,defaultValue:i.max,value:i.max,rawValue:i.max,sliderRatio:d};t.thumb1.minLeft=o.offsetLeft;t.thumb1.maxLeft=t.thumb2.left;t.thumb2.minLeft=t.thumb1.left;t.thumb2.maxLeft=s.offsetLeft+s.offsetWidth;t.popupInput={alignTo:n,bucketIndex:e,bucket:{name:i.name,min:i.min,max:i.max},maxRange:t.metaData.max,minRange:t.metaData.min,isRemoveDisabled:t.buckets.length<=2,isPrevDisabled:0===e,isNextDisabled:e===t.buckets.length-1};t.popupInput.remove=function(){x(e);t.selectedIndex=-1;t.popupInput.popup.close()};t.popupInput.prev=function(){t.popupInput.close().then(function(){l(function(){t.selectBucket(e-1)})})};t.popupInput.next=function(){t.popupInput.close().then(function(){l(function(){t.selectBucket(e+1)})})};var u=a.show(t.popupInput);t.popupInput.popup=u;var f=t.popupInput.popup.closed.then(function(){if(t.resetInProgress){t.resetInProgress=false;D();return}if(t.selectedIndex>=0&&t.popupInput.bucketIsValid){var e=t.popupInput.bucket;var i=parseFloat(t.popupInput.bucket.min);var n=parseFloat(t.popupInput.bucket.max);Number.isNaN(+i)&&(i=void 0);Number.isNaN(+n)&&(n=void 0);E(t.selectedIndex,e.name,i,n)}t.popupInput.close&&(t.popupInput.close=void 0);D()});t.popupInput.close=function(){t.popupInput.popup=void 0;t.popupInput.close=void 0;u.close();return f}};t.bucketFocus=function(e){t.focusIndex=e};t.bucketBlur=function(){t.focusIndex=-1};var k=!i.treatAsDesktop();if(k){var I=n.find(".buckets-container")[0];I.addEventListener("touchmove",t.moveThumb,false);I.addEventListener("touchend",t.deactivateThumbs,false);var F=n.find(".thumb1")[0];F.addEventListener("touchstart",t.activateThumb1,false);var O=n.find(".thumb2")[0];O.addEventListener("touchstart",t.activateThumb2,false)}t.$on("$destroy",function(){if(k){var i=n.find(".buckets-container")[0];i.removeEventListener("touchmove",t.moveThumb,false);i.removeEventListener("touchend",t.deactivateThumbs,false);var a=n.find(".thumb1")[0];a.removeEventListener("touchstart",t.activateThumb1,false);var o=n.find(".thumb2")[0];o.removeEventListener("touchstart",t.activateThumb2,false)}e.isEdge()&&d.off("keyup",m)});t.$on(o.Events.EditorDetailsPane.BucketingReset,function(){if(t.popupInput.close){t.popupInput.close();t.resetInProgress=true}})}]}})}.apply(e,n),void 0!==a&&(t.exports=a))},2513:function(t,e){t.exports='<div class="ds-bucketing-editor">\n\t<div class="spinner-container">\n\t\t<input type="number" class="lui-input spinner-input bucket-count" ng-model="count" ng-blur="blurCount()" ng-class="{\'invalid-input\': !isValid}" ng-model-options="{ debounce: 500 }"/>\n\t\t<div class="spinner-label" q-translation="BucketAction.Label.Buckets"></div>\n\t</div>\n\n\t<div ng-if="!debug" class="chart-container" ng-transclude></div>\n\n\t<div ng-if="debug" class="chart-container">\n\t\t<div>User defined intervals? {{!!metaData.userDefinedIntervals}}</div>\n\t\t<ol class="debug-buckets">\n\t\t\t<li ng-repeat="bucket in buckets"\n\t\t\t\tclass="debug-bucket"\n\t\t\t\tng-class="{\'selected\': $index===selectedIndex}"\n\t\t\t\tng-class-odd="\'odd\'"\n\t\t\t\tng-class-even="\'even\'">\n\t\t\t\t{{bucket.name}}: {{bucket.min}} - {{bucket.max}} {{$index===selectedIndex? \'(selected)\':\'\'}}\n\t\t\t</li>\n\t\t</ol>\n\t</div>\n\n\t<div class="buckets-container"\n\t\t qva-outside-ignore-for="allOutside"\n\t\t ng-mouseup="deactivateThumbs()"\n\t\t ng-mouseleave="deactivateThumbs()"\n\t\t ng-mousemove="moveThumb($event)">\n\n\t\t <div class="buckets-container-title" q-translation="BucketEditor.Label.Buckets"></div>\n\n\t\t<div id="buckets-id" class="buckets">\n\t\t\t<div class="bucket"\n\t\t\t\t title="{{bucket.name}}"\n\t\t\t\t ng-repeat="bucket in buckets"\n\t\t\t\t ng-click="selectBucket($index)"\n\t\t\t\t ng-style="{ left: bucket.left, width: bucket.width, opacity: bucket.outOfBound ? \'0.20\' : \'1\'}"\n\t\t\t\t ng-class="{ selected: $index === selectedIndex, \'out-of-bound\': bucket.outOfBound }"\n\t\t\t\t ng-class-odd="[\'odd\']"\n\t\t\t\t ng-class-even="[\'even\']">\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="idle-sliders">\n\t\t\t<div class="idle-slider"\n\t\t\t\t ng-repeat="bucket in buckets"\n\t\t\t\t ng-style="{ left: bucket.left }"\n\t\t\t\t ng-mouseenter="bucketFocus($index)"\n\t\t\t\t ng-hide="$index === 0 || focusIndex === $index || selectedIndex === $index || (selectedIndex+1) === $index"></div>\n\n\t\t\t<div class="slider-label"\n\t\t\t\t ng-style="{ left: buckets[1].left - 10 }"\n\t\t\t\t ng-hide="selectedIndex === 0 || selectedIndex === 1">\n\t\t\t\t{{buckets[0].max|number:0}}\n\t\t\t</div>\n\t\t\t<div class="slider-label"\n\t\t\t\t ng-style="{ left: buckets[buckets.length - 1].left - 10 }"\n\t\t\t\t ng-hide="selectedIndex === (buckets.length - 1) || selectedIndex === (buckets.length - 2)"\n\t\t\t\t ng-if="buckets.length > 2">\n\t\t\t\t{{buckets[buckets.length - 1].min|number:0}}\n\t\t\t</div>\n\n\t\t\t<div class="focused-slider"\n\t\t\t\t ng-mousedown="activateThumb(focusIndex)"\n\t\t\t\t ng-mouseleave="bucketBlur()"\n\t\t\t\t ng-style="{ left: buckets[focusIndex].left - 12 }"\n\t\t\t\t ng-show="focusIndex >= 0 && selectedIndex < 0">\n\t\t\t\t<div class="thumb"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="mask" ng-show="selectedIndex >= 0"></div>\n\n\t\t<div class="bucket-slider-container" ng-show="selectedIndex >= 0">\n\t\t\t\x3c!-- represents edited bucket (between the 2 sliders) --\x3e\n\t\t\t<div class="bucket"\n\t\t\t\t ng-class="{ even: selectedIndex % 2 === 1, odd: selectedIndex % 2 === 0 }"\n\t\t\t\t ng-style="{ left: selectedBucket.left, width: selectedBucket.width }"></div>\n\n\t\t\t<div class="bucket editable"\n\t\t\t\t ng-style="{ left: editedBucket.left, width: editedBucket.width }"\n\t\t\t\t id="editedBucket"></div>\n\n\t\t\t\x3c!-- Slider range --\x3e\n\t\t\t<div class="slider-range"\n\t\t\t\t ng-click="closePopup()"></div>\n\n\t\t\t\x3c!-- represents first thumb --\x3e\n\t\t\t<div class="slider" ng-show="selectedIndex > 0" ng-style="{ left: thumb1.left }">\n\t\t\t\t<span class="thumb-label" >{{thumb1.value|number:0}}</span>\n\n\t\t\t\t<div class="thumb thumb1"\n\t\t\t\t\t ng-class="{active: thumb1.isActive}"\n\t\t\t\t\t ng-mousedown="activateThumb1()"></div>\n\t\t\t</div>\n\n\t\t\t\x3c!-- represents second thumb --\x3e\n\t\t\t<div class="slider" ng-show="selectedIndex < (buckets.length - 1)" ng-style="{ left: thumb2.left }">\n\t\t\t\t<span class="thumb-label">{{thumb2.value|number:0}}</span>\n\n\t\t\t\t<div class="thumb thumb2"\n\t\t\t\t\t ng-class="{active: thumb2.isActive}"\n\t\t\t\t\t ng-mousedown="activateThumb2()"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n</div>\n'},2514:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2515)],a=function(t,e){function i(i){var n={template:e,controller:["$scope",function(t){t.input=i;t.$watchGroup(["input.bucket.min","input.bucket.max"],function(){e()});function e(){var e=t.input.bucket.min;var i=t.input.bucket.max;var n=!t.input.isPrevDisabled;var a=!t.input.isNextDisabled;var o=!Number.isNaN(+e)&&null!==e;var l=!Number.isNaN(+i)&&null!==i;if(n&&a&&o&&l){l=e<i;o=e<i}t.minIsValid=!n||o;t.maxIsValid=!a||l;t.input.bucketIsValid=t.minIsValid&&t.maxIsValid}}],dock:"top",alignTo:i.alignTo};return t.getService("luiPopover").show(n)}return{show:i}}.apply(e,n),void 0!==a&&(t.exports=a))},2515:function(t,e){t.exports='<lui-popover class="bucketing-editor-popup" x-arrow="arrow">\n\t<lui-popover-body class="lui-nopad">\n\t\t<div class="bucketing-editor-content">\n\t\t\t<div class="row-group">\n\t\t\t\t<div class="label-input-group row-item">\n\t\t\t\t\t<div class="label-input-item label" q-translation="BucketEditor.Label.BucketName" q-title-translation="BucketEditor.Tooltip.BucketName"></div>\n\t\t\t\t\t<input class="lui-input bucket-name" ng-model="input.bucket.name"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="row-group spacer">\n\t\t\t\t<div class="label-input-group row-item">\n\t\t\t\t\t<div class="label-input-item label" q-translation="BucketEditor.Label.From" q-title-translation="BucketEditor.Tooltip.From"></div>\n\t\t\t\t\t<input type="number" class="lui-input label-input-item input-from" ng-model="input.bucket.min" ng-disabled="input.isPrevDisabled" ng-class="{\'invalid-input\': !minIsValid}"/>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="row-item separator"></div>\n\n\t\t\t\t<div class="label-input-group row-item">\n\t\t\t\t\t<div class="label-input-item label" q-translation="BucketEditor.Label.To" q-title-translation="BucketEditor.Tooltip.To"></div>\n\t\t\t\t\t<input type="number" class="lui-input label-input-item input-to" ng-model="input.bucket.max" ng-disabled="input.isNextDisabled" ng-class="{\'invalid-input\': !maxIsValid}"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="row-group button-group">\n\t\t\t\t<div class="button-group-left">\n\t\t\t\t\t<button tid="bucket-popup-delete" class="lui-button row-item" ng-click="input.remove()" ng-disabled="input.isRemoveDisabled" q-title-translation="BucketEditor.Button.Remove">\n\t\t\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--bin"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="button-group-right">\n\t\t\t\t\t<button tid="bucket-popup-prev" class="lui-button row-item" ng-click="input.prev()" ng-disabled="input.isPrevDisabled" q-title-translation="BucketEditor.Button.Previous">\n\t\t\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--arrow-left"></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button tid="bucket-popup-next" class="lui-button row-item" ng-click="input.next()" ng-disabled="input.isNextDisabled" q-title-translation="BucketEditor.Button.Next">\n\t\t\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--arrow-right"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</lui-popover-body>\n</lui-popover>'},2516:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(91)],a=function(t,e){t.service("qvDataManagerBucketNameGenerator",[function(){return new i}]);function i(){}i.prototype.generateDefaultName=function(t){var i=void 0!==t.min?Math.round(t.min):"";var n=void 0!==t.max?Math.round(t.max):"";return e.get("BucketEditor.Label.DefaultBucketName",[i,n])};return i}.apply(e,n),void 0!==a&&(t.exports=a))},2517:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(54)],a=function(t,e){t.service("qvBucketEditorService",[function(){function t(){this.minWidth=20;this.separatorWidth=2;this.parentMargin=20}t.prototype.resizeBuckets=function(t,e,i){var n=this;var a=(t.length-1)*this.separatorWidth;var o=t.length*this.minWidth;var l=o+a;var s=i-l;var r=i-a;var c=0;var d=n.parentMargin;t.forEach(function(t){t.outOfBound=t.max<e.min||t.min>e.max});var u=t.filter(function(t){return!t.outOfBound});var p=void 0===[u.length-1].max?e.max:[u.length-1].max;var f=void 0===u[0].min?e.min:u[0].min;var v=p-f;t.forEach(function(t){t.outOfBound=t.max<e.min||t.min>e.max;void 0===t.min?t.range=t.max-f:void 0===t.max?t.range=p-t.min:t.range=t.max-t.min;t.ratio=t.range/v;t.outOfBound&&(t.ratio=0);t.ratio>1&&(t.ratio=1);t.width=t.ratio*s+n.minWidth;t.left=d;d+=t.width+n.separatorWidth;c+=t.width});return Math.ceil(c)===Math.ceil(r)?t:this.fitBucketsInBaseWidth(t,r)};t.prototype.fitBucketsInBaseWidth=function(t,i){var n=this;var a=false;var o=0;var l=20;while(!a&&o<l){var s=e.reduce(t,function(t,e){return t+e.width},0);var r=Math.abs(i-s);var c=n.parentMargin;t.forEach(function(t){s<i?t.width+=t.ratio*r:s>i&&(t.width-=t.ratio*r);t.left=c;c+=t.width+n.separatorWidth});a=Math.ceil(s)===Math.ceil(i);o++}return t};return new t}])}.apply(e,n),void 0!==a&&(t.exports=a))},2518:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(54),i(2519),i(91),i(105),i(103),i(1684)],a=function(t,e,i,n,a,o){var l={restrict:"E",replace:true,template:i,scope:{context:"=",actionDefinition:"="},controller:["$scope","qvDataManagerDataService","qvDataManagerThrottleService",function(t,i,l){t.orderingChartDefinition=t.actionDefinition.charts[0];t.orderingDistributionChart=t.actionDefinition.charts[1];d(t.orderingDistributionChart);t.isDirty=false;t.actionDefinition["shouldDisableOtherTabs"]=false;t.isEdit=e.some(t.context.field.transformations,function(t){return"defineOrder"===t.op});t.subTitleText=t.isEdit?n.get("OrderingAction.Label.SubTitle.EditMode"):n.get("OrderingAction.Label.SubTitle");var s=void 0;var r=l.throttleAsyncFunction(c);function c(){var e={field:t.context.field.name,orderedValues:s};return i.adaptVisualization(t.context.table.data.name,t.orderingDistributionChart.chartType,t.orderingDistributionChart.analysis.analysis,[e]).then(function(e){var i=e[0];t.orderingDistributionChart.options=i.options;d(t.orderingDistributionChart)})}function d(e){e&&e.options&&e.options.qHyperCubeDef&&(e.options.qHyperCubeDef.qMeasures[0].qDef.qLabel=n.get("Visualization.Ordering.DistributionChart.Measure",[t.context.field.name]))}t.$on("ordinalChange",function(e,i){e.stopPropagation();t.isDirty=true;t.actionDefinition.shouldDisableOtherTabs=true;s=i;r()});t.resetOrdering=function(){t.$broadcast("orderingReset");t.$emit(a.Events.EditorDetailsPane.OrderingChange,[]);t.isDirty=false;t.actionDefinition.shouldDisableOtherTabs=false};t.commitOrdering=function(){if(s){t.isDirty=false;t.actionDefinition.shouldDisableOtherTabs=false;t.$emit(a.Events.EditorDetailsPane.OrderingChange,s);o.trackEvent(o.customEvents.STU_REORDER_CLICK)}}}]};t.directive("qvOrderingAction",function(){return l})}.apply(e,n),void 0!==a&&(t.exports=a))},2519:function(t,e){t.exports='<div class="ordering-action">\n\t<div class="action-content-header">\n\t\t<div>{{subTitleText}}</div>\n\t</div>\n\t<div class="components">\n\t\t<div class="component ordering-chart">\n\t\t\t<data-ds-visualization\n\t\t\t\t\tdata-vis-definition="orderingChartDefinition"\n\t\t\t\t\tdata-field-id="context.field.id"\n\t\t\t\t\tdata-target-table-model="context.table"/>\n\t\t</div>\n\t\t<div class="component ordering-distribution">\n\t\t\t<data-ds-visualization\n\t\t\t\t\tdata-vis-definition="orderingDistributionChart"\n\t\t\t\t\tdata-field-id="context.field.id"\n\t\t\t\t\tdata-target-table-model="context.table"/>\n\t\t</div>\n\t</div>\n\t<div class="action-content-footer">\n\t\t<button class="lui-button reset-button" ng-class="{\'lui-disabled\': !isDirty && !isEdit}" ng-click="resetOrdering()">\n\t\t\t<span class="lui-button__text" q-translation="{{ isEdit ? \'OrderingAction.Button.Reset\' : \'OrderingAction.Button.Cancel\'}}"></span>\n\t\t</button>\n\t\t<button class="lui-button commit-button" ng-class="{\'lui-disabled\': !isDirty}" ng-click="commitOrdering()">\n\t\t\t<span class="lui-button__text" q-translation="OrderingAction.Button.CustomOrder"></span>\n\t\t</button>\n\t</div>\n</div>'},2520:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(10),i(54),i(91),i(2521),i(105),i(103)],a=function(t,e,i,n,a,o,l){var s={template:a,bindings:{context:"<",actionDefinition:"<"},controller:["$scope","qvDataManagerDataService",function(t,a){var s=this;var r,c,d;s.$onInit=function(){s.definitionReady=false;s.actionDefinition["shouldDisableOtherTabs"]=false;r=i.findWhere(this.context.field.transformations,{op:"mapValues"});c=r?r.arguments.mapping:[];d=e.copy(c);u();this.mappingChartDefinition=this.actionDefinition.charts[0];this.mappingChartDefinition.augmentVisualizationOptions=function(t){if("number"===typeof this.analysis.dims[0].density){t.fieldContainsNull=this.analysis.dims[0].density<1;t.nullPercentage=100*(1-this.analysis.dims[0].density)}t.mappingType=o.Visualization.Actions.RenameMapping;t.mapValues=d||[]};t.$on(o.Events.EditorDetailsPane.MappingCreated,function(t,e){s.mappingStateDidChange=!i.isEqual(c,e.mapValues);s.isDirty=s.mappingStateDidChange;s.actionDefinition.shouldDisableOtherTabs=Boolean(s.mappingStateDidChange);d=e.mapValues;u()});t.$on(o.Events.EditorDetailsPane.DisableMappingActionButtons,function(){s.isDirty=false;s.actionDefinition.shouldDisableOtherTabs=true});d.length>0?p():s.definitionReady=true};this.reset=function(){t.$broadcast(o.Events.EditorDetailsPane.MappingReset,{mapValues:c});s.isDirty=false;s.actionDefinition.shouldDisableOtherTabs=false;u()};this.commit=function(){a.applyFieldMapping(s.context.table.data.id,s.context.field.id,d);l.trackEvent(l.customEvents.STU_REPLACE_CLICK)};function u(){s.groupingStatusMessage="";if(d.length>0){var t=d.filter(function(t){return""!==t.to});s.groupingStatusMessage=t.length>0?n.get("MappingAction.Label.GroupingStatus",[t.length]):""}}function p(){var t={field:s.context.field.name,mapValues:[]};return a.adaptVisualization(s.context.table.data.name,s.mappingChartDefinition.chartType,s.mappingChartDefinition.analysis.analysis,[t]).then(function(t){var e=t[0];s.mappingChartDefinition.options=e.options;s.definitionReady=true})}}]};t.nativeComponent("qvMappingAction",s)}.apply(e,n),void 0!==a&&(t.exports=a))},2521:function(t,e){t.exports='<div class="mapping-action">\n\t<div class="action-content-header">\n\t\t<div class="mapping-action-title" q-translation="MappingAction.Label.EditorTitle"></div>\n\t</div>\n\t<div class="components">\n\t\t<div class="component mapping-source">\n\t\t\t<data-ds-visualization\n\t\t\t\t\tng-if="$ctrl.definitionReady"\n\t\t\t\t\tdata-vis-definition="$ctrl.mappingChartDefinition"\n\t\t\t\t\tdata-field-id="$ctrl.context.field.id"\n\t\t\t\t\tdata-target-table-model="$ctrl.context.table"/>\n\t\t</div>\n\t</div>\n\n\t<div class="action-content-footer">\n\t\t<div class="grouping-status" ng-bind="$ctrl.groupingStatusMessage"></div>\n\n\t\t<button class="lui-button reset-button" ng-class="{\'lui-disabled\': !$ctrl.isDirty}"\n\t\t\t\tng-click="$ctrl.reset()">\n\t\t\t<span class="lui-button__text" q-translation="MappingAction.Button.Cancel"></span>\n\t\t</button>\n\t\t<button class="lui-button commit-button" ng-class="{\'lui-disabled\': !$ctrl.isDirty}"\n\t\t\t\tng-click="$ctrl.commit()"><span class="lui-button__text"\n\t\t\t\t\t\t\t\t\t\t\t\t\tq-translation="MappingAction.Button.Grouping"></span>\n\t\t</button>\n\t</div>\n</div>'},2522:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(10),i(54),i(91),i(2523),i(105),i(103)],a=function(t,e,i,n,a,o,l){var s={template:a,bindings:{context:"<",actionDefinition:"<"},controller:["$scope","qvDataManagerDataService",function(t,a){var s=this;var r,c,d;s.$onInit=function(){s.definitionReady=false;s.actionDefinition["shouldDisableOtherTabs"]=false;r=i.findWhere(this.context.field.transformations,{op:"mapValues"});c=r?r.arguments.mapping:[];d=e.copy(c);u();this.mappingChartDefinition=this.actionDefinition.charts[0];this.mappingChartDefinition.augmentVisualizationOptions=function(t){t.mappingType=o.Visualization.Actions.MapNulls;t.mapValues=d||[]};t.$on(o.Events.EditorDetailsPane.MappingCreated,function(t,e){var n=!i.isEqual(c,e.mapValues);s.isDirty=Boolean(n);s.actionDefinition.shouldDisableOtherTabs=Boolean(n);d=e.mapValues;u()});d.length>0?p():s.definitionReady=true};this.reset=function(){d=e.copy(c);t.$broadcast(o.Events.EditorDetailsPane.MappingReset,{mapValues:d});s.isDirty=false;s.actionDefinition.shouldDisableOtherTabs=false;u()};this.commit=function(){a.applyFieldMapping(s.context.table.data.id,s.context.field.id,d);l.trackEvent(l.customEvents.STU_SET_NULLS_CLICK)};function u(){if(d.length>0){var t=i.findWhere(d,{to:""});s.groupingStatusMessage=n.get("MappingAction.Label.NullGroupingStatus",[t?t.from.length:0])}}function p(){var t={field:s.context.field.name,mapValues:[]};return a.adaptVisualization(s.context.table.data.name,s.mappingChartDefinition.chartType,s.mappingChartDefinition.analysis.analysis,[t]).then(function(t){var e=t[0];s.mappingChartDefinition.options=e.options;s.definitionReady=true})}}]};t.nativeComponent("qvNullMappingAction",s)}.apply(e,n),void 0!==a&&(t.exports=a))},2523:function(t,e){t.exports='<div class="null-mapping-action">\n\t<div class="action-content-header">\n\t\t<div class="null-mapping-action-title" q-translation="NullMappingAction.Label.EditorTitle"></div>\n\t</div>\n\t<div class="components">\n\t\t<div class="component mapping-source">\n\t\t\t<data-ds-visualization\n\t\t\t\t\tng-if="$ctrl.definitionReady"\n\t\t\t\t\tdata-vis-definition="$ctrl.mappingChartDefinition"\n\t\t\t\t\tdata-field-id="$ctrl.context.field.id"\n\t\t\t\t\tdata-target-table-model="$ctrl.context.table"/>\n\t\t</div>\n\t</div>\n\n\t<div class="action-content-footer">\n\t\t<div class="grouping-status" ng-bind="$ctrl.groupingStatusMessage"></div>\n\n\t\t<button class="lui-button reset-button" ng-class="{\'lui-disabled\': !$ctrl.isDirty}"\n\t\t\t\tng-click="$ctrl.reset()">\n\t\t\t<span class="lui-button__text" q-translation="NullMappingAction.Button.Cancel"></span>\n\t\t</button>\n\t\t<button class="lui-button commit-button" ng-class="{\'lui-disabled\': !$ctrl.isDirty}"\n\t\t\t\tng-click="$ctrl.commit()">\n\t\t\t<span class="lui-button__text" q-translation="NullMappingAction.Button.Grouping"></span>\n\t\t</button>\n\t</div>\n</div>'},2524:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(10),i(54),i(91),i(2525),i(105),i(103),i(1684),i(2526),i(2528),i(1800)],a=function(t,e,i,n,a,o,l){var s={template:a,bindings:{context:"<",actionDefinition:"<"},controller:["qvDataManagerDataService","qvDataManagerThrottleService","fieldSplitHelperService","$scope",function(t,a,s,r){var c=this;var d;var u,p;this.loadComplete=false;this.updateDelimiterBeforeLoadComplete=false;this.$onInit=function(){u=this.createGridModel();this.actionDefinition["shouldDisableOtherTabs"]=false;this.tableChartDefinition=i.find(this.actionDefinition.charts,function(t){return t.analysis.analysis===o.Visualization.Actions.SplitField});p=c.actionDefinition.action.actionSubType;this.originalSplitTree=this.tableChartDefinition.analysis.transformationArgs?s.updateTreePropsByDefn(this.tableChartDefinition.analysis.transformationArgs.splitInfo,this.tableChartDefinition):void 0;this.actionType=p;this.splitTree=e.copy(this.originalSplitTree);this.splitSourceValue="";this.tableChartDefinition.augmentVisualizationOptions=function(t){var e={template:'<qv-split-action-table-header ng-if="header.dataColIx >= 0" header-model="header" dm-model="dmmodel"></qv-split-action-table-header>',model:u,height:"30px"};t.customHeader=e;t.useHorizontalScroll=true;t.useAllSpace=true;t.minColumnWidth=80};r.$on(o.Events.SplitAction.LoadComplete,function(t,i){c.originalSplitTree=e.copy(i);c.loadComplete=true});this.isValid=s.validateTree(c.context.loadModel,c.context.table,c.splitTree);this.isDirty=false;this.sampleData=this.tableChartDefinition.analysis.sampleValues;d=a.throttleAsyncFunction(v);c.isValid=g()};this.onHeaderChanged=function(t,e,i,n){if(c.splitTree&&(!n||!c.compareTrees(c.originalSplitTree,c.splitTree,true))){var a=s.updateFieldProperties(c.splitTree,t.dataColIx,e);u.selectedColumns[a["name"]]=a["selected"];c.isValid=g();c.isDirty=!c.compareTrees(c.originalSplitTree,c.splitTree,false);r.$broadcast(o.Events.SplitAction.Validate)}f()};this.compareTrees=function(t,e,n){var a=s.getLeafNodes(t);var o=s.getLeafNodes(e);var l=a.length===o.length;var r=false;if(l){var c=n?["id","idx","selected"]:["id","idx"];r=a.every(function(t,e){return i.isEqual(i.omit(t,c),i.omit(o[e],c))})}return l&&r};this.validateColumnName=function(t,e){var i=s.validateName(c.context.loadModel,c.context.table,c.splitTree,t,e);return i};this.isSingleColumnTable=function(){return!Boolean(c.splitTree)};this.createGridModel=function(){var t=new Object;t.selectedColumns={};t.onHeaderChanged=this.onHeaderChanged;t.validateName=this.validateColumnName;t.isSingleColumnTable=this.isSingleColumnTable;return t};this.updateDelimiter=function(t){c.loadComplete||(c.updateDelimiterBeforeLoadComplete=true);this.actionDefinition.shouldDisableOtherTabs=t.isDirty;this.isDirty=this.actionDefinition.shouldDisableOtherTabs;this.splitTree=t.splitTree;if(this.splitTree)this.actionType=o.Visualization.Actions.SplitValues;else{this.actionType=o.Visualization.Actions.SplitValuesDef;u.selectedColumns={}}d();f()};function f(){var t=i.filter(s.getLeafNodes(c.splitTree),function(t){return t.selected}).length;c.newFieldsLength=t>0?n.get("SplitValuesAction.Label.NewFieldsLength",t):""}function v(){var e={field:c.context.field.name,splitInfo:c.splitTree};return t.adaptVisualization(c.context.table.data.name,c.tableChartDefinition.chartType,c.actionType,[e]).then(function(t){var e=t[0];c.tableChartDefinition.options=e.options;s.updateTreePropsByDefn(c.splitTree,c.tableChartDefinition);c.isValid=g();c.updateDelimiterBeforeLoadComplete=false})}function g(){return s.validateTree(c.context.loadModel,c.context.table,c.splitTree)}this.resetSplit=function(){this.isDirty=false;this.actionDefinition.shouldDisableOtherTabs=false;this.actionType=p;this.splitTree=e.copy(this.originalSplitTree);c.isValid=g();u.selectedColumns={};r.$broadcast(o.Events.SplitAction.Reset);d()};this.commitSplit=function(){this.isDirty=false;this.actionDefinition.shouldDisableOtherTabs=false;var e=i.find(s.getLeafNodes(c.splitTree),function(t){return t.selected});e&&r.$emit(o.Events.EditorDetailsPane.FieldCreated,e.name);t.applyFieldSplit(c.context.table.data.id,c.context.field.id,this.splitTree);l.trackEvent(l.customEvents.STU_SPLIT_CLICK)}}]};t.nativeComponent("qvSplitAction",s)}.apply(e,n),void 0!==a&&(t.exports=a))},2525:function(t,e){t.exports='<div class="split-action">\n\t<div class="action-content-header">\n\t\t<div class="title" q-translation="SplitValuesAction.Label.EditorSubTitle"></div>\n\t</div>\n\n\t<div class="components">\n\t\t<div class="split-editor">\n\t\t\t<field-split-select class="field-split-select" \n\t\t\t\tsample-data="$ctrl.sampleData"\n\t\t\t\tname="field-split-select" \n\t\t\t\tsplit-tree="$ctrl.splitTree"\n\t\t\t\tsplit-type="$ctrl.actionType"\n\t\t\t\ton-update="$ctrl.updateDelimiter($event)">\n\t\t\t</field-split-select>\n\t\t</div>\n\n\t\t<data-ds-visualization\n\t\t\t\tng-if="$ctrl.loadComplete && !$ctrl.updateDelimiterBeforeLoadComplete"\n\t\t\t\tdata-vis-definition="$ctrl.tableChartDefinition"\n\t\t\t\tdata-field-id="$ctrl.context.field.id"\n\t\t\t\tdata-target-table-model="$ctrl.context.table"/>\n\t</div>\n\n\t<div class="action-content-footer">\n\t\t<div class="new-fields-length-label">{{$ctrl.newFieldsLength}}</div>\n\t\t<button class="lui-button reset-button" ng-class="{\'lui-disabled\': !$ctrl.isDirty}" ng-click="$ctrl.resetSplit()">\n\t\t\t<span class="lui-button__text" q-translation="SplitValuesAction.Button.Cancel"></span>\n\t\t</button>\n\t\t<button class="lui-button commit-button" ng-class="{\'lui-disabled\': !$ctrl.isValid}" ng-click="$ctrl.commitSplit()">\n\t\t\t<span class="lui-button__text" q-translation="SplitValuesAction.Button.Commit"></span>\n\t\t</button>\n\t</div>\n</div>'},2526:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(105),i(2527),i(264)],a=function(t,e,i,n){t.directive("qvSplitActionTableHeader",[function(){return{scope:{headerModel:"=",dmModel:"=",context:"="},restrict:"E",template:i,replace:true,controller:["$scope","$element","luiTooltip",function(t,i,a){var o=t.dmModel.selectedColumns[t.headerModel.text];var l=i.find(".table-header-input");var s=null;var r={template:n.template,controller:n.controller,input:{item:"",style:{width:"150px"}},alignTo:l[0],dock:"bottom"};t.fieldSelected=void 0===o||o;d();var c=u();t.$on(e.Events.SplitAction.Reset,function(){t.fieldSelected=true;v({selected:true},true,true)});t.$on(e.Events.SplitAction.Validate,function(){u()});t.onBlur=function(){if(!t.isSingleColumnTable){f();v({name:t.headerModel.text},true,false);u()}};t.onNameChanged=function(e,i){var n=t.dmModel.validateName(t.headerModel.text,t.headerModel.dataColIx);t.headerModel.info.qFallbackTitle=t.headerModel.text;v({name:i},n.isValid,false);p(n)};t.onHeaderSelected=function(){v({selected:!t.fieldSelected},true,false)};t.onFocus=function(){var e=t.dmModel.validateName(t.headerModel.text,t.headerModel.dataColIx);p(e)};v({name:t.headerModel.text,selected:t.fieldSelected},c.isValid,false);function d(){t.isSingleColumnTable=t.dmModel.isSingleColumnTable()}function u(){var e=t.dmModel.validateName(t.headerModel.text,t.headerModel.dataColIx);t.validName=t.isSingleColumnTable||e.isValid;return e}function p(e){f();if(!t.isSingleColumnTable&&t.fieldSelected){t.validName=e.isValid;if(!e.isValid){var i=e.errors[0].msg;r.input.item=i;s=a.show(r)}}}function f(){s&&s.close()}function v(e,i,n){t.dmModel.onHeaderChanged(t.headerModel,e,i,n)}}]}}])}.apply(e,n),void 0!==a&&(t.exports=a))},2527:function(t,e){t.exports='<div class="field-name" title="{{headerModel.text}}" tid="{{headerModel.tid}}">\n\t<lui-checkbox class="field-name-control field-name-checkbox" ng-show="!isSingleColumnTable" x-model="fieldSelected" x-change="onHeaderSelected(fieldSelected)"></lui-checkbox>\n\t<input class="field-name-control table-header-input" ng-readonly="isSingleColumnTable || !fieldSelected" ng-class="{\'disabled\': isSingleColumnTable, \'invalid\': fieldSelected && !validName, \'unselected\': !fieldSelected}" ng-model="headerModel.text" ng-focus="onFocus(headerModel.text)" ng-blur="onBlur()" ng-change="onNameChanged(\'{{headerModel.text}}\', headerModel.text)"/>\n</div>'},2528:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(10),i(54),i(2529),i(105),i(242),i(1226),i(1800),i(1193)],a=function(t,e,i,n,a){var o=["$scope","$element","$timeout","fieldSplitHelperService","dsListPopoverService",function(t,n,o,l,s){var r=this;var c=n.find(".field-split-select-control");var d=n.find(".field-split-slider");var u=n.find(".field-split-select-token");var p=11;var f=15;var v=true;var g=true;var m;var b;r.$onInit=function(){this.sliderPos={left:f+"px"};c.on("scroll",function(){o(function(){r.sliderPos={left:f-c.scrollLeft()+"px"}})});r.visibleActions=false;r.splitLimit=a.Visualization.Actions.SplitLimit;r.splitLimitReached=false;this.initData()};this.initData=function(){if(r.dataList)return;r.dataList=r.sampleData.map(function(t){return{label:t,select:function e(){M();r.data=t;r.delimitedList=l.treeToList(r.splitTree,r.data,r.splitType);x()},disabled:function e(){return r.data===t}}});r.dataList&&r.dataList.length>0&&(r.data=r.dataList[0].label)};this.$onChanges=function(e){this.initData();if(e.splitTree){r.splitTree=e.splitTree.currentValue;r.delimitedList=l.treeToList(r.splitTree,r.data,r.splitType);r.clearSelection();A()}if(e.splitType){r.splitType=e.splitType.currentValue;r.delimitedList=l.treeToList(r.splitTree,r.data,r.splitType)}h(e)&&I(e.splitTree.currentValue.del);if(g){g=false;t.$emit(a.Events.SplitAction.LoadComplete,r.splitTree)}};function h(t){return t.splitTree&&t.splitTree.currentValue&&t.splitType&&!y(t.splitType.currentValue)&&!y(t.splitType.previousValue)}function y(t){var e=[a.Visualization.Actions.SplitEmail,a.Visualization.Actions.SplitAddress];return i.findWhere(e,t)}t.$on(a.Events.SplitAction.Reset,function(){if(b){g=true;r.splitTree=e.copy(m);k(true);E()}});r.shouldDisableDelimitOnce=function(){return r.splitLimitReached||T()};r.shouldDisableDelimitAll=function(){return!r.multipleDelimiterInstances||r.splitLimitReached||T()};r.shouldDisablePosition=function(){return!r.singlePositionValid||T()};function T(){return v&&b}r.delimitOnce=function(){if(!r.selectedToken||!r.slider)return;var t=r.slider.slider("values")[0];var e=r.delimitOn;var i=r.selectedToken.substring(0,t);var n=i.split(e).length;r.splitTree=l.addDelimiterToNodeById(r.splitTree,r.selectedTokenId,e,n);k(false);x();E();A()};r.delimitAll=function(){if(!r.selectedToken||!r.slider)return;var t=r.delimitOn;var e=false;var i=l.getNumSplits(r.splitTree);if(0===i){F(t);return}do{e=false;var n=r.delimitedList.filter(function(t){return t.text});for(var a=0;a<n.length;a++){var o=n[a];var s=o.data;if(s.indexOf(t)>=0){r.splitTree=l.addDelimiterToNodeById(r.splitTree,o.id,t,1);r.delimitedList=l.treeToList(r.splitTree,r.data,r.splitType);e=true;i++;break}}}while(e&&i<r.splitLimit);x();E();A()};r.splitAtPosition=function(){if(!r.selectedToken||!r.slider)return;var t=r.slider.slider("values")[0];var e=r.slider.slider("values")[1];if(t===e){if(0===t)return;e=void 0}else if(0===t){t=e;e=void 0}k(false);r.splitTree=l.addPositionToNodeById(r.splitTree,r.selectedTokenId,t,e);x();E()};r.removeToken=function(t){k(false);if(l.getNumSplits(r.splitTree)>r.splitLimit){r.splitTree=void 0;E();return}var e=C(t);if(e&&!e.text){r.splitTree=l.deleteNodeById(r.splitTree,t,r.delimitedList);x();E()}A()};r.onSelection=function(t){var e=C(t);if(e&&!e.text)return;if(t===r.selectedTokenId){var a={values:[]};var o=window.getSelection();a.values.push(Math.min(o.anchorOffset,o.focusOffset));a.values.push(Math.max(o.anchorOffset,o.focusOffset));o.removeAllRanges();w(a);r.slider&&r.slider.slider("option","values",a.values)}else{D(r.selectedTokenId);var l=n.find("#field-split-token-"+t+"-data");l.before("<div class='field-split-select-token' id = 'field-split-token-"+t+"-overlay'></div>");n.find("#field-split-token-"+t).addClass("active-overlay");var s=n.find("#field-split-token-"+t+"-overlay");s.width(l.width());s.append("<div class='left-overlay'></div>");s.append("<div class='middle-overlay'></div>");s.append("<div class='right-overlay'></div>");n.find("#field-split-token-"+t+"-overlay .middle-overlay").width(l.width());l.addClass("item-data-position");if(e&&e.data&&e.text){r.selectedToken=e.data;r.delimitOn=e.data;r.selectedTokenId=e.id;x();var v={min:0,max:e.data.length,step:1,range:true,values:[0,e.data.length],slide:function t(e,i){window.getSelection().removeAllRanges();w(i)}};var g=l.width();d.width(g);var m=n.find(".active-overlay .data").offset().left-u.offset().left;r.slider=n.find("#field-split-mutli-slider").slider(v);r.visibleActions=true;f=m+p;r.sliderPos={left:f-c.scrollLeft()+"px"};var b=n.find(".ui-slider-handle");i.map(b,function(t,e){b.eq(e).append("<div class='handle-rect'></div>")});S(v.values)}}};r.clearSelection=function(){D(r.selectedTokenId);x();r.selectedToken=void 0;r.delimitOn=void 0;r.selectedTokenId=void 0};r.showListPopover=function(t){M();var e=t.currentTarget;r.listPopover=s.show(e,r.dataList,"bottom")};function M(){if(r.listPopover){r.listPopover.close();r.listPopover=void 0}}function w(t){if(!r.selectedToken)return;var e=n.find("#field-split-token-"+r.selectedTokenId+"-data").width()/r.selectedToken.length;var i=e*t.values[0];var a=e*(r.selectedToken.length-t.values[1]);var l=n.find("#field-split-token-"+r.selectedTokenId+"-data").width()-i-a;n.find("#field-split-token-"+r.selectedTokenId+"-overlay .right-overlay").width(a);n.find("#field-split-token-"+r.selectedTokenId+"-overlay .left-overlay").width(i);var s=t.values[0]===t.values[1]?2:l;n.find("#field-split-token-"+r.selectedTokenId+"-overlay .middle-overlay").width(s);o(function(){r.delimitOn=r.selectedToken.substring(t.values[0],t.values[1]);S(t.values)})}function S(t){r.singlePositionSelection=t&&t.length>1&&t[0]===t[1];if(r.singlePositionSelection)r.singlePositionValid=0!==t[0];else{var e=r.delimitOn;if(e&&e.length>0){var n=i.reduce(r.delimitedList,function(t,e){e.text&&(t+=e.data);return t},"");r.multipleDelimiterInstances=n.split(e).length>2}else r.multipleDelimiterInstances=false}}function D(t){if(void 0!==t){n.find("#field-split-token-"+t).removeClass("active-overlay");n.find("#field-split-token-"+t+"-data").removeClass("item-data-position");n.find("#field-split-token-"+t+" #field-split-token-"+t+"-overlay").remove()}}function x(){d.empty();d.html("<div id ='field-split-mutli-slider'></div>");r.slider=null;r.visibleActions=false}function C(t){return i.findWhere(r.delimitedList,{id:t})}function E(){r.delimitedList=l.treeToList(r.splitTree,r.data,r.splitType);r.onUpdate({$event:{splitTree:r.splitTree,isDirty:!v}})}function A(){var t=l.getNumSplits(r.splitTree);r.splitLimitReached=!v&&t>=r.splitLimit}function k(t,e){v=t;if(b||e){var i=l.getNumSplits(r.splitTree);var n=l.checkIdenticalDelimiters(r.splitTree);r.splitTree.complexSplit=!!(t&&i>1&&n)}}function I(t){if(g&&t){b=true;F(t);O();m||(m=e.copy(r.splitTree))}}function F(t){var e=false;do{e=false;var i=r.delimitedList.filter(function(t){return t.text});for(var n=0;n<i.length;n++){var a=i[n];var o=a.data;if(o.indexOf(t)>=0){r.splitTree=l.addDelimiterToNodeById(r.splitTree,a.id,t,1);r.delimitedList=l.treeToList(r.splitTree,r.data,r.splitType);e=true;break}}}while(e);k(true,true);x();E()}function O(){var t=l.getLeafNodes(r.splitTree);var e=t[0].name;t.map(function(t,i){t.name||(t.name=e.replace(/.$/,++i));t.selected=true})}}];t.nativeComponent("fieldSplitSelect",{bindings:{name:"@",sampleData:"<",splitTree:"<",splitType:"<",onUpdate:"&"},template:n,controller:o})}.apply(e,n),void 0!==a&&(t.exports=a))},2529:function(t,e){t.exports='<div class="field-split-controls-container">\n\t<div class="field-split-actions" ng-show="$ctrl.visibleActions && !$ctrl.singlePositionSelection">\n\t\t<button class="field-split-action lui-button" tid="field-split-by-delimiter" ng-click="$ctrl.delimitOnce()" \n\t\tq-title-translation="SplitSelectControl.Button.DelimitOnce" ng-class="{ \'lui-disabled\': $ctrl.shouldDisableDelimitOnce() }">\n\t\t\t<span class="lui-button__text" q-translation="SplitSelectControl.Button.DelimitOnce"></span>\n\t\t</button>\n\t\t<button class="field-split-action lui-button" tid="field-split-by-all-delimiters" ng-click="$ctrl.delimitAll()" ng-class="{ \'lui-disabled\': $ctrl.shouldDisableDelimitAll() }"\n\t\tq-title-translation="SplitSelectControl.Button.DelimitAll">\n\t\t\t<span class="lui-button__text" q-translation="SplitSelectControl.Button.DelimitAll"></span>\n\t\t</button>\n\t\t<button class="field-split-action lui-button" tid="field-split-by-positions" ng-click="$ctrl.splitAtPosition()"\n\t\tq-title-translation="SplitSelectControl.Button.SplitAtPositions" ng-class="{ \'lui-disabled\': $ctrl.shouldDisablePosition() }">\n\t\t\t<span class="lui-button__text" q-translation="SplitSelectControl.Button.SplitAtPositions"></span>\n\t\t</button>\n\t</div>\n\n\t<div class="field-split-actions" ng-show="$ctrl.visibleActions && $ctrl.singlePositionSelection">\n\t\t<button class="field-split-action lui-button" tid="field-split-by-position" ng-click="$ctrl.splitAtPosition()" ng-class="{ \'lui-disabled\': $ctrl.shouldDisablePosition() }"\n\t\tq-title-translation="SplitSelectControl.Button.SplitAtPosition">\n\t\t\t<span class="lui-button__text" q-translation="SplitSelectControl.Button.SplitAtPosition"></span>\n\t\t</button>\n\t</div>\n\t<div class="lui-icon lui-icon--close slider-close-button" aria-hidden="true"  ng-show="$ctrl.visibleActions" ng-click="$ctrl.clearSelection()" tid="slider-close-button"></div>\n\t<div class="help-message" ng-show="!$ctrl.visibleActions && $ctrl.delimitedList.length === 1" q-translation="SplitSelectControl.Label.NoMarkerText"></div>\n</div>\n<div class="field-split-select-container {{ $ctrl.name }}">\n\t<div class="field-split-select-control">\n\t\t<div class="field-split-select-field">\n            <div class="field-split-select-token">\n                <div ng-repeat="item in $ctrl.delimitedList" id="field-split-token-{{item.id}}" data-token-id="{{item.id}}" class="token" ng-class="{\'delimiter\': item.delimiter, \'marker\': item.position, \'text\': item.text}">\n                    <div id="field-split-token-{{item.id}}-data" ng-class="item.data === \' \' ? \'space\' : \'solid\'" class="data" ng-mouseup="$ctrl.onSelection(item.id)">\n                        <div class="delimiter-overlay" ng-class="{\'fade\': $ctrl.visibleActions}"></div>\n                        <div class="data-value">{{item.data}}</div>\n                        <div ng-if="item.delimiter" ng-hide="$ctrl.visibleActions" ng-class="item.data === \' \' ? \'cancel-delimiter-space\' : \'cancel-delimiter\'" ng-click="$ctrl.removeToken(item.id)" class="cancel-delimiter-group"><span class="lui-icon lui-icon--remove"></span></div>\n                        <div ng-if="item.position" ng-hide="$ctrl.visibleActions" class="cancel-delimiter-group cancel-position-delimiter" ng-click="$ctrl.removeToken(item.id)"><span class="lui-icon lui-icon--remove"></span></div>\n                        <span ng-if=" item.data === \' \'">&nbsp;</span>\n                    </div>\n                </div>\n            </div>\n\t\t</div>\n\t</div>\n\t<button class="lui-button list-button" ng-click="$ctrl.showListPopover($event)">\n\t\t<span class="lui-button__icon  lui-icon  lui-icon--triangle-bottom"></span>\n\t</button>\n</div>\n<div class="field-split-slider-container" ng-class="{ \'hidden-slider\': !$ctrl.slider }">\n\t<div class="field-split-slider" ng-style="$ctrl.sliderPos">\n\t\t<div id="field-split-mutli-slider"></div>\n\t</div>\n</div>'},2530:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2531),i(105)],a=function(t,e,i){var n={template:e,bindings:{actionDefinition:"=",placeholderMessage:"="},controller:[function(){var t=this;t.$onInit=function(){t.mappingAction=i.Visualization.Actions.MapValues;t.nullMappingAction=i.Visualization.Actions.MapNulls;t.orderingAction=i.Visualization.Actions.Ordinal;t.splitAction=i.Visualization.Actions.SplitField;t.bucketingAction=i.Visualization.Actions.Bucketing};t.dismissPlaceholder=function(){t.actionDefinition.action.isDefault=true}}]};t.nativeComponent("qvPlaceholderAction",n)}.apply(e,n),void 0!==a&&(t.exports=a))},2531:function(t,e){t.exports='<div class="placeholder-action">\n\n\t<div class="placeholder-message-container">\n\t\t<div class="placeholder-warning-message" q-translation="{{$ctrl.placeholderMessage}}"></div>\n\t\t<button class="lui-button lui-button--warning placeholder-confirm-button" ng-click="$ctrl.dismissPlaceholder()" q-translation="Common.OK"></button>\n\t</div>\n\t\n\t<div class="placeholder-content">\t\t\n\t\t<div class="placeholder-bar placeholder-text"></div>\n\t\n\t\t<div ng-if="$ctrl.actionDefinition.action.action === $ctrl.mappingAction" class="placeholder-body">\n\t\t\t<div class="placeholder-bar placeholder-box placeholder-box-lg"></div>\n\t\t\t<div class="placeholder-bar placeholder-box placeholder-box-sm placeholder-box-top-right"></div>\n\t\t</div>\n\n\t\t<div ng-if="$ctrl.actionDefinition.action.action === $ctrl.nullMappingAction" class="placeholder-body">\n\t\t\t<div class="placeholder-bar placeholder-box placeholder-box-lg"></div>\n\t\t\t<div class="placeholder-bar placeholder-box placeholder-box-lg placeholder-box-right"></div>\n\t\t</div>\n\n\t\t<div ng-if="$ctrl.actionDefinition.action.action === $ctrl.orderingAction" class="placeholder-body">\n\t\t\t<div class="placeholder-bar placeholder-box placeholder-box-lg"></div>\n\t\t\t<div class="placeholder-col-container">\n\t\t\t\t<div class="placeholder-bar placeholder-col"></div>\n\t\t\t\t<div class="placeholder-bar placeholder-col"></div>\n\t\t\t\t<div class="placeholder-bar placeholder-col"></div>\n\t\t\t\t<div class="placeholder-bar placeholder-col"></div>\n\t\t\t\t<div class="placeholder-bar placeholder-col"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="$ctrl.actionDefinition.action.action === $ctrl.splitAction" class="placeholder-body">\n\t\t\t<div class="placeholder-bar placeholder-dropdown"></div>\n\t\t\t<div class="placeholder-bar placeholder-list"></div>\n\t\t</div>\n\n\t\t<div ng-if="$ctrl.actionDefinition.action.action === $ctrl.bucketingAction" class="placeholder-body">\n\t\t\t<div class="placeholder-bucket-container">\n\t\t\t\t<div class="placeholder-bar placeholder-bucket"></div>\n\t\t\t\t<div class="placeholder-bucket-border"></div>\n\t\t\t\t<div class="placeholder-bar placeholder-bucket"></div>\n\t\t\t\n\t\t\t\t<div class="placeholder-bucket-col-container">\n\t\t\t\t\t<div class="placeholder-bar placeholder-bucket-col placeholder-bucket-col-1"></div>\n\t\t\t\t\t<div class="placeholder-bar placeholder-bucket-col placeholder-bucket-col-2"></div>\n\t\t\t\t\t<div class="placeholder-bar placeholder-bucket-col placeholder-bucket-col-3"></div>\n\t\t\t\t\t<div class="placeholder-bar placeholder-bucket-col placeholder-bucket-col-4"></div>\n\t\t\t\t\t<div class="placeholder-bar placeholder-bucket-col placeholder-bucket-col-5"></div>\n\t\t\t\t\t<div class="placeholder-bar placeholder-bucket-col placeholder-bucket-col-4"></div>\n\t\t\t\t\t<div class="placeholder-bar placeholder-bucket-col placeholder-bucket-col-3"></div>\n\t\t\t\t\t<div class="placeholder-bar placeholder-bucket-col placeholder-bucket-col-2"></div>\n\t\t\t\t\t<div class="placeholder-bar placeholder-bucket-col placeholder-bucket-col-1"></div>    \n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="placeholder-bar placeholder-bucket-list"></div>\n\t\t</div>\n\t\t\t\n\t\t<div class="action-content-footer">\n\t\t\t<div class="placeholder-bar placeholder-button"></div>\n\t\t\t<div class="placeholder-bar placeholder-button placeholder-button-right"></div>\n\t\t</div>\n\t</div>\n</div>\n'},2532:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(54),i(2533),i(97),i(105),i(90),i(2534)],a=function(t,e,i,n,a,o){var l={restrict:"E",replace:true,template:i,scope:{cards:"="},controller:["$scope","$element","$timeout",function(t,i,l){t.alignment="horizontal";t.isFirefox=o.isFirefox();t.showSpacer=false;var s=10;var r=10;var c=1;var d=1024;var u=470;var p=.67;var f=void 0;var v=false;function g(e){var n=0;var a=0;var o=0;var l=0;if("horizontal"===t.alignment){o=2*(s+r)+2*c;l=2*(s+r)*e.length+c*e.length*2}else{o=2*(s+r)*e.length+c*e.length*2;l=2*(s+r)+2*c}var d=i.height()-o;var f=i.width()-l;if("horizontal"===t.alignment){a=f/e.length;n=a*p;if(n>d){n=d;a=n/p}if(a<u){t.alignment="vertical";return g(e)}}else{n=d;a=n/p;if(a>f){a=f;n=a*p}else if(a<u){a=u;n=a*p}}return{cardWidth:a,cardHeight:n}}function m(e){var o=t.cards;if(0===o.length)return;t.alignment=i.width()<d?"vertical":"horizontal";t.isFirefox&&"vertical"===t.alignment&&t.cards.length>1?t.showSpacer=true:t.showSpacer=false;var s=g(o);if(e||!f||f.cardHeight!==s.cardHeight||f.cardWidth!==s.cardWidth){f=s;var r=s.cardHeight+"px";var c=s.cardWidth+"px";o.forEach(function(t){t.size={"min-height":r,"max-height":r,height:r,"min-width":c,"max-width":c,width:c}});l(function(){v=true;t.$broadcast(a.Events.EditorDetailsPane.CardsResize);n.force("end")})}}t.$watch("cards",function(){m(true)});var b=e.throttle(m,250);n.on("update",function(){b(false)});n.on("end",function(){v?v=false:b(false)})}]};t.directive("qvCardPanel",function(){return l})}.apply(e,n),void 0!==a&&(t.exports=a))},2533:function(t,e){t.exports='<div class="qv-card-panel align-{{alignment}}">\n\t<div class="cards">\n\t\t<qv-card ng-repeat="card in cards" ng-if="card.template" template="card.template" card-tid="card.tid" size="card.size" model="card.model"></qv-card>\n\t\t<div ng-if="showSpacer" class="stu-card-spacer"></div>\n\t</div>\n</div>'},2534:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2535)],a=function(t,e){var i={restrict:"E",replace:true,template:e,scope:{template:"=",cardTid:"=",size:"=",model:"="},controller:["$scope",function(t){t.model&&Object.keys(t.model).forEach(function(e){t[e]=t.model[e]})}]};t.directive("qvCard",function(){return i})}.apply(e,n),void 0!==a&&(t.exports=a))},2535:function(t,e){t.exports='<div class="qv-card" tid="{{cardTid}}" ng-style="size">\n\t<div class="card-contents" ng-include src="template"></div>\n</div>'},2536:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2537),i(91),i(105),i(235),i(513),i(1195),i(2538),i(2542),i(2556),i(2558)],a=function(t,e,i,n){var a={restrict:"E",template:e,replace:true,scope:{},controller:["$scope","qvDataManagerDataService","qvDataManagerViewService","qvDataManagerSelectionService","qvDataManagerPreviewService",function(t,e,a,o,l){t.viewService=a;t.selectionService=o;t.previewService=l;t.dataService=e;t.$watch("selectionService.selectedObjects",function(e){t.viewService.gridEditorOpen||r(e)});t.$watch("viewService.gridEditorOpen",function(t){t?l.clearPreview():r(o.getSelectedObjects())});t.$watch("previewService.getPreviewPaneSize()",function(t,e){t!==e&&a.viewSizeChange("tableSelectionBottom",t,e)});t.$on(n.Events.TablePreview.UpdateTablePreview,function(){s()});function s(){if(!t.viewService.gridEditorOpen){l.clearPreview();r(o.getSelectedObjects())}}function r(t){var n=t.length;if(0==t.length)l.clearPreview();else if(1==t.length){var a=t[0];a.type===o.selectedObjectTypes.TABLE?e.getLoadModel().then(function(e){if(n!=t.length)return;var o=a.tableModel;var s=e.getSourceTableByQueryId(o.data.id);var r=null;"ScriptTable"!==o.sourceType&&(r=e.getTargetTableModelById(o.data.id));"ScriptTable"===o.sourceType?l.noDataPreview(o.data.name,i.get("DataManager.PreviewPanel.NoPreview.ScriptSynchronize"),"script"):r&&r.isMarkedForDeletion()?l.noDataPreview(o.data.name,i.get("DataManager.PreviewPanel.NoPreview.PendingDelete")):-1===o.noOfRows?l.noDataPreview(o.data.name,i.get("DataManager.PreviewPanel.NoPreview.LoadFailure")):l.previewTable(e,o,s&&s.getFilter())}):a.type===o.selectedObjectTypes.HUB?l.previewCentralHub(a.name):a.type===o.selectedObjectTypes.LINK&&(a.objects.every(function(t){return t.type===o.selectedObjectTypes.TABLE})?e.getLoadModel().then(function(e){if(n!=t.length)return;l.previewAssociation(e,a.objects[0].tableModel.data.id,a.objects[1].tableModel.data.id)}):a.objects.some(function(t){return t.type===o.selectedObjectTypes.HUB})&&l.previewMessage("DataManager.Preview.SelectAnotherAssociationLink"))}else if(2===t.length){var s=o.getSelectedTables();var r=t.some(function(t){return t.type==o.selectedObjectTypes.LINK});r&&2===s.length&&e.getLoadModel().then(function(e){if(n!=t.length)return;l.previewAssociation(e,s[0].data.id,s[1].data.id)})}}}]};t.directive("qvDataManagerPreview",function(){return a})}.apply(e,n),void 0!==a&&(t.exports=a))},2537:function(t,e){t.exports='<div tid="dm-preview-panel-container"  \n\tclass="qv-datamanager-preview qv-animate preview-panel-{{previewService.getPreviewPaneSize()}}" \n\tng-class="{\'preview-panel-visible\': previewService.previewPaneIsOpen()}">\n\t<div class="preview-panel-contents" ng-if="previewService.previewPaneIsOpen()" ng-switch on="previewService.getPreviewType()">\n\t\t<div class="table-preview" ng-switch-when="table">\n\t\t\t<qv-data-manager-table-preview-panel preview-data="previewService.previewData"></qv-data-manager-table-preview-panel>\n\t\t</div>\n\t\t<div class="association-preview" ng-switch-when="association">\n\t\t\t<qv-data-manager-associations-preview-panel preview-data="previewService.previewData"></qv-data-manager-associations-preview-panel>\n\t\t</div>\n\t\t<div class="central-hub-preview" ng-switch-when="central-hub">\n\t\t\t<qv-data-manager-central-hub-panel preview-data="previewService.previewData"></qv-data-manager-central-hub-panel>\n\t\t</div>\n\t\t<div class="message-preview" ng-switch-when="message">\n\t\t\t<qv-data-manager-message-panel preview-data="previewService.previewData"></qv-data-manager-message-panel>\n\t\t</div>\n\t\t<div class="no-preview" ng-switch-default>\n\t\t\t<div class="table-preview-header" ng-if="previewService.previewData.tableName">\n\t\t\t\t<div class="table-name">{{previewService.previewData.tableName}}</div>\n\t\t\t</div>\n\t\t\t<div class="no-preview-content">\n\t\t\t\t<div tid="dm-preview-panel-no-preview-text" class="no-preview-text" ng-if="previewService.previewPaneIsActive()">{{previewService.previewData.warningMsg}}</div>\n\t\t\t\t<span ng-class="{\'previewSync\':previewService.previewPaneIsActive()}"><lui-button q-translation="DataManager.ScriptedTables.Sycrhonize" ng-if="previewService.enableSync() === true" ng-click="dataService.convertScriptedToManaged(\'all\')"/></span>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t</div>\n</div>'},2538:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(91),i(2539),i(151),i(89),i(1156),i(235),i(1150),i(2540),i(1195)],a=function(t,e,i,n,a,o){var l={restrict:"E",template:i,scope:{previewData:"="},controller:["$scope","qvDataManagerDataService","qvDataManagerPreviewService",function(t,i,l){t.previewService=l;t.qvObjectObject={};var s=false;function r(){var i=t.previewData.table;if(i){t.tableName=i.data.name;var a=o.filterTransformationFieldsWithType(i,[n.DSMTypes.Transformations.lookupGeoInfo]);t.filter=t.previewData.filter&&t.previewData.filter.filterClause;t.tableInfo=e.get("DataManager.Overview.TableFields",a.length||0);t.hasGeoField=o.doesTableContainTransformQuery(i,[n.DSMTypes.Transformations.geoPoint,n.DSMTypes.Transformations.lookupGeoInfo]);var s=i.getStatus();switch(s){case n.DSMTypes.QueryStatus.delete:t.tableStatus=e.get("DataManager.Overview.WillBeDeleted");break;case n.DSMTypes.QueryStatus.update:t.tableStatus=e.get("DataManager.Overview.WillBeUpdated");break;case n.DSMTypes.QueryStatus.add:t.tableStatus=e.get("DataManager.Overview.WillBeAdded");break;default:t.tableStatus="";break}t.tableSource=l.tableSource(i)}else{t.tableInfo="";t.tableName=""}}function c(){t.qvObjectModel=null;r();var e=null;if(!t.previewData.loadModel.getTargetTableModelById(t.previewData.table.data.id))return t.previewData.table.data.id;d();return i.getStraightTablePreview(t.previewData.loadModel,t.previewData.table.data.id,e).then(function(e){var i={template:'<qv-preview-panel-table-header header-model="header" dm-model="dmmodel"></qv-preview-panel-table-header>',model:{},height:"30px"};t.qvObjectOptions={selections:false,useAllSpace:true,customHeader:i,virtualHorizontalScroll:true,minColumnWidth:80,externalInterface:{}};t.qvObjectModel=e.genObj;return e.tableId}).finally(function(){u()})}function d(){t.showSpinner=true}function u(){t.showSpinner=false}function p(){if(l.previewPaneIsActive()){if(!s){s=true;c().then(function(e){s=false;e!==t.previewData.table.data.id&&p()})}}else{t.qvObjectModel=null;r()}}function f(e){var i=t.previewData.table.getTableRefs();e&&i&&e.some(function(t){return i.indexOf(t)>=0})&&p();return a.resolve()}t.$watch("previewData",function(t,e){t!==e&&p()});t.$watch("previewService.previewPaneIsActive()",function(t,e){t!==e&&p()});i.registerTablesRefreshedHandler(f);t.$on("$destroy",function(){i.unregisterTablesRefreshedHandler(f)});p()}]};t.directive("qvDataManagerTablePreviewPanel",function(){return l})}.apply(e,n),void 0!==a&&(t.exports=a))},2539:function(t,e){t.exports='<div class="qv-data-manager-table-preview-panel">\n\t<div class="table-preview-header">\n\t\t<div class="group left">\n\t\t\t<span ng-if="filter"  title="{{filter}}" class="lui-icon lui-icon--filter"></span>\n\t\t\t<div class="text table-name">{{tableName}}</div>\n\t\t\t<div class="text table-source">{{tableSource}}</div>\n\t\t</div>\n\t\t<div class="group right">\n\t\t\t<div class="text table-status">{{tableStatus}}</div>\n\t\t\t<div tid="dm-preview-panel-table-info" class="text table-info">{{tableInfo}}</div>\n\t\t\t<div class="geo-icon lui-icon lui-icon--map" ng-if="hasGeoField"></div>\n\t\t</div>\n\t</div>\n\n\t<div tid="dm-preview-panel-table-preview-body" class="table-preview-body" ng-if="previewService.previewPaneIsActive()">\n\t\t<qv-object model=\'qvObjectModel\'\n\t\t\t\t   ng-if="qvObjectModel"\n\t\t\t\t   object=\'qvObjectObject\'\n\t\t\t\t   options=\'qvObjectOptions\'></qv-object>\n\t\t<qv-spinner class="spinner" show="showSpinner"  show-delay="200" show-for-at-least="300" spinner-height="100px" spinner-width=100px" center-in-parent="true"></qv-spinner>\n\t</div>\n</div>\n'},2540:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2541)],a=function(t,e){t.directive("qvPreviewPanelTableHeader",[function(){return{scope:{headerModel:"=",dmModel:"="},restrict:"E",template:e}}])}.apply(e,n),void 0!==a&&(t.exports=a))},2541:function(t,e){t.exports='<div class="field-name" title="{{headerModel.text}}">{{headerModel.text}}</div>'},2542:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2543),i(91),i(2544),i(2545),i(2546),i(2547),i(2548),i(2549),i(2550),i(253),i(493),i(1794),i(1680),i(1194),i(1008),i(163),i(2551),i(235),i(2552),i(1195),i(2554),i(1332)],a=function(t,e,i,n,a,o,l,s,r,c,d,u,p,f,v,g,m){var b=t.getService("$templateCache");b.put("association-panel-recommendation.ng.html",n);b.put("association-panel-message.ng.html",a);b.put("association-panel-bad.ng.html",o);b.put("association-panel-custom.ng.html",l);b.put("association-panel-group-bad.ng.html",r);b.put("association-panel-group-good.ng.html",s);var h=p.ASSOCIATION;var y={replace:true,restrict:"E",template:e,scope:{previewData:"="},link:function t(e,i){var n=i.find(".edit INPUT");e.clearFocusAssociationNameInput=function(){n.blur()}},controller:["$scope","$element","$timeout","qvDataManagerPreviewService","qvDataManagerDataService","qvDataManagerViewService","$window","qvDataManagerAssociationService",function(e,n,a,o,l,s,r,b){e.previewService=o;e.isProfiling=false;e.recommendedAssociations=[];e.leftPreviewTable={};e.rightPreviewTable={};e.help={syntheticKeyUrl:m.path+"QuickDataLoad_SyntheticKey"};s.OnAssociationEditorOpen.bind(q);var y=p.create(e.previewData.loadModel);var T=t.getService("qvLoader");var M;function w(){a.cancel(M);var t=350;M=a(function(){T.isOpen()?M=a(w,0):T.show({template:c,messageObj:{task:"DataPrep.Recommendations.Profiling"},appendTo:n,mediumLoader:true})},t)}function S(){a.cancel(M);e.isProfiling=false;T.close(true)}function D(){return F()}l.registerInvalidationHandler(D);e.$on("$destroy",function(){l.unregisterInvalidationHandler(D);s.OnAssociationEditorOpen.unbind(q)});function x(e){l.getLoadModel().then(function(i){var n=i.getTargetTableModel(e.left.table);var a=i.getTargetTableModel(e.right.table);var o=null;var l=null;var s=null;if(e.type===h.BAD){var r=n.isFieldNameInUse(e.left.field);o=r&&r.id?r.id:null;var c=a.isFieldNameInUse(e.right.field);l=c&&c.id?c.id:null;var d=u.LoadModelAssociations.getAssociationNamesBetween(i,n,null,a,null);s=d&&d.length>0?d[0]:""}var p={title:"AnalyzeModel.title",message:"AnalyzeModel.loading.message",leftTableId:n.data.id,leftFieldId:o,leftTableLocked:true,rightTableId:a.data.id,rightFieldId:l,rightTableLocked:true,name:s,editingAssociation:false,showBreakAssociationWarning:false,loadModel:i,setAssociation:function t(e){var n=i.getTargetTableModelById(e.leftTable.tableId);var a=i.getTargetTableModelById(e.rightTable.tableId);var o={table1:n,key1:e.leftTable.expression,table2:a,key2:e.rightTable.expression,name:e.name};v.setAssociation(i,o);i.setProperties()},cancel:function t(){},areTablesAlreadyAssociated:function t(e,n){return v.getAssociationsBetweenTables(i,e,n).length>0}};return t.getService("luiDialog").show({template:f.template,controller:f.controller,input:{context:p}})})}function C(t){e.currentRecommendation=t.cloneForEditing();if(e.currentRecommendation){e.recommendedAssociations=e.currentRecommendation.associations.filter(function(t){return t.show});var i=e.currentRecommendation.associations.filter(function(t){return t.isDefault()&&t.show})[0];e.currentAssociation=i||e.currentRecommendation.associations[0];E();A();o.previewPaneIsActive()&&I(e.currentRecommendation.leftTable,e.currentRecommendation.rightTable)}a(function(){e.$broadcast("resetPager")})}function E(){var t=e.currentAssociation.score>=.75?1:e.currentAssociation.score<.5?3:2;e.associationClasses={success:1===t,warning:2===t,error:3===t}}function A(){e.enableEditRecommendation=true;if(e.currentAssociation.type===h.GOODGROUP||e.currentAssociation.type===h.BADGROUP){e.currentAssociationName=i.get("DataManager.PreviewPanel.Label.SyntheticKey");e.currentRecommendation.currentAssociationName=e.currentAssociationName;e.syntheticAssociation=true}else{var t=e.previewData.loadModel,n=t.getTargetTableModel(e.currentRecommendation.leftTable),a=t.getTargetTableModel(e.currentRecommendation.rightTable),o=u.LoadModelAssociations.getAssociationNamesBetween(t,n,null,a,null);e.currentAssociationName=o&&o.length>0?o[0]:"";e.currentRecommendation.currentAssociationName=e.currentAssociationName;if(!e.currentRecommendation.currentAssociationName){e.enableEditRecommendation=false;var l=b.getAssociationSelectedToPreview();if(l){e.currentAssociationName=l.name;e.currentRecommendation.currentAssociationName=e.currentAssociationName}}e.syntheticAssociation=false}e.currentRecommendation.currentAssociationTooltip=i.get("DataManager.PreviewPanel.Label.SelectedAssociationName",e.currentAssociationName)}function k(t,e){var i={isLoaded:false,name:t,fields:e.fieldNames.map(function(t){return{name:t,alias:t}})},n=[];e.data.forEach(function(t,e){var i=t.values.map(function(t,e){return{cellNr:"_"+e,value:t.text}});i.rowNr=e;n.push(i)});i.rows=n;return i}function I(t,i){var n=e.previewData.loadModel;var a;if(t!==e.leftPreviewTable.name){e.leftPreviewTable={};a=n.getTargetTable(t);a&&l.getTargetTablePreview(a.name).then(function(i){e.leftPreviewTable=k(t,i)})}if(i!==e.rightPreviewTable.name){e.rightPreviewTable={};a=n.getTargetTable(i);a&&l.getTargetTablePreview(a.name).then(function(t){e.rightPreviewTable=k(i,t)})}}function F(t){if(t||e.status){e.status=null;e.isProfiling=true}o.previewPaneIsActive()&&w();y.clear();return l.getAllRecommendations().then(function(t){y.setAssociationData(t.result);O();S();e.isProfiling=false},P)}function O(){e.clearFocusAssociationNameInput&&e.clearFocusAssociationNameInput();e.leftPreviewTable={};e.rightPreviewTable={};var t=e.previewData.loadModel.getTargetTableModelById(e.previewData.source);var n=e.previewData.loadModel.getTargetTableModelById(e.previewData.target);var a=b.getAssociationSelectedToPreview();var o=y.getRecommendation(t.data.name,n.data.name,a);o?C(o):e.status=i.get("DataPrep.Recommendations.NoRecommendationsFromDPS")}function P(t){e.status=i.get("DataPrep.Recommendations.ProfilingFailed");if(t.error&&t.error.name){var n=i.get(t.error.name,t.error.parameters);n!==t.error.name&&(e.errorMessage=n);t.error.data&&(Array.isArray(t.error.data)?e.errorData=t.error.data:e.errorData=[t.error.data]);t.isHandled=true}S()}function q(){if(e.showRecommendations)e.showRecommendations=false;else{o.previewPaneIsActive()||o.activatePreviewPanel();e.showRecommendations=true}}e.onAssociationChickletClick=function(t){if(t.type===h.CUSTOM||t.type===h.BAD)x(t);else{if(e.currentAssociation&&e.currentAssociation===t)return;e.currentAssociation=t;y.resolve(e.currentRecommendation,e.currentAssociation)}};e.validateAssociationName=function(t,i){var n=e.previewData.loadModel,a=n.getTargetTableModel(e.currentRecommendation.leftTable),o=n.getTargetTableModel(e.currentRecommendation.rightTable),l=[a,o];var s=[e.currentAssociation.left.field,e.currentAssociation.right.field];return g.validateAssociationName(n,l,t,i,s)};e.saveAssociationName=function(){if(e.currentRecommendation&&e.currentRecommendation.currentAssociationName!==e.currentAssociationName){var t=e.previewData.loadModel;u.LoadModelAssociations.renameAssociation(t,e.currentRecommendation.currentAssociationName,e.currentAssociationName);d.updateProperties(t.serialize());e.currentRecommendation.currentAssociationName=e.currentAssociationName;e.currentRecommendation.currentAssociationTooltip=i.get("DataManager.PreviewPanel.Label.SelectedAssociationName",e.currentAssociationName)}};e.toggleEditRecommendation=function(){e.showRecommendations?s.setAssociationEditorOpen(false):s.setAssociationEditorOpen(true)};e.$watch("previewData",function(t,e){t!==e&&O()});e.openHelpWindow=function(t){r.open(t)};e.$watch("previewService.previewPaneIsActive()",function(t,i){if(t!==i)if(t)e.currentRecommendation&&I(e.currentRecommendation.leftTable,e.currentRecommendation.rightTable);else{e.leftPreviewTable={};e.rightPreviewTable={};e.showRecommendations=false;S()}});F(true)}]};t.directive("qvDataManagerAssociationsPreviewPanel",function(){return y})}.apply(e,n),void 0!==a&&(t.exports=a))},2543:function(t,e){t.exports='<div class="qv-datamanager-associations-panel" ng-class="{\'show-recommendations\': showRecommendations}">\n\n\t<div ng-show="status" class="qv-hldm-recommendations-status">{{status}}</div>\n\t\x3c!-- very temporary way of showing what is going on --\x3e\n\t<div ng-show="status" class="qv-hldm-recommendations-errormessage">{{errorMessage}}</div>\n\t<div ng-show="status" class="qv-hldm-recommendations-errormessage" ng-repeat="errorText in errorData">{{errorText}}</div>\n\n\t<div ng-show="!isProfiling && !status" class="qv-hldm-recommendation">\n\t\t<div class="qv-hldm-profile">\n\t\t\t<div class="qv-hldm-associations">\n\t\t\t\t<div class="qv-hldm-associations-close">\n\t\t\t\t\t<button class="lui-fade-button" ng-click="toggleEditRecommendation()"><span class="lui-fade-button__icon lui-icon lui-icon--arrow-down"></span></button>\n\t\t\t\t</div>\n\t\t\t\t<div class="qv-hldm-associations-chicklets" qv-dynamic-content-pager>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li class="qv-associationChicklet" ng-repeat="assoc in recommendedAssociations"\n\t\t\t\t\t\t\tng-class="{\'selected\': assoc === currentAssociation}"\n\t\t\t\t\t\t\tng-click="onAssociationChickletClick(assoc);" ng-include src="assoc.templateSrc">\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<a class="qv-pager-nav inverted qv-pager-previous" ng-click="prevPage()" q-title-translation="Tooltip.Previous"><i class="lui-icon lui-icon--arrow-left"></i></a>\n\t\t\t\t\t<a class="qv-pager-nav inverted qv-pager-next" ng-click="nextPage()" q-title-translation="Tooltip.Next"><i class="lui-icon lui-icon--arrow-right"></i></a>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="qv-hldm-table-titles">\n\t\t\t\t<div class="table-title left-title" title="{{leftPreviewTable.name}}">{{leftPreviewTable.name}}</div>\n\n\t\t\t\t<div class="qv-selected-association">\n\t\t\t\t\t<div class="summary" ng-hide="showRecommendations">\n\t\t\t\t\t\t<div class="association">\n\t\t\t\t\t\t\t<div class="field left-field" title="{{currentAssociation.left.field}}">{{currentAssociation.left.field}}</div>\n\t\t\t\t\t\t\t<button tid="preview-panel-name-button" class="name lui-button lui-button--toolbar" ng-class="[associationClasses, {\'synthetic-association\': syntheticAssociation}]" ng-disabled="!enableEditRecommendation" ng-click="toggleEditRecommendation()" title="{{currentRecommendation.currentAssociationTooltip}}">\n\t\t\t\t\t\t\t\t<span class="lui-button__icon lui-icon circle"></span>\n\t\t\t\t\t\t\t\t<span tid="preview-panel-name-button-text" class="lui-button__text text">{{currentRecommendation.currentAssociationName}}</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<div class="field right-field" title="{{currentAssociation.right.field}}">{{currentAssociation.right.field}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="edit" ng-show="showRecommendations">\n\t\t\t\t\t\t<div class="label" q-translation="DataManager.PreviewPanel.Label.AssociationName"></div>\n\t\t\t\t\t\t<div class="synthetic-association" ng-show="syntheticAssociation">{{currentAssociationName}}\n\t\t\t\t\t\t<span class="lui-icon lui-icon--help" ng-click="openHelpWindow(help.syntheticKeyUrl)" q-title-translation="{{warning.helpTooltip}}"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<association-recommendations-input\n\t\t\t\t\t\t\t\tng-hide="syntheticAssociation"\n\t\t\t\t\t\t\t\tmodel="currentAssociationName"\n\t\t\t\t\t\t\t\teditable="!syntheticAssociation"\n\t\t\t\t\t\t\t\tinput-placeholder-text="DataPrep.Recommendations.CustomField"\n\t\t\t\t\t\t\t\tvalidate="validateAssociationName"\n\t\t\t\t\t\t\t\tmodified-callback="saveAssociationName"\n\t\t\t\t\t\t\t\tvalidation-popup-position="\'top\'"\n\t\t\t\t\t\t></association-recommendations-input>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="table-title right-title" title="{{rightPreviewTable.name}}">{{rightPreviewTable.name}}</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="qv-hldm-preview" ng-class="associationClasses">\n\t\t\t<div class="primary-table-container table-container">\n\t\t\t\t<div class="flex-scroll-workaround">\n\t\t\t\t\t<qv-hldm-table-preview table="leftPreviewTable"\n\t\t\t\t\t\t\t\t\t\t   association="currentAssociation.left"\n\t\t\t\t\t\t\t\t\t\t   affected="currentAssociation.affected.left"></qv-hldm-table-preview>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="secondary-table-container table-container">\n\t\t\t\t<div class="flex-scroll-workaround">\n\t\t\t\t\t<qv-hldm-table-preview table="rightPreviewTable"\n\t\t\t\t\t\t\t\t\t\t   association="currentAssociation.right"\n\t\t\t\t\t\t\t\t\t\t   affected="currentAssociation.affected.right"></qv-hldm-table-preview>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n</div>'},2544:function(t,e){t.exports='<div class="qv-associationChicklet-holder">\n\t<div class="qv-inner-associationChicklet">\n\t    <span title="{{assoc.left.field}}">{{assoc.left.field}}</span>\n\t    <span ng-hide="assoc.left.field === assoc.right.field" title="{{assoc.right.field}}">{{assoc.right.field}}</span>\n    </div>\n\t<div class="qv-hldm-field-match-container">\n\t\t<span class="qv-hldm-field-match-remainder"></span><span class="qv-hldm-field-match" ng-class="{ success: assoc.score >= 0.75, warning: assoc.score < 0.75 && assoc.score >= 0.5, error: assoc.score < 0.5 }" ng-style="{width: assoc.scoreTxt}"></span>\n\t</div>\n</div>\n'},2545:function(t,e){t.exports='<div class="qv-associationChicklet-holder message-container">\n  <span title="{{assoc.text}}">{{assoc.text}}</span>\n  <i class="lui-icon lui-icon--tick recommend" ng-show="assoc.status.resolved"></i>\n</div>\n'},2546:function(t,e){t.exports='<div class="qv-associationChicklet-holder qv-badAssociation">\n\t<div class="qv-inner-associationChicklet">\n\t\t<span title="{{assoc.left.field}}">{{assoc.left.field}}</span>\n\t\t<span ng-hide="assoc.left.field === assoc.right.field" title="{{assoc.right.field}}">{{assoc.right.field}}</span>\n    </div>\n\t<div class="qv-hldm-field-match-container">\n    \t<span class="qv-hldm-field-match error" ng-style="{width: assoc.scoreTxt}" ng-if="!assoc.text2"></span>\n\t</div>\n    <span class="edit-association-btn lui-icon lui-icon--edit"></span>\n</div>'},2547:function(t,e){t.exports='<div class="qv-associationChicklet-holder message-container">\n  <span title="{{assoc.text}}">{{assoc.text}}</span>\n  <i class="lui-icon lui-icon--tick recommend" ng-show="assoc.status.resolved"></i>\n</div>\n'},2548:function(t,e){t.exports='<div class="qv-associationChicklet-holder">\n\t<div class="qv-inner-associationChicklet">\n\t\t<span class="group-text" title="{{assoc.left_text}}">{{assoc.left_text}}</span>\n\t\t<span class="group-text" title="{{assoc.right_text}}">{{assoc.right_text}}</span>\n    </div>\n\t<div class="qv-hldm-field-match-container">\n    \t<span class="qv-hldm-field-match" ng-class="{ success: assoc.score >= 0.75, warning: assoc.score < 0.75 && assoc.score >= 0.5, error: assoc.score < 0.5 }" ng-style="{width: assoc.scoreTxt}"></span>\n\t</div>\n</div>\n'},2549:function(t,e){t.exports='<div class="qv-associationChicklet-holder">\n\t<div class="qv-inner-associationChicklet">\n    \t<span class="group-text" title="{{assoc.left_text}}">{{assoc.left_text}}</span>\n\t\t<span class="group-text" title="{{assoc.right_text}}">{{assoc.right_text}}</span>\n    </div>\n\t<div class="qv-hldm-field-match-container">\n    \t<span class="qv-hldm-field-match error" ng-style="{width: assoc.scoreTxt}"></span>\n\t</div>\n</div>\n'},2550:function(t,e){t.exports='<div class="qv-block-ui" style="opacity: .8" ng-class="{\'qv-fade-out\': fadeOut}">\n\t<div class="qv-loader-container" ng-class="ngClasses">\n\t\t<div class="qv-loader"></div>\n\t</div>\n\t<div class="qv-loader-text" ng-if="messageObj" ng-class="ngClasses">\n\t\t<div ng-show="messageObj.task" q-translation="{{messageObj.task}}"></div>\n\t\t<div ng-show="messageObj.message" q-translation="{{messageObj.message}}"></div>\n\t</div>\n</div>'},2551:function(t,e,i){"use strict";var n,a;!(n=[i(11),i(48),i(99),i(97)],a=function(t,e,i,n){var a="",o="",l=">li",s=0,r="horizontal",c=null,d=null;e.directive("qvDynamicContentPager",["$timeout",function(e){return{restrict:"A",priority:0,link:function u(p,f,v){r=v.qvPagerOrientation?v.qvPagerOrientation:r;l=v.qvItemSelector?v.qvItemSelector:l;s=0;i.treatAsDesktop()||("horizontal"===r?f.css("overflow-x","auto"):f.css("overflow-y","auto"));a="horizontal"===r?"left":"top";o="horizontal"===r?"outerWidth":"outerHeight";f.addClass("qv-pager");c=f.children()?f.children().first():null;if(c){d=t(c);d.css(a,0);d.addClass("qv-scrolling-container-"+("horizontal"===r?"left":"top"))}function g(e){var i=s;e=e>0?1:-1;var n=f.parent()[o]();var a=c.find(l);var r=0;var d=t(a[s]);r+=d[o]();while(r<n&&i>=0&&i<a.length){i+=e;if(i===a.length)d=null;else if(i>=0){d=t(a[i]);r+=d[o]()}}return{itemIndex:Math.max(0,i),element:d}}function m(t){var e=g(t);var i=e.element.position();s=e.itemIndex;d.css(a,-Math.max(0,i[a]))}function b(){m(1)}function h(){m(-1)}function y(){var t=false;var e=g(1);e.element&&(t=true);return t}function T(){var t="";f.removeClass("qv-pager-back qv-pager-forward");if(0!==s){p.showShadow=true;t+="qv-pager-back "}else p.showShadow=false;y()&&(t+="qv-pager-forward ");f.addClass(t)}function M(){s=0;d.css(a,0);T()}p.nextPage=function(){e(function(){b();T()})};p.prevPage=function(){e(function(){h();T()})};p.$on("refreshPager",T);p.$on("resetPager",M);n.on("end",T);p.$on("$destroy",function(){n.off("end",T)})}}}])}.apply(e,n),void 0!==a&&(t.exports=a))},2552:function(t,e,i){"use strict";var n,a;!(n=[i(10),i(48),i(2553),i(264)],a=function(t,e,i,n){e.directive("associationRecommendationsInput",["luiTooltip",function(e){return{restrict:"E",template:i,scope:{validate:"=",model:"=",maxlength:"@",minlength:"@",clearFieldStateCallback:"=",editable:"=",modifiedCallback:"=",focusCallback:"=",inputPlaceholderText:"="},link:function i(a,o){var l,s,r;a.realErrors=false;a.errorState=false;var c=o.find(".lui-input");var d=c[0];var u={template:n.template,controller:n.controller,input:{item:"",style:{"max-width":"350px"}},alignTo:d,dock:"top"};function p(){r&&r.close()}function f(t){u.input.item=t[0].msg;r=e.show(u)}a.onChange=function(){p();l=a.model===s?[]:a.validate(a.model,s);a.errorState=false;if(l.length){a.errorState=l.some(function(t){return"error"===t.type});f(l)}};a.onFocus=function(){a.focusCallback&&a.focusCallback(s,a.model);s=t.copy(a.model)};a.onBlur=function(e){p();if(a.errorState){a.model=t.copy(s);a.onChange()}else{a.modifiedCallback&&s!==a.model&&a.modifiedCallback(s,a.model);s=t.copy(a.model)}e&&void 0!==e.relatedTarget&&a.focusCallback&&a.focusCallback(null)};a.onKeyDown=function(e){switch(e.which){case 27:a.model=t.copy(s);a.onChange();case 9:case 13:setTimeout(function(){o.find("input").blur()},0);break;default:}};a.$on("forceBlurInput",function(){if(c.is(":focus")){d.blur();a.onBlur()}})}}}])}.apply(e,n),void 0!==a&&(t.exports=a))},2553:function(t,e){t.exports='<input   \n   ng-class="{ inputClass: inputClass, \'invalid-input\': errorState }"\n   class="lui-input"\n   type="text"\n   ng-model="model"\n   q-placeholder="{{inputPlaceholderText}}"\n   ng-keydown="onKeyDown( $event )"\n   maxlength="{{maxlength}}"\n   minlength="{{minlength}}"\n   ng-change="onChange($event)"\n   ng-blur="onBlur( $event )"\n   ng-focus="onFocus()"\n   ng-disabled="!editable"\n/>\n'},2554:function(t,e,i){"use strict";var n,a;!(n=[i(11),i(48),i(2555)],a=function(t,e,i){e.directive("qvHldmTablePreview",["$timeout",function(e){return{restrict:"E",replace:true,template:i,scope:{table:"=",association:"=",affected:"="},controller:["$scope","$element",function(i,n){var a;this.scrollHighlightedColumnIntoView=function(){e.cancel(a);if(!i.table||!i.table.name)return;i.table.isLoaded=true;a=e(function(){var e=t("th.highlighted",n[0]),i,a,o,l;if(e.length){i=e[0].clientWidth;e=e.position().left;o=n[0].parentElement||0;if(o){o=n[0].parentElement.clientWidth;l=i>o?0:o/2+i/2;a=n[0].parentElement.scrollLeft+e-l;t(n[0].parentElement).animate({scrollLeft:a})}}})};i.$watchCollection("association",this.scrollHighlightedColumnIntoView);i.highlight=function(t,e){return Array.isArray(e)?e.indexOf(t.name)>=0:t.name===e};i.getClass=function(t){var e,n,a=i.association,o=i.affected;if(!a)return;if(a.fields){e=a.fields.filter(function(e){return e.field===t.alias})[0];n=e?e.type:-1}else t.alias===a.field&&(n=a.type);var l="";n>=0?l="highlighted highlight-"+(0===n?"bad":"good"):o&&o.some(function(e){return t.alias===e.field})&&(l="highlight-affected");return l}}]}}]);e.directive("moveIntoView",["$timeout",function(t){return{require:"^qvHldmTablePreview",link:function e(i,n,a,o){i.$last&&t(function(){o.scrollHighlightedColumnIntoView(true)})}}}]);e.directive("qvGenerateCells",function(){return{replace:false,restrict:"A",link:function t(e,i){function n(){var t,n=document.createDocumentFragment(),a,o,l,s,r;while(t=i[0].lastChild)i[0].removeChild(t);if(e.table&&e.table.rows&&e.table.rows.length)for(s=0;s<e.table.rows.length;s++){a=e.table.rows[s];o=document.createElement("tr");for(r=0;r<a.length;r++){l=document.createElement("td");l.textContent=a[r].value;o.appendChild(l)}n.appendChild(o)}i[0].appendChild(n)}e.$watch("table",function(){n()})}}})}.apply(e,n),void 0!==a&&(t.exports=a))},2555:function(t,e){t.exports='<table>\n    <colgroup>\n        <col ng-repeat="field in table.fields" ng-class="getClass(field, association)"/>\n    </colgroup>\n    <thead>\n        <tr>\n            <th move-into-view ng-repeat="field in table.fields"\n                ng-class="getClass(field)"\n                title="{{field.alias}}"><div class="fieldHeader">{{field.alias}}&nbsp;</div></td>\n        </tr>\n    </thead>\n    <tbody qv-generate-cells>\n    </tbody>\n</table>'},2556:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2557)],a=function(t,e){var i={restrict:"E",template:e,scope:{previewData:"="}};t.directive("qvDataManagerCentralHubPanel",function(){return i})}.apply(e,n),void 0!==a&&(t.exports=a))},2557:function(t,e){t.exports='<div class="qv-datamanager-central-hub-panel">\n\t<div class="hub-button">\n\t\t<button class="name lui-button lui-button--toolbar lui-disabled">\n\t\t\t<span class="lui-button__icon lui-icon circle"></span>\n\t\t\t<span class="lui-button__text text">{{previewData.name}}</span>\n\t\t</button>\n\t</div>\n\t<div class="hub-message">\n\t\t<div class="message" q-translation="DataManager.Preview.SelectTwoAssociationLinks"></div>\n\t</div>\n</div>'},2558:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2559),i(91)],a=function(t,e,i){var n={restrict:"E",template:e,scope:{previewData:"="},controller:["$scope",function(t){t.$watch("previewData.messageKey",function(e){t.message=i.get(e)})}]};t.directive("qvDataManagerMessagePanel",function(){return n})}.apply(e,n),void 0!==a&&(t.exports=a))},2559:function(t,e){t.exports='<div class="qv-data-manager-message-panel">\n\t<div class="message-text">{{message}}</div>\n</div>'},2560:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2561),i(11),i(54),i(151),i(91),i(1008),i(90),i(103),i(263),i(1359),i(2562),i(2563),i(2565),i(235),i(513),i(1801),i(1150),i(611)],a=function(t,e,i,n,a,o,l,s,r){var c={restrict:"E",template:e,replace:true,scope:{},controller:["$scope","$element","qvDataManagerDataService","qvDataManagerViewService","qvDataManagerSelectionService","qvDataManagerConcatService","qvDataManagerCapabilityService",function(t,e,c,d,u,p,f){t.viewService=d;t.selectionService=u;t.concatService=p;t.joinTablesFlag=f.getFlag("DM_join_tables");if(t.joinTablesFlag){t.loadModel=void 0;c.getLoadModel().then(function(e){t.loadModel=e})}t.concatMappings={mappings:[]};t.showData={show:false};t.showSourceFields={show:false};t.concatenateQueries=Q;t.toggleAccordionForTable=P;t.expanded="table2";t.helpLabel=o.get("DataManager.ForcedConcatDialog.DialogInformation");t.getViewSize=q;t.toggleViewSize=L;t.scrollBehaviour={auto:true};t.hoverField={field:void 0,isLeftField:false,isRightField:true};t.selectionInfo={};t.fieldsStyleHolder={};t.topTableDropHint={};t.isPopulating=false;var v=[];t.$watch("concatService.getForcedConcatSize()",function(e,i){if("hidden"===e){t.showData.show=false;t.showSourceFields.show=false;v.forEach(function(t){t()});v.length=0;p.setDirty(false)}d.viewSizeChange("tableSelectionBottom",i,e)});t.cancel=function(){p.toggleForcedConcatMode();h="normal"};t.onDrop=E;t.doesAllowDrop=C;t.selectMapping=j;t.selectField=z;t.addField=x;t.removeField=D;t.swapTables=V;t.allowRemoval=B;t.fieldStats={fieldCount:0,matchRate:0,mappedFieldCount:0,unmappedFieldCount:0};t.isSafari=s.isSafari();var g={left:-1,firstTime:true};var m=30;var b=false;var h="normal";t.validateField=function(e,i){return c.getLoadModel().then(function(n){var a=l.validateConcatFieldName(n,[t.concatMappings.table1.table,t.concatMappings.table2.table],t.concatMappings.mappings,i,e);return a})};t.nameModified=function(){p.setDirty(true)};t.validateTable=function(e){return c.getLoadModel().then(function(i){var n=l.validateConcatTableName(i,[t.concatMappings.table1.table,t.concatMappings.table2.table],e);return n})};t.$on("summarySelected",function(e,n,a){var o=n.offsetParent();var l=n.position();var s=false;if("table1"==a||"table2"==a){var r=n.outerHeight();var c=o.innerHeight();l.top+r>0&&l.top<c&&(s=true);s||n[0].scrollIntoView()}else if("mappingField"==a){if(!t.scrollBehaviour.auto)return;o=i(".tableAndHeaderHolder");var d=0;var u=n;while(u[0]!==o[0]){d+=u.position().left;if(u===u.offsetParent())break;u=u.offsetParent()}var p=n.outerWidth();var f=o.innerWidth();d+p>20&&d<f&&(s=true);s||n[0].scrollIntoView()}});t.$on("hoverOver",function(e,n,a,o,l){if(!b)return;var s=i(n.draggable).data("scopeObj");var r=U(s.data);var c="";if("mappingField"===l)if("right"===o){t.hoverField.mapping=a.mapping?a.mapping:a;t.hoverField.isRightField=true;t.hoverField.isLefttField=false;c=a.mapping&&!r?"addToUnMapped":a.mapping||r?!a.mapping&&r?"replace":"replaceMapped":"addTo"}else{t.hoverField.mapping=void 0;t.hoverField.isLeftField=true;t.hoverField.isRightField=false;c=r?"newAndRemove":"new"}t.hoverField.hoverHint=c;t.hoverField.mapping&&(t.hoverField.mapping.hoverHint=c);t.$apply()});t.$on("hoverOut",function(e,i,n,a){if(!b)return;var o=void 0;n&&(o=n.mapping?n.mapping:n);if(o===t.hoverField.mapping&&("right"===a&&t.hoverField.isRightField||"left"===a&&t.hoverField.isLeftField)){i.helper.find(".dropHint").attr("dropHint","");y()}t.$apply()});function y(){t.hoverField.mapping=void 0;t.hoverField.isLeftField=false;t.hoverField.isRightField=false}function T(t){return t-12}t.$on("dragstop",function(){t.fieldsStyleHolder.width="";y();clearInterval(t.intervalHandle);t.intervalHandle=-1;t.$apply()});t.$on("dragstart",function(){t.fieldsStyleHolder.width=T(i(".tableAndHeaderHolder")[0].scrollWidth);e.find(".anchorTableWrapper").droppable({classes:{"ui-droppable-hover":"drop-indicator"},greedy:true,tolerance:"pointer",accept:function t(e){return C(e,void 0,"left","mappingField")},drop:function t(e,i){E(e,i,void 0,"left","mappingField")},out:function e(i,n){t.$emit("hoverOut",n,void 0,"left","mappingField")},over:function e(i,n){t.$emit("hoverOver",n,void 0,"left","mappingField")}});g.firstTime=true;g.left=-1});t.$on("draggable",function(n,a){var o=a[1];var l=e.find(".tableAndHeaderHolder");var s=i(l).offset();var r=i(l).outerWidth();var c=i(l).outerHeight();var d=o.helper.outerWidth();var u=0;var p=5;b=false;o.offset.top>=s.top&&o.offset.top<=s.top+c&&o.offset.left>=s.left&&o.offset.left<=s.left+r&&(b=true);if(!g.firstTime){var f=Math.abs(g.left-o.offset.left);if(f<p)return;m=Math.max(f,m);if(g.left<o.offset.left){if(o.offset.top>=s.top&&o.offset.top<=s.top+c&&o.offset.left<s.left+r&&o.offset.left+d>s.left+r){l.scrollLeft(l.scrollLeft()+m);u-=m}}else if(g.left>o.offset.left&&o.offset.top>=s.top&&o.offset.top<=s.top+c&&o.offset.left<s.left&&o.offset.left+d>s.left){l.scrollLeft(l.scrollLeft()-m);u+=m}}g.firstTime=false;g.left=o.offset.left;if(0!==u&&-1==t.intervalHandle)t.intervalHandle=setInterval(function(){if(l[0].scrollWidth-l.scrollLeft()==l.outerHeight()||0===l.scrollLeft()){clearInterval(t.intervalHandle);t.intervalHandle=-1}else{var e=l.scrollLeft()-u;l.scrollLeft(e)}},300);else{clearInterval(t.intervalHandle);t.intervalHandle=-1}t.topTableDropHint.width=T(r);t.topTableDropHint.left=l.scrollLeft();t.$apply()});t.$watchCollection("selectionService.selectedObjects",function(t){if(!p.isInForcedConcatMode){h="normal";return}A(t)});c.registerInvalidationHandler(M);t.$on("$destroy",function(){c.unregisterInvalidationHandler(M)});function M(){p.isInForcedConcatMode&&c.getLoadModel().then(function(){A(u.getSelectedObjects())})}t.$watch("concatService.isInForcedConcatMode",function(){p.isInForcedConcatMode&&A(u.getSelectedObjects())});function w(){var e=t.concatMappings.mappings;e&&e.forEach(function(t){t.rightField?t.rightField.selected="":t.leftField&&(t.leftField.selected="");t.selected=""})}function S(e,i){var n=t.concatMappings.mappings;var a=false;i.mapped=false;i.selected="";if(e){if(e.leftField==i){a=true;i.mapping=void 0;e.leftField=void 0;if(e.rightField){e.rightField.mapped=false;e.rightField.selected="";e.rightField.mapping=void 0}}else if(e.rightField==i){i.mapping=void 0;e.rightField=void 0}e.rightField||e.leftField?a&&n.splice(n.indexOf(e),1):n.splice(n.indexOf(e),1)}}function D(t){var e=U(t);if(e){S(e,t);p.setDirty(true);N()}}function x(t,e){var i=G(t,"left"===e?"leftField":"rightField");p.setDirty(true);N();j(i,"",t,"left"===e?"table1":"table2");return i}function C(t,e,n){var a=false;var o=i(t).data("scopeObj");if(o){var l=U(o.data);var s=o.location;if(n===s){a=true;if("right"===n){var r;r=e.leftField||e.rightField?e:U(e);(e===o.data||r&&!r.leftField)&&(a=false)}}else if("left"===n){a=true;!l||l.leftField&&l.rightField||(a=false)}}return a}function E(e,n,a,o,l){t.fieldsStyleHolder.width="";if(!b){y();return}y();var s=i(n.draggable).data("scopeObj");var r=s.data;var c=s.location;var d=r;var u=U(d);if("mappingField"===l&&"left"===o){if(u&&(u.leftField&&!u.rightField||u.rightField&&!u.leftField))return;S(u,d);var f=x(r,c);j(f,void 0,d);t.$apply();return}var v;v=a.leftField||a.rightField?a:U(a);if(v===u)return;S(u,d);d.mapped=true;var g;if("left"===o){v.leftField&&v.leftField!=d&&(g=v.leftField);d.mapping=v;v.leftField=d}else{v.rightField&&v.rightField!=d&&(g=v.rightField);d.mapping=v;v.rightField=d}d.selected=v.selected;g&&G(g,"left"===o?"leftField":"rightField");p.setDirty(true);N();t.$apply()}function A(e){var i=[];e.length>0&&(i=k(e));if(i.length>0){var n,a;if(t.joinTablesFlag){n=e.length>0?t.loadModel.getTargetTableModelById(e[0].tableModel.data.id):void 0;a=e.length>1?t.loadModel.getTargetTableModelById(e[1].tableModel.data.id):void 0}else{n=e.length>0?e[0].tableModel:void 0;a=e.length>1?e[1].tableModel:void 0}t.isPopulating=true;p.getSuggestedMappings(i).then(function(e){t.concatMappings.table1=void 0;t.concatMappings.table2=void 0;t.concatMappings.mappings=[];_(n,a,e.mappings)}).finally(function(){t.isPopulating=false})}else{$();t.concatMappings.table1=void 0;t.concatMappings.table2=void 0;t.concatMappings.mappings=[];t.helpLabel=o.get("DataManager.ForcedConcatDialog.DialogInformation")}}function k(t){var e=[];t.forEach(function(t){t.tableModel&&e.push(t.tableModel.data.id)});return e}function I(t,e){var i;if(t&&e){var n=t.getField(e);if(n){var o=t.wasGeneratedByTransformation(n,a.DSMTypes.QueryTransformField.name,[a.DSMTypes.Transformations.lookupGeoInfo,a.DSMTypes.Transformations.geoPoint]);o||(i=n)}}return i}function F(t){var e=[];t.fields.forEach(function(i,n){var o=t.wasGeneratedByTransformation(i,a.DSMTypes.QueryTransformField.name,[a.DSMTypes.Transformations.lookupGeoInfo,a.DSMTypes.Transformations.geoPoint]);o||e.push({field:i,selected:false,label:(n+1).toString(),sampleValues:[]})});return e}function O(t,e){var i=void 0;if(e){var a=t.fields;var o=n.findWhere(a,{field:I(t.table,e.id)});i=o}return i}function P(e){t.expanded!==e&&(t.expanded=e)}function q(){var t=p.getForcedConcatSize();return"hidden"===t?t:h}function L(){var t=h;if("normal"===h){h="large";w()}else{h="normal";w()}t!==h&&d.viewSizeChange("tableSelectionBottom",h,t)}function V(){var e=t.concatMappings.table1;var i=t.concatMappings.table2;t.concatMappings.table1=i;t.concatMappings.table2=e;var n=t.concatMappings.mappings;var a=n.slice();for(var o=0;o<a.length;o++){var l=a[o];var s=n.indexOf(l);n.splice(s,1);var r=l.rightField;l.rightField=l.leftField;l.leftField=r;l.name=l.leftField?l.leftField.field.name:l.rightField.field.name;H(l)}t.concatMappings.outputName=t.concatMappings.table1.table.data.name}function N(){t.fieldStats.fieldCount=t.concatMappings.mappings.length;var e=0;var i=0;t.concatMappings.mappings.forEach(function(t){t.leftField&&t.rightField?e++:i++});t.fieldStats.fieldMatchRate=0==t.fieldStats.fieldCount?0:Math.round(e/t.fieldStats.fieldCount*100);t.fieldStats.mappedFieldCount=e;t.fieldStats.unmappedFieldCount=i}function B(e,i){var n=false;t.concatMappings.table2.table&&p.countFieldMappings(t.concatMappings,i)>1&&(n=true);return n}function $(){v.forEach(function(t){t()});v.length=0}function _(e,i,n){t.concatMappings.table1={table:e};t.concatMappings.table2={table:i};t.concatMappings.mappings=[];t.concatMappings.outputName=e?e.data.name:"";$();t.concatMappings.titleLabel="";i&&(t.concatMappings.titleLabel=o.get("DataManager.ForcedConcat.ButtonBarTitleContent",[t.concatMappings.table1.table.data.name,t.concatMappings.table2.table.data.name]));e&&(t.concatMappings.table1.fields=F(e));i&&(t.concatMappings.table2.fields=F(i));t.helpLabel=e&&i?"":o.get("DataManager.ForcedConcatDialog.DialogInformation");n.forEach(function(e){var i=O(t.concatMappings.table1,e.field1);var n=O(t.concatMappings.table2,e.field2);if(i&&e.field1&&e.field1.sampleValues){i.mapped=true;i.sampleValues=e.field1.sampleValues}if(n&&e.field2&&e.field2.sampleValues){n.mapped=true;n.sampleValues=e.field2.sampleValues}if(i||n){var a={name:i?e.field1.name:e.field2.name,leftField:i,rightField:n};i&&(i.mapping=a);n&&(n.mapping=a);t.concatMappings.mappings.push(a)}});N();v.push(t.$watch("concatMappings.outputName",R,true));v.push(t.$watchCollection("concatMappings.mappings",R,true));t.concatService.setDirty(false)}function R(t,e){t!=e&&p.setDirty(true)}function j(e,i,n,a){if("large"!==q())return;if(e)e.leftField===n?t.expanded="table1":e.rightField===n&&(t.expanded="table2");else if(n){var o=i;o||(o="selected"===n.selected?"":"selected");n.selected=i||o}t.concatMappings.mappings.forEach(function(o){var l="";if(o===e)if(n&&t.selectionInfo.field===n){t.selectionInfo.field=void 0;t.selectionInfo.source=""}else{l=i||"selected";t.selectionInfo.field=n;t.selectionInfo.source=a}o.selected=l;o.leftField&&(o.leftField.selected=l);o.rightField&&(o.rightField.selected=l)})}function z(t,e){var i=U(t);i?"selected"===i.selected?j(i,"selectedNoData",t,e):j(i,"",t,e):j(null,"",t,e)}function H(e){var i=-1;var n=t.concatMappings.mappings;var a=t.concatMappings.table1.fields;var o=t.concatMappings.table2.fields;var l=e.leftField?e.leftField:e.rightField;for(var s=0;s<n.length;s++){var r=n[s];if(r.leftField){if(e.leftField&&a.indexOf(l)<a.indexOf(r.leftField)){i=s;break}}else{if(e.leftField){i=s;break}if(o.indexOf(l)<o.indexOf(r.rightField)){i=s;break}}}-1===i?n.push(e):n.splice(i,0,e)}function G(t,e){var i={name:t.field.name};t.mapped=true;if("leftField"===e){t.mapping=i;i.leftField=t}if("rightField"===e){t.mapping=i;i.rightField=t}H(i);return i}function U(e){var i;for(var n=0;n<t.concatMappings.mappings.length;n++){var a=t.concatMappings.mappings[n];if(a.leftField===e||a.rightField===e){i=a;break}}return i}function W(){var e=[];e.push(t.concatMappings.table1.table.data.id);e.push(t.concatMappings.table2.table.data.id);var i=[];t.concatMappings.mappings.forEach(function(t){var e={name:t.name,sourceFields:[]};t.leftField&&e.sourceFields.push(t.leftField.field.id);t.rightField&&e.sourceFields.push(t.rightField.field.id);i.push(e)});return{tables:e,fields:i}}function Q(){var e=W();p.concatenateQueries(t.concatMappings.outputName,e.tables,e.fields).then(function(){r.trackEvent(r.customEvents.CONCATENATE_TABLES)})}t.$on("$destroy",function(){})}]};t.directive("qvDataManagerForcedConcat",function(){return c})}.apply(e,n),void 0!==a&&(t.exports=a))},2561:function(t,e){t.exports='<div class="qv-datamanager-forced-concat qv-animate view-size-{{getViewSize()}}"  ng-class="{\'forced-concat-visible\': concatService.isInForcedConcatMode, \'forced-concat-transition\': !isSafari}" style="display:flex;flex-direction:column">\n   <div class="menuBlocker"></div>\n   <qv-spinner class="qv-datamanager-forced-concat-spinner" show="isPopulating" show-delay="100" show-for-at-least="300" spinner-height="250px" spinner-width=250px" center-in-parent="true"></qv-spinner>\n \n\t<div class="buttonBar">\n\t\t<div class="leftGroup">\n\t\t\t<div  class="captionTitle">\n\t\t\t\t<span style="font-weight:bold" q-translation="DataManager.ForcedConcat.ButtonBarTitle" ng-if="!concatMappings.table2.table"></span>\n\t\t\t\t<span ng-if="concatMappings.table1.table && concatMappings.table2.table" q-translation="DataManager.ForcedConcat.ButtonBarTitleContent, {{concatMappings.table1.table.data.name}}, {{concatMappings.table2.table.data.name}}" \n\t\t\t\tng-attr-title="{{concatMappings.titleLabel}}">\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="centerGroup">\n\t\t\t<lui-button class="lui-button" style="margin-left:10px" ng-click="swapTables()" ng-if="concatMappings.table2.table">\n\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--swap" q-title-translation="DataManager.ForcedConcatDialog.SwapTables"></span>\n\t\t\t</lui-button>\n\t\t</div>\n\t\t\n\t\t<div class="actionBar">\n\t\t\t<lui-button class="lui-button" x-variant="info" ng-disabled="!concatService.canConcatenate(concatMappings)"  ng-click="concatenateQueries()" style="margin:5px" q-translation="DataManager.ForcedConcatDialog.ApplyButton"></lui-button>  \n\t\t\t<lui-button class="lui-button" ng-click="cancel()" style="margin:5px" ng-bind="cancelLabel" q-translation="Common.Cancel"></lui-button>    \n\t\t\t<lui-button class="lui-button editMappings"  ng-click="toggleViewSize()" ng-if="concatMappings.table2.table" q-title-translation="DataManager.ForcedConcatDialog.EditMappings">\n\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--edit"></span><span q-translation="DataManager.ForcedConcatDialog.EditMappings"  class="editMappingsLabel"></span>\n\t\t\t</lui-button>  \n\t\t</div>\n\t</div>         \n\n\t<div  class="mainArea">       \n\t\t<div class="tablesHolder">\n\n\t\t\t<div class="mappingsSourceFieldWrapper" tid="mappedFields" ng-class="{fullWidth:!concatMappings.table2 || !concatMappings.table2.table, centerLabel:!concatMappings.table1, withTable2Message:concatMappings.table1 && !concatMappings.table2.table}">\n\t\t\t\t<div class="helpLabel" ng-bind="helpLabel" ng-if="!concatMappings.table1"></div>     \n\t\t\t\t<div class="nameAndStatsWrapper" ng-if="concatMappings.table1.table">\n\t\t\t\t\t<div q-translation="DataManager.ForcedConcat.TableNameLabel" class="nameLabel"></div>\n\t\t\t\t\t<div class="nameAndStats">\n\t\t\t\t\t\t<ds-grid-input model="concatMappings.outputName" class="sourceTitle mappingQueryTitle concatQueryTitle validationAlignAnchor" \n\t\t\t\t\t\t\t\t\t\t\tauto-expand="::true"\n\t\t\t\t\t\t\t\t\t\t\tuse-align-anchor="true"\n\t\t\t\t\t\t\t\t\t\t\tinput-id="2"\n\t\t\t\t\t\t\t\t\t\t\tmaxlength="300"\n\t\t\t\t\t\t\t\t\t\t\tminlength="200"\n\t\t\t\t\t\t\t\t\t\t\tvalidate="validateTable"\n\t\t\t\t\t\t\t\t\t\t\terror-state="[]"\n\t\t\t\t\t\t\t\t\t\t\teditable="concatMappings.table2.table != undefined"\n\t\t\t\t\t\t\t\t\t\t\tfield-type="fieldType"\n\t\t\t\t\t\t></ds-grid-input>\n\t\t\t\t\t\t<div style="display:flex;align-items:center">\n\t\t\t\t\t\t\t<div class="statsWrapper" ng-if="concatMappings.table1.table && concatMappings.table2.table">\n\t\t\t\t\t\t\t\t<span q-translation="DataManager.ForcedConcat.FieldCountLabel, {{fieldStats.fieldCount}}" class="fieldStat"></span>\n\t\t\t\t\t\t\t\t<span q-translation="DataManager.ForcedConcat.MappedFieldCountLabel, {{fieldStats.mappedFieldCount}}" class="fieldStat"></span>\n\t\t\t\t\t\t\t\t<span q-translation="DataManager.ForcedConcat.UnmappedFieldCountLabel, {{fieldStats.unmappedFieldCount}}" class="fieldStat"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<lui-button class="lui-button showDataToggle"  ng-click="showData.show = !showData.show" ng-class="{showData: showData.show}">\n\t\t\t\t\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--view" q-title-translation="DataManager.ForcedConcatDialog.SampleData"></span>\n\t\t\t\t\t\t\t</lui-button>\n\t\t\t\t\t\t\t<lui-button class="lui-button showSourceFieldsButton"  ng-click="showSourceFields.show = !showSourceFields.show" ng-class="{showSourceFields:showSourceFields.show}">\n\t\t\t\t\t\t\t\t<span  class="lui-button__icon lui-icon lui-icon--list"></span><span q-title-translation="DataManager.ForcedConcatDialog.ShowSourceFields" q-translation="DataManager.ForcedConcatDialog.ShowSourceFields" class="showSourceFieldsLabel"></span>\n\t\t\t\t\t\t\t</lui-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="tableHelpLabel" q-translation="DataManager.ForcedConcatDialog.TableHelp"  ng-if="fieldStats.fieldCount === 0 && concatMappings.table2.table"></div>     \n\n\t\t\t\t<div class="tableAndHeaderHolder" ng-if="concatMappings.table1" >\n\n\t\t\t\t\t<div class="headers">\n\t\t\t\t\t\t<div ds-resizeable-div ng-repeat="mapping in concatMappings.mappings" ng-if="concatMappings.table2" ng-class="{evenColumn:$index % 2}" class="mappingColumn columnHeader" also="$index" min-width="202">\n\t\t\t\t\t\t\t\t<ds-grid-input model="mapping.name" class="sourceTitle mappingQueryTitle validationAlignAnchor" \n\t\t\t\t\t\t\t\t\tuse-align-anchor="true"\n\t\t\t\t\t\t\t\t\tinput-id="2"\n\t\t\t\t\t\t\t\t\tmaxlength="300"\n\t\t\t\t\t\t\t\t\tminlength="100"\n\t\t\t\t\t\t\t\t\tvalidate="validateField"\n\t\t\t\t\t\t\t\t\tcontext="mapping"\n\t\t\t\t\t\t\t\t\terror-state="[]"\n\t\t\t\t\t\t\t\t\tmodified-callback="nameModified",\n\t\t\t\t\t\t\t\t\teditable="concatMappings.table2.table != undefined"\n\t\t\t\t\t\t\t\t\tfield-type="fieldType"></ds-grid-input>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\n\t\t\t\t\t<div class="concatFieldsHolder" ng-class="{collapsed:!showData.show}" ng-style="fieldsStyleHolder">\n\t\t\t\t\n\t\t\t\t\t\t<div class="queryFieldsWrapper anchorTableWrapper" ng-class="{oneTableOnly:!concatMappings.table2.table}">\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div ng-repeat="mapping in concatMappings.mappings"  \n\t\t\t\t\t\t\t\t  ng-class="{selectedBorder: mapping.selected}" \n\t\t\t\t\t\t\t\t\tclass="borderWrapper queryFieldWrapper queryFieldWrapperLeft" column-index="{{$index}}" >\n\t\t\t\t\t\t\t\t\t<ds-field-summary \n\t\t\t\t\t\t\t\t\tselection-state="mapping.selected" \t\n\t\t\t\t\t\t\t\t\tselection-info="selectionInfo"\t\t\t\n\t\t\t\t\t\t\t\t\tfield-title="mapping.leftField.field"\n\t\t\t\t\t\t\t\t\teditable="false"\n\t\t\t\t\t\t\t\t\tsource="mappingField"\n\t\t\t\t\t\t\t\t\tdata="mapping.leftField"\n\t\t\t\t\t\t\t\t\tenable-drop="false"\n\t\t\t\t\t\t\t\t\tshow-data="showData"\n\t\t\t\t\t\t\t\t\tlocation="left"\n\t\t\t\t\t\t\t\t\tsample-values="mapping.leftField.sampleValues" \n\t\t\t\t\t\t\t\t\tng-if="mapping.leftField" \n\t\t\t\t\t\t\t\t\tclass="fieldSummaryOverride mappingFieldSummary mappingColumn leftTable"\n\t\t\t\t\t\t\t\t\tng-click="selectMapping(mapping, \'\', mapping.leftField, \'mappingField\')"\n\t\t\t\t\t\t\t\t\tallow-removal="allowRemoval(mapping, \'left\')"\n\t\t\t\t\t\t\t\t\tremove-field="removeField"\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</ds-field-summary>\n\n\t\t\t\t\t\t\t\t\t<ds-field-summary-drop-zone ng-if="!mapping.leftField" \n\t\t\t\t\t\t\t\t\t\tcolumn-index="{{$index}}"\n\t\t\t\t\t\t\t\t\t\tenable-drop="false"\n\t\t\t\t\t\t\t\t\t\tclass="fieldSummaryOverride  mappingColumn borderWrapper"\n\t\t\t\t\t\t\t\t\t\tdata="mapping" \n\t\t\t\t\t\t\t\t\t\tspace-holder-only="true" \n\t\t\t\t\t\t\t\t\t\tlocation="left" \n\t\t\t\t\t\t\t\t\t\tsource="mappingField"\n\t\t\t\t\t\t\t\t\t\tshow-drop-indicator="false"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</ds-field-summary-drop-zone>\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="hoverHint topTableHoverHint" dropHint="{{hoverField.hoverHint}}" ng-style="topTableDropHint">\n\t\t\t\t\t\t\t\t\t<div class="new" q-translation="DataManager.ForcedConcat.DragTip.AddNewFieldT1"></div>\n\t\t\t\t\t\t\t\t\t<div class="newAndRemove"  q-translation="DataManager.ForcedConcat.DragTip.AddMappedFieldT1"></div>\n\t\t\t\t\t\t\t\t\t<div class="addTo" q-translation="DataManager.ForcedConcat.DragTip.EmptyZoneNewFieldT2"></div>\n\t\t\t\t\t\t\t\t\t<div class="replace" q-translation="DataManager.ForcedConcat.DragTip.EmptyZoneUsedFieldT2"></div>\n\t\t\t\t\t\t\t\t\t<div class="addToUnMapped" q-translation="DataManager.ForcedConcat.DragTip.UsedZoneNewFieldT2"></div>\n\t\t\t\t\t\t\t\t\t<div class="replaceMapped" q-translation="DataManager.ForcedConcat.DragTip.UsedZoneUsedFieldT2"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="queryFieldsWrapper nonAnchorTable" >\n\t\t\t\t\t\t\t<div ng-repeat="mapping in concatMappings.mappings" \n\t\t\t\t\t\t\tclass="borderWrapper queryFieldWrapper queryFieldWrapperRight" \n\t\t\t\t\t\t\tcolumn-index="{{$index}}" \n\t\t\t\t\t\t\tng-if="concatMappings.table2.table"\n\t\t\t\t\t\t\tng-class="{selectedBorder: mapping.selected, globalDropIndicator:hoverField.mapping === mapping && hoverField.isRightField}">\n\t\t\t\t\t\t\t\t\t<ds-field-summary \n\t\t\t\t\t\t\t\t\tselection-state="mapping.selected" \t\t\n\t\t\t\t\t\t\t\t\tselection-info="selectionInfo"\t\t\t\t\n\t\t\t\t\t\t\t\t\tfield-title="mapping.rightField.field"\n\t\t\t\t\t\t\t\t\teditable="false"\n\t\t\t\t\t\t\t\t\tselection-source="mapping.selectionSource"\n\t\t\t\t\t\t\t\t\tsource="mappingField"\n\t\t\t\t\t\t\t\t\tdata="mapping.rightField"\n\t\t\t\t\t\t\t\t\tenable-drop="true",\n\t\t\t\t\t\t\t\t\tenable-drag="getViewSize() === \'large\'",\n\t\t\t\t\t\t\t\t\ton-drop="onDrop",\n\t\t\t\t\t\t\t\t\tdoes-allow-drop="doesAllowDrop"\n\t\t\t\t\t\t\t\t\tshow-data="showData"\n\t\t\t\t\t\t\t\t\tsample-values="mapping.rightField.sampleValues" \n\t\t\t\t\t\t\t\t\tng-if="mapping.rightField" \n\t\t\t\t\t\t\t\t\tlocation="right"\n\t\t\t\t\t\t\t\t\tclass="fieldSummaryOverride mappingFieldSummary mappingColumn rightTable"\n\t\t\t\t\t\t\t\t\tng-click="selectMapping(mapping, \'\', mapping.rightField, \'mappingField\')"\n\t\t\t\t\t\t\t\t\tallow-removal="allowRemoval(mapping, \'right\')"\n\t\t\t\t\t\t\t\t\tremove-field="removeField">\n\t\t\t\t\t\t\t\t\t</ds-field-summary>\n\n\t\t\t\t\t\t\t\t<ds-field-summary-drop-zone ng-if="!mapping.rightField && concatMappings.table2.table" \n\t\t\t\t\t\t\t\t   class="fieldSummaryOverride mappingFieldSummary mappingColumn borderWrapper" \n\t\t\t\t\t\t\t\t\tdata="mapping" \n\t\t\t\t\t\t\t\t\ton-drop="onDrop"\n\t\t\t\t\t\t\t\t\tdoes-allow-drop="doesAllowDrop" \n\t\t\t\t\t\t\t\t\tlocation="right" \n\t\t\t\t\t\t\t\t\tenable-drop="true"\n\t\t\t\t\t\t\t\t\tsource="mappingField"\n\t\t\t\t\t\t\t\t\tshow-drop-indicator="true"\n\t\t\t\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t\t\t</ds-field-summary-drop-zone>\n\n\t\t\t\t\t\t\t\t\t<div class="hoverHint" dropHint="{{mapping.hoverHint}}" >\n\t\t\t\t\t\t\t\t\t\t<div class="new" q-translation="DataManager.ForcedConcat.DragTip.AddNewFieldT1"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="newAndRemove"  q-translation="DataManager.ForcedConcat.DragTip.AddMappedFieldT1"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="addTo" q-translation="DataManager.ForcedConcat.DragTip.EmptyZoneNewFieldT2"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="replace" q-translation="DataManager.ForcedConcat.DragTip.EmptyZoneUsedFieldT2"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="addToUnMapped" q-translation="DataManager.ForcedConcat.DragTip.UsedZoneNewFieldT2"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="replaceMapped" q-translation="DataManager.ForcedConcat.DragTip.UsedZoneUsedFieldT2"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="oneTableHelpLabel" q-translation="DataManager.ForcedConcat.SelectSecondTable" ng-if="concatMappings.table1 && !concatMappings.table2.table">\n\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t</div>\n\t\t\t\n\n\t\t\t<div class="sourceTableHolder" ng-if="concatMappings.table1.table && concatMappings.table2.table && showSourceFields.show">\n\t\t\t\t<div class="sourceFieldWrapper" tid="table1Fields"  ng-class="{collapsed:expanded !== \'table1\'}" >\n\t\t\t\t\t<div class="sourceTitle accordianHeader" ng-if="concatMappings.table1.table" ng-click="toggleAccordionForTable(\'table1\')" ng-class="{expanded: expanded === \'table1\'}">\n\t\t\t\t\t\t<div class="accordianText" ng-bind="concatMappings.table1.table.data.name" ng-attr-title="{{concatMappings.table1.table.data.name}}"></div>\n\t\t\t\t\t\t<span class="sourceFieldCount" >(<span ng-bind="concatMappings.table1.fields.length"></span>)</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="fieldSummariesWrapper" ng-if="expanded === \'table1\'" >\n\t\t\t\t\t\t<ds-field-summary ng-repeat="field in concatMappings.table1.fields" \n\t\t\t\t\t\t\tshow-warning="field.mapped && !field.mapping.rightField"\n\t\t\t\t\t\t\tleft-label="field.label" \n\t\t\t\t\t\t\tfield-title="field.field" \n\t\t\t\t\t\t\tshow-data="false"\n\t\t\t\t\t\t\tenable-drag="true && !field.mapped",\n\t\t\t\t\t\t\tenable-drop="false",\n\t\t\t\t\t\t\tsample-values="field.sampleValues" #\n\t\t\t\t\t\t\tmapped="field.mapped"\n\t\t\t\t\t\t\tng-if="concatMappings.table1"\n\t\t\t\t\t\t\tclass="fieldSummaryOverride"\n\t\t\t\t\t\t\tdata="field"\n\t\t\t\t\t\t\tlocation="left"\n\t\t\t\t\t\t\tsource="table1"\n\t\t\t\t\t\t\tadd-field="addField"\n\t\t\t\t\t\t\tdrop-shortcut="!field.mapped"\n\t\t\t\t\t\t\tmappings-available="concatMappings.mappings.length > 0"\n\t\t\t\t\t\t\tselection-state="field.selected"\n\t\t\t\t\t\t\tselection-info="selectionInfo"\t\t\n\t\t\t\t\t\t\tng-click="selectField(field, \'table1\')"\n\t\t\t\t\t\t\t></ds-field-summary>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\n\t\t\t\t<div  class="sourceFieldWrapper" tid="table2Fields"  ng-class="{collapsed:expanded !== \'table2\'}" >\n\t\t\t\t\t<div  class="sourceTitle accordianHeader secondHeader" ng-if="concatMappings.table2.table" ng-click="toggleAccordionForTable(\'table2\')" ng-class="{expanded:expanded === \'table2\'}">\n\t\t\t\t\t\t<div class="accordianText" ng-bind="concatMappings.table2.table.data.name" ng-attr-title="{{concatMappings.table2.table.data.name}}"></div>\n\t\t\t\t\t\t<span class="sourceFieldCount">(<span ng-bind="concatMappings.table2.fields.length"></span>)</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="fieldSummariesWrapper" ng-if="expanded === \'table2\'">\n\t\t\t\t\t\t<ds-field-summary\n\t\t\t\t\t\tshow-warning="field.mapped && !field.mapping.leftField"\n\t\t\t\t\t\tng-repeat="field in concatMappings.table2.fields" \n\t\t\t\t\t\tfield-title="field.field" \n\t\t\t\t\t\tshow-data="false"\n\t\t\t\t\t\tsample-values="field.sampleValues" \n\t\t\t\t\t\tng-if="concatMappings.table2"\n\t\t\t\t\t\tselection-state="field.selected"\n\t\t\t\t\t\tselection-info="selectionInfo"\t\t\n\t\t\t\t\t\tsource="table2"\n\t\t\t\t\t\tmapped="field.mapped"\n\t\t\t\t\t\tenable-drag="true",\n\t\t\t\t\t\tenable-drop="false",\n\t\t\t\t\t\tlocation="right"\n\t\t\t\t\t\tadd-field="addField"\n\t\t\t\t\t\tdrop-shortcut="!field.mapped"\n\t\t\t\t\t\tmappings-available="concatMappings.mappings.length > 0"\n\t\t\t\t\t\tdata="field",\n\t\t\t\t\t\tng-click="selectField(field, \'table2\')"\n\t\t\t\t\t\tclass="fieldSummaryOverride"></ds-field-summary>\n\t\t\t\t\t</div> \n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t</div>\n\n\t</div> \n\n\t\n</div>'},2562:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(11)],a=function(t,e){var i={restrict:"A",scope:{also:"=",minWidth:"="},link:function t(i,n){n.resizable({minWidth:i.minWidth,alsoResize:"[column-index = "+i.also+"]",resize:function t(a,o){var l=o.size.width+"px";n.css("flex-basis",l);n.css("min-width",l);var s=e("[column-index = "+i.also+"]").css("height","");for(var r=0;r<s.length;r++){var c=e(s[r]);c.css("flex-basis",o.size.width-2+"px");c.css("min-width",o.size.width-2+"px")}}})}};t.directive("dsResizeableDiv",function(){return i})}.apply(e,n),void 0!==a&&(t.exports=a))},2563:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2564),i(11)],a=function(t,e,i){var n={restrict:"E",template:e,replace:true,scope:{sampleValues:"&",fieldTitle:"=",editable:"=",source:"@",data:"=",mapped:"=",onDrop:"&",showData:"=",doesAllowDrop:"&",selectionState:"=",mappingsAvailable:"=",enableDrop:"=",enableDrag:"=",location:"@",dropShortcut:"=",addField:"&",allowRemoval:"=",removeField:"&",showWarning:"=",selectionInfo:"="},controller:["$scope","$element",function(t,e){t.restoreField=n;t.removeMappingField=a;t.$watch("enableDrag",function(){e.draggable(t.enableDrag?"enable":"disable")});e.draggable({handle:".titleHolder",cursor:"move",start:function i(n,a){var o=e.width()+"px";a.helper.css("width",o);a.helper.css("z-index",9999);a.helper.addClass("dataManagerForcedConcatGhostBackground");t.$emit("dragstart",[n,a])},refreshPositions:true,drag:function e(i,n){t.$emit("draggable",[i,n])},stop:function e(n,a){i(document.body).trigger("dragend");t.$emit("dragstop",[n,a])},scroll:true,appendTo:document.body,helper:"clone"}).data("scopeObj",t).data("huh","1");e.draggable(t.enableDrag?"enable":"disable");t.$watch("selectionState",function(){"selected"===t.selectionState&&t.$emit("summarySelected",e,t.source)});t.enableDrop&&e.droppable({classes:{"ui-droppable-hover":"drop-indicator"},greedy:true,tolerance:"pointer",accept:function e(i){return t.doesAllowDrop()(i,t.data,t.location,t.source)},out:function e(i,n){t.$emit("hoverOut",n,t.data,t.location,t.source)},over:function e(i,n){t.$emit("hoverOver",n,t.data,t.location,t.source)},drop:function e(i,n){t.onDrop()(i,n,t.data,t.location,t.source)}});function n(){t.addField()(t.data,t.location)}function a(){t.removeField()(t.data)}}]};t.directive("dsFieldSummary",function(){return n})}.apply(e,n),void 0!==a&&(t.exports=a))},2564:function(t,e){t.exports='<div class="fieldSummary" ng-class="{selected: selectionState, selectedWithData: selectionState === \'selected\', directSelection:selectionInfo.field === data, notUsed: dropShortcut === true, enableDrag:enableDrag }" >\n    <div class="dropHolder">\n        <div class="summaryArea" >\n        <div class="titleHolder" ng-class="{showData: showData.show || selectionState === \'selected\' }">\n                <span class="lui-icon lui-icon--draggable dragHandle" ng-if="enableDrag"></span>\n                <span class="title" ng-attr-title="{{fieldTitle.name}}" ng-bind="fieldTitle.name"  ng-if="!editable" style="flex-grow:1" ></span>\n                <span class="lui-icon lui-icon--tick"  ng-if="!editable && mappingsAvailable" style="float:right;display:none"></span>\n                <input class="lui-input title" ng-model="title.name" ng-class="{editableTitle:editable}"  ng-if="editable"></input>\n                <span class="lui-icon lui-icon--warning warningIndicator" ng-if="showWarning" q-title-translation="DataManager.ForcedConcatDialog.Tooltip.Warning"></span>\n                <span class="lui-icon lui-icon--drop restoreButton"  ng-if="dropShortcut" ng-click="restoreField(); $event.stopPropagation();" q-title-translation="DataManager.ForcedConcatDialog.Tooltip.RestoreField"></span>\n                <span class="lui-icon lui-icon--remove closeButton" style="float:right;padding-left:3px" ng-if="allowRemoval" ng-click="removeMappingField(); $event.stopPropagation();" ></span>\n                </nobr>\n        </div>\n     \n        \n            <div ng-if="showData.show || selectionState == \'selected\'" class="sampleValueHolder">\n           \n                <div ng-repeat="value in sampleValues() track by $index" class="sampleValue" ng-class="{first:$index === 0}">\n                    <div class="dataValueHolder" >\n                        <span ng-bind="value" class="dataValue"  ></span>\n                    </div>\n                </tr>\n                </table>\n            </div>\n        </div>\n    </div>\n\n</div>\n'},2565:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2566)],a=function(t,e){var i={restrict:"E",template:e,replace:true,scope:{data:"=",onDrop:"&",doesAllowDrop:"&",spaceHolderOnly:"=",location:"@",source:"@",enableDrop:"=",showDropIndicator:"@"},controller:["$scope","$element",function(t,e){var i={};t.showDropIndicator&&(i={"ui-droppable-hover":"drop-indicator"});e.droppable({classes:i,greedy:true,tolerance:"pointer",accept:function e(i){var n=false;t.enableDrop&&(n=t.doesAllowDrop()(i,t.data,t.location));return n},drop:function e(i,n){t.onDrop()(i,n,t.data,t.location)},out:function e(i,n){t.$emit("hoverOut",n,t.data,t.location,t.source)},over:function e(i,n){t.$emit("hoverOver",n,t.data,t.location,t.source)}})}]};t.directive("dsFieldSummaryDropZone",function(){return i})}.apply(e,n),void 0!==a&&(t.exports=a))},2566:function(t,e){t.exports='<div class="summaryDropZone">\n<div class="summaryDropZoneIcon"  ng-if="!spaceHolderOnly">\n</div>    \n</div>'},2567:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(91),i(105),i(2568),i(151),i(2569),i(513),i(611)],a=function(t,e,i,n,a){t.directive("qvDataManagerTable",function(){return{restrict:"E",replace:true,scope:{tableObj:"=",noData:"=",isSelectedCallback:"=",selectCallback:"=",splitCallback:"=",editCallback:"=",deleteCallback:"=",removeFilterCallback:"=",expansionModel:"=",disableButtons:"=",showSelectionState:"="},template:n,controller:["$scope","qvDataManagerViewService","qvDataManagerCapabilityService",function(t,n,o){t.canEdit="ScriptTable"!==t.tableObj.sourceType&&t.tableObj.noOfRows>-1&&false===t.noData&&t.tableObj.status!==a.DSMTypes.QueryStatus.delete;t.canSplit="ConcatenationQuery"===t.tableObj.sourceType||"ForcedConcatenationQuery"==t.tableObj.sourceType;t.canDelete=!t.tableObj.isSourceTable&&"ScriptTable"!==t.tableObj.sourceType&&t.tableObj.status!==a.DSMTypes.QueryStatus.delete;t.viewService=n;t.splitIndividualTablesFeature=o.get()["sui-3868"];t.tableObj.sourceName===i.AddData.InlineData&&(t.tableObj.sourceName=e.get("ManualData.Entry.Label"));"ConcatenationQuery"===t.tableObj.sourceType?t.concatenationNumberString="x"+t.tableObj.numOfConcatenatedTables:"ForcedConcatenationQuery"===t.tableObj.sourceType&&(t.concatenationNumberString="x2");t.tableFieldsCount=e.get("DataManager.Overview.TableFields",t.tableObj.visibleFieldCount);t.hasGeoField=function(){return t.tableObj.hasGeoField};t.hideScriptTooltip=function(){return"ScriptTable"!==t.tableObj.sourceType};t.$watch("tableObj.status",function(i){if(-1!==t.tableObj.noOfRows||i===a.DSMTypes.QueryStatus.delete){var n={};switch(i){case a.DSMTypes.QueryStatus.delete:n={class:"delete-action",text:e.get("DataManager.Overview.WillBeDeleted"),icon:"lui-icon lui-icon--bin",tooltip:"DataManager.Overview.WillBeDeleted.Tooltip"};break;case a.DSMTypes.QueryStatus.update:n={class:"update-action",text:e.get("DataManager.Overview.WillBeUpdated"),icon:"lui-icon lui-icon--sync",tooltip:"DataManager.Overview.WillBeUpdated.Tooltip"};break;case a.DSMTypes.QueryStatus.add:n={class:"add-action",text:e.get("DataManager.Overview.WillBeAdded"),icon:"lui-icon lui-icon--tick",tooltip:"DataManager.Overview.WillBeAdded.Tooltip"};break;default:n=null;break}t.pendingAction=n}});t.$watch("tableObj.noOfRows",function(i){-1===i&&t.tableObj.status!==a.DSMTypes.QueryStatus.delete&&(t.pendingAction={class:"warning-action",text:e.get("DataManager.Overview.LoadingError"),icon:"lui-icon lui-icon--warning-triangle",tooltip:"DataManager.Overview.LoadingError.Tooltip"})});t.onTableExpandConcat=function(e){e.stopPropagation();t.expansionModel.onTableExpanded&&t.expansionModel.onTableExpanded(t.tableObj,t.viewService.views.OVERVIEW)};t.getConcatenationTitle=function(){return e.get("DataManager.Overview.ConcatenatedTable.Title",t.tableObj.numOfConcatenatedTables)};t.isTableDeleted=function(){return t.tableObj.status===a.DSMTypes.QueryStatus.delete};t.isTableSelected=function(){return!!t.isSelectedCallback&&t.isSelectedCallback(t.tableObj)};t.onTableEditClick=function(e){e.stopPropagation();t.editCallback&&t.editCallback(t.tableObj)};t.onTableDeleteClick=function(e){e.stopPropagation();t.deleteCallback&&t.deleteCallback(t.tableObj)};t.onTableSplitClick=function(e){e.stopPropagation();if(t.splitCallback){t.selectTable(e);t.splitCallback(t.tableObj)}};t.onTableFilterRemoved=function(e){e.stopPropagation();t.removeFilterCallback&&t.removeFilterCallback(t.tableObj)};t.selectTable=function(e){e.stopPropagation();t.selectCallback?t.selectCallback(t.tableObj):t.showSelectionState&&(t.tableObj.selection.selected=!t.tableObj.selection.selected)};t.enableSelection=function(){var e=true;t.editCallback||t.selectCallback||t.showSelectionState||(e=false);return e};t.editObject=function(e){e.stopPropagation();t.editCallback&&t.editCallback(t.tableObj)}}]}})}.apply(e,n),void 0!==a&&(t.exports=a))},2568:function(t,e){t.exports='<div class="overview-table-outer">\n\n\t<div class="table-offset" ng-if="tableObj.sourceType === \'ConcatenationQuery\'">\n\t</div>\n\n\t<div class="table-inner" ng-class="{ \'selected\': isTableSelected(), \'nointeraction\':!enableSelection() }" ng-click="selectTable($event)" ng-dblclick="editObject($event)" ng-disabled="true">\n\t\t<div class="icon lui-icon lui-icon--table" ng-class="{ \'pending-delete\': isTableDeleted() }"></div>\n\t\t<div class="concatenation-bubble" ng-if="canSplit" ng-bind="concatenationNumberString" title="{{getConcatenationTitle()}}" ng-class="{ \'pending-delete\': isTableDeleted() }"></div>\n\t\t<div ng-if="showSelectionState " class="show-selection-state-tick">\n\t\t\t<span ng-if="tableObj.selection.selected" class="lui-icon lui-icon--tick"></span>\n\t\t</div>\n\t\t<div class="table-actions" ng-class="{ \'pending-delete\': isTableDeleted() }">\n\t\t\t<div class="no-action" ng-if="tableObj.sourceType === \'ScriptTable\'" q-translation="DataManager.Overview.GeneratedByScript"></div>\n\n\t\t\t<div toggle class="action-icon lui-icon lui-icon--split qui-btn-icn lui-btn-div" ng-if="canSplit && !disableButtons && !splitIndividualTablesFeature" active="expansionModel.expanded && isTableSelected()" q-title-translation="DataManager.Overview.Tooltip.Split" ng-click="onTableExpandConcat($event)"></div>\n\t\t\t<div toggle class="action-icon lui-icon lui-icon--split qui-btn-icn lui-btn-div" ng-if="canSplit && !disableButtons && splitIndividualTablesFeature" active="expansionModel.expanded && isTableSelected()" q-title-translation="DataManager.Overview.Tooltip.Split" ng-click="onTableSplitClick($event)"></div>\n\t\t\t<div toggle class="action-icon lui-icon lui-icon--clear-filter qui-btn-icn lui-btn-div" ng-if="tableObj.isFiltered && !disableButtons && !canSplit" active="expansionModel.expanded && isTableSelected()" q-title-translation="DataManager.Overview.Tooltip.ClearFilter" ng-click="onTableFilterRemoved($event)"></div>\n\t\t\t<div class="action-icon lui-icon lui-icon--edit qui-btn-icn lui-btn-div" q-title-translation="DataManager.Overview.Tooltip.Edit" ng-if="canEdit && !disableButtons" ng-click="onTableEditClick($event)"></div>\n\t\t\t<div class="action-icon lui-icon lui-icon--bin qui-btn-icn lui-btn-div" q-title-translation="DataManager.Overview.Tooltip.Delete" ng-if="canDelete && !disableButtons" ng-click="onTableDeleteClick($event)"></div>\n\n\t\t</div>\n\t\t<div class="table-information" ng-class="{ \'pending-delete\': isTableDeleted() }">\n\t\t\t<div class="table-name" ng-bind="tableObj.name" title="{{tableObj.name}}"></div>\n\t\t\t<div class="table-hint" ng-bind="tableObj.hint" title="{{tableObj.hint}}" ng-if="tableObj.hint"></div>\n\t\t\t<div class="table-subtitle" ng-bind="tableObj.sourceName" title="{{tableObj.sourceName}}"></div>\n\t\t</div>\n\t\t<div class="status-bar" ng-class="pendingAction.class" ng-if="!pendingAction">\n\t\t\t<div class="left-side">\n\t\t\t\t<div class="fields" ng-if="tableObj.fields.length > 0">{{tableFieldsCount}}</div>\n\t\t\t\t<div class="lui-icon lui-icon--map" ng-if="hasGeoField()" q-title-translation="DataManager.GeoInfo.OverviewTooltip"></div>\n\t\t\t\t<div class="status-icon" ng-class="{true: \'lui-icon lui-icon--script\'}[tableObj.sourceType === \'ScriptTable\']" q-title-translation="DataManager.Overview.SynchronizeTooltip"></div>\n\t\t\t\t<div class="lui-icon lui-icon--filter status-icon" ng-if="tableObj.isFiltered" q-title-translation="DataManager.TableIsFiltered"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="status-bar" ng-class="pendingAction.class" q-title-translation="{{pendingAction.tooltip}}" ng-if="pendingAction">\n\t\t\t<div class="left-side">\n\t\t\t\t<div class="lui-icon lui-icon--map" ng-if="hasGeoField()" q-title-translation="DataManager.GeoInfo.OverviewTooltip"></div>\n\t\t\t</div>\n\t\t\t<div class="right-side">\n\t\t\t\t<div class="action-text" ng-bind="pendingAction.text"></div>\n\t\t\t\t<div class="action-icon" ng-class="pendingAction.icon"></div>\n\t\t\t\t<div class="lui-icon lui-icon--filter action-icon" ng-if="tableObj.isFiltered" q-title-translation="DataManager.TableIsFiltered"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n\n\t<div class="lui-icon lui-icon--triangle-top" ng-if="tableObj.sourceType === \'ConcatenationQuery\' && expansionModel.expanded && expansionModel.isInitiatedBy(viewService.views.OVERVIEW) && isTableSelected()"></div>\n</div>\n'},2569:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(91),i(1156),i(151),i(2570),i(235),i(611)],a=function(t,e,i,n,a){t.directive("qvDataManagerConcatenatedView",function(){return{restrict:"E",replace:true,scope:{table:"=",loadModel:"="},template:a,controller:["$scope","qvDataManagerCapabilityService","qvDataManagerDataService",function(t,a,o){t.hasCapabilitySui3868=a.get()["sui-3868"];t.numberOfTablesString=e.get("DataManager.Overview.Concatenated.NumberOfTables",t.table.sourceQueries.length);t.selection={defaultSelect:true,hasSelection:function e(){var i=false;t.sources&&(i=t.sources.some(function(t){return t.selection.selected}));return i},mixedSelections:function e(){var i=false;if(t.sources){var n=void 0;for(var a=0;a<t.sources.length;a++){var o=t.sources[a];if(0!==a&&o.selection.selected!==n){i=true;break}n=o.selection.selected}}return i}};function l(){var e=[];t.table.sourceQueries.forEach(function(i){var n=t.loadModel.wrapInTargetTableModel(i);e.push(s(n))});return e}t.$watch("selection.defaultSelect",function(){t.sources.forEach(function(e){e.selection.selected=t.selection.defaultSelect})});function s(e){var a={name:e.data.name,id:e.data.id?e.data.id:null,noOfRows:e.noOfRows,sourceName:e.sourceName?e.sourceName:"",sourceType:e.sourceType?e.sourceType:"",numOfConcatenatedTables:e.data.sourceQueries?e.data.sourceQueries.length:0,fields:e.getFields(),status:e.getStatus(),hint:t.hasCapabilitySui3868?e.data.hint:void 0,isSourceTable:false,selection:{selected:true},tableModel:e,visibleFieldCount:i.filterTransformationFieldsWithType(e,[n.DSMTypes.Transformations.lookupGeoInfo]).length,hasGeoField:i.doesTableContainTransformQuery(e,[n.DSMTypes.Transformations.geoPoint,n.DSMTypes.Transformations.lookupGeoInfo])};return a}t.sources=l();t.doUnconcatenate=function(){var e=[];t.sources.forEach(function(t){t.selection.selected&&e.push(t.id)});o.splitQuery(t.table.id,e)}}]}})}.apply(e,n),void 0!==a&&(t.exports=a))},2570:function(t,e){t.exports='<div class="concatenated-row-outer qv-animate" ng-click="$event.stopPropagation();">\n\t<div class="concatenated-row-inner">\n\n\t\t<div class="header-row">\n\n\t\t\t<div class="header-left" q-translation="DataManager.Overview.Concatenated.TitleText" ng-if="!hasCapabilitySui3868"></div>\n\t\t\t<div class="header-left" q-translation="DataManager.Overview.Concatenated.TitleTextInstructions" ng-if="hasCapabilitySui3868"></div>\n\t\t\t<div class="header-right">\n\t\t\t\t<label class="lui-checkbox concat-select-all-checkbox" ng-if="hasCapabilitySui3868">\n\t\t\t\t\t<input class="lui-checkbox__input" type="checkbox"  qva-indeterminate="selection.mixedSelections()" ng-click="selection.defaultSelect = !selection.defaultSelect" ng-checked="selection.defaultSelect" tid="selectAllTables" />\n\t\t\t\t\t<div class="lui-checkbox__check-wrap">\n\t\t\t\t\t\t<span class="lui-checkbox__check"></span>\n\t\t\t\t\t\t<span class="lui-checkbox__check-text concat-select-all-text">\n\t\t\t\t\t\t\t<span class="lui-label" q-translation="DataManager.Overview.Concatenated.SelectAll"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</label>\n\t\t\t\n\t\t\t\t<div class="tables-text" ng-bind="numberOfTablesString">\n\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\t\tng-disabled="hasCapabilitySui3868 && !selection.hasSelection()"\n\t\t\t\t\t\tclass="split-button lui-button"\n\t\t\t\t\t\ttid="unconcat-sources-button"\n\t\t\t\t\t\tq-translation="DataManager.Overview.Concatenated.Split"\n\t\t\t\t\t\tng-click="doUnconcatenate()"\n\t\t\t\t>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t</div>\n\n\t\t<div class="tables-row">\n\t\t\t<div ng-repeat="source in sources">\n\t\t\t\t<qv-data-manager-table\n\t\t\t\t\tclass="tables-row"\n\t\t\t\t\ttable-obj="source"\n\t\t\t\t\tshow-selection-state="hasCapabilitySui3868"\n\t\t\t\t\tdisable-buttons="::true"\n\t\t\t></qv-data-manager-table>\n\t\t\t\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'},2571:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(105)],a=function(t,e){t.directive("qvaTableAnimations",["$document","$timeout",function(t,i){return{restrict:"A",link:function n(a,o){function l(t){var n=o[0];var l=n.getBoundingClientRect();var s={width:window.innerWidth,height:window.innerHeight};var r=e.Toolbar.height;if("selected"===t){if(n){a.gridEditStyling.top=l.top-r-1+"px";a.gridEditStyling.left=l.left-1+"px";a.gridEditStyling.right=s.width-l.left-l.width+"px";a.gridEditStyling.bottom=s.height-l.top+r-l.height+"px";a.gridEditStyling.scale="scale(0.1,0.2)";a.gridEditStyling.opacity=.5;a.gridEditStyling.border="1px solid rgba(0, 0, 0, 0.2)"}}else if("edited"===t)if(a.tableToBeEdited.table)a.gridEditorBoxObj.hidden=false;else if(a.viewService.getSelectedView()===a.viewService.views.BUBBLES){a.gridEditStyling.top=(s.height-r)/2-70+"px";a.gridEditStyling.left=s.width/2-115+"px";a.gridEditStyling.right=s.width/2+115+"px";a.gridEditStyling.bottom=(s.height+r)/2+70+"px";a.gridEditStyling.scale="scale(0.1,0.2)";a.gridEditStyling.opacity=.3;i(function(){a.gridEditorBoxObj.hidden=true},300)}else if(n&&a.viewService.getSelectedView()===a.viewService.views.OVERVIEW){a.gridEditStyling.top=l.top-r-1+"px";a.gridEditStyling.left=l.left-1+"px";a.gridEditStyling.right=s.width-l.left-1-l.width+"px";a.gridEditStyling.bottom=s.height-l.top+r-1-l.height+"px";a.gridEditStyling.scale="scale(0.1,0.2)";a.gridEditStyling.opacity=.3;i(function(){a.gridEditorBoxObj.hidden=true},300)}}a.$watch("gridEditorBoxObj.hidden",function(n,o){n===o||n||a.selectedTable&&(!a.selectedTable||a.selectedTable.id!==a.table.id)||i(function(){if(a.tableToBeEdited.table){var i=t[0].body.classList.contains("qv-app-details-enabled");a.gridEditStyling.top=i?"220px":parseInt(e.Toolbar.height+3)+"px";a.gridEditStyling.left="0px";a.gridEditStyling.right="0px";a.gridEditStyling.bottom="44px";a.gridEditStyling.scale="scale(1,1)";a.gridEditStyling.opacity=1;a.gridEditStyling.border=""}},10)});a.$watchCollection("selectedTable",function(t,e){a.gridEditorBoxObj.hidden&&t!==e&&a.selectedTable&&a.selectedTable.id===a.table.id&&l("selected")});a.$watch("tableToBeEdited.table",function(t,e){t!==e&&(!a.selectedTable||a.selectedTable&&a.selectedTable.id===a.table.id)&&l("edited")})}}}])}.apply(e,n),void 0!==a&&(t.exports=a))},2572:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2573)],a=function(t,e){var i={template:e,bindings:{ngClasses:"<",messageObj:"<"},controller:[function(){}]};t.nativeComponent("dmUiBlocker",i)}.apply(e,n),void 0!==a&&(t.exports=a))},2573:function(t,e){t.exports='<div class="dm-ui-blocker" ng-class="{\'qv-fade-out\': $ctrl.fadeOut}">\n\t<div ng-if="$ctrl.messageObj" ng-class="$ctrl.ngClasses">\n\t\t<div class="dm-ui-blocker-messageText" ng-show="$ctrl.messageObj.message" q-translation="{{$ctrl.messageObj.message}}"></div>\n\t</div>\n</div>'},2574:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(2575),i(91),i(105),i(1332),i(513),i(235)],a=function(t,e,i,n){var a={template:e,bindings:{associationGraph:"<",loadModel:"<"},controller:["$scope","qvDataManagerAssociationService","qvDataManagerSelectionService","qvDataManagerDataService",function(t,e,a,o){var l=this;this.previewAllRecommendationsSelected=false;this.associationsToPreview=e.getAssociationsToPreview();this.unAssociatedRecommendations=[];this.associationsRecommendationsTitle=i.get("DataManager.AssociationsRecommendation.Title");this.associationRecommendationsFooterMessage=i.get("DataManager.AssociationsRecommendation.FooterMessage");a.registerOnSelectedObjectChanged(r);o.registerInvalidationHandler(s);this.$onChanges=function(t){if(t.associationGraph&&t.associationGraph.currentValue&&l.loadModel){l.associationGraph=t.associationGraph.currentValue;l.getUnAssociatedTables(l.loadModel);l.getUnAssociatedRecommendations(l.associationGraph,l.loadModel);l.totalTablesCount=i.get("DataManager.AssociationsRecommendation.TotalNumberOfTables",[l.loadModel.queries.length])}};this.$onDestroy=function(){a.unregisterOnSelectedObjectChanged(r);o.unregisterInvalidationHandler(s)};this.$doCheck=function(){var t=e.getAssociationsToPreview();t&&0===t.length&&(this.previewAllRecommendationsSelected=false)};this.hideAssociationsRecommendationsPanel=function(){t.$emit(n.Events.Associations.ToggleAssociationsRecommendationsPanel)};this.clearAllPreview=function(){this.previewRecommendation(void 0,false)};this.applyAllRecommendations=function(){this.clearAllPreview();return e.autoAssociate(l.loadModel)};this.applyRecommendedAssociation=function(t,i){t.stopPropagation();(!i||this.associationsToPreview.indexOf(i)>=0)&&this.clearAllPreview();e.applyRecommendedAssociation(i)};this.previewRecommendation=function(t,i){!t||this.associationsToPreview.indexOf(t)>=0?this.associationsToPreview=[]:this.associationsToPreview=[t];l.previewAllRecommendationsSelected?e.setAssociationsToPreview(l.unAssociatedRecommendations):e.setAssociationsToPreview(this.associationsToPreview);i&&e.selectPreviewedAssociation(this.associationsToPreview)};this.previewAllRecommendations=function(){this.previewAllRecommendationsSelected?e.setAssociationsToPreview(this.associationsToPreview):e.setAssociationsToPreview(this.unAssociatedRecommendations);l.previewAllRecommendationsSelected=!l.previewAllRecommendationsSelected};this.getUnAssociatedTables=function(t){var n=e.unAssociatedTables(t);l.unassociatedTables=n;l.unassociatedTablesLabel=i.get("DataManager.Unassociated.Tables",[n.length])};this.getUnAssociatedRecommendations=function(t,n){l.unAssociatedRecommendations=e.unAssociatedRecommendations(t,n);l.associationRecommendationsLabel=i.get("DataManager.Association.Recommendation",[l.unAssociatedRecommendations.length])};function s(){if(l.previewAllRecommendationsSelected){l.getUnAssociatedRecommendations(l.associationGraph,l.loadModel);e.setAssociationsToPreview(l.unAssociatedRecommendations)}}function r(){var t=l.unAssociatedRecommendations;var i=e.getSelectedAssociation(t);i||e.setAssociationSelectedToPreview(null);if(l.previewAllRecommendationsSelected){l.clearAllPreview();if(i){l.previewRecommendation(i,false);e.setAssociationSelectedToPreview(i)}}else i||l.clearAllPreview()}}]};t.nativeComponent("associationsRecommendationsPanel",a)}.apply(e,n),void 0!==a&&(t.exports=a))},2575:function(t,e){t.exports='<div class="associations-recommendations">\n\t<div class="header">\n\t\t<div class="header-title">\n\t\t\t<div class="title">{{$ctrl.associationsRecommendationsTitle}}</div>\n\t\t\t<span class="lui-icon  lui-icon--close close-btn" ng-click="$ctrl.hideAssociationsRecommendationsPanel()"></span>\n\t\t</div>\n\n\t\t<div class="summary-recommendations">\n\t\t\t<div class="summary-details" tid="associations-panel-total-tables-count" ng-bind="$ctrl.totalTablesCount"></div>\n\t\t\t<div class="summary-details" tid="associations-panel-unassociated-tables-count" ng-bind="$ctrl.unassociatedTablesLabel"></div>\n\t\t\t<div class="summary-details recommendation" tid="associations-panel-associated-recommendations-count" ng-bind="$ctrl.associationRecommendationsLabel"></div>\n\t\t\t<div class="action-buttons">\n\t\t\t\t<button tid="associations-preview-all-button" class="lui-button highlight-all-btn" ng-class="{\'highlight-all-btn-selected\': $ctrl.previewAllRecommendationsSelected}" ng-click="$ctrl.previewAllRecommendations()" ng-disabled="$ctrl.unAssociatedRecommendations.length === 0" q-translation="DataManager.AssociationsRecommendation.PreviewAll"></button>\n\t\t\t\t<button tid="associations-apply-all-button" class="lui-button apply-all-btn" ng-click="$ctrl.applyAllRecommendations()" ng-disabled="$ctrl.unAssociatedRecommendations.length === 0" q-translation="DataManager.AssociationsRecommendation.ApplyAll"></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="associations" tid="recommendations-container">\n\t\t<div tid="{{\'assc_\' + association.name}}" ng-repeat="association in $ctrl.unAssociatedRecommendations" class="recommendations" ng-class="{\'selected\': $ctrl.associationsToPreview.indexOf(association) >= 0}">\n\t\t\t<div class="association" ng-click="$ctrl.previewRecommendation(association, true)">\n\t\t\t\t<div class="association-name" q-title-translation="{{association.name}}"><span>{{association.name}}</span></div>\n\t\t\t\t<div ng-repeat="link in association.links" class="recommended-table-item" q-title-translation="{{link.query.name + \':\' + link.field.name}}">\n\t\t\t\t\t<div class="table-name" ng-class="{\'associated-recommendation\': link.associated}">{{link.query.name}}:</div>\n\t\t\t\t\t<div class="field-name" ng-class="{\'associated-recommendation\': link.associated}">{{link.field.name}}</div>\n\t\t\t\t</div>\n\t\t\t\t<button class="lui-button apply-btn" ng-click="$ctrl.applyRecommendedAssociation($event, association)" q-translation="DataManager.AssociationsRecommendation.ApplyButton"></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="footer">\n\t\t<span class="message">{{$ctrl.associationRecommendationsFooterMessage}}</span>\n\t</div>\n</div>'},2576:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=l(i(98));var a=l(i(116));var o=l(i(1274));function l(t){return t&&t.__esModule?t:{default:t}}function s(t){var e=t.closeMenu,i=t.showAddData;if(!i)return null;return n.default.createElement(o.default,{closeMenu:e})}s.propTypes={closeMenu:a.default.func.isRequired,showAddData:a.default.bool.isRequired};var r=s;e.default=r;t.exports=e.default},2577:function(t,e,i){},406:function(t,e,i){"use strict";var n,a;!(n=[i(282),i(89)],a=function(t,e){return{createInitialChart:a,createChart:n,convertChart:o,getPropertyTreeForConvertedChart:l,createConvertedChart:s};function i(t){var e=t.qHyperCubeDef;if(e&&e.qMeasures&&e.qDimensions){var i=e.qDimensions.concat(e.qMeasures);i.forEach(function(t){t.qAttributeExpressions&&t.qAttributeExpressions.forEach(function(t){t.qAttribute=true})})}}function n(t,e,n){var a=r(e,n).bind(e);i(t);return a(t)}function a(e,i,a){c(e,i,a);return t.getInitialProperties(e).then(function(t){return n(t,i,a)})}function o(t,e,i){if(!t)throw new Error("No extension provided");var n=i||t.model;return l(t,e,i).then(function(t){return i.setFullPropertyTree(t).then(function(){return n})})}function l(i,n,a){if(!i)throw new Error("No extension provided");var o=a||i.model;return e.all([t.getExtensionType(n),t.getInitialProperties(n),o.getFullPropertyTree()]).then(function(t){var e=t[0];var n=t[1];var a=t[2];var o;delete a.qProperty.qInfo.qId;if(i.exportProperties&&e.importProperties){var l;"boxplot"===i.type&&(l="boxplotDef");o=e.importProperties(i.exportProperties(a,l),n,e)}else o={qProperty:n,qChildren:[]};return o})}function s(t,e,i,n){c(e,i,n);return(t.model.properties,i,n).then(function(i){return o(t,e,i)})}function r(t,e){return e?t.createObject:t.createSessionObject}function c(t,e,i){if(!e||!t)throw new Error("Invalid inparameters: type or app missing");if(i)throw new Error("Persisted objects not implemented yet")}}.apply(e,n),void 0!==a&&(t.exports=a))},411:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var n=s(i(98));var a=s(i(988));var o=s(i(438));var l=s(i(1086));function s(t){return t&&t.__esModule?t:{default:t}}function r(){r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};return r.apply(this,arguments)}function c(t){return t.displayName||t.name||"Component"}function d(t){var e=function e(i){return n.default.createElement(a.default,null,function(e){return n.default.createElement(o.default,null,function(a){if(!a)return null;return n.default.createElement(l.default,null,function(o){return n.default.createElement(t,r({},i,{app:e,appLayout:a,urlParameters:o}))})})})};e.displayName="WithConsumers(".concat(c(t),")");return e}var u=d;e.default=u;t.exports=e.default},484:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(138),i(485),i(105),i(91)],a=function(t,e,i,n,a){t.directive("circleChart",function(){return{scope:{model:"="},restrict:"E",replace:true,template:i,controller:["$scope","$element","$timeout",function(t,i,o){var l=i.find(".circular-bar");t.radius=50;t.arcValue="M50 0 A 50 50, 0, 0, 1, 0 0, L 50 50 z";function s(){if(p()){var e=l.height();var i=l.width();if(e<i){t.radius=e/2;t.svgPos={height:e,width:e,top:0,left:i/2-e/2}}else{t.radius=i/2;t.svgPos={height:i,width:i,top:e/2-i/2,left:0}}}u()}function r(t,e,i,n){var a=(n-90)*Math.PI/180;return{x:t+i*Math.cos(a),y:e+i*Math.sin(a)}}function c(t,e,i,n,a){var o=r(t,e,i,a);var l=r(t,e,i,n);var s=a-n<=180?"0":"1";var c=["M",o.x,o.y,"A",i,i,0,s,0,l.x,l.y].join(" ");return c}function d(t){return 3.6*t}function u(){var i=0;if(t.model.chartValue)i=t.model.chartValue;else if(t.model.numerator&&t.model.denominator){i=0===t.model.denominator?0:t.model.numerator/t.model.denominator;i*=100}if(i>0&&i<1){var n=e.format.number(0,{style:"percent"});t.chartPercentageValue=a.get("CircleChart.ChartPercentageValue.LessThanOne",n)}else t.chartPercentageValue=e.format.number(Math.round(i)/100,{style:"percent"});var o=t.radius;var l=8;var s=0;if(t.model.chartValueSubText){l=-3;s=17}t.percentagePos={x:o,y:o+l};t.subtextPos={x:o,y:o+s};var r=100===i?99.99:i,u=r;u||(u=0);t.arcValue=c(o,o,o-5,0,d(u))}function p(){return l.height()>0||l.width()>0}t.$on(n.Events.EditorDetailsPane.ResizeChart,function(){s()});t.$watch("model",function(){u()});p()?s():o(function(){s()})}]}})}.apply(e,n),void 0!==a&&(t.exports=a))},485:function(t,e){t.exports='<div class="ds-visualization-circle-chart">\n\t<div class="chart-heading">{{ model.header }}</div>\n\n\t<div class="circular-bar">\n\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" ng-style="svgPos">\n\t\t\t<g class="arcs">\n\t\t\t\t<circle ng-attr-cx="{{radius}}" ng-attr-cy="{{radius}}" ng-attr-r="{{radius}}" class="outer-circle" />\n\t\t\t\t <path ng-attr-d="{{arcValue}}" class="outer-arc" tid="circle-chart-arc1" /> \n\t\t\t\t<circle ng-attr-cx="{{radius}}" ng-attr-cy="{{radius}}" ng-attr-r="{{radius - 10}}" class="inner-circle"  />\n\t\t\t</g>\n\t\t\t<text ng-attr-x="{{percentagePos.x}}" ng-attr-y="{{percentagePos.y}}" class="percentage-label">{{ chartPercentageValue }}</text>\n\t\t\t<text ng-attr-x="{{subtextPos.x}}" ng-attr-y="{{subtextPos.y}}" class="percentage-subtext-label">{{ model.chartValueSubText }}</text>\n\t\t</svg>\n\t</div>\n\n\t<div class="chart-footer">{{ model.footer }}</div>\n</div>\n\n'},513:function(t,e,i){"use strict";var n,a;!(n=[i(48),i(10),i(54),i(91),i(102),i(151),i(1792),i(253),i(493),i(1194),i(103),i(435),i(235),i(1681),i(1150),i(1088),i(1214)],a=function(t,e,i,n,a,o,l,s,r,c,d){t.service("qvDataManagerSelectionService",["$q","qvDataManagerViewService","qvDataManagerSpinnerService","qvDataManagerDataService","qvAlertDialog","qvConfirmDialog","addDataLoadService",function(u,p,f,v,g,m,b){var h={TABLE:"table",HUB:"hub",LINK:"link"};var y=null;var T=[];var M={selectedObjectTypes:h,selectedObjects:[],selectionMode:"single"};M.SELECTION_MODES={MULTIPLE:"multiple",SINGLE:"single"};M.SELECTION_OPTIONS={NO_SCRIPT_TABLES:"noscripttables",NO_DELETED:"nodeleted"};a.mixin(M);M.notification("OnSplitTable");function w(){var t=M.selectedObjects;return v.getLoadModel().then(function(e){for(var i=t.length-1;i>=0;i--){var n=t[i];n.type===h.TABLE&&(e.getTargetTableModelById(n.tableModel.data.id)||t.splice(i,1))}})}v.registerInvalidationHandler(w,1);M.setSelectedObjects=function(t){this.selectionOptions&&this.selectionOptions.allowSelectionChange?this.selectionOptions.allowSelectionChange().then(function(e){e&&this.setSelectedObjectsImpl(t)}.bind(this)):this.setSelectedObjectsImpl(t)};M.setSelectedObjectsImpl=function(t){if(!e.equals(this.selectedObjects,t)){this.selectionMode==M.SELECTION_MODES.MULTIPLE?this._addToSelection(t):this.selectedObjects=t;p.isAssociationEditorOpen()?this.selectedObjects.length<=1?p.setAssociationEditorOpen(false):2!==this.selectedObjects.length||this.selectedObjects[0].type===h.TABLE&&this.selectedObjects[1].type===h.TABLE||p.setAssociationEditorOpen(false):p.isGridEditorOpen()&&0===this.selectedObjects.length&&p.setGridEditorOpen(false);this.handleOnSelectedObjectChanged()}};M._addToSelection=function(t){var e=-1;0===t.length&&(this.selectedObjects.length=0);this.selectionOptions&&this.selectionOptions.limit&&(e=this.selectionOptions.limit);for(var i=0;i<t.length;i++){var n=t[i];if(n.type===h.TABLE){if(this.selectionOptions&&(this.selectionOptions.noscripttables&&"ScriptTable"===n.tableModel.sourceType||this.selectionOptions.nodeleted&&n.tableModel.getStatus()===o.DSMTypes.QueryStatus.delete))continue;var a=this._getSelectionIndex(t[i]);if(-1==a){this.selectedObjects.push(t[i]);-1!=e&&this.selectedObjects.length>e&&this.selectedObjects.splice(this.selectedObjects.length-2,1)}else this.selectedObjects.splice(a,1)}}};M._getSelectionIndex=function(t){var e=-1;for(var i=0;i<this.selectedObjects.length;i++)if(t.tableModel&&this.selectedObjects[i].tableModel===t.tableModel){e=i;break}return e};M.getSelectedObjects=function(){return this.selectedObjects};M.setSelectionMode=function(t,e){this.selectionMode=t;this.selectionOptions=e;if(t===M.SELECTION_MODES.MULTIPLE){var i=this.getSelectedLinkSourceObjects();i.length>0&&this.setSelectedObjectsImpl([]);var n=this.getSelectedTables();for(var a=0;a<n.length;a++){var l=n[a];if(e&&(e.noscripttables&&"ScriptedTable"===l.sourceType||e.nodeleted&&l.getStatus()===o.DSMTypes.QueryStatus.delete)){this.setSelectedObjectsImpl([]);break}}}};M.isSelectionCapturedByOther=function(t){var e=false;this.selectionOptions&&this.selectionOptions.selectionOwner&&this.selectionOptions.selectionOwner!==t&&(e=true);return e};M.setSelectedTables=function(t){var e=t.map(function(t){return{type:h.TABLE,tableModel:t}});this.setSelectedObjects(e)};M.getSelectedTableIds=function(){var t=[];this.selectedObjects.forEach(function(e){if(e.type===h.TABLE)t.push(e.tableModel.data.id);else if(e.type===h.LINK)for(var i=0;i<e.objects.length;i++){var n=e.objects[i];n.type===h.TABLE&&t.push(n.tableModel.data.id)}});return t};M.getSelectedTables=function(){var t=[];this.selectedObjects.forEach(function(e){if(e.type===h.TABLE)t.push(e.tableModel);else if(e.type===h.LINK)for(var i=0;i<e.objects.length;i++){var n=e.objects[i];if(n.type===h.TABLE){t.push(n.tableModel);break}}});return t};M.getSelectedLinkSourceObjects=function(){var t=[];this.selectedObjects.forEach(function(e){e.type===h.LINK&&t.push(e.source)});return t};M.canEditObject=function(){var t=false;var e=this.getSelectedObjects();if(1===e.length){var n=e[0];n.type===h.TABLE?"ScriptTable"!==n.tableModel.sourceType&&n.tableModel.getStatus()!==o.DSMTypes.QueryStatus.delete&&-1!==n.tableModel.noOfRows&&(t=true):n.type!==h.LINK||n.preview||2!==n.objects.length||i.every(n.objects,function(t){return t.type===h.TABLE})&&(t=true)}else 2===e.length&&i.every(e,function(t){return t.type===h.LINK&&!t.preview&&2===t.objects.length})&&(t=true);return t};M.canRefreshObject=function(){var t=true;var e=this.getSelectedObjects();if(e.length>=1)for(var i=0;i<e.length;++i){var n=e[i];var a=n.type===h.TABLE&&"ScriptTable"!==n.tableModel.sourceType&&n.tableModel.getStatus()!==o.DSMTypes.QueryStatus.delete&&-1!==n.tableModel.noOfRows;t=t&&a}else t=false;return t};M.isEditDeleteTable=function(){var t=false;var e=this.getSelectedObjects();if(1===e.length){var i=e[0];i.type===h.TABLE&&(t=true)}return t};M.isEditDeleteAssociation=function(){var t=false;var e=this.getSelectedObjects();if(1===e.length){var n=e[0];n.type===h.LINK&&(t=true)}else 2===e.length&&i.every(e,function(t){return t.type===h.LINK})&&(t=true);return t};M.getTableEditTooltip=function(){return this.editIsActive()?"DataManager.Footer.Tooltip.StopEditTable":"DataManager.Footer.Tooltip.EditTable"};M.getAssociationEditTooltip=function(){return this.editIsActive()?"DataManager.Footer.Tooltip.StopEditAssociation":"DataManager.Footer.Tooltip.EditAssociation"};M.getEditButtonTooltip=function(){return this.isEditDeleteTable()?this.getTableEditTooltip():this.isEditDeleteAssociation()?this.getAssociationEditTooltip():""};M.canDeleteObject=function(){var t=false;var e=this.getSelectedObjects();if(!p.isGridEditorOpen())if(1===e.length){var n=e[0];n.type===h.TABLE?"ScriptTable"!==n.tableModel.sourceType&&n.tableModel.getStatus()!==o.DSMTypes.QueryStatus.delete&&(t=true):n.type!==h.LINK||n.preview||2!==n.objects.length||(t=true)}else 2===e.length&&i.every(e,function(t){return t.type===h.LINK&&!t.preview&&2===t.objects.length})&&(t=true);return t};M.editIsActive=function(){return p.isGridEditorOpen()||p.isAssociationEditorOpen()};M.editObject=function(){var t=this.getSelectedObjects();if(1===t.length){var e=t[0];e.type===h.TABLE?this.editTable(e.tableModel):e.type===h.LINK&&2===e.objects.length&&i.every(e.objects,function(t){return t.type===h.TABLE})&&p.setAssociationEditorOpen(!p.editAssociationOpen)}else 2===t.length&&i.every(t,function(t){return t.type===h.LINK&&2===t.objects.length})&&p.setAssociationEditorOpen(!p.editAssociationOpen)};M.refreshTables=function(){var t=[];var e=this.getSelectedObjects();for(var i=0;i<e.length;++i){var a=e[i];var l=a.type===h.TABLE&&"ScriptTable"!==a.tableModel.sourceType&&a.tableModel.getStatus()!==o.DSMTypes.QueryStatus.delete&&-1!==a.tableModel.noOfRows;l&&t.push.apply(t,a.tableModel.getTableRefs())}f.showSpinner("refreshTables");return v.refreshTables(t).then(function(t){if(!t.success){g.show({title:n.get("DataManager.RefreshTables.ErrorTitle"),message:n.get("DataManager.RefreshTables.ErrorMessage")});return v.invalidate()}}).finally(function(){f.stopSpinner("refreshTables");d.trackEvent(d.customEvents.REFRESH_DATA_FROM_SOURCE)})};M.deleteObject=function(){var t=this.getSelectedObjects();if(1===t.length){var e=t[0];e.type===h.TABLE?this.deleteTable(e.tableModel):e.type===h.LINK&&2===e.objects.length&&(i.every(e.objects,function(t){return t.type===h.TABLE})?this.deleteAssociation(e.objects[0].tableModel,e.objects[1].tableModel):e.objects[0].type===h.TABLE&&e.objects[1].type===h.HUB&&this.removeTableFromAssociation(e.objects[1].name,e.objects[0].tableModel))}else if(2===t.length&&i.every(t,function(t){return t.type===h.LINK&&2===t.objects.length})){var n=i.findWhere(t[0].objects,{type:h.TABLE});var a=i.findWhere(t[1].objects,{type:h.TABLE});n&&a&&this.deleteAssociation(n.tableModel,a.tableModel)}};M.editAssociation=function(){this.setAssociationEditorOpen(this.editAssociationOpen)};M.deleteAssociation=function(e,i){v.getLoadModel().then(function(a){var o=a.getTargetTableModelById(e.data.id);var d=a.getTargetTableModelById(i.data.id);var u=c.getAssociationsBetweenTables(a,o,d).length>0;if(u){var p={warningTitle:n.get("DataManager.ViewService.BreakAssociationWarningTitle"),warningMsg1:n.get("DataManager.ViewService.BreakAssociationWarningPart1",[o.data.name,d.data.name]),warningMsg2:n.get("DataManager.ViewService.BreakAssociationWarningPart2"),breakAssociation:function t(){r.LoadModelAssociations.removeAssociationBetween(a,o,null,d,null);s.updateProperties(a.serialize()).then(function(){M.setSelectedObjectsImpl([])})}};var f=t.getService("luiDialog");f.show({template:l.template,controller:l.controller,input:{context:p}})}})};M.removeTableFromAssociation=function(e,i){v.getLoadModel().then(function(a){var o=a.getTargetTableModelById(i.data.id);var c=r.LoadModelAssociations.getAssociation(a,e);if(c&&c.nodes.some(function(t){return t.tableId===o.data.id})){var d={warningTitle:n.get("DataManager.ViewService.BreakAssociationWarningTitle"),warningMsg1:n.get("DataManager.ViewService.BreakCentralHubAssociationWarningPart1",[o.data.name,e]),warningMsg2:n.get("DataManager.ViewService.BreakAssociationWarningPart2"),breakAssociation:function t(){r.LoadModelAssociations.removeFromAssociation(a,e,o);s.updateProperties(a.serialize()).then(function(){M.setSelectedObjectsImpl([])})}};var u=t.getService("luiDialog");u.show({template:l.template,controller:l.controller,input:{context:d}})}})};M.canSplitObject=function(){var t=false;var e=this.getSelectedObjects();if(!p.isGridEditorOpen()&&1===e.length){var i=e[0];i.type===h.TABLE&&(t=i.tableModel.sourceType===o.DSMTypes.ConcatenationQuery.name||i.tableModel.sourceType==o.DSMTypes.ForcedConcatenationQuery.name||i.tableModel.sourceType==o.DSMTypes.JoinedQuery.name)}return t};M.canClearFilters=function(){var t=this.getSelectedObjects();if(1===t.length){var e=t[0];if(e.type===h.TABLE)return v.getLoadModel().then(function(t){var i=t.getSourceTableByQueryId(e.tableModel.data.id);return i&&(i.isFiltered()||i.getLoadFilter())})}return u.resolve(false)};M.removeFilters=function(){var t=this;var e=this.getSelectedObjects();if(1===e.length){var i=e[0];if(i.type===h.TABLE)return v.getLoadModel().then(function(e){var a=e.getSourceTableByQueryId(i.tableModel.data.id);var o=e.getTargetTableModelById(i.tableModel.data.id);var l=a.getFilter();return m.show({title:n.get("dataSpace.filterRemoveConfirm.title"),message:n.get("dataSpace.filterRemoveConfirm.content",l?l.filterClause:n.get("DataManager.Filter.LoadFilter")),okLabel:n.get("dataSpace.filterRemoveConfirm.action")}).closed.then(function(i){if(i){f.showSpinner("removeFilters");var n=a.data.loadProperties;n&&n.filterInfo&&(a.data.loadProperties.filterInfo.filterClause="");a.setLoadFilter(void 0);o&&o.setUpdateStatus();return b.updateLoadSelectStatements(e,[a]).then(function(){e.setProperties();t.refreshTables()}).finally(function(){f.stopSpinner("removeFilters");return u.when(true)})}return u.when(false)})})}return u.when(false)};M.splitObject=function(){var t=this.getSelectedObjects();if(1===t.length){var e=t[0];e.type===h.TABLE&&v.splitQuery(e.tableModel.data.id)}};M.editTable=function(t){p.setGridEditorOpen(!p.gridEditorOpen,t)};M.deleteTable=function(t){y||(y=m.show({title:n.get("dataSpace.tableRemoveConfirm.title"),message:'<span style="word-wrap: break-word">'+n.get("dataSpace.tableRemoveConfirm.content",t.data.name)+"</span>",okLabel:n.get("Common.Delete")}).closed.then(function(e){e&&v.getLoadModel().then(function(e){t.getStatus()==o.DSMTypes.QueryStatus.add&&M.setSelectedObjectsImpl([]);e.removeTargetTable(t.data.name)});y=null}))};M.registerOnSelectedObjectChanged=function(t){var e=T.indexOf(t);e<0&&T.push(t)};M.unregisterOnSelectedObjectChanged=function(t){var e=T.indexOf(t);e>=0&&T.splice(e,1)};M.handleOnSelectedObjectChanged=function(){T.forEach(function(t){t&&t()})};return M}])}.apply(e,n),void 0!==a&&(t.exports=a))}}]);