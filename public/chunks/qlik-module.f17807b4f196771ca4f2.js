/*!
 * sense-client@6.105.4
 * 
 * Copyright(C) 2019 Qlik International AB
 * All Rights Reserved
 * 
 */
(window["qJsonp"]=window["qJsonp"]||[]).push([[64,8,10,11,12,13,20,33,46,65,66,69],Array(48).concat([function(e,t,n){"use strict";var i,r;!(i=[n(119)],r=function(e){return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(434),n(113)],r=function(e,t){var n=t;return{get:function e(){return n},getFlag:function e(t){var i=n[t];return true===i||"true"===i},load:function i(){return e.get().then(function(e){for(var t in e)n[t]=e[t];return n}).catch(function(){n=t;return n})}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(102),n(54)],r=function(e,t){var n={};var i="screen and (orientation: portrait)";var r="screen and (max-width: 640px), screen and (max-height: 480px)";var o;var a;n.Orientation={portrait:"portrait",landscape:"landscape"};var s=false;var l=false;var c=n.Orientation.landscape;function u(e){return"function"===typeof e}function d(e){s=e.matches;n.ViewChanged.emit(s)}function f(e){l=e.matches;n.ViewChangedDirect.emit(l)}var p=t.debounce(d,250);function h(e){c=e.matches?n.Orientation.portrait:n.Orientation.landscape;n.OrientationChanged.emit(c)}function v(){if(o&&u(o.removeListener)){o.removeListener(p);o.removeListener(f)}a&&u(a.removeListener)&&a.removeListener(h)}function g(){v();if(window&&u(window.matchMedia)){o=window.matchMedia(r);a=window.matchMedia(i);o.addListener(p);o.addListener(f);a.addListener(h)}}function m(){d(o);f(o);h(a)}e.mixin(n);n.notification("ViewChanged");n.notification("ViewChangedDirect");n.notification("OrientationChanged");n.init=function e(t){if(true===t){g(t);m(t)}};n.destroy=v;Object.defineProperties(n,{isSmallDevice:{get:function e(){return s}},isSmallDeviceDirect:{get:function e(){return l}},orientation:{get:function e(){return c}}});return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(119),n(89)],r=function(e,t,n){var i=[],r;t.componentDirective("qvShowServiceView",{destroyComponent:"&",input:"=",deferredResult:"=",exposedApi:"="});var o={template:"<div><div ng-repeat='view in views' qv-show-service-view component='view.component' data-input='view.input' data-deferred-result='view.deferredResult' destroy-component='unshow(view)' data-exposed-api='view.exposedApi'></div></div>",controller:["$scope",function(e){e.unshow=function(t){var n=e.views.indexOf(t);n>=0&&e.views.splice(n,1)}}]};function a(){if(!r){var t=e("<div id='show-service-popup-dialog'></div>");e("body").append(t);t.showComponent(o,{views:i});r=true}}function s(e,t){a();var r=new n;var o={component:e,input:t,keepOpen:t.input&&t.input.keepOpen,deferredResult:r,exposedApi:{destroy:s,resultPromise:r.promise}};i.push(o);function s(){var e=i.indexOf(o);e>=0&&i.splice(e,1)}return o.exposedApi}function l(n,i){var r={$element:e("body"),input:i};for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o]);return t.$injector.invoke(n,{},r)}var c=null;function u(e){c=e}function d(e,t){if(c)return c(e,t);return"function"===typeof e||Array.isArray(e)?l(e,t):s(e,t)}function f(){return i.length>0}function p(){i.forEach(function(e){e.keepOpen||e.exposedApi.destroy()})}return{show:d,isViewShowing:f,closeAll:p,setShowFn:u}}.apply(t,i),void 0!==r&&(e.exports=r))},,,,function(e,t){e.exports=function(e){if(!e.webpackPolyfill){e.deprecate=function(){};e.paths=[];e.children||(e.children=[]);Object.defineProperty(e,"loaded",{enumerable:true,get:function(){return e.l}});Object.defineProperty(e,"id",{enumerable:true,get:function(){return e.i}});e.webpackPolyfill=1}return e}},function(e,t,n){"use strict";window.requirejs||n(61);window.requirejs.config.call(null,{config:{text:{useXhr:function e(t,i,r,o){if(0===t.indexOf(n.p))return true;var a=window.requirejs("text");return a.useXhr(t,i,r,o)}}},context:window.requirejs.s.contexts.sense?"sense":null,paths:{},shim:{},waitSeconds:60});window.requirejs.s.contexts.sense&&(window.requirejs.s.contexts._.defined.angular=window.requirejs.s.contexts.sense.defined.angular)},function(e,t,n){var i=n(10);(function(e,t){"use strict";var n=t.$$minErr("$sanitize");var i;var r;var o;var a;var s;var l;var c;var u;var d;var f;function p(){var p=false;var h=false;this.$get=["$$sanitizeUri",function(e){p=true;h&&r(_,q);return function(t){var n=[];d(t,f(n,function(t,n){return!/^unsafe:/.test(e(t,n))}));return n.join("")}}];this.enableSvg=function(e){if(s(e)){h=e;return this}return h};this.addValidElements=function(e){if(!p){a(e)&&(e={htmlElements:e});k(q,e.svgElements);k(m,e.htmlVoidElements);k(_,e.htmlVoidElements);k(_,e.htmlElements)}return this};this.addValidAttrs=function(e){p||r(A,O(e,true));return this};i=t.bind;r=t.extend;o=t.forEach;a=t.isArray;s=t.isDefined;l=t.$$lowercase;c=t.noop;d=P;f=R;u=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};var v=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g=/([^#-~ |!])/g;var m=T("area,br,col,hr,img,wbr");var b=T("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),y=T("rp,rt"),x=r({},y,b);var S=r({},b,T("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul"));var w=r({},y,T("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));var q=T("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan");var C=T("script,style");var _=r({},m,S,w,x);var I=T("background,cite,href,longdesc,src,xlink:href,xml:base");var E=T("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width,style");var D=T("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",true);var A=r({},I,D,E);function T(e,t){return O(e.split(","),t)}function O(e,t){var n={},i;for(i=0;i<e.length;i++)n[t?l(e[i]):e[i]]=true;return n}function k(e,t){t&&t.length&&r(e,O(t))}var L=function(e,t){var i;if(!t||!t.implementation)throw n("noinert","Can't create an inert html document");i=t.implementation.createHTMLDocument("inert");var r=(i.documentElement||i.getDocumentElement()).querySelector("body");r.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>';if(r.querySelector("svg")){r.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">';return r.querySelector("svg img")?a:s}return o;function o(t){t="<remove></remove>"+t;try{t=encodeURI(t)}catch(e){return}var n=new e.XMLHttpRequest;n.responseType="document";n.open("GET","data:text/html;charset=utf-8,"+t,false);n.send(null);var i=n.response.body;i.firstChild.remove();return i}function a(t){t="<remove></remove>"+t;try{var n=(new e.DOMParser).parseFromString(t,"text/html").body;n.firstChild.remove();return n}catch(e){return}}function s(e){r.innerHTML=e;t.documentMode&&F(r);return r}}(e,e.document);function P(e,t){null===e||void 0===e?e="":"string"!==typeof e&&(e=""+e);var i=L(e);if(!i)return"";var r=5;do{if(0===r)throw n("uinput","Failed to sanitize html because the input is unstable");r--;e=i.innerHTML;i=L(e)}while(e!==i.innerHTML);var o=i.firstChild;while(o){switch(o.nodeType){case 1:t.start(o.nodeName.toLowerCase(),M(o.attributes));break;case 3:t.chars(o.textContent);break}var a;if(!(a=o.firstChild)){1===o.nodeType&&t.end(o.nodeName.toLowerCase());a=$("nextSibling",o);if(!a)while(null==a){o=$("parentNode",o);if(o===i)break;a=$("nextSibling",o);1===o.nodeType&&t.end(o.nodeName.toLowerCase())}}o=a}while(o=i.firstChild)i.removeChild(o)}function M(e){var t={};for(var n=0,i=e.length;n<i;n++){var r=e[n];t[r.name]=r.value}return t}function N(e){return e.replace(/&/g,"&amp;").replace(v,function(e){var t=e.charCodeAt(0);var n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(g,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function R(e,t){var n=false;var r=i(e,e.push);return{start:function(e,i){e=l(e);!n&&C[e]&&(n=e);if(!n&&true===_[e]){r("<");r(e);o(i,function(n,i){var o=l(i);var a="img"===e&&"src"===o||"background"===o;if(0===o.indexOf("data-")||true===A[o]&&(true!==I[o]||t(n,a))){r(" ");r(i);r('="');r(N(n));r('"')}});r(">")}},end:function(e){e=l(e);if(!n&&true===_[e]&&true!==m[e]){r("</");r(e);r(">")}e==n&&(n=false)},chars:function(e){n||r(N(e))}}}function F(t){while(t){if(t.nodeType===e.Node.ELEMENT_NODE){var n=t.attributes;for(var i=0,r=n.length;i<r;i++){var o=n[i];var a=o.name.toLowerCase();if("xmlns:ns1"===a||0===a.lastIndexOf("ns1:",0)){t.removeAttributeNode(o);i--;r--}}}var s=t.firstChild;s&&F(s);t=$("nextSibling",t)}}function $(e,t){var i=t[e];if(i&&u.call(t,i))throw n("elclob","Failed to sanitize html because the element is clobbered: {0}",t.outerHTML||t.outerText);return i}}function h(e){var t=[];var n=f(t,c);n.chars(e);return t.join("")}t.module("ngSanitize",[]).provider("$sanitize",p).info({angularVersion:"1.7.2"});t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i;var r=t.$$minErr("linky");var o=t.isDefined;var a=t.isFunction;var s=t.isObject;var l=t.isString;return function(t,c,u){if(null==t||""===t)return t;if(!l(t))throw r("notstring","Expected string but received: {0}",t);var d=a(u)?u:s(u)?function e(){return u}:function e(){return{}};var f;var p=t;var v=[];var g;var m;while(f=p.match(n)){g=f[0];f[2]||f[4]||(g=(f[3]?"http://":"mailto:")+g);m=f.index;b(p.substr(0,m));y(g,f[0].replace(i,""));p=p.substring(m+f[0].length)}b(p);return e(v.join(""));function b(e){if(!e)return;v.push(h(e))}function y(e,t){var n,i=d(e);v.push("<a ");for(n in i)v.push(n+'="'+i[n]+'" ');!o(c)||"target"in i||v.push('target="',c,'" ');v.push('href="',e.replace(/"/g,"&quot;"),'">');b(t);v.push("</a>")}}}])})(window,window.angular)},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.loadExtensionAMD=s;t.loadConnectorAMD=l;t.loadMashupAMD=c;function i(){return Promise.all([n.e(77),n.e(67)]).then(n.t.bind(null,53,7))}function r(){return Promise.all([n.e(1),n.e(11),n.e(34)]).then(n.t.bind(null,81,7))}function o(){return Promise.all([n.e(1),n.e(12),n.e(20),n.e(0),n.e(37)]).then(n.t.bind(null,82,7))}function a(){return Promise.all([n.e(1),n.e(22),n.e(20),n.e(11),n.e(35)]).then(n.t.bind(null,83,7))}function s(){return Promise.all([i(),r(),o()])}function l(){return Promise.all([i(),r(),a()])}function c(){return Promise.all([r(),o()])}},function(e,t,n){n(62);e.exports="ngAnimate"},function(module,exports){var requirejs,require,define;(function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.5",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!!("undefined"!==typeof window&&"undefined"!==typeof navigator&&window.document),isWebWorker=!isBrowser&&"undefined"!==typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!==typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=false;function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){t&&eachProp(t,function(t,r){if(n||!hasProp(e,r))if(!i||"object"!==typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp)e[r]=t;else{e[r]||(e[r]={});mixin(e[r],t,n,i)}});return e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;each(e.split("."),function(e){t=t[e]});return t}function makeError(e,t,n,i){var r=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);r.requireType=e;r.requireModules=i;n&&(r.originalError=n);return r}if("undefined"!==typeof define)return;if("undefined"!==typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs;requirejs=void 0}if("undefined"!==typeof require&&!isFunction(require)){cfg=require;require=void 0}function newContext(e){var t,n,i,r,o,a={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},s={},l={},c={},u=[],d={},f={},p={},h=1,v=1;function g(e){var t,n;for(t=0;t<e.length;t++){n=e[t];if("."===n){e.splice(t,1);t-=1}else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;if(t>0){e.splice(t-1,2);t-=2}}}}function m(e,t,n){var i,r,o,s,l,c,u,d,f,p,h,v,m=t&&t.split("/"),b=a.map,y=b&&b["*"];if(e){e=e.split("/");u=e.length-1;a.nodeIdCompat&&jsSuffixRegExp.test(e[u])&&(e[u]=e[u].replace(jsSuffixRegExp,""));if("."===e[0].charAt(0)&&m){v=m.slice(0,m.length-1);e=v.concat(e)}g(e);e=e.join("/")}if(n&&b&&(m||y)){o=e.split("/");e:for(s=o.length;s>0;s-=1){c=o.slice(0,s).join("/");if(m)for(l=m.length;l>0;l-=1){r=getOwn(b,m.slice(0,l).join("/"));if(r){r=getOwn(r,c);if(r){d=r;f=s;break e}}}if(!p&&y&&getOwn(y,c)){p=getOwn(y,c);h=s}}if(!d&&p){d=p;f=h}if(d){o.splice(0,f,d);e=o.join("/")}}i=getOwn(a.pkgs,e);return i||e}function b(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===i.contextName){t.parentNode.removeChild(t);return true}})}function y(e){var t=getOwn(a.paths,e);if(t&&isArray(t)&&t.length>1){t.shift();i.require.undef(e);i.makeRequire(null,{skipMap:true})([e]);return true}}function x(e){var t,n=e?e.indexOf("!"):-1;if(n>-1){t=e.substring(0,n);e=e.substring(n+1,e.length)}return[t,e]}function S(e,t,n,r){var o,a,s,l,c=null,u=t?t.name:null,f=e,p=true,g="";if(!e){p=false;e="_@r"+(h+=1)}l=x(e);c=l[0];e=l[1];if(c){c=m(c,u,r);a=getOwn(d,c)}if(e)if(c)g=n?e:a&&a.normalize?a.normalize(e,function(e){return m(e,u,r)}):-1===e.indexOf("!")?m(e,u,r):e;else{g=m(e,u,r);l=x(g);c=l[0];g=l[1];n=true;o=i.nameToUrl(g)}s=!c||a||n?"":"_unnormalized"+(v+=1);return{prefix:c,name:g,parentMap:t,unnormalized:!!s,url:o,originalName:f,isDefine:p,id:(c?c+"!"+g:g)+s}}function w(e){var t=e.id,n=getOwn(s,t);n||(n=s[t]=new i.Module(e));return n}function q(e,t,n){var i=e.id,r=getOwn(s,i);if(!hasProp(d,i)||r&&!r.defineEmitComplete){r=w(e);r.error&&"error"===t?n(r.error):r.on(t,n)}else"defined"===t&&n(d[i])}function C(e,t){var n=e.requireModules,i=false;if(t)t(e);else{each(n,function(t){var n=getOwn(s,t);if(n){n.error=e;if(n.events.error){i=true;n.emit("error",e)}}});i||req.onError(e)}}function _(){if(globalDefQueue.length){each(globalDefQueue,function(e){var t=e[0];"string"===typeof t&&(i.defQueueMap[t]=true);u.push(e)});globalDefQueue=[]}}r={require:function(e){return e.require?e.require:e.require=i.makeRequire(e.map)},exports:function(e){e.usingExports=true;if(e.map.isDefine)return e.exports?d[e.map.id]=e.exports:e.exports=d[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(a.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}};function I(e){delete s[e];delete l[e]}function E(e,t,n){var i=e.map.id;if(e.error)e.emit("error",e.error);else{t[i]=true;each(e.depMaps,function(i,r){var o=i.id,a=getOwn(s,o);if(a&&!e.depMatched[r]&&!n[o])if(getOwn(t,o)){e.defineDep(r,d[o]);e.check()}else E(a,t,n)});n[i]=true}}function D(){var e,n,r=1e3*a.waitSeconds,s=r&&i.startTime+r<(new Date).getTime(),c=[],u=[],d=false,f=true;if(t)return;t=true;eachProp(l,function(e){var t=e.map,i=t.id;if(!e.enabled)return;t.isDefine||u.push(e);if(!e.error)if(!e.inited&&s)if(y(i)){n=true;d=true}else{c.push(i);b(i)}else if(!e.inited&&e.fetched&&t.isDefine){d=true;if(!t.prefix)return f=false}});if(s&&c.length){e=makeError("timeout","Load timeout for modules: "+c,null,c);e.contextName=i.contextName;return C(e)}f&&each(u,function(e){E(e,{},{})});s&&!n||!d||!isBrowser&&!isWebWorker||o||(o=setTimeout(function(){o=0;D()},50));t=false}n=function(e){this.events=getOwn(c,e.id)||{};this.map=e;this.shim=getOwn(a.shim,e.id);this.depExports=[];this.depMaps=[];this.depMatched=[];this.pluginMaps={};this.depCount=0};n.prototype={init:function(e,t,n,i){i=i||{};if(this.inited)return;this.factory=t;n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)}));this.depMaps=e&&e.slice(0);this.errback=n;this.inited=true;this.ignore=i.ignore;i.enabled||this.enabled?this.enable():this.check()},defineDep:function(e,t){if(!this.depMatched[e]){this.depMatched[e]=true;this.depCount-=1;this.depExports[e]=t}},fetch:function(){if(this.fetched)return;this.fetched=true;i.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();i.makeRequire(this.map,{enableBuildCallback:true})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;if(!f[e]){f[e]=true;i.load(this.map.id,e)}},check:function(){if(!this.enabled||this.enabling)return;var e,t,n=this.map.id,r=this.depExports,o=this.exports,a=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=true;if(this.depCount<1&&!this.defined){if(isFunction(a)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{o=i.execCb(n,a,r,o)}catch(t){e=t}else o=i.execCb(n,a,r,o);if(this.map.isDefine&&void 0===o){t=this.module;t?o=t.exports:this.usingExports&&(o=this.exports)}if(e){e.requireMap=this.map;e.requireModules=this.map.isDefine?[this.map.id]:null;e.requireType=this.map.isDefine?"define":"require";return C(this.error=e)}}else o=a;this.exports=o;if(this.map.isDefine&&!this.ignore){d[n]=o;if(req.onResourceLoad){var s=[];each(this.depMaps,function(e){s.push(e.normalizedMap||e)});req.onResourceLoad(i,this.map,s)}}I(n);this.defined=true}this.defining=false;if(this.defined&&!this.defineEmitted){this.defineEmitted=true;this.emit("defined",this.exports);this.defineEmitComplete=true}}}else hasProp(i.defQueueMap,n)||this.fetch()},callPlugin:function(){var e=this.map,t=e.id,n=S(e.prefix);this.depMaps.push(n);q(n,"defined",bind(this,function(n){var r,o,l,c=getOwn(p,this.map.id),u=this.map.name,d=this.map.parentMap?this.map.parentMap.name:null,f=i.makeRequire(e.parentMap,{enableBuildCallback:true});if(this.map.unnormalized){n.normalize&&(u=n.normalize(u,function(e){return m(e,d,true)})||"");o=S(e.prefix+"!"+u,this.map.parentMap,true);q(o,"defined",bind(this,function(e){this.map.normalizedMap=o;this.init([],function(){return e},null,{enabled:true,ignore:true})}));l=getOwn(s,o.id);if(l){this.depMaps.push(o);this.events.error&&l.on("error",bind(this,function(e){this.emit("error",e)}));l.enable()}return}if(c){this.map.url=i.nameToUrl(c);this.load();return}r=bind(this,function(e){this.init([],function(){return e},null,{enabled:true})});r.error=bind(this,function(e){this.inited=true;this.error=e;e.requireModules=[t];eachProp(s,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&I(e.map.id)});C(e)});r.fromText=bind(this,function(n,o){var s=e.name,l=S(s),c=useInteractive;o&&(n=o);c&&(useInteractive=false);w(l);hasProp(a.config,t)&&(a.config[s]=a.config[t]);try{req.exec(n)}catch(e){return C(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}c&&(useInteractive=true);this.depMaps.push(l);i.completeLoad(s);f([s],r)});n.load(e.name,f,r,a)}));i.enable(n,this);this.pluginMaps[n.id]=n},enable:function(){l[this.map.id]=this;this.enabled=true;this.enabling=true;each(this.depMaps,bind(this,function(e,t){var n,o,a;if("string"===typeof e){e=S(e,this.map.isDefine?this.map:this.map.parentMap,false,!this.skipMap);this.depMaps[t]=e;a=getOwn(r,e.id);if(a){this.depExports[t]=a(this);return}this.depCount+=1;q(e,"defined",bind(this,function(e){if(this.undefed)return;this.defineDep(t,e);this.check()}));this.errback?q(e,"error",bind(this,this.errback)):this.events.error&&q(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id;o=s[n];hasProp(r,n)||!o||o.enabled||i.enable(e,this)}));eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(s,e.id);t&&!t.enabled&&i.enable(e,this)}));this.enabling=false;this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]);n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)});"error"===e&&delete this.events[e]}};function A(e){hasProp(d,e[0])||w(S(e[0],null,true)).init(e[1],e[2])}function T(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,false)}function O(e){var t=e.currentTarget||e.srcElement;T(t,i.onScriptLoad,"load","onreadystatechange");T(t,i.onScriptError,"error");return{node:t,id:t&&t.getAttribute("data-requiremodule")}}function k(){var e;_();while(u.length){e=u.shift();if(null===e[0])return C(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));A(e)}i.defQueueMap={}}i={config:a,contextName:e,registry:s,defined:d,urlFetched:f,defQueue:u,defQueueMap:{},Module:n,makeModuleMap:S,nextTick:req.nextTick,onError:C,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");if("string"===typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,n){return(-1===n.indexOf("?")?"?":"&")+t}}var n=a.shim,r={paths:true,bundles:true,config:true,map:true};eachProp(e,function(e,t){if(r[t]){a[t]||(a[t]={});mixin(a[t],e,true,true)}else a[t]=e});e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(p[e]=t)})});if(e.shim){eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e});!e.exports&&!e.init||e.exportsFn||(e.exportsFn=i.makeShimExports(e));n[t]=e});a.shim=n}e.packages&&each(e.packages,function(e){var t,n;e="string"===typeof e?{name:e}:e;n=e.name;t=e.location;t&&(a.paths[n]=e.location);a.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")});eachProp(s,function(e,t){e.inited||e.map.unnormalized||(e.map=S(t,null,true))});(e.deps||e.callback)&&i.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;e.init&&(t=e.init.apply(global,arguments));return t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){n=n||{};function o(a,l,c){var u,f,p;n.enableBuildCallback&&l&&isFunction(l)&&(l.__requireJsBuild=true);if("string"===typeof a){if(isFunction(l))return C(makeError("requireargs","Invalid require call"),c);if(t&&hasProp(r,a))return r[a](s[t.id]);if(req.get)return req.get(i,a,t,o);f=S(a,t,false,true);u=f.id;if(!hasProp(d,u))return C(makeError("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")));return d[u]}k();i.nextTick(function(){k();p=w(S(null,t));p.skipMap=n.skipMap;p.init(a,l,c,{enabled:true});D()});return o}mixin(o,{isBrowser:isBrowser,toUrl:function(e){var n,r=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;if(-1!==r&&(!a||r>1)){n=e.substring(r,e.length);e=e.substring(0,r)}return i.nameToUrl(m(e,t&&t.id,true),n,true)},defined:function(e){return hasProp(d,S(e,t,false,true).id)},specified:function(e){e=S(e,t,false,true).id;return hasProp(d,e)||hasProp(s,e)}});t||(o.undef=function(e){_();var n=S(e,t,true),r=getOwn(s,e);r.undefed=true;b(e);delete d[e];delete f[n.url];delete c[e];eachReverse(u,function(t,n){t[0]===e&&u.splice(n,1)});delete i.defQueueMap[e];if(r){r.events.defined&&(c[e]=r.events);I(e)}});return o},enable:function(e){var t=getOwn(s,e.id);t&&w(e).enable()},completeLoad:function(e){var t,n,r,o=getOwn(a.shim,e)||{},l=o.exports;_();while(u.length){n=u.shift();if(null===n[0]){n[0]=e;if(t)break;t=true}else n[0]===e&&(t=true);A(n)}i.defQueueMap={};r=getOwn(s,e);if(!t&&!hasProp(d,e)&&r&&!r.inited){if(!(!a.enforceDefine||l&&getGlobal(l)))return y(e)?void 0:C(makeError("nodefine","No define call for "+e,null,[e]));A([e,o.deps||[],o.exportsFn])}D()},nameToUrl:function(e,t,n){var r,o,s,l,c,u,d,f=getOwn(a.pkgs,e);f&&(e=f);d=getOwn(p,e);if(d)return i.nameToUrl(d,t,n);if(req.jsExtRegExp.test(e))c=e+(t||"");else{r=a.paths;o=e.split("/");for(s=o.length;s>0;s-=1){l=o.slice(0,s).join("/");u=getOwn(r,l);if(u){isArray(u)&&(u=u[0]);o.splice(0,s,u);break}}c=o.join("/");c+=t||(/^data\:|^blob\:|\?/.test(c)||n?"":".js");c=("/"===c.charAt(0)||c.match(/^[\w\+\.\-]+:/)?"":a.baseUrl)+c}return a.urlArgs&&!/^blob\:/.test(c)?c+a.urlArgs(e,c):c},load:function(e,t){req.load(i,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=O(e);i.completeLoad(t.id)}},onScriptError:function(e){var t=O(e);if(!y(t.id)){var n=[];eachProp(s,function(e,i){0!==i.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===t.id){n.push(i);return true}})});return C(makeError("scripterror",'Script error for "'+t.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[t.id]))}}};i.require=i.makeRequire();return i}req=requirejs=function(e,t,n,i){var r,o,a=defContextName;if(!isArray(e)&&"string"!==typeof e){o=e;if(isArray(t)){e=t;t=n;n=i}else e=[]}o&&o.context&&(a=o.context);r=getOwn(contexts,a);r||(r=contexts[a]=req.s.newContext(a));o&&r.configure(o);return r.require(e,t,n)};req.config=function(e){return req(e)};req.nextTick="undefined"!==typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()};require||(require=req);req.version=version;req.jsExtRegExp=/^\/|:|\?|\.js$/;req.isBrowser=isBrowser;s=req.s={contexts:contexts,newContext:newContext};req({});each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}});if(isBrowser){head=s.head=document.getElementsByTagName("head")[0];baseElement=document.getElementsByTagName("base")[0];baseElement&&(head=s.head=baseElement.parentNode)}req.onError=defaultOnError;req.createNode=function(e,t,n){var i=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");i.type=e.scriptType||"text/javascript";i.charset="utf-8";i.async=true;return i};req.load=function(e,t,n){var i=e&&e.config||{},r;if(isBrowser){r=req.createNode(i,t,n);r.setAttribute("data-requirecontext",e.contextName);r.setAttribute("data-requiremodule",t);if(!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera){r.addEventListener("load",e.onScriptLoad,false);r.addEventListener("error",e.onScriptError,false)}else{useInteractive=true;r.attachEvent("onreadystatechange",e.onScriptLoad)}r.src=n;i.onNodeCreated&&i.onNodeCreated(r,i,t,n);currentlyAddingScript=r;baseElement?head.insertBefore(r,baseElement):head.appendChild(r);currentlyAddingScript=null;return r}if(isWebWorker)try{setTimeout(function(){},0);importScripts(n);e.completeLoad(t)}catch(i){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}};function getInteractiveScript(){if(interactiveScript&&"interactive"===interactiveScript.readyState)return interactiveScript;eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e});return interactiveScript}isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){head||(head=e.parentNode);dataMain=e.getAttribute("data-main");if(dataMain){mainScript=dataMain;if(!cfg.baseUrl&&-1===mainScript.indexOf("!")){src=mainScript.split("/");mainScript=src.pop();subPath=src.length?src.join("/")+"/":"./";cfg.baseUrl=subPath}mainScript=mainScript.replace(jsSuffixRegExp,"");req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain);cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript];return true}});define=function(e,t,n){var i,r;if("string"!==typeof e){n=t;t=e;e=null}if(!isArray(t)){n=t;t=null}if(!t&&isFunction(n)){t=[];if(n.length){n.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,n){t.push(n)});t=(1===n.length?["require"]:["require","exports","module"]).concat(t)}}if(useInteractive){i=currentlyAddingScript||getInteractiveScript();if(i){e||(e=i.getAttribute("data-requiremodule"));r=contexts[i.getAttribute("data-requirecontext")]}}if(r){r.defQueue.push([e,t,n]);r.defQueueMap[e]=true}else globalDefQueue.push([e,t,n])};define.amd={jQuery:true};req.exec=function(text){return eval(text)};req(cfg)})(window,"undefined"===typeof setTimeout?void 0:setTimeout);window.require=require;window.requirejs=requirejs;window.define=define},function(e,t){(function(e,t){"use strict";var n=1;var i=8;var r="-add";var o="-remove";var a="ng-";var s="-active";var l="-prepare";var c="ng-animate";var u="$$ngAnimateChildren";var d="",f,p,h,v;if(void 0===e.ontransitionend&&void 0!==e.onwebkittransitionend){d="-webkit-";f="WebkitTransition";p="webkitTransitionEnd transitionend"}else{f="transition";p="transitionend"}if(void 0===e.onanimationend&&void 0!==e.onwebkitanimationend){d="-webkit-";h="WebkitAnimation";v="webkitAnimationEnd animationend"}else{h="animation";v="animationend"}var g="Duration";var m="Property";var b="Delay";var y="TimingFunction";var x="IterationCount";var S="PlayState";var w=9999;var q=h+b;var C=h+g;var _=f+b;var I=f+g;var E=t.$$minErr("ng");function D(e,t,n){if(!e)throw E("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function A(e,t){if(!e&&!t)return"";if(!e)return t;if(!t)return e;_e(e)&&(e=e.join(" "));_e(t)&&(t=t.join(" "));return e+" "+t}function T(e){var t={};if(e&&(e.to||e.from)){t.to=e.to;t.from=e.from}return t}function O(e,t,n){var i="";e=_e(e)?e:e&&Te(e)&&e.length?e.split(/\s+/):[];Ce(e,function(e,r){if(e&&e.length>0){i+=r>0?" ":"";i+=n?t+e:e+t}});return i}function k(e,t){var n=e.indexOf(t);t>=0&&e.splice(n,1)}function L(e){if(e instanceof ke)switch(e.length){case 0:return e;case 1:if(e[0].nodeType===n)return e;break;default:return ke(P(e))}if(e.nodeType===n)return ke(e)}function P(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var i=e[t];if(i.nodeType===n)return i}}function M(e,t,n){Ce(t,function(t){e.addClass(t,n)})}function N(e,t,n){Ce(t,function(t){e.removeClass(t,n)})}function R(e){return function(t,n){if(n.addClass){M(e,t,n.addClass);n.addClass=null}if(n.removeClass){N(e,t,n.removeClass);n.removeClass=null}}}function F(e){e=e||{};if(!e.$$prepared){var t=e.domOperation||Le;e.domOperation=function(){e.$$domOperationFired=true;t();t=Le};e.$$prepared=true}return e}function $(e,t){j(e,t);H(e,t)}function j(e,t){if(t.from){e.css(t.from);t.from=null}}function H(e,t){if(t.to){e.css(t.to);t.to=null}}function V(e,t,n){var i=t.options||{};var r=n.options||{};var o=(i.addClass||"")+" "+(r.addClass||"");var a=(i.removeClass||"")+" "+(r.removeClass||"");var s=B(e.attr("class"),o,a);if(r.preparationClasses){i.preparationClasses=X(r.preparationClasses,i.preparationClasses);delete r.preparationClasses}var l=i.domOperation!==Le?i.domOperation:null;qe(i,r);l&&(i.domOperation=l);s.addClass?i.addClass=s.addClass:i.addClass=null;s.removeClass?i.removeClass=s.removeClass:i.removeClass=null;t.addClass=i.addClass;t.removeClass=i.removeClass;return i}function B(e,t,n){var i=1;var a=-1;var s={};e=c(e);t=c(t);Ce(t,function(e,t){s[t]=i});n=c(n);Ce(n,function(e,t){s[t]=s[t]===i?null:a});var l={addClass:"",removeClass:""};Ce(s,function(t,n){var s,c;if(t===i){s="addClass";c=!e[n]||e[n+o]}else if(t===a){s="removeClass";c=e[n]||e[n+r]}if(c){l[s].length&&(l[s]+=" ");l[s]+=n}});function c(e){Te(e)&&(e=e.split(" "));var t={};Ce(e,function(e){e.length&&(t[e]=true)});return t}return l}function z(e){return e instanceof ke?e[0]:e}function U(e,t,n){var i="";t&&(i=O(t,a,true));n.addClass&&(i=X(i,O(n.addClass,r)));n.removeClass&&(i=X(i,O(n.removeClass,o)));if(i.length){n.preparationClasses=i;e.addClass(i)}}function G(e,t){if(t.preparationClasses){e.removeClass(t.preparationClasses);t.preparationClasses=null}if(t.activeClasses){e.removeClass(t.activeClasses);t.activeClasses=null}}function W(e,t){var n=t?"-"+t+"s":"";Y(e,[_,n]);return[_,n]}function K(e,t){var n=t?"paused":"";var i=h+S;Y(e,[i,n]);return[i,n]}function Y(e,t){var n=t[0];var i=t[1];e.style[n]=i}function X(e,t){if(!e)return t;if(!t)return e;return e+" "+t}var Q=["$$rAF",function(e){var t,n;function i(e){t=t.concat(e);r()}t=i.queue=[];i.waitUntilQuiet=function(t){n&&n();n=e(function(){n=null;t();r()})};return i;function r(){if(!t.length)return;var i=t.shift();for(var o=0;o<i.length;o++)i[o]();n||e(function(){n||r()})}}];var J=["$interpolate",function(e){return{link:function(t,n,i){var r=i.ngAnimateChildren;if(Te(r)&&0===r.length)n.data(u,true);else{o(e(r)(t));i.$observe("ngAnimateChildren",o)}function o(e){e="on"===e||"true"===e;n.data(u,e)}}}}];var Z="$$animateCss";var ee=1e3;var te=3;var ne=1.5;var ie={transitionDuration:I,transitionDelay:_,transitionProperty:f+m,animationDuration:C,animationDelay:q,animationIterationCount:h+x};var re={transitionDuration:I,transitionDelay:_,animationDuration:C,animationDelay:q};function oe(e){return[C,e+"s"]}function ae(e,t){var n=t?q:_;return[n,e+"s"]}function se(e,t,n){var i=Object.create(null);var r=e.getComputedStyle(t)||{};Ce(n,function(e,t){var n=r[e];if(n){var o=n.charAt(0);("-"===o||"+"===o||o>=0)&&(n=le(n));0===n&&(n=null);i[t]=n}});return i}function le(e){var t=0;var n=e.split(/\s*,\s*/);Ce(n,function(e){"s"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1));e=parseFloat(e)||0;t=t?Math.max(e,t):e});return t}function ce(e){return 0===e||null!=e}function ue(e,t){var n=f;var i=e+"s";t?n+=g:i+=" linear all";return[n,i]}function de(){var e=Object.create(null);return{flush:function(){e=Object.create(null)},count:function(t){var n=e[t];return n?n.total:0},get:function(t){var n=e[t];return n&&n.value},put:function(t,n){e[t]?e[t].total++:e[t]={total:1,value:n}}}}function fe(e,t,n){Ce(n,function(n){e[n]=Ie(e[n])?e[n]:t.style.getPropertyValue(n)})}var pe=["$animateProvider",function(e){var t=de();var n=de();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(e,i,l,c,u,d,g,b){var x=R(i);var S=0;function q(e,t){var n="$$ngAnimateParentKey";var i=e.parentNode;var r=i[n]||(i[n]=++S);return r+"-"+e.getAttribute("class")+"-"+t}function C(n,i,r,o){var a=t.get(r);if(!a){a=se(e,n,o);"infinite"===a.animationIterationCount&&(a.animationIterationCount=1)}t.put(r,a);return a}function _(r,o,a,s){var l;if(t.count(a)>0){l=n.get(a);if(!l){var c=O(o,"-stagger");i.addClass(r,c);l=se(e,r,s);l.animationDuration=Math.max(l.animationDuration,0);l.transitionDuration=Math.max(l.transitionDuration,0);i.removeClass(r,c);n.put(a,l)}}return l||{}}var I=[];function E(e){I.push(e);g.waitUntilQuiet(function(){t.flush();n.flush();var e=u();for(var i=0;i<I.length;i++)I[i](e);I.length=0})}function D(e,t,n){var i=C(e,t,n,ie);var r=i.animationDelay;var o=i.transitionDelay;i.maxDelay=r&&o?Math.max(r,o):r||o;i.maxDuration=Math.max(i.animationDuration*i.animationIterationCount,i.transitionDuration);return i}return function e(n,u){var g=u||{};g.$$prepared||(g=F(we(g)));var S={};var C=z(n);if(!C||!C.parentNode||!b.enabled())return $e();var I=[];var A=n.attr("class");var L=T(g);var P;var M;var N;var R;var V;var B;var U;var G;var X;var Q;var J=[];if(0===g.duration||!d.animations&&!d.transitions)return $e();var ie=g.event&&_e(g.event)?g.event.join(" "):g.event;var se=ie&&g.structural;var le="";var de="";se?le=O(ie,a,true):ie&&(le=ie);g.addClass&&(de+=O(g.addClass,r));if(g.removeClass){de.length&&(de+=" ");de+=O(g.removeClass,o)}g.applyClassesEarly&&de.length&&x(n,g);var pe=[le,de].join(" ").trim();var he=A+" "+pe;var ve=O(pe,s);var ge=L.to&&Object.keys(L.to).length>0;var me=(g.keyframeStyle||"").length>0;if(!me&&!ge&&!pe)return $e();var be,ye;if(g.stagger>0){var xe=parseFloat(g.stagger);ye={transitionDelay:xe,animationDelay:xe,transitionDuration:0,animationDuration:0}}else{be=q(C,he);ye=_(C,pe,be,re)}g.$$skipPreparationClasses||i.addClass(n,pe);var Se;if(g.transitionStyle){var qe=[f,g.transitionStyle];Y(C,qe);I.push(qe)}if(g.duration>=0){Se=C.style[f].length>0;var Ie=ue(g.duration,Se);Y(C,Ie);I.push(Ie)}if(g.keyframeStyle){var Ee=[h,g.keyframeStyle];Y(C,Ee);I.push(Ee)}var De=ye?g.staggerIndex>=0?g.staggerIndex:t.count(be):0;var Ae=0===De;Ae&&!g.skipBlocking&&W(C,w);var Te=D(C,he,be);var Oe=Te.maxDelay;B=Math.max(Oe,0);G=Te.maxDuration;var ke={};ke.hasTransitions=Te.transitionDuration>0;ke.hasAnimations=Te.animationDuration>0;ke.hasTransitionAll=ke.hasTransitions&&"all"===Te.transitionProperty;ke.applyTransitionDuration=ge&&(ke.hasTransitions&&!ke.hasTransitionAll||ke.hasAnimations&&!ke.hasTransitions);ke.applyAnimationDuration=g.duration&&ke.hasAnimations;ke.applyTransitionDelay=ce(g.delay)&&(ke.applyTransitionDuration||ke.hasTransitions);ke.applyAnimationDelay=ce(g.delay)&&ke.hasAnimations;ke.recalculateTimingStyles=de.length>0;if(ke.applyTransitionDuration||ke.applyAnimationDuration){G=g.duration?parseFloat(g.duration):G;if(ke.applyTransitionDuration){ke.hasTransitions=true;Te.transitionDuration=G;Se=C.style[f+m].length>0;I.push(ue(G,Se))}if(ke.applyAnimationDuration){ke.hasAnimations=true;Te.animationDuration=G;I.push(oe(G))}}if(0===G&&!ke.recalculateTimingStyles)return $e();if(null!=g.delay){var Pe;if("boolean"!==typeof g.delay){Pe=parseFloat(g.delay);B=Math.max(Pe,0)}ke.applyTransitionDelay&&I.push(ae(Pe));ke.applyAnimationDelay&&I.push(ae(Pe,true))}null==g.duration&&Te.transitionDuration>0&&(ke.recalculateTimingStyles=ke.recalculateTimingStyles||Ae);U=B*ee;X=G*ee;if(!g.skipBlocking){ke.blockTransition=Te.transitionDuration>0;ke.blockKeyframeAnimation=Te.animationDuration>0&&ye.animationDelay>0&&0===ye.animationDuration}if(g.from){g.cleanupStyles&&fe(S,C,Object.keys(g.from));j(n,g)}ke.blockTransition||ke.blockKeyframeAnimation?Fe(G):g.skipBlocking||W(C,false);return{$$willAnimate:true,end:Me,start:function(){if(P)return;V={end:Me,cancel:Ne,resume:null,pause:null};R=new l(V);E(He);return R}};function Me(){Re()}function Ne(){Re(true)}function Re(e){if(P||N&&M)return;P=true;M=false;g.$$skipPreparationClasses||i.removeClass(n,pe);i.removeClass(n,ve);K(C,false);W(C,false);Ce(I,function(e){C.style[e[0]]=""});x(n,g);$(n,g);Object.keys(S).length&&Ce(S,function(e,t){e?C.style.setProperty(t,e):C.style.removeProperty(t)});g.onDone&&g.onDone();J&&J.length&&n.off(J.join(" "),je);var t=n.data(Z);if(t){c.cancel(t[0].timer);n.removeData(Z)}R&&R.complete(!e)}function Fe(e){ke.blockTransition&&W(C,e);ke.blockKeyframeAnimation&&K(C,!!e)}function $e(){R=new l({end:Me,cancel:Ne});E(Le);Re();return{$$willAnimate:false,start:function(){return R},end:Me}}function je(e){e.stopPropagation();var t=e.originalEvent||e;if(t.target!==C)return;var n=t.$manualTimeStamp||Date.now();var i=parseFloat(t.elapsedTime.toFixed(te));if(Math.max(n-Q,0)>=U&&i>=G){N=true;Re()}}function He(){if(P)return;if(!C.parentNode){Re();return}var e=function(e){if(N){if(M&&e){M=false;Re()}}else{M=!e;if(Te.animationDuration){var t=K(C,M);M?I.push(t):k(I,t)}}};var t=De>0&&(Te.transitionDuration&&0===ye.transitionDuration||Te.animationDuration&&0===ye.animationDuration)&&Math.max(ye.animationDelay,ye.transitionDelay);t?c(r,Math.floor(t*De*ee),false):r();V.resume=function(){e(true)};V.pause=function(){e(false)};function r(){if(P)return;Fe(false);Ce(I,function(e){var t=e[0];var n=e[1];C.style[t]=n});x(n,g);i.addClass(n,ve);if(ke.recalculateTimingStyles){he=C.getAttribute("class")+" "+pe;be=q(C,he);Te=D(C,he,be);Oe=Te.maxDelay;B=Math.max(Oe,0);G=Te.maxDuration;if(0===G){Re();return}ke.hasTransitions=Te.transitionDuration>0;ke.hasAnimations=Te.animationDuration>0}if(ke.applyAnimationDelay){Oe="boolean"!==typeof g.delay&&ce(g.delay)?parseFloat(g.delay):Oe;B=Math.max(Oe,0);Te.animationDelay=Oe;Pe=ae(Oe,true);I.push(Pe);C.style[Pe[0]]=Pe[1]}U=B*ee;X=G*ee;if(g.easing){var e,t=g.easing;if(ke.hasTransitions){e=f+y;I.push([e,t]);C.style[e]=t}if(ke.hasAnimations){e=h+y;I.push([e,t]);C.style[e]=t}}Te.transitionDuration&&J.push(p);Te.animationDuration&&J.push(v);Q=Date.now();var r=U+ne*X;var a=Q+r;var s=n.data(Z)||[];var l=true;if(s.length){var u=s[0];l=a>u.expectedEndTime;l?c.cancel(u.timer):s.push(Re)}if(l){var d=c(o,r,false);s[0]={timer:d,expectedEndTime:a};s.push(Re);n.data(Z,s)}J.length&&n.on(J.join(" "),je);if(g.to){g.cleanupStyles&&fe(S,C,Object.keys(g.to));H(n,g)}}function o(){var e=n.data(Z);if(e){for(var t=1;t<e.length;t++)e[t]();n.removeData(Z)}}}}}]}];var he=["$$animationProvider",function(e){e.drivers.push("$$animateCssDriver");var t="ng-animate-shim";var n="ng-anchor";var i="ng-anchor-out";var r="ng-anchor-in";function o(e){return e.parentNode&&11===e.parentNode.nodeType}this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(e,a,s,l,c,u,d){if(!c.animations&&!c.transitions)return Le;var f=d[0].body;var p=z(l);var h=ke(o(p)||f.contains(p)?p:f);return function e(t){return t.from&&t.to?b(t.from,t.to,t.classes,t.anchors):y(t)};function v(e){return e.replace(/\bng-\S+\b/g,"")}function g(e,t){Te(e)&&(e=e.split(" "));Te(t)&&(t=t.split(" "));return e.filter(function(e){return-1===t.indexOf(e)}).join(" ")}function m(o,a,l){var c=ke(z(a).cloneNode(true));var u=v(x(c));a.addClass(t);l.addClass(t);c.addClass(n);h.append(c);var d,p=y();if(!p){d=S();if(!d)return w()}var m=p||d;return{start:function(){var e;var t=m.start();t.done(function(){t=null;if(!d){d=S();if(d){t=d.start();t.done(function(){t=null;w();e.complete()});return t}}w();e.complete()});e=new s({end:n,cancel:n});return e;function n(){t&&t.end()}}};function b(e){var t={};var n=z(e).getBoundingClientRect();Ce(["width","height","top","left"],function(e){var i=n[e];switch(e){case"top":i+=f.scrollTop;break;case"left":i+=f.scrollLeft;break}t[e]=Math.floor(i)+"px"});return t}function y(){var t=e(c,{addClass:i,delay:true,from:b(a)});return t.$$willAnimate?t:null}function x(e){return e.attr("class")||""}function S(){var t=v(x(l));var n=g(t,u);var o=g(u,t);var a=e(c,{to:b(l),addClass:r+" "+n,removeClass:i+" "+o,delay:true});return a.$$willAnimate?a:null}function w(){c.remove();a.removeClass(t);l.removeClass(t)}}function b(e,t,n,i){var r=y(e,Le);var o=y(t,Le);var a=[];Ce(i,function(e){var t=e["out"];var i=e["in"];var r=m(n,t,i);r&&a.push(r)});if(!r&&!o&&0===a.length)return;return{start:function(){var e=[];r&&e.push(r.start());o&&e.push(o.start());Ce(a,function(t){e.push(t.start())});var t=new s({end:n,cancel:n});s.all(e,function(e){t.complete(e)});return t;function n(){Ce(e,function(e){e.end()})}}}}function y(t){var n=t.element;var i=t.options||{};if(t.structural){i.event=t.event;i.structural=true;i.applyClassesEarly=true;"leave"===t.event&&(i.onDone=i.domOperation)}i.preparationClasses&&(i.event=X(i.event,i.preparationClasses));var r=e(n,i);return r.$$willAnimate?r:null}}]}];var ve=["$animateProvider",function(e){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(t,n,i){var r=R(i);return function(e,t,i,a){var s=false;if(3===arguments.length&&Ae(i)){a=i;i=null}a=F(a);if(!i){i=e.attr("class")||"";a.addClass&&(i+=" "+a.addClass);a.removeClass&&(i+=" "+a.removeClass)}var l=a.addClass;var c=a.removeClass;var u=o(i);var d,f;if(u.length){var p,h;if("leave"===t){h="leave";p="afterLeave"}else{h="before"+t.charAt(0).toUpperCase()+t.substr(1);p=t}"enter"!==t&&"move"!==t&&(d=x(e,t,a,u,h));f=x(e,t,a,u,p)}if(!d&&!f)return;function v(){a.domOperation();r(e,a)}function g(){s=true;v();$(e,a)}var m;return{$$willAnimate:true,end:function(){if(m)m.end();else{g();m=new n;m.complete(true)}return m},start:function(){if(m)return m;m=new n;var e;var t=[];d&&t.push(function(t){e=d(t)});t.length?t.push(function(e){v();e(true)}):v();f&&t.push(function(t){e=f(t)});m.setHost({end:function(){r()},cancel:function(){r(true)}});n.chain(t,i);return m;function i(e){g(e);m.complete(e)}function r(t){if(!s){(e||Le)(t);i(t)}}}};function b(e,t,i,r,o){var a;switch(i){case"animate":a=[t,r.from,r.to,o];break;case"setClass":a=[t,l,c,o];break;case"addClass":a=[t,l,o];break;case"removeClass":a=[t,c,o];break;default:a=[t,o];break}a.push(r);var s=e.apply(e,a);if(s){De(s.start)&&(s=s.start());if(s instanceof n)s.done(o);else if(De(s))return s}return Le}function y(e,t,i,r,o){var a=[];Ce(r,function(r){var s=r[o];if(!s)return;a.push(function(){var r;var o;var a=false;var l=function(e){if(!a){a=true;(o||Le)(e);r.complete(!e)}};r=new n({end:function(){l()},cancel:function(){l(true)}});o=b(s,e,t,i,function(e){var t=false===e;l(t)});return r})});return a}function x(e,t,i,r,o){var a=y(e,t,i,r,o);if(0===a.length){var s,l;if("beforeSetClass"===o){s=y(e,"removeClass",i,r,"beforeRemoveClass");l=y(e,"addClass",i,r,"beforeAddClass")}else if("setClass"===o){s=y(e,"removeClass",i,r,"removeClass");l=y(e,"addClass",i,r,"addClass")}s&&(a=a.concat(s));l&&(a=a.concat(l))}if(0===a.length)return;return function e(t){var i=[];a.length&&Ce(a,function(e){i.push(e())});i.length?n.all(i,t):t();return function e(t){Ce(i,function(e){t?e.cancel():e.end()})}}}};function o(n){n=_e(n)?n:n.split(" ");var i=[],r={};for(var o=0;o<n.length;o++){var a=n[o],s=e.$$registeredAnimations[a];if(s&&!r[a]){i.push(t.get(s));r[a]=true}}return i}}]}];var ge=["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver");this.$get=["$$animateJs","$$AnimateRunner",function(e,t){return function e(i){if(i.from&&i.to){var r=n(i.from);var o=n(i.to);if(!r&&!o)return;return{start:function(){var e=[];r&&e.push(r.start());o&&e.push(o.start());t.all(e,a);var n=new t({end:i(),cancel:i()});return n;function i(){return function(){Ce(e,function(e){e.end()})}}function a(e){n.complete(e)}}}}return n(i)};function n(t){var n=t.element;var i=t.event;var r=t.options;var o=t.classes;return e(n,i,o,r)}}]}];var me="data-ng-animate";var be="$ngAnimatePin";var ye=["$animateProvider",function(t){var i=1;var r=2;var o=" ";var a=this.rules={skip:[],cancel:[],join:[]};function s(e){if(!e)return null;var t=e.split(o);var n=Object.create(null);Ce(t,function(e){n[e]=true});return n}function l(e,t){if(e&&t){var n=s(t);return e.split(o).some(function(e){return n[e]})}}function c(e,t,n){return a[e].some(function(e){return e(t,n)})}function d(e,t){var n=(e.addClass||"").length>0;var i=(e.removeClass||"").length>0;return t?n&&i:n||i}a.join.push(function(e,t){return!e.structural&&d(e)});a.skip.push(function(e,t){return!e.structural&&!d(e)});a.skip.push(function(e,t){return"leave"===t.event&&e.structural});a.skip.push(function(e,t){return t.structural&&t.state===r&&!e.structural});a.cancel.push(function(e,t){return t.structural&&e.structural});a.cancel.push(function(e,t){return t.state===r&&e.structural});a.cancel.push(function(e,t){if(t.structural)return false;var n=e.addClass;var i=e.removeClass;var r=t.addClass;var o=t.removeClass;if(Oe(n)&&Oe(i)||Oe(r)&&Oe(o))return false;return l(n,o)||l(i,r)});this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(o,a,s,l,f,p,h,v,g,m,b){var y=new f;var x=new f;var S=null;function w(){var e=false;return function(t){e?t():a.$$postDigest(function(){e=true;t()})}}var q=a.$watch(function(){return 0===v.totalPendingRequests},function(e){if(!e)return;q();a.$$postDigest(function(){a.$$postDigest(function(){null===S&&(S=true)})})});var C=Object.create(null);var _=t.customFilter();var I=t.classNameFilter();var E=function(){return true};var A=_||E;var T=I?function(e,t){var n=[e.getAttribute("class"),t.addClass,t.removeClass].join(" ");return I.test(n)}:E;var O=R(g);function k(e,t){return V(e,t,{})}var M=e.Node.prototype.contains||function(e){return this===e||!!(16&this.compareDocumentPosition(e))};function N(e,t,n){var i=[];var r=C[n];r&&Ce(r,function(r){M.call(r.node,t)?i.push(r.callback):"leave"===n&&M.call(r.node,e)&&i.push(r.callback)});return i}function j(e,t,n){var i=P(t);return e.filter(function(e){var t=e.node===i&&(!n||e.callback===n);return!t})}function H(e,t){"close"!==e||t.parentNode||B.off(t)}var B={on:function(e,t,n){var i=P(t);C[e]=C[e]||[];C[e].push({node:i,callback:n});ke(t).on("$destroy",function(){var r=y.get(i);r||B.off(e,t,n)})},off:function(e,t,n){if(1===arguments.length&&!Te(arguments[0])){t=arguments[0];for(var i in C)C[i]=j(C[i],t);return}var r=C[e];if(!r)return;C[e]=1===arguments.length?null:j(r,t,n)},pin:function(e,t){D(Ee(e),"element","not an element");D(Ee(t),"parentElement","not an element");e.data(be,t)},push:function(e,t,n,i){n=n||{};n.domOperation=i;return W(e,t,n)},enabled:function(e,t){var n=arguments.length;if(0===n)t=!!S;else{var i=Ee(e);if(i){var r=z(e);1===n?t=!x.get(r):x.set(r,!t)}else t=S=!!e}return t}};return B;function W(e,t,n){var s=we(n);var l=L(e);var u=z(l);var f=u&&u.parentNode;s=F(s);var v=new h;var g=w();_e(s.addClass)&&(s.addClass=s.addClass.join(" "));s.addClass&&!Te(s.addClass)&&(s.addClass=null);_e(s.removeClass)&&(s.removeClass=s.removeClass.join(" "));s.removeClass&&!Te(s.removeClass)&&(s.removeClass=null);s.from&&!Ae(s.from)&&(s.from=null);s.to&&!Ae(s.to)&&(s.to=null);if(!S||!u||!A(u,t,n)||!T(u,s)){W();return v}var m=["enter","move","leave"].indexOf(t)>=0;var q=b();var C=q||x.get(u);var _=!C&&y.get(u)||{};var I=!!_.state;C||I&&_.state===i||(C=!X(u,f,t));if(C){q&&B(v,t,"start");W();q&&B(v,t,"close");return v}m&&K(u);var E={structural:m,element:l,event:t,addClass:s.addClass,removeClass:s.removeClass,close:W,options:s,runner:v};if(I){var D=c("skip",E,_);if(D){if(_.state===r){W();return v}V(l,_,E);return _.runner}var P=c("cancel",E,_);if(P)if(_.state===r)_.runner.end();else{if(!_.structural){V(l,_,E);return _.runner}_.close()}else{var M=c("join",E,_);if(M){if(_.state!==r){U(l,m?t:null,s);t=E.event=_.event;s=V(l,_,E);return _.runner}k(l,E)}}}else k(l,E);var R=E.structural;R||(R="animate"===E.event&&Object.keys(E.options.to||{}).length>0||d(E));if(!R){W();Y(u);return v}var j=(_.counter||0)+1;E.counter=j;Q(u,i,E);a.$$postDigest(function(){l=L(e);var n=y.get(u);var i=!n;n=n||{};var o=l.parent()||[];var a=o.length>0&&("animate"===n.event||n.structural||d(n));if(i||n.counter!==j||!a){if(i){O(l,s);$(l,s)}if(i||m&&n.event!==t){s.domOperation();v.end()}a||Y(u);return}t=!n.structural&&d(n,true)?"setClass":n.event;Q(u,r);var c=p(l,t,n.options);v.setHost(c);B(v,t,"start",{});c.done(function(e){W(!e);var n=y.get(u);n&&n.counter===j&&Y(u);B(v,t,"close",{})})});return v;function B(e,t,n,i){g(function(){var e=N(f,u,t);e.length?o(function(){Ce(e,function(e){e(l,n,i)});H(n,u)}):H(n,u)});e.progress(t,n,i)}function W(e){G(l,s);O(l,s);$(l,s);s.domOperation();v.complete(!e)}}function K(e){var t=e.querySelectorAll("["+me+"]");Ce(t,function(e){var t=parseInt(e.getAttribute(me),10);var n=y.get(e);if(n)switch(t){case r:n.runner.end();case i:y.delete(e);break}})}function Y(e){e.removeAttribute(me);y.delete(e)}function X(e,t,i){var r=l[0].body;var o=z(s);var a=e===r||"HTML"===e.nodeName;var c=e===o;var d=false;var f=x.get(e);var p;var h=ke.data(e,be);h&&(t=z(h));while(t){c||(c=t===o);if(t.nodeType!==n)break;var v=y.get(t)||{};if(!d){var g=x.get(t);if(true===g&&false!==f){f=true;break}false===g&&(f=false);d=v.structural}if(Oe(p)||true===p){var m=ke.data(t,u);Ie(m)&&(p=m)}if(d&&false===p)break;a||(a=t===r);if(a&&c)break;if(!c){h=ke.data(t,be);if(h){t=z(h);continue}}t=t.parentNode}var b=(!d||p)&&true!==f;return b&&c&&a}function Q(e,t,n){n=n||{};n.state=t;e.setAttribute(me,t);var i=y.get(e);var r=i?qe(i,n):n;y.set(e,r)}}]}];var xe=["$animateProvider",function(e){var t="ng-animate-ref";var n=this.drivers=[];var i="$$animationRunner";function r(e,t){e.data(i,t)}function o(e){e.removeData(i)}function a(e){return e.data(i)}this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(e,i,s,u,d,f){var p=[];var h=R(e);function v(e){var t={children:[]};var n,i=new d;for(n=0;n<e.length;n++){var r=e[n];i.set(r.domNode,e[n]={domNode:r.domNode,fn:r.fn,children:[]})}for(n=0;n<e.length;n++)o(e[n]);return a(t);function o(e){if(e.processed)return e;e.processed=true;var n=e.domNode;var r=n.parentNode;i.set(n,e);var a;while(r){a=i.get(r);if(a){a.processed||(a=o(a));break}r=r.parentNode}(a||t).children.push(e);return e}function a(e){var t=[];var n=[];var i;for(i=0;i<e.children.length;i++)n.push(e.children[i]);var r=n.length;var o=0;var a=[];for(i=0;i<n.length;i++){var s=n[i];if(r<=0){r=o;o=0;t.push(a);a=[]}a.push(s.fn);s.children.forEach(function(e){o++;n.push(e)});r--}a.length&&t.push(a);return t}}return function(d,g,m){m=F(m);var b=["enter","move","leave"].indexOf(g)>=0;var y=new u({end:function(){O()},cancel:function(){O(true)}});if(!n.length){O();return y}r(d,y);var x=A(d.attr("class"),A(m.addClass,m.removeClass));var S=m.tempClasses;if(S){x+=" "+S;m.tempClasses=null}var w;if(b){w="ng-"+g+l;e.addClass(d,w)}p.push({element:d,classes:x,event:g,structural:b,options:m,beforeStart:E,close:O});d.on("$destroy",T);if(p.length>1)return y;i.$$postDigest(function(){var e=[];Ce(p,function(t){a(t.element)?e.push(t):t.close()});p.length=0;var t=C(e);var n=[];Ce(t,function(e){n.push({domNode:z(e.from?e.from.element:e.element),fn:function t(){e.beforeStart();var n,i=e.close;var r=e.anchors?e.from.element||e.to.element:e.element;if(a(r)){var o=I(e);o&&(n=o.start)}if(n){var s=n();s.done(function(e){i(!e)});D(e,s)}else i()}})});f(v(n))});return y;function q(e){var n="["+t+"]";var i=e.hasAttribute(t)?[e]:e.querySelectorAll(n);var r=[];Ce(i,function(e){var n=e.getAttribute(t);n&&n.length&&r.push(e)});return r}function C(e){var n=[];var i={};Ce(e,function(e,r){var o=e.element;var a=z(o);var s=e.event;var l=["enter","move"].indexOf(s)>=0;var c=e.structural?q(a):[];if(c.length){var u=l?"to":"from";Ce(c,function(e){var n=e.getAttribute(t);i[n]=i[n]||{};i[n][u]={animationID:r,element:ke(e)}})}else n.push(e)});var r={};var o={};Ce(i,function(t,i){var a=t.from;var s=t.to;if(!a||!s){var l=a?a.animationID:s.animationID;var c=l.toString();if(!r[c]){r[c]=true;n.push(e[l])}return}var u=e[a.animationID];var d=e[s.animationID];var f=a.animationID.toString();if(!o[f]){var p=o[f]={structural:true,beforeStart:function(){u.beforeStart();d.beforeStart()},close:function(){u.close();d.close()},classes:_(u.classes,d.classes),from:u,to:d,anchors:[]};if(p.classes.length)n.push(p);else{n.push(u);n.push(d)}}o[f].anchors.push({out:a.element,in:s.element})});return n}function _(e,t){e=e.split(" ");t=t.split(" ");var n=[];for(var i=0;i<e.length;i++){var r=e[i];if("ng-"===r.substring(0,3))continue;for(var o=0;o<t.length;o++)if(r===t[o]){n.push(r);break}}return n.join(" ")}function I(e){for(var t=n.length-1;t>=0;t--){var i=n[t];var r=s.get(i);var o=r(e);if(o)return o}}function E(){d.addClass(c);S&&e.addClass(d,S);if(w){e.removeClass(d,w);w=null}}function D(e,t){if(e.from&&e.to){n(e.from.element);n(e.to.element)}else n(e.element);function n(e){var n=a(e);n&&n.setHost(t)}}function T(){var e=a(d);!e||"leave"===g&&m.$$domOperationFired||e.end()}function O(t){d.off("$destroy",T);o(d);h(d,m);$(d,m);m.domOperation();S&&e.removeClass(d,S);d.removeClass(c);y.complete(!t)}}}]}];var Se=["$animate",function(e){return{restrict:"A",transclude:"element",terminal:true,priority:600,link:function(t,n,i,r,o){var a,s;t.$watchCollection(i.ngAnimateSwap||i["for"],function(t){a&&e.leave(a);if(s){s.$destroy();s=null}(t||0===t)&&o(function(t,i){a=t;s=i;e.enter(t,null,n)})})}}}];var we;var qe;var Ce;var _e;var Ie;var Ee;var De;var Ae;var Te;var Oe;var ke;var Le;t.module("ngAnimate",[],function e(){Le=t.noop;we=t.copy;qe=t.extend;ke=t.element;Ce=t.forEach;_e=t.isArray;Te=t.isString;Ae=t.isObject;Oe=t.isUndefined;Ie=t.isDefined;De=t.isFunction;Ee=t.isElement}).info({angularVersion:"1.7.2"}).directive("ngAnimateSwap",Se).directive("ngAnimateChildren",J).factory("$$rAFScheduler",Q).provider("$$animateQueue",ye).provider("$$animation",xe).provider("$animateCss",pe).provider("$$animateCssDriver",he).provider("$$animateJs",ve).provider("$$animateJsDriver",ge)})(window,window.angular)},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=r(n(284));n(56);function r(e){return e&&e.__esModule?e:{default:e}}window.define("qlik",[],function(){return i.default});window.requirejs(["qlik"],function(){});var o=i.default;t.default=o;e.exports=t.default},,,,,,,,,function(e,t,n){"use strict";var i,r;!(i=[n(119)],r=function(e){var t;t=function t(){var n=e.getService("$q").defer();return n};t.resolve=function(t){var n=e.getService("$q").defer();n.resolve(t);return n.promise};t.reject=function(){return e.getService("$q").reject.apply(null,arguments)};t.all=function(){return e.getService("$q").all.apply(null,arguments)};t.when=function(){return e.getService("$q").when.apply(null,arguments)};Object.defineProperty(t,"Promise",{get:function t(){return e.getService("$q")}});return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(11),n(139),n(54),n(13)],r=function(e,t,n,i){var r;var a="string"===typeof location.hostname?location.hostname:"";var s="string"===typeof location.port?location.port:void 0;var l="string"===typeof location.protocol?location.protocol:"";var c="https:"===l;var u=location.href;var d=u.split("#")[0];function f(e){var t=(+e).toString(16);return 1===t.length?"0"+t:t}var p={findValuesOfQProperty:function e(t,n){var i=[];function r(e,t){if(!e||"object"!==o(e))return;Array.isArray(e)?e.forEach(function(e,n){r(e,t+"/"+n)}):Object.keys(e).forEach(function(a){var s=o(e[a]);a===n?i.push(e[a]):"object"===s&&/^[^q]/.test(a)&&r(e[a],t+"/"+a)})}r(t,"");return i},isEqual:function e(t,i){return n.isEqual(t,i)},compare:function e(t,n){return t<n?-1:t>n?1:0},normalizeToHex:function e(t){if("string"===typeof t&&"#"===t[0])return t;if(0===t)return"#000000";var n=/rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})/i;var i=n.exec(t);if(i)t="#"+f(i[1])+f(i[2])+f(i[3]);else if("string"===typeof t&&0!==t.indexOf("#")&&/^[a-f0-9]{3,6}$/i.test(t))t="#"+t;else if(/^[0-9]+$/.test(t)){t=(255&t)<<16|65280&t|(16711680&t)>>>16;t="#"+t.toString(16)}else t=null;return t},numberFormat:function e(t,n,i){var r={3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",24:"Y","-3":"m","-6":"","-9":"n","-12":"p","-15":"f","-18":"a","-21":"z","-24":"y"},o="",a;if(Number.isNaN(+t)||Number.isNaN(+n)||Number.isNaN(+i))return t;t=Number(Number(t).toPrecision(n));i-=i%3;if(i in r){o=r[i];t/=Math.pow(10,i);t=Number(t.toPrecision(n))}else if(0===i){a=Math.pow(10,n);t=Math.round(t*a)/a}return t+o},getExponent:function e(t){if(Number.isNaN(+t))throw new TypeError("Parameter is not numeric");return Number(Number(t).toExponential().split("e")[1])},hostname:a,port:s,reloadURI:d,isSecure:c,setValue:function e(t,n,i){if(!n)return;var r=n.split("."),o=t,a=r[r.length-1],s;for(s=0;s<r.length-1;++s){"undefined"===typeof o[r[s]]&&(o[r[s]]=Number.isNaN(+r[s+1])?{}:[]);o=o[r[s]]}"undefined"!==typeof i?o[a]=i:delete o[a]},getValue:function e(t,n,i){var r=n.split("."),o=t,a;if(void 0===o)return i;for(a=0;a<r.length;++a){if("undefined"===typeof o[r[a]])return i;o=o[r[a]]}return o},getParameterByName:i.getParameterByName,generateId:function e(){return r.id()},getRandomString:function e(t){var n="",i,r;for(i=0;i<t;i++){r=Math.floor(62*Math.random());n+=r<10?r:r>9&&r<36?String.fromCharCode(r+55):String.fromCharCode(r+61)}return n},escapeRegExp:function e(t){return t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")},match:function e(n,i){return"string"===typeof n?-1!==t.string(n.toLowerCase()).indexOf(t.string(i)):n instanceof Array&&n.some(function(t){return e(t,i)})},crop:function e(t,n){if(t.length>n)return t.substring(0,n);return t},isEdge:function e(){var t=navigator.userAgent;return/Edge\/\d+/.test(t)},isMSIE:function e(){var t=navigator.userAgent;return t.indexOf(" MSIE ")>-1||t.indexOf(" Trident/")>-1},isIos:function e(){return/iPad|iPhone|iPod/.test(navigator.userAgent)},isAndroid:function e(){return/Android/.test(navigator.userAgent)},isSafari:function e(){var t=navigator.userAgent;return t.indexOf("Chrome")<0&&/Safari\/\d+/.test(t)},isFirefox:function e(){var t=navigator.userAgent;return/Firefox\/\d+/.test(t)},extend:function t(){return e.extend.apply(null,arguments)},isFunction:function t(){return e.isFunction.apply(null,arguments)},isNumeric:function e(t){return!Number.isNaN(parseFloat(t))&&Number.isFinite(+t)},isInteger:function e(t){return!Number.isNaN(parseInt(t,10))&&parseFloat(t,10)===parseInt(t,10)},isPromise:function e(t){return t&&"function"===typeof t.then},qouteScript:function e(t){if(!t)return t;if(-1!==t.indexOf("[")||-1!==t.indexOf("]"))return'"'+t+'"';return"["+t+"]"},escapeField:function e(t){return t&&"]"!==t?/^[A-Za-z][A-Za-z0-9_]*$/.test(t)?t:"["+t.replace(/\]/g,"]]")+"]":t},isEmpty:function t(n){return e.isEmptyObject(n)},hasFileExtension:function e(t,n){if(n){n="."===n.substring(0,1)?n:"."+n;return t.substring(t.length-n.length).toUpperCase()===n.toUpperCase()}return false},removeExtensionFromName:function e(t,n){t.length>n.length&&this.hasFileExtension(t,n)&&(t=t.substring(0,t.length-n.length));return t},isLocalStorageSupported:function e(){var t,n="testLocalStorageSupport";try{localStorage.setItem(n,n);localStorage.removeItem(n);t=true}catch(e){t=false}return t},ellipseText:function e(t,n){var i=t;i.length>n&&(i=i.substr(0,n-3)+"...");return i},hashFromString:function e(t){var n=0,i,r;if(!t||!t.length)return n;for(r=0;r<t.length;r++){i=t.charCodeAt(r);n=(n<<5)-n+i;n&=n}return n},getUnique:function e(t){var n,i,r;var o=[];for(n=0,i=t.length;n<i;n++){r=t[n];t[n]=void 0===r?void 0:t[n];t.indexOf(r)===n&&o.push(r)}return o}};Object.defineProperty(p,"baseURI",{get:function e(){return i.baseURI}});Object.defineProperty(p,"project",{get:function e(){return p.baseURI.split("/").reverse()[1]||"sense"}});Object.defineProperty(p,"basePath",{get:function e(){return i.basePath}});r={getChar:function e(t){var n=[48,111,79,105,73,108],i;if(t>9){i=65+t-10;i>90&&(i+=6)}else t=(t+"").charCodeAt(0);return n.indexOf(i)>-1?this.getChar(t+1):String.fromCharCode(i)},base62:function e(t){var n=this.getChar(t%62),i=Math.floor(t/62);return i>0?this.base62(i)+n:n},id:function e(){var t=this.base62(Math.round(99e11*Math.random()+1e11));return t.replace(/\W/g,"")}};return p}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(208),n(90),n(11),n(199),n(138),n(519)],r=function(e,t,n,i,r,a){var s={},l="en-US",c={},u=[{short:"es",long:"es-ES",label:"Spanish",translatedLabel:"Common.Spanish"},{short:"sv",long:"sv-SE",label:"Swedish",translatedLabel:"Common.Swedish"},{short:"ja",long:"ja-JP",label:"Japanese",translatedLabel:"Common.Japanese"},{short:"en",long:"en-US",label:"English",translatedLabel:"Common.English"},{short:"de",long:"de-DE",label:"German",translatedLabel:"Common.German"},{short:"fr",long:"fr-FR",label:"French",translatedLabel:"Common.French"},{short:"it",long:"it-IT",label:"Italian",translatedLabel:"Common.Italian"},{short:"nl",long:"nl-NL",label:"Dutch",translatedLabel:"Common.Dutch"},{short:"pt",long:"pt-BR",label:"Brazilian Portuguese",translatedLabel:"Common.BrazilianPortuguese"},{short:"ru",long:"ru-RU",label:"Russian",translatedLabel:"Common.Russian"},{short:"zh",long:"zh-CN",label:"Simplified Chinese",translatedLabel:"Common.SimplifiedChinese"},{short:"zh",long:"zh-TW",label:"Traditional Chinese",translatedLabel:"Common.TraditionalChinese"},{short:"pl",long:"pl-PL",label:"Polish",translatedLabel:"Common.Polish"},{short:"tr",long:"tr-TR",label:"Turkish",translatedLabel:"Common.Turkish"},{short:"ko",long:"ko-KR",label:"Korean",translatedLabel:"Common.Korean"}],d=function e(t,n){t=t||"";n=n||[];"string"!==typeof n&&"number"!==typeof n||(n=[n]);return t.replace(/\{(\d+)\}/g,function(e,t){return"undefined"!==typeof n[t]?n[t]:e})},f=function t(n,i){var r=v.get(n.attr("data-"+i+"translation")),o=n.data(i?"title-text":"text");"undefined"!==typeof o&&"undefined"!==typeof o.value&&(r=d(r,o.value));return e.encodeForHTML(r)},p=function e(t){var n={language:null,context:"client"};if("string"===typeof t)n.language=t;else if(null!==t&&"object"===o(t)&&(t.hasOwnProperty("language")||t.hasOwnProperty("context"))){n.language=t.language||n.language;n.context=t.context||n.context}return n},h=n.Deferred(),v={contexts:{client:["common","client","engine"],dle:["common","client","engine"],dmv:["common","client","engine"]},languageList:u,append:function e(t){n.extend(s,t)},appendHelp:function e(t){n.extend(true,c,t)},apply:function e(t){n("[data-translation], [data-title-translation], [data-placeholder-translation]",t||document).addBack().each(function(){var e=n(this),t=f(e,""),i=f(e,"title-"),r=f(e,"placeholder-");t&&e.html(t);i&&e.attr("title",i);r&&e.attr("placeholder",r)});return t},get:function e(t,n){var i="undefined"!==typeof s[t]?s[t]:t;void 0!==n&&(i=d(i,n));return i},getHelp:function e(t){return c[t]},localeDetected:"",setup:function e(n){var i=p(n);var o=i.context;var a=i.language||t.getParameterByName("language");if("undefined"===typeof a||null===a){r.locale.set();a=r.locale.get()}this.localeDetected=a;b(a,o,function e(t,n){v.language=t;n.forEach(v.append);v.apply();h&&h.resolve();h=null});return v.ready}};Object.defineProperty(v,"ready",{get:function e(){if(h)return h.promise();var t=n.Deferred();t.resolve();return t.promise()}});i.LANGUAGES&&u.push({short:"pseudo",long:"pseudo",label:"pseudo"},{short:"zz",long:"zz",label:"zz"});function g(e){"pseudo"!==e.toLowerCase()&&(e=e.substring(0,2));return e.toLowerCase()}function m(e){var t;t=v.languageList.filter(function(t){return t.long.toLowerCase()===e.toLowerCase()});if(t.length)e=t[0].long;else{t=v.languageList.filter(function(t){return t.short===g(e)});t.length&&(e="zh-hk"===e.toLocaleLowerCase()||"zh-mo"===e.toLocaleLowerCase()?"zh-TW":t[0].long)}if(!t.length){window.console.warn&&window.console.warn("Language '"+e+"' not supported, falling back to '"+l+"'");e=l}return e}function b(e,t,n,i){e=m(e);Promise.all(v.contexts[t].map(function(t){return a.load(e,t)})).then(function(t){n(e,t);y(e)},function(){i||b(l,t,n,true)})}function y(e){v.languageCode=g(e);n("html").attr("lang")||n("html").attr("lang",e)}return v}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i;!(i=function(){var e=/xyz/.test(function(){var e})?/\b_super\b/:/.*/;var t=function e(){};t.extend=function t(n,i){var r=this.prototype;if("string"!==typeof n){i=n;n="Class"}var o=Object.create(this.prototype);for(var a in i)o[a]="function"===typeof i[a]&&"function"===typeof r[a]&&e.test(i[a])?function(e,t){return function(){var n=this._super;this._super=r[e];var i=t.apply(this,arguments);this._super=n;return i}}(a,i[a]):i[a];if(!/^[_a-z][_a-z\d]*$/i.test(n))throw new Error("Invalid subclass name. Alphanumericals only.");var s=new Function("return (function "+n+"(){ typeof this.init === 'function' && this.init.apply(this, [].slice.call(arguments)) });")();s.prototype=o;s.prototype.constructor=s;s.extend=t;return s};return t}.call(t,n,t,e),void 0!==i&&(e.exports=i))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(143),n(89),n(227),n(490),n(562),n(990),n(259),n(110),n(90),n(91),n(563),n(182)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f){var p=["OnExcessLicenseAssignment","OnMaxParallelSessionsExceeded","OnLicenseAccessDenied","OnLicenseAccessDeniedPendingUserSync","OnNoAppFound","OnEngineWebsocketFailed","OnNoEngineAvailable","OnNoDataPrepServiceAvailable","OnDataPrepServiceWebsocketFailed"];var h=["OnSessionLoggedOut","OnSessionTimedOut","OnSessionClosed"];var v=["GetProperties","GetFullPropertyTree"];var g=/(?!^GetHyperCube|^GetListObject)(^Get)/i;var m=void 0;function b(t,n,r,o,a){if(t.code===l.LocalizedErrorCode.LOCERR_GENERIC_ABORTED)return;e.getService("$timeout")(function(){if(t.isHandled)return;t.isHandled=true;o&&o.hasHandlers("closed")&&"closed"===o.originalEvent?o.emit("closed",{message:"Session closed.",isHandled:t.isHandled}):o&&o.hasHandlers("error")&&"closed"!==o.originalEvent?o.emit("error",t):r?r():n?n(t):i.showDialog(t,a)},1e3)}function y(e,t,n){var i=[];if(!e.warnings)return;if(1===e.warnings.length&&e.warnings[0]===l.LocalizedWarningCode.LOCWARN_EXPORT_DATA_TRUNCATED)return;for(var o=0;o<e.warnings.length;o++)i.push({code:e.warnings[o]});n&&n.hasHandlers("warning")?n.emit("warning",e):t?t(e):r.showDialog(i)}function x(e,t,i){var r=t.handle?e.apis.getApi(t.handle):void 0;if(r&&!r.isCancelled&&i.code===l.LocalizedErrorCode.LOCERR_GENERIC_ABORTED&&g.test(t.method)){i.isHandled=true;return t.retry()}return n.reject(i)}function S(e,t,i){if(i.code===s.enums.LocalizedErrorCode.LOCERR_HC_MODAL_OBJECT_ERROR){i.isHandled=true;return e.app.abortModalSelection().then(function(){return t.retry()})}return n.reject(i)}function w(e){"undefined"===typeof e&&(e={});"undefined"===typeof e.urlParams&&(e.urlParams={});e.ttl=parseFloat(c.getParameterByName("ttl"));Number.isNaN(+e.ttl)||(e.suspendOnClose=true);"string"!==typeof e.host&&(e.host=c.hostname);"string"!==typeof e.port&&(e.port=c.port||void 0);"string"!==typeof e.prefix&&(e.prefix="/"===c.basePath?"":c.basePath);"boolean"!==typeof e.isSecure?e.secure=c.isSecure:e.secure=e.isSecure;"string"!==typeof e.reloadURI?e.urlParams.reloadUri=c.reloadURI:e.urlParams.reloadUri=e.reloadURI;if("undefined"===typeof e.identity){var t=c.getParameterByName("identity");t&&(e.identity=t)}"/"===e.prefix&&(e.prefix="");return e}var q={},C;function _(i,r){var a=q[i];if(!a){var c=r.responseInterceptors?r.responseInterceptors:[];a=o.create({Promise:e.getService("$q"),schema:s,mixins:d,url:i,suspendOnClose:r.suspendOnClose,createSocket:function e(t){return new WebSocket(t)},requestInterceptors:[{onFulfilled:function e(t,n){if(-1!==v.indexOf(n.method)){n.return_empty=true;n.delta=false}return n}}],responseInterceptors:c.concat([{onRejected:x},{onRejected:S},{onRejected:function e(t,i,o){var a="Not connected";if(o.message===a)return n.reject(o);r.qEvent&&(r.qEvent.originalEvent="error");b(o,r.onError,void 0,r.qEvent);return n.reject(o)}}])});a.sessionConfig=r;a.on("notification:*",function(e,n){var i=-1!==p.indexOf(e);var o=-1!==h.indexOf(e);function a(e){if(r.qEvent&&r.qEvent.hasHandlers("error")){r.qEvent.originalEvent="ProxyError";r.qEvent.emit("error",e)}else r.onError&&r.onError(e)}if("OnAuthenticationInformation"===e){t.parse(n);f.setServerNodeId(n.serverNodeId)}"fatal"===n.severity&&(i?u.ready.then(function(){a({method:e,message:u.get("ProxyError."+e)})}):a({method:e,message:n.message?n.message:n}));o&&(m?m():i=true);i&&b({message:"ProxyError."+e,refreshButton:true},r.onError,void 0,r.qEvent);"OnConnected"===e&&"SESSION_ERROR_NO_LICENSE"===n.qSessionState&&b({message:"SessionError.SessionErrorNoLicense",refreshButton:false},r.onError,void 0,r.qEvent,true)});a.on("traffic:received",function(e){r.qEvent&&(r.qEvent.originalEvent="traffic:received");y(e,r.onWarning,r.qEvent)});a.on("closed",function(){r.qEvent&&(r.qEvent.originalEvent="closed");u.ready.then(function(){b({code:l.LocalizedErrorCode.LOCERR_GENERIC_CONNECTION_LOST,message:u.get("ErrorCode."+l.LocalizedErrorCode.LOCERR_GENERIC_CONNECTION_LOST)},r.onError,r.onClose,r.qEvent)});C===q[i]&&(C=void 0);delete q[i]});q[i]=a;C=C||a}return a}function I(e,t,n){e=e||"";t.appId=e;var i=a.buildUrl(t);var r=_(i,t);return r.open().then(function(t){if(!e)return{global:t};r.openDocPromise||(r.openDocPromise=t.openDoc(e,"","","",!!n).then(function(e){e.global=t;return e}));return r.openDocPromise}).catch(function(e){if(e.srcElement instanceof WebSocket){e={message:"ErrorDialog.NoConnectionCreated"};t.qEvent&&(t.qEvent.originalEvent="error");b(e,t.onError,void 0,t.qEvent)}throw e})}function E(e,t){e=e||c.getParameterByName("app");if(!e&&!t&&C)return n.resolve(C.app);t=w(t);var i="true"===c.getParameterByName("noData");return I(e,t,i)}return{get:function e(t,n){n=w(n);return t?this.getApp(t,n):this.getGlobal(n)},getApp:function e(t,n){return E(t,n)},getSessionApp:function e(t,i){return this.getGlobal(i).then(function(e){var r=t&&"?transient="!==t?e.createSessionAppFromApp(t):e.createSessionApp();return r.then(function(t){return{global:e,app:t}}).catch(function(t){if(t.code===l.LocalizedErrorCode.LOCERR_APP_ALREADY_OPEN){t.isHandled=true;return e.getActiveDoc()}i.qEvent&&(i.qEvent.originalEvent="error");b(t,i.onError,void 0,i.qEvent);return n.reject(t)})})},getGlobal:function e(t){t=w(t);return I(void 0,t).then(function(e){return e.global})},setLogoutHandler:function e(t){m=t},_unsupported_clearSessions:function e(){q={}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(102),n(135)],r=function(e,t){var n={},i,r,o,a,s,l;n.States={analysis:0,edit:1,play:2,editstory:3,insight:4,selections:5};n.Views={overview:0,sheet:1,story:2,object:3,masterObject:4,dataManager:7,dataSpaceScriptEditor:8,dataSpaceAssociations:9,dataSpaceDataModel:10};e.mixin(n);n.notification("StateChanged");n.notification("SheetChanged");n.notification("StoryChanged");n.setState=function(e){if(e!==r){s=r;r=e;n.StateChanged.emit(i,r,l,s);i===n.Views.sheet||i===n.Views.object||i===n.Views.masterObject?t.setUrl(t.buildUrl("sheet",o.layout.qInfo.qId,"state",Object.keys(n.States)[e])):i===n.Views.story&&t.setUrl(t.buildUrl("story",o.layout.qInfo.qId,"state",Object.keys(n.States)[e],"slide",a))}};n.setView=function(e){if(e!==i){l=i;i=e;e===n.Views.overview&&(o=null);n.StateChanged.emit(i,r,l,s)}};n.setSheet=function(e,t){var a=false;if(e!==o){o=e;l=i;i=n.Views.sheet;n.SheetChanged.emit(e);a=true}if(n.States[t]!==r){s=r;r=n.States[t]||n.States.analysis;a=true}a&&n.StateChanged.emit(i,r,l,s)};n.setStory=function(e,t,c){var u=false;if(e!==o){o=e;l=i;i=n.Views.story;n.StoryChanged.emit(e,c);u=true}else a!==c&&n.StoryChanged.emit(e,c);a=c;if(n.States[t]!==r){s=r;r=n.States[t]||n.States.editstory;u=true}u&&n.StateChanged.emit(i,r,l,s)};n.isInAnalysisMode=function(){return r===n.States.analysis};n.isInEditMode=function(){return r===n.States.edit};n.inStoryPlayState=function(){return n.inStorytelling()&&r===n.States.play};n.inStorytelling=function(){return i===n.Views.story};n.inAppOverView=function(){return i===n.Views.overview};n.inDataManager=function(){return i===n.Views.dataManager};n.inDataSpaceScriptEditor=function(){return i===n.Views.dataSpaceScriptEditor};n.inDataSpaceDataModel=function(){return i===n.Views.dataSpaceDataModel};n.inDataSpaceAssociations=function(){return i===n.Views.dataSpaceAssociations};n.inSheetView=function(){return i===n.Views.sheet};n.inObjectView=function(){return i===n.Views.object};n.inMasterObjectView=function(){return i===n.Views.masterObject};n.getModel=function(){return n.model};n.getAllStateKeys=function(){return Object.keys(n.States)};n.reset=function(){i=null;r=null;o=null;a=null;s=null;l=null};Object.defineProperties(n,{state:{get:function e(){return r}},view:{get:function e(){return i}},model:{get:function e(){return o},set:function e(t){o=t}}});return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(){this.topics={};this.wildcards=[]}e.prototype.getTopics=function(e,t){var n=this.topics[e];if("undefined"===typeof n&&t){n=[];this.topics[e]=n}return n};e.prototype.createMatcher=function(e){e=e.replace(/\$/g,"\\$");return new RegExp("^"+e.replace(/\*/g,".+?")+"$","i")};e.prototype.subscribe=function(e,t,n){e=e.toLowerCase().split(".");if("function"!==typeof t)throw new Error("pubsub: Invalid handler");var i={handler:t,topic:e[0],namespace:e[1],context:n||window};if(e[0].indexOf("*")>-1){i.matcher=this.createMatcher(e[0]);this.wildcards.push(i)}else this.getTopics(e[0],true).push(i)};e.prototype.subscribeOnce=function(e,t,n){var i=this;function r(){t.apply(this,arguments);i.unsubscribe(e,t)}r.original=t;this.subscribe(e,r,n)};e.prototype.unsubscribe=function(e,t){e=e.toLowerCase();this["."===e[0]?"unsubscribeNamespace":"unsubscribeTopic"](e,t)};e.prototype.unsubscribeNamespace=function(e){e=e.substr(1);var t;function n(t){return t.namespace!==e}this.wildcards=this.wildcards.filter(n);for(t in this.topics){this.topics[t]=this.topics[t].filter(n);this.topics[t].length||delete this.topics[t]}};e.prototype.unsubscribeTopic=function(e,t){e=e.split(".");var n=this.getTopics(e[0]);function i(n){var i=n.topic!==e[0];!i&&t&&(i=n.handler.original?n.handler.original!==t:n.handler!==t);return i}this.wildcards=this.wildcards.filter(i);if(n){n=n.filter(i);this.topics[e[0]]=n;n.length||delete this.topics[e[0]]}};e.prototype.publish=function(e,t){e=e.toLowerCase().split(".");var n=this.getTopics(e[0]);function i(n){(!n.matcher||n.matcher&&n.matcher.test(e[0]))&&n.handler.call(n.context,t,e[0])}this.wildcards.forEach(i);n&&n.forEach(i)};return new e}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(96),n(95),n(523)],r=function(e,t,n){var i=250,r=false,o=n.isNeeded()?new n:null,a;function s(e){r=true;c("/resize/start",e)}function l(e){c("/resize/end",e);r=false}function c(e,n){t.publish(e,{width:window.innerWidth,height:window.innerHeight,element:n.target})}function u(e){if(e.target!==window&&e.target!==document)return;r||s(e);clearTimeout(a);c("/resize/update",e);a=setTimeout(function(){l(e)},i)}function d(e){if(o)o.rotate(function(){s(e);l(e)});else{s(e);l(e)}}e.utils.touch&&"ondeviceorientation"in window&&window.addEventListener("orientationchange",d,false);o||window.addEventListener("resize",u,false);return{on:function e(n,i){t.subscribe("/resize/"+n,i)},off:function e(n,i){t.unsubscribe("/resize/"+n,i)},force:function e(n){n=n||"end";t.publish("/resize/"+n)}}}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(96),n(308)],r=function(e,t){var n="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";var i={AUTO:"auto",TOUCH:"touch",DESKTOP:"desktop"};function r(e){if("string"!==typeof e||!i[e.toUpperCase()])throw new Error("Invalid device type");t.deviceType=e}function o(){var n=t.deviceType;if(n===i.AUTO){if(e.utils.msPointer&&(0===window.navigator.msMaxTouchPoints||0===window.navigator.maxTouchPoints))return true;if(e.utils.msPointer&&(window.navigator.msMaxTouchPoints>0||window.navigator.maxTouchPoints>0))return false;return!e.utils.touch}return n===i.DESKTOP}function a(n){var r=t.deviceType;if(r===i.AUTO)return e.utils.isMouse(n);return r===i.DESKTOP}function s(){return n}return{setDeviceType:r,treatAsDesktop:o,isMouse:a,getMouseWheelEventName:s}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(102),n(162),n(1062),n(599),n(603),n(327),n(49),n(261),n(193)],r=function(e,t,n,i,r,o,a,s){var l="sense";var c=null;var u=[];var d={};var f={};var p=true;var h={};var v=new r({providers:{default:true,qrs:!s.getFlag("DISABLE_ONPREM_THEMES"),rls:s.getFlag("CLOUD_THEMES")}});function g(){u.forEach(function(e){e.node.parentNode.removeChild(e.node);o.toggleCssClass(e.cssClass,false)});u=[]}t.create(h,"ThemeChanged");h.getCurrentTheme=function(){return c||l};h.applyTheme=function(t){var n=new e;t===c&&n.resolve(true);v.getRawJson(t).then(function(e){var r=o.parseTheme(e,i,true);c&&g();v.getThemePath(t).then(function(e){v.getResourceUrlParams(t).then(function(i){u=o.injectExtraStyleNodes(r,e,i);d=r;c=t;Object.keys(f).forEach(function(e){f[e].setTheme(c,d)});y();h.ThemeChanged.emit();n.resolve(true)})})}).catch(function(){n.resolve(false)});return n.promise};h.getThemeJSON=function(t){var n=new e;v.getRawJson(t).then(function(e){n.resolve(o.parseTheme(e,i,true))}).catch(function(e){n.reject(e)});return n.promise};h.saveTheme=function(e){n.setProperties({theme:e||h.getCurrentTheme()})};h.isValidTheme=function(t){return v.getType(t).then(function(){return e.resolve(true)}).catch(function(){return e.resolve(false)})};h.getAvailableThemes=function(){return v.getAvailableThemes()};h.getCustomThemesPage=function(e){return v.getCustomThemesPage(e)};h.getPagesTotal=function(){return v.getPagesTotal()};Object.defineProperty(h,"currentPalette",{iterable:false,get:function e(){var t;t=d.palettes&&d.palettes.ui&&d.palettes.ui[0]?d.palettes.ui[0].colors:i.palettes.ui[0].colors;"none"!==t[0]&&t.unshift("none");return t}});Object.defineProperty(h,"smallPalette",{iterable:false,get:function e(){return m}});Object.defineProperty(h,"firstPalette",{iterable:false,get:function e(){return d.palettes&&d.palettes.ui&&d.palettes.ui[0]?d.palettes.ui[0]:i.palettes.ui[0]}});Object.defineProperty(h,"themePalettes",{iterable:false,get:function e(){var t=[],n;for(var r=0;r<d.palettes.ui.length;r++)if(d.palettes&&d.palettes.ui&&d.palettes.ui[r]){n=d.palettes.ui[r];t.push(n)}else{n=i.palettes.ui[0];t.push(n)}return t}});Object.defineProperty(h,"deprecatedPalette",{iterable:false,get:function e(){return m}});Object.defineProperty(h,"scales",{iterable:false,get:function e(){return d.scales||i.scales}});Object.defineProperty(h,"dataPalettes",{iterable:false,get:function e(){return d.palettes&&d.palettes.data||i.palettes.data}});Object.defineProperty(h,"dataColors",{iterable:false,get:function e(){return d.dataColors||i.dataColors}});h.initializeService=function(e){f[e]||(f[e]=new a(e,c,d));return f[e]};h.getMatch=function(e){var t,n={linechart:"lineChart",barchart:"barChart",scatterplot:"scatterPlot",piechart:"pieChart",straightable:"straightTable",pivottable:"pivotTable",table:"straightTable","pivot-table":"pivotTable",listbox:"listBox",referenceline:"referenceLine",datacolors:"dataColors","text-image":"textImage",boxplot:"boxPlot",map:"mapChart",mapchart:"mapChart"};t=n[e.toLowerCase()]?n[e.toLowerCase()]:e;return t};var m=["#b0afae","#7b7a78","#545352","#4477aa","#7db8da","#b6d7ea","#46c646","#f93f17","#ffcf02","#276e27","#ffffff","#000000"];var b=["none","#ffffff","#46c646","#276e27","#b6d7ea","#7db8da","#4477aa","#8e477d","#ffcf02","#f8981d","#f93f17","#633d0c","#b0afae","#7b7a78","#545352","#000000"];function y(){var e=h.currentPalette;var t=true;e.forEach(function(e,n){b[n]&&b[n].toLowerCase()===e.toLowerCase()||(t=false)});p=t}h.resolveColor=function(e,t){t=t||h.currentPalette;if("undefined"!==typeof e&&null!==e){if(void 0!==e.index&&-1!==e.index&&t[e.index])return t[e.index];if(void 0!==e.color)return e.color?e.color:"none";if(p&&m[e])return m[e];if(t[e])return t[e];return e||"none"}return"none"};h.mapIndex=function(e,t,n){n=n||h.currentPalette;var i=t?n:m,r=t?m:n;e=r.indexOf(i[e]);return-1!==e?e:t?3:6};h.getPaletteScale=function(e,t){var n=this.dataPalettes;var i;n.some(function(t){if(t.propertyValue.toLowerCase()===e.toLowerCase()){i=t;return true}return false});i||(i=n[0]);if("pyramid"===i.type){t=t||i.scale.length;var r=Math.max(Math.min(i.scale.length-1,t-1)%i.scale.length,0);return i.scale[r]}return i.scale};h.hasCardLayout=function(){return!!d._cards};c=l;d=o.parseTheme(i,i,true);return h}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(90)],r=function(e){function t(e){return"object"===o(e.items)&&"array"!==e.type&&("items"===e.type||"items"===e.component||"expandable-items"===e.component||"accordion"===e.component||!e.type&&!e.component)}function n(e,t,n){if("string"!==typeof t)return t;switch(e){case"integer":t=parseInt(t,10);Number.isNaN(+t)&&(t=n);break;case"number":t=parseFloat(t);Number.isNaN(+t)&&(t=n);break;case"boolean":t="true"===t;break}return t}function i(e,t){if("function"===typeof t.defaultValue)return t.defaultValue();if("undefined"!==typeof t.defaultValue)return t.defaultValue;if(Array.isArray(t.options))return t.options[0].value;switch(e){case"array":return[];case"string":return"";case"integer":return 0;case"number":return 0;case"boolean":return false;default:return null}}function r(n){var r={};function o(n){var a,s,l;if(n.schemaIgnore)return;if(t(n)){a=Object.keys(n.items);for(l=0;l<a.length;l++){s=n.items[a[l]];s&&o(s)}}else n.ref&&!n.schemaIgnore&&e.setValue(r,n.ref,i(n.type,n))}if("array"===n.type&&n.items){r={};o({type:"items",items:n.items})}else o(n);return r}function a(e,t){return"undefined"!==typeof t.undefinedValue?t.undefinedValue:i(e,t)}return{getValue:e.getValue,setValue:e.setValue,getTypeValue:n,getDefaultValue:i,getDefaults:r,isHierarchical:t,getUndefinedValue:a}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e=[];var t=false;var n=false,i,r;i=function i(r,o){if(true!==n)throw new Error("This class can't be instantiated directly.");this.observers=[];this.receiver=r;Object.defineProperty(this,"name",{get:function e(){return o}});t&&e.push(this)};i.prototype.bind=function e(t){if("function"!==typeof t)throw new Error("Observer must be a function.");if(t===i.prototype.emit)throw new Error("Observer cannot be proxied this way. Use a wrapper function.");this.observers.push(t)};i.prototype.once=function e(t){var n=this;function i(){n.unbind(i);t.apply(n.receiver,arguments)}i.onceObserver=t;n.bind(i)};i.prototype.unbind=function e(t){var n;n=this.observers.reduce(function(e,n,i){if(-1!==e)return e;if(n===t||n.onceObserver===t)return i;return-1},-1);-1!==n&&this.observers.splice(n,1)};i.prototype.emit=function e(){var t=this.receiver,n=Array.prototype.slice.call(arguments),i=this.observers.slice();i.forEach(function(e){e.apply(t,n)})};i.prototype.release=function(){var e=this.receiver;delete e[this.name];Object.keys(r.prototype).forEach(function(t){delete e[t]});this.receiver=null;this.observers=null};i.create=function e(t,r){if(!t)throw new Error("Not a valid receiver.");if("string"!==typeof r)throw new Error("Nofification name not optional.");if(!/^([A-Z][a-z]+)+$/.test(r))throw new Error("The notification name must be PascalCased.");if(r in t)throw new Error("A property named '"+r+"' is already present on the receiver.");n=true;t[r]=new i(t,r);n=false;return t[r]};i.mixin=function(e){if(!e)throw new Error("Not a valid receiver.");Object.keys(r.prototype).forEach(function(t){if(t in e)throw new Error("A property named '"+t+"' is already present on the receiver.");e[t]=r.prototype[t]})};i.release=function(e){Object.keys(e).forEach(function(t){var n=e[t];n instanceof i&&n.release()})};r={prototype:{notification:function e(t){return i.create(this,t)}}};false;return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(2),n(94),n(991),n(49),n(14),n(90),n(378)],r=function e(t,n,i,r,o,a,s){var l="de-senseclient-usagemetrics";var c=30;var u=o.getProductInfoSync();var d;var f;function p(e){return{productName:a.getValue(e,"composition.productName"),productId:a.getValue(e,"composition.senseId"),deploymentEnv:a.getValue(e,"composition.deploymentEnvironment")}}var e={_qm:null,_eventQueue:[],_enabled:true,init:function n(i,o,l){f=l;if(!r.getFlag("CLIENT_METRICS")||this._qm){this._enabled=!!r.getFlag("CLIENT_METRICS");return}if(r.getFlag("HAS_QRS")){var c=a.getRandomString(16);var p=(a.basePath||"/")+"qrs/datacollection/settings?";p+="xrfKey="+c;t.request({url:p,method:"GET",headers:{"Content-Type":"application/json","X-Qlik-XrfKey":c}}).then(function(t){if(false===a.getValue(t,"data.optIn",null)){e._enabled=false;return}h()}).catch(h)}else h();function h(){i.getAuthenticatedUser().then(function(t){var n="no-id";if("string"===typeof t&&t.toLowerCase().indexOf("userdirectory")>-1&&t.toLowerCase().indexOf("userid")>-1){var i=t.split(";").map(function(e){return e.split("=")}).reduce(function(e,t){return e.concat([t[1].trim()])},[]);var r=i[0]?i[0]:void 0;var o=i[1]?i[1]:void 0;var a=void 0!==r&&void 0!==o&&"none"===r.toLowerCase()&&0===o.toLowerCase().indexOf("anonymous");n=a?"anonymous_"+(1234567890*Math.random()).toString(32):r+"_"+o;n=s(n)}e._initQlikMetrics(n);e._processEventsInQueue()})}d=!o?this.customEvents.SENSE_CLIENT:o;var v={components:u.components,composition:u.composition};f&&(v.appInfo={isRtl:!!f.isRtl||false,theme:f.theme||"sense",published:!!f.published});this.trackEvent(this.customEvents.CLIENT_LOADED,v)},_initQlikMetrics:function t(n){e._qm=new i({apiKey:"Kt1Hy2dvEOa39mRMvSQLRaEOk7E6l28M229QmWt2",integrationId:l,productInfo:p(u)});e._qm.setPropOnEvents("userId",n);e._qm.setPropOnEvents("version","6.105.4");e._qm.start()},_processEventsInQueue:function e(){var t;while(this._eventQueue.length>0){t=this._eventQueue.shift();this._sendEvent(t.eventName,t.details)}},_sendEvent:function t(i,r){var o={currentState:n.state,currentView:n.view,details:r,appId:f?f.appId:""};e._qm.trackEvent(i,o,d)},trackEvent:function t(n,i){if(!this._enabled)return;e._qm?this._sendEvent(n,i):this._eventQueue.length<c&&this._eventQueue.push({eventName:n,details:i})},customEvents:{CLIENT_LOADED:"client_loaded",SENSE_CLIENT:"sense-client",CLIENT_VIEW_LOADED:"client_view_loaded",CLIENT_STATE_LOADED:"client_state_loaded",DATA_LOAD_CLICK:"data_load_click",DATA_LOAD_EDITOR:"data_load_editor",DATA_LOAD_ELAPSED_TIME:"data_load_elapsed_time",DATA_MANAGER_LOAD:"data_manager_load",TABLE_VIEW_CLICK:"table_view_click",BUBBLE_VIEW_CLICK:"bubble_view_click",LOAD_DATA_CLICK:"load_data_click",REFRESH_DATA_FROM_SOURCE:"refresh_data_from_source",ADD_DATA_BY_CONNECTOR:"add_data_by_connector",ADD_DATA_BY_CONNECTOR_SCRIPT_EDITOR:"add_Data_by_connector_script_editor",FOLDER_CLICK:"folder_click",CONNECTOR_CLICKED:"connector_clicked",PAGE_RENDER_ERROR:"page_render_error",VIEW_LOAD_ERROR:"view_load_error",VIEW_RENDER_ERROR:"view_render_error",EXTENSION_LOAD_ERROR:"extension_load_error",INSIGHTS_CLICKED:"insights_clicked",INSIGHTS_SEARCH:"insights_search",INSIGHTS_ADD_CHART:"insights_add_chart",INSIGHTS_EXPORT:"insights_export",INSIGHTS_FIELD_PICKER:"insights_field_picker",INSIGHTS_TYPED_QUERY:"insights_typed_query",INSIGHTS_FLIP_TO_TABLE:"insights_flip_to_table",GLOBAL_SELECTIONS_CLICKED:"global_selections_clicked",EXPLORE_SELECTIONS_OPENED:"explore_selections_opened",ASSOCIATIVE_INSIGHTS_GENERATED:"associative_insights_generated",NEW_SELECTION_MADE:"new_selection_made",NEW_MEASURE_CHOSEN:"new_measure_chosen",ASSOCIATIVE_INSIGHTS_CARD_CLICKED:"associative_insights_card_clicked",SELECT_POSSIBLE_CLICKED:"select_possible_clicked",SELECT_EXCLUDED_CLICKED:"select_excluded_clicked",INSIGHTS_CONFIDENCE_INDICATOR_CLICKED:"confidence_indicator_clicked",INSIGHTS_HIDE_CHART_CLICKED:"hide_chart_clicked",INSIGHTS_HELP_US_LEARN_CLICKED:"insights_help_us_learn_clicked",INSIGHTS_NOT_A_DIMENSION_CLICKED:"insights_not_a_dimension_clicked",INSIGHTS_NOT_A_MEASURE_CLICKED:"insights_not_a_measure_clicked",INSIGHTS_NEVER_PROPOSE_FIELD_CLICKED:"insights_never_propose_field_clicked",INSIGHTS_NEVER_PROPOSE_LIB_CLICKED:"insights_never_propose_lib_clicked",INSIGHTS_PROPOSE_FIELD_AGAIN_CLICKED:"insights_propose_field_again_clicked",INSIGHTS_LIGHT_EDITING_DRAG_AND_DROP:"insights_light_editing_drag_and_drop",INSIGHTS_LIGHT_EDITING_AGGREGATION_CHANGE:"insights_light_editing_aggregation_change",INSIGHTS_LIGHT_EDITING_FIELD_CHANGE:"insights_light_editing_field_change",INSIGHTS_REFRESH_CLICKED:"insights_refresh_clicked",INSIGHTS_LEARN_CLICKED:"insights_learn_clicked",STU_SET_NULLS_CLICK:"stu_set_nulls_click",STU_REPLACE_CLICK:"stu_replace_click",STU_REORDER_CLICK:"stu_reorder_click",STU_SPLIT_CLICK:"stu_split_click",STU_BUCKETING_CLICK:"stu_bucketing_click",GETTING_STARTED_QUICK_DATA_LOAD:"getting_started_quick_data_load",GETTING_STARTED_DATA_LOAD_EDITOR:"getting_started_data_load_editor",DATA_MANAGER_TABLES_COUNT:"data_manager_tables_count",DATA_MANAGER_TIME_SPENT:"data_manager_time_spent",APPLY_UNPIVOT:"apply_unpivot",ADD_CALCULATED_FIELD:"add_calculated_field",CONCATENATE_TABLES:"concatenate_tables",DATA_MODEL_VIEWER:"data_model_viewer",DATA_MODEL_VIEWER_LOAD:"data_model_viewer_load",DATA_LOAD_WITHOUT_TRANSFORMATION:"data_load_without_transformation",CHART_CREATED:"chart_created",CHART_DELETED:"chart_deleted",SHEET_RENDERED:"sheet_rendered",EXTENSION_PAINT_ERROR:"extension_paint_error",DOWNLOAD_DIALOG_OPEN:"download_dialog_open",DOWNLOAD_CONFIRMED:"download_confirmed",CONTAINER_RENDERED:"container_rendered",CONTAINER_ADD_CHART:"container_add_chart",CONTAINER_REMOVE_CHART:"container_remove_chart",CONTAINER_SET_ACTIVE:"container_set_active"}};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(226)],r=function(e){function t(e,t,n,i){0===arguments.length?this.set(0,0,0,0):this.set(e,t,n,i)}t.prototype={toString:function e(){return this.x+" "+this.y+" "+this.width+" "+this.height},clone:function e(){return new t(this.x,this.y,this.width,this.height)},set:function e(t,n,i,r){if(i>=0){this.x=t;this.width=i}else{this.x=t+i;this.width=-i}if(r>=0){this.y=n;this.height=r}else{this.y=n+r;this.height=-r}},setLTRB:function e(t,n,i,r){if(t<=i){this.x=t;this.width=i-t}else{this.x=i;this.width=t-i}if(n<=r){this.y=n;this.height=r-n}else{this.y=r;this.height=n-r}},equal:function e(t){return t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},combineWith:function e(n){var i,r,o,a,s=Math.max(n.getRight(),this.getRight()),l=Math.max(n.getBottom(),this.getBottom());i=Math.min(n.x,this.x);r=Math.min(n.y,this.y);o=Math.max(0,s-i);a=Math.max(0,l-r);return new t(i,r,o,a)},intersectsWith:function e(t){if(!t)return false;if(this.x<=t.getRight()&&t.x<=this.getRight()&&this.y<=t.getBottom()&&t.y<=this.getBottom())return true;return false},intersectsRect:function e(t){return this.intersectsWith(t)},intersection:function e(n,i){var r,o,a,s;if(this.intersectsWith(n)){r=Math.max(this.x,n.x);o=Math.max(this.y,n.y);a=Math.min(this.getRight(),n.getRight());s=Math.min(this.getBottom(),n.getBottom());return new t(r,o,a-r,s-o)}return i?null:new t(this.x,this.y,this.width,this.height)},union:function e(n){var i,r,o,a;i=Math.min(this.x,n.x);r=Math.min(this.y,n.y);o=Math.max(this.getRight(),n.getRight());a=Math.max(this.getBottom(),n.getBottom());return new t(i,r,o-i,a-r)},pointInside:function e(t,n){return t>=this.x&&t<=this.getRight()&&n>=this.y&&n<=this.getBottom()},rectInside:function e(t){var n=t.getPoints(),i;for(i=0;i<4;i++)if(!this.pointInside(n[i].x,n[i].y))return false;return true},intersectsLine:function t(n){var i=this.getRight(),r=this.getBottom();if(this.pointInside(n.x1,n.y1)||this.pointInside(n.x2,n.y2))return true;if(n.intersectsLine(new e(this.x,this.y,i,this.y))||n.intersectsLine(new e(i,this.y,i,r))||n.intersectsLine(new e(i,r,this.x,r))||n.intersectsLine(new e(this.x,r,this.x,this.y)))return true;return false},getPoints:function e(){var t=[];t.push({x:this.x,y:this.y});t.push({x:this.getRight(),y:this.y});t.push({x:this.getRight(),y:this.getBottom()});t.push({x:this.x,y:this.getBottom()});return t},getRight:function e(){return this.x+this.width},getBottom:function e(){return this.y+this.height},getCenterPoint:function e(){return{x:this.x+this.width/2,y:this.y+this.height/2}},getBoundingRect:function e(){return this},scale:function e(t){var n=t-1,i=n*this.width/2,r=n*this.height/2;this.x-=i;this.y-=r;this.width*=t;this.height*=t},hasNaN:function e(){return Number.isNaN(+this.x)||Number.isNaN(+this.y)||Number.isNaN(+this.width)||Number.isNaN(+this.height)}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={Precedents:{PrecedentTypes:{Like:"like",Dislike:"dislike"}},Visualization:{ChartTypes:{Custom:"custom",Kpi:"kpi",Gauge:"gauge",BarChart:"barchart",ValueRange:"ValueRange",Table:"table",Mapping:"Mapping"},CustomVisualizations:{CountFact:"countFact",Ordinal:"Ordinal",NullFacts:"nullFacts",RangeFacts:"rangeFacts",UniValueFrequency:"uniValueFrequency",DTypeFacts:"dTypeFacts",ValueFrequency:"valueFrequency",TemporalFacts:"temporalFacts",MixedTypeValues:"mixedTypeValues"},Actions:{Bucketing:"bucket",Ordinal:"ordinal",SplitValuesDef:"splitValuesDef",SplitValues:"splitValues",SplitEmail:"splitEmail",SplitAddress:"splitAddress",SplitField:"splitField",MapValues:"mapValues",MixedTypeValues:"mixedTypeValues",RenameMapping:"rename",MapNulls:"mapNulls",MappingLimit:99,SplitLimit:9},Size:{Auto:"auto",Small:"small",Medium:"medium",Large:"large"},Layout:{Cellspan:{Small:1,Medium:2,Large:3}},ValueRangeDisplayModes:{Text:"text",RangeLine:"rangeLine"}},Events:{Associations:{ApplyRecommendation:"ApplyRecommendation",ToggleAssociationsRecommendationsPanel:"ToggleAssociationsRecommendationsPanel",UpdateAssociationsRecommendationsToolbarButtonState:"UpdateAssociationsRecommendationsToolbarButtonState"},TablePreview:{UpdateTablePreview:"UpdateTablePreview"},SplitAction:{Reset:"SpitActionReset",Validate:"SpitActionValidate",LoadComplete:"CardLoadComplete"},EditorDetailsPane:{CardsResize:"cardsResize",ResizeChart:"resizeChart",BucketingChange:"bucketingChange",BucketingReset:"bucketingReset",OrderingChange:"orderingChange",FieldCreated:"fieldCreated",MappingCreated:"MappingCreated",MappingReset:"MappingReset",DisableMappingActionButtons:"DisableMappingActionButtons"},PubSub:{ForceReloadComplete:"/datamanager/forcereloadcomplete",StartSpinInvalidation:"/spin/start/invalidation",StopSpinInvalidation:"/spin/stop/invalidation",StartSpin:"/spin/start",StopSpin:"/spin/stop",ConnectionDeleted:"/connection/deleted",ConnectionCreated:"/connection/created",AppDetailsViewChange:"/datamanager/appdetailsviewchange",ExpandSmartSearchSuggestedChart:"expandSmartSearchSuggestedChart",RestoreSearchState:"restoreSearchState"}},KeyCodes:{Enter:13,Esc:27,Up:38,Down:40,Tab:9,SpaceBar:32,Delete:8},AddData:{Folder:"folder",InlineData:"inlinedata"},Tags:{Hidden:"$hidden"},JoinTables:{joinTypes:{join:"Join",innerJoin:"Inner Join",outerJoin:"Outer Join",leftJoin:"Left Join",rightJoin:"Right Join"}},Toolbar:{height:42}};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e=null;function t(e,t,n,i){t=t||"model";var r=function i(){var r=this;var o=this.getLayout();e.__layoutRPCId=o.rpcId;o.then(function(i){var o=e.$eval(t);if(o!==r)return;n&&n(i)}).catch(function(){})},o,a,s;function l(){var n=e.$eval(t);n&&n.Invalidated&&n.Invalidated.unbind(o)}s=e.$on("$destroy",function(){l()});a=e.$watch(t,function(e,t){t&&t!==e&&t.Invalidated&&t.Invalidated.unbind(o);if(e&&(!e.isClosing||!e.isClosed)){i&&i(e);e.getLayout().then(n);o=r.bind(e);e.Invalidated.bind(o)}});return function(){l();a();s();n&&(n=null);i&&(i=null)}}function n(){return(e||t).apply(this,arguments)}n.mock=function(t){e=t};return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={};Object.defineProperties(e,{name:{value:255,writable:false},url:{value:2e3,writable:false},description:{value:512,writable:false},expression:{value:64e3,writable:false},script:{value:5e4,writable:false},textImage:{value:12e3,writable:false}});return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(49)],r=function(e,t){var n={};var i=null;n.setup=function(){var r=t.getFlag("IS_DESKTOPCLIENT");if(!i){i=new e;n.sessionPromise=i.promise;i.resolve({isPersonalMode:r})}return i.promise};n.inClient=function(){return document.body.classList.contains("qv-client")&&!document.body.classList.contains("qw")};n.isPersonalModeSync=function(){var e=t.getFlag("IS_DESKTOPCLIENT");false;return e};n.isPersonalMode=function(){return Promise.resolve(n.isPersonalModeSync())};n.isDesktop=n.isPersonalMode;n.isCloud=function(){false;return Promise.resolve(false)};return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(605)],r=function(e,t){var n=/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/i,i=/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(\d(\.\d+)?)\)$/i,r=/^#([A-f0-9]{2})([A-f0-9]{2})([A-f0-9]{2})$/i,o=/^#([A-f0-9])([A-f0-9])([A-f0-9])$/i,a=/^hsl\(\s*(\d+(\.\d+)?)\s*,\s*(\d+(\.\d+)?%?)\s*,\s*(\d+(\.\d+)?%?)\s*\)$/i,s=/^hsla\(\s*(\d+(\.\d+)?)\s*,\s*(\d+(\.\d+)?%?)\s*,\s*(\d+(\.\d+)?%?)\s*,(\d(\.\d+)?)\)$/i,l=Math.floor,c=Math.round,u;u=e.extend({init:function e(){var n=0,i=0,r=0,o=1,a,s,d,f,p,h,v,g,m,b,y,x;this._invalid=false;if(arguments[0]instanceof u){n=arguments[0]._r;i=arguments[0]._g;r=arguments[0]._b;o=arguments[0]._a;this._invalid=arguments[0]._invalid}else if(arguments.length<3)if("string"===typeof arguments[0]){x=arguments[0];if(y=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i.exec(x)){n=parseInt(y[1],10);i=parseInt(y[2],10);r=parseInt(y[3],10)}else if(y=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d(\.\d+)?)\s*\)$/i.exec(x)){n=parseInt(y[1],10);i=parseInt(y[2],10);r=parseInt(y[3],10);o=parseFloat(y[4])}else if(y=/^#([A-f0-9]{2})([A-f0-9]{2})([A-f0-9]{2})$/i.exec(x)){n=parseInt(y[1],16);i=parseInt(y[2],16);r=parseInt(y[3],16);o=1}else if(y=/^#([A-f0-9])([A-f0-9])([A-f0-9])$/i.exec(x)){n=parseInt(y[1]+y[1],16);i=parseInt(y[2]+y[2],16);r=parseInt(y[3]+y[3],16);o=1}else if(y=/^hsl\(\s*(\d+(\.\d+)?)\s*,\s*(\d+(\.\d+)?%?)\s*,\s*(\d+(\.\d+)?%?)\s*\)$/i.exec(x)){a=parseFloat(y[1]);s=parseFloat(y[3]);f=parseFloat(y[5]);a%=360;s/=100;f/=100;a=a<0?0:a>360?360:a;s=s<0?0:s>1?1:s;f=f<0?0:f>1?1:f;h=f<=.5?2*f*s:(2-2*f)*s;v=a/60;g=h*(1-Math.abs(v%2-1));m=[];v=Math.floor(v);switch(v){case 0:m=[h,g,0];break;case 1:m=[g,h,0];break;case 2:m=[0,h,g];break;case 3:m=[0,g,h];break;case 4:m=[g,0,h];break;case 5:m=[h,0,g];break;default:m=[0,0,0]}b=f-.5*h;n=m[0]+b;i=m[1]+b;r=m[2]+b;n=c(255*n);i=c(255*i);r=c(255*r);o=1}else if(y=/^hsla\(\s*(\d+(\.\d+)?)\s*,\s*(\d+(\.\d+)?%?)\s*,\s*(\d+(\.\d+)?%?)\s*,(\d(\.\d+)?)\)$/i.exec(x)){a=parseFloat(y[1]);s=parseFloat(y[3]);f=parseFloat(y[5]);o=parseFloat(y[7]);a%=360;s/=100;f/=100;a=a<0?0:a>360?360:a;s=s<0?0:s>1?1:s;f=f<0?0:f>1?1:f;h=f<=.5?2*f*s:(2-2*f)*s;v=a/60;g=h*(1-Math.abs(v%2-1));m=[];v=Math.floor(v);switch(v){case 0:m=[h,g,0];break;case 1:m=[g,h,0];break;case 2:m=[0,h,g];break;case 3:m=[0,g,h];break;case 4:m=[g,0,h];break;case 5:m=[h,0,g];break;default:m=[0,0,0]}b=f-.5*h;n=m[0]+b;i=m[1]+b;r=m[2]+b;n=c(255*n);i=c(255*i);r=c(255*r)}else if(y=/^hsv\(\s*(\d+(\.\d+)?)\s*,\s*(\d+(\.\d+)?%?)\s*,\s*(\d+(\.\d+)?%?)\s*\)$/i.exec(x)){a=parseFloat(y[1]);s=parseFloat(y[3]);p=parseFloat(y[5]);a%=360;s/=100;p/=100;a=a<0?0:a>360?360:a;s=s<0?0:s>1?1:s;p=p<0?0:p>1?1:p;h=p*s;v=a/60;g=h*(1-Math.abs(v%2-1));m=[];v=Math.floor(v);switch(v){case 0:m=[h,g,0];break;case 1:m=[g,h,0];break;case 2:m=[0,h,g];break;case 3:m=[0,g,h];break;case 4:m=[g,0,h];break;case 5:m=[h,0,g];break;default:m=[0,0,0]}b=p-h;n=m[0]+b;i=m[1]+b;r=m[2]+b;n=c(255*n);i=c(255*i);r=c(255*r);o=1}else if(t[x.toLowerCase()]){d=x.toLowerCase();n=t[d].r;i=t[d].g;r=t[d].b;o="number"===typeof t[d].a?t[d].a:1}else this._invalid=true}else if("number"===typeof arguments[0]&&arguments[0]>=0&&"argb"===arguments[1]){o=(4278190080&arguments[0])>>>24;o/=255;n=(16711680&arguments[0])>>16;i=(65280&arguments[0])>>8;r=255&arguments[0]}else if("number"===typeof arguments[0]&&arguments[0]>=0){n=(16711680&arguments[0])>>16;i=(65280&arguments[0])>>8;r=255&arguments[0]}else this._invalid=true;else if(arguments.length>=3){n=arguments[0];i=arguments[1];r=arguments[2];o=arguments.length>=4?arguments[3]:1}else this._invalid=true;Number.isNaN(+n+i+r+o)&&(this._invalid=true);this._r=l(n);this._g=l(i);this._b=l(r);this._a=o;this._spaces={}},isInvalid:function e(){return this._invalid},setAlpha:function e(t){this._a=t;this._spaces={}},getAlpha:function e(){return this._a},toRGB:function e(){this._spaces.rgb||(this._spaces.rgb=u.toRGB(this));return this._spaces.rgb},toRGBA:function e(){this._spaces.rgba||(this._spaces.rgba=u.toRGBA(this));return this._spaces.rgba},toString:function e(){this._spaces.rgb||(this._spaces.rgb=u.toRGB(this));return this._spaces.rgb},toHex:function e(){this._spaces.hex||(this._spaces.hex=u.toHex(this));return this._spaces.hex},toHSL:function e(t){this._spaces.hsl||(this._spaces.hsl=u.toHSL(this,t));return this._spaces.hsl},toHSLA:function e(t){this._spaces.hsla||(this._spaces.hsla=u.toHSLA(this,t));return this._spaces.hsla},toHSV:function e(){var t=this.toHSVComponents();return"hsv("+t.h+","+t.s+","+t.v+")"},toHSVComponents:function e(){this._spaces.hsvComp||(this._spaces.hsvComp=u.toHSVComponents(this));return this._spaces.hsvComp},toNumber:function e(){this._spaces.num||(this._spaces.num=u.toNumber(this));return this._spaces.num},isDark:function e(){return this.isInvalid()||this.getLuminance()<125},getLuminance:function e(){"undefined"===typeof this._lumi&&(this._lumi=.299*this._r+.587*this._g+.114*this._b);return this._lumi},shiftLuminance:function e(t){var n,i,r,o,a,s=this.toHSLA();a=/^hsla\(\s*(\d+(\.\d+)?)\s*,\s*(\d+(\.\d+)?%?)\s*,\s*(\d+(\.\d+)?%?)\s*,(\d(\.\d+)?)\)$/i.exec(s);n=parseFloat(a[1]);i=parseFloat(a[3]);r=parseFloat(a[5]);o=parseFloat(a[7]);r+=t;r=Math.max(0,Math.min(r,100));return"hsla("+n+","+i+","+r+","+o+")"},isEqual:function e(t){if(t instanceof u)return this._r===t._r&&this._g===t._g&&this._b===t._b;t=new u(t);return this._r===t._r&&this._g===t._g&&this._b===t._b},blend:function e(t,n){var i=l(this._r+(t._r-this._r)*n),r=l(this._g+(t._g-this._g)*n),o=l(this._b+(t._b-this._b)*n),a=l(this._a+(t._a-this._a)*n);return"rgba("+[i,r,o,a].join(",")+")"},createShiftedColor:function e(t){(void 0===t||Number.isNaN(+t))&&(t=1);var n=this.getLuminance(),i=this._g<126?1:1+this._g/512,r=this.shiftLuminance(20*(n*i<220?.8+1/(n+1)*4:-(.8+n/255*1))*t);return new u(r)}});u.toRGB=function e(t){if(t instanceof u)return"rgb("+[t._r,t._g,t._b].join(",")+")";"string"===typeof t&&(t=u.toNumber(t));var n=(16711680&t)>>16,i=(65280&t)>>8,r=255&t;return"rgb("+n+","+i+","+r+")"};u.toRGBA=function e(t,n){if(t instanceof u)return"rgba("+[t._r,t._g,t._b,"undefined"!==typeof n?n:t._a].join(",")+")";"string"===typeof t&&(t=u.toNumber(t));var i=(16711680&t)>>16,r=(65280&t)>>8,o=255&t;return"rgba("+i+","+r+","+o+","+("undefined"!==typeof n?n:t._a)+")"};u.toHex=function e(t){var n,i,r;if(t instanceof u){n=t._r.toString(16);i=t._g.toString(16);r=t._b.toString(16);1===n.length&&(n="0"+n);1===i.length&&(i="0"+i);1===r.length&&(r="0"+r);return"#"+[n,i,r].join("")}"string"===typeof t&&(t=u.toNumber(t));n=((16711680&t)>>16).toString(16);i=((65280&t)>>8).toString(16);r=(255&t).toString(16);1===n.length&&(n="0"+n);1===i.length&&(i="0"+i);1===r.length&&(r="0"+r);return"#"+n+i+r};u.toHSL=function(e,t){var n,i,r,o=0,a,s,l,c,d;"string"===typeof e&&(e=new u(e));n=e._r/255;i=e._g/255;r=e._b/255;l=Math.max(n,i,r);c=Math.min(n,i,r);s=t?.21*n+.72*i+.07*r:(l+c)/2;if(l===c){a=0;o=0}else{d=l-c;a=s>.5?d/(2-l-c):d/(l+c);switch(l){case n:o=(i-r)/d+(i<r?6:0);break;case i:o=(r-n)/d+2;break;case r:o=(n-i)/d+4;break}o/=6}return"hsl("+360*o+","+100*a+","+100*s+")"};u.toHSLA=function(e,t){var n,i,r,o,a=0,s,l,c,d,f;"string"===typeof e&&(e=new u(e));n=e._r/255;i=e._g/255;r=e._b/255;o=e._a;c=Math.max(n,i,r);d=Math.min(n,i,r);l=t?.21*n+.72*i+.07*r:(c+d)/2;if(c===d){s=0;a=0}else{f=c-d;s=l>.5?f/(2-c-d):f/(c+d);switch(c){case n:a=(i-r)/f+(i<r?6:0);break;case i:a=(r-n)/f+2;break;case r:a=(n-i)/f+4;break}a/=6}return"hsla("+360*a+","+100*s+","+100*l+","+o+")"};u.toHSVComponents=function(e){var t,n,i,r=0,o,a,s,l,c;"string"===typeof e&&(e=new u(e));t=e._r/255;n=e._g/255;i=e._b/255;s=Math.max(t,n,i);l=Math.min(t,n,i);a=s;if(s===l){o=0;r=0}else{c=s-l;o=0===c?0:c/a;switch(s){case t:r=(n-i)/c+(n<i?6:0);break;case n:r=(i-t)/c+2;break;case i:r=(t-n)/c+4;break}r/=6}return{h:360*r%360,s:100*o,v:100*a}};u.toNumber=function e(){if(1===arguments.length&&arguments[0]instanceof u)return(arguments[0]._r<<16)+(arguments[0]._g<<8)+arguments[0]._b;var t=0,n=0,i=0,r,o;if(1===arguments.length&&"string"===typeof arguments[0]){o=arguments[0];if(r=/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/i.exec(o)){t=parseInt(r[1],10);n=parseInt(r[2],10);i=parseInt(r[3],10)}else if(r=/^#([A-f0-9]{2})([A-f0-9]{2})([A-f0-9]{2})$/i.exec(o)){t=parseInt(r[1],16);n=parseInt(r[2],16);i=parseInt(r[3],16)}else if(r=/^#([A-f0-9])([A-f0-9])([A-f0-9])$/i.exec(o)){t=parseInt(r[1]+r[1],16);n=parseInt(r[2]+r[2],16);i=parseInt(r[3]+r[3],16)}}return(t<<16)+(n<<8)+i};u.blend=function e(t,n,i){t=u.toNumber(t);n=u.toNumber(n);var r=(16711680&t)>>16,o=(65280&t)>>8,a=255&t,s=(16711680&n)>>16,l=(65280&n)>>8,c=255&n,d=r+(s-r)*i,f=o+(l-o)*i,p=a+(c-a)*i;return(d<<16)+(f<<8)+p};u.getBlend=function e(t,n,i){var r=t._r+(n._r-t._r)*i,o=t._g+(n._g-t._g)*i,a=t._b+(n._b-t._b)*i,s=t._a+(n._a-t._a)*i;return new u(r,o,a,s)};u.isCSSColor=function(e){if(arguments.length>1||"string"!==typeof e)return false;return n.test(e)||i.test(e)||r.test(e)||o.test(e)||a.test(e)||s.test(e)||t[e.toLowerCase()]};u.getBestContrast=function(e,t,n){var i=e.getLuminance();return Math.abs(i-t.getLuminance())>Math.abs(i-n.getLuminance())?t:n};u.getContrast=function(e,t){if(!e||!t)return;var n=e.getLuminance()/100,i=t.getLuminance()/100;return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)};u.isDark=function(){var e={getLuminance:u.prototype.getLuminance,isInvalid:u.prototype.isInvalid};u.prototype.init.apply(e,[].slice.call(arguments));return u.prototype.isDark.call(e)};u.useDarkLabel=function(e,t){return e._a>.5?!e.isDark():!t};return u}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(259)],r=function(e){var t=e.enums;for(var n in t)t["Nx"+n]=t[n];return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";(function(e){var i,r;!(i=[n(10),n(522),n(525)],r=function(e,t,n){var i=e.module("qv.context-menu",["leonardo-ui.overlay"]);i.service("qvContextMenu",["luiOverlay","luiInlineOverlay",function(e,i){var r={},o;r.show=function(n,i){if(0===n.items.length)return;this.close();var r=i.component||t;return o=e.show(r,{menu:n,options:i})};r.showInline=function(e,n,r){if(0===e.items.length)return;var a=n.component||t;return o=i.show(a,{menu:e,options:n,container:r})};r.close=function(){if(o){o.close();o=null}};r.menu=function(){var e=new n;var t={addItem:function t(n,i){return e.addItem(n,i)}};Object.defineProperty(t,"items",{get:function t(){return e.items}});return t};return r}])}.apply(t,i),void 0!==r&&(e.exports=r))}).call(this,n(55)(e))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(90),n(95),n(94),n(131),n(91)],r=function(e,t,n,i,r,o,a){var s;function l(e,n){t.getService("qvConfirmDialog").show({message:a.get(e),icon:"cogwheel"}).closed.then(function(e){e&&n.apply()})}function c(e){if(!s)throw new TypeError("Permissions are not available yet. Make sure you have initialized this module with init().");switch(e){case"measure":return s.createMeasure;case"dimension":return s.createDimension;case"visualization":return s.createMasterobject;case"odagLink":return s.createOdagLink;default:throw new TypeError("'"+e+"' is an unknown type.")}}var u={init:function t(n,i){n&&(s=e.extend({},n,i))},getContextMenuAddToText:function e(t){var n=o.selectedObject;return t&&"odaglinks"===t?"library.addtoAppNavigation":n&&"sheetCell"===n.type?"contextMenu.addToSheet":"contextMenu.addToVisualization"},getAddToOptions:function e(){var t=o.selectedObject,n=null;if(t&&r.isInEditMode()){n={};"gridCell"===t.type?n.object=true:"sheetCell"===t.type&&(n.sheet=true)}return n},getAddToText:function e(t){var n=o.selectedObject;if(n&&r.isInEditMode())return t&&"odaglinks"===t?"library.addtoAppNavigation":"gridCell"===n.type?"library.addtoVisualization":"sheetCell"===n.type?"library.addtosheet":"";return null},addItemToSheetOrVisualization:function e(t,n){if(!this.isAddToMode())return;var r=o.selectedObject,a={item:t};n&&(a.event=n);r&&"gridCell"===r.type&&(a.cell=r.customObject);i.publish("/ui/library/addToSheet",a)},librarySearchFn:function e(t,i,r){if(!i||""===i)return true;r=r||function(e,t){return n.match([e.name],t)};return r(t,i.toLowerCase())},libraryMultiSearch:function e(t,i,r){t.match={};if(!i||""===i)return true;i=i.toLowerCase();var o=false;for(var a=0;a<r.length;++a){var s=r[a];if(n.match(t[s],i)){o=true;t.match[s]=true}}return o},itemDblClickHandler:function e(t){this.isAddToSheetMode()&&i.publish("/ui/library/addToSheet",{item:t})},removeDialog:l,editDialog:l,hasLinks:function e(t,n){return n.get(t).then(function(e){return e.getLinkedObjects().then(function(e){return 0!==e.length})})},toggleSelection:function t(n,i){var r=e(i.currentTarget);n.selected=!n.selected;if(!n.selected){r.off("qv-outside");return false}r.on("qv-outside",function(t){var i=e(t.target);if(1===i.closest("#library-preview").length||1===i.closest(".qv-contextmenu").length)return;n.selected=false;r.off("qv-outside")});return true},removeSelection:function t(n){e.each(n,function(e,t){t.selected=false})},localeOrderBy:function e(t,n){var i="pseudo"===a.language?"en-US":a.language;if(t){var r=function e(t,n){return t.localeCompare(n,i)};n&&n instanceof Function&&(r=function e(t,r){return n(t).localeCompare(n(r),i)});t.sort(r)}return t},isAddToSheetMode:function e(){return r.model&&r.isInEditMode()&&r.view===r.Views.sheet&&r.model.layout.permissions.update},isAddToVisualizationMode:function e(){return r.isInEditMode()&&(r.view===r.Views.object&&r.model.layout.permissions.update||r.view===r.Views.masterObject)},isAddToMode:function e(){return this.isAddToSheetMode()||this.isAddToVisualizationMode()},hasAppUpdatePermssion:function e(){return s.update},permissionToCreate:c,toggleTableSelect:function e(t,n){t.forEach(function(e){"assets-tab-field"===e.id&&(e.hasTableFilter=n)})}};return u}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(13)],r=function(e){var t={SMARTSEARCH_OBJECTS:true,SMARTSEARCH_INDEX_CLOSE:true,QDM_MULTITABLE:true,CARDS:false,SEARCH_HISTORY:true,GENERIC_SELECT_FILTER_TABLE:true,DESKTOP_AUTHENTICATION:false,BOX_MEASURE_RANGE:false,MAP_MEASURE_LABEL:false,DIST_2MES:false,ODAG_MASHUP:true,COLOR_BY_MEA:false,LIBRARY_DATA_BUTTONS:true,SHEET_NAME_EXPR:true,ST_HSCROLL:true,LIGHT_CUR_SEL:false,CAO_DEBUG:false,SCROLL_BUTTON:false,CAO_FIELD_PICKER_SYNC:false,CONTEXT_MENU:true,SPA:true,CAO_MOBILE:false,TI_IMPCP:false,PIVOT_SHOW_HIDE:true,ALT_STATE_ONE:true,CHANGE_CHART_TYPE:true,DEFAULT_BOOKMARK:true,DLE_CREATE_CONNECTION:true,DM_handle_nulls:true,DM_hide_fields:true,"ps-1245":true,"sui-3868":true,PIE_RADIUS:true,ACCESSIBLE_FILTERPANE:true,LOADING_CARD_IMAGES:true,ADVANCED_EXPRESSION_EDITOR_PART3:true,SET_EXPRESSION_CHECKBOX:true,DROP_ZONES:false,SSA_IN_EDIT:false,GEO_BACKGROUND_WMS:false,GEO_BACKGROUND_IMAGE:false,BRIGHT_THEME:true,MOBILE_GRID:false};var n=(e.getParameterByName("feature")||"").split("+");n.forEach(function(e){e&&(t[e.toUpperCase()]=true)});return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(162),n(102)],r=function(e,t){var n={};var i=false;var r="ltr";var o=false;t.mixin(n);n.notification("DirectionChanged");n.init=function(t){return e.getProperties(t).then(function(e){o=true;return n.setRtl(e&&e.rtl)})};n.setRtl=function(e){if(i!==e){i=e;r=i?"rtl":"ltr";n.DirectionChanged.emit(r)}return r};Object.defineProperty(n,"isInit",{get:function e(){return o}});Object.defineProperty(n,"isRtl",{get:function e(){return i}});Object.defineProperty(n,"direction",{get:function e(){return r}});function a(e){n.setRtl(e.rtl)}e.UpdateObjProps.bind(a);return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={};function t(t){return e[t]}function n(t,n){e[t]=n}function i(t){delete e[t]}return{getType:t,getRegisteredNames:function t(){return Object.keys(e)},getLibraryInfo:function t(n){return e[n]?e[n].getLibraryInfo():null},getIconName:function t(n){return e[n]?e[n].getIconName():null},getIconChar:function t(n){return e[n]?e[n].getIconChar():null},getIconPath:function t(n){return e[n]?e[n].getIconPath():null},registerType:n,removeType:i}}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(597),n(90)],r=function(e,t){function n(e,n){"object"===o(n)&&(n=t.extend(true,Array.isArray(n)?[]:{},n));if(e&&"qResult"!==e){var i={};i[e]=n;return i}return n}function i(e,t){var n=Object.keys(e);var i=t.In.map(function(e){return e.Name});return 0!==n.filter(function(e,t){return e===i[t]}).length}function r(e,t){var n=[];Array.isArray(t)&&1===t.length&&"object"===o(t[0])&&i(t[0],e)&&(t=t[0]);if(Array.isArray(t)||"object"!==o(t))Array.isArray(t)?n=t:n.push(t);else for(var r=0;r<e.In.length;++r)t&&void 0!==t[e.In[r].Name]?n.push(t[e.In[r].Name]):e.In[r].Optional&&void 0!==e.In[r].DefaultValue&&n.push(e.In[r].DefaultValue);return n}function a(e,t,i,o){var a=e[t];var s=1===a.Out.length?a.Out[0].Name:null;t=t.substring(0,1).toLowerCase()+t.substring(1);i[t]=function(){var e=Array.prototype.slice.call(arguments);e=r(a,e);var i=o[t].apply(o,e).then(n.bind(null,s));i.__protocolRequestId=i.requestId;return i}}var s={global:void 0,currentApp:void 0};s.bootstrap=function(t){if(!s.global){s.global={};s.global.enigmaGlobal=t.global;Object.keys(e.Global).forEach(function(n){a(e.Global,n,s.global,t.global)})}var n={};Object.keys(e.Doc).forEach(function(i){a(e.Doc,i,n,t)});return n};s.setCurrentApp=function(e){s.currentApp=e};s.getCurrentApp=function(){return s.currentApp};"undefined"!==typeof window&&(window.engineModuleGlobal=s);return s}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11)],r=function(){var e=1;var t=256;var n=166/26;var i=12;var r=11;var o=12;var a=o/r;function s(n){var i=/^[^\\/:*?"<>|\x00-\x1f]+$/;return"undefined"!==typeof n&&!d(n,"_")&&!d(n,"$$")&&i.test(n)&&n.length>=e&&n.length<=t}function l(e){return!/[\\*?"()<>|' &$^/+-]+/.test(e)}function c(e){return/^(ftp|http|https):\/\/[^ "]+$/.test(e.toLowerCase())}function u(e){if(/^.*:\/\//.test(e))return e;return"http://"+e}function d(e,t){return 0===e.indexOf(t)}function f(e,t){return-1!==e.indexOf(t,e.length-t.length)}function p(e,t){t||(t="");return e.length>0?e.reduce(function(e,n){return e+t+n}):""}function h(e){var t=e.replace(/.*\[|\]/gi,""),n=t.match(/"[^=]*"|[^;]+/g);return n}function v(e,t){var n=h(e),i;if(n)for(i=0;i<n.length;i++)if(-1!==n[i].toLowerCase().indexOf(t.toLowerCase()))return n[i].split("=")[1];return""}function g(e,t){function n(){return(e+"\\"+t).replace("\\\\","\\")}function i(){if("\\\\"===e.substring(0,2))return"\\"+n()}return i()||n()}function m(e){var t=h(e),n=[],i;t&&t.forEach(function(e){i=e.split("=");i&&n.push({key:i[0],value:i.length>1?i[1]:""})});return n}function b(e){"\\"===e.charAt(0)&&(e=e.substring(1));"\\"===e.charAt(e.length-1)&&(e=e.slice(0,-1));return e}function y(e){"\\"!==e.charAt(e.length-1)&&(e+="\\");return e}function x(e){var t;if("\\\\"===e.substring(0,2)){t=b(e.substring(2)).split("\\");t.pop();return"\\\\"+p(t,"\\")}t=b(e).split("\\");t.pop();return 1===t.length?t[0]+"\\":p(t,"\\")}function S(e){return e.replace(/[0-9]+/g,function(e){var t=e.length,n=""+t,i="000",r=i.substring(0,i.length-n.length)+n;return r+""+e})}function w(e,t,n){e.sort(function(e,i){return q(e[t],i[t],n)})}function q(e,t,n){var i=S(e).toLowerCase(),r=S(t).toLowerCase();return i.localeCompare(r,n)}function C(e,t){if(!e)throw new Error("Haystack is undefined.");if(!t)throw new Error("Needle is undefined.");return-1!==e.indexOf(t)}function _(e,t,n){e+="";t+="";if(!t)return 0;var i=t.match(/^\/(.*)\/([a-z]*)$/);if(!i){if(!n){e=e.toLowerCase();t=t.toLowerCase()}var r=0,o=0;var a=t.length;var s=false;while(!s){o=e.indexOf(t,o);if(o>=0){r++;o+=a}else s=true}return r}try{var l=new RegExp(i[1],-1===i[2].indexOf("i")?"":"i");return e.split(l).length-1}catch(e){return 0}}function I(e){return e.substring(e.lastIndexOf("\\")+1,e.length)}function E(e){return e.substring(0,e.lastIndexOf("\\")+1)}function D(e){var t=e.match(/.*\\(.*)\\.*$/);t||(t=e.match(/^(.*)\\.*$/));return t?t[1]:null}function A(e){return!(!e||"false"===e)}function T(e){var t=3;return(Math.min(e,t)*i+Math.max(e-t,0)*n)/r}function O(e){if(!e)return{latin:0,cjk:0};var t=e.match(/[\u4E00-\u9FFF]/g);var n=e.match(/[\u3040-\u309F]/g);var i=e.match(/[\u30A0-\u30FF]/g);t=t?t.length:0;n=n?n.length:0;i=i?i.length:0;var r=t+n+i;return{latin:e.length-r,cjk:r}}function k(e,t){var n={latin:0,cjk:0};void 0===t?e.forEach(function(e){var t=O(e.qText);n.latin+=t.latin;n.cjk+=t.cjk}):e.forEach(function(e){var i=O(e[t].qText);n.latin+=i.latin;n.cjk+=i.cjk});var i=Math.max(1,n.latin+n.cjk);n.latinRatio=n.latin/i;n.cjkRatio=n.cjk/i;return n}function L(e,t,n){var i=k(t,n);var r=i.latinRatio*e;var o=i.cjkRatio*e;var s=Math.ceil(T(r)+o*a);return s}function P(e,t,n){var i=e<=24?t:n;return e*i}function M(e,t,n,i,r){return e*n+P(t,i,r)}return{MIN_CONNECTION_NAME_LENGTH:e,MAX_CONNECTION_NAME_LENGTH:t,isValidConnectionName:s,isValidFieldName:l,isValidUrl:c,prefixHttpToUrl:u,endsWith:f,startsWith:d,goUpOneFolderLevel:x,removeSurroundingSlashes:b,arrayToString:p,formatDirectoryPathForEngine:y,sortSlightlyMoreNaturallyArray:w,sortSlightlyMoreNaturallySingle:q,_expandNumbersForNaturalSorting:S,getValueFromConnectionString:v,tokenizeConnectionString:m,contains:C,occurrencesRE:_,combinePath:g,fileNameFromPath:I,fileDirectoryFromPath:E,lastFolderFromPath:D,bool:A,stringWidthOverMWidth:T,getCharacterRatios:O,getTotalCharacterRatios:k,getAdjustedMaxGlyphCount:L,estimateLatinLabelWidth:P,estimateLabelWidth:M}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(10),n(258),n(3),n(16),n(96),n(60),n(57),n(514),n(515),n(433),n(435),n(111),n(526),n(548),n(551),n(552),n(556),n(558)],r=function(e,t,n,i){var r,o={},a=[],s=[],l,c,u,d,f,p,h,v;o.bootstrap=function(e,n){n=n||[];n.some(function(e){return"qlik-angular"===e})||(n=n.concat(["qlik-angular"]));t.bootstrap(e,n)};o.module=t.module("qlik-angular",["ngAnimate","ngSanitize","leonardo-ui","vs-repeat","qv.dragoman","qv.directives","qv.filters","qv.locale","qv.mobile-menu","qv.alert-dialog","qv.confirm-dialog","qv.context-menu","qv.loader","qv.about-dialog"],["$provide","$compileProvider","$filterProvider","$httpProvider","$animateProvider","$sceDelegateProvider","$qProvider",function(e,t,n,r,o,a,s){d=e;f=t;p=n;var l=i.getConfig();r.defaults.withCredentials=l.withCredentials;l.csrfToken&&r.interceptors.push(function(){return{request:function e(t){t.headers["qlik-csrf-token"]=l.csrfToken;return t}}});l.clientApiKey&&r.interceptors.push(function(){return{request:function e(t){t.headers["qlik-client-api-key"]=l.clientApiKey;return t}}});s.errorOnUnhandledRejections(false);a.resourceUrlWhitelist(["self"]);o.classNameFilter(/\bqv-animate\b/i);e.value("$anchorScroll",function(){})}]).run(["$injector","$rootScope","$compile","$controller","$timeout","$q",function(e,t,n,i,d,f){l=t;c=n;u=i;h=d;v=f;r=e;o.$injector=r;o.$rootScope=l;o.isBootstrapped=true;a.forEach(function(e){o[e.name]=e.fn});s.forEach(function(e){e.fn.apply(e.fn,e.args)});a.length=0;s.length=0}]);function g(e,t){if(o.isBootstrapped)o[e]=t;else{a.push({name:e,fn:t});o[e]=function(){var e=Array.prototype.slice.call(arguments);s.push({fn:t,args:e})}}}g("directive",function(e,t){f.directive(e,t)});g("nativeComponent",function(e,t){f.component(e,t)});o.component=function(e,t){o.directive(e,function(){return{transclude:null==t.transclude||t.transclude,template:t.template,requires:t.requires,scope:null!=t.scope?t.scope:"=",controller:t.controller||function(){},link:t.link||function(){},restrict:"E",replace:true}})};g("filter",function(e,t){p.register(e,t)});g("service",function(e,t){d.service(e,t);return r.get(e)});g("provider",function(e,t){return d.provider(e,t)});g("injectComponent",function(t,i,o){var a;if(!i)throw new Error("Trying to show undefined component.");if("function"===typeof i)return i.apply({},[t,o]);if(Array.isArray(i)){var s={$element:t,input:o};for(var d in o)o.hasOwnProperty(d)&&(s[d]=o[d]);return r.invoke(i,{},s)}if(i.controller){var f=e(t).scope();f||(f=l);n(f,function(){var e=f.$new();e.extractComponent=function(){if(!e.$$destroyed){e.$destroy();t.off(".qvangularcoreshowcomponent");t.html("")}};e.destroyComponent=e.extractComponent;var n={$scope:e,$element:t,$transclude:void 0,input:o};for(var r in o)if(o.hasOwnProperty(r)){n[r]=o[r];e[r]=o[r]}t.html(i.template);var s=c(t.contents());if(i.controller){a=u(i.controller,n);t.contents().data("$ngControllerController",a)}s(e);t.on("remove.qvangularcoreshowcomponent",function(){e.$$destroyed||e.$destroy()})});return a}});g("componentDirective",function(e,n,i,r){var a={};for(var s in n)n.hasOwnProperty(s)&&(a[s]=n[s]);a[e]="=";a.input="=";a.component="=";o.directive(e,["$compile","$controller",function(n,o){return{restrict:"EA",replace:true,terminal:true,scope:a,link:function a(s,l,c){var u=0,d;s.$watch("component",function(a){var f=++u;a||(a=i);if(a&&a.template){if(f!==u)return;d&&d.$destroy();d=s.$new();l.html(a.template);var p=n(l.contents());var h={$scope:d,$element:l,$attrs:c};!s.input||!a.scope||t.forEach(a.scope,function(e,t){var n;n="string"===typeof e&&"="===e.charAt(0)&&e.length>1?e.substring(1):t;d[n]=s.input[t];var i=d[n];d.$watch(function e(){var r=s.input[t];if(r!==d[n])if(r!==i){d[n]=r;i=r}else{i=d[n];s.input[t]=d[n]}return r})});if(s.input){for(var v in s.input)s.input.hasOwnProperty(v)&&(h[v]=s.input[v]);h.input=s.input}var g;if(a.controller){g=o(a.controller,h);l.contents().data("$"+e+"Controller",g)}p(d);"function"===typeof r&&("function"===typeof g.onInit?g.onInit().then(function(){r(g,d,l)}).catch(function(e){false}):r(g,d,l))}else{if(d){d.$destroy();d=null}l.html("")}})}}}])});s.push({name:"componentDirective",fn:function e(){o.componentType=o.componentDirective;o.componentDirective("qvaInclude",{ngModel:"="})}});o.$apply=n;o.defer=function(){return v.defer()};o.when=function(e,t,n){return v.when(e,t,n)};o.promise=function e(t){return h(function(){return t})};o.getService=function(e){return r.get(e)};e.fn.showComponent=function(e,t){return"string"===typeof e?o.injectComponent(this,{template:e,controller:t||function(){}},{}):o.injectComponent(this,e,t)};window.qvangularGlobal=o;return o}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(93),n(89)],r=function(e,t){function n(n){return n?t.resolve(n.enigmaModel):e.getApp()}var i={};i.create=function(e,t){return n(t).then(function(t){return t.createSheet(e)})};i.remove=function(e,t){return n(t).then(function(t){return t.destroyObject(e)})};i.get=function(e,t){return n(t).then(function(t){return t.getObject(e)})};i.getList=function(e){return n(e).then(function(e){return e.getSheetListObject()})};return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(48),n(101),n(89),n(90),n(91)],r=function(e,t,n,i,r){function a(e,t,n){return"function"===typeof e.refFn?e.refFn(t,n):e.ref}var s={defineValue:function n(i,r,o,l){var c,u,d;function f(e){var n=a(r,o(),i.args);var s=t.getValue(o(),n);if("undefined"===typeof s)return t.getUndefinedValue(e,r);return s}function p(n,l,c){var u=t.getTypeValue(n,l,c);var d=o();var f=a(r,d,i.args);r.rollbackInvalid?s.validateType(u,r,d)?t.setValue(d,f,u):e.getService("$timeout")(function(){e.$rootScope.$broadcast("pp-revalidate")}):t.setValue(d,f,u)}if(r.convertFunctions){u=function e(){return r.convertFunctions.get(f,r,i.args)};d=function e(t){return r.convertFunctions.set(t,p,r,i.args)}}else{u=function e(){return f(r.type)};d=function e(n){var i=t.getDefaultValue(r.type,r);p(r.type,n,i)}}c="undefined"!==typeof l?l:"value";Object.defineProperty(i,c,{get:u,set:d})},defineExpression:function e(n,i,r){var s=n.definition.expression,l=n.definition.expressionType,c="optional"===s||"always"===s,u=i?"qValueExpression":"qStringExpression";!l&&c&&(l=i?"ValueExpression":"StringExpression");n.expressionType=l;n.isExpressionDefinition=c;Object.defineProperty(n,"displayValue",{get:function e(){var t=n.value;if(t&&"object"===o(t)){t=t[u].qExpr;t&&"="!==t[0]&&(t="="+t)}return t},set:function e(t){var i=c&&t&&0===t.indexOf("=");var r;if(t&&i){r={};r[u]={qExpr:t.substr(1)}}else r=t;n.value=r}});n.isExpression=function(){if("always"===s)return true;if("optional"===s){var e=a(n.definition,n.data,n.args);var i=t.getValue(n.data,e);return"object"===o(i)}return!!l};n.isLocked=function(){if(c){var e=n.value;"object"===o(e)&&(e=e[u].qExpr);if(!e||i&&"number"===typeof e)return false;var t=r&&-1!==e.indexOf("\n");return e&&(t||e.length>n.maxlength)}return false}},defineChange:function e(t,n){function i(){t.$emit("saveProperties")}t.change=function(){if("function"===typeof t.definition.change){var e=t.definition.change(t.data,n,t.args.properties,t.args);"object"===o(e)&&e.then?e.then(function(e){false!==e&&i()}):false!==e&&i()}else i()}},defineVisible:function e(t,n){var i=t.definition.show;"function"===typeof i?Object.defineProperty(t,"visible",{get:function e(){return i(t.data,n,t.args)}}):t.visible="boolean"!==typeof i||i},defineReadOnly:function e(t,n){var i=t.definition.readOnly;"function"===typeof i?Object.defineProperty(t,"readOnly",{get:function e(){return i(t.data,n,t.args)}}):t.readOnly="boolean"===typeof i&&i},definePlaceholder:function e(t,n){n.placeholderTranslation?t.placeholder=r.get(n.placeholderTranslation):n.placeholder&&(t.placeholder=n.placeholder)},defineLabel:function e(t,n,i,o){n.translation?t.label=r.get(n.translation):"function"===typeof n.label?Object.defineProperty(t,"label",{get:function e(){return n.label(i(),o)}}):n.label&&(t.label=n.label);return""},defineCustom:function e(t,n,i){var r=t.definition[i];"function"===typeof r?Object.defineProperty(t,i,{get:function e(){return r(t.data,n,t.args,t)}}):r&&(t[i]=r)},fillOptions:function e(t,i,a,s,l){var c=new n;function u(){var e=t.options;"function"===typeof e&&(e=t.options.call(null,i,a,l));if("object"===o(e)&&"function"===typeof e.then)return e;return n.resolve(e)}function d(e){return e.filter(function(e){return!!e}).map(function(e){var t={value:e.value};e.translation?t.label=r.get(e.translation):e.label?t.label=e.label:t.label=e.value;e.tooltipTranslation?t.tooltip=r.get(e.tooltipTranslation):e.tooltip&&(t.tooltip=e.tooltip);return t})}u().then(function(e){e=d(e);s.splice(0,s.length);for(var t=0;t<e.length;++t)s.push(e[t]);c.resolve()},c.reject);return c.promise},validateType:function e(t,n,r,o){var a=false;"boolean"===typeof n.invalid&&(a=a||n.invalid);"function"===typeof n.invalid&&(a=a||n.invalid.call(null,r,o.properties,o));if("number"===n.type)if(i.isNumeric(t)){"number"===typeof n.max&&t>n.max&&(a=true);"number"===typeof n.min&&t<n.min&&(a=true)}else a=true;if("integer"===n.type)if(i.isInteger(t)){"number"===typeof n.max&&t>n.max&&(a=true);"number"===typeof n.min&&t<n.min&&(a=true)}else a=true;if("string"===n.type){"undefined"!==typeof n.maxlength&&(a=a||t.length>n.maxlength);"undefined"!==typeof n.minlength&&(a=a||t.length<n.minlength)}return!a}};return s}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(135),n(177),n(90)],r=function(e,t,n){var i={getUrlForHub:function t(){return e.buildHubUrl().replace("/noData/true","")},getUrlForSheet:function i(r,o,a){var s=n.getParameterByName("app");o||(o=t.analysis(s).state);if(a)return e.buildUrl(true,"sense","app",s,"sheet",r,"state",o,"overlay",a);return e.buildUrl(true,"sense","app",s,"sheet",r,"state",o)},getUrlForStory:function i(r,o,a){var s=n.getParameterByName("app");"undefined"===typeof o&&(o=t.story(s).state||"editstory");return a?e.buildUrl(true,"sense","app",s,"story",r,"state",o,"slide",a):e.buildUrl(true,"sense","app",s,"story",r,"state",o)},getUrlForOverview:function t(){var i=n.getParameterByName("app");return e.buildUrl(true,"sense","app",i)},getUrlForDataModelViewer:function t(){var i=n.getParameterByName("app");return e.buildUrl(true,"datamodelviewer","app",i)},getUrlForDataLoadEditor:function t(){var i=n.getParameterByName("app");return e.buildUrl(true,"dataloadeditor","app",i)},getUrlForDataManager:function t(){var i=n.getParameterByName("app");return e.buildUrl(true,"sense","app",i,"datamanager","datamanager")},goToHub:function t(){e.setUrl(i.getUrlForHub(),false,false,true)},goToOverview:function t(){e.setUrl(i.getUrlForOverview())},goToDataManager:function t(){e.setUrl(i.getUrlForDataManager())},goToDataModelViewer:function t(){e.setUrl(i.getUrlForDataModelViewer())},goToDataLoadEditor:function t(){e.setUrl(i.getUrlForDataLoadEditor())},goToSheet:function t(n,r,o){e.setUrl(i.getUrlForSheet(n,r,o))},goToStory:function t(n,r,o){e.setUrl(i.getUrlForStory(n,r,o))}};return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={STATIC:0,ANALYSIS:1,EDIT:2};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(13),n(115),n(312),n(332),n(671),n(210),n(345),n(49)],r=function(e,t,i,r,o,a,s,l,c){var u=null;var d=null;var f=false;function p(e,i){i=i||{};i.previewIconURL||"string"===typeof i.preview&&i.preview.match(/\.(?:png|gif|jpe?g|svg)$/)&&(i.cloud?i.previewIconURL="/api/v1/extensions/"+i.id+"/file/"+i.preview:i.folder?i.previewIconURL=n.p+i.folder+"/"+e+"/"+i.preview:i.previewIconURL=t.rootPath+"extensions/"+e+"/"+i.preview);i.icon&&"extension"!==i.icon||(i.icon="puzzle");i.description=i.description||i.name;i.template=i.template||e;i.isLibraryItem=false!==i.isLibraryItem;i.isThirdParty=true;i.name=i.name||i.template||e;return i}function h(e){if(e.data&&"visualization"===e.data.type){if(i.getType(e.id.toLowerCase())){e.data.bundle?console.warn("Bundled extension already loaded (this is likely correct): "+e.id):console.error("Extension id already registered: "+e.id);return}var t=p(e.id,e.data);o.registerThirdPartyLibraryInfo(e.id,t);i.registerType(e.id,new r({type:e.id,path:e.path||"extensions/"+e.id+"/"+e.id}))}}function v(t){if(!f){i.registerType("listbox",new r({type:"listbox",path:"extensions.qliktech/listbox/listbox"}));i.registerType("filterpane",new r({type:"filterpane",path:"extensions.qliktech/filterpane/filterpane"}));c.getFlag("CONTAINER_OBJECT")&&i.registerType("container",new r({type:"container",path:"extensions.qliktech/container/container"}));c.getFlag("DISABLE_AUTO_CHART")||i.registerType("auto-chart",new r({type:"auto-chart",path:"extensions.qliktech/auto-chart/auto-chart"}));i.registerType("boxplot",new r({type:"boxplot",path:"extensions.qliktech/boxplot/boxplot"}));i.registerType("histogram",new r({type:"histogram",path:"extensions.qliktech/histogram/histogram"}));i.registerType("distributionplot",new r({type:"distributionplot",path:"extensions.qliktech/distributionplot/distributionplot"}));i.registerType("waterfallchart",new r({type:"waterfallchart",path:"extensions.qliktech/waterfallchart/waterfallchart"}));i.registerType("gauge",new r({type:"gauge",path:"extensions.qliktech/gauge/gauge"}));i.registerType("kpi",new r({type:"kpi",path:"extensions.qliktech/kpi/kpi"}));i.registerType("table",new r({type:"table",path:"extensions.qliktech/straight-table/straight-table"}));i.registerType("pivot-table",new r({type:"pivot-table",path:"extensions.qliktech/pivot-table/pivot-table"}));i.registerType("barchart",new r({type:"barchart",path:"extensions.qliktech/barchart/barchart"}));i.registerType("piechart",new r({type:"piechart",path:"extensions.qliktech/piechart/piechart"}));i.registerType("scatterplot",new r({type:"scatterplot",path:"extensions.qliktech/scatterplot/scatterplot"}));i.registerType("linechart",new r({type:"linechart",path:"extensions.qliktech/linechart/linechart"}));i.registerType("combochart",new r({type:"combochart",path:"extensions.qliktech/combochart/combochart"}));i.registerType("treemap",new r({type:"treemap",path:"extensions.qliktech/treemap/treemap"}));i.registerType("map",new r({type:"map",path:""}));i.registerType("text-image",new r({type:"text-image",path:"extensions.qliktech/text-image/text-image"}));i.registerType("widget",new r({type:"widget",path:"extensions.qliktech/widget/widget"}));f=true}var n=[];if(d)return t?d:d.then(g);var o=c.getFlag("DASHBOARD_EXT_BUNDLE")?a.getDashBundleList():[];o.forEach(function(e){n.push(e)});var s=c.getFlag("VIZ_EXT_BUNDLE")||c.getFlag("VIZBUN_QCS_31")?a.getVisBundleList():[];s.forEach(function(e){n.push(e)});d=e.all(n);return d.then(function(e){e.forEach(h);if(!t)return g()}).catch(function(){console.warn("Error when loading extensions")})}function g(){if(!u){var t=c.getFlag("DISABLE_ONPREM_EXTENSIONS")?e.resolve([]):s.getList();var n=c.getFlag("CLOUD_EXTENSIONS")?l.getList():e.resolve([]);u=n.then(function(e){e.forEach(h);return t.then(function(e){e.forEach(h)})})}return u}function m(e){i.removeType(e);o.remove(e)}return{load:v,isLoaded:function e(t){return!!i.getType(t)},registerExtension:h,removeExtension:m}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i;!(i=function(){function e(e){return e&&"[object Array]"===Object.prototype.toString.call(e)}function t(e){return e&&"function"===typeof e}function n(n,i){var r,o;if(!e(n))throw new Error("No valid items were specified.");if(!t(i))throw new Error("No valid action function was specified.");if(Array.prototype.forEach)n.forEach(i);else for(r in n){o=n[r];i(o)}}function i(t,n){if(!e(t))throw new Error("No valid items were specified.");if(Array.prototype.indexOf)return-1!==t.indexOf(n);var i=t.length;while(i--)if(t[i]===n)return true;return false}function r(e,t){if(!e||!t||!e.length||!t.length)return false;var n=t.length,i;for(i=0;i<n;i++)if(e.indexOf(t[i])>-1)return true;return false}function o(e,t){if(!e||!t||!e.length||!t.length)return false;var n=e.indexOf(t[0]);if(-1!==n){for(var i=0;i<t.length;i++){var r=e.indexOf(t[i]);if(n>r)return false;n=r}return true}return false}function a(e,t,n){if(n>=e.length){var i=n-e.length;while(1+i--)e.push(void 0)}e.splice(n,0,e.splice(t,1)[0])}function s(e,t,n){var i=e[t];e[t]=e[n];e[n]=i}function l(e,t){var n;for(n=0;n<e.length;++n)e[n]>=0&&e[n]>=t&&++e[n];e.push(t)}function c(e,t,n){var i;for(i=0;i<e.length;++i)e[i]>=0&&e[i]>=t&&++e[i];e.splice(n,0,t)}function u(e,t){var n=0;var i;for(i=0;i<e.length;++i)e[i]>t?--e[i]:e[i]===t&&(n=i);e.splice(n,1);return n}function d(e,t){if(e.length>t)return e.slice(0,t);return e}function f(e){if(!(e instanceof Array))throw new Error("Argument is not an Array.");return e.slice(0)}return{forEach:n,contains:i,move:a,swap:s,limit:d,indexAdded:l,indexAddedAt:c,indexRemoved:u,intersects:r,isOrderedSubset:o,copy:f}}.call(t,n,t,e),void 0!==i&&(e.exports=i))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){return{sectionIDs:{template:"template",cloudExtensions:"cloud-extensions",extensions:"extensions",field:"field",time:"time",dimension:"dimension",measure:"measure",visualization:"visualization",odag:"odag"}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11)],r=function(e){var t={};t.getParentElementWithAttribute=function(e,t,n){var i=false,r=0;while(e&&e.parentNode&&r<100&&!i){r++;if(e.nodeName===t.toUpperCase()&&e.hasAttribute(n)){i=true;return e}e=e.parentNode}if(!i)return null};t.getAncestorsUntil=function(e,t){var n=[];t||(t=function e(){return false});while(e&&e.parentNode&&!t(e)){n.push(e);e=e.parentNode}return n};t.isInput=function(e){return e&&("INPUT"===e.tagName||"SELECT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable)};t.elementFromEventPosition=function(e){var t=document;var n=t.body;var i=e.pageX+(t&&t.clientLeft||n&&n.clientLeft||0)-(t&&t.scrollLeft||n&&n.scrollLeft||0);var r=e.pageY+(t&&t.clientTop||n&&n.clientTop||0)-(t&&t.scrollTop||n&&n.scrollTop||0);return document.elementFromPoint(i,r)};t.scrollElmentIntoView=function t(n,i,r,o){var a;if(!n.length)return;a=i instanceof e?i:n.closest(i);if(a.length){var s=a.offset().top,l=s+a.height(),c=n.offset().top,u=c+n.outerHeight(!!o),d=u-c,f=l-s,p;p=n[0].getBoundingClientRect().top;if(r){p-=a.height()/2;a.scrollTop(a.scrollTop()+p)}else if(f<d){p=c-s;a.scrollTop(a.scrollTop()+p)}else if(u>l){p=u-l;a.scrollTop(a.scrollTop()+p)}else if(c<s){p=c-s;a.scrollTop(a.scrollTop()+p)}}};t.getAction=function(t,n,i){var r,o,a,s=(i?e(t.target).closest("[data-action]"):e(t.target).parent())[0];if(t.target.getAttribute("data-action")){r=t.target.getAttribute("data-action");o=e(t.target)}else if(s&&s.getAttribute("data-action")){r=s.getAttribute("data-action");o=e(s)}r&&n&&(a=e(o.closest(n)).scope());return{action:r,element:o,scope:a}};t.isElementInViewport=function t(n,i){var r=n.getBoundingClientRect(),o,a={top:false,right:false,bottom:false,left:false,inView:false};o=(i||e("body")[0]).getBoundingClientRect();a.top=r.top+r.height-o.top>=0;a.right=o.right-(r.right-r.width)>=0;a.bottom=o.bottom+r.height>=r.bottom;a.left=r.left-o.left+r.width>=0;a.inView=a.top&&a.right&&a.bottom&&a.left;return a};t.isClickOnScrollbar=function t(n,i){var r=e(n.target),o=n.clientX||n.pageX,a=r.offset().left+e(n.target).width();if(!r.is(i))return false;return o>a-17};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(89),n(106),n(97),n(50),n(131),n(613),n(94),n(11),n(91)],r=function(e,t,n,i,r,o,a,s,l,c){var u=null,d=null,f={gridElement:null,scrollTop:0,scrollTopSheet:0,scrollLeft:0,scrollLeftSheet:0,lastZoomedCell:null,intervalPromise:null,hightlightedCellId:null};function p(e,t){s.setView(e);var n=l(document.body);n.toggleClass("qv-view-sheet",!t);n.toggleClass("qv-view-object",t);n.toggleClass("qv-gridzoom",t)}function h(){u.grid.updateCellsSize()}function v(){u.grid.updateCellsSize()}function g(e){return e?t.resolve():u.grid.autoCollapse()}function m(t){var l;if(u)return;u=e.$rootScope.$new(true);u.grid=new a(this,t.enigmaModel.app);u.model=t;u.stageState=o;n(u,"model",function(e){u&&u.grid.update(e)});r.ViewChanged.bind(h);i.on("end",v);u.$watch(s.isInEditMode,function(e){l=e;if(u.grid.layout){u.grid.update(u.grid.layout);if(l)u.grid.updateActiveCell();else{u.grid.removeResizeHandles();D();g(l)}}});u.$watch("grid.zoomCell",function(e){if(E()||s.view===s.Views.story&&s.state!==s.States.analysis)return;var t=e?s.Views.object:s.Views.sheet;p(t,!!e)});u.$watch("grid.changedZoom",function(e){false!==e||u.grid.zoomCell||h(u.grid)});u.$watch("stageState.selectedObject",function(e){u&&e&&"gridCell"!==e.type&&u.grid.clearActiveCell()});s.SheetChanged.bind(b)}function b(e){if(!u)return;g(s.isInEditMode()).then(function(){if(u){u.model=e;u.grid.unblock()}})}function y(){d||(d=e.getService("$interval"));if(!u)return;u.$destroy();u=null;r.ViewChanged.unbind(h);i.off("end",v);s.SheetChanged.unbind(b);d.cancel(f.intervalPromise);f.gridElement=null}function x(){var t=u&&u.grid.getOptimalCell();t||e.getService("qvAlertDialog").show({title:c.get("Ui.Warning.GridFull.Title"),message:c.get("Ui.Warning.GridFull"),closeLabel:c.get("Common.OK")});return t}function S(e){if(!u)return;I(e.pos)}function w(){return u&&u.grid.isBlocked()}function q(e){if(w())return t.reject();u.grid.block();return u.model.addObject(e).finally(function(){u.grid.unblock()})}function C(e,n){if(w())return t.reject();return u.model.swapObjects(e,n)}function _(e,n){if(w())return t.reject();return u.model.moveObject(e,n)}function I(e){if(w())return t.reject();u.grid.block();return u.model.removeObject(e).finally(function(){u.grid.unblock()})}function E(){return u&&u.grid&&!u.model}function D(){if(!E())return;b(s.model);p(s.Views.sheet,false)}function A(e,t){if(!u)return;u.model=null;u.grid.setEditMaster(e,t);p(s.Views.masterObject,true)}return{start:m,stop:y,goToEditMode:function e(){s.setState(s.States.edit)},getOptimalCell:x,removeCell:S,isActive:function e(){return!!u},getGrid:function e(){return u&&u.grid},getModel:function e(){return u&&u.model},activateCell:function e(t){u&&u.grid.toggleActive(t)},deactivateCell:function e(){u&&u.grid.toggleActive(null)},getZoomCell:function e(){return u&&u.grid.zoomCell},getZoomedCellId:function e(){return u.grid.zoomCell.id},zoomInOnCell:function e(t){var n;if(u){n=u.grid.cells.filter(function(e){return e.id===t});n.length&&u.grid.zoom(n[0])}},zoomOut:function e(){if(u){u.grid.zoom(null);u.grid.gridService.restoreSheetScrollState()}},saveZoom:function e(){u&&u.grid&&f&&!f.lastZoomedCell&&u.grid.zoomCell&&u.grid.zoomCell.id&&(f.lastZoomedCell=u.grid.zoomCell.id)},restoreZoom:function t(){if(f.lastZoomedCell){var n=e.getService("$timeout");n(function(){u.grid.blockZoomAnimation=true;this.zoomInOnCell(f.lastZoomedCell);f.lastZoomedCell=null}.bind(this))}},setGridElement:function e(t){f.gridElement=t},saveScrollState:function e(){if(l(".qvt-sheet").length>0&&!f.lastZoomedCell&&f.gridElement){f.scrollTop=f.gridElement.scrollTop;f.scrollLeft=f.gridElement.scrollLeft;f.scrollTopSheet=l(".qvt-sheet")[0].scrollTop;f.scrollLeftSheet=l(".qvt-sheet")[0].scrollLeft}},restoreScrollState:function t(){d||(d=e.getService("$interval"));if(f.lastZoomedCell)return;f.scrollTop>0&&(f.intervalPromise=d(function(){if(f.gridElement.children.length>0){f.gridElement.scrollTop=f.scrollTop;f.scrollTop=0;d.cancel(f.intervalPromise)}},50));f.scrollLeft>0&&(f.intervalPromise=d(function(){if(f.gridElement.children.length>0){f.gridElement.scrollLeft=f.scrollLeft;f.scrollLeft=0;d.cancel(f.intervalPromise)}},50))},restoreSheetScrollState:function t(n,i){var r=e.getService("$timeout");r(function(){if(l(".qvt-sheet").length>0)if("undefined"!==typeof n||"undefined"!==typeof i){l(".qvt-sheet")[0].scrollTop>0&&(l(".qvt-sheet")[0].scrollTop=0);l(".qvt-sheet")[0].scrollLeft>0&&(l(".qvt-sheet")[0].scrollLeft=0)}else{f.scrollTopSheet>0&&(l(".qvt-sheet")[0].scrollTop=f.scrollTopSheet);f.scrollLeftSheet>0&&(l(".qvt-sheet")[0].scrollLeft=f.scrollLeftSheet)}})},resetSmallDeviceSheetScroll:function t(){var n=e.getService("$timeout");n(function(){var t=e.getService("qvSheetService").get();if(t&&t.length){t=t.find("#grid")[0];if(t){t.scrollTop=0;t.scrollLeft=0}t=null}})},scrollToPos:function e(t,n){if(l(".qvt-sheet").length){l(".qvt-sheet").scrollLeft(t);l(".qvt-sheet").scrollTop(n-80)}},getCellWithId:function e(t){if(u){var n=u.grid.cells.filter(function(e){return e.id===t});return n.length?n[0]:null}return null},highlightedCell:function e(t){t&&(f.hightlightedCellId=t);var n;if(u&&f.hightlightedCellId){n=u.grid.cells.filter(function(e){return e.id===f.hightlightedCellId});if(n.length){u.grid.highlight(n[0]);f.hightlightedCellId=null}}},isBlocked:w,addObject:q,swapObjects:C,moveObject:_,isEditMaster:E,closeEditMaster:D,editMaster:A}}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(125),n(144)],r=function(e,t){function n(e){e=e.trim();if("="===e.charAt(0)){e=e.substring(1);e=e.trim()}var t=e.length-1;if("["===e.charAt(0)&&"]"===e.charAt(t)){e=e.substring(1,t);e=e.trim()}return e}function i(i,r){var o=t.expand(e.copy(r));var a,s;i=n(i);if(o)for(a=0;a<o.length;a++){s=o[a];if(s.qName===i)return s}return null}function r(e,t){var n,i;if(t)for(n=0;n<t.length;n++){i=t[n];if(i.qInfo.qId===e)return i}return null}function o(e,t){var n,i;if(t)for(n=0;n<t.length;n++){i=t[n];if(i.qInfo.qId===e)return i}return null}function a(n){return n.getFieldList().then(function(n){return t.expand(e.copy(n)).sort(function(e,t){return e.qName.toLowerCase().localeCompare(t.qName.toLowerCase())})})}function s(t){return t.getDimensionList().then(function(t){return e.copy(t).sort(function(e,t){return e.qData.title.toLowerCase().localeCompare(t.qData.title.toLowerCase())})})}function l(t){return t.getMeasureList().then(function(t){return e.copy(t).sort(function(e,t){return e.qData.title.toLowerCase().localeCompare(t.qData.title.toLowerCase())})})}return{findField:i,findLibraryDimension:o,findLibraryMeasure:r,getSortedFields:a,getSortedDimensions:s,getSortedMeasures:l}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(11)],r=function(e,t){var n={};var i=false;var r=false;n.reset=function(){n.selectedObject=null;n.assetsOpen=true;n.propertiesOpen=false;i=false};n.hasPropertiesBeenClosedByUser=function(){return r};n.togglePropertyPanelByUser=function(){n.propertiesOpen=!n.propertiesOpen;i=n.propertiesOpen;i||(r=true);return n.propertiesOpen};n.resetPropertyPanelToggle=function(){n.propertiesOpen!==i&&(n.propertiesOpen=i)};n.setSelectedObject=function(i){var r={id:"",type:"",customObject:null,canCopy:function e(){return true},copy:null,canCut:function e(){return true},cut:null,paste:null,canRemove:function e(){return true},remove:null,getAllPropertyPanelContent:function t(){var n={objectType:"",iconClass:"",titleRef:"",definition:{},properties:{},layout:{},localeInfo:null,app:null,cache:null,ext:null,globalChangeListeners:null,handler:null,model:null};return e.resolve(n)}};if(i){t.extend(r,i);n.selectedObject=r}else n.selectedObject=null};n.reset();return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(93),n(89)],r=function(e,t){return{get:function n(i){var r=i?t.resolve(i.enigmaModel):e.getApp();return r.then(function(e){return e.getCurrentSelectionObject()})}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(748),n(90),n(192),n(95),n(154),n(120),n(132),n(89),n(108),n(49),n(749),n(456)],r=function(e,t,n,i,r,o,a,s,l,c,u){var d=null;var f=null;function p(e){if(f)return s.resolve(true);if(e){l.setup();return s.resolve(true)}return l.setup()}var h={addingNewNavPointID:{},odagLinkSessionObjects:{},getODAGLinksPromise:{}};h.ODAGRequestActionConst={CANCEL:"cancel",PAUSE:"pause",RESUME:"resume",CANCEL_ACK:"ackcancel",FAIL_ACK:"ackfailure"};h.getODAGLinks=function(e,t){t=void 0!==t&&t;var i=this;this.getODAGLinksPromise[e.id]&&!t||(this.getODAGLinksPromise[e.id]=n.getList(e).then(function(t){return t.getLayout().then(function(t){return i.onAppLinksLoaded(e,t)})}));return this.getODAGLinksPromise[e.id]};h.onAppLinksLoaded=function(e,t){var n=t.map(function(e){return e.qData.odagLinkRef});return h.loadODAGLinks(e,n)},h.loadODAGLinks=function(e,t){return v(e).getODAGLinksWithIds(e.id,t)};h.loadODAGLink=function(e,t){return v(e).getODAGLink(t)};h.canCreateLink=function(e){return v(e).canCreateLink(e.id)};h.isODAGAvailable=function(e){return p(e).then(function(){var t=l.isPersonalModeSync();return!(c.getFlag("ODAG_CLIENT_SAAS")&&!c.getFlag("ODAG_SAAS_ENABLED"))&&(!t&&v(e).isODAGAvailable().then(function(e){if(c.getFlag("ODAG_SAAS_ENABLED"))return e;return!(!e||!e.available)}).catch(function(){return false}))})};h.createODAGLink=function(e,i){var r=t.extend({},i);r.selectionApp=e.id;return v(e).createODAGLink(r).then(function(t){var i={qMetaDef:{odagLinkRef:c.getFlag("ODAG_SAAS_ENABLED")?t.id:t.objectDef.id}};return n.create(e,i)})};h.deleteODAGLink=function(e,r,a){var l=t.extend({},a);c.getFlag("ODAG_SAAS_ENABLED")&&(l.data.selectionApp=e.id);return v(e).deleteODAGLink(r,l).then(function(){return n.getList(e).then(function(t){return t.getLayout().then(function(t){var a=null;for(var l=0;l<t.length&&!a;l++){var u=t[l];u.qData.odagLinkRef===r&&(a=u.qInfo.qId)}c.getFlag("ODAG_SAAS_ENABLED")&&i.publish("hack_odag_link_update");if(a)return n.remove(e,a).then(function(){return o.getList(e).then(function(e){return e.getLayout().then(function(e){var t=[];e.forEach(function(e){var n=o.get(e.qInfo.qId).then(function(e){return e.removeRefToLinkIDFromNavPoints(r)});t.push(n)});return s.all(t)})})})})})})};h.updateODAGLink=function(e,r,o){var a=t.extend({},o);c.getFlag("ODAG_SAAS_ENABLED")&&(a.selectionApp=e.id);return v(e).updateODAGLink(r,a).then(function(t){return n.getList(e).then(function(r){return r.getLayout().then(function(r){var o=null;for(var a=0;a<r.length;a++){var s=r[a];var l=c.getFlag("ODAG_SAAS_ENABLED")?t.id:t.objectDef.id;if(s.qData.odagLinkRef===l){o=s.qInfo.qId;break}}c.getFlag("ODAG_SAAS_ENABLED")&&i.publish("hack_odag_link_update");if(o)return n.get(e,o).then(function(e){return e.getProperties().then(function(t){t.qMetaDef.timestamp=Date.now();return e.setProperties(t)})})})})})};h.addODAGNavPoint=function(e,n){if(e){var i=t.generateId();this.addingNewNavPointID[e.id]=i;var r={insertBeforeNavPointID:n.insertBeforeItem?n.insertBeforeItem.data.info.id:null,data:{info:{id:i},title:n.title,odagLinkRefID:n.odagLinkRefID}};e.addNavPoint(r)}};function v(t){if(d)return d;var n="";var i="";var r="";var o=false;if(t&&t.enigmaModel&&t.enigmaModel.session){var a=t.enigmaModel.session.sessionConfig?t.enigmaModel.session.sessionConfig:null;if(a){n=a.prefix?a.prefix:"/";i=a.host?a.host:null;r=a.port?a.port:null;o=!(!a.isSecure&&!a.secure)}}d=new e;d.init(i,r,n,o);return d}function g(e,t,n,i,r,o,a){e||(e=[]);t||(t=[]);return i<o?n.getHyperCubeData("/qHyperCubeDef",[{qTop:i,qLeft:0,qWidth:1,qHeight:1e4}]).then(function(s){s[0].qMatrix.forEach(function(n){var i=n[0];r.indexOf(i.qState)>-1&&e.push({selStatus:i.qState,strValue:i.qText,numValue:c.getFlag("ODAG_SAAS_ENABLED")?i.qNum+"":i.qNum});a&&"S"===i.qState&&t.push({selStatus:i.qState,strValue:i.qText,numValue:c.getFlag("ODAG_SAAS_ENABLED")?i.qNum+"":i.qNum})});i+=1e4;return g(e,t,n,i,r,o,a)}):s.resolve({fieldValues:e,selectedFieldValues:t})}function m(e,n,i){var r=n.selectAppParamName;var o=n.selectionStates;var a=t.extend(true,{},u.fieldHyperCubeProperties);a.qHyperCubeDef.qDimensions.push({qDef:{qFieldDefs:[r]},qNullSuppression:true});return e.enigmaModel.createSessionObject(a).then(function(t){return t.getLayout().then(function(n){var r=n.qHyperCube.qSize.qcy;return g(null,null,t,0,o,r,i).then(function(t){b(e,n.qInfo.qId);return t})})})}function b(e,t){var n=e.enigmaModel||e;return n.enigmaModel["destroySessionObject"].apply(n,[t])}function y(e,t){var n={bindingValuesArray:[],selectedValuesArray:[]};if(!t)return s.resolve(null);var i=t.bindings?t.bindings.filter(function(e){return"BDI"!==e.selectAppParamType}):[];var r=t.bindings?t.bindings.filter(function(e){return"BDI"===e.selectAppParamType}):[];return h.getBDIBindingValues(e,r).then(function(t){n.bindingValuesArray=t.bindingValuesArray||[];return h.getCurrentlySelectedFields(e).then(function(t){return h.getAllFieldBindingValues(e,i,t).then(function(r){for(var o=0;o<i.length;o++){var a=r[o];var s=-1;for(var l=0;l<t.length;l++)if(t[l]&&t[l].fieldName===i[o].selectAppParamName){s=l;break}if(s>=0){var c={selectionAppParamType:"Field",selectionAppParamName:i[o].selectAppParamName,values:a.selectedFieldValues.length<10001?a.selectedFieldValues:[],selectedSize:a.selectedFieldValues.length};n.selectedValuesArray.push(c);t.splice(s,1)}var u={selectionAppParamType:"Field",selectionAppParamName:i[o].selectAppParamName,values:a.fieldValues};n.bindingValuesArray.push(u)}var d=[];for(var f=0;f<t.length;f++)d.push({selectAppParamName:t[f].fieldName,selectionStates:"S"});return h.getAllFieldBindingValues(e,d,t).then(function(e){for(var i=0;i<t.length;i++){var r=e[i];var o={selectionAppParamType:"Field",selectionAppParamName:t[i].fieldName,values:r.fieldValues.length<10001?r.fieldValues:[],selectedSize:r.fieldValues.length};n.selectedValuesArray.push(o)}return n})})})})}h.clearSelections=function(e){return a.get(e).then(function(e){return e.clearAll()})};h.renameGenApp=function(e,t,n){return v(e).renameApp(t,n)};h.deleteGenApp=function(e,t){return v(e).deleteApp(t)};h.selectFieldValuesForField=function(e,t,n){var i=[];for(var o=0;o<n.length;o++){var a=n[o];var s={};if(Number.isNaN(+a.numValue)){s.qIsNumeric=false;s.qText=a.strValue}else{s.qIsNumeric=true;s.qNumber=a.numValue}i.push(s)}return r.get(t,null,e).then(function(e){return e.selectValues(i,true,true)})};h.getAllFieldBindingValues=function(e,t,n){if(t.length){var i=[];for(var r=0;r<t.length;r++){var o=t[r];var a=o.selectAppParamName;var l=n&&!!n.filter(function(e){return e.fieldName===a})[0];i.push(m(e,o,l))}return s.all(i)}return s.resolve([])};h.getConstraintFieldBindingValues=function(e,t){if(t.length){var n=[];for(var i=0;i<t.length;i++){var r=t[i];r.range?n.push(m(e,r,false)):n.push(s.resolve({noConstraint:true,fieldValues:[],selectedFieldValues:[]}))}return s.all(n)}return s.resolve([])};h.getCurrentlySelectedFields=function(e){return a.get(e).then(function(e){return e.getLayout().then(function(e){var t=[];for(var n=0;n<e.qSelectionObject.qSelections.length;n++){var i=e.qSelectionObject.qSelections[n];t.push({fieldName:i.qField,selectionCount:i.qSelectedCount})}return t})})};h.getBDIObject=function(e){return e.createSessionObject({qProp:{qInfo:{qType:"BDIObject"},qBDIObjectDef:{}}})};h.getBDISelection=function(e,t){return h.getBDIObject(e,t).then(function(e){return e.getLayout().then(function(n){if(!n||!n.qBDIObject||!n.qBDIObject.qValid)return s.resolve({});return e.setProperties({qProp:{qInfo:{qType:"BDIObject"},qBDIObjectDef:{qHandleCopyInLayout:t}}}).then(function(){return e.getLayout()})})})};h.getTemplateApps=function(e){var t=e.get();return c.getFlag("ODAG_SAAS_ENABLED")?d.getTemplateApps().then(function(e){return t.then(function(t){var n=e.data.filter(function(e){return e.id.toLowerCase()!=t.id.toLowerCase()});return n.map(function(e){return{qDocId:e.id,qDocName:e.name}})})}):t.then(function(t){return e.getList(t.session).then(function(e){var n=e.filter(function(e){return e.qDocId.toLowerCase()!=t.id.toLowerCase()});return n})})};h.getBDIBindingValues=function(e,t){if(t&&t.length>0){var n=[];return h.getBDISelection(e,"model").then(function(i){var r=i&&i.qBDIObject;if(r&&r.qValid){for(var o=0;o<t.length;++o)if("setHandle"===t[o].selectAppParamName){var a={selectionAppParamType:"BDI",selectionAppParamName:t[o].selectAppParamName,values:[{selStatus:"S",strValue:r.qGeneratedHandleCopy,numValue:"NaN"}]};n.push(a)}b(e,i.qInfo.qId)}return{bindingValuesArray:n}})}return s.resolve({})};h.reloadApp=function(e,t,n,i,r){switch(i){case 1:case 2:return y(e,t).then(function(t){if(t){var o=false;2==i&&(o=true);return v(e).reloadApp(n,r,t.bindingValuesArray,t.selectedValuesArray,o)}return s.resolve(null)});default:return v(e).reloadApp(n)}};h.getSelections=function(e,t){return v(e).getSelections(t)};h.generateApp=function(e,t,n,i,r){return y(e,n).then(function(o){return o?v(e).generateApp(n.id,e.id,i,t,r,o.bindingValuesArray,o.selectedValuesArray):s.resolve(null)})};h.removeODAGAppLinkWithODAGLinkId=function(e,t){return n.getList(e).then(function(i){return i.getLayout().then(function(i){var r=i.filter(function(e){return e.qData.odagLinkRef===t});if(r.length)return n.remove(e,r[0].qInfo.qId)})})};h.reorderNavPoints=function(e,t){e.reorderNavPoints(t)};h.moveNavPoint=function(e,t,n){e.moveNavPoint(t,n)};h.requestAction=function(e,t,n,i,r){return v(e).requestAction(t,n,i,r)};h.getGeneratedAppsForLink=function(e,t,n,i,r,o){return v(e).getGeneratedAppsForLink(n,i,e.id,t,r,o,true)};h.clearCachedSessionObjects=function(e){var t=this;function n(n){return t.odagLinkSessionObjects[e.id][n].getLayout().then(function(i){b(e,i.qInfo.qId);delete t.odagLinkSessionObjects[e.id][n]})}var i=[];for(var r in this.odagLinkSessionObjects[e.id])i.push(n(r));this.getODAGLinksPromise[e.id]=null;return s.all(i)};h.getOrCreateSessionObjectsForLink=function(e,t){var n=this;if(this.odagLinkSessionObjects[e.id]&&this.odagLinkSessionObjects[e.id][t.id])return s.resolve(this.odagLinkSessionObjects[e.id][t.id]);u.maxRowExpression.MaxRowCountExpression.qValueExpression.qExpr=t.rowEstExpr;return e.enigmaModel.createSessionObject(u.maxRowExpression).then(function(i){n.odagLinkSessionObjects[e.id]||(n.odagLinkSessionObjects[e.id]={});n.odagLinkSessionObjects[e.id][t.id]=i;return i})};return h}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(93),n(89),n(90)],r=function(e,t,n){function i(n){return n?t.resolve(n.enigmaModel):e.getApp()}var r={};r.get=function(e,t){return i(t).then(function(t){return t.getDimension(e)})};r.create=function(e,t){return i(t).then(function(t){e.qInfo.qId=e.qInfo.qId||n.generateId();return t.createDimension(e)})};r.remove=function(e,t){return i(t).then(function(t){return t.destroyDimension(e)})};r.getList=function(e){return i(e).then(function(e){return e.getDimensionListObject()})};r.getListLayout=function(e){return r.getList(e).then(function(e){return e.getLayout()})};return r}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(987),n(90)],r=function(e,t){location.hash&&history.replaceState(null,null,location.href.replace("#!/",""));var n={};var i=t.getParameterByName("app");var r=t.getParameterByName("language");var o=t.getParameterByName("theme");var a=t.getParameterByName("debug");var s=t.getParameterByName("options");var l=t.getParameterByName("bookmark");var c=t.getParameterByName("noData");var u=t.getParameterByName("feature");var d=t.getParameterByName("ttl");var f=t.getParameterByName("identity");var p=[];var h=[];var v=[];var g=[];i&&p.push("app",i);r&&h.push("language",r);o&&h.push("theme",o);a&&h.push("debug",a);s&&h.push("options",s);l&&h.push("bookmark",l);c&&h.push("noData",true);u&&h.push("feature",u);d&&h.push("ttl",d);f&&h.push("identity",f);n.isSuffixInUse=function(e){for(var t=0;t<h.length;t++)if(h[t]===e)return true;return false};n.removePartialSuffix=function(e){var t=false;for(var i=0;i<h.length;i++)if(h[i]===e){h.splice(i,2);t=true;break}if(t){var r=location.href,o=new RegExp("/"+e+"/[^/]+","i");m();if(o.test(r)){r=r.replace(o,"");n.setUrl(r)}}return t};function m(){g.forEach(function(e){e.dispose()});v.forEach(function(e){n.addRoute(e)})}function b(){window.addEventListener("popstate",function(){var e=t.getParameterByName("app");if(i&&i!==e){location.href=location.href;return}n.parse()},false)}n.parse=function(t){e.parse(t||location.pathname)};n.addRoute=function(t){var n=this;var i=t.pattern;v.push(t);t.isPartial&&"/"===i&&(i="");var r=e.addRoute(i,function(){n.lastRoute&&n.lastRoute!==t&&n.lastRoute.DeRoute.emit();n.lastRoute=t;t.Route.emit.apply(t.Route,arguments)});g.push(r)};n.setUrl=function(e,t,i,r){t=true;var o=location.href.toLowerCase().indexOf("?x-")>-1;o&&(e=e.replace(/\?x-.+?=[^&]+/i,"").replace("&","?"));if(r)location.href=e;else if(e!==location.href){history[t?"replaceState":"pushState"](null,null,e);i||n.parse()}};n.start=function(){this.setUrl(location.href);b(this);n.parse()};n.buildUrl=function(){var e=Array.apply(null,arguments);var n="";var i="";var r;if(true===e[0]){n=e[1];e=e.slice(2)}else e.unshift.apply(e,p);h.length&&e.push.apply(e,h);e=e.map(function(e){return encodeURIComponent(e).replace(/'/g,"%27")});if(n){var o=new RegExp("([^/])/"+t.project+"/","i");i=t.baseURI.replace(o,"$1/"+n+"/")}else i=t.baseURI;r=i+e.join("/").replace(/[/]+/g,"/");return r};n.buildHubUrl=function(){return window.customHubUrl?window.customHubUrl:this.buildUrl(true,"hub")};return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(48),n(11),n(102),n(112)],r=function(e,t,n,i,r){return e.extend({init:function e(n){this.assets=n;this.loading=true;this.$scope=t.$rootScope.$new(true);this.$scope.assets=n;i.create(this,"Resize");this.initLoadData();this.bindWatches()},destroy:function e(){this.$scope.$destroy()},initLoadData:function e(){},onLoadData:function e(){},doFilter:function e(t){return t.slice()},bindWatches:function e(){this.$scope.$watch("assets.query",this.onFilter.bind(this))},onFilter:function e(){var t=this.doFilter(this.list);this.items=t;this.matchCount=this.assets.query?t.length:0},resize:function e(t){this.Resize.emit(t)},addItemToSheetOrActiveObject:function e(t){r.itemDblClickHandler(t)},openContextMenu:function e(){},openPreview:function e(t,i){this.previewManager.open(t,this.assets.query,n(i.currentTarget))},closePreview:function e(){this.previewManager.close()}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(111)],r=function(e){var t,n;t={openPreview:function e(i){t.close();n=i},openContextMenu:function n(i,r,o){t.close();e.getService("qvContextMenu").show(i,{position:{x:o.pageX,y:o.pageY}})},close:function t(){if(n){n.close();n=null}e.getService("qvContextMenu").close()}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(2),n(90),n(13),n(49),n(489)],r=function(e,t,i,r,a){var s="en-US";var l=["es-ES","es","sv-SE","sv","ja-JP","ja","en-US","en-GB","en","de-DE","de","fr-FR","fr","it-IT","it","nl-NL","nl","pt-BR","pt","ru-RU","ru","zh-CN","zh","zh-TW","ko-KR","ko","tr-TR","tr","pl-PL","pl"];function c(){var t=i.apiPath+"v1/locale";return e({method:"GET",url:t,timeout:3e3}).then(function(e){return e.data.locale})}function u(){var t=i.apiPath+"about/v1/language";return e({method:"GET",url:t,headers:{"x-qlik-capabilities":"about"},timeout:3e3}).then(function(e){return e.data["accept-language"]})}function d(){return r.getFlag("USE_LOCALE_SERVICE")?c():u()}function f(e){var i=n.p+"assets/external/dragomanjs/";var r=i.replace(/\?+\d+/g,"");var c={path:r,fallbackLanguage:s,supportedLocales:l};var u=t.extend({},c,e);u="undefined"!==typeof e&&"object"===o(e)?t.extend({},c,e):c;return a.init(u)}function p(e){return d().then(function(n){e=t.extend({},e,{requestedLocales:n.toString()});return f(e)}).catch(function(){return f(e)})}return{init:p,translate:a.translate,locale:a.locale,format:a.format,parse:a.parse,defaultLocale:s,supportedLocales:l}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={CACHE:Object.create(null)};e.string=function(t){var n=e.CACHE[t]||(t+"").normalize("NFKC");e.CACHE[t]=n;return n};e.array=function(t){return t.map(function(t){return e.string(t)})};e.exist=function(t,n){t=e.string(t);n=e.array(n);return n.indexOf(t)>-1};e.find=function(t,n,i){t=e.string(t);var r=e.array(n);return(i?r:n).filter(function(e,n){return r[n].indexOf(t)>-1})};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(609),n(254),n(117),n(89),n(90)],r=function(e,t,n,i,r){var o={},a,s,l;a=e.extend("App",{init:function e(n,r,o,a,l){var c=this;o&&s||(s=c);c.rpcOptions=r||{};c.rpcOptions.onError=a;c.rpcOptions.onWarning=l;c.session=t.get(n,r);c.session.modelCache[n]=i.resolve(c);c.waitForOpen=new i;c._super({id:n,session:c.session,checkCreate:true});try{c.open().then(function(){c.waitForOpen.resolve(c)},function(e){c.waitForOpen.reject({error:e})})}catch(e){c.waitForOpen.reject({isHandled:false,error:e})}},open:function e(){var t=this;t.session.Error.bind(function(e){setTimeout(function(){e.error&&!e.error.isHandled&&window.console.log("Error from Engine:",e)},1e3)});function i(){t.enigmaModel=t.session.__enigmaApp;t.handle=t.enigmaModel.handle;t.engineApp=n.bootstrap(t.enigmaModel);t.engineApp.name=t.id;t.enigmaModel.engineApp=t.engineApp;a.current===t&&n.setCurrentApp(t.engineApp);t.bindToRPC()}return t.session.enigmaPromise.then(i)},close:function e(t){delete o[this.cacheId];this.session.close();if(s===this){s=void 0;l=true}return this._super(t)},createSessionObject:function e(t){return this.rpc("CreateSessionObject","qReturn",[t])},createSessionVariable:function e(t){return this.rpc("CreateSessionVariable","qReturn",[t])},doSave:function e(){return this.rpc("DoSave",null)},getProperties:function e(){return this._super("GetAppProperties")},setProperties:function e(t){return this._super(t,"SetAppProperties")},checkExpression:function e(t,n){var i=[t];n&&i.push(n);return this.rpc("CheckExpression",null,i)},checkNumberOrExpression:function e(t){return this.rpc("CheckNumberOrExpression",null,[t])},evaluateExpression:function e(t){return this.rpc("Evaluate","qReturn",[t])},getConfiguration:function e(){return this.session.rpc({method:"GetConfiguration",handle:-1,params:[]}).then(function(e){return e.result.qConfig})},getVersion:function e(){return this.session.rpc({method:"QvVersion",handle:-1,params:[]}).then(function(e){return e.result.qReturn})},getListOfFunctions:function e(){return this.session.rpc({method:"GetFunctions",handle:-1,params:[]}).then(function(e){return e.result.qFunctions})},getLocaleInfo:function e(){return this.rpc("GetLocaleInfo","qReturn")},getExpressions:function e(){return this.rpc("GetExpressions","qExpressions")},getStreams:function e(){var t=this;return t.streamsList?i.resolve(t.streamsList):this.session.rpc({method:"GetStreamList",handle:-1,params:[]}).then(function(e){t.streamsList=e.result.qStreamList;return t.streamsList})},getPublishableStreams:function e(){var t=this.getLayout();var n=this.getStreams();var r=new i;i.all({layout:t,streams:n}).then(function(e){var t=e.streams.filter(function(t){return e.layout.stream?t.qId===e.layout.stream.id&&-1!==t.privileges.indexOf("publish"):-1!==t.privileges.indexOf("publish")});r.resolve(t)});return r.promise},getMatchingFields:function e(t){return this.rpc("GetMatchingFields",null,[t])},getContentLibraries:function e(){return this.rpc("GetContentLibraries").then(function(e){return e.qList.qItems})},getLibraryContent:function e(t){return this.rpc("GetLibraryContent",null,[t]).then(function(e){return e.qList.qItems})},getMediaList:function e(){return this.rpc("GetMediaList").then(function(e){return e.qList.qItems})},findMatchingFields:function e(t,n){return this.rpc("FindMatchingFields",null,[t,n])},abortModal:function e(t){return this.enigmaModel.switchModalSelection(t)},switchModal:function e(t,n,r){this.enigmaModel.switchModalSelection(t&&t.enigmaModel,n,r);return i.resolve()},setModal:function e(t){this.enigmaModel.setModalSelection(t&&t.enigmaModel)},isModal:function e(){return this.enigmaModel.isInModalSelection()},publish:function e(t){return this.rpc("Publish",null,[t])}});Object.defineProperty(a,"current",{get:function e(){return s}});a.makeCacheId=function(e,t){var n=e.toLowerCase();if(t){n+=t.host?"/"+t.host:"/";n+=t.identity?"/"+t.identity:"/";n+=t.openWithoutData?"/openWithoutData":"/";n+=t.port?"/"+t.port:"/";n+=t.prefix?"/"+t.prefix:"/";n+=t.subpath?"/"+t.subpath:"/"}return n};a.get=function(e,t,n,r,o){if(!arguments.length&&l)return i.reject(new Error("The current app has been closed"));var s=a.getSync(e,t,n,r,o);return s.waitForOpen.promise};a.getSync=function(e,t,n,i,s){e=e||r.getParameterByName("app")||"?transient=";"undefined"===typeof t&&(t={});"string"!==typeof t.host&&(t.host=r.hostname);"string"!==typeof t.port&&(t.port=r.port);"string"!==typeof t.prefix&&(t.prefix="/"===r.basePath?"":r.basePath);"boolean"!==typeof t.isSecure&&(t.isSecure=r.isSecure);"string"!==typeof t.reloadURI&&(t.reloadURI=r.reloadURI);var l=a.makeCacheId(e,t);o[l]=o[l]||new a(e,t,n,i,s);var c=o[l];c.cacheId=l;return c};a.create=function(e,t){return t.rpc({method:"CreateApp",handle:-1,params:[e]}).then(function(e){return e.result})};a.remove=function(e,t){return t.rpc({method:"DeleteApp",handle:-1,params:[e]}).then(function(e){return e.result})};a.getList=function(e){return e.rpc({method:"GetDocList",handle:-1,params:[]}).then(function(e){return e.result.qDocList})};return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(93),n(89),n(115),n(153),n(90),n(124),n(10)],r=function(e,t,n,i,r,o,a){var s=[];function l(n){return n?t.resolve(n.enigmaModel):e.getApp()}var c={};c.get=function(e,t){return l(t).then(function(t){return t.getObject(e)})};c.createTransient=function(e,t,i){var r,l,c,u=-1,d=s.length;r={that:e,app:t,props:i};for(l=0;l<d;l++)if(s[l].askFor.that===e&&s[l].askFor.app===t&&a.equals(s[l].askFor.props,i)){u=l;break}if(u>=0)return s[u].result;c=o.load().then(function(){return n.getType("listbox").getInitialProperties(i).then(function(e){return t.createSessionObject(e)})});s.push({askFor:r,result:c});return c};c.createTransientField=function(e,t,n){var o={};o.qListObjectDef=i.createFieldDimension(t);r.extend(true,o,n||{});return this.createTransient(this,e,o)};c.createTransientDimension=function(e,t,n){var o={};o.qListObjectDef=i.createLibraryDimension(t);r.extend(true,o,n||{});return this.createTransient(this,e,o)};return c}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){return e&&e.enigmaModel&&e.enigmaModel.app&&e.enigmaModel===e.enigmaModel.app.modalSelectionObject}function t(e){return e&&e.qSelectionInfo&&e.qSelectionInfo.qInSelections}function n(e,t){var n=false;return e.getField(t).then(function(e){return e.getNxProperties().then(function(e){return e.qOneAndOnlyOne||n})})}function i(e){return e.getAppLayout().then(function(e){return["$"].concat(e.qStateNames)})}function r(e,t){var n=!!e.qOneAndOnlyOne;var i=!!t.qOneAndOnlyOne;if(n===i)return e.qSortIndex-t.qSortIndex;return n?-1:1}function o(e){return e.filter(function(e){return!e.qOneAndOnlyOne&&!e.qLocked})}function a(e){return(e||[]).filter(function(e){return o(e.qSelectionObject.qSelections).length})}return{isModalSelectionModel:e,isInSelection:t,isSingleSelect:n,getSelectionStates:i,sortSelections:r,getClearableItems:o,getClearableStates:a}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11)],r=function(e){var t={},n,i,r,o,a=false,s=e.Deferred();t.parse=function(e){n=e.userId;i=e.userDirectory;a=e.mustAuthenticate;o=e.loginUri;r=e.logoutUri;true===a&&e.loginUri&&(window.location.href=e.loginUri);s.resolve(this)};t.onDataReceived=s.promise();Object.defineProperties(t,{userId:{get:function e(){return n}},userDirectory:{get:function e(){return i}},mustAuthenticate:{get:function e(){return a}},loginUri:{get:function e(){return o}},logoutUri:{get:function e(){return r}}});return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(153),n(148),n(161),n(186),n(399),n(49),n(157),n(229)],r=function(e,t,n,i,r,o,a){function s(t,s,l,c){var u;if(o.getFlag("DISABLE_AUTO_CHART")||a.isVariableDefined("DISABLE_AUTO_CHART")||c&&c.shiftKey||!t.classifications&&!l.isDerived){u=e.createFieldDimension(t.qName);e.autoSortDimension(u,[t]);return{id:"newObject",args:{template:"filterpane",children:[e.createDefaultListBox(u,n.trimAutoCalendarName(t.qName))],init:{}}}}var d={id:"newObject",args:{template:"auto-chart",init:{qHyperCubeDef:{qDimensions:[],qMeasures:[],qInterColumnSortOrder:[0]}},annotatedFields:s}};if(i.isMeasure(t.classifications))return r.getAggregationForFieldItem(t).then(function(e){d.args.init.qHyperCubeDef.qMeasures.push({qDef:{qDef:i.getMeasureExpression(t.qName,e)},qSortBy:{qSortByNumeric:-1,qSortByLoadOrder:1}});return d});var f={qDef:{qFieldDefs:[t.qName],qSortCriterias:[{qSortByLoadOrder:1}]}};d.args.init.qHyperCubeDef.qDimensions.push(f);return d}function l(e){var t=[];for(var i=0;i<e.length;++i){var r=e[i];r.isDateField=u(r);r.isGeoField=d(r);t.push(r);if(r.qDerivedFieldData)for(var o=0;o<r.qDerivedFieldData.qDerivedFieldLists.length;++o){var a=r.qDerivedFieldData.qDerivedFieldLists[o];for(var s=0;s<a.qFieldDefs.length;++s){var l=a.qFieldDefs[s];t.push({qName:l.qName,displayName:n.trimAutoCalendarName(l.qName),qSrcTables:r.qSrcTables,qTags:l.qTags,isDerived:true,isDerivedFromDate:r.isDateField,sourceField:r.qName,derivedDefinitionName:a.qDerivedDefinitionName})}}}return t}function c(e,t,i){var r=[];if(t)for(var o=0;o<t.qDerivedFieldLists.length;++o){var a=t.qDerivedFieldLists[o];for(var l=0;l<a.qFieldDefs.length;++l){var c=a.qFieldDefs[l];r.push({id:c.qName,qName:c.qMethod,name:c.qName,displayName:n.trimAutoCalendarName(c.qName),qSrcTables:e.qSrcTables,srcTables:e.qSrcTables,qTags:c.qTags,tags:c.qTags,type:"field",isDerived:true,isDerivedFromDate:i,getDropOption:s.bind(null,c,null),sourceField:e.qName,derivedDefinitionName:a.qDerivedDefinitionName})}}return r}function u(e){if(e.qDerivedFieldData)return e.qTags.indexOf("$date")>-1||e.qTags.indexOf("$timestamp")>-1;return false}function d(e){return e.qTags.indexOf("$geoname")>-1}var f={create:function e(n,i){var r=n.map(function(e){var n=u(e);var r=d(e);var o=s.bind(null,e,null);var a=void 0;var l=void 0;var f=void 0;if(i){var p=i._getFields(e.qName,e.qSrcTables);if(p.length>0){a=i.getClassifications(e.qName,e.qSrcTables);l=i.getDataTypes(e.qName,e.qSrcTables);f=i.getDefaultAggregation(e.qName,e.qSrcTables)}o=s.bind(null,e,p);e["defaultAggregation"]=f;e["classifications"]=a;e["dataTypes"]=l}var h={id:e.qName,name:e.qName,type:"field",dataTypes:[],classifications:[],defaultAggregation:"",isDateField:n,isGeoField:r,srcTables:e.qSrcTables,sourceField:e.sourceField,calendarTemplateName:e.derivedDefinitionName,getDropOption:o,tags:e.qTags,icon:t.isDirectDiscoveryField(e)?"direct-discovery":"",iconTooltip:t.getTypeTranslationKey(e.qTags),derivedFields:e.qDerivedFieldData?c(e,e.qDerivedFieldData,n):[]};if(i){h.dataTypes=l;h.classifications=a;h.defaultAggregation=f}return h});return r},expand:l,createFromArray:function e(t,n){var i,r=[];for(i=0;i<t.length;i++){n&&(t[i].qName=t[i][n]);r.push({name:t[i].qName,type:"field",getDropOption:s.bind(null,t[i],null)})}return r},getTables:function e(t){var n=t;var i,r,o;o=[];for(i=0;i<n.length;++i)for(r=0;r<n[i].qSrcTables.length;++r)-1===o.indexOf(n[i].qSrcTables[r])&&o.push(n[i].qSrcTables[r]);return o}};return f}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(641),n(643)],r=function(){}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i;!(i=function(){function e(e,t){0===arguments.length?this.set(0,0):this.set(e,t)}e.prototype={toString:function e(){return this.x+" "+this.y},clone:function t(){return new e(this.x,this.y)},set:function e(t,n){this.x=t;this.y=n},equal:function e(t){return this.x===t.x&&this.y===t.y},closeTo:function e(t,n){if(!t)return false;return Math.abs(this.x-t.x)<n&&Math.abs(this.y-t.y)<n},distanceTo:function e(t){if(!t)return NaN;return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}};return e}.call(t,n,t,e),void 0!==i&&(e.exports=i))},function(e,t,n){"use strict";var i,r;!(i=[n(93),n(89),n(90)],r=function(e,t,n){function i(n){return n?t.resolve(n.enigmaModel):e.getApp()}var r={};r.get=function(e,t){return i(t).then(function(t){return t.getMeasure(e)})};r.create=function(e,t){return i(t).then(function(t){e.qInfo.qId=e.qInfo.qId||n.generateId();return t.createMeasure(e)})};r.remove=function(e,t){return i(t).then(function(t){return t.destroyMeasure(e)})};r.getList=function(e){return i(e).then(function(e){return e.getMeasureListObject()})};r.getListLayout=function(e){return r.getList(e).then(function(e){return e.getLayout()})};return r}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){return!!e.qTags&&-1!==e.qTags.indexOf("$dd_measure")}function t(e){return!!e.qTags&&-1!==e.qTags.indexOf("$dd_details")}function n(e){return!!e.qTags&&-1!==e.qTags.indexOf("$dd_dimension")}function i(e){return!!e.qTags&&-1!==e.qTags.indexOf("$directdiscovery")}function r(n){var i=n;n&&(i=n.filter(function(n){return!e(n)&&!t(n)}));return i}function o(i){var r="";var o={qTags:i};e(o)?r="DirectDiscovery.Measure":t(o)?r="DirectDiscovery.Details":n(o)&&(r="DirectDiscovery.Dimension");return r}return{isMeasure:e,isDetails:t,isDimension:n,removeMeasureAndDetailsFields:r,getTypeTranslationKey:o,isDirectDiscoveryField:i}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90),n(89),n(97),n(48)],r=function(e,t,n,i){function r(e,n){var i=new t;e.get(n).then(function(e){t.all({properties:e.getProperties(),layout:e.getLayout?e.getLayout():t.resolve()}).then(function(t){i.resolve({model:e,properties:t.properties,layout:t.layout})})});return i.promise}function o(t,n){t=t.map(function(t){return{name:t,matching:n&&e.match(t,n)}});t.sort(function(e,t){return e.matching&&!t.matching?-1:!e.matching&&t.matching?1:e.name.localeCompare(t.name)});return t}function a(e){var t=e.item;var n=e.query&&e.query.toLowerCase();var i=o(t.tags,n);return{query:n,name:t.name,tags:i}}function s(e,t,n,i){function r(){e(n);t()}return{action:r,icon:i.icon,disabled:i.disabled,title:i.title,tid:i.tid}}function l(e,t,n){return s(e,t,n,{icon:"bin",title:"Common.Delete",tid:"preview-delete-item"})}function c(e,t,n){return s(e,t,n,{icon:"lui-icon lui-icon--edit",title:"Common.Edit",tid:"preview-edit-item"})}function u(e,t,n){return s(e,t,n,{icon:"copy",title:"Common.Duplicate",tid:"preview-duplicate-item"})}function d(e,t,n,i,r){return s(e,t,n,{icon:"drop",title:i,tid:"preview-add-to-sheet",disabled:!r})}function f(e,t,n,i){return s(e,t,n,{icon:"drop",title:"library.addtosheet",tid:"preview-add-to-sheet",disabled:!i})}function p(e,t,n,i){return s(e,t,n,{icon:"expression",title:"contextMenu.addToMasterItems.AsMeasure",tid:"preview-add-as-measure",disabled:!i})}function h(e,t,n,i){return s(e,t,n,{icon:"box",title:"contextMenu.addToMasterItems.AsDimension",tid:"preview-add-as-dimension",disabled:!i})}function v(e,t,n,i){return s(e,t,n,{icon:"cogwheel",title:"field.settings.dialog.title",tid:"preview-field-settings",disabled:!i})}function g(e,t,n){return s(e,t,n,{icon:"code",title:"contextMenu.embed",tid:"7a71"})}function m(e,t){if(!t)return;e.alignTo=t;var n=e.alignTo.offset(),i=e.alignTo.parents("ul").outerWidth(),r=e.alignTo.outerHeight(),o=i+7,a=r/2;e.offset={x:n.left+o,y:n.top+a};e.position="centerRight"}function b(e){var t;var r=null;var o;function a(i,a,l){t=false;o=i;function c(c){if(t)return;r=e.createPreview({item:i,query:a,modelInfo:c,$element:l,closePreview:function e(t){t&&"qv-outside"===t.type&&(o=null);s()}});e.itemDialogHandler.openPreview(r);n.on("start.assets-preview",s);e.State.StateChanged.bind(s)}e.getSlowInfo?e.getSlowInfo(i).then(function(e){c(e)}):c()}function s(){if(r){r.close();e.itemDialogHandler.close();e.State.StateChanged.unbind(s);n.off("start.assets-preview",s);r=null;if(o){o.selected=false;o=null;i.$apply(i.$rootScope)}}t=true}return{open:a,close:s}}return{buttonDelete:l,buttonEdit:c,buttonDuplicate:u,buttonAddTo:d,buttonAddToSheet:f,buttonAddMeasure:p,buttonAddDimension:h,buttonFieldSettings:v,buttonEmbed:g,alignPreview:m,getBasePreviewInfo:a,getItemInformation:r,previewManagerFactory:b}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(93),n(89),n(144),n(48),n(678),n(679),n(680),n(681),n(682),n(94),n(683),n(107),n(166),n(91),n(455),n(96),n(685),n(49),n(686),n(99),n(500),n(425),n(710),n(712)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v,g,m,b,y,x,S){var w=null,q=null,C=[];function _(){if(q){q.close();q=null}}function I(e){if(C[e]){C[e].close();C[e]=null}}function E(e,t){t.preventDefault();var n=e.controller.previewText();e.codearea.contextApi.replaceSelection(n)}function D(e,t){t.preventDefault();e.codearea.contextApi.replaceSelection(e.controller.selectedFunction.value+"()");var n=e.codearea.contextApi.getCursor();n.ch+=-1;e.codearea.contextApi.setCursor(n)}function A(e,t){t.preventDefault();e.codearea.contextApi.replaceSelection(e.controller.selectedVariable.qName)}function T(e,t){t.preventDefault();"0"===e.controller.setExpressionOption?S.getCurrentSelections(e.controller.app,e.controller.selectedAlternateState).then(function(t){void 0!==t&&void 0!==t.qSetExpression&&""!==t.qSetExpression?e.codearea.contextApi.replaceSelection("{"+t.qSetExpression+"}"):void 0!==t&&void 0!==t.qSetExpression||M()}):e.controller.selectedBookmark&&S.getSelectionsFromBookmarkId(e.controller.app,e.controller.selectedBookmark.value,e.controller.selectedAlternateState).then(function(t){void 0!==t&&void 0!==t.qSetExpression&&""!==t.qSetExpression?e.codearea.contextApi.replaceSelection("{"+t.qSetExpression+"}"):void 0!==t&&void 0!==t.qSetExpression||M()})}function O(e,t){e.functionTipOptions={service:t,view:v}}function k(t,n,i,o){if(!i)return;if(q){s();return}i=i.replace(/\n/g," ");/^(input|textarea)$/i.test(document.activeElement.tagName)&&e.support.touch&&document.activeElement.blur();function a(){s();n.codearea.contextApi.focus()}function s(){e(document).off("keydown",a);e(document).off("mouseup",a);_()}q=r.getService("luiPopover").show({template:"<lui-popover><lui-popover-body><p>{{input.text}}</p></lui-popover-body></lui-popover>",input:{text:i},controller:["$element",function(e){e.css("z-index","1022")}],alignTo:o.target,closeOnEscape:true,closeOnOutside:true,dock:"top",autoFocus:false});q.closed.then(function(){s()});e(document).one("keydown",{self:this},a);e(document).one("mouseup",{self:this},a)}function L(e,t){var n={expression:e,validity:t.validity};return p.validateExpr(n,f)}function P(e){var t={};e.forEach(function(e){e.fglist.forEach(function(n){t[n]||(t[n]=[]);t[n].push(e.func)})});return t}function M(){var e=r.getService("qvAlertDialog");return e.show({title:h.get("ErrorDialog.Title"),message:h.get("ExpressionEditor.TooManySelections"),closeOnEscape:false})}function N(){var e={statusText:"",errorMsg:"",extraErrorMsg:"",status:"",expr:"",expandedExpr:"",codeArea:null};return e}var R=false;var F=b.getFlag("ADVANCED_EXPRESSION_EDITOR_PART3");var $=F&&b.getFlag("ALT_STATE_ONE");var j={template:o,sections:{fields:{key:"fields",translation:"ExpressionEditor.Fields",template:a,state:{sectionExpanded:true,table:{label:"",value:""},field:{label:"",value:""},aggregfunc:{label:"",value:""},setExpressionCheckBox:false,distinctCheckBox:"",totalCheckBox:""},expanded:true},functions:{key:"functions",translation:"ExpressionEditor.Functions",template:s,state:{sectionExpanded:false,functionCategory:{label:"",value:"ALL"},funct:{label:"",value:""}},expanded:false},setExpressions:{key:"setExpressions",translation:"ExpressionEditor.SetExpressions",template:c,state:{sectionExpanded:false,setExpressionOption:"0",selectedBookmark:"",selectedAlternateState:""},expanded:false},variables:{key:"variables",translation:"ExpressionEditor.Variables",template:l,state:{sectionExpanded:false,variable:"",sysVarsCheckBox:false,showVariablesFirstTime:true},expanded:false}},controller:["$scope","$element","$timeout",function(t,n,i){t.stringLimits=f;t.controller=t.input.controller;t.codearea={content:t.input.expr};t.validity={expression:true};t.initializeToolbar=function(){t.undoDisabled=false;t.redoDisabled=false};t.exposeSetExpression=b.getFlag("SET_EXPRESSION_CHECKBOX");t.isAdvancedPart3=b.getFlag("ADVANCED_EXPRESSION_EDITOR_PART3");t.sections=j.sections;t.items=[j.sections.fields,j.sections.functions,j.sections.setExpressions,j.sections.variables];t.$watch("controller.helpmodeActive",function(){if(t.controller.helpmodeActive){t.helpmodeTooltip="Tooltip.HelpMode.Exit";if(t.isAdvancedPart3){t.undoDisabled=true;t.redoDisabled=true}}else{t.helpmodeTooltip="Tooltip.HelpMode.Enter";if(t.isAdvancedPart3){t.undoDisabled=false;t.redoDisabled=false}}});t.$watch("controller.selectedFunctionCategory",function(e){t.sections.functions.state.functionCategory=e;t.controller.setFunctionCategoryFilter(e)});t.$watch("controller.selectedFunction",function(e){t.sections.functions.state.funct=e;e&&(t.controller.selectedFunctionTip=t.input.expressionBnfModel.getFunctionTip(e.value))});t.$watch("controller.selectedTable",function(e){t.sections.fields.state.table=e;t.controller.setTableFilter(e)});t.$watch("controller.selectedField",function(e){t.sections.fields.state.field=e});t.$watch("controller.selectedFunction",function(e){t.sections.fields.state.funct=e});t.$watch("controller.selectedCommonFunction",function(e){t.sections.fields.state.aggregfunc=e});t.$watch("controller.currentOption",function(e){if(t.exposeSetExpression){t.sections.fields.state.setExpressionCheckBox=e;e&&S.getCurrentSelections(t.app,t.controller.stateName).then(function(n){if(void 0!==n&&void 0!==n.qSetExpression&&""!==n.qSetExpression)t.controller.setCurrentSelections(n.qSetExpression);else if(void 0===n||void 0===n.qSetExpression){t.controller.currentOption=!e;t.sections.fields.state.setExpressionCheckBox=!e;M()}else{t.controller.currentOption=!e;t.items[0].state.setExpressionCheckBox=!e}}).catch(function(){t.controller.currentOption=!e;t.sections.fields.state.setExpressionCheckBox=!e})}});t.$watch("controller.distinctOption",function(e){t.sections.fields.state.distinctCheckBox=e});t.$watch("controller.totalOption",function(e){t.sections.fields.state.totalCheckBox=e});t.$watch("controller.showSystemVars",function(e){t.sections.variables.state.sysVarsCheckBox=e;t.controller.setSysVarsFilter()});t.$watch("controller.selectedVariable",function(e){t.sections.variables.state.variable=e;e?e.qDefinition&&0===e.qDefinition.indexOf("=")?t.app.evaluate(e.qDefinition).then(function(n){t.controller.showVariableInfo(e.qDefinition,n)}):t.controller.showVariableInfo(e.qDefinition,e.qDefinition):t.controller.showVariableInfo("","")});t.enableTouchOverlay=g.utils.touch;t.insertTextHandler=E.bind(null,t);t.insertFunctionHandler=D.bind(null,t);t.insertVariableHandler=A.bind(null,t);t.insertSetExpressionHandler=T.bind(null,t);t.info=N();t.showErrorMessage=k.bind(null,n,t);t.qlikviewReloadScriptMode={name:"qlikviewscript",service:t.input.expressionBnfModel};t.helpModeOptions={syntax:"chartsyntax",service:t.input.expressionBnfModel};t.autocompleteOptions={completeSingle:false,service:t.input.expressionBnfModel};O(t,t.input.expressionBnfModel);t.cancel=function(){t.close();t.$destroy()};function o(e){return e.replace(/(\r\n|\r|\n)/,"\r\n")}t.confirm=function(){var e=o(t.codearea.content);var n=L(e,t);(n||t.input.allowEmpty&&""===e)&&t.close(e)};u.StateChanged.bind(t.cancel);function a(e){t.info.codeArea=t.codearea;e=o(e);t.validity.expression||L(e,t)}x.treatAsDesktop()&&i(function(){i(function(){t.codearea.contextApi.focus();t.codearea.contextApi.setCursor(t.codearea.contextApi.lineCount(),0)})});t.$watch("codearea.content",a);t.openPopover=function(e){var n=e.currentTarget.dataset.context;w&&C&&w!==n&&I(w);w=n;if(!C[n]){C[n]=r.getService("luiPopover").show({template:y.template,controller:y.controller,alignTo:e.currentTarget,input:{context:n,ctrl:t.controller,closePopover:I,items:t.controller.getData(w),setSelectedItem:t.controller.setSelectedItem},position:"bottom",closeOnEscape:true});C[n].closed.then(function(){I(n)})}};i(function(){e(".qv-expandable-list-component").on("scroll",function(){I()})});t.closePopoverIfOpen=function(t){var n=e(t.currentTarget).parents(".popover-wrapper").length>0,i=e(t.target).hasClass("expression-editor-dropdown"),r=e(t.target).hasClass("label");n||i||r||I(w)};t.$on("$destroy",function(){_();I(w);e(".qv-expandable-list-component").off("scroll");R=false;u.StateChanged.unbind(t.cancel)});t.onHelpmode=function(){t.controller.helpmodeActive=!t.controller.helpmodeActive;e(document.body).toggleClass("help-mode",t.controller.helpmodeActive)};function s(){t.controller.helpmodeActive=false}t.onUndo=function(){s();t.codearea.contextApi.undo()};t.onRedo=function(){s();t.codearea.contextApi.redo()};t.initializeToolbar();t.changeCurrentSetExpressionOption=function(e){if(!F)return;t.sections.setExpressions.state.setExpressionOption=e;t.controller.selectedBookmark="";t.controller.selectedAlternateState="";"0"===e?$&&t.controller.currentSelectionsAlternateStates.length>0&&(t.controller.selectedAlternateState=t.controller.currentSelectionsAlternateStates[0].value):t.controller.bookmarks.length>0&&(t.controller.selectedBookmark=t.controller.bookmarks[0])};t.$watch("controller.selectedBookmark",function(e){if(!F)return;t.sections.setExpressions.state.selectedBookmark=e;$&&e&&e.alternateStates.length>0&&(t.controller.isStateInArray(e.alternateStates,t.controller.selectedAlternateState)||(t.controller.selectedAlternateState=e.alternateStates[0].value))});t.$watch("controller.selectedAlternateState",function(e){$&&(t.sections.setExpressions.state.selectedAlternateState=e)})}]};function H(e){var o=e.app?n.resolve(e.app.enigmaModel):t.getApp();return o.then(function(t){return n.all({bnf:m.get(t),fields:t.getFieldList(),variables:t.getVariableList(),layout:t.getLayout(),bookmarks:t.getBookmarkList()}).then(function(o){if(R)return n.reject();var a=o.bnf;var s=i.expand(o.fields);var l=P(a.getFunctionsAndCategories());var c=String(e.expr||"");var u={title:e.title,allowEmpty:e.allowEmpty,labels:e.labels,expr:c,mode:e.mode,controller:d.create({fields:s,sections:j.sections,functions:l,variables:o.variables,bookmarks:o.bookmarks,translator:h,exposeSetExpression:b.getFlag("SET_EXPRESSION_CHECKBOX"),isAdvancedPart3:F,isAlternateState:$,showAlternateStates:$&&t.layout.qStateNames.length>0,stateName:e.stateName,published:true===o.layout.published,app:t}),app:t,expressionBnfModel:a};R=true;var f=r.getService("luiDialog").show({template:j.template,controller:j.controller,input:u,closeOnOutside:false,showArrow:false});return f.closed.then(function(e){return void 0===e?n.reject():e})})})}function V(){return R}return{_insertTextHandler:E,show:H,isOpen:V}}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){var i=n(11);var r=n(54);var o=n(615);(function(e,t){var n=this,r;r=n.SirTrevor={};r.DEBUG=false;r.SKIP_VALIDATION=false;r.version="0.3.0";r.LANGUAGE="en";function a(t){return t instanceof e?t:e(t)}r.DEFAULTS={defaultType:false,spinner:{className:"st-spinner",lines:9,length:8,width:3,radius:6,color:"#000",speed:1.4,trail:57,shadow:false,left:"50%",top:"50%"},blockLimit:0,blockTypeLimits:{},required:[],uploadUrl:"/attachments",baseImageUrl:"/sir-trevor-uploads/",errorsContainer:void 0};r.BlockMixins={};r.Blocks={};r.Formatters={};r.instances=[];r.Events=o;var s=false;var l={bound:[],_bindFunctions:function(){this.bound.length>0&&t.bindAll.apply(null,t.union([this],this.bound))}};var c={tagName:"div",className:"sir-trevor__view",attributes:{},$:function(e){return this.$el.find(e)},render:function(){return this},destroy:function(){t.isUndefined(this.stopListening)||this.stopListening();this.$el.remove()},_ensureElement:function(){if(this.el)this._setElement(this.el);else{var n=t.extend({},t.result(this,"attributes")),i;this.id&&(n.id=this.id);this.className&&(n["class"]=this.className);if(n.html){i=n.html;delete n.html}var r=e("<"+this.tagName+">").attr(n);i&&r.html(i);this._setElement(r)}},_setElement:function(e){this.$el=a(e);this.el=this.$el[0];return this}};function u(e,t){var n=-1,i=-1,r=t.length,o=e.length;for(var a=0;a<r;a++){-1==n&&e.substr(a,1)!=t.substr(a,1)&&(n=a-1);-1==i&&e.substr(o-a-1,1)!=t.substr(r-a-1,1)&&(i=a)}return{result:t.substr(n,r-i-n+1),pos1:n,pos2:i}}(function(e){function t(e){e.preventDefault()}function n(t){t.originalEvent.dataTransfer.dropEffect="copy";e(t.currentTarget).addClass("st-drag-over");t.preventDefault()}function i(t){e(t.currentTarget).removeClass("st-drag-over");t.preventDefault()}e.fn.dropArea=function(){this.bind("dragenter",t).bind("dragover",n).bind("dragleave",i);return this};e.fn.noDropArea=function(){this.unbind("dragenter").unbind("dragover").unbind("dragleave");return this};e.fn.caretToEnd=function(){var e,t;e=document.createRange();e.selectNodeContents(this[0]);e.collapse(false);t=window.getSelection();t.removeAllRanges();t.addRange(e);return this}})(i);var d=function(e,n){var i=this;var r;r=e&&t.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)};t.extend(r,i,n);var o=function(){this.constructor=r};o.prototype=i.prototype;r.prototype=new o;e&&t.extend(r.prototype,e);r.__super__=i.prototype;return r};r.log=function(e){!t.isUndefined(console)&&r.DEBUG&&console.log(e)};r.Locales={en:{general:{delete:"Delete?",drop:"Drag __block__ here",paste:"Or paste URL here",upload:"...or choose a file",close:"close",position:"Position",wait:"Please wait...",link:"Enter a link"},errors:{title:"You have the following errors:",validation_fail:"__type__ block is invalid",block_empty:"__name__ must not be empty",type_missing:"You must have a block of type __type__",required_type_empty:"A required block type __type__ is empty",load_fail:"There was a problem loading the contents of the document"},blocks:{text:{title:"Text"},list:{title:"List"},quote:{title:"Quote",credit_field:"Credit"},image:{title:"Image",upload_error:"There was a problem with your upload"},video:{title:"Video"},embedly:{title:"Embedly",fetch_error:"There was a problem fetching your embed",key_missing:"An Embedly API key must be present"},heading:{title:"Heading"}}}};if(void 0===window.i18n){r.log("Using i18n stub");window.i18n={t:function(e,n){var i=e.split(":"),o,a,s,l;a=r.Locales[r.LANGUAGE];for(l=0;l<i.length;l++){s=i[l];t.isUndefined(a[s])||(a=a[s])}o=a;if(!t.isString(o))return"";o.indexOf("__")>=0&&t.each(n,function(e,t){o=o.replace("__"+t+"__",e)});return o}}}else{r.log("Using i18next");i18n.init({resStore:r.Locales,fallbackLng:r.LANGUAGE,ns:{namespaces:["general","blocks"],defaultNs:"general"}})}(function(e,t,n){function i(e,n){var i=t.createElement(e||"div"),r;for(r in n)i[r]=n[r];return i}function r(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function o(e,t,n,i){var r=["opacity",t,~~(100*e),n,i].join("-"),o=.01+n/i*100,a=Math.max(1-(1-e)/t*(100-o),e),s=f.substring(0,f.indexOf("Animation")).toLowerCase(),l=s&&"-"+s+"-"||"";return d[r]||(p.insertRule("@"+l+"keyframes "+r+"{0%{opacity:"+a+"}"+o+"%{opacity:"+e+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+e+"}100%{opacity:"+a+"}}",0),d[r]=1),r}function a(e,t){var i=e.style,r,o;if(i[t]!==n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(o=0;o<u.length;o++){r=u[o]+t;if(i[r]!==n)return r}}function s(e,t){for(var n in t)e.style[a(e,n)||n]=t[n];return e}function l(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)e[r]===n&&(e[r]=i[r])}return e}function c(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}var u=["webkit","Moz","ms","O"],d={},f,p=function(){var e=i("style");return r(t.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),h={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},v=function e(t){if(!this.spin)return new e(t);this.opts=l(t||{},e.defaults,h)};v.defaults={},l(v.prototype,{spin:function(e){this.stop();var t=this,n=t.opts,r=t.el=s(i(0,{className:n.className}),{position:"relative",zIndex:n.zIndex}),o=n.radius+n.length+n.width,a,l;e&&(e.insertBefore(r,e.firstChild||null),l=c(e),a=c(r),s(r,{left:("auto"==n.left?l.x-a.x+(e.offsetWidth>>1):n.left+o)+"px",top:("auto"==n.top?l.y-a.y+(e.offsetHeight>>1):n.top+o)+"px"})),r.setAttribute("aria-role","progressbar"),t.lines(r,t.opts);if(!f){var u=0,d=n.fps,p=d/n.speed,h=(1-n.opacity)/(p*n.trail/100),v=p/n.lines;!function e(){u++;for(var i=n.lines;i;i--){var o=Math.max(1-(u+i*v)%p*h,n.opacity);t.opacity(r,n.lines-i,o,n)}t.timeout=t.el&&setTimeout(e,~~(1e3/d))}()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=n),this},lines:function(e,t){function n(e,n){return s(i(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*a+t.rotate)+"deg) translate("+t.radius+"px,0)",borderRadius:(t.width>>1)+"px"})}var a=0,l;for(;a<t.lines;a++)l=s(i(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:f&&o(t.opacity,t.trail,a,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&r(l,s(n("#000","0 0 4px #000"),{top:"2px"})),r(e,r(l,n(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),!function(){function e(e,t){return i("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}var t=s(i("group"),{behavior:"url(#default#VML)"});!a(t,"transform")&&t.adj?(p.addRule(".spin-vml","behavior:url(#default#VML)"),v.prototype.lines=function(t,n){function i(){return s(e("group",{coordsize:l+" "+l,coordorigin:-a+" "+-a}),{width:l,height:l})}function o(t,o,l){r(u,r(s(i(),{rotation:360/n.lines*t+"deg",left:~~o}),r(s(e("roundrect",{arcsize:1}),{width:a,height:n.width,left:n.radius,top:-n.width>>1,filter:l}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var a=n.length+n.width,l=2*a,c=2*-(n.width+n.length)+"px",u=s(i(),{position:"absolute",top:c,left:c}),d;if(n.shadow)for(d=1;d<=n.lines;d++)o(d,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(d=1;d<=n.lines;d++)o(d);return r(t,u)},v.prototype.opacity=function(e,t,n,i){var r=e.firstChild;i=i.shadow&&i.lines||0,r&&t+i<r.childNodes.length&&(r=r.childNodes[t+i],r=r&&r.firstChild,r=r&&r.firstChild,r&&(r.opacity=n))}):f=a(t,"animation")}(),e.Spinner=v})(window,document);r.editorStore=function(e,n,i){var o;i=i||{};switch(n){case"create":var a=t.trim(e.$el.val());e.dataStore={data:[]};if(a.length>0)try{var s=JSON.parse(a);t.isUndefined(s.data)||(e.dataStore=s)}catch(t){e.errors.push({text:i18n.t("errors:load_fail")});e.renderErrors();r.log("Sorry there has been a problem with parsing the JSON");r.log(t)}break;case"reset":e.dataStore={data:[]};break;case"add":if(i.data){e.dataStore.data.push(i.data);o=e.dataStore}break;case"save":e.$el.val(e.dataStore.data.length>0?JSON.stringify(e.dataStore):"");break;case"read":o=e.dataStore;break}if(o)return o};r.Submittable=function(e){this.$form=e;this.intialize()};t.extend(r.Submittable.prototype,{intialize:function(){this.$submitBtn=this.$form.find("input[type='submit']");var n=[];t.each(this.$submitBtn,function(t){n.push(e(t).attr("value"))});this.submitBtnTitles=n;this.canSubmit=true;this.globalUploadCount=0;this._bindEvents()},setSubmitButton:function(e,t){this.$submitBtn.attr("value",t)},resetSubmitButton:function(){t.each(this.$submitBtn,function(t,n){e(t).attr("value",this.submitBtnTitles[n])},this)},onUploadStart:function(e){this.globalUploadCount++;r.log("onUploadStart called "+this.globalUploadCount);1===this.globalUploadCount&&this._disableSubmitButton()},onUploadStop:function(e){this.globalUploadCount=this.globalUploadCount<=0?0:this.globalUploadCount-1;r.log("onUploadStop called "+this.globalUploadCount);0===this.globalUploadCount&&this._enableSubmitButton()},onError:function(e){r.log("onError called");this.canSubmit=false},_disableSubmitButton:function(e){this.setSubmitButton(null,e||i18n.t("general:wait"));this.$submitBtn.attr("disabled","disabled").addClass("disabled")},_enableSubmitButton:function(){this.resetSubmitButton();this.$submitBtn.removeAttr("disabled").removeClass("disabled")},_events:{disableSubmitButton:"_disableSubmitButton",enableSubmitButton:"_enableSubmitButton",setSubmitButton:"setSubmitButton",resetSubmitButton:"resetSubmitButton",onError:"onError",onUploadStart:"onUploadStart",onUploadStop:"onUploadStop"},_bindEvents:function(){t.forEach(this._events,function(e,t){r.EventBus.on(t,this[e],this)},this)}});r.fileUploader=function(n,i,o,a){var s=[n.blockID,(new Date).getTime(),"raw"].join("-");var l=new FormData;l.append("attachment[name]",i.name);l.append("attachment[file]",i);l.append("attachment[uid]",s);n.resetMessages();var c=function(e){r.log("Upload callback called");!t.isUndefined(o)&&t.isFunction(o)&&t.bind(o,n)(e)};var u=function(e,i,o){r.log("Upload callback error called");!t.isUndefined(a)&&t.isFunction(a)&&t.bind(a,n)(i)};var d=e.ajax({url:r.DEFAULTS.uploadUrl,data:l,cache:false,contentType:false,processData:false,dataType:"json",type:"POST"});n.addQueuedItem(s,d);d.done(c).fail(u).always(t.bind(n.removeQueuedItem,n,s));return d};var f=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;t.mixin({isURI:function(e){return f.test(e)},titleize:function(e){if(null===e)return"";e=String(e).toLowerCase();return e.replace(/(?:^|\s|-)\S/g,function(e){return e.toUpperCase()})},classify:function(e){return t.titleize(String(e).replace(/[\W_]/g," ")).replace(/\s/g,"")},classifyList:function(e){return t.map(e,function(e){return t.classify(e)})},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},underscored:function(e){return t.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},reverse:function(e){return e.split("").reverse().join("")},flattern:function(e){var n={};t.each(e,function(i,r){n[t.isArray(e)?i:r]=true});return n},to_slug:function(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}});r.toHTML=function(e,n){n=t.classify(n);var i=e,o="Text"===n;t.isUndefined(o)&&(o=false);o&&(i="<div>"+i);i=i.replace(/^\> (.+)$/gm,"$1");var a,s;for(a in r.Formatters)if(r.Formatters.hasOwnProperty(a)){s=r.Formatters[a];!t.isUndefined(s.toHTML)&&t.isFunction(s.toHTML)&&(i=s.toHTML(i))}var l;if(r.Blocks.hasOwnProperty(n)){l=r.Blocks[n];!t.isUndefined(l.prototype.toHTML)&&t.isFunction(l.prototype.toHTML)&&(i=l.prototype.toHTML(i))}if(o){i=i.replace(/\n\n/gm,"</div><div><br></div><div>");i=i.replace(/\n/gm,"</div><div>")}i=i.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\n/g,"<br>").replace(/\*\*/,"").replace(/__/,"");i=i.replace(/\\\*/g,"*").replace(/\\\[/g,"[").replace(/\\\]/g,"]").replace(/\\\_/g,"_").replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\\~/g,"~").replace(/\\\-/g,"-");o&&(i+="</div>");return i};r.toMarkdown=function(e,n){n=t.classify(n);var i=e;i=i.replace(/( class=(")?Mso[a-zA-Z]+(")?)/g,"").replace(/<!--(.*?)-->/g,"").replace(/\/\*(.*?)\*\//g,"").replace(/<(\/)*(meta|link|\\?xml:|st1:|o:)(.*?)>/gi,"");var o=["style","script","applet","embed","noframes","noscript"],a,s;for(s=0;s<o.length;s++){a=new RegExp("<"+o[s]+".*?"+o[s]+"(.*?)>","gi");i=i.replace(a,"")}i=i.replace(/\*/g,"\\*").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\_/g,"\\_").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\~/g,"\\~").replace(/\-/g,"\\-");function l(e,n,i){t.isUndefined(i)&&(i="");return"**"+n.replace(/<(.)?br(.)?>/g,"")+"**"+i}function c(e,n,i){t.isUndefined(i)&&(i="");return"_"+n.replace(/<(.)?br(.)?>/g,"")+"_"+i}i=i.replace(/\u200b/g,"").replace(/<(\w+)(?:\s+\w+="[^"]+(?:"\$[^"]+"[^"]+)?")*>\s*<\/\1>/gim,"").replace(/\n/gm,"");var u,d;for(u in r.Formatters)if(r.Formatters.hasOwnProperty(u)){d=r.Formatters[u];!t.isUndefined(d.toMarkdown)&&t.isFunction(d.toMarkdown)&&(i=d.toMarkdown(i))}i=i.replace(/([^<>]+)(<div>)/g,"$1\n$2").replace(/<div><div>/g,"\n<div>").replace(/(?:<div>)([^<>]+)(?:<div>)/g,"$1\n").replace(/(?:<div>)(?:<br>)?([^<>]+)(?:<br>)?(?:<\/div>)/g,"$1\n").replace(/<\/p>(?!$)/g,"\n").replace(/<(.)?br(.)?>/g,"\n");i=i.replace(/&nbsp;/g," ");var f;if(r.Blocks.hasOwnProperty(n)){f=r.Blocks[n];!t.isUndefined(f.prototype.toMarkdown)&&t.isFunction(f.prototype.toMarkdown)&&(i=f.prototype.toMarkdown(i))}i=i.replace(/<\/?[^>]+(>|$)/g,"");return i};r.EventBus=t.extend({},r.Events);r.BlockMixins.Ajaxable={mixinName:"Ajaxable",ajaxable:true,initializeAjaxable:function(){this._queued=[]},addQueuedItem:function(e,t){r.log("Adding queued item for "+this.blockID+" called "+e);r.EventBus.trigger("onUploadStart");this._queued.push({name:e,deffered:t})},removeQueuedItem:function(e){r.log("Removing queued item for "+this.blockID+" called "+e);r.EventBus.trigger("onUploadStop");this._queued=t.reject(this._queued,function(t){return t.name==e})},hasItemsInQueue:function(){return this._queued.length>0},resolveAllInQueue:function(){t.each(this._queued,function(e){r.log("Aborting queued request: "+e.name);e.deffered.abort()},this)}};r.BlockMixins.Controllable={mixinName:"Controllable",initializeControllable:function(){r.log("Adding controllable to block "+this.blockID);this.$control_ui=e("<div>",{class:"st-block__control-ui"});t.each(this.controls,function(e,n){this.addUiControl(n,t.bind(e,this))},this);this.$inner.append(this.$control_ui)},getControlTemplate:function(t){return e("<a>",{"data-icon":t,class:"st-icon st-block-control-ui-btn st-block-control-ui-btn--"+t})},addUiControl:function(e,t){this.$control_ui.append(this.getControlTemplate(e));this.$control_ui.on("click",".st-block-control-ui-btn--"+e,t)}};r.BlockMixins.Droppable={mixinName:"Droppable",valid_drop_file_types:["File","Files","text/plain","text/uri-list"],initializeDroppable:function(){r.log("Adding droppable to block "+this.blockID);this.drop_options=t.extend({},r.DEFAULTS.Block.drop_options,this.drop_options);var n=e(t.template(this.drop_options.html,{block:this}));this.$editor.hide();this.$inputs.append(n);this.$dropzone=n;this.$dropzone.dropArea().bind("drop",t.bind(this._handleDrop,this));this.$inner.addClass("st-block__inner--droppable")},_handleDrop:function(n){n.preventDefault();n=n.originalEvent;var i=e(n.target),o=n.dataTransfer.types,a,s=[];i.removeClass("st-dropzone--dragover");!t.isUndefined(o)&&t.some(o,function(e){return t.include(this.valid_drop_file_types,e)},this)&&this.onDrop(n.dataTransfer);r.EventBus.trigger("block:content:dropped")}};r.BlockMixins.Fetchable={mixinName:"Fetchable",initializeFetchable:function(){this.withMixin(r.BlockMixins.Ajaxable)},fetch:function(n,i,r){var o=t.uniqueId(this.blockID+"_fetch"),a=e.ajax(n);this.resetMessages();this.addQueuedItem(o,a);t.isUndefined(i)||a.done(t.bind(i,this));t.isUndefined(r)||a.fail(t.bind(r,this));a.always(t.bind(this.removeQueuedItem,this,o));return a}};r.BlockMixins.Pastable={mixinName:"Pastable",initializePastable:function(){r.log("Adding pastable to block "+this.blockID);this.paste_options=t.extend({},r.DEFAULTS.Block.paste_options,this.paste_options);this.$inputs.append(t.template(this.paste_options.html,this));this.$(".st-paste-block").bind("click",function(){e(this).select()}).bind("paste",this._handleContentPaste).bind("submit",this._handleContentPaste)}};r.BlockMixins.Uploadable={mixinName:"Uploadable",uploadsCount:0,initializeUploadable:function(){r.log("Adding uploadable to block "+this.blockID);this.withMixin(r.BlockMixins.Ajaxable);this.upload_options=t.extend({},r.DEFAULTS.Block.upload_options,this.upload_options);this.$inputs.append(t.template(this.upload_options.html,this))},uploader:function(e,t,n){return r.fileUploader(this,e,t,n)}};r.BlockPositioner=function(){var e=["<div class='st-block-positioner__inner'>","<span class='st-block-positioner__selected-value'></span>","<select class='st-block-positioner__select'></select>","</div>"].join("\n");var n=function(e,t){this.$block=e;this.instanceID=t;this.total_blocks=0;this._ensureElement();this._bindFunctions();this.initialize()};t.extend(n.prototype,l,c,{bound:["onBlockCountChange","onSelectChange","toggle","show","hide"],className:"st-block-positioner",visibleClass:"st-block-positioner--is-visible",initialize:function(){this.$el.append(e);this.$select=this.$(".st-block-positioner__select");this.$select.on("change",this.onSelectChange);r.EventBus.on(this.instanceID+":blocks:count_update",this.onBlockCountChange)},onBlockCountChange:function(e){if(e!=this.total_blocks){this.total_blocks=e;this.renderPositionList()}},onSelectChange:function(){var e=this.$select.val();if(0!==e){r.EventBus.trigger(this.instanceID+":blocks:change_position",this.$block,e,1==e?"before":"after");this.toggle()}},renderPositionList:function(){var e="<option value='0'>"+i18n.t("general:position")+"</option>";for(var t=1;t<=this.total_blocks;t++)e+="<option value="+t+">"+t+"</option>";this.$select.html(e)},toggle:function(){this.$select.val(0);this.$el.toggleClass(this.visibleClass)},show:function(){this.$el.addClass(this.visibleClass)},hide:function(){this.$el.removeClass(this.visibleClass)}});return n}();r.BlockReorder=function(){var n=function(e){this.$block=e;this._ensureElement();this._bindFunctions();this.initialize()};t.extend(n.prototype,l,c,{bound:["onMouseDown","onClick","onDragStart","onDragEnd","onDrag","onDrop"],className:"st-block-ui-btn st-block-ui-btn--reorder st-icon",tagName:"a",attributes:function(){return{html:"reorder",draggable:"true","data-icon":"move"}},initialize:function(){this.$el.bind("mousedown touchstart",this.onMouseDown).bind("click",this.onClick).bind("dragstart",this.onDragStart).bind("dragend touchend",this.onDragEnd).bind("drag touchmove",this.onDrag);this.$block.dropArea().bind("drop",this.onDrop)},onMouseDown:function(){r.EventBus.trigger("block:reorder:down")},onDrop:function(n){n.preventDefault();var i=this.$block,o=n.originalEvent.dataTransfer.getData("text/plain"),a=e("#"+o);t.isUndefined(o)||t.isEmpty(a)||i.attr("id")==o||i.attr("data-instance")!=a.attr("data-instance")||i.after(a);r.EventBus.trigger("block:reorder:dropped",o)},onDragStart:function(t){var n=e(t.currentTarget).parent();t.originalEvent.dataTransfer.setDragImage(this.$block[0],n.position().left,n.position().top);t.originalEvent.dataTransfer.setData("Text",this.$block.attr("id"));r.EventBus.trigger("block:reorder:dragstart");this.$block.addClass("st-block--dragging")},onDragEnd:function(e){r.EventBus.trigger("block:reorder:dragend");this.$block.removeClass("st-block--dragging")},onDrag:function(e){},onClick:function(){},render:function(){return this}});return n}();r.BlockDeletion=function(){var e=function(){this._ensureElement();this._bindFunctions()};t.extend(e.prototype,l,c,{tagName:"a",className:"st-block-ui-btn st-block-ui-btn--delete st-icon",attributes:{html:"delete","data-icon":"bin"}});return e}();var p=function(e){var n=e.attr("data-st-name")||e.attr("name");n||(n="Field");return t.capitalize(n)};r.BlockValidations={errors:[],valid:function(){this.performValidations();return 0===this.errors.length},performValidations:function(){this.resetErrors();var e=this.$(".st-required");t.each(e,this.validateField,this);t.each(this.validations,this.runValidator,this);this.$el.toggleClass("st-block--with-errors",this.errors.length>0)},validations:[],validateField:function(t){t=e(t);var n=t.attr("contenteditable")?t.text():t.val();0===n.length&&this.setError(t,i18n.t("errors:block_empty",{name:p(t)}))},runValidator:function(e){t.isUndefined(this[e])||this[e].call(this)},setError:function(e,t){var n=this.addMessage(t,"st-msg--error");e.addClass("st-error");this.errors.push({field:e,reason:t,msg:n})},resetErrors:function(){t.each(this.errors,function(e){e.field.removeClass("st-error");e.msg.remove()});this.$messages.removeClass("st-block__messages--is-visible");this.errors=[]}};r.BlockStore={blockStorage:{},createStore:function(e){this.blockStorage={type:t.underscored(this.type),data:e||{}}},save:function(){this.toData()},saveAndReturnData:function(){this.save();return this.blockStorage},saveAndGetData:function(){var e=this.saveAndReturnData();return e.data||e},getData:function(){return this.blockStorage.data},setData:function(e){r.log("Setting data for block "+this.blockID);t.extend(this.blockStorage.data,e||{})},setAndRetrieveData:function(e){this.setData(e);return this.getData()},setAndLoadData:function(e){this.setData(e);this.beforeLoadingData()},toData:function(){},loadData:function(){},beforeLoadingData:function(){r.log("loadData for "+this.blockID);r.EventBus.trigger("editor/block/loadData");this.loadData(this.getData())},_loadData:function(){r.log("_loadData is deprecated and will be removed in the future. Please use beforeLoadingData instead.");this.beforeLoadingData()},checkAndLoadData:function(){t.isEmpty(this.getData())||this.beforeLoadingData()}};r.SimpleBlock=function(){var n=function(e,n){this.createStore(e);this.blockID=t.uniqueId("st-block-");this.instanceID=n;this._ensureElement();this._bindFunctions();this.initialize.apply(this,arguments)};t.extend(n.prototype,l,r.Events,c,r.BlockStore,{focus:function(){},valid:function(){return true},className:"st-block",block_template:t.template("<div class='st-block__inner'><%= editor_html %></div>"),attributes:function(){return{id:this.blockID,"data-type":this.type,"data-instance":this.instanceID}},title:function(){return t.titleize(this.type.replace(/[\W_]/g," "))},blockCSSClass:function(){this.blockCSSClass=t.to_slug(this.type);return this.blockCSSClass},type:"",class:function(){return t.classify(this.type)},editorHTML:"",initialize:function(){},onBlockRender:function(){},beforeBlockRender:function(){},_setBlockInner:function(){var e=t.result(this,"editorHTML");this.$el.append(this.block_template({editor_html:e}));this.$inner=this.$el.find(".st-block__inner");this.$inner.bind("click mouseover",function(e){e.stopPropagation()})},render:function(){this.beforeBlockRender();this._setBlockInner();this._blockPrepare();return this},_blockPrepare:function(){this._initUI();this._initMessages();this.checkAndLoadData();this.$el.addClass("st-item-ready");this.on("onRender",this.onBlockRender);this.save()},_withUIComponent:function(e,t,n){this.$ui.append(e.render().$el);t&&n&&this.$ui.on("click",t,n)},_initUI:function(){var t=e("<div>",{class:"st-block__ui"});this.$inner.append(t);this.$ui=t;this._initUIComponents()},_initMessages:function(){var t=e("<div>",{class:"st-block__messages"});this.$inner.prepend(t);this.$messages=t},addMessage:function(t,n){var i=e("<span>",{html:t,class:"st-msg "+n});this.$messages.append(i).addClass("st-block__messages--is-visible");return i},resetMessages:function(){this.$messages.html("").removeClass("st-block__messages--is-visible")},_initUIComponents:function(){this._withUIComponent(new r.BlockReorder(this.$el))}});n.fn=n.prototype;n.extend=d;return n}();r.Block=function(){var n=function(e,t){r.SimpleBlock.apply(this,arguments)};var i=["<div class='st-block__ui-delete-controls'>","<label class='st-block__delete-label'>","<%= i18n.t('general:delete') %>","</label>","<a class='st-block-ui-btn st-block-ui-btn--confirm-delete st-icon' data-icon='tick'></a>","<a class='st-block-ui-btn st-block-ui-btn--deny-delete st-icon' data-icon='close'></a>","</div>"].join("\n");var o={html:['<div class="st-block__dropzone">','<span class="st-icon"><%= _.result(block, "icon_name") %></span>','<p><%= i18n.t("general:drop", { block: "<span>" + _.result(block, "title") + "</span>" }) %>',"</p></div>"].join("\n"),re_render_on_reorder:false};var a={html:['<input type="text" placeholder="<%= i18n.t("general:paste") %>"',' class="st-block__paste-input st-paste-block">'].join("")};var s={html:['<div class="st-block__upload-container">','<input type="file" type="st-file-upload">','<button class="st-upload-btn"><%= i18n.t("general:upload") %></button>',"</div>"].join("\n")};r.DEFAULTS.Block={drop_options:o,paste_options:a,upload_options:s};t.extend(n.prototype,r.SimpleBlock.fn,r.BlockValidations,{bound:["_handleContentPaste","_onFocus","_onBlur","onDrop","onDeleteClick","clearInsertedStyles","getSelectionForFormatter","onBlockRender"],className:"st-block st-icon--add",attributes:function(){return t.extend(r.SimpleBlock.fn.attributes.call(this),{"data-icon-after":"add"})},icon_name:"default",validationFailMsg:function(){return i18n.t("errors:validation_fail",{type:this.title()})},editorHTML:'<div class="st-block__editor"></div>',toolbarEnabled:true,droppable:false,pastable:false,uploadable:false,fetchable:false,ajaxable:false,drop_options:{},paste_options:{},upload_options:{},formattable:true,_previousSelection:"",initialize:function(){},toMarkdown:function(e){return e},toHTML:function(e){return e},withMixin:function(e){if(!t.isObject(e))return;var n="initialize"+e.mixinName;if(t.isUndefined(this[n])){t.extend(this,e);this[n]()}},render:function(){this.beforeBlockRender();this._setBlockInner();this.$editor=this.$inner.children().first();if(this.droppable||this.pastable||this.uploadable){var t=e("<div>",{class:"st-block__inputs"});this.$inner.append(t);this.$inputs=t}this.hasTextBlock&&this._initTextBlocks();this.droppable&&this.withMixin(r.BlockMixins.Droppable);this.pastable&&this.withMixin(r.BlockMixins.Pastable);this.uploadable&&this.withMixin(r.BlockMixins.Uploadable);this.fetchable&&this.withMixin(r.BlockMixins.Fetchable);this.controllable&&this.withMixin(r.BlockMixins.Controllable);this.formattable&&this._initFormatting();this._blockPrepare();return this},remove:function(){this.ajaxable&&this.resolveAllInQueue();this.$el.remove()},loading:function(){t.isUndefined(this.spinner)||this.ready();this.spinner=new Spinner(r.DEFAULTS.spinner);this.spinner.spin(this.$el[0]);this.$el.addClass("st--is-loading")},ready:function(){this.$el.removeClass("st--is-loading");if(!t.isUndefined(this.spinner)){this.spinner.stop();delete this.spinner}},toData:function(){r.log("toData for "+this.blockID);var e=this.$el,n={};if(this.hasTextBlock()){var i=this.getTextBlock().html();i.length>0&&(n.text=r.toMarkdown(i,this.type))}this.$(":input").not(".st-paste-block").length>0&&this.$(":input").each(function(e,t){t.getAttribute("name")&&(n[t.getAttribute("name")]=t.value)});t.isEmpty(n)||this.setData(n)},focus:function(){this.getTextBlock().focus()},blur:function(){this.getTextBlock().blur()},onFocus:function(){this.getTextBlock().bind("focus",this._onFocus)},onBlur:function(){this.getTextBlock().bind("blur",this._onBlur)},_onFocus:function(){this.trigger("blockFocus",this.$el)},_onBlur:function(){},onDrop:function(e){},onDeleteClick:function(e){e.preventDefault();var n=function(e){e.preventDefault();this.trigger("removeBlock",this.blockID)};var r=function(e){e.preventDefault();this.$el.removeClass("st-block--delete-active");o.remove()};if(this.isEmpty()){n.call(this,new Event("click"));return}this.$inner.append(t.template(i));this.$el.addClass("st-block--delete-active");var o=this.$inner.find(".st-block__ui-delete-controls");this.$inner.on("click",".st-block-ui-btn--confirm-delete",t.bind(n,this)).on("click",".st-block-ui-btn--deny-delete",t.bind(r,this))},pastedMarkdownToHTML:function(e){return r.toHTML(r.toMarkdown(e,this.type),this.type)},onContentPasted:function(e,t){t.html(this.pastedMarkdownToHTML(t[0].innerHTML));this.getTextBlock().caretToEnd()},beforeLoadingData:function(){this.loading();if(this.droppable||this.uploadable||this.pastable){this.$editor.show();this.$inputs.hide()}r.SimpleBlock.fn.beforeLoadingData.call(this);this.ready()},_handleContentPaste:function(n){var i=e(n.currentTarget);t.delay(t.bind(this.onContentPasted,this,n,i),0)},_getBlockClass:function(){return"st-block--"+this.className},_initUIComponents:function(){var e=new r.BlockPositioner(this.$el,this.instanceID);this._withUIComponent(e,".st-block-ui-btn--reorder",e.toggle);this._withUIComponent(new r.BlockReorder(this.$el));this._withUIComponent(new r.BlockDeletion,".st-block-ui-btn--delete",this.onDeleteClick);this.onFocus();this.onBlur()},_initFormatting:function(){var e;for(var n in r.Formatters)if(r.Formatters.hasOwnProperty(n)){e=r.Formatters[n];t.isUndefined(e.keyCode)||e._bindToBlock(this.$el)}},_initTextBlocks:function(){this.getTextBlock().bind("paste",this._handleContentPaste).bind("keyup",this.getSelectionForFormatter).bind("mouseup",this.getSelectionForFormatter).bind("DOMNodeInserted",this.clearInsertedStyles)},getSelectionForFormatter:function(){t.defer(function(){var e=window.getSelection(),t=e.toString().trim();""===t?r.EventBus.trigger("formatter:hide"):r.EventBus.trigger("formatter:positon")})},clearInsertedStyles:function(e){var t=e.target;t.removeAttribute("style")},hasTextBlock:function(){return this.getTextBlock().length>0},getTextBlock:function(){t.isUndefined(this.text_block)&&(this.text_block=this.$(".st-text-block"));return this.text_block},isEmpty:function(){return t.isEmpty(this.saveAndGetData())}});n.extend=d;return n}();r.Formatter=function(){var e=function(e){this.formatId=t.uniqueId("format-");this._configure(e||{});this.initialize.apply(this,arguments)};var n=["title","className","cmd","keyCode","param","onClick","toMarkdown","toHTML"];t.extend(e.prototype,{title:"",className:"",cmd:null,keyCode:null,param:null,toMarkdown:function(e){return e},toHTML:function(e){return e},initialize:function(){},_configure:function(e){this.options&&(e=t.extend({},this.options,e));for(var i=0,r=n.length;i<r;i++){var o=n[i];e[o]&&(this[o]=e[o])}this.options=e},isActive:function(){return document.queryCommandState(this.cmd)},_bindToBlock:function(e){var t=this,n=false;e.on("keyup",".st-text-block",function(e){17!=e.which&&224!=e.which&&91!=e.which||(n=false)}).on("keydown",".st-text-block",{formatter:t},function(e){17!=e.which&&224!=e.which&&91!=e.which||(n=true);if(e.which==e.data.formatter.keyCode&&true===n){document.execCommand(e.data.formatter.cmd,false,true);e.preventDefault();n=false}})}});e.extend=d;return e}();r.Blocks.Quote=function(){var e=t.template(['<blockquote class="st-required st-text-block" contenteditable="true"></blockquote>','<label class="st-input-label"> <%= i18n.t("blocks:quote:credit_field") %></label>','<input maxlength="140" name="cite" placeholder="<%= i18n.t("blocks:quote:credit_field") %>"',' class="st-input-string st-required js-cite-input" type="text" />'].join("\n"));return r.Block.extend({type:"quote",title:function(){return i18n.t("blocks:quote:title")},icon_name:"quote",editorHTML:function(){return e(this)},loadData:function(e){this.getTextBlock().html(r.toHTML(e.text,this.type));this.$(".js-cite-input").val(e.cite)},toMarkdown:function(e){return e.replace(/^(.+)$/gm,"> $1")}})}();r.Blocks.Heading=r.Block.extend({type:"Heading",title:function(){return i18n.t("blocks:heading:title")},editorHTML:'<div class="st-required st-text-block st-text-block--heading" contenteditable="true"></div>',icon_name:"heading",loadData:function(e){this.getTextBlock().html(r.toHTML(e.text,this.type))}});r.Blocks.Image=r.Block.extend({type:"image",title:function(){return i18n.t("blocks:image:title")},droppable:true,uploadable:true,icon_name:"image",loadData:function(t){this.$editor.html(e("<img>",{src:t.file.url}))},onBlockRender:function(){this.$inputs.find("button").bind("click",function(e){e.preventDefault()});this.$inputs.find("input").on("change",t.bind(function(e){this.onDrop(e.currentTarget)},this))},onDrop:function(t){var n=t.files[0],i="undefined"!==typeof URL?URL:"undefined"!==typeof webkitURL?webkitURL:null;if(/image/.test(n.type)){this.loading();this.$inputs.hide();this.$editor.html(e("<img>",{src:i.createObjectURL(n)})).show();this.uploader(n,function(e){this.setData(e);this.ready()},function(e){this.addMessage(i18n.t("blocks:image:upload_error"));this.ready()})}}});r.Blocks.Text=r.Block.extend({type:"text",title:function(){return i18n.t("blocks:text:title")},editorHTML:'<div class="st-required st-text-block" contenteditable="true"></div>',icon_name:"text",loadData:function(e){this.getTextBlock().html(r.toHTML(e.text,this.type))}});r.Blocks.List=function(){var e='<div class="st-text-block st-required" contenteditable="true"><ul><li></li></ul></div>';return r.Block.extend({type:"list",title:function(){return i18n.t("blocks:list:title")},icon_name:"list",editorHTML:function(){return t.template(e,this)},loadData:function(e){this.getTextBlock().html("<ul>"+r.toHTML(e.text,this.type)+"</ul>")},onBlockRender:function(){this.checkForList=t.bind(this.checkForList,this);this.getTextBlock().on("click keyup",this.checkForList)},checkForList:function(){0===this.$("ul").length&&document.execCommand("insertUnorderedList",false,false)},toMarkdown:function(e){return e.replace(/<\/li>/gm,"\n").replace(/<\/?[^>]+(>|$)/g,"").replace(/^(.+)$/gm," - $1")},toHTML:function(e){e=e.replace(/^ - (.+)$/gm,"<li>$1</li>").replace(/\n/gm,"");return e},onContentPasted:function(e,t){var n=this.pastedMarkdownToHTML(t[0].innerHTML),i=this.$("ul").html(n);this.getTextBlock().caretToEnd()},isEmpty:function(){return t.isEmpty(this.saveAndGetData().text)}})}();r.Blocks.Video=function(){return r.Block.extend({providers:{vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo.com\/(.+)/,html:'<iframe src="{{protocol}}//player.vimeo.com/video/{{remote_id}}?title=0&byline=0" width="580" height="320" frameborder="0"></iframe>'},youtube:{regex:/(?:http[s]?:\/\/)?(?:www.)?(?:(?:youtube.com\/watch\?(?:.*)(?:v=))|(?:youtu.be\/))([^&].+)/,html:'<iframe src="{{protocol}}//www.youtube.com/embed/{{remote_id}}" width="580" height="320" frameborder="0" allowfullscreen></iframe>'}},type:"video",title:function(){return i18n.t("blocks:video:title")},droppable:true,pastable:true,icon_name:"video",loadData:function(e){if(!this.providers.hasOwnProperty(e.source))return;this.providers[e.source].square?this.$editor.addClass("st-block__editor--with-square-media"):this.$editor.addClass("st-block__editor--with-sixteen-by-nine-media");var t=this.providers[e.source].html.replace("{{protocol}}",window.location.protocol).replace("{{remote_id}}",e.remote_id).replace("{{width}}",this.$editor.width());this.$editor.html(t)},onContentPasted:function(t){this.handleDropPaste(e(t.target).val())},handleDropPaste:function(e){if(!t.isURI(e))return;var n,i;t.each(this.providers,function(r,o){n=r.regex.exec(e);if(null!==n&&!t.isUndefined(n[1])){i={source:o,remote_id:n[1]};this.setAndLoadData(i)}},this)},onDrop:function(e){var t=e.getData("text/plain");this.handleDropPaste(t)}})}();(function(){var e=r.Formatter.extend({title:"bold",cmd:"bold",keyCode:66,text:"B"});var t=r.Formatter.extend({title:"italic",cmd:"italic",keyCode:73,text:"i"});var n=r.Formatter.extend({title:"link",iconName:"link",cmd:"CreateLink",text:"link",onClick:function(){var e=prompt(i18n.t("general:link")),t=/((ftp|http|https):\/\/.)|mailto(?=\:[-\.\w]+@)/;if(e&&e.length>0){t.test(e)||(e="http://"+e);document.execCommand(this.cmd,false,e)}},isActive:function(){var e=window.getSelection(),t;e.rangeCount>0&&(t=e.getRangeAt(0).startContainer.parentNode);return t&&"A"==t.nodeName}});var i=r.Formatter.extend({title:"unlink",iconName:"link",cmd:"unlink",text:"link"});r.Formatters.Bold=new e;r.Formatters.Italic=new t;r.Formatters.Link=new n;r.Formatters.Unlink=new i})();r.BlockControl=function(){var e=function(e,t){this.type=e;this.instance_scope=t;this.block_type=r.Blocks[this.type].prototype;this.can_be_rendered=this.block_type.toolbarEnabled;this._ensureElement()};t.extend(e.prototype,l,c,r.Events,{tagName:"a",className:"st-block-control",attributes:function(){return{"data-type":this.block_type.type}},render:function(){this.$el.html('<span class="st-icon">'+t.result(this.block_type,"icon_name")+"</span>"+t.result(this.block_type,"title"));return this}});return e}();r.BlockControls=function(){var n=function(e,t){this.instance_scope=t;this.available_types=e||[];this._ensureElement();this._bindFunctions();this.initialize()};t.extend(n.prototype,l,c,r.Events,{bound:["handleControlButtonClick"],block_controls:null,className:"st-block-controls",html:"<a class='st-icon st-icon--close'>"+i18n.t("general:close")+"</a>",initialize:function(){for(var e in this.available_types)if(r.Blocks.hasOwnProperty(e)){var t=new r.BlockControl(e,this.instance_scope);t.can_be_rendered&&this.$el.append(t.render().$el)}this.$el.delegate(".st-block-control","click",this.handleControlButtonClick)},show:function(){this.$el.addClass("st-block-controls--active");r.EventBus.trigger("block:controls:shown")},hide:function(){this.$el.removeClass("st-block-controls--active");r.EventBus.trigger("block:controls:hidden")},handleControlButtonClick:function(t){t.stopPropagation();this.trigger("createBlock",e(t.currentTarget).attr("data-type"))}});n.extend=d;return n}();r.FloatingBlockControls=function(){var n=function(e,t){this.$wrapper=e;this.instance_id=t;this._ensureElement();this._bindFunctions();this.initialize()};t.extend(n.prototype,l,c,r.Events,{className:"st-block-controls__top",attributes:function(){return{"data-icon":"add"}},bound:["handleBlockMouseOut","handleBlockMouseOver","handleBlockClick","onDrop"],initialize:function(){this.$el.on("click",this.handleBlockClick).dropArea().bind("drop",this.onDrop);this.$wrapper.on("mouseover",".st-block",this.handleBlockMouseOver).on("mouseout",".st-block",this.handleBlockMouseOut).on("click",".st-block--with-plus",this.handleBlockClick)},onDrop:function(n){n.preventDefault();var i=this.$el,o=n.originalEvent.dataTransfer.getData("text/plain"),a=e("#"+o);t.isUndefined(o)||t.isEmpty(a)||i.attr("id")==o||this.instance_id!=a.attr("data-instance")||i.after(a);r.EventBus.trigger("block:reorder:dropped",o)},handleBlockMouseOver:function(t){var n=e(t.currentTarget);n.hasClass("st-block--with-plus")||n.addClass("st-block--with-plus")},handleBlockMouseOut:function(t){var n=e(t.currentTarget);n.hasClass("st-block--with-plus")&&n.removeClass("st-block--with-plus")},handleBlockClick:function(t){t.stopPropagation();var n=e(t.currentTarget);this.trigger("showBlockControls",n)}});n.extend=d;return n}();r.FormatBar=function(){var n=function(e){this.options=t.extend({},r.DEFAULTS.formatBar,e||{});this._ensureElement();this._bindFunctions();this.initialize.apply(this,arguments)};t.extend(n.prototype,l,r.Events,c,{className:"st-format-bar",bound:["onFormatButtonClick","renderBySelection","hide"],initialize:function(){var t,n,i;this.$btns=[];for(t in r.Formatters)if(r.Formatters.hasOwnProperty(t)){n=r.Formatters[t];i=e("<button>",{class:"st-format-btn st-format-btn--"+t+" "+(n.iconName?"st-icon":""),text:n.text,"data-type":t,"data-cmd":n.cmd});this.$btns.push(i);i.appendTo(this.$el)}this.$b=e(document);this.$el.bind("click",".st-format-btn",this.onFormatButtonClick)},hide:function(){this.$el.removeClass("st-format-bar--is-ready")},show:function(){this.$el.addClass("st-format-bar--is-ready")},remove:function(){this.$el.remove()},renderBySelection:function(e){var t=window.getSelection(),n=t.getRangeAt(0),i=n.getBoundingClientRect(),r={};r.top=i.top+20+window.pageYOffset-this.$el.height()+"px";r.left=(i.left+i.right)/2-this.$el.width()/2+"px";this.highlightSelectedButtons();this.show();this.$el.css(r)},highlightSelectedButtons:function(){var e;t.each(this.$btns,function(t){e=r.Formatters[t.attr("data-type")];t.toggleClass("st-format-btn--is-active",e.isActive())},this)},onFormatButtonClick:function(n){n.stopPropagation();var i=e(n.target),o=r.Formatters[i.attr("data-type")];if(t.isUndefined(o))return false;!t.isUndefined(o.onClick)&&t.isFunction(o.onClick)?o.onClick():document.execCommand(i.attr("data-cmd"),false,o.param);this.highlightSelectedButtons();return false}});n.extend=d;return n}();r.Editor=function(){var n=function(e){this.initialize(e)};t.extend(n.prototype,l,r.Events,{bound:["onFormSubmit","showBlockControls","hideAllTheThings","hideBlockControls","onNewBlockCreated","changeBlockPosition","onBlockDragStart","onBlockDragEnd","removeBlockDragOver","onBlockDropped","createBlock"],events:{"block:reorder:down":"hideBlockControls","block:reorder:dragstart":"onBlockDragStart","block:reorder:dragend":"onBlockDragEnd","block:content:dropped":"removeBlockDragOver","block:reorder:dropped":"onBlockDropped","block:create:new":"onNewBlockCreated"},initialize:function(e){r.log("Init SirTrevor.Editor");this.blockTypes={};this.blockCounts={};this.blocks=[];this.errors=[];this.options=t.extend({},r.DEFAULTS,e||{});this.ID=t.uniqueId("st-editor-");if(!this._ensureAndSetElements())return false;!t.isUndefined(this.options.onEditorRender)&&t.isFunction(this.options.onEditorRender)&&(this.onEditorRender=this.options.onEditorRender);this._setRequired();this._setBlocksTypes();this._bindFunctions();this.store("create");this.build();r.instances.push(this);r.bindFormSubmit(this.$form)},build:function(){this.$el.hide();this.block_controls=new r.BlockControls(this.blockTypes,this.ID);this.fl_block_controls=new r.FloatingBlockControls(this.$wrapper,this.ID);this.formatBar=new r.FormatBar(this.options.formatBar);this.listenTo(this.block_controls,"createBlock",this.createBlock);this.listenTo(this.fl_block_controls,"showBlockControls",this.showBlockControls);this._setEvents();r.EventBus.on(this.ID+":blocks:change_position",this.changeBlockPosition);r.EventBus.on("formatter:positon",this.formatBar.renderBySelection);r.EventBus.on("formatter:hide",this.formatBar.hide);this.$wrapper.prepend(this.fl_block_controls.render().$el);e(document.body).append(this.formatBar.render().$el);this.$outer.append(this.block_controls.render().$el);e(window).bind("click",this.hideAllTheThings);var n=this.store("read");n.data.length>0?t.each(n.data,function(e){r.log("Creating: "+e.type);this.createBlock(e.type,e.data)},this):false!==this.options.defaultType&&this.createBlock(this.options.defaultType,{});this.$wrapper.addClass("st-ready");t.isUndefined(this.onEditorRender)||this.onEditorRender()},destroy:function(){this.formatBar.destroy();this.fl_block_controls.destroy();this.block_controls.destroy();t.each(this.blocks,function(e){this.removeBlock(e.blockID)},this);this.stopListening();var e=this.$el.detach();r.instances=t.reject(r.instances,t.bind(function(e){return e.ID==this.ID},this));this.store("reset");this.$outer.replaceWith(e)},reinitialize:function(e){this.destroy();this.initialize(e||this.options)},_setEvents:function(){t.each(this.events,function(e,t){r.EventBus.on(t,this[e],this)},this)},hideAllTheThings:function(e){this.block_controls.hide();this.formatBar.hide();t.isUndefined(this.block_controls.current_container)||this.block_controls.current_container.removeClass("with-st-controls")},showBlockControls:function(e){t.isUndefined(this.block_controls.current_container)||this.block_controls.current_container.removeClass("with-st-controls");this.block_controls.show();e.append(this.block_controls.$el.detach());e.addClass("with-st-controls");this.block_controls.current_container=e},store:function(e,t){return r.editorStore(this,e,t||{})},createBlock:function(e,n,i){e=t.classify(e);if(this._blockLimitReached()){r.log("Cannot add any more blocks. Limit reached.");return false}if(!this._isBlockTypeAvailable(e)){r.log("Block type not available "+e);return false}if(!this._canAddBlockType(e)){r.log("Block Limit reached for type "+e);return false}var o=new r.Blocks[e](n,this.ID);this._renderInPosition(o.render().$el);this.listenTo(o,"removeBlock",this.removeBlock);this.blocks.push(o);this._incrementBlockTypeCount(e);o.focus();r.EventBus.trigger(n?"block:create:existing":"block:create:new",o);r.log("Block created of type "+e);o.trigger("onRender");this.$wrapper.toggleClass("st--block-limit-reached",this._blockLimitReached());this.triggerBlockCountUpdate()},onNewBlockCreated:function(e){this.hideBlockControls();this.scrollTo(e.$el)},scrollTo:function(t){e("html, body").animate({scrollTop:t.position().top},300,"linear")},blockFocus:function(e){this.block_controls.current_container=null},hideBlockControls:function(){t.isUndefined(this.block_controls.current_container)||this.block_controls.current_container.removeClass("with-st-controls");this.block_controls.hide()},removeBlockDragOver:function(){this.$outer.find(".st-drag-over").removeClass("st-drag-over")},triggerBlockCountUpdate:function(){r.EventBus.trigger(this.ID+":blocks:count_update",this.blocks.length)},changeBlockPosition:function(e,t){t-=1;var n=this.getBlockPosition(e);var i=this.$wrapper.find(".st-block").eq(t);var r=this.getBlockPosition(i);var o=n>t?"Before":"After";if(i&&i.attr("id")!==e.attr("id")){this.hideAllTheThings();e["insert"+o](i);this.scrollTo(e)}},onBlockDropped:function(e){this.hideAllTheThings();var n=this.findBlockById(e);t.isUndefined(n)||t.isEmpty(n.getData())||!n.drop_options.re_render_on_reorder||n.beforeLoadingData()},onBlockDragStart:function(){this.hideBlockControls();this.$wrapper.addClass("st-outer--is-reordering")},onBlockDragEnd:function(){this.removeBlockDragOver();this.$wrapper.removeClass("st-outer--is-reordering")},_renderInPosition:function(e){this.block_controls.current_container?this.block_controls.current_container.after(e):this.$wrapper.append(e)},_incrementBlockTypeCount:function(e){this.blockCounts[e]=t.isUndefined(this.blockCounts[e])?1:this.blockCounts[e]+1},_getBlockTypeCount:function(e){return t.isUndefined(this.blockCounts[e])?0:this.blockCounts[e]},_canAddBlockType:function(e){var t=this._getBlockTypeLimit(e);return!(0!==t&&this._getBlockTypeCount(e)>=t)},_blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},removeBlock:function(e){var n=this.findBlockById(e),i=t.classify(n.type),o=n.$el.find(".st-block-controls");if(o.length){this.block_controls.hide();this.$wrapper.prepend(o)}this.blockCounts[i]=this.blockCounts[i]-1;this.blocks=t.reject(this.blocks,function(e){return e.blockID==n.blockID});this.stopListening(n);n.remove();r.EventBus.trigger("block:remove");this.triggerBlockCountUpdate();this.$wrapper.toggleClass("st--block-limit-reached",this._blockLimitReached())},performValidations:function(e,n){var i=0;if(!r.SKIP_VALIDATION&&n&&!e.valid()){this.errors.push({text:t.result(e,"validationFailMsg")});r.log("Block "+e.blockID+" failed validation");++i}return i},saveBlockStateToStore:function(e){var n=e.saveAndReturnData();if(n&&!t.isEmpty(n.data)){r.log("Adding data for block "+e.blockID+" to block store");this.store("add",{data:n})}},onFormSubmit:function(e){e=false!==e;r.log("Handling form submission for Editor "+this.ID);this.removeErrors();this.store("reset");this.validateBlocks(e);this.validateBlockTypesExist(e);this.renderErrors();this.store("save");return this.errors.length},validateBlocks:function(n){if(!this.required&&r.SKIP_VALIDATION&&!n)return false;var i=function(i,r){var o=t.find(this.blocks,function(t){return t.blockID==e(i).attr("id")});if(t.isUndefined(o))return false;this.performValidations(o,n);this.saveBlockStateToStore(o)};t.each(this.$wrapper.find(".st-block"),i,this)},validateBlockTypesExist:function(e){if(!this.required&&r.SKIP_VALIDATION&&!e)return false;var n=function(e,n){if(!this._isBlockTypeAvailable(e))return;if(0===this._getBlockTypeCount(e)){r.log("Failed validation on required block type "+e);this.errors.push({text:i18n.t("errors:type_missing",{type:e})})}else{var i=t.filter(this.getBlocksByType(e),function(e){return!e.isEmpty()});if(i.length>0)return false;this.errors.push({text:i18n.t("errors:required_type_empty",{type:e})});r.log("A required block type "+e+" is empty")}};t.isArray(this.required)&&t.each(this.required,n,this)},renderErrors:function(){if(0===this.errors.length)return false;t.isUndefined(this.$errors)&&(this.$errors=this._errorsContainer());var e="<ul>";t.each(this.errors,function(t){e+='<li class="st-errors__msg">'+t.text+"</li>"});e+="</ul>";this.$errors.append(e);this.$errors.show()},_errorsContainer:function(){if(t.isUndefined(this.options.errorsContainer)){var n=e("<div>",{class:"st-errors",html:"<p>"+i18n.t("errors:title")+" </p>"});this.$outer.prepend(n);return n}return a(this.options.errorsContainer)},removeErrors:function(){if(0===this.errors.length)return false;this.$errors.hide().find("ul").html("");this.errors=[]},findBlockById:function(e){return t.find(this.blocks,function(t){return t.blockID==e})},getBlocksByType:function(e){return t.filter(this.blocks,function(n){return t.classify(n.type)==e})},getBlocksByIDs:function(e){return t.filter(this.blocks,function(n){return t.contains(e,n.blockID)})},getBlockPosition:function(e){return this.$wrapper.find(".st-block").index(e)},_getBlockTypeLimit:function(e){if(!this._isBlockTypeAvailable(e))return 0;return parseInt(t.isUndefined(this.options.blockTypeLimits[e])?0:this.options.blockTypeLimits[e],10)},_isBlockTypeAvailable:function(e){return!t.isUndefined(this.blockTypes[e])},_ensureAndSetElements:function(){if(t.isUndefined(this.options.el)||t.isEmpty(this.options.el)){r.log("You must provide an el");return false}this.$el=this.options.el;this.el=this.options.el[0];this.$form=this.$el.parents("form");var n=e("<div>").attr({id:this.ID,class:"st-outer",dropzone:"copy link move"});var i=e("<div>").attr({class:"st-blocks"});this.$el.wrap(n).wrap(i);this.$outer=this.$form.find("#"+this.ID);this.$wrapper=this.$outer.find(".st-blocks");return true},_setBlocksTypes:function(){this.blockTypes=t.flattern(t.isUndefined(this.options.blockTypes)?r.Blocks:this.options.blockTypes)},_setRequired:function(){t.isArray(this.options.required)&&!t.isEmpty(this.options.required)?this.required=this.options.required:this.required=false}});return n}();r.setDefaults=function(e){r.DEFAULTS=t.extend(r.DEFAULTS,e||{})};r.bindFormSubmit=function(e){if(!s){new r.Submittable(e);e.bind("submit",this.onFormSubmit);s=true}};r.onBeforeSubmit=function(e){var n=0;t.each(r.instances,function(t,i){n+=t.onFormSubmit(e)});r.log("Total errors: "+n);return n};r.onFormSubmit=function(e){var t=r.onBeforeSubmit();if(t>0){r.EventBus.trigger("onError");e.preventDefault()}};r.getInstance=function(e){if(t.isUndefined(e))return this.instances[0];if(t.isString(e))return t.find(this.instances,function(t){return t.ID===e});return this.instances[e]};r.setBlockOptions=function(e,n){var i=r.Blocks[e];if(t.isUndefined(i))return;t.extend(i.prototype,n||{})};r.runOnAllInstances=function(e){if(t.has(r.Editor.prototype,e)){[].unshift.call(arguments,r.instances);t.invoke.apply(t,arguments)}else r.log("method doesn't exist")}})(i,r);e.exports=SirTrevor},function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){return{autoSortDimension:function e(t,n){t.qDef.qSortCriterias=[];t.qDef.autoSort=true;n?n.forEach(function(e,n){t.qDef.qSortCriterias[n]={qSortByState:1,qSortByLoadOrder:1,qSortByNumeric:1,qSortByAscii:1}}):t.qDef.qSortCriterias[0]={qSortByState:1,qSortByLoadOrder:1,qSortByNumeric:1,qSortByAscii:1};return t},createFieldDimension:function e(t){return{qDef:{qFieldDefs:[t],qFieldLabels:[t],qSortCriterias:[]}}},createLibraryDimension:function e(t){return{qLibraryId:t,qDef:{qSortCriterias:[]}}},createDefaultListBox:function t(n,i){var r=e.extend(true,{},n),o;r.qShowAlternatives=true;for(o=0;o<r.qDef.qSortCriterias.length;++o)r.qDef.qSortCriterias[o].qSortByState=1;i=!i&&n.qDef.qLabelExpression?{qStringExpression:{qExpr:n.qDef.qLabelExpression}}:i||n.qDef.qFieldLabels&&n.qDef.qFieldLabels.length&&""!==n.qDef.qFieldLabels[0]?i||(n.qDef.qFieldLabels&&n.qDef.qFieldLabels.length?n.qDef.qFieldLabels[0]:""):n.qDef.qFieldDefs[0];return{qInfo:{qType:"listbox"},qListObjectDef:r,title:i,visualization:"listbox"}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(93),n(89)],r=function(e,t){function n(n){return n?t.resolve(n.enigmaModel):e.getApp()}var i={};i.get=function(e,t,i){return n(i).then(function(n){return n.getField(e,t||"$")})};i.getList=function(e){return n(e).then(function(e){return e.getFieldListObject()})};i.getOnTheFlyList=function(e){return n(e).then(function(e){return e.getOnTheFlyListObject()})};i.getOnTheFlyWithHiddenList=function(e){return n(e).then(function(e){return e.getOnTheFlyWithHiddenListObject()})};return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(95),n(92),n(89),n(90),n(183),n(396),n(105),n(182)],r=function(e,t,i,r,o,a,s,l,c){var u;var d=i.extend("DataPrepRestService",{init:function e(){},_getAPI:function e(){u||(u=a.getApi("api/dataprepservice/v1","openapi",void 0,void 0,void 0,void 0,c.getServerNodeId()));return u},_handleRestResponse:function e(i,r,o){if(o.body&&o.body.notification&&1005===o.body.notification.data.code){t.publish(l.Events.PubSub.StartSpin,{method:i});return this.executeAfterReload({apiFunc:this[i],initialParams:r}).finally(function(){t.publish(l.Events.PubSub.StopSpin,{method:i})})}o.body.response&&o.body.response.loadModel&&Promise.all([n.e(22),n.e(93)]).then(function(){var e=[n(253)];(function(e){e.updateProperties(o.body.response.loadModel)}).apply(null,e)}).catch(n.oe);return o.body.response},executeAfterReload:function e(t){var n=new r;this.waitForReload(n);return n.promise.then(function(){return t.apiFunc.apply(this,t.initialParams)}.bind(this))},waitForReload:function e(t){this.getProgress().then(function(e){this._checkProgress(e.result)?t.resolve(true):setTimeout(function(){this.waitForReload(t)}.bind(this),1e3)}.bind(this),function(e){t.reject(e)})},_checkProgress:function e(t){var n=false;t.engine&&t.engine.qProgressData&&t.engine.qProgressData.qFinished&&true===t.dps.dataLoad.complete&&true===t.dps.profiling.complete&&(n=true);return n},_getAppName:function e(){return o.getParameterByName("app")},getRestResponseHandler:function e(t,n){return function(){return this[t].bind(this,n)}.bind(this)},getSerializedLoadModel:function e(){var t=this;var n=arguments;return this._getAPI().then(function(e){return e.apis.model.getCurrentLoadModel({appId:t._getAppName()}).then(t._handleRestResponse.bind(t,"getSerializedLoadModel",n))})},_addTables:function e(t){var n=this;var i=arguments;return this._getAPI().then(function(e){return e.apis.table.addTables({appId:n._getAppName(),body:t}).then(n._handleRestResponse.bind(n,"_addTables",i))})},_getDesiredTransforms:function e(){var t=[];t.push("makeGeoPoint");t.push("lookupGeoInfo");return t},isRunning:function e(){return this._getAPI()},getForcedConcatRecommendations:function e(t){var n=this;var i=arguments;return this._getAPI().then(function(e){var r={type:"concatenate",queries:t};return e.apis.table.recommendTableTransformation({appId:n._getAppName(),body:r}).then(n._handleRestResponse.bind(n,"getForcedConcatRecommendations",i))})},getTargetTables:function e(t,n){var i=this;var r=arguments;return this._getAPI().then(function(e){return e.apis.table.getCurrentTables({appId:i._getAppName(),forceReload:t,noData:n}).then(i._handleRestResponse.bind(i,"getTargetTables",r))})},getRecommendations:function e(){var t=this;var n=arguments;return this._getAPI().then(function(e){return e.apis.model.getRecommendations({appId:t._getAppName()}).then(t._handleRestResponse.bind(t,"getRecommendations",n))})},getCurrentClassification:function e(){var t=this;var n=arguments;return this._getAPI().then(function(e){return e.apis.model.getCurrentClassification({appId:t._getAppName()}).then(t._handleRestResponse.bind(t,"getCurrentClassification",n))})},getTableRecommendations:function e(t){var n=this;var i=arguments;return this._getAPI().then(function(e){return e.apis.table.getTableRecommendations({appId:n._getAppName(),tableId:t}).then(n._handleRestResponse.bind(n,"getTableRecommendations",i))})},getTargetTablePreview:function e(t){var n=this;var i=arguments;return this._getAPI().then(function(e){return e.apis.table.getPreviewData({appId:n._getAppName(),tableId:t}).then(n._handleRestResponse.bind(n,"getTargetTablePreview",i))})},getTableFields:function e(t){var n=this;var i=arguments;return this._getAPI().then(function(e){return e.apis.field.getFieldExpressions({appId:n._getAppName(),tableId:t}).then(n._handleRestResponse.bind(n,"getTableFields",i))})},getLoadScript:function e(t){var n=this;var i=arguments;return this._getAPI().then(function(e){return e.apis.model.getCurrentScript({appId:n._getAppName(),useCache:t}).then(n._handleRestResponse.bind(n,"getLoadScript",i))})},invokeWithPolling:function e(n,i,r){i&&t.publish(l.Events.PubSub.StartSpin,{method:r});var o=true;var a=void 0;a=setInterval(function(){o&&this.getProgress().then(function(){})}.bind(this),15e3);var s=function e(){o=false;void 0!==a&&clearInterval(a);a=void 0};return n().then(function(e){s();i&&t.publish(l.Events.PubSub.StopSpin,{method:r});return e},function(e){s();i&&t.publish(l.Events.PubSub.StopSpin);throw e})},invokeWithGlobalSpinnerSupport:function e(n){t.publish(l.Events.PubSub.StartSpinInvalidation);return n().catch(function(){t.publish(l.Events.PubSub.StopSpinInvalidation)})},createConcatenatedQuery:function e(t,n,i){var r=this;var o=arguments;return this.invokeWithGlobalSpinnerSupport(function(){return r._getAPI().then(function(e){var a={type:"forceConcatenate",payload:{name:t,queries:n,mappings:i}};return e.apis.table.applyTransformation({appId:r._getAppName(),body:a}).then(r._handleRestResponse.bind(r,"createConcatenatedQuery",o))})})},createJoinedQuery:function e(t,n,i,r){var o=this;var a=arguments;return this.invokeWithGlobalSpinnerSupport(function(){return o._getAPI().then(function(e){var s={type:"join",payload:{name:t,joinType:n,queries:i,mappings:r}};return e.apis.table.applyTransformation({appId:o._getAppName(),body:s}).then(o._handleRestResponse.bind(o,"createJoinedQuery",a))})})},splitQuery:function e(t,n){var i=this;var r=arguments;return this.invokeWithGlobalSpinnerSupport(function(){return i._getAPI().then(function(e){var o={type:"split",payload:{queries:[t],queryProperties:[{sourceQueries:n}]}};return e.apis.table.applyTransformation({appId:i._getAppName(),body:o}).then(i._handleRestResponse.bind(i,"splitQuery",r))})})},synchronizeScriptedTables:function e(){return this.invokeWithPolling(function(){return this.addTables([],true).then(function(e){return e})}.bind(this),true,"synchronize")},getProgress:function e(){var t=this;var n=arguments;return this._getAPI().then(function(e){var i={appId:t._getAppName()};return e.apis.session.getProgress(i).then(t._handleRestResponse.bind(t,"getProgress",n))})},addTables:function t(n,i){var r={data:[],applyTransformations:this._getDesiredTransforms(),defaults:{},scriptedSources:i};for(var o=0;o<n.length;o++){var a=n[o];var l={tables:[]};l.connectionInfo=e.extend(true,{},a.connectionInfo,{dbInfo:a.dbInfo});r.data.push(l);var c=l.tables;a.tablesAndFields.map(function(e){var t={databaseName:a.databaseName,ownerName:a.ownerName,tableName:e.table.qName,formatSpec:e.table.qFormatSpec,fileFormatSettings:e.table.fileFormatSettings};t.fields=[];e.fields.forEach(function(e){t.fields.push({name:e.qName,selected:true})});c.push(t)})}var u=new s;return u.get().then(function(e){r.defaults.enableQVDCaching=e.enableQVDCaching;return this._addTables(r)}.bind(this))},getVisRecommendations:function e(t,n,i,r,o){var a=this;var s=arguments;return this._getAPI().then(function(e){var l={appId:a._getAppName()};if(t){var c=["fields","libItems","expressions"];c.forEach(function(e){t[e]&&t[e].length&&(l[e]=JSON.stringify(t[e]))});t["table"]&&(l["table"]=t["table"])}i&&(l.bundleOverride=JSON.stringify(i));r&&(l.detailLevel=JSON.stringify([]));o&&(l.options=JSON.stringify(o));var u=e.apis.visualization;var d=n?u.getVisualizationsForLoaded(l):u.getVisualizationsForCurrent(l);return d.then(a._handleRestResponse.bind(a,"getVisRecommendations",s))})},getInsightRecommendations:function e(t,n,i,r,o){var a=this;var s=arguments;i||(i=true);return this._getAPI().then(function(e){var l={appId:a._getAppName()};t&&(l["sp"]=t);n&&(l.bundleOverride=JSON.stringify(n));r&&(l.detailLevel=JSON.stringify([]));o&&(l.options=JSON.stringify(o));var c=e.apis.visualization;var u=i?c.getVisualizationsForLoaded(l):c.getVisualizationsForCurrent(l);return u.then(a._handleRestResponse.bind(a,"getVisRecommendations",s))})},bucketField:function e(t,n,i){var r=this;var o=arguments;return this._getAPI().then(function(e){var a={type:"bucket",bucketing:i};a.bucketing.fieldId=n;var s={appId:r._getAppName(),tableId:t,body:a};return e.apis.table.applyTableTransformation(s).then(r._handleRestResponse.bind(r,"bucketField",o))})},applyOrdinal:function e(t,n,i){var r=this;var o=arguments;return this._getAPI().then(function(e){var a={type:"ordinal",ordinals:i};var s={appId:r._getAppName(),tableId:t,fieldId:n,body:a};return e.apis.field.addFieldTransformation(s).then(r._handleRestResponse.bind(r,"applyOrdinal",o))})},applyFieldMapping:function e(t,n,i){var r=this;var o=arguments;return this._getAPI().then(function(e){var a={type:"mapping",mappings:i};var s={appId:r._getAppName(),tableId:t,fieldId:n,body:a};return e.apis.field.addFieldTransformation(s).then(r._handleRestResponse.bind(r,"applyFieldMapping",o))})},splitField:function e(t,n,i){var r=this;var o=arguments;return this._getAPI().then(function(e){var a={type:"splitField",splitDef:{fieldId:n,splitInfo:i}};var s={appId:r._getAppName(),tableId:t,body:a};return e.apis.table.applyTableTransformation(s).then(r._handleRestResponse.bind(r,"splitField",o))})},adaptVisualization:function e(t,n,i,r,o,a){var s=this;var l=arguments;return this._getAPI().then(function(e){var c={action:t,datasetName:n,analysisType:r,dims:o,msrs:a,visType:i};return e.apis.visualization.createVisRecommendationForCurrent({appId:s._getAppName(),body:c}).then(s._handleRestResponse.bind(s,"adaptVisualization",l))})},adaptMatchRecord:function e(t,n,i){var r=this;var o=arguments;return this._getAPI().then(function(e){var a={action:t,matchRecord:n,analysisType:i,detailLevel:[]};return e.apis.visualization.createVisRecommendationForLoaded({appId:r._getAppName(),body:a}).then(r._handleRestResponse.bind(r,"adaptVisualization",o))})},getExcludedCompareVisualizations:function e(t,n,i){var r=this;var o=arguments;return this._getAPI().then(function(e){var a={appId:r._getAppName(),detailLevel:"complete",analysisTypes:JSON.stringify(["excludedCompare","excludedCompareMsrSelector"]),bundleOverride:JSON.stringify({explore:"grayInsight"})};if(t.length>0)if(i){var s=[];t.forEach(function(e){s.push({libId:e})});a["libItems"]=JSON.stringify(s)}else{var l=[];t.forEach(function(e){l.push({name:e,overrides:{classifications:["measure"],defaultAggregation:"sum"}})});a["fields"]=JSON.stringify(l)}n&&(a.options=JSON.stringify(n));return e.apis.visualization.getVisualizationsForLoaded(a).then(r._handleRestResponse.bind(r,"getVisRecommendations",o))})},adaptAggregationForExcludedCompareVisualization:function e(t){var n=this;var i=arguments;return this._getAPI().then(function(e){var r={action:"update",analysisType:"excludedCompare",matchRecord:t};return e.apis.visualization.createVisRecommendationForLoaded({appId:n._getAppName(),body:r}).then(n._handleRestResponse.bind(n,"adaptVisualization",i))})}});return d}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(383),n(101),n(90)],r=function(e,t,n){var i={},r={},o;o={type:"items",component:"accordion",items:{settings:{uses:"settings"}}};function a(e,n,i){var r,o,s,l=null;if(e.ref===n)return e;if(t.isHierarchical(e)){r=Object.keys(e.items);for(s=0;s<r.length;++s){o=e.items[r[s]];if(o.ref===n){l=o;break}if(i){l=a(o,n,i);if(null!==l)break}}}return l}function s(r,a,l){var c,u,d;l=l||e;r||(r=o);if(a&&i[a])return i[a];var f;while(r.uses){d=t.getValue(l,r.uses);if(!d)throw new Error("No defaults found for: "+r.uses);f=d.uses;r=n.extend(true,{},d,r);if(!f){delete r.uses;break}r.uses=f}if(t.isHierarchical(r)||"array"===r.type&&r.items){u={};Object.keys(r.items).forEach(function(e){r.items[e]&&(u[e]=s(r.items[e],null,l))});c=n.extend({},r,{items:u})}else c=n.extend({},r);a&&!i[a]&&(i[a]=c);return c}function l(e,i,r){var o=s(e,r);return i?n.extend(true,t.getDefaults(o),i):t.getDefaults(o)}function c(e){function n(e){var i={};function r(e){return-1!==e.search(/\.\d/g)}function o(e){var n={type:e.type,defaultValue:t.getDefaultValue(e.type,e)};e.maxlength&&(n.maxlength=e.maxlength);e.min&&(n.min=e.min);e.max&&(n.max=e.max);e.expression&&(n.expression=e.expression);e.options&&"boolean"!==e.type&&(n.enum=e.options.map(function(e){return e.value}));return n}function a(e){var s,l,c,u,d,f;if(t.isHierarchical(e)){s=Object.keys(e.items);for(d=0;d<s.length;d++){l=s[d];c=e.items[l];a(c)}}else if(e.ref&&"array"===e.type&&e.items){u=n({type:"items",items:e.items});f={type:"array",items:u};r(e.ref)||t.setValue(i,e.ref,f)}else if(e.ref){f=o(e);r(e.ref)||t.setValue(i,e.ref,f)}}a(e);return i}return n(e)}function u(e){var n=[];function i(e){var r,o,a;if(t.isHierarchical(e)){r=Object.keys(e.items);for(a=0;a<r.length;++a){o=e.items[r[a]];o.snapshot&&n.push(o);i(o)}}}i(e);return n}function d(e,t){if(t&&r[t])return r[t];var n=[];function i(e){e.globalChange&&n.push(e.globalChange);"items"!==e.type&&"array"!==e.type||!e.items||Object.keys(e.items).forEach(function(t){e.items[t]&&i(e.items[t])})}i(e);t&&!r[t]&&(r[t]=n);return n}return{findDefinition:a,findSnapshotProperties:u,findGlobalListeners:d,mapDefinition:s,mapProperties:l,getPropertyHierarchy:c}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={};return{get:function t(){return e},isVariableSet:function t(n){return"1"===e[n]},isVariableDefined:function t(n){return!!e[n]},load:function t(n){return n.getVariableList().then(function(t){t.forEach(function(t){t.qName&&(e[t.qName]=t.qDefinition)});return e}).catch(function(){return e})}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(10),n(48),n(89),n(90),n(138),n(91),n(95),n(108),n(491),n(124),n(115),n(210),n(123),n(114),n(335),n(499),n(99),n(56),n(449),n(193)],r=function(e,t,n,i,r,a,s,l,c,u,d,f,p,h,v,g,m){var b=false,y=false;var x={createVisualizationHtml:T,showVisualization:O,clearElement:k,appDoIt:L,setDefaultId:P,getDefaultListParam:M,createHypercubeDef:N,makeConfig:D,inClient:l.inClient,initClient:w,registerExtension:A,addPatches:R,isMeasure:F,validateColumns:j,createDefinition:H,convertDefinition:V,setLanguage:q,setDeviceType:C,resize:_,getExtensionList:I,callRepository:E,getExtensionSupport:B};Object.defineProperty(x,"Promise",{get:function e(){return n.Promise}});return x;function S(e){a.setup({context:"client",language:e});a.append({"Devhub.Cols.Array":"Cols parameter should be an array.","Devhub.Cols.InvalidQtype":"Invalid qType: {0}","Devhub.Cols.QlibraryIdMissing":"qLibraryId missing: {0}","Devhub.Cols.QdefString":"Measure qDef.qDef should be a string: {0}","Devhub.Cols.QfielddefArray":"Dimension qDef.qFieldDefs should be an array: {0}","Devhub.Cols.QdefOrQfielddefs":"Column needs either qDef.qDef or qDef.qFieldDefs: {0}","Devhub.Cols.QdefOrQlibraryid":"Column needs either qLibraryId or qDef: {0}","Devhub.Cols.Visualization.InvalidType":"The visualization type is incorrect: {0}"})}function w(){if(!b){b=true;if(!l.inClient()){c.configureTouchSupport();r.init({Promise:t.getService("$q")}).then(function(){y||""!==a.localeDetected||S()})}}}function q(e){y=true;S(e)}function C(e){m.setDeviceType(e)}function _(e){e?s.publish("/ui/object/resize."+e):s.publish("/resize/end")}function I(e){console.warn("qlik.getExtensionList(callback) is deprecated since June 2019, use available REST APIs instead.");return f.getList().then(function(t){e&&e(t)})}function E(e,n,i){console.warn("qlik.callRepository(path, method, body) is deprecated since June 2019, use available REST APIs instead.");return t.getService("$contentApi").request({method:n||"GET",url:e,data:i})}function D(e){e=e||{};var t=e._qEvent?new v(e._qEvent.handlers):new v;t.scope=e._qEvent?e._qEvent.scope:null;return{host:e.host||i.hostname,port:e.port?e.port.toString():i.port,isSecure:e.isSecure||i.isSecure,reloadURI:e.reloadURI?e.reloadURI:i.reloadURI,transientApp:!!e.transientApp,prefix:e.prefix||i.basePath.replace("/extensions/","/"),openWithoutData:e.openWithoutData,identity:e.identity,subpath:e.subpath,qEvent:t}}function A(e,t,n){var i="extensions/"+e+"/"+e;window.define(i,t);u.registerExtension({id:e,data:n||{type:"visualization"}});return i}function T(e){var t="",n="";if(e&&e.currentSelections){(e.noInteraction||e.noSelections)&&(n=" style='pointer-events:none;'");e.variant=e.variant||"bright";t+='<qv-stage-current-selections class="qvt-selections" options="options" app="app"'+n+'></qv-stage-current-selections><div class="qv-global-search-container"'+n+"></div>"}else e&&e.showNavigationToolbar?t+='<qv-odag-toolbar class="qv-odag-bar-container" model="model" in-edit-mode="inEdit" stand-Alone="standAlone"></qv-odag-toolbar>':t+='<qv-object model="model" options="options" object="object"></qv-object>';return t}function O(i,r,o,a){var s=new n;"string"===typeof i&&(i=document.getElementById(i));if(i){var l=i[0]?i[0]:i;l.innerHTML=T(o);var c=e.element(l).scope();if(c){var u=c.$new(true);var d=e.copy(o)||{};d.isReadonly=false!==d.isReadonly;if(o){o.noSelections&&(d.selections=false);o.noInteraction&&(d.interactionState=p.STATIC);if(o.showNavigationToolbar){u.inEdit=false;u.standAlone=true}}var f=function n(){u.model=r;u.app=a;u.options=d;u.object={};var i=t.getService("$compile");i(e.element(l).children("qv-object, qv-stage-current-selections, qv-odag-toolbar"))(u)};if(h.isInit){d.direction=h.direction;f();s.resolve(u)}else h.init(a.enigmaModel).then(function(){d.direction=h.direction;t.$apply(u,function(){f();s.resolve(u)})});t.$apply(u)}else s.reject(new Error("Element scope is undefined."))}else s.reject(new Error("Element is undefined."));return s.promise}function k(e,t){var i=function e(t){"string"===typeof t?t=document.getElementById(t):t[0]&&(t=t[0]);if(!t)return;t.innerHTML=""};if(t&&"function"===typeof t.then)return t.then(function(t){t.$destroy();i(e)}).catch(function(e){console.error(e)});i(e);return n.resolve()}function L(e,i,r){var o=new n;e.waitForOpen.promise.then(function(){var n=e.enigmaModel||e;t.$apply(t.$rootScope,function(){o.resolve(n[i].apply(n,r))})});return o.promise}function P(e,t){e.qInfo=e.qInfo||{};e.qInfo.qType=e.qInfo.qType||t||"mashup";e.qInfo.qId=e.qInfo.qId||"MU"+i.generateId()}function M(e,t){var n={};P(n,e);"BookmarkList"===e?n.qBookmarkListDef={qType:"bookmark",qData:{title:"/qMetaDef/title",description:"/qMetaDef/description"}}:"SnapshotList"===e?n.qBookmarkListDef={qType:"snapshot",qData:{title:"/title",libraryTitle:"/qMetaDef/title",description:"/qMetaDef/description",sourceObjectId:"/sourceObjectId",visualizationType:"/visualizationType",timestamp:"/timestamp",snapshotData:"/snapshotData",isClone:"/isClone"}}:"CurrentSelections"===e?n.qSelectionObjectDef=t||{}:"DimensionList"===e?n.qDimensionListDef={qType:"dimension",qData:{title:"/qMetaDef/title",tags:"/qMetaDef/tags",grouping:"/qDim/qGrouping",info:"/qDimInfos"}}:"MeasureList"===e?n.qMeasureListDef={qType:"measure",qData:{title:"/qMetaDef/title",tags:"/qMetaDef/tags"}}:"sheet"===e?n.qAppObjectListDef={qType:"sheet",qData:{title:"/qMetaDef/title",labelExpression:"/labelExpression",description:"/qMetaDef/description",thumbnail:"/thumbnail",cells:"/cells",rank:"/rank",columns:"/columns",rows:"/rows"}}:"masterobject"===e?n.qAppObjectListDef={qType:"masterobject",qData:{name:"/metadata/name",visualization:"/visualization",tags:"/metadata/tags"}}:"VariableList"===e?n.qVariableListDef={qType:"variable",qData:{tags:"/tags"}}:"story"===e?n.qAppObjectListDef={qType:"story",qData:{title:"/qMetaDef/title",description:"/qMetaDef/description",thumbnail:"/thumbnail",rank:"/rank"}}:n["q"+e+"Def"]={};return n}function N(e,t,n){if(Array.isArray(e)&&!Array.isArray(t)){var i=t||{},r=[],o=[],a=[];e.forEach(function(e){if(F(e)){a.push(-1);o.push(e)}else{a.push(r.length);r.push(e)}});var s=r.length;a.forEach(function(e,t){if(e<0){a[t]=s;s++}});i.columnOrder=a;i.qInterColumnSortOrder=a;return N(r,o,i)}var l=n||{};if(e){var c=[];e.forEach(function(e){"string"===typeof e?c.push({qDef:{qFieldDefs:[e]}}):c.push(e)});l.qDimensions=c}var u=[];t.forEach(function(e){"string"===typeof e?u.push({qDef:{qDef:e}}):u.push(e)});l.qMeasures=u;l.qInitialDataFetch=[{qTop:0,qLeft:0,qHeight:20,qWidth:(l.qDimensions?l.qDimensions.length:0)+l.qMeasures.length}];n&&n.rows&&(l.qInitialDataFetch[0].qHeight=n.rows);return l}function R(e,t,n){for(var i in t)t.hasOwnProperty(i)&&(t[i]instanceof Object&&!Array.isArray(t[i])?R(e+i+"/",t[i],n):n.push({qPath:e+i,qOp:"add",qValue:"string"===typeof t[i]?'"'+t[i]+'"':JSON.stringify(t[i])}))}function F(e){if("string"===typeof e)return 0===e.indexOf("=");if(e.qType)return"measure"===e.qType;return!!(e.qDef&&e.qDef.qDef||e.qSortBy||e.qAttributeExpressions)}function $(e,t,n){e=e?e+", ":"";return e+a.get(t,JSON.stringify(n))}function j(e){if(!Array.isArray(e))return a.get("Devhub.Cols.Array");var t;e.forEach(function(e){"object"===o(e)?e.qType?"measure"!==e.qType&&"dimension"!==e.qType?t=$(t,"Devhub.Cols.InvalidQtype",e):e.qLibraryId||(t=$(t,"Devhub.Cols.QlibraryIdMissing",e)):e.qDef?e.qDef.qDef?"string"!==typeof e.qDef.qDef&&(t=$(t,"Devhub.Cols.QdefString",e)):e.qDef.qFieldDefs?Array.isArray(e.qDef.qFieldDefs)||(t=$(t,"Devhub.Cols.QfielddefArray",e)):t=$(t,"Devhub.Cols.QdefOrQfielddefs",e):t=$(t,"Devhub.Cols.QdefOrQlibraryid",e):"string"!==typeof e&&(t=$(t,"Devhub.Cols.InvalidType",e))});return t}function H(e,t,i,r){var o=d.getType(t);if(!o)return n.reject(a.get("Devhub.Visualization.InvalidType",t));if(i){var s=j(i);if(s)return n.reject(s)}return e.model.waitForOpen.promise.then(function(){return g.createProperties(e.model.enigmaModel,t,i,r)})}function V(e,t,n,i){return g.convertProperties(e,t,n,i)}function B(e){var t=["export","exportData","viewData"];var i={};var r=e.layout.visualization||e.layout.qInfo&&e.layout.qInfo.qType;var o=d.getType(r);if(!o)return n.resolve(i);return o.getExtensionType().then(function(e){Object.keys(e.support).forEach(function(n){-1!==t.indexOf(n)&&(i[n]=e.support[n])});return i}).catch(function(){return i})}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11)],r=function(e){var t="[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]";var n="[-------]";var i="[-----------]";var r='[\t-\r-"&-*;-@[-`{-~-----------------------------\u2029-------------------------------------------------------]';var o=new RegExp(t);var a=new RegExp(n);var s=new RegExp(i);var l=new RegExp(r);var c=String.fromCharCode(8206),u=String.fromCharCode(8207);var d,f;function p(){void 0===f&&y();return f}function h(e){return o.test(e)}function v(e){return a.test(e)||s.test(e)}function g(e){return l.test(e)}function m(e){var t=e?e.length:0,n,i;for(n=0;n<t;n++){i=e[n];if(h(i))return"ltr";if(v(i))return"rtl"}return"ltr"}function b(e){if(f)return"auto";return m(e)}function y(){var e=document.createElement("div"),t=document.getElementsByTagName("body")[0];e.setAttribute("style","position: absolute; width: 1px; height: 1px; top: -999px; overflow: scroll; white-space:nowrap;");e.setAttribute("dir","rtl");t.appendChild(e);d=x(e);f=S(e);t.removeChild(e)}function x(e){e.innerHTML="RTL-SCROLL-TEST";var t="reverse";if(e.scrollLeft>0)t="default";else{e.scrollLeft=1;0===e.scrollLeft&&(t="negative")}return t}function S(t){t.innerHTML="        ";var n;switch(d){case"reverse":n=false;break;case"default":n=t.scrollLeft>0;break;case"negative":e(t).scrollLeft(-1e3);n=t.scrollLeft<0;break;default:n=false}return n}y();function w(e,t,n){n=Number.isNaN(+n)?0:n;if(e&&"reverse"===d)return t+n;return t-n}return{supportDirAuto:p,detectTextDirection:m,getAutoOrAlternativeDirection:b,isLtrChar:h,isRtlChar:v,isNeutralChar:g,lrm:c,rlm:u,scrollImplementation:d,getScrollPos:w}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={cellBackgroundColor:true,cellForegroundColor:true,colorByAlternative:true,colorByExpression:true,tooltip:true,urlLabel:true};return{create:function t(n,i){if(!n||!e[n])throw new Error("Attribute Expressions Util: ID required");var r={};i&&Object.keys(i).forEach(function(e){r[e]=i[e]});r.id=n;r.qAttribute=true;return r},getById:function e(t,n,i){if(t){i=i||"id";return t.filter(function(e){return e[i]===n})[0]}return false},getIndexById:function e(t,n,i){var r=-1;if(t){i=i||"id";t.forEach(function(e,t){e[i]===n&&(r=t)})}return r},moveById:function e(t,n,i,r){var o=this.getIndexById(t,i,r);n=n||[];var a=this.getIndexById(n,i,r);if(-1!==o&&-1===a){var s=t.splice(o,1);n.push(s[0])}return n},moveByIdFromGroup:function e(t,n,i,r,o){i=i||"qAttributeExpressions";o=o||"id";for(var a=0;a<t.length;a++){var s=t[a][i];var l=n.length;this.moveById(s,n,r,o);if(l!==n.length)return n}return n},clean:function e(t){return t.filter(function(e){return e&&e.id})},IDMAP:{CELL_BACKGROUND_COLOR:"cellBackgroundColor",CELL_FOREGROUND_COLOR:"cellForegroundColor",COLOR_BY_ALTERNATIVE:"colorByAlternative",COLOR_BY_EXPRESSION:"colorByExpression",TOOLTIP:"tooltip",CELL_URL_LABEL:"urlLabel"}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e=".autoCalendar";function t(t){var n=t?t.split(e).join(""):"";return n}return{trimAutoCalendarName:t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(598),n(102),n(89),n(90),n(49),n(93)],r=function(e,t,n,i,r,o){var a={},s=null,l=null;t.mixin(a);a.notification("UpdateObjProps");function c(t,n){s=t;e.get(s,n).then(function(e){e.Invalidated.bind(u.bind(this,n))})}function u(e){var t;p(e).then(function(e){t=e;a.UpdateObjProps.emit(t)})}function d(t,n){return e.getList(t).then(function(o){return t.getLayout().then(function(a){return o.getLayout().then(function(o){if(o&&o.length)return c(o[0].qInfo.qId,t);if(n||r.getFlag("THEME_CARDS")&&true===i.getValue(a,"permissions.createMasterobject"))return e.create({},t).then(function(e){return e.getLayout().then(function(){return c(e.id,t)})})})})})}function f(t,n,r){return e.get(t,r).then(function(e){return e.getProperties().then(function(t){var r={};r=i.extend(true,t,n);r.sheetLogoThumbnail.qStaticContentUrl&&delete r.sheetLogoThumbnail.qStaticContentUrl;return e.setProperties(r)})})}function p(t){if(s)return e.get(s,t).then(function(e){return e.getLayout()});l=new n;l.resolve({});return l.promise}function h(e){return e?n.resolve(e):o.getApp()}a.setProperties=function(e,t){return h(t).then(function(t){if(!s)return d(t,true).then(function(){return f(s,e,t)});return f(s,e,t)})};a.getProperties=function(e){return h(e).then(function(e){if(!s)return d(e,false).then(p.bind(this,e));return p(e)})};return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(213)],r=function(e){var t={};Object.defineProperty(t,"path",{get:function t(){var n=e.serverHelpBaseUrl;var i=location.pathname.split("/").slice(-2,-1)[0];location.pathname.toLowerCase().indexOf("/dev-hub/")>-1?i="dev-hub":"qmc"!==i.toLowerCase()&&(i="client");n+=i+"/";return n}});return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(96)],r=function(e,t){var n=t.Gesture.augment(function(e){this.defaults={which:2,radiusThreshold:3};this.start=function(e,n){if(t.utils.touch)return;if(t.utils.msPointer&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType)return;if(this.isValidMouseButton(e,this.options.which)){this.initiated=true;n.startPoint=n.points[0];this.binder.start.call(this,e,n)}};this.update=function(e,t){if(!this.started&&t.startPoint&&t.startPoint.distanceTo(t.points[0])>=this.options.radiusThreshold){this.started=true;this.binder.update.call(this,e,t)}else this.started&&this.binder.update.call(this,e,t)};this.end=function(e,t){if(this.initiated){this.binder.end.call(this,e,t);this.initiated=false}};function n(){e.apply(this,arguments)}return n});t.gestures.add("wheelswipe",n);function i(e,t){e.gestures.forEach(function(n){n!==t&&e.cancelGesture(n)})}function r(e){var t=0,n=0,i=0,r=60;e.wheelDelta&&(t=e.wheelDelta/r);e.detail&&(t=-e.detail/3);i=t;if(void 0!==e.axis&&e.axis===e.HORIZONTAL_AXIS){i=0;n=-1*t}void 0!==e.wheelDeltaY&&(i=e.wheelDeltaY/r);void 0!==e.wheelDeltaX&&(n=-1*e.wheelDeltaX/r);return{delta:t,deltaX:n,deltaY:i,x:e.pageX,y:e.pageY}}function o(e,t,n){var i,r;return function(){var o=n||this;var a=+new Date,s=arguments;if(i&&a<i+t){clearTimeout(r);r=setTimeout(function(){i=a;e.apply(o,s)},t)}else{i=a;e.apply(o,s)}}}var a={debouceTimer:null};function s(e,t,n){return function(){var i=this,r=arguments,o;n=n||a;l(n);o=setTimeout(function(){e.apply(i,r)},t);n.debounceTimer=o}}function l(e){e=e||a;e.debounceTimer&&clearTimeout(e.debounceTimer);e.debounceTimer=null}function c(t){if(!t)return;t=t.map(function(e){return e.qGroupFieldDefs?e.qGroupFieldDefs[e.qGroupPos||0]:e.qFallbackTitle});e.$rootScope.$broadcast("locked-feedback",[t]);s(function(){e.$rootScope.$broadcast("locked-feedback",[t,true])},100)()}return{getMouseWheelData:r,cancelGestures:i,throttle:o,debounce:s,cancelDebounce:l,showLockedFeedback:c}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[],r=function(){var e={missing:{template:"<div></div>",controller:[function(){}]}};function t(t){var n=t.component;if("string"===typeof n){if(e[n])return e[n];window.console.log('Error! No component found with name "'+n+'"');return e.missing}if("object"===o(n))return n;switch(t.type){case"items":return e.items;case"string":return e.string;case"integer":return e.integer;case"number":return e.number;case"boolean":return e.checkbox;case"array":if(t.items)return e.list;return e.slider;default:if(t.type){window.console.log('Error! No component found for type "'+t.type+'"');return e.missing}window.console.log('Warning! Missing component/type in definition. Using "items" component.');return e.items}}function n(t){return e[t]}function i(e){return!!n(e)}function r(t,n){if(e[t])throw new Error("Property panel component already loaded: "+t);e[t]=n}return{getComponent:n,hasComponent:i,findComponent:t,addComponent:r}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){return e.replace(/^=+/,"")}function t(e,t){n(e,t);e.description?e.validity.description=e.description.length<=t.description:e.validity.description=true;return e.validity.name&&e.validity.description}function n(e,t){e.validity.name=!!e.name&&!!e.name.trim()&&e.name.length<=t.name;return e.validity.name}function i(t,n){var i=t.expression;var r="string"===typeof i&&i.trim().length>0&&i.length<=n.expression;i&&(t.expression=e(i));t.validity.expression=r;return r}function r(e){var t=e.selectedFields,n=false;if(!t)return false;"single"===e.type?n=1===t.length:"drilldown"===e.type&&(n=t.length>1);e.validity.selectedFields=n;return n}return{validateMetadata:t,validateMetadataName:n,validateExpr:i,validateFieldsInDimension:r}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={};Object.defineProperties(e,{ENTER:{value:13},ESCAPE:{value:27},SPACE:{value:32},TAB:{value:9},BACKSPACE:{value:8},DELETE:{value:46},ALT:{value:18},CTRL:{value:17},SHIFT:{value:16},ARROW_UP:{value:38},ARROW_DOWN:{value:40},ARROW_LEFT:{value:37},ARROW_RIGHT:{value:39},PAGE_DOWN:{value:34},PAGE_UP:{value:33},HOME:{value:36},END:{value:35},F10:{value:121},A:{value:65},F:{value:70}});e.isArrow=function(t){return t===e.ARROW_UP||t===e.ARROW_DOWN||t===e.ARROW_LEFT||t===e.ARROW_RIGHT};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(90),n(183)],r=function(e,t,n){var i;var r;var o;var a=e.extend("PrecedentsService",{init:function e(){},_getAPI:function e(){i||(i=n.getApi("api/precedent/v1","openapi"));return i},_handleRestResponse:function e(t,n,i){return i.body.response},_getAppName:function e(){return t.getParameterByName("app")},defineDimension:function e(t){var n=this;var i=arguments;var r={};r.targets=[{type:"dimension",dimension:t}];r.source={type:"user"};r.relation={relation:"define"};return this._getAPI().then(function(e){return e.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:r,server:e.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"defineDimension",i))})},defineMeasure:function e(t){var n=this;var i=arguments;var r={};r.targets=[{type:"measure",measure:t}];r.source={type:"user"};r.relation={relation:"define"};return this._getAPI().then(function(e){return e.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:r,server:e.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"defineMeasure",i))})},dislikeField:function e(t){var n=this;var i=arguments;r=void 0;var o={};o.targets=[{type:"field",field:t}];o.source={type:"user"};o.relation={relation:"dislike"};return this._getAPI().then(function(e){return e.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:o,server:e.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"dislikeField",i))})},removeDefinedItem:function e(t){var n=this;var i=arguments;o=void 0;return this._getAPI().then(function(e){return e.apis.precedents.removePrecedent({appId:n._getAppName(),sourceType:"user",relation:"define",targetNodeId:t}).then(n._handleRestResponse.bind(n,"removeDefinedItem",i))})},getLearnedItems:function e(){var t=this;var n=arguments;if(o&&o.pending)return o;var i={};i.targets=[{type:"field"},{type:"libItem"},{type:"dimension"},{type:"measure"}];i.source={type:"user"};i.relations=[{relation:"define"},{relation:"dislike"}];o=this._getAPI().then(function(e){return e.apis.precedents.getRelationships({appId:t._getAppName()},{requestBody:i,server:e.spec.servers[0].url}).then(t._handleRestResponse.bind(t,"getDefinedItems",n))});return o},undislikeItem:function e(t){var n=this;var i=arguments;r=void 0;return this._getAPI().then(function(e){return e.apis.precedents.removePrecedent({appId:n._getAppName(),sourceType:"user",relation:"dislike",targetNodeId:t}).then(n._handleRestResponse.bind(n,"undislikeItem",i))})},getDislikedItems:function e(){var t=this;var n=arguments;if(r)return r;var i={};i.targets=[{type:"field"},{type:"libItem"}];i.source={type:"user"};i.relations=[{relation:"dislike"}];r=this._getAPI().then(function(e){return e.apis.precedents.getRelationships({appId:t._getAppName()},{requestBody:i,server:e.spec.servers[0].url}).then(t._handleRestResponse.bind(t,"getDislikedItems",n))});return r},dislikeLibItem:function e(t){var n=this;var i=arguments;r=void 0;var o={};o.targets=[{type:"libItem",libItem:t}];o.source={type:"user"};o.relation={relation:"dislike"};return this._getAPI().then(function(e){return e.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:o,server:e.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"dislikeLibItem",i))})},likeAnalysis:function e(t){var n=this;var i=arguments;var r={};r.targets=[{type:"analysis",analysis:t}];r.source={type:"user"};r.relation={relation:"like"};return this._getAPI().then(function(e){return e.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:r,server:e.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"likeAnalysis",i))})},dislikeAnalysis:function e(t){var n=this;var i=arguments;var r={};r.targets=[{type:"analysis",analysis:t}];r.source={type:"user"};r.relation={relation:"dislike"};return this._getAPI().then(function(e){return e.apis.precedents.addPrecedent({appId:n._getAppName()},{requestBody:r,server:e.spec.servers[0].url}).then(n._handleRestResponse.bind(n,"dislikeAnalysis",i))})},undislikeAnalysis:function e(t){var n=this;var i=arguments;return this._getAPI().then(function(e){return e.apis.precedents.removePrecedent({appId:n._getAppName(),sourceType:"user",relation:"dislike",targetNodeId:t.precedents.id}).then(n._handleRestResponse.bind(n,"undislikeAnalysis",i))})},scrapeApp:function e(){var t=this;var n=arguments;r=void 0;return this._getAPI().then(function(e){return e.apis.precedents.scrapeApp({appId:t._getAppName()}).then(t._handleRestResponse.bind(t,"scrapeApp",n))})}});return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(91)],r=function(e,t){var n=0;var i=6;var r=1;function o(e,t,o,s){var l;if(0===t.length)return;e[o]||(e[o]={});l=e[o];l.string=t;l.isWhitespace=s||t.length<r&&!a(t)||'"'===t;l.colorIx=l.isWhitespace?-1:n;n=l.isWhitespace?n:(n+1)%i}function a(e){return e.match(/[\u3040-\u9FBF]/)||e.match(/[\uFF65-\uFF9F]/)}function s(e,t,n,i){if(t.length<r&&!a(t))return;e.push({string:t,startQuote:n,endQuote:i})}e.service("qvGlobalSearchDataService",function(){this.transformResult=function(e,n){var i=n;e.matches=e.matches||[];e.searchTermGroups=e.searchTermGroups||[];e.searchVisualsGroups=e.searchVisualsGroups||[];for(var r=0;r<i.qSearchGroupArray.length;++r)if("DatasetType"===i.qSearchGroupArray[r].qGroupType){e.searchTermGroups.push(i.qSearchGroupArray[r]);var o=i.qSearchGroupArray[r];-1===e.matches.indexOf(o.qSearchTermsMatched.length)&&e.matches.push(o.qSearchTermsMatched.length)}else e.searchVisualsGroups.push(i.qSearchGroupArray[r]);e.displayResult.data=e.searchTermGroups.length>0;e.displayResult.visuals=e.searchVisualsGroups.length>0;e.searchVisualsGroups.length>0&&(e.existingChartGroupTitle=t.get("GlobalSearch.Existing.ChartsTitle",[e.searchVisualsGroups[0].qItems.length]))};this.showMore=function(e,t){if(!t||!e||1!==e.qSearchGroupArray.length)return;var n=e.qSearchGroupArray[0],i;for(var r=0;r<n.qItems.length;r++)if(n.qItems[r].qIdentifier===t.qIdentifier){i=n.qItems[r].qItemMatches;break}i&&(t.qItemMatches=i)};this.setHeaders=function(e){var t,n=0;for(t=0;t<e.searchTermGroups.length;t++)e.searchTermGroups[t].qTotalNumberOfItems>n&&(n=e.searchTermGroups[t].qTotalNumberOfItems);e.columnCount=n;e.columnWidth=Math.floor(100/n)+"%";e.shadowHeaders=e.shadowHeaders||[];e.shadowHeaders.splice(0,e.shadowHeaders.length-n);for(t=e.shadowHeaders.length;t<n;t++)e.shadowHeaders[t]={}};this.transformSuggest=function(e,t,n){var i,r=0,o,a=[];this.getUnderlinersAndSearchTerms(e.query,a,[]);n=void 0!==n?n:25;n=Math.min(n,t.qSuggestions.length);for(i=0;i<n;++i){o={value:t.qSuggestions[i].qValue,term:t.qSuggestions[i].qTerm};if(e.query===this.getResultingQueryFromSuggestion(a,o))continue;e.suggestions[r]=o;r++}e.suggestions.splice(r,e.suggestions.length-r)};this._whitespaces=[" ","\t","\n","\r","\r\n",""];this.isWhiteSpaceAt=function(e,t){var n=this._whitespaces;var i=e.charAt(t),r;for(r=0;r<n.length;++r)if(i===n[r])return true;return false};this.getUnderlinersAndSearchTerms=function(e,t,i){var r=0,a=0,l=e.length,c=0,u,d=this._whitespaces,f=this;i.length=0;n=0;function p(e,t){var n,i,r;for(i=0;i<d.length;++i){n=e.indexOf(d[i],t);n>=0&&(!r||n<r)&&(r=n)}return r||-1}function h(e,t){var n;do{n=e.indexOf('"',t);t=n+1}while(n>=0&&t<l&&!f.isWhiteSpaceAt(e,t));return n}function v(){while(a<l&&f.isWhiteSpaceAt(e,a))a++;a>r&&o(t,e.substring(r,a),c++,true);r=a}v();while(r<l){if('"'===e.charAt(r)){o(t,e.substring(r,r+1),c++);a=h(e,++r);u=a>=0?e.substring(r,a):e.substring(r);o(t,u,c++);s(i,u,true,a>0);if(a<0)break;o(t,e.substring(a,a+1),c++);a+=1;r=a;v();continue}a=p(e,r);u=a>=0?e.substring(r,a):e.substring(r);o(t,u,c++);s(i,u,false,false);if(a<0)break;r=a;v()}t.splice(c,t.length-c)};this.getSuggestTerms=function(e,t){var n=this,i,r;function o(e){var t,i,r;e=e.trim();if(0===e.length)return null;t=e.length;i=t-1;r=-1;while(i>-1){if(n.isWhiteSpaceAt(e,i)){r=i+1;break}i--}r=Math.max(r,0);return e.substring(r,t)}r=o(e);i=t.map(function(e){return e.string});r&&2===r.length&&'"'===r.charAt(0)&&i.push(r.charAt(1));return i};this.getUnderlineLengthFromTermIx=function(e,t){var n=0,i,r=0;while(n<e.length){i=e[n];if(!(r<t||i.isWhitespace))break;if(n===e.length-1&&1===i.string.length&&!this.isWhiteSpaceAt(i.string,0)&&'"'!==i.string)break;i.isWhitespace||r++;n++}return n>0?n:0};this.getResultingQueryFromSuggestion=function(e,t){var n,i,r,o,a=this.getUnderlineLengthFromTermIx(e,t.term);n=e.slice(0,a).reduce(function(e,t){return e+t.string},"");i='"'===n.charAt(n.length-1);r=!i&&t.value.indexOf(" ")>=0;o=r||i;return n+(r?'"':"")+t.value+(o?'"':"")};this.getMinQueryLength=function(){return r};this.getMaxColorsNum=function(){return i}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(89),n(310),n(48)],r=function(e,t,n,i){function r(e){e=e.replace(/\$/g,"[dollar]");e=e.replace(/\\/g,"[slash]");return e}function o(e){e=e.replace(/\[dollar\]/g,"$");e=e.replace(/\[slash\]/g,"\\");return e}function a(e){return e}function s(t){t=t.replace(/'/g,"\\'");t=t.replace(/"/g,'\\"');var n=e("div[name='"+t+"']");if(1!==n.length)throw new Error('Could not find the table "'+t+'".');return n}function l(){var t=e("div[table]");return t}function c(e,t){var n=s(e).find("li[data-name='"+t.replace(/'/g,"\\'")+"']");if(1!==n.length)throw new Error('Could not find the field "'+t+'" in the table "'+e+'".');return n}function u(e){var t=s(e);return d(t)}function d(e){return e.find("h1")}function f(e){var t=s(e);return p(t)}function p(e){return d(e).outerHeight()}function h(e,t){return t-n.OFFSET_BETWEEN_TABLE_BOTTOM_AND_UL_BOTTOM-f(e)}function v(e){return s(e).height()}function g(e){var t=s(e);return m(t)}function m(e){return e.width()}function b(e,n,i){var r=new t;var o={top:n,left:i};s(e).animate(o,{duration:750,complete:function e(){return r.resolve()}});return r.promise}function y(e,n,i){var r=new t;var o=T(s(e));var a=P(s(e));var l=k(s(e));n>o&&(n=o);i>l&&(i=l);i<a&&(i=a);var c={height:n,width:i};s(e).animate(c,{duration:750,progress:function t(){x(e)},complete:function t(){x(e);return r.resolve()}});return r.promise}function x(e){var i=v(e)-f(e)-n.OFFSET_BETWEEN_TABLE_BOTTOM_AND_UL_BOTTOM;s(e).find("ul").height(i);return t.resolve()}function S(e){var t=s(e);var n=parseInt(t.css("top"),10);return n}function w(e){return e.height()}function q(e){var t=s(e);var n=parseInt(t.css("left"),10);return n}function C(t){var n=e(".table-container");n.css("opacity",t)}function _(){e("svg.dmv").fadeIn(750)}function I(){var n=new t;e("svg.dmv").fadeOut(750,function(){return n.resolve()});return n.promise}function E(e){var t=i.getService("qvLoader");function n(){var n=e?"DataModelViewer.ReloadInProgress":"DataModelViewer.RefreshingDataModel";var i={messageObj:{task:n},transparentBackground:true};t.show(i)}if(void 0===e)throw new Error("Reloading is undefined.");t.isOpen()?t.close().then(n):n()}function D(){var e=i.getService("qvLoader");e.close()}function A(){var t=0;var n=0;var i=0;var r=0;var o=Number.MAX_VALUE;var a=Number.MAX_VALUE;l().each(function(s,l){var c=e(l);t=Math.max(t,parseInt(c.css("left"),10));n=Math.max(n,parseInt(c.css("top"),10));i=Math.max(i,c.width());r=Math.max(r,c.height());o=Math.min(o,parseInt(c.css("left"),10));a=Math.min(a,parseInt(c.css("top"),10))});return{left:t,top:n,width:i,height:r,bottom:n+r,right:t+i,furthestLeft:o,furthestTop:a}}function T(e){var t=e.css("height");var n=e.find("ul").css("height");e.css("height","auto");e.find("ul").css("height","auto");var i=e.outerHeight();e.css("height",t);e.find("ul").css("height",n);return i}function O(e){var t=s(e);return T(t)}function k(e){var t=e.css("width");e.css("width","auto");var n=e.outerWidth();e.css("width",t);return n}function L(e){var t=s(e);return k(t)}function P(e){var t=Math.min(n.MIN_TABLE_RESIZE_WIDTH,k(e));return t}function M(e){return p(e)}return{encodeTableName:r,decodeTableName:o,decodeFieldName:a,setTablePosition:b,setTableSize:y,setTableContainerElementOpacity:C,getTableWidth:m,getTableWidthByTableName:g,getTableElementHeight:w,getMaxHeightForTable:T,getMaxWidthForTable:k,getMinWidthForTable:P,getTableElement:s,getFieldElement:c,getMinHeightForTable:M,getTableHeader:u,getTableHeaderHeightByTableName:f,getULHeight:h,getTableHeightByTableName:v,getTableElementTop:S,getTableElementLeft:q,getAllTableElements:l,getHighestHeightForAllTables:A,getMaxHeightForTableByName:O,getMaxWidthForTableByName:L,updateULHeightBasedOnTableHeight:x,fadeInLines:_,fadeOutLines:I,fadeInWorkingOverlay:E,fadeOutWorkingOverlay:D}}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(11),n(10),n(48)],r=function(e,t,n){var i={},r=false,o=false,a=null,s=null,l=null,c={wide:{w:16,h:9},regular:{w:4,h:3}},u={id:"",slide:"",action:""},d={id:null},f=0,p=199,h={},v;function g(t,n){var i=e(".qv-grid-story"),r=i.offset().left+1*n.width-t.outerWidth(),o=i.outerWidth()+i.offset().left-1*n.width,a=i.offset().top+1*n.height-t.outerHeight(),s=i.offset().top+i.outerHeight()-1*n.height;return[r,a,o,s]}function m(e,t,n){var i,r=e.outerHeight(),o=e.outerWidth(),a=e.offset(),s=t.offset(),l=t.outerHeight(),c=t.outerWidth();if(a.left+o<s.left+1*n.width){i=s.left+1*n.width-(a.left+o);e.css("left","+="+i)}if(a.top+r<s.top+1*n.height){i=s.top+1*n.height-(a.top+r);e.css("top","+="+i)}if(a.left+1*n.width>s.left+c){i=a.left+1*n.width-(s.left+c);e.css("left","-="+i)}if(a.top+1*n.height>s.top+l){i=a.top+1*n.width-(s.top+l);e.css("top","-="+i)}}function b(e,t){e=parseInt(e);while(e%t!==0&&e>t)e--;return e<t?t:e}function y(e,t){while(e%t!==0&&e>0)e++;return e}function x(e,t){var n="right"===t?"right":"left",i=e.position().top,r=e.outerWidth(),o=e.outerHeight(),a=e.position().left,s=e.offsetParent().width()-a-r,l=(100*i/e.offsetParent().height()).toFixed(5)+"%",c="right"===n?"auto":(100*a/e.offsetParent().width()).toFixed(5)+"%",u="left"===n?"auto":(100*s/e.offsetParent().width()).toFixed(5)+"%",d=(100*r/e.offsetParent().width()).toFixed(5)+"%",f=(100*o/e.offsetParent().height()).toFixed(5)+"%";return{top:l,left:c,right:u,width:d,height:f,"z-index":parseInt(e.css("z-index"),10)}}function S(e){var t=e.getBoundingClientRect(),n=document.getElementById("selectable").getBoundingClientRect(),i=t.top-n.top,r=t.left-n.left,o=t.width,a=t.height,s=(i/n.height*100).toFixed(2)+"%",l=(r/n.width*100).toFixed(2)+"%",c=(o/n.width*100).toFixed(2)+"%",u=(a/n.height*100).toFixed(2)+"%",d={top:s,left:l,width:c,height:u,"z-index":parseInt(e.style.zIndex,10)};return d}function w(){return i}function q(e){i=e}function C(e){r=e}function _(){return r}function I(e){l=e;t.element(".qv-storytelling-edit-toolbar").scope().$broadcast(e?"slideItemSelected":"slideItemDeselected")}function E(){return l}function D(e){function t(e,t){if(e.qData.rank<t.qData.rank)return-1;if(e.qData.rank>t.qData.rank)return 1;return 0}if(Array.isArray(e)&&e.length>0)return e.sort(t);return e}function A(e,t){var i=n.getService("$compile"),r=n.getService("$rootScope"),o="<div storytelling-thumbnail />",a=r.$new();a.slide={qInfo:{qId:t}};e.empty();e.append(i(o)(a))}function T(){n.getService("$timeout").cancel(v);i.showGrid=true}function O(){n.getService("$timeout").cancel(v);v=n.getService("$timeout")(function(){i.showGrid=false},2300)}return{getContainmentOnElement:g,slideItemOutsideSlide:m,decreaseValueUntilEvenSplit:b,increaseValueUntilEvenSplit:y,getElementPosition:x,getHelperPosition:S,getGridOptions:w,setGridOptions:q,showGridPattern:T,hideGridPattern:O,setPublishState:C,getPublishState:_,sortSlidesByRank:D,setSelectedSlideItemElem:I,getSelectedSlideItemElem:E,currentStoryId:a,currentSlideId:s,createSlideThumbnail:A,availableRatios:c,pasteOffset:f,lastObjPasted:u,lastObjAdded:d,isViewingSource:o,maxNumberOfSlideItems:p,selectionState:h}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(93)],r=function(e,t){function n(n){return n?e.resolve(n.enigmaModel):t.getApp()}var i={};i.get=function(e,t){return n(t).then(function(t){return t.getBookmark(e)})};i.apply=function(e,t){return n(t).then(function(t){return t.applyBookmark(e)})};i.create=function(e,t){return n(t).then(function(t){return t.createBookmark(e)})};i.remove=function(e,t){return n(t).then(function(t){return t.destroyBookmark(e)})};i.getList=function(e){return n(e).then(function(e){return e.getBookmarkListObject()})};i.getListLayout=function(e){return n(e).then(function(e){return e.getBookmarkList()})};return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(93),n(90),n(89)],r=function(e,t,n,i){e.service("qvColorMapService",[function(){var e="ColorMapModel_";function r(e){var t=null;return e.getLayout().then(function(e){e.colorMap&&(t=e.colorMap);return t?n.extend(true,{},t):null})}function o(e,t){var i=n.extend(true,{},t);return e.getProperties().then(function(t){if(t.colorMap){t.colorMap=i;return e.setProperties(t)}})}var a={getColorMap:function n(o,a){var s;s=a?i.resolve(a):t.getApp();if(!o)return i.resolve(null);return s.then(function(t){return t.getObject((e+o).toString()).then(function(e){return r(e)})}).catch(function(){return null})},setColorMap:function n(i,r){var a=(e+i).toString();return t.getApp().then(function(e){return e.getObject(a).catch(function(){return e.createObject({qInfo:{qType:"ColorMap",qId:a},colorMap:{}})}).then(function(e){return o(e,r)})})},deleteColorMap:function n(i){return t.getApp().then(function(t){return t.destroyObject((e+i).toString())})},getTemplate:function e(){return{colors:[],nul:null,oth:null,pal:null,single:null,usePal:null,autoFill:true}},getMeasureGradient:function e(n,r){var o;o=r?i.resolve(r):t.getApp();return o.then(function(e){return e.getMeasure(n).then(function(e){return e.getProperties().then(function(e){if(e&&e.qMeasure&&e.qMeasure.coloring)return e.qMeasure.coloring.gradient})})}).catch(function(){return null})}};return a}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(95),n(11),n(10),n(48),n(833),n(839),n(94),n(50),n(202)],r=function(e,t,n,i,r,o,a,s,l){i.service("qvGlobalSelectionsService",["$document","$timeout",function(i,c){var u={},d,f=false,p=null,h=[];function v(e){if(!e)return u[0];return u[m(e)]}function g(e,t){u[m(e)]=t}function m(e){return e&&e.id?e.id.toUpperCase():""}function b(e){function t(){var t=v(e);x(t)}function n(){var t=v(e);x(t);y(t)}return{$container:void 0,$app:e,$selectionCount:false,$showFields:false,getComponent:function e(){return s.isSmallDevice?o:r},setup:function e(){s.ViewChanged.bind(n);a.StateChanged.bind(t)},destroy:function e(){s.ViewChanged.unbind(n);a.StateChanged.unbind(t)}}}function y(e){e.$container=n.element("<div>");i.find("#global-selections-container").length>0?i.find("#global-selections-container").append(e.$container):i.find("body").append(e.$container);e.$container.showComponent(e.getComponent(),["$scope",function(t){t.app=e.$app}]);e.setup()}function x(e){if(e.$container){e.$container.remove();e.$container=void 0}h.forEach(function(e){e()});e.destroy()}function S(e){var t=v(e);if(!t){t=new b(e.enigmaModel);g(e,t)}return t}function w(e){return e&&void 0!==e.$container}function q(){e.publish("/toolbar/setContextItemsVisibility",d.getCaoActive()||d.isSelectActive())}function C(e){var n=l.getCurrentSheetInfo();if(w(e)){l.closeAnalysisOverlay(n.sheetId,n.appId);x(e);t("body").removeClass("qv-global-selections-enabled")}else{l.openAnalysisOverlay(n.sheetId,n.appId,a.States.selections);t("body").addClass("qv-global-selections-enabled");y(e)}q()}d={toggleGlobalSelection:function e(t){C(S(t))},off:function e(){Object.keys(u).forEach(function(e){x(u[e])})},isSelectActive:function e(t){var n=v(t);return!!(void 0!==t&&w(n))},getCaoActive:function e(){return f},setCaoActive:function e(t){c(function(){f=t;q()})},setCsShowCallback:function e(t){p=t},setCsShow:function e(t){p&&p(t)},setSelectionCount:function t(n,i){var r=S(i);r.$selectionCount=n;e.publish("/toolbar/invalidateMobileToolbar",n)},getSelectionCount:function e(t){var n=v(t)||{};return n.$selectionCount},setShowFields:function e(t,n){var i=S(n);i.$showFields=t},getShowFields:function e(t){var n=v(t)||{};return!!n.$showFields},onClose:function e(t){"function"===typeof t&&h.push(t)}};return d}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(48),n(283),n(90),n(102),n(10)],r=function(e,t,n,i,r){t.service("qvSelectionToolbarService",function(){var t,o,a;function s(e,t){var n=e[0].getBoundingClientRect(),i=t[0].getBoundingClientRect(),r,o,a,s;if(t.is("th, td")){o=t.closest("table")[0].getBoundingClientRect();r=t.prevAll();a=r.length?r.last():t;s=a[0].getBoundingClientRect();if(s.left-o.left===1)return{top:i.top-n.top,left:i.left-1-n.left,width:i.width}}return{top:i.top-n.top,left:i.left-n.left,width:i.width}}t={open:function t(r,l,c){var u=s(r,l),d={top:-44+u.top,width:u.width+(c.offsetWidth||0),left:u.left};c.toolbar=i.extend(true,c.toolbar,{position:d,menuMaxHeight:c.menuMaxHeight});o=e.element("<div>");a=o.showComponent(n,c);o.appendTo(r);this.Opened.emit()},refresh:function e(){a&&a.refresh()},close:function e(){if(a){a.close();this.Closed.emit();a=void 0}o&&o.remove()},confirm:function e(){if(a){a.confirm();a=void 0}this.close()}};r.create(t,"Closed");r.create(t,"Opened");return t})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e="q3TnObj";function t(){var t=JSON.parse(sessionStorage.getItem(e));null===t&&(t=JSON.parse(localStorage.getItem(e))||{});return t}function n(){return t()}function i(n){var i=t();if(!i[n]){i[n]={data:{view:"",scriptTabIndex:0},tab:"",analysis:{sheetId:"",state:""},story:{storyId:"",slideId:"",state:""}};sessionStorage.setItem(e,JSON.stringify(i));localStorage.setItem(e,JSON.stringify(i));return i[n]}return i[n]}function r(n,r,o,a){var s=i(n);var l=t();void 0===o&&(o=l[n].data.scriptTabIndex);a||(s.tab="data");s.data={view:r,scriptTabIndex:o};l[n]=s;localStorage.setItem(e,JSON.stringify(l));sessionStorage.setItem(e,JSON.stringify(l));return l[n]}function o(e){var n=t();if(n[e])return n[e].data;return"not_found"}function a(n,r,o,a){var s=i(o);var l=t();s.tab="analysis";s.analysis={sheetId:n,state:r,overlay:a};l[o]=s;localStorage.setItem(e,JSON.stringify(l));sessionStorage.setItem(e,JSON.stringify(l));return l[o]}function s(e){var n=t();if(n[e])return n[e].analysis;return"not_found"}function l(n,r,o,a){var s=i(a);var l=t();s.tab="story";s.story={slideId:n,storyId:o,state:r};l[a]=s;localStorage.setItem(e,JSON.stringify(l));sessionStorage.setItem(e,JSON.stringify(l));return l[a]}function c(e){var n=t();if(n[e])return n[e].story;return"not_found"}function u(n,r){var o=i(r);var a=t();o.tab=n;a[r]=o;localStorage.setItem(e,JSON.stringify(a));sessionStorage.setItem(e,JSON.stringify(a));return a[r]}function d(e){var n=t();if(n[e])return n[e].tab;return"not_found"}return{isInSession:n,setData:r,data:o,setSheet:a,analysis:s,setStory:l,story:c,setTab:u,tab:d}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={getCharacterCount:t,getCharacterIndexes:n,getIsCharacterEncapsulated:i,getNormalizedExpression:r,getFormattedAggregation:o};return e;function t(e,t){if(!e||!t)return 0;return e.split(t).length-1}function n(e,t){var n=[];if(!e||!t)return n;for(var i=0;i<e.length;i++){var r=e.charAt(i);r===t&&n.push(i)}return n}function i(e,n,i,r){if(!e||!i||!r)return false;var o=i===r;var a=t(e,i),s=t(e,r);var l=o?a>1:a+s>1;if(!l)return false;var c=e.substr(0,n),u=t(c,i);if(o){var d=a%2===0,f=u%2!==0;if(d)return f;var p=u>0&&u!==a;return p&&f}var h=t(c,r),v=a===s;if(v)return u>h;var g=u<h;if(g||0===s)return false;var m=a-s;return u<=m}function r(e){if(!e)return"";"="===e.charAt(0)&&(e=e.substr(1));var t=e.length-1;"["===e.charAt(0)&&"]"===e.charAt(t)&&(e=e.substring(1,t));return e}function o(e){if(!e)return"";return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(96),n(90),n(772)],r=function(e,t,n,i){var r,o=0;function a(){return".grid-object-dom-api-"+ ++o}function s(e,t){var n=e.getBoundingClientRect();return Math.round(n.bottom-t.bottom)<1}function l(e,t){var n=e.getBoundingClientRect();return Math.round(n.top-t.bottom)<1}function c(e,t){var n=t-e;return 1===n?t:Math.floor(e+n/2)}function u(e,t,n,i,r){var o=n-t,a=c(t,n),s=r(e[a],i);if(0===o)return s?a:-1;if(1===o)return s?a:u(e,t,t,i,r);return s?u(e,a,n,i,r):u(e,t,a,i,r)}r=e.extend({init:function e(t,n,i,r,o,s){s=s||".scroll-content";this.$element=t;this.$scrollArea=n;this.$scrollContent=n.find(s);this.rowSelector=i;this.firstRowSelector=r;this.lastRowSelector=o;this.namespace=a();this.direction="ltr"},destroy:function e(){this.unbindNativeScroll()},bindNativeScroll:function e(t){this.$scrollArea.on("scroll"+this.namespace,t)},unbindNativeScroll:function e(){this.$scrollArea.off(this.namespace)},resetNativeScroll:function e(){if("rtl"===this.direction&&i.getStartType()===i.RTL_SCROLL_START.POSITIVE){var t=this.getScrollWidth();var n=this.getScrollAreaClientWidth();var r=Math.max(0,t-n);this.$scrollArea.scrollLeft(r)}else this.$scrollArea.scrollLeft(0);this.$scrollArea.scrollTop(0)},preventNativeScroll:function e(){t(this.$scrollArea[0]).tap({id:this.namespace});return function(){t(this.$scrollArea[0]).off("tap",this.namespace)}.bind(this)},getBoundingBox:function e(){return this.$element[0].getBoundingClientRect()},getClientWidth:function e(){return this.$element[0].clientWidth},getClientHeight:function e(){return this.$element[0].clientHeight},getNativeScrollOffsetLeft:function e(){return this.$element[0].scrollLeft},getScrollWidth:function e(){return this.$scrollArea[0].scrollWidth},getScrollAreaBoundingBox:function e(){return this.$scrollArea[0].getBoundingClientRect()},getScrollAreaClientWidth:function e(){return this.$scrollArea[0].clientWidth},getScrollAreaClientHeight:function e(){return this.$scrollArea[0].clientHeight},getScrollAreaOffsetTop:function e(){return this.$scrollArea[0].offsetTop},getScrollContentBoundingBox:function e(){return this.$scrollContent[0].getBoundingClientRect()},getFirstRow:function e(){return this.$scrollArea.find(this.firstRowSelector)},getLastRow:function e(){return this.$scrollArea.find(this.lastRowSelector)},getRows:function e(){var t=this.$element[0].querySelectorAll(this.rowSelector);t=Array.prototype.slice.call(t);return t.filter(function(e){return e.nodeType===Node.ELEMENT_NODE})},getHeightOfRow:function e(t){var n=this.getRows();if(n[t]){var i=n[t];return i.getBoundingClientRect().height}},getPartiallyVisibleRowCount:function e(){var t=this.getRows();if(0===t.length)return 0;var n=this.getScrollAreaBoundingBox(),i=u(t,0,t.length-1,n,l)+1;return i},getVisibleRowCount:function e(t){var i=this.getRows();if(0===i.length)return 0;var r=this.getScrollAreaBoundingBox(),o=u(i,0,i.length-1,r,s)+1;if(o===i.length&&n.isNumeric(t)){var a=i[i.length-1],l=a.getBoundingClientRect(),c=Math.round(r.bottom-l.bottom);o+=Math.floor(c/t)}return o},alignToFirstRow:function e(){var t=this.getFirstRow(),n=48;return function(){var e=t.position().top-n;this.$scrollArea.scrollTop(e)}.bind(this)},alignToLastRow:function e(){var t=this.getLastRow(),n=48;return function(){this.$scrollArea.scrollTop(0);var e=t.position().top-this.getScrollAreaBoundingBox().height+t[0].getBoundingClientRect().height+n;this.$scrollArea.scrollTop(e)}.bind(this)},setDirection:function e(t){this.direction=t}});return r}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){return Math.round(100*e)/100}return{recalculateBounds:function e(t,n,i,r,o){if(t.bounds){var a;var s={x:t.bounds.x,y:t.bounds.y,width:t.bounds.width,height:t.bounds.height};if(n!==r){a=r/n;s.x=s.x/a;s.width=s.width/a}if(i!==o){a=o/i;s.y=s.y/a;s.height=s.height/a}return s}return this.getBounds(t,r,o)},compareBounds:function e(t,n){return t&&n&&t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height},alignToGrid:function e(t,n){if(n.bounds){var i=this.getAligmentToGrid(n.bounds,t.columns,t.rows);n.row=i.row;n.col=i.col;n.rowspan=i.rowspan||1;n.colspan=i.colspan||1}return n},getAligmentToGrid:function t(n,i,r){var o={};o.row=Math.ceil(e(n.y/100*r));o.col=Math.ceil(e(n.x/100*i));o.rowspan=Math.floor(e(n.y/100*r+n.height/100*r))-o.row;o.colspan=Math.floor(e(n.x/100*i+n.width/100*i))-o.col;return o},getInfluenceOnGrid:function t(n,i,r){var o=n;var a={};a.row=Math.floor(e(o.y/100*r));a.col=Math.floor(e(o.x/100*i));a.rowspan=Math.ceil(e(o.y/100*r+o.height/100*r))-a.row;a.colspan=Math.ceil(e(o.x/100*i+o.width/100*i))-a.col;return a},getBounds:function e(t,n,i){return{y:t.row/i*100,x:t.col/n*100,width:t.colspan/n*100,height:t.rowspan/i*100}},splitBounds:function e(t,n,i,r){var o;var a;if("left"===n||"right"===n){o=i%2;a=t.width/i*(i-o)/2;return{near:{width:a,x:t.x,y:t.y,height:t.height},far:{width:t.width/i*(i+o)/2,x:t.x+a,y:t.y,height:t.height}}}o=r%2;a=t.height/r*(r-o)/2;return{near:{width:t.width,x:t.x,y:t.y,height:a},far:{width:t.width,x:t.x,y:t.y+a,height:t.height/r*(r+o)/2}}},calculateCollapseHeight:function e(t,n){var i=0;for(var r=0;r<n.length;r++)n[r].row+n[r].rowspan>i&&(i=n[r].row+n[r].rowspan);var o=Math.floor(t.height-t.height*(i/t.rows));return o},calculateExtendedRowsAndHeight:function e(t,n){var i={height:t.height,rows:t.rows};t.height||(t.height=100);i.height=t.height+n;i.height<100&&(i.height=100);var r=i.rows/t.height*100;i.rows=Math.floor(r*i.height/100);return i}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e;return{setServerNodeId:function t(n){e=n},getServerNodeId:function t(){return e}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90),n(89),n(3),n(325)],r=function(e,t,n,i){var r={};var o=void 0;r.getApi=function(r,a,s,l,c,u,d){s=s||window.location.protocol.indexOf("https")>-1;l=l||window.location.hostname;c=c||window.location.port;u=u||e.basePath;var f=new t;var p=(s?"https":"http")+"://"+l+(c?":"+c:"")+(u||"/");var h=p+r;var v=h+"/"+a;var g=function t(i){var r=n.getConfig();r.withCredentials&&(i.credentials="include");r.csrfToken&&i.method&&"GET"!==i.method&&(i.headers["qlik-csrf-token"]=r.csrfToken);r.clientApiKey&&(i.headers["qlik-client-api-key"]=r.clientApiKey);var o=e.getRandomString(16);i.headers["X-Qlik-XrfKey"]=o;d&&(i.headers["X-Qlik-ServerNodeId"]=d);-1!==i.url.indexOf("?")?i.url=i.url+"&xrfkey="+o:i.url=i.url+"?xrfkey="+o;return i};var m=function e(t){o&&o(t);return t};var b={scheme:s?"https":"http",usePromise:true,requestInterceptor:g,responseInterceptor:m};var y=new i(v,b);y.then(function(e){e.spec.basePath=u+r;e.spec.servers&&(e.spec.servers[0].url=h);f.resolve(e)},function(e){window.console.log("Failed to create api:"+e);o&&o(e);f.reject(e)});return f.promise};r.registerSessionTimeoutCheck=function(e){o=e};return r}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(127)],r=function(e,t){var n={a:65,alt:18,b:66,backspace:8,c:67,ctrl:17,d:68,del:46,down:40,e:69,end:35,f:70,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,enter:13,esc:27,g:71,h:72,home:36,i:73,insert:45,j:74,k:75,l:76,left:37,m:77,n:78,o:79,p:80,pagedown:34,pageup:33,q:81,r:82,right:39,s:83,shift:16,space:32,t:84,tab:9,u:85,up:38,v:86,w:87,win:224,x:88,y:89,z:90,cmd:91,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,0:48,"*":106},i="qvKeyboardShortcuts",r=false,o;function a(){this.groups=[];this.shortcuts=[];this.timer={id:null};this.isReleased=true;this.currentEvent=void 0}a.prototype.createGroup=function(e,t){var n=this,i,r;for(r=0;r<this.groups.length;r++)if(this.groups[r].name===e){i=this.groups[r];break}if(!i){i={name:e,priority:t,active:false,shortcuts:[]};this.groups.push(i);this.groups.sort(function(e,t){return e.priority-t.priority})}return{registerKeys:function e(t,r,o){n.registerKeys(i,t,r,o)},unregisterKeys:function e(t,n){var r=i.shortcuts;for(var o=0;o<r.length;o++)if(r[o].keyCombo===t&&r[o].callback===n){r.splice(o,1);break}},on:function e(){n.activateGroup(i)},off:function e(){n.deactivateGroup(i)},delete:function e(){n.deactivateGroup(i);n.deleteGroup(i)}}};a.prototype.activateGroup=function(t){var n=this;t.active=true;if(!r){r=true;e(document).on("keydown."+i,function(e){n.handleEvent(e)})}};a.prototype.deactivateGroup=function(t){var n;t.active=false;n=this.groups.reduce(function(e,t){t.active&&e++;return e},0);if(0===n&&r){r=false;e(document).off("keydown."+i)}};a.prototype.deleteGroup=function(e){this.groups=this.groups.filter(function(t){return t!==e})};a.prototype.registerKeys=function(e,t,i,r){var o=t.toLowerCase().split("+"),a={keyCombo:t,ctrlKey:false,shiftKey:false,altKey:false,keyCode:null,name:"",callback:null,allowInAllContexts:!!(r&&"allowInInput"in r)&&r.allowInInput,preventDefault:!(r&&"preventDefault"in r)||r.preventDefault,delay:r&&"delay"in r?r.delay:250};for(var s in n)for(var l=0;l<o.length;l++){a.name=t.toLowerCase();a.callback=i;"ctrl"!==o[l]&&"cmd"!==o[l]||(a.ctrlKey=true);"alt"===o[l]&&(a.altKey=true);"shift"===o[l]&&(a.shiftKey=true);o[l]===s&&17!==n[s]&&16!==n[s]&&91!==n[s]&&18!==n[s]&&(a.keyCode=n[s])}e.shortcuts.push(a)};a.prototype.preventDefault=function(){this.currentEvent&&this.currentEvent.preventDefault()};a.prototype.handleEvent=function(e){var i=this;this.currentEvent=e;function r(t,r,a,s){var l,c;for(var u=0;u<i.groups.length;u++){l=i.groups[u];if(l.active)for(var d=l.shortcuts.length-1;d>=0;d--){c=l.shortcuts[d];if((c.keyCode===n["*"]||c.keyCode===s&&c.ctrlKey===t&&c.shiftKey===r&&c.altKey===a)&&!o(e,c))break}}}function o(e,n){var i=t.isInput(document.activeElement);return!(i&&!n.allowInAllContexts)&&a(e,n)}function a(e,t){t.preventDefault&&e.preventDefault();if("number"!==typeof i.timer.id){t.delay>0&&(i.timer.id=setTimeout(function(){s()},t.delay));if(true===t.callback(t,e)){s();return true}}}function s(){clearTimeout(i.timer.id);delete i.timer.id}e.shiftKey?!e.ctrlKey&&!e.metaKey||e.altKey?e.ctrlKey||e.metaKey||!e.altKey?r(false,true,false,e.which):r(false,true,true,e.which):r(true,true,false,e.which):!e.ctrlKey&&!e.metaKey||e.altKey?e.ctrlKey||e.metaKey||!e.altKey?r(false,false,false,e.which):r(false,false,true,e.which):r(true,false,false,e.which)};o=new a;return o}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(113),n(100),n(101),n(216),n(195)],r=function(e,t,n,i,r){var o=1e3;var a=r.baseColor;function s(e){return true!==n.getValue(e,"color.reverseScheme")}function l(e){return"byExpression"===n.getValue(e,"color.mode")&&false===n.getValue(e,"color.expressionIsColor")}function c(e){return"byExpression"===n.getValue(e,"color.mode")&&true===n.getValue(e,"color.expressionIsColor")}function u(e){var t=i.getDimensionLayouts(e)[0];return t&&t.qCardinal>o}function d(e){return"byDimension"===e.color.mode&&!(n.getValue(e,"color.byDimDef.activeDimensionIndex")>-1)||"byMeasure"===e.color.mode&&!(n.getValue(e,"color.byMeasureDef.activeMeasureIndex")>-1)}function f(){var e=[];var n=t.dataPalettes;n.forEach(function(t){if("true"!==t.disabled){var n={type:"classes",component:"color-scale",translation:t.translation||t.name,value:t.propertyValue};"pyramid"===t.type?n.colors=t.scale[t.scale.length-1]:n.colors=t.scale;e.push(n)}});return e}function p(){var e=[];var n=t.scales;n.forEach(function(t){if(!t.disabled){var n={component:"color-scale",reverse:this.helpers.schemeIsReverse,translation:t.translation||t.name,value:t.propertyValue};if("class-pyramid"===t.type){n.colors=t.scale[t.scale.length-1];n.type="classes"}else{n.colors=t.scale;n.type="gradient"}e.push(n)}},this);return e}function h(e){if(!e)return false;if(e.coloring&&e.coloring.baseColor&&e.coloring.baseColor.color)return e.coloring.baseColor;if(e.baseColor&&e.baseColor.color)return e.baseColor;return false}function v(e){return n.getValue(e,"layout.qHyperCube.qMeasureInfo",[]).filter(function(e){return!!h(e)}).length>0}function g(e){var t=n.getValue(e,"layout.layers",false);return t?t.filter(function(e){return n.getValue(e,"qHyperCube.qDimensionInfo",[]).filter(function(e){return!!h(e)}).length>0}).length>0:n.getValue(e,"layout.qHyperCube.qDimensionInfo",[]).filter(function(e){return!!h(e)}).length>0}function m(e,t){var i=n.getValue(e,t,void 0);if(!i||"undefined"===typeof i.label)return;"="===i.label.charAt(0)?e.color.altLabel={qStringExpression:{qExpr:i.label.substr(1)}}:e.color.altLabel=i.label}function b(e){return!n.getValue(e,"color.auto")&&"byDimension"===n.getValue(e,"color.mode")}function y(e){return!n.getValue(e,"color.auto")&&"byMeasure"===n.getValue(e,"color.mode")}function x(e,t){var n=y(e),i=b(e);if(!n&&!i)return;var r=n?e.color.byMeasureDef:e.color.byDimDef;r.label=t}var S={showLegend:function e(t){var r=n.getValue(t,"color.auto"),o=n.getValue(t,"color.mode"),a=n.getValue(t,"color.expressionIsColor"),s=i.getNumDimensions(t),l=i.getNumMeasures(t);return r&&(s>1||l>1)||!r&&"primary"!==o&&("byExpression"!==o||!a)},colorModeOptions:{primary:function e(){return true},dimension:function e(t){return i.getNumDimensions(t)>0&&i.getNumMeasures(t)<=1},multiColor:function e(t){return i.getNumMeasures(t)>1},measure:function e(t){return i.getNumDimensions(t)>0},expression:function e(t){return i.getNumMeasures(t)>=1}},persistentColorsShow:function e(t){return!n.getValue(t,"color.auto")&&"byDimension"===n.getValue(t,"color.mode")&&i.getNumMeasures(t)<=1},useDimValColShow:function e(t){void 0===n.getValue(t,"color.useDimColVal")&&n.setValue(t,"color.useDimColVal",false);return!n.getValue(t,"color.auto")&&"byDimension"===n.getValue(t,"color.mode")&&"libraryItem"===n.getValue(t,"color.byDimDef.type")},expressionLabelChange:function e(t){var i=n.getValue(t,"qHyperCubeDef.qMeasures.0.qAttributeExpressions.0"),r=n.getValue(t,"color");if(i){i.label=n.getValue(t,"color.expressionLabel");r&&(r.colorExpression=i.qExpression)}},attributeExpressionChange:function e(t){var i=n.getValue(t,"qHyperCubeDef.qMeasures.0.qAttributeExpressions.0"),r=n.getValue(t,"color");if(i){i.id="colorByExpression";r&&(r.colorExpression=i.qExpression)}},attributeExpressionGlobalChange:function e(t){var i=n.getValue(t,"qHyperCubeDef.qMeasures",[]),r=n.getValue(t,"qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures",[]),o,a,s,l=null,c=function e(t,n){"colorByExpression"===t.id&&(a=n)};if(i.length+r.length>1){for(o=r.length-1;o>=0;--o){s=r[o].qAttributeExpressions||[];a=-1;s.every(c);a>=0&&(l=s.splice(a,1)[0])}for(o=i.length-1;o>=0;--o){s=i[o].qAttributeExpressions||[];a=-1;s.every(c);a>=0&&(l=s.splice(a,1)[0])}if(i.length){!i[0].qAttributeExpressions&&l&&(i[0].qAttributeExpressions=[]);l&&i[0].qAttributeExpressions.splice(0,0,l)}}var u=n.getValue(t,"color.colorExpression");1!==i.length||i[0].qAttributeExpressions&&0!==i[0].qAttributeExpressions.length||!u||(i[0].qAttributeExpressions=[{qExpression:u,id:"colorByExpression"}])},colorByGlobalChange:function e(t,n,i){r.colorByUpdater(t,i)},colorByDimensionChange:function e(t){m(t,"color.byDimDef")},colorByMeasureChange:function e(t){m(t,"color.byMeasureDef")},colorByLabelChange:function e(t){var i=n.getValue(t,"color.altLabel",""),r=i.qStringExpression?"="+i.qStringExpression.qExpr:i;if("="===r)return;x(t,r)}};var w={colorModeOptions:{primary:function e(){return true},dimension:function e(){return true},multiColor:function e(){return false},measure:function e(){return true},expression:function e(t){return i.getNumMeasures(t)>=1}},showLegend:function e(t){var i=n.getValue(t,"color.auto"),r=n.getValue(t,"color.expressionIsColor"),o=n.getValue(t,"color.mode");return!(!i&&"primary"===o||!i&&"byExpression"===o&&(r||void 0===r))},persistentColorsShow:function e(t){return!n.getValue(t,"color.auto")&&"byDimension"===n.getValue(t,"color.mode")},dimPrimaryMode:true};var q={colorModeOptions:{primary:function e(){return true},dimension:function e(){return true},multiColor:function e(){return false},measure:function e(){return true},expression:function e(t){return i.getNumMeasures(t)>=1}},showLegend:function e(t){return"primary"!==n.getValue(t,"color.mode")&&!n.getValue(t,"color.auto")},persistentColorsShow:function e(t){return!n.getValue(t,"color.auto")&&"byDimension"===n.getValue(t,"color.mode")}};var C={colorModeOptions:{primary:function e(){return true},dimension:function e(t){return i.getNumDimensions(t)>1},multiColor:function e(t){return i.getNumMeasures(t)>1},measure:function e(t){return i.getNumDimensions(t)<=1},expression:function e(t){return i.getNumMeasures(t)>=1}}};var _={colorModeOptions:{primary:function e(){return true},dimension:function e(t){return i.getNumDimensions(t)>=1},multiColor:function e(t){return i.getNumMeasures(t)>1},measure:function e(t){return i.getNumDimensions(t)>=1},expression:function e(t){return i.getNumDimensions(t)>=1}}};var I={colorModeOptions:{primary:function e(){return true},dimension:function e(){return true},multiColor:function e(){return false},measure:function t(){return e.COLOR_BY_MEA},expression:function e(t){return i.getNumDimensions(t)>=1}}};var E={scatterplot:q,piechart:w,linechart:C,map:_,distributionplot:I};function D(e,t){var n=E[e]||S;return n[t]||S[t]}var A=function e(r,o){var h=D(o,"colorModeOptions"),m=D(o,"persistentColorsShow"),x=D(o,"useDimValColShow"),S=D(o,"expressionLabelChange"),w=D(o,"attributeExpressionChange"),q=D(o,"attributeExpressionGlobalChange"),C=D(o,"colorByGlobalChange"),_=D(o,"colorByDimensionChange"),I=D(o,"colorByMeasureChange"),E=D(o,"colorByLabelChange");this.helpers={schemeIsReverse:s,showCompressionResolution:u,colorModeOptions:h,getMeasureSchemeOptions:p.bind(this),getDimensionSchemeOptions:f};this.color={colorMode:{options:function e(t){var e=[];"explore"===r&&e.push({value:"auto",translation:"Common.Auto"});h.primary(t)&&e.push({value:"primary",translation:"properties.colorMode.primary"});h.multiColor(t)&&e.push({value:"byMultiple",translation:"properties.colorMode.multicolored"});h.dimension(t)&&e.push({value:"byDimension",translation:"properties.colorMode.byDimension"});h.measure(t)&&e.push({value:"byMeasure",translation:"properties.colorMode.byMeasure"});h.expression(t)&&"explore"!==r&&e.push({value:"byExpression",translation:"properties.colorMode.byExpression"});return e},show:function e(t){return!n.getValue(t,"color.auto")}},paletteColor:{show:function e(i,r){if(!n.getValue(i,"color.paletteColor")){var o=t.resolveColor(n.getValue(i,"color.singleColor"));var s={index:-1,color:o};n.setValue(i,"color.paletteColor",s)}return!n.getValue(i,"color.auto")&&"primary"===n.getValue(i,"color.mode")&&!(a.isSupported(i.visualization)&&v(r)&&"measure"===n.getValue(i,"color.useBaseColors")||g(r)&&"dimension"===n.getValue(i,"color.useBaseColors"))},defaultValue:function e(){var n=t.dataColors.primaryColor;var i=t.currentPalette.indexOf(n);return{index:-1===i?Math.min(6,t.currentPalette.length-1):i}}},colorBy:{globalChange:C,dimension:{show:b,change:_},measure:{show:y,change:I},label:{show:function e(t){return!n.getValue(t,"color.auto")&&d(t)&&("byDimension"===n.getValue(t,"color.mode")&&"libraryItem"!==n.getValue(t,"color.byDimDef.type")||"byMeasure"===n.getValue(t,"color.mode")&&"libraryItem"!==n.getValue(t,"color.byMeasureDef.type"))},change:E}},baseColor:{show:function e(t,i){var r=n.getValue(t,"color.mode");return!n.getValue(t,"color.auto")&&("byMultiple"===r||"primary"===r)&&(v(i)&&a.isSupported(t.visualization)||g(i))},showColors:function e(t,i){return!n.getValue(t,"color.auto")&&"byMultiple"===n.getValue(t,"color.mode")&&"measure"===n.getValue(t,"color.useBaseColors")&&a.isSupported(t.visualization)&&i.layout.qHyperCube.qMeasureInfo.length>1&&v(i)},hasMeasureColor:function e(t){return v(t)},hasDimensionColor:function e(t){return g(t)},isSupported:function e(t){return a.isSupported(t)}},persistentColors:{show:function e(t){if(x(t))return m(t)&&!n.getValue(t,"color.useDimColVal");return m(t)},readOnly:function e(t){return n.getValue(t,"qHyperCubeDef.qDimensions.length")>1}},useDimColVal:{show:x},attributeExpression:{change:w,globalChange:q,show:function e(t){return!n.getValue(t,"color.auto")&&"byExpression"===n.getValue(t,"color.mode")&&i.getNumMeasures(t)>0}},expressionIsColor:{show:function e(t){return!n.getValue(t,"color.auto")&&"byExpression"===n.getValue(t,"color.mode")&&i.getNumMeasures(t)>0}},expressionLabel:{change:S,show:function e(t){return!n.getValue(t,"color.auto")&&l(t)&&i.getNumMeasures(t)>0}},colorSchemeMeasure:{show:function e(t){return!n.getValue(t,"color.auto")&&("byMeasure"===n.getValue(t,"color.mode")||l(t))}},reverseScheme:{show:function e(t){return!n.getValue(t,"color.auto")&&("byMeasure"===n.getValue(t,"color.mode")||l(t))}},colorSchemeDimension:{show:function e(t,i){return(!x(t)||!n.getValue(t,"color.useDimColVal"))&&!n.getValue(t,"color.auto")&&("byDimension"===n.getValue(t,"color.mode")||"byMultiple"===n.getValue(t,"color.mode"))&&!("measure"===n.getValue(t,"color.useBaseColors")&&a.isSupported(t.visualization)&&v(i)&&("byMultiple"===n.getValue(t,"color.mode")||n.getValue(t,"color.auto")&&i.layout.qHyperCube.qMeasureInfo.length>1))}},customRange:{show:function e(t){return!n.getValue(t,"color.auto")},autoMinMax:{show:function e(t){return"byMeasure"===n.getValue(t,"color.mode")||l(t)}},min:{show:function e(t){return("byMeasure"===n.getValue(t,"color.mode")||l(t))&&false===n.getValue(t,"color.autoMinMax")},invalid:function e(t){if("minMax"===n.getValue(t,"color.minMax"))return n.getValue(t,"color.measureMin")>=n.getValue(t,"color.measureMax");return false}},max:{show:function e(t){return("byMeasure"===n.getValue(t,"color.mode")||l(t))&&false===n.getValue(t,"color.autoMinMax")},invalid:function e(t){if("minMax"===n.getValue(t,"color.minMax"))return n.getValue(t,"color.measureMin")>=n.getValue(t,"color.measureMax");return false}}}};var A=D(o,"showLegend");this.legend={show:A,showTitle:{show:function e(t){return n.getValue(t,"legend.show")&&A(t)&&!c(t)}},dock:{show:function e(t){return n.getValue(t,"legend.show")&&A(t)}}}};return{getLogicFor:function e(t,n){return new A(t,n)}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90),n(492)],r=function(e,t){var n={dimension:"dimension",measure:"measure",temporal:"temporal"};function i(e,t){t&&e.map(function(e){var n=void 0;var i=void 0;var r=void 0;var o=t._getFields(e.qName,e.qSrcTables);if(o.length>0){n=t.getClassifications(e.qName,e.qSrcTables);i=t.getDataTypes(e.qName,e.qSrcTables);r=t.getDefaultAggregation(e.qName,e.qSrcTables)}e["defaultAggregation"]=r;e["classifications"]=n;e["dataTypes"]=i})}function r(e){if(e&&e.length>0){var n=e[0];return t.ClassificationHelper.isDimension(n)}return false}function o(e){if(e&&e.length>0){var n=e[0];return t.ClassificationHelper.isMeasure(n)}return false}function a(t){return e.escapeField(t)}function s(t,n){if("countdistinct"===n.toLowerCase())return"Count(distinct "+e.escapeField(t)+")";return n+"("+e.escapeField(t)+")"}function l(e){if(e)return e.replace(/=|\[|\]/g,"").toLowerCase();return e}function c(e){if(e)return e.replace(/^=/,"");return e}var u={Constants:n,isDimension:r,isMeasure:o,getDimensionExpression:a,getMeasureExpression:s,normalizeExpression:l,addClassificationDataToFields:i,convertEvaluationExpressionToLabel:c};return u}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={SYMBOLS:{FUNCTION:{LEFT:"(",RIGHT:")"},FIELD:{LEFT:"[",RIGHT:"]"},STRING:{LEFT:"'",RIGHT:"'"}},OPERATORS:{SINGLES:["=","+","-","*","/","<",">","&"],MULTIPLES:["<=",">=","<>",">>","<<"],WORDS:["precedes","follows","bitnot","bitand","bitor","bitxor","not","and","or","xor","like"]},COMMON_FUNCTIONS:["sum","count","avg","min","max"],FALLBACK_FUNCTION:"count",QUALIFIERS:["total","distinct","nodistinct"]};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11)],r=function(e){var t={},n=function t(){return e.extend.apply(e,[true].concat(Array.prototype.slice.call(arguments)))},i=e.isPlainObject,r=Array.isArray,o=function e(t){return"undefined"===typeof t},a=function e(t){return"function"===typeof t};function s(e){e&&(e=n({},{val:e}).val);return e}function l(e,t){return a(e[t])||"$$"===t.substring(0,2)||"_"===t.substring(0,1)}function c(e,t){var n="/",i=t.substring(1).split(n).slice(0,-1),r;i.forEach(function(t,n){if(n===i.length)return;r=+t;e[r||t]=o(e[r||t])?Number.isNaN(+r)?{}:[]:e[t];e=e[r||t]});return e}function u(e){Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);n.configurable&&!l(e,t)&&delete e[t]})}function d(e,t){var n=true,o,a;if(i(e)&&i(t)){if(Object.keys(e).length!==Object.keys(t).length)return false;Object.keys(e).forEach(function(i){if(!d(e[i],t[i])){n=false;return false}});return n}if(r(e)&&r(t)){if(e.length!==t.length)return false;for(o=0,a=e.length;o<a;o++)if(!d(e[o],t[o]))return false;return true}return e===t}function f(e,n,i){var r=[],a=e.slice(),s,l,c=-1;function u(e,t,n){if(e[n]&&o(e[n].qInfo))return null;if(e[n]&&e[n].qInfo.qId===t)return n;for(var i=0,r=e.length;i<r;i++)if(e[i]&&e[i].qInfo.qId===t)return i;return-1}if(d(n,a))return r;if(null===n[0]||!o(n[0])&&o(n[0].qInfo)){r.push({op:"replace",path:i,value:n});return r}for(s=a.length-1;s>=0;--s){c=u(n,a[s]&&a[s].qInfo&&a[s].qInfo.qId,s);if(-1===c){r.push({op:"remove",path:i+"/"+s});a.splice(s,1)}else r=r.concat(t.generate(a[s],n[c],i+"/"+s))}for(s=0,l=n.length;s<l;++s){c=u(a,n[s]&&n[s].qInfo&&n[s].qInfo.qId);if(-1===c){r.push({op:"add",path:i+"/"+s,value:n[s]});a.splice(s,0,n[s])}else if(c!==s){r.push({op:"move",path:i+"/"+s,from:i+"/"+c});a.splice(s,0,a.splice(c,1)[0])}}return r}t.generate=function(e,n,a){a=a||"";var c=[];Object.keys(n).forEach(function(u){var p=s(n[u]),h=e[u],v=a+"/"+u;if(d(p,h)||l(n,u))return;o(h)?c.push({op:"add",path:v,value:p}):i(p)&&i(h)?c=c.concat(t.generate(h,p,v)):r(p)&&r(h)?c=c.concat(f(h,p,v)):c.push({op:"replace",path:a+"/"+u,value:p})});Object.keys(e).forEach(function(t){o(n[t])&&!l(e,t)&&c.push({op:"remove",path:a+"/"+t})});return c};t.apply=function(e,t){t.forEach(function(t){var o=c(e,t.path),a=t.path.split("/").splice(-1)[0],s=a&&Number.isNaN(+a)?o[a]:o[+a]||o,l=t.from?t.from.split("/").splice(-1)[0]:null;if("add"===t.op||"replace"===t.op)if(r(o)){"-"===a&&(a=o.length);o.splice(+a,"add"===t.op?0:1,t.value)}else if(r(s)&&r(t.value)){var d=t.value.slice();s.length=0;s.push.apply(s,d)}else if(i(s)&&i(t.value)){u(s);n(s,t.value)}else o[a]=t.value;else if("move"===t.op){var f=c(e,t.from);if(r(o))o.splice(+a,0,f.splice(+l,1)[0]);else{o[a]=f[l];delete f[l]}}else"remove"===t.op&&(r(o)?o.splice(+a,1):delete o[a])})};t.clone=function(e){return n({},e)};t.createPatch=function(e,t,n){var i={op:e.toLowerCase(),path:n};"move"===i.op?i.from=t:"undefined"!==typeof t&&(i.value=t);return i};t.updateObject=function(e,i){if(!Object.keys(e).length){n(e,i);return}t.apply(e,t.generate(e,i))};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(90),n(447),n(125),n(101),n(156),n(91),n(195),n(204),n(160),n(624)],r=function(e,t,n,i,r,a,s,l,c,u){var d,f,p,h,v,g,m=Math.pow(2,53)-1;function b(e,t,n){t.hasOwnProperty(e)&&(n[e]=t[e])}function y(e,t,n,i){t.hasOwnProperty(e)?n[e]=t[e]:n[e]=i}function x(t,n){var r=e.extend(true,{},n,t);i.getValue(r,"qOtherTotalSpec.qOtherCounted")||i.setValue(r,"qOtherTotalSpec.qOtherCounted",{qv:"10"});i.getValue(r,"qOtherTotalSpec.qOtherLimit")||i.setValue(r,"qOtherTotalSpec.qOtherLimit",{qv:"0"});r.hasOwnProperty("othersLabel")||(r.othersLabel=a.get("properties.dimensionLimits.others"));return r}function S(t,n){return e.extend(true,{},n,t)}function w(e){return-1!==["qMetaDef","descriptionExpression","labelExpression"].indexOf(e)}d={exportProperties:function r(o,a){var s=new t,l=o.qProperty,c=a?i.getValue(l,a).qHyperCubeDef:l.qHyperCubeDef,u=s.data[0],d,f,p;c.qInterColumnSortOrder||(c.qInterColumnSortOrder=[]);for(d=0;d<c.qDimensions.length;++d)u.dimensions.push(c.qDimensions[d]);if(c.qLayoutExclude&&c.qLayoutExclude.qHyperCubeDef&&c.qLayoutExclude.qHyperCubeDef.qDimensions)for(d=0;d<c.qLayoutExclude.qHyperCubeDef.qDimensions.length;++d)u.excludedDimensions.push(c.qLayoutExclude.qHyperCubeDef.qDimensions[d]);for(d=0;d<c.qMeasures.length;++d)u.measures.push(c.qMeasures[d]);if(c.qLayoutExclude&&c.qLayoutExclude.qHyperCubeDef&&c.qLayoutExclude.qHyperCubeDef.qMeasures)for(d=0;d<c.qLayoutExclude.qHyperCubeDef.qMeasures.length;++d)u.excludedMeasures.push(c.qLayoutExclude.qHyperCubeDef.qMeasures[d]);u.interColumnSortOrder=c.qInterColumnSortOrder.concat();if(c.qLayoutExclude&&c.qLayoutExclude.qHyperCubeDef&&c.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder){var h=c.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder.concat();n.isOrderedSubset(h,u.interColumnSortOrder)&&(u.interColumnSortOrder=h)}delete c.qLayoutExclude;for(f in l)s.properties[f]=l[f];if(a){s.properties.qHyperCubeDef=i.getValue(l,a).qHyperCubeDef;delete i.getValue(l,a).qHyperCubeDef}l.qLayoutExclude||(l.qLayoutExclude={});if(l.qLayoutExclude.disabled){for(f in l.qLayoutExclude.disabled){p=f;s.properties.hasOwnProperty(p)||(s.properties[p]=l.qLayoutExclude.disabled[f])}delete l.qLayoutExclude.disabled}if(l.qLayoutExclude.changed){_(l);delete l.qLayoutExclude.changed}l.qLayoutExclude.quarantine&&!e.isEmpty(l.qLayoutExclude.quarantine)||delete l.qLayoutExclude;return s},importProperties:function t(i,o,a,s){var l={qChildren:[]},c={},u=i.data[0],d,f,p,h,v={layout:{templateId:o.templateId}};a.mapProperties(v);var g=a.getDefaultDimensionProperties();var C=a.getDefaultMeasureProperties();var _=a.data&&a.data.measures;_||(_=a.definition&&a.definition.items&&a.definition.items.measures||{max:0});var I="function"===typeof _.max?_.max(u.dimensions.length):Number.isNaN(+_.max)?m:_.max;var E="function"===typeof _.min?_.min(u.dimensions.length):Number.isNaN(+_.min)?0:_.min;var D=a.data&&a.data.dimensions;D||(D=a.definition&&a.definition.items&&a.definition.items.dimensions||{max:0});var A="function"===typeof D.max?D.max(I):Number.isNaN(+D.max)?m:D.max;var T="function"===typeof D.min?D.min(E):Number.isNaN(+D.min)?0:D.min;c.qLayoutExclude||(c.qLayoutExclude={});c.qLayoutExclude.disabled={};c.qLayoutExclude.quarantine={};for(f in i.properties)"qLayoutExclude"===f?i.properties[f].quarantine&&(c.qLayoutExclude.quarantine=e.extend(true,{},i.properties[f].quarantine)):"qHyperCubeDef"===f&&s||(o.hasOwnProperty(f)||w(f)?c[f]=i.properties[f]:c.qLayoutExclude.disabled[f]=i.properties[f]);if(s&&i.properties.qHyperCubeDef){c[s]=c[s]||{};c[s].qHyperCubeDef=i.properties.qHyperCubeDef}c=e.extend(true,{},o,c);var O=s?o[s].qHyperCubeDef:o.qHyperCubeDef;var k=s?c[s].qHyperCubeDef:c.qHyperCubeDef;k.qDimensions.length=0;k.qMeasures.length=0;if(u.dimensions.length>A&&A>0||u.measures.length>I&&I>0||u.excludedDimensions.length&&u.dimensions.length+u.excludedDimensions.length>T||u.excludedMeasures.length&&u.measures.length+u.excludedMeasures.length>E||!I&&u.measures.length||!A&&u.dimensions.length){k.qLayoutExclude||(k.qLayoutExclude={});k.qLayoutExclude.qHyperCubeDef||(k.qLayoutExclude.qHyperCubeDef={});(u.dimensions.length>A&&A>0||u.excludedDimensions&&u.excludedDimensions.length&&u.dimensions.length+u.excludedDimensions.length>T)&&(k.qLayoutExclude.qHyperCubeDef.qDimensions||(k.qLayoutExclude.qHyperCubeDef.qDimensions=[]));(u.measures.length>I&&I>0||u.excludedMeasures&&u.excludedMeasures.length&&u.measures.length+u.excludedMeasures.length>E)&&(k.qLayoutExclude.qHyperCubeDef.qMeasures||(k.qLayoutExclude.qHyperCubeDef.qMeasures=[]));!I&&u.measures.length&&(k.qLayoutExclude.qHyperCubeDef.qMeasures||(k.qLayoutExclude.qHyperCubeDef.qMeasures=[]));!A&&u.dimensions.length&&(k.qLayoutExclude.qHyperCubeDef.qDimensions||(k.qLayoutExclude.qHyperCubeDef.qDimensions=[]))}if(A>0)for(p=0;p<u.dimensions.length;++p)k.qDimensions.length<A?k.qDimensions.push(x(u.dimensions[p],g)):k.qLayoutExclude.qHyperCubeDef.qDimensions.push(x(u.dimensions[p],g));else if(u.dimensions.length)for(p=0;p<u.dimensions.length;++p)k.qLayoutExclude.qHyperCubeDef.qDimensions.push(x(u.dimensions[p],g));if(u.excludedDimensions.length)for(p=0;p<u.excludedDimensions.length;++p)k.qDimensions.length<T?k.qDimensions.push(x(u.excludedDimensions[p],g)):k.qLayoutExclude.qHyperCubeDef.qDimensions.push(x(u.excludedDimensions[p],g));if(I>0)for(p=0;p<u.measures.length;++p)k.qMeasures.length<I?k.qMeasures.push(S(u.measures[p],C)):k.qLayoutExclude.qHyperCubeDef.qMeasures.push(S(u.measures[p],C));else if(u.measures.length)for(p=0;p<u.measures.length;++p)k.qLayoutExclude.qHyperCubeDef.qMeasures.push(S(u.measures[p],C));if(u.excludedMeasures.length)for(p=0;p<u.excludedMeasures.length;++p)k.qMeasures.length<E?k.qMeasures.push(S(u.excludedMeasures[p],C)):k.qLayoutExclude.qHyperCubeDef.qMeasures.push(S(u.excludedMeasures[p],C));h=k.qDimensions.length+k.qMeasures.length;k.qInterColumnSortOrder=u.interColumnSortOrder.concat();p=k.qInterColumnSortOrder.length;if(p!==h){k.qLayoutExclude&&(k.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder=u.interColumnSortOrder.concat());while(p!==h)if(p<h){n.indexAdded(k.qInterColumnSortOrder,p);++p}else{--p;n.indexRemoved(k.qInterColumnSortOrder,p)}}d=r.mapProperties(r.mapDefinition(a.definition,a.type),{},a.type);var L=s?d[s]&&d[s].qHyperCubeDef:d.qHyperCubeDef;["qAlwaysFullyExpanded","qSuppressMissing","qSuppressZero"].filter(function(e){return L&&"undefined"===typeof L[e]}).forEach(function(e){b(e,O,k)});b("qMaxStackedCells",O,k);b("qNoOfLeftDims",O,k);y("qInitialDataFetch",O,k,[{qTop:0,qLeft:0,qWidth:0,qHeight:0}]);y("qMode",O,k,"S");y("qReductionMode",O,k,"N");y("qSortbyYValue",O,k);y("qIndentMode",O,k);y("qShowTotalsAbove",O,k);q(c,i,o);l.qProperty=c;return l}};f={exportProperties:function e(n){var i=new t,r=n.qProperty,o=r.qListObjectDef,a=i.data[0],s,l,c;(o.qLibraryId||o.qDef&&o.qDef.qFieldDefs[0])&&a.dimensions.push({qLibraryId:o.qLibraryId,qDef:o.qDef,title:o.title,qOtherTotalSpec:{}});if(o.qLayoutExclude&&o.qLayoutExclude.qHyperCubeDef&&o.qLayoutExclude.qHyperCubeDef.qDimensions)for(s=0;s<o.qLayoutExclude.qHyperCubeDef.qDimensions.length;++s)a.excludedDimensions.push(o.qLayoutExclude.qHyperCubeDef.qDimensions[s]);if(o.qLayoutExclude&&o.qLayoutExclude.qHyperCubeDef&&o.qLayoutExclude.qHyperCubeDef.qMeasures)for(s=0;s<o.qLayoutExclude.qHyperCubeDef.qMeasures.length;++s)a.excludedMeasures.push(o.qLayoutExclude.qHyperCubeDef.qMeasures[s]);if(o.qLayoutExclude&&o.qLayoutExclude.qHyperCubeDef&&o.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder)for(s=0;s<o.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder.length;++s)a.interColumnSortOrder.push(o.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder[s]);delete o.qLayoutExclude;for(l in r)i.properties[l]=r[l];if(r.qLayoutExclude&&r.qLayoutExclude._disabled){for(l in r.qLayoutExclude._disabled){c="_"===l.substr(0,1)?l.substring(1):l;i.properties.hasOwnProperty(c)||(i.properties[c]=r.qLayoutExclude.disabled[l])}delete r.qLayoutExclude.disabled}if(a.dimensions.length>0)for(s=0;s<a.dimensions[0].qDef.qSortCriterias.length;++s)a.dimensions[0].qDef.qSortCriterias[s].qSortByFrequency=0;return i},importProperties:function t(n,i){var r={qChildren:[]},o={},a=n.data[0],s=1,l,c;o.qLayoutExclude||(o.qLayoutExclude={});o.qLayoutExclude.disabled={};for(l in n.properties)"qLayoutExclude"===l?n.properties[l].quarantine&&(o.qLayoutExclude.quarantine=e.extend(true,{},n.properties[l].quarantine)):i.hasOwnProperty(l)||w(l)?o[l]=n.properties[l]:o.qLayoutExclude.disabled[l]=n.properties[l];o=e.extend(true,{},i,o);o.qListObjectDef.qLayoutExclude||(o.qListObjectDef.qLayoutExclude={});o.qListObjectDef.qLayoutExclude.qHyperCubeDef||(o.qListObjectDef.qLayoutExclude.qHyperCubeDef={});o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qDimensions||(o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qDimensions=[]);o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qMeasures||(o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qMeasures=[]);o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder||(o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder=[]);for(c=0;c<a.dimensions.length;++c)if(c<s){o.qListObjectDef.qDef=a.dimensions[c].qDef;o.qListObjectDef.qLibraryId=a.dimensions[c].qLibraryId}else o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qDimensions.push(a.dimensions[c]);for(c=0;c<a.excludedDimensions.length;++c)o.qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qDimensions.push(x(a.excludedDimensions[c]));for(c=0;c<a.measures.length;++c)o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qMeasures.push(a.measures[c]);for(c=0;c<a.excludedMeasures.length;++c)o.qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures.push(a.excludedMeasures[c]);for(c=0;c<a.interColumnSortOrder.length;++c)o.qListObjectDef.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder.push(a.interColumnSortOrder[c]);o.qListObjectDef.qInitialDataFetch=i.qListObjectDef.qInitialDataFetch;q(o,n,i);r.qProperty=o;return r}};p={importProperties:function e(t,n,r){var o=this.hypercube.importProperties(t,n,r),a=i.getValue(o,"qProperty.visualization"),c=i.getValue(o,"qProperty.qHyperCubeDef.qDimensions",[]),u=i.getValue(o,"qProperty.qHyperCubeDef.qMeasures",[]),d=i.getValue(o,"qProperty.qHyperCubeDef.qMeasures.0.qAttributeExpressions",[]),f=i.getValue(o,"qProperty.color.colorExpression",""),p=i.getValue(o,"qProperty.color.mode",""),h=i.getValue(o,"qProperty.color.auto",""),v=i.getValue(o,"qProperty.color.persistent",false);var g=l.canColorBy(o.qProperty,a);if(g[p])if(h)s.colorByUpdater(o.qProperty,"qHyperCubeDef.");else if("byDimension"!==p&&"byMeasure"!==p||!c.length){if("byExpression"===p&&u.length){d.splice(0,0,{qExpression:f,id:"colorByExpression"});i.setValue(o,"qProperty.qHyperCubeDef.qMeasures.0.qAttributeExpressions",d)}}else s.colorByUpdater(o.qProperty,"qHyperCubeDef.");else{i.setValue(o,"qProperty.color.mode","primary");i.setValue(o,"qProperty.color.auto",true);s.colorByUpdater(o.qProperty,"qHyperCubeDef.")}c.length>1&&!v&&C("color.persistent",true,o);c.forEach(function(e){"qTotalMode"in e.qOtherTotalSpec&&delete e.qOtherTotalSpec.qTotalMode});return o},exportProperties:function e(t){var n=this.hypercube.exportProperties(t);var i=n.data[0];c.moveByIdFromGroup(i.dimensions.concat(i.excludedDimensions),[],"qAttributeDimensions",c.IDMAP.COLOR_BY_ALTERNATIVE);c.moveByIdFromGroup(i.dimensions.concat(i.excludedDimensions),[],"qAttributeExpressions",c.IDMAP.COLOR_BY_ALTERNATIVE);c.moveByIdFromGroup(i.measures.concat(i.excludedMeasures),[],"qAttributeExpressions",c.IDMAP.COLOR_BY_EXPRESSION);return n}};h={importProperties:function t(n,i,r){var o=this.colorChart.importProperties.apply(this,[n,i,r]),a=o.qProperty,s,l;i.measureAxis&&"undefined"===typeof i.measureAxis.autoMinMax?E(a,"unsupportedAutoMinMax")||e.extend(a.measureAxis,i.measureAxis):E(a,"supportedAutoMinMax")||e.extend(a.measureAxis,i.measureAxis);if(n.properties.measureAxes&&!i.measureAxes&&i.measureAxis&&"undefined"!==typeof i.measureAxis.autoMinMax){var c=[];a.qHyperCubeDef.qMeasures.length>0&&a.qHyperCubeDef.qMeasures.forEach(function(e){if(e.qDef.series){c[e.qDef.series.axis]||(c[e.qDef.series.axis]={axis:e.qDef.series.axis,type:{line:0,marker:0,bar:0,total:0}});["bar","marker","line"].contains(e.qDef.series.type)&&c[e.qDef.series.axis].type[e.qDef.series.type]++;c[e.qDef.series.axis].type.total++}});if(c.length){var u="barchart"===i.visualization?"bar":"linechart"===i.visualization?"line":"";u&&(s=c.filter(function(e){return e.type[u]>0}).sort(function(e,t){return t.type[u]-e.type[u]}));s&&s.length||(s=c.sort(function(e,t){return t.type.total-e.type.total}));s&&s[0]&&e.extend(a.measureAxis,n.properties.measureAxes[s[0].axis])}else e.extend(a.measureAxis,n.properties.measureAxes[0])}if(a.qHyperCubeDef.qDimensions.length>1){l=a.qHyperCubeDef.qInterColumnSortOrder.indexOf(0);if(0!==l){s=a.qHyperCubeDef.qInterColumnSortOrder[0];a.qHyperCubeDef.qInterColumnSortOrder[0]=0;a.qHyperCubeDef.qInterColumnSortOrder[l]=s}}return o},exportProperties:function e(t){var n=this.colorChart.exportProperties.apply(this,[t]);if("gauge"===n.properties.visualization){I("measureAxis.min",n,"unsupportedAutoMinMax");I("measureAxis.max",n,"unsupportedAutoMinMax")}else{I("measureAxis.min",n,"supportedAutoMinMax");I("measureAxis.max",n,"supportedAutoMinMax")}return n}};v={importProperties:function e(t,n,r){var o,a=this.hypercube.importProperties(t,n,r),s=i.getValue(a,"qProperty.qHyperCubeDef.qDimensions",[]),l=s.length,c=i.getValue(a,"qProperty.qHyperCubeDef.qMeasures",[]).length,u=i.getValue(a,"qProperty.qHyperCubeDef.qInterColumnSortOrder",[]),d,f=true;l+c===u.length&&i.setValue(a,"qProperty.qLayoutExclude.quarantine.interColSortOrder",u.concat());var p=i.getValue(a,"qProperty.qLayoutExclude.quarantine.pivotInterColSortOrder");if(p){u=p;d=p.slice();i.setValue(a,"qProperty.qHyperCubeDef.qInterColumnSortOrder",u);delete a.qProperty.qLayoutExclude.quarantine.pivotInterColSortOrder}else u.length=0;var h=u.indexOf(-1)>-1;var v=l+h;if(v>u.length)for(o=u.length;o<v;o++)u.indexOf(o)<0&&u.push(o-h);for(o=u.length-1;o>=0;o--)u[o]>=l&&u.splice(o,1);c>1&&u.indexOf(-1)<0?u.push(-1):c<2&&u.indexOf(-1)>-1&&u.splice(u.indexOf(-1),1);l>0&&-1===i.getValue(a,"qProperty.qHyperCubeDef.qNoOfLeftDims",-1)&&i.setValue(a,"qProperty.qHyperCubeDef.qNoOfLeftDims",l);if(d&&u&&d.length===u.length){for(o=0;o<d.length;o++)if(d[o]!==u[o]){f=false;break}f&&E(a.qProperty,"noOfLeftDims")}s.forEach(function(e){"qTotalMode"in e.qOtherTotalSpec||(e.qOtherTotalSpec.qTotalMode="TOTAL_EXPR")});return a},exportProperties:function e(t){var n=i.getValue(t,"qProperty.qHyperCubeDef.qInterColumnSortOrder",[]);var r=n.slice(0);var o=n.indexOf(-1);o>-1&&n.splice(o,1);var a=this.hypercube.exportProperties(t),s=a.properties.qHyperCubeDef,l=s.qDimensions.length,c=s.qMeasures.length,u=s.qInterColumnSortOrder;i.setValue(a,"properties.qLayoutExclude.quarantine.pivotInterColSortOrder",r);I("qHyperCubeDef.qNoOfLeftDims",a,"noOfLeftDims");delete a.properties.qHyperCubeDef.qNoOfLeftDims;var d=i.getValue(a,"properties.qLayoutExclude.quarantine.interColSortOrder");if(d){u=d;i.setValue(a,"properties.qHyperCubeDef.qInterColumnSortOrder",u);i.setValue(a,"data.0.interColumnSortOrder",u);delete a.properties.qLayoutExclude.quarantine.interColSortOrder}for(var f=u.length;f<l+c;f++)u.length<=f&&u.push(f);return a}};function q(e,t,n){"masterobject"===t.properties.qInfo.qType?e.qInfo.qType="masterobject":e.qInfo.qType=n.qInfo.qType;e.visualization=n.visualization}function C(e,t,n){var r=n.qProperty,a=n.qProperty.qLayoutExclude;if(!/boolean|number|string/.test(o(t))){i.setValue(r,e,t);return}if(a){a.changed||(a.changed={});a.changed[e]={from:i.getValue(r,e),to:t}}i.setValue(r,e,t)}function _(e){for(var t in e.qLayoutExclude.changed)e.qLayoutExclude.changed[t].to===i.getValue(e,t)&&i.setValue(e,t,e.qLayoutExclude.changed[t].from)}function I(e,t,n){var r=t.properties,a=t.properties.qLayoutExclude,s=i.getValue(r,e),l,c;if(!/boolean|number|string/.test(o(s)))try{l=JSON.stringify(s);c=l.match(/:\{/g);c=c?c.length:0;if(c>2)return;s=JSON.parse(l)}catch(e){return}if(!a){t.properties.qLayoutExclude={quarantine:{}};a=t.properties.qLayoutExclude}a.quarantine||(a.quarantine={});a.quarantine[n]||(a.quarantine[n]={});a.quarantine[n][e]=s}function E(e,t){var n,r=e.qLayoutExclude?e.qLayoutExclude.quarantine:{};if(!r[t])return false;r=r[t];for(n in r)i.setValue(e,n,r[n]);delete e.qLayoutExclude.quarantine[t];return true}g={importProperties:function t(n,i){var r={qChildren:[]},o={},a;o.qLayoutExclude||(o.qLayoutExclude={});o.qLayoutExclude.disabled={};for(a in n.properties){if("qLayoutExclude"===a)continue;i.hasOwnProperty(a)||w(a)?o[a]=n.properties[a]:o.qLayoutExclude.disabled[a]=n.properties[a]}o=e.extend(true,{},i,o);q(o,n,i);r.qProperty=o;return r},exportProperties:function e(n){var i=new t,r=n.qProperty,o,a;for(o in r)i.properties[o]=r[o];r.qLayoutExclude||(r.qLayoutExclude={});if(r.qLayoutExclude.disabled)for(o in r.qLayoutExclude.disabled){a=o;i.properties.hasOwnProperty(a)||(i.properties[a]=r.qLayoutExclude.disabled[o])}delete r.qLayoutExclude;return i}};return{importCommonProperties:q,isMasterItemProp:w,hypercube:d,listbox:f,axisChart:h,colorChart:p,pivotChart:v,other:g,changeProperty:C,quarantineProperty:I,unquarantineObject:E,quarantineConditionalShow:u.quarantine,unquarantineConditionalShow:u.unquarantine}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){(function(t,n){e.exports=n()})(this,function(){"use strict";var e=navigator.userAgent;var t=navigator.platform;var n=/gecko\/\d/i.test(e);var i=/MSIE \d/.test(e);var r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e);var o=/Edge\/(\d+)/.exec(e);var a=i||r||o;var s=a&&(i?document.documentMode||6:+(o||r)[1]);var l=!o&&/WebKit\//.test(e);var c=l&&/Qt\/\d+\.\d+/.test(e);var u=!o&&/Chrome\//.test(e);var d=/Opera\//.test(e);var f=/Apple Computer/.test(navigator.vendor);var p=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e);var h=/PhantomJS/.test(e);var v=!o&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e);var g=/Android/.test(e);var m=v||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e);var b=v||/Mac/.test(t);var y=/\bCrOS\b/.test(e);var x=/win/i.test(t);var S=d&&e.match(/Version\/(\d*\.\d*)/);S&&(S=Number(S[1]));if(S&&S>=15){d=false;l=true}var w=b&&(c||d&&(null==S||S<12.11));var q=n||a&&s>=9;function C(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var _=function(e,t){var n=e.className;var i=C(t).exec(n);if(i){var r=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(r?i[1]+r:"")}};function I(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function E(e,t){return I(e).appendChild(t)}function D(e,t,n,i){var r=document.createElement(e);n&&(r.className=n);i&&(r.style.cssText=i);if("string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)r.appendChild(t[o]);return r}function A(e,t,n,i){var r=D(e,t,n,i);r.setAttribute("role","presentation");return r}var T;T=document.createRange?function(e,t,n,i){var r=document.createRange();r.setEnd(i||e,n);r.setStart(e,t);return r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(e){return i}i.collapse(true);i.moveEnd("character",n);i.moveStart("character",t);return i};function O(e,t){3==t.nodeType&&(t=t.parentNode);if(e.contains)return e.contains(t);do{11==t.nodeType&&(t=t.host);if(t==e)return true}while(t=t.parentNode)}function k(){var e;try{e=document.activeElement}catch(t){e=document.body||null}while(e&&e.shadowRoot&&e.shadowRoot.activeElement)e=e.shadowRoot.activeElement;return e}function L(e,t){var n=e.className;C(t).test(n)||(e.className+=(n?" ":"")+t)}function P(e,t){var n=e.split(" ");for(var i=0;i<n.length;i++)n[i]&&!C(n[i]).test(t)&&(t+=" "+n[i]);return t}var M=function(e){e.select()};v?M=function(e){e.selectionStart=0;e.selectionEnd=e.value.length}:a&&(M=function(e){try{e.select()}catch(e){}});function N(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function R(e,t,n){t||(t={});for(var i in e)!e.hasOwnProperty(i)||false===n&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function F(e,t,n,i,r){if(null==t){t=e.search(/[^\s\u00a0]/);-1==t&&(t=e.length)}for(var o=i||0,a=r||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return a+(t-o);a+=s-o;a+=n-a%n;o=s+1}}var $=function(){this.id=null};$.prototype.set=function(e,t){clearTimeout(this.id);this.id=setTimeout(t,e)};function j(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}var H=30;var V={toString:function(){return"CodeMirror.Pass"}};var B={scroll:false};var z={origin:"*mouse"};var U={origin:"+move"};function G(e,t,n){for(var i=0,r=0;;){var o=e.indexOf("\t",i);-1==o&&(o=e.length);var a=o-i;if(o==e.length||r+a>=t)return i+Math.min(a,t-r);r+=o-i;r+=n-r%n;i=o+1;if(r>=t)return i}}var W=[""];function K(e){while(W.length<=e)W.push(Y(W)+" ");return W[e]}function Y(e){return e[e.length-1]}function X(e,t){var n=[];for(var i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function Q(e,t,n){var i=0,r=n(t);while(i<e.length&&n(e[i])<=r)i++;e.splice(i,0,t)}function J(){}function Z(e,t){var n;if(Object.create)n=Object.create(e);else{J.prototype=e;n=new J}t&&R(t,n);return n}var ee=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function te(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ee.test(e))}function ne(e,t){if(!t)return te(e);if(t.source.indexOf("\\w")>-1&&te(e))return true;return t.test(e)}function ie(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return false;return true}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function oe(e){return e.charCodeAt(0)>=768&&re.test(e)}function ae(e,t,n){while((n<0?t>0:t<e.length)&&oe(e.charAt(t)))t+=n;return t}function se(e,t,n){for(;;){if(Math.abs(t-n)<=1)return e(t)?t:n;var i=Math.floor((t+n)/2);e(i)?n=i:t=i}}function le(e,t,i){var r=this;this.input=i;r.scrollbarFiller=D("div",null,"CodeMirror-scrollbar-filler");r.scrollbarFiller.setAttribute("cm-not-content","true");r.gutterFiller=D("div",null,"CodeMirror-gutter-filler");r.gutterFiller.setAttribute("cm-not-content","true");r.lineDiv=A("div",null,"CodeMirror-code");r.selectionDiv=D("div",null,null,"position: relative; z-index: 1");r.cursorDiv=D("div",null,"CodeMirror-cursors");r.measure=D("div",null,"CodeMirror-measure");r.lineMeasure=D("div",null,"CodeMirror-measure");r.lineSpace=A("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none");var o=A("div",[r.lineSpace],"CodeMirror-lines");r.mover=D("div",[o],null,"position: relative");r.sizer=D("div",[r.mover],"CodeMirror-sizer");r.sizerWidth=null;r.heightForcer=D("div",null,null,"position: absolute; height: "+H+"px; width: 1px;");r.gutters=D("div",null,"CodeMirror-gutters");r.lineGutter=null;r.scroller=D("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll");r.scroller.setAttribute("tabIndex","-1");r.wrapper=D("div",[r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror");if(a&&s<8){r.gutters.style.zIndex=-1;r.scroller.style.paddingRight=0}l||n&&m||(r.scroller.draggable=true);e&&(e.appendChild?e.appendChild(r.wrapper):e(r.wrapper));r.viewFrom=r.viewTo=t.first;r.reportedViewFrom=r.reportedViewTo=t.first;r.view=[];r.renderedView=null;r.externalMeasured=null;r.viewOffset=0;r.lastWrapHeight=r.lastWrapWidth=0;r.updateLineNumbers=null;r.nativeBarWidth=r.barHeight=r.barWidth=0;r.scrollbarsClipped=false;r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null;r.alignWidgets=false;r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null;r.maxLine=null;r.maxLineLength=0;r.maxLineChanged=false;r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null;r.shift=false;r.selForContextMenu=null;r.activeTouch=null;i.init(r)}function ce(e,t){t-=e.first;if(t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");var n=e;while(!n.lines)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(t<o){n=r;break}t-=o}return n.lines[t]}function ue(e,t,n){var i=[],r=t.line;e.iter(t.line,n.line+1,function(e){var o=e.text;r==n.line&&(o=o.slice(0,n.ch));r==t.line&&(o=o.slice(t.ch));i.push(o);++r});return i}function de(e,t,n){var i=[];e.iter(t,n,function(e){i.push(e.text)});return i}function fe(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function pe(e){if(null==e.parent)return null;var t=e.parent,n=j(t.lines,e);for(var i=t.parent;i;t=i,i=i.parent)for(var r=0;;++r){if(i.children[r]==t)break;n+=i.children[r].chunkSize()}return n+t.first}function he(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],o=r.height;if(t<o){e=r;continue e}t-=o;n+=r.chunkSize()}return n}while(!e.lines);var a=0;for(;a<e.lines.length;++a){var s=e.lines[a],l=s.height;if(t<l)break;t-=l}return n+a}function ve(e,t){return t>=e.first&&t<e.first+e.size}function ge(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function me(e,t,n){void 0===n&&(n=null);if(!(this instanceof me))return new me(e,t,n);this.line=e;this.ch=t;this.sticky=n}function be(e,t){return e.line-t.line||e.ch-t.ch}function ye(e,t){return e.sticky==t.sticky&&0==be(e,t)}function xe(e){return me(e.line,e.ch)}function Se(e,t){return be(e,t)<0?t:e}function we(e,t){return be(e,t)<0?e:t}function qe(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Ce(e,t){if(t.line<e.first)return me(e.first,0);var n=e.first+e.size-1;if(t.line>n)return me(n,ce(e,n).text.length);return _e(t,ce(e,t.line).text.length)}function _e(e,t){var n=e.ch;return null==n||n>t?me(e.line,t):n<0?me(e.line,0):e}function Ie(e,t){var n=[];for(var i=0;i<t.length;i++)n[i]=Ce(e,t[i]);return n}var Ee=false;var De=false;function Ae(){Ee=true}function Te(){De=true}function Oe(e,t,n){this.marker=e;this.from=t;this.to=n}function ke(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function Le(e,t){var n;for(var i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Pe(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t];t.marker.attachLine(e)}function Me(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],a=o.marker;var s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);if(s||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(i||(i=[])).push(new Oe(a,o.from,l?null:o.to))}}return i}function Ne(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],a=o.marker;var s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);if(s||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(i||(i=[])).push(new Oe(a,l?null:o.from-t,null==o.to?null:o.to-t))}}return i}function Re(e,t){if(t.full)return null;var n=ve(e,t.from.line)&&ce(e,t.from.line).markedSpans;var i=ve(e,t.to.line)&&ce(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,o=t.to.ch,a=0==be(t.from,t.to);var s=Me(n,r,a);var l=Ne(i,o,a);var c=1==t.text.length,u=Y(t.text).length+(c?r:0);if(s)for(var d=0;d<s.length;++d){var f=s[d];if(null==f.to){var p=ke(l,f.marker);p?c&&(f.to=null==p.to?null:p.to+u):f.to=r}}if(l)for(var h=0;h<l.length;++h){var v=l[h];null!=v.to&&(v.to+=u);if(null==v.from){var g=ke(s,v.marker);if(!g){v.from=u;c&&(s||(s=[])).push(v)}}else{v.from+=u;c&&(s||(s=[])).push(v)}}s&&(s=Fe(s));l&&l!=s&&(l=Fe(l));var m=[s];if(!c){var b=t.text.length-2,y;if(b>0&&s)for(var x=0;x<s.length;++x)null==s[x].to&&(y||(y=[])).push(new Oe(s[x].marker,null,null));for(var S=0;S<b;++S)m.push(y);m.push(l)}return m}function Fe(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&false!==n.marker.clearWhenEmpty&&e.splice(t--,1)}if(!e.length)return null;return e}function $e(e,t,n){var i=null;e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=j(i,n)||(i||(i=[])).push(n)}});if(!i)return null;var r=[{from:t,to:n}];for(var o=0;o<i.length;++o){var a=i[o],s=a.find(0);for(var l=0;l<r.length;++l){var c=r[l];if(be(c.to,s.from)<0||be(c.from,s.to)>0)continue;var u=[l,1],d=be(c.from,s.from),f=be(c.to,s.to);(d<0||!a.inclusiveLeft&&!d)&&u.push({from:c.from,to:s.from});(f>0||!a.inclusiveRight&&!f)&&u.push({from:s.to,to:c.to});r.splice.apply(r,u);l+=u.length-3}}return r}function je(e){var t=e.markedSpans;if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}function He(e,t){if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}function Ve(e){return e.inclusiveLeft?-1:0}function Be(e){return e.inclusiveRight?1:0}function ze(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),r=t.find();var o=be(i.from,r.from)||Ve(e)-Ve(t);if(o)return-o;var a=be(i.to,r.to)||Be(e)-Be(t);if(a)return a;return t.id-e.id}function Ue(e,t){var n=De&&e.markedSpans,i;if(n)for(var r=void 0,o=0;o<n.length;++o){r=n[o];r.marker.collapsed&&null==(t?r.from:r.to)&&(!i||ze(i,r.marker)<0)&&(i=r.marker)}return i}function Ge(e){return Ue(e,true)}function We(e){return Ue(e,false)}function Ke(e,t,n,i,r){var o=ce(e,t);var a=De&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(!l.marker.collapsed)continue;var c=l.marker.find(0);var u=be(c.from,n)||Ve(l.marker)-Ve(r);var d=be(c.to,i)||Be(l.marker)-Be(r);if(u>=0&&d<=0||u<=0&&d>=0)continue;if(u<=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?be(c.to,n)>=0:be(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&r.inclusiveLeft?be(c.from,i)<=0:be(c.from,i)<0))return true}}function Ye(e){var t;while(t=Ge(e))e=t.find(-1,true).line;return e}function Xe(e){var t;while(t=We(e))e=t.find(1,true).line;return e}function Qe(e){var t,n;while(t=We(e)){e=t.find(1,true).line;(n||(n=[])).push(e)}return n}function Je(e,t){var n=ce(e,t),i=Ye(n);if(n==i)return t;return pe(i)}function Ze(e,t){if(t>e.lastLine())return t;var n=ce(e,t),i;if(!et(e,n))return t;while(i=We(n))n=i.find(1,true).line;return pe(n)+1}function et(e,t){var n=De&&t.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r){i=n[r];if(!i.marker.collapsed)continue;if(null==i.from)return true;if(i.marker.widgetNode)continue;if(0==i.from&&i.marker.inclusiveLeft&&tt(e,t,i))return true}}function tt(e,t,n){if(null==n.to){var i=n.marker.find(1,true);return tt(e,i.line,ke(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return true;for(var r=void 0,o=0;o<t.markedSpans.length;++o){r=t.markedSpans[o];if(r.marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&tt(e,t,r))return true}}function nt(e){e=Ye(e);var t=0,n=e.parent;for(var i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(var o=n.parent;o;n=o,o=n.parent)for(var a=0;a<o.children.length;++a){var s=o.children[a];if(s==n)break;t+=s.height}return t}function it(e){if(0==e.height)return 0;var t=e.text.length,n,i=e;while(n=Ge(i)){var r=n.find(0,true);i=r.from.line;t+=r.from.ch-r.to.ch}i=e;while(n=We(i)){var o=n.find(0,true);t-=i.text.length-o.from.ch;i=o.to.line;t+=i.text.length-o.to.ch}return t}function rt(e){var t=e.display,n=e.doc;t.maxLine=ce(n,n.first);t.maxLineLength=it(t.maxLine);t.maxLineChanged=true;n.iter(function(e){var n=it(e);if(n>t.maxLineLength){t.maxLineLength=n;t.maxLine=e}})}function ot(e,t,n,i){if(!e)return i(t,n,"ltr");var r=false;for(var o=0;o<e.length;++o){var a=e[o];if(a.from<n&&a.to>t||t==n&&a.to==t){i(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr");r=true}}r||i(t,n,"ltr")}var at=null;function st(e,t,n){var i;at=null;for(var r=0;r<e.length;++r){var o=e[r];if(o.from<t&&o.to>t)return r;o.to==t&&(o.from!=o.to&&"before"==n?i=r:at=r);o.from==t&&(o.from!=o.to&&"before"!=n?i=r:at=r)}return null!=i?i:at}var lt=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function n(n){return n<=247?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1785?t.charAt(n-1536):1774<=n&&n<=2220?"r":8192<=n&&n<=8203?"w":8204==n?"b":"L"}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var r=/[stwN]/,o=/[LRr]/,a=/[Lb1n]/,s=/[1n]/;function l(e,t,n){this.level=e;this.from=t;this.to=n}return function(e,t){var c="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!i.test(e))return false;var u=e.length,d=[];for(var f=0;f<u;++f)d.push(n(e.charCodeAt(f)));for(var p=0,h=c;p<u;++p){var v=d[p];"m"==v?d[p]=h:h=v}for(var g=0,m=c;g<u;++g){var b=d[g];if("1"==b&&"r"==m)d[g]="n";else if(o.test(b)){m=b;"r"==b&&(d[g]="R")}}for(var y=1,x=d[0];y<u-1;++y){var S=d[y];"+"==S&&"1"==x&&"1"==d[y+1]?d[y]="1":","!=S||x!=d[y+1]||"1"!=x&&"n"!=x||(d[y]=x);x=S}for(var w=0;w<u;++w){var q=d[w];if(","==q)d[w]="N";else if("%"==q){var C=void 0;for(C=w+1;C<u&&"%"==d[C];++C);var _=w&&"!"==d[w-1]||C<u&&"1"==d[C]?"1":"N";for(var I=w;I<C;++I)d[I]=_;w=C-1}}for(var E=0,D=c;E<u;++E){var A=d[E];"L"==D&&"1"==A?d[E]="L":o.test(A)&&(D=A)}for(var T=0;T<u;++T)if(r.test(d[T])){var O=void 0;for(O=T+1;O<u&&r.test(d[O]);++O);var k="L"==(T?d[T-1]:c);var L="L"==(O<u?d[O]:c);var P=k==L?k?"L":"R":c;for(var M=T;M<O;++M)d[M]=P;T=O-1}var N=[],R;for(var F=0;F<u;)if(a.test(d[F])){var $=F;for(++F;F<u&&a.test(d[F]);++F);N.push(new l(0,$,F))}else{var j=F,H=N.length;for(++F;F<u&&"L"!=d[F];++F);for(var V=j;V<F;)if(s.test(d[V])){j<V&&N.splice(H,0,new l(1,j,V));var B=V;for(++V;V<F&&s.test(d[V]);++V);N.splice(H,0,new l(2,B,V));j=V}else++V;j<F&&N.splice(H,0,new l(1,j,F))}if(1==N[0].level&&(R=e.match(/^\s+/))){N[0].from=R[0].length;N.unshift(new l(0,0,R[0].length))}if(1==Y(N).level&&(R=e.match(/\s+$/))){Y(N).to-=R[0].length;N.push(new l(0,u-R[0].length,u))}return"rtl"==t?N.reverse():N}}();function ct(e,t){var n=e.order;null==n&&(n=e.order=lt(e.text,t));return n}function ut(e,t,n){var i=ae(e.text,t+n,n);return i<0||i>e.text.length?null:i}function dt(e,t,n){var i=ut(e,t.ch,n);return null==i?null:new me(t.line,i,n<0?"after":"before")}function ft(e,t,n,i,r){if(e){var o=ct(n,t.doc.direction);if(o){var a=r<0?Y(o):o[0];var s=r<0==(1==a.level);var l=s?"after":"before";var c;if(a.level>0){var u=oi(t,n);c=r<0?n.text.length-1:0;var d=ai(t,u,c).top;c=se(function(e){return ai(t,u,e).top==d},r<0==(1==a.level)?a.from:a.to-1,c);"before"==l&&(c=ut(n,c,1))}else c=r<0?a.to:a.from;return new me(i,c,l)}}return new me(i,r<0?n.text.length:0,r<0?"before":"after")}function pt(e,t,n,i){var r=ct(t,e.doc.direction);if(!r)return dt(t,n,i);if(n.ch>=t.text.length){n.ch=t.text.length;n.sticky="before"}else if(n.ch<=0){n.ch=0;n.sticky="after"}var o=st(r,n.ch,n.sticky),a=r[o];if("ltr"==e.doc.direction&&a.level%2==0&&(i>0?a.to>n.ch:a.from<n.ch))return dt(t,n,i);var s=function(e,n){return ut(t,e instanceof me?e.ch:e,n)};var l;var c=function(n){if(!e.options.lineWrapping)return{begin:0,end:t.text.length};l=l||oi(e,t);return _i(e,t,l,n)};var u=c("before"==n.sticky?s(n,-1):n.ch);if("rtl"==e.doc.direction||1==a.level){var d=1==a.level==i<0;var f=s(n,d?1:-1);if(null!=f&&(d?f<=a.to&&f<=u.end:f>=a.from&&f>=u.begin)){var p=d?"before":"after";return new me(n.line,f,p)}}var h=function(e,t,i){var o=function(e,t){return t?new me(n.line,s(e,1),"before"):new me(n.line,e,"after")};for(;e>=0&&e<r.length;e+=t){var a=r[e];var l=t>0==(1!=a.level);var c=l?i.begin:s(i.end,-1);if(a.from<=c&&c<a.to)return o(c,l);c=l?a.from:s(a.to,-1);if(i.begin<=c&&c<i.end)return o(c,l)}};var v=h(o+i,i,u);if(v)return v;var g=i>0?u.end:s(u.begin,-1);if(null!=g&&!(i>0&&g==t.text.length)){v=h(i>0?0:r.length-1,i,c(g));if(v)return v}return null}var ht=[];var vt=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,false);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||ht).concat(n)}};function gt(e,t){return e._handlers&&e._handlers[t]||ht}function mt(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,false);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,r=i&&i[t];if(r){var o=j(r,n);o>-1&&(i[t]=r.slice(0,o).concat(r.slice(o+1)))}}}function bt(e,t){var n=gt(e,t);if(!n.length)return;var i=Array.prototype.slice.call(arguments,2);for(var r=0;r<n.length;++r)n[r].apply(null,i)}function yt(e,t,n){"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=true}});bt(e,n||t.type,e,t);return _t(t)||t.codemirrorIgnore}function xt(e){var t=e._handlers&&e._handlers.cursorActivity;if(!t)return;var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]);for(var i=0;i<t.length;++i)-1==j(n,t[i])&&n.push(t[i])}function St(e,t){return gt(e,t).length>0}function wt(e){e.prototype.on=function(e,t){vt(this,e,t)};e.prototype.off=function(e,t){mt(this,e,t)}}function qt(e){e.preventDefault?e.preventDefault():e.returnValue=false}function Ct(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=true}function _t(e){return null!=e.defaultPrevented?e.defaultPrevented:false==e.returnValue}function It(e){qt(e);Ct(e)}function Et(e){return e.target||e.srcElement}function Dt(e){var t=e.which;null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2));b&&e.ctrlKey&&1==t&&(t=3);return t}var At=function(){if(a&&s<9)return false;var e=D("div");return"draggable"in e||"dragDrop"in e}();var Tt;function Ot(e){if(null==Tt){var t=D("span","");E(e,D("span",[t,document.createTextNode("x")]));0!=e.firstChild.offsetHeight&&(Tt=t.offsetWidth<=1&&t.offsetHeight>2&&!(a&&s<8))}var n=Tt?D("span",""):D("span","",null,"display: inline-block; width: 1px; margin-right: -1px");n.setAttribute("cm-text","");return n}var kt;function Lt(e){if(null!=kt)return kt;var t=E(e,document.createTextNode("AA"));var n=T(t,0,1).getBoundingClientRect();var i=T(t,1,2).getBoundingClientRect();I(e);if(!n||n.left==n.right)return false;return kt=i.right-n.right<3}var Pt=3!="\n\nb".split(/\n/).length?function(e){var t=0,n=[],i=e.length;while(t<=i){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var o=e.slice(t,"\r"==e.charAt(r-1)?r-1:r);var a=o.indexOf("\r");if(-1!=a){n.push(o.slice(0,a));t+=a+1}else{n.push(o);t=r+1}}return n}:function(e){return e.split(/\r\n?|\n/)};var Mt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return false}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}if(!t||t.parentElement()!=e)return false;return 0!=t.compareEndPoints("StartToEnd",t)};var Nt=function(){var e=D("div");if("oncopy"in e)return true;e.setAttribute("oncopy","return;");return"function"==typeof e.oncopy}();var Rt=null;function Ft(e){if(null!=Rt)return Rt;var t=E(e,D("span","x"));var n=t.getBoundingClientRect();var i=T(t,0,1).getBoundingClientRect();return Rt=Math.abs(n.left-i.left)>1}var $t={};var jt={};function Ht(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2));$t[e]=t}function Vt(e,t){jt[e]=t}function Bt(e){if("string"==typeof e&&jt.hasOwnProperty(e))e=jt[e];else if(e&&"string"==typeof e.name&&jt.hasOwnProperty(e.name)){var t=jt[e.name];"string"==typeof t&&(t={name:t});e=Z(t,e);e.name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Bt("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Bt("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function zt(e,t){t=Bt(t);var n=$t[t.name];if(!n)return zt(e,"text/plain");var i=n(e,t);if(Ut.hasOwnProperty(t.name)){var r=Ut[t.name];for(var o in r){if(!r.hasOwnProperty(o))continue;i.hasOwnProperty(o)&&(i["_"+o]=i[o]);i[o]=r[o]}}i.name=t.name;t.helperType&&(i.helperType=t.helperType);if(t.modeProps)for(var a in t.modeProps)i[a]=t.modeProps[a];return i}var Ut={};function Gt(e,t){var n=Ut.hasOwnProperty(e)?Ut[e]:Ut[e]={};R(t,n)}function Wt(e,t){if(true===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([]));n[i]=r}return n}function Kt(e,t){var n;while(e.innerMode){n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state;e=n.mode}return n||{mode:e,state:t}}function Yt(e,t,n){return!e.startState||e.startState(t,n)}var Xt=function(e,t,n){this.pos=this.start=0;this.string=e;this.tabSize=t||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0;this.lineOracle=n};Xt.prototype.eol=function(){return this.pos>=this.string.length};Xt.prototype.sol=function(){return this.pos==this.lineStart};Xt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0};Xt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)};Xt.prototype.eat=function(e){var t=this.string.charAt(this.pos);var n;n="string"==typeof e?t==e:t&&(e.test?e.test(t):e(t));if(n){++this.pos;return t}};Xt.prototype.eatWhile=function(e){var t=this.pos;while(this.eat(e));return this.pos>t};Xt.prototype.eatSpace=function(){var e=this;var t=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++e.pos;return this.pos>t};Xt.prototype.skipToEnd=function(){this.pos=this.string.length};Xt.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1){this.pos=t;return true}};Xt.prototype.backUp=function(e){this.pos-=e};Xt.prototype.column=function(){if(this.lastColumnPos<this.start){this.lastColumnValue=F(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)};Xt.prototype.indentation=function(){return F(this.string,null,this.tabSize)-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)};Xt.prototype.match=function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);if(i&&i.index>0)return null;i&&false!==t&&(this.pos+=i[0].length);return i}var r=function(e){return n?e.toLowerCase():e};var o=this.string.substr(this.pos,e.length);if(r(o)==r(e)){false!==t&&(this.pos+=e.length);return true}};Xt.prototype.current=function(){return this.string.slice(this.start,this.pos)};Xt.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}};Xt.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)};var Qt=function(e,t){this.state=e;this.lookAhead=t};var Jt=function(e,t,n,i){this.state=t;this.doc=e;this.line=n;this.maxLookAhead=i||0};Jt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e);return t};Jt.prototype.nextLine=function(){this.line++;this.maxLookAhead>0&&this.maxLookAhead--};Jt.fromSaved=function(e,t,n){return t instanceof Qt?new Jt(e,Wt(e.mode,t.state),n,t.lookAhead):new Jt(e,Wt(e.mode,t),n)};Jt.prototype.save=function(e){var t=false!==e?Wt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Qt(t,this.maxLookAhead):t};function Zt(e,t,n,i){var r=[e.state.modeGen],o={};cn(e,t.text,e.doc.mode,n,function(e,t){return r.push(e,t)},o,i);var a=n.state;var s=function(i){var a=e.state.overlays[i],s=1,l=0;n.state=true;cn(e,t.text,a.mode,n,function(e,t){var n=s;while(l<e){var i=r[s];i>e&&r.splice(s,1,e,r[s+1],i);s+=2;l=Math.min(e,i)}if(!t)return;if(a.opaque){r.splice(n,s-n,e,"overlay "+t);s=n+2}else for(;n<s;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"overlay "+t}},o)};for(var l=0;l<e.state.overlays.length;++l)s(l);n.state=a;return{styles:r,classes:o.bgClass||o.textClass?o:null}}function en(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=tn(e,pe(t));var r=t.text.length>e.options.maxHighlightLength&&Wt(e.doc.mode,i.state);var o=Zt(e,t,i);r&&(i.state=r);t.stateAfter=i.save(!r);t.styles=o.styles;o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null);n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function tn(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return new Jt(i,true,t);var o=un(e,t,n);var a=o>i.first&&ce(i,o-1).stateAfter;var s=a?Jt.fromSaved(i,a,o):new Jt(i,Yt(i.mode),o);i.iter(o,t,function(n){nn(e,n.text,s);var i=s.line;n.stateAfter=i==t-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?s.save():null;s.nextLine()});n&&!e.doc.mode.noUpdateFrontier&&(i.modeFrontier=s.line);return s}function nn(e,t,n,i){var r=e.doc.mode;var o=new Xt(t,e.options.tabSize,n);o.start=o.pos=i||0;""==t&&rn(r,n.state);while(!o.eol()){on(r,o,n.state);o.start=o.pos}}function rn(e,t){if(e.blankLine)return e.blankLine(t);if(!e.innerMode)return;var n=Kt(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}function on(e,t,n,i){for(var r=0;r<10;r++){i&&(i[0]=Kt(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}var an=function(e,t,n){this.start=e.start;this.end=e.pos;this.string=e.current();this.type=t||null;this.state=n};function sn(e,t,n,i){var r=e.doc,o=r.mode,a;t=Ce(r,t);var s=ce(r,t.line),l=tn(e,t.line,n);var c=new Xt(s.text,e.options.tabSize,l),u;i&&(u=[]);while((i||c.pos<t.ch)&&!c.eol()){c.start=c.pos;a=on(o,c,l.state);i&&u.push(new an(c,a,Wt(r.mode,l.state)))}return i?u:new an(c,a,l.state)}function ln(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[i])||(t[i]+=" "+n[2])}return e}function cn(e,t,n,i,r,o,a){var s=n.flattenSpans;null==s&&(s=e.options.flattenSpans);var l=0,c=null;var u=new Xt(t,e.options.tabSize,i),d;var f=e.options.addModeClass&&[null];""==t&&ln(rn(n,i.state),o);while(!u.eol()){if(u.pos>e.options.maxHighlightLength){s=false;a&&nn(e,t,i,u.pos);u.pos=t.length;d=null}else d=ln(on(n,u,i.state,f),o);if(f){var p=f[0].name;p&&(d="m-"+(d?p+" "+d:p))}if(!s||c!=d){while(l<u.start){l=Math.min(u.start,l+5e3);r(l,c)}c=d}u.start=u.pos}while(l<u.pos){var h=Math.min(u.pos,l+5e3);r(h,c);l=h}}function un(e,t,n){var i,r,o=e.doc;var a=e.doc.mode.preciseStartState||n?-1:t-(e.doc.mode.innerMode?1e3:100);for(var s=t;s>a;--s){if(s<=o.first)return o.first;var l=ce(o,s-1),c=l.stateAfter;if(c&&(!n||s+(c instanceof Qt?c.lookAhead:0)<=o.modeFrontier))return s;var u=F(l.text,null,e.options.tabSize);if(null==r||i>u){r=s-1;i=u}}return r}function dn(e,t){e.modeFrontier=Math.min(e.modeFrontier,t);if(e.highlightFrontier<t-10)return;var n=e.first;for(var i=t-1;i>n;i--){var r=ce(e,i).stateAfter;if(r&&(!(r instanceof Qt)||i+r.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}var fn=function(e,t,n){this.text=e;He(this,t);this.height=n?n(this):1};fn.prototype.lineNo=function(){return pe(this)};wt(fn);function pn(e,t,n,i){e.text=t;e.stateAfter&&(e.stateAfter=null);e.styles&&(e.styles=null);null!=e.order&&(e.order=null);je(e);He(e,n);var r=i?i(e):1;r!=e.height&&fe(e,r)}function hn(e){e.parent=null;je(e)}var vn={};var gn={};function mn(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?gn:vn;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function bn(e,t){var n=A("span",null,null,l?"padding-right: .1px":null);var i={pre:A("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:false,splitSpaces:(a||l)&&e.getOption("lineWrapping")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var o=r?t.rest[r-1]:t.line,s=void 0;i.pos=0;i.addToken=xn;Lt(e.display.measure)&&(s=ct(o,e.doc.direction))&&(i.addToken=wn(i.addToken,s));i.map=[];var c=t!=e.display.externalMeasured&&pe(o);Cn(o,i,en(e,o,c));if(o.styleClasses){o.styleClasses.bgClass&&(i.bgClass=P(o.styleClasses.bgClass,i.bgClass||""));o.styleClasses.textClass&&(i.textClass=P(o.styleClasses.textClass,i.textClass||""))}0==i.map.length&&i.map.push(0,0,i.content.appendChild(Ot(e.display.measure)));if(0==r){t.measure.map=i.map;t.measure.cache={}}else{(t.measure.maps||(t.measure.maps=[])).push(i.map);(t.measure.caches||(t.measure.caches=[])).push({})}}if(l){var u=i.content.lastChild;(/\bcm-tab\b/.test(u.className)||u.querySelector&&u.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}bt(e,"renderLine",e,t.line,i.pre);i.pre.className&&(i.textClass=P(i.pre.className,i.textClass||""));return i}function yn(e){var t=D("span","","cm-invalidchar");t.title="\\u"+e.charCodeAt(0).toString(16);t.setAttribute("aria-label",t.title);return t}function xn(e,t,n,i,r,o,l){if(!t)return;var c=e.splitSpaces?Sn(t,e.trailingSpace):t;var u=e.cm.state.specialChars,d=false;var f;if(u.test(t)){f=document.createDocumentFragment();var p=0;while(true){u.lastIndex=p;var h=u.exec(t);var v=h?h.index-p:t.length-p;if(v){var g=document.createTextNode(c.slice(p,p+v));a&&s<9?f.appendChild(D("span",[g])):f.appendChild(g);e.map.push(e.pos,e.pos+v,g);e.col+=v;e.pos+=v}if(!h)break;p+=v+1;var m=void 0;if("\t"==h[0]){var b=e.cm.options.tabSize,y=b-e.col%b;m=f.appendChild(D("span",K(y),"cm-tab"));m.setAttribute("role","presentation");m.setAttribute("cm-text","\t");e.col+=y}else if("\r"==h[0]||"\n"==h[0]){m=f.appendChild(D("span","\r"==h[0]?"":"","cm-invalidchar"));m.setAttribute("cm-text",h[0]);e.col+=1}else{m=e.cm.options.specialCharPlaceholder(h[0]);m.setAttribute("cm-text",h[0]);a&&s<9?f.appendChild(D("span",[m])):f.appendChild(m);e.col+=1}e.map.push(e.pos,e.pos+1,m);e.pos++}}else{e.col+=t.length;f=document.createTextNode(c);e.map.push(e.pos,e.pos+t.length,f);a&&s<9&&(d=true);e.pos+=t.length}e.trailingSpace=32==c.charCodeAt(t.length-1);if(n||i||r||d||l){var x=n||"";i&&(x+=i);r&&(x+=r);var S=D("span",[f],x,l);o&&(S.title=o);return e.content.appendChild(S)}e.content.appendChild(f)}function Sn(e,t){if(e.length>1&&!/  /.test(e))return e;var n=t,i="";for(var r=0;r<e.length;r++){var o=e.charAt(r);" "!=o||!n||r!=e.length-1&&32!=e.charCodeAt(r+1)||(o="");i+=o;n=" "==o}return i}function wn(e,t){return function(n,i,r,o,a,s,l){r=r?r+" cm-force-border":"cm-force-border";var c=n.pos,u=c+i.length;for(;;){var d=void 0;for(var f=0;f<t.length;f++){d=t[f];if(d.to>c&&d.from<=c)break}if(d.to>=u)return e(n,i,r,o,a,s,l);e(n,i.slice(0,d.to-c),r,o,null,s,l);o=null;i=i.slice(d.to-c);c=d.to}}}function qn(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r);if(!i&&e.cm.display.input.needsContentAttribute){r||(r=e.content.appendChild(document.createElement("span")));r.setAttribute("cm-marker",n.id)}if(r){e.cm.display.input.setUneditable(r);e.content.appendChild(r)}e.pos+=t;e.trailingSpace=false}function Cn(e,t,n){var i=e.markedSpans,r=e.text,o=0;if(!i){for(var a=1;a<n.length;a+=2)t.addToken(t,r.slice(o,o=n[a]),mn(n[a+1],t.cm.options));return}var s=r.length,l=0,c=1,u="",d,f;var p=0,h,v,g,m,b;for(;;){if(p==l){h=v=g=m=f="";b=null;p=Infinity;var y=[],x=void 0;for(var S=0;S<i.length;++S){var w=i[S],q=w.marker;if("bookmark"==q.type&&w.from==l&&q.widgetNode)y.push(q);else if(w.from<=l&&(null==w.to||w.to>l||q.collapsed&&w.to==l&&w.from==l)){if(null!=w.to&&w.to!=l&&p>w.to){p=w.to;v=""}q.className&&(h+=" "+q.className);q.css&&(f=(f?f+";":"")+q.css);q.startStyle&&w.from==l&&(g+=" "+q.startStyle);q.endStyle&&w.to==p&&(x||(x=[])).push(q.endStyle,w.to);q.title&&!m&&(m=q.title);q.collapsed&&(!b||ze(b.marker,q)<0)&&(b=w)}else w.from>l&&p>w.from&&(p=w.from)}if(x)for(var C=0;C<x.length;C+=2)x[C+1]==p&&(v+=" "+x[C]);if(!b||b.from==l)for(var _=0;_<y.length;++_)qn(t,0,y[_]);if(b&&(b.from||0)==l){qn(t,(null==b.to?s+1:b.to)-l,b.marker,null==b.from);if(null==b.to)return;b.to==l&&(b=false)}}if(l>=s)break;var I=Math.min(s,p);while(true){if(u){var E=l+u.length;if(!b){var D=E>I?u.slice(0,I-l):u;t.addToken(t,D,d?d+h:h,g,l+D.length==p?v:"",m,f)}if(E>=I){u=u.slice(I-l);l=I;break}l=E;g=""}u=r.slice(o,o=n[c++]);d=mn(n[c++],t.cm.options)}}}function _n(e,t,n){this.line=t;this.rest=Qe(t);this.size=this.rest?pe(Y(this.rest))-n+1:1;this.node=this.text=null;this.hidden=et(e,t)}function In(e,t,n){var i=[],r;for(var o=t;o<n;o=r){var a=new _n(e.doc,ce(e.doc,o),o);r=o+a.size;i.push(a)}return i}var En=null;function Dn(e){En?En.ops.push(e):e.ownsGroup=En={ops:[e],delayedCallbacks:[]}}function An(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var r=e.ops[i];if(r.cursorActivityHandlers)while(r.cursorActivityCalled<r.cursorActivityHandlers.length)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<t.length)}function Tn(e,t){var n=e.ownsGroup;if(!n)return;try{An(n)}finally{En=null;t(n)}}var On=null;function kn(e,t){var n=gt(e,t);if(!n.length)return;var i=Array.prototype.slice.call(arguments,2),r;if(En)r=En.delayedCallbacks;else if(On)r=On;else{r=On=[];setTimeout(Ln,0)}var o=function(e){r.push(function(){return n[e].apply(null,i)})};for(var a=0;a<n.length;++a)o(a)}function Ln(){var e=On;On=null;for(var t=0;t<e.length;++t)e[t]()}function Pn(e,t,n,i){for(var r=0;r<t.changes.length;r++){var o=t.changes[r];"text"==o?Fn(e,t):"gutter"==o?jn(e,t,n,i):"class"==o?$n(e,t):"widget"==o&&Hn(e,t,i)}t.changes=null}function Mn(e){if(e.node==e.text){e.node=D("div",null,null,"position: relative");e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text);e.node.appendChild(e.text);a&&s<8&&(e.node.style.zIndex=2)}return e.node}function Nn(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;n&&(n+=" CodeMirror-linebackground");if(t.background)if(n)t.background.className=n;else{t.background.parentNode.removeChild(t.background);t.background=null}else if(n){var i=Mn(t);t.background=i.insertBefore(D("div",null,n),i.firstChild);e.display.input.setUneditable(t.background)}}function Rn(e,t){var n=e.display.externalMeasured;if(n&&n.line==t.line){e.display.externalMeasured=null;t.measure=n.measure;return n.built}return bn(e,t)}function Fn(e,t){var n=t.text.className;var i=Rn(e,t);t.text==t.node&&(t.node=i.pre);t.text.parentNode.replaceChild(i.pre,t.text);t.text=i.pre;if(i.bgClass!=t.bgClass||i.textClass!=t.textClass){t.bgClass=i.bgClass;t.textClass=i.textClass;$n(e,t)}else n&&(t.text.className=n)}function $n(e,t){Nn(e,t);t.line.wrapClass?Mn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function jn(e,t,n,i){if(t.gutter){t.node.removeChild(t.gutter);t.gutter=null}if(t.gutterBackground){t.node.removeChild(t.gutterBackground);t.gutterBackground=null}if(t.line.gutterClass){var r=Mn(t);t.gutterBackground=D("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px");e.display.input.setUneditable(t.gutterBackground);r.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var a=Mn(t);var s=t.gutter=D("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");e.display.input.setUneditable(s);a.insertBefore(s,t.text);t.line.gutterClass&&(s.className+=" "+t.line.gutterClass);!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(D("div",ge(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px")));if(o)for(var l=0;l<e.options.gutters.length;++l){var c=e.options.gutters[l],u=o.hasOwnProperty(c)&&o[c];u&&s.appendChild(D("div",[u],"CodeMirror-gutter-elt","left: "+i.gutterLeft[c]+"px; width: "+i.gutterWidth[c]+"px"))}}}function Hn(e,t,n){t.alignable&&(t.alignable=null);for(var i=t.node.firstChild,r=void 0;i;i=r){r=i.nextSibling;"CodeMirror-linewidget"==i.className&&t.node.removeChild(i)}Bn(e,t,n)}function Vn(e,t,n,i){var r=Rn(e,t);t.text=t.node=r.pre;r.bgClass&&(t.bgClass=r.bgClass);r.textClass&&(t.textClass=r.textClass);$n(e,t);jn(e,t,n,i);Bn(e,t,i);return t.node}function Bn(e,t,n){zn(e,t.line,t,n,true);if(t.rest)for(var i=0;i<t.rest.length;i++)zn(e,t.rest[i],t,n,false)}function zn(e,t,n,i,r){if(!t.widgets)return;var o=Mn(n);for(var a=0,s=t.widgets;a<s.length;++a){var l=s[a],c=D("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true");Un(l,c,n,i);e.display.input.setUneditable(c);r&&l.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c);kn(l,"redraw")}}function Un(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px";if(!e.coverGutter){r-=i.gutterTotalWidth;t.style.paddingLeft=i.gutterTotalWidth+"px"}t.style.width=r+"px"}if(e.coverGutter){t.style.zIndex=5;t.style.position="relative";e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px")}}function Gn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!O(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;");e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;");E(t.display.measure,D("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Wn(e,t){for(var n=Et(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return true}function Kn(e){return e.lineSpace.offsetTop}function Yn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Xn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=E(e.measure,D("pre","x"));var n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle;var i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i);return i}function Qn(e){return H-e.display.nativeBarWidth}function Jn(e){return e.display.scroller.clientWidth-Qn(e)-e.display.barWidth}function Zn(e){return e.display.scroller.clientHeight-Qn(e)-e.display.barHeight}function ei(e,t,n){var i=e.options.lineWrapping;var r=i&&Jn(e);if(!t.measure.heights||i&&t.measure.width!=r){var o=t.measure.heights=[];if(i){t.measure.width=r;var a=t.text.firstChild.getClientRects();for(var s=0;s<a.length-1;s++){var l=a[s],c=a[s+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}function ti(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var r=0;r<e.rest.length;r++)if(pe(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:true}}function ni(e,t){t=Ye(t);var n=pe(t);var i=e.display.externalMeasured=new _n(e.doc,t,n);i.lineN=n;var r=i.built=bn(e,i);i.text=r.pre;E(e.display.lineMeasure,r.pre);return i}function ii(e,t,n,i){return ai(e,oi(e,t),n,i)}function ri(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Mi(e,t)];var n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size)return n}function oi(e,t){var n=pe(t);var i=ri(e,n);if(i&&!i.text)i=null;else if(i&&i.changes){Pn(e,i,n,Ti(e));e.curOp.forceUpdate=true}i||(i=ni(e,t));var r=ti(i,t,n);return{line:t,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:false}}function ai(e,t,n,i,r){t.before&&(n=-1);var o=n+(i||""),a;if(t.cache.hasOwnProperty(o))a=t.cache[o];else{t.rect||(t.rect=t.view.text.getBoundingClientRect());if(!t.hasHeights){ei(e,t.view,t.rect);t.hasHeights=true}a=ui(e,t,n,i);a.bogus||(t.cache[o]=a)}return{left:a.left,right:a.right,top:r?a.rtop:a.top,bottom:r?a.rbottom:a.bottom}}var si={left:0,right:0,top:0,bottom:0};function li(e,t,n){var i,r,o,a,s,l;for(var c=0;c<e.length;c+=3){s=e[c];l=e[c+1];if(t<s){r=0;o=1;a="left"}else if(t<l){r=t-s;o=r+1}else if(c==e.length-3||t==l&&e[c+3]>t){o=l-s;r=o-1;t>=l&&(a="right")}if(null!=r){i=e[c+2];s==l&&n==(i.insertLeft?"left":"right")&&(a=n);if("left"==n&&0==r)while(c&&e[c-2]==e[c-3]&&e[c-1].insertLeft){i=e[2+(c-=3)];a="left"}if("right"==n&&r==l-s)while(c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft){i=e[(c+=3)+2];a="right"}break}}return{node:i,start:r,end:o,collapse:a,coverStart:s,coverEnd:l}}function ci(e,t){var n=si;if("left"==t){for(var i=0;i<e.length;i++)if((n=e[i]).left!=n.right)break}else for(var r=e.length-1;r>=0;r--)if((n=e[r]).left!=n.right)break;return n}function ui(e,t,n,i){var r=li(t.map,n,i);var o=r.node,l=r.start,c=r.end,u=r.collapse;var d;if(3==o.nodeType){for(var f=0;f<4;f++){while(l&&oe(t.line.text.charAt(r.coverStart+l)))--l;while(r.coverStart+c<r.coverEnd&&oe(t.line.text.charAt(r.coverStart+c)))++c;d=a&&s<9&&0==l&&c==r.coverEnd-r.coverStart?o.parentNode.getBoundingClientRect():ci(T(o,l,c).getClientRects(),i);if(d.left||d.right||0==l)break;c=l;l-=1;u="right"}a&&s<11&&(d=di(e.display.measure,d))}else{l>0&&(u=i="right");var p;d=e.options.lineWrapping&&(p=o.getClientRects()).length>1?p["right"==i?p.length-1:0]:o.getBoundingClientRect()}if(a&&s<9&&!l&&(!d||!d.left&&!d.right)){var h=o.parentNode.getClientRects()[0];d=h?{left:h.left,right:h.left+Ai(e.display),top:h.top,bottom:h.bottom}:si}var v=d.top-t.rect.top,g=d.bottom-t.rect.top;var m=(v+g)/2;var b=t.view.measure.heights;var y=0;for(;y<b.length-1;y++)if(m<b[y])break;var x=y?b[y-1]:0,S=b[y];var w={left:("right"==u?d.right:d.left)-t.rect.left,right:("left"==u?d.left:d.right)-t.rect.left,top:x,bottom:S};d.left||d.right||(w.bogus=true);if(!e.options.singleCursorHeightPerLine){w.rtop=v;w.rbottom=g}return w}function di(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Ft(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI;var i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}function fi(e){if(e.measure){e.measure.cache={};e.measure.heights=null;if(e.rest)for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}}function pi(e){e.display.externalMeasure=null;I(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)fi(e.display.view[t])}function hi(e){pi(e);e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null;e.options.lineWrapping||(e.display.maxLineChanged=true);e.display.lineNumChars=null}function vi(){if(u&&g)return-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft));return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function gi(){if(u&&g)return-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop));return window.pageYOffset||(document.documentElement||document.body).scrollTop}function mi(e,t,n,i,r){if(!r&&t.widgets)for(var o=0;o<t.widgets.length;++o)if(t.widgets[o].above){var a=Gn(t.widgets[o]);n.top+=a;n.bottom+=a}if("line"==i)return n;i||(i="local");var s=nt(t);"local"==i?s+=Kn(e.display):s-=e.display.viewOffset;if("page"==i||"window"==i){var l=e.display.lineSpace.getBoundingClientRect();s+=l.top+("window"==i?0:gi());var c=l.left+("window"==i?0:vi());n.left+=c;n.right+=c}n.top+=s;n.bottom+=s;return n}function bi(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;if("page"==n){i-=vi();r-=gi()}else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();i+=o.left;r+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:i-a.left,top:r-a.top}}function yi(e,t,n,i,r){i||(i=ce(e.doc,t.line));return mi(e,i,ii(e,i,t.ch,r),n)}function xi(e,t,n,i,r,o){i=i||ce(e.doc,t.line);r||(r=oi(e,i));function a(t,a){var s=ai(e,r,t,a?"right":"left",o);a?s.left=s.right:s.right=s.left;return mi(e,i,s,n)}var s=ct(i,e.doc.direction),l=t.ch,c=t.sticky;if(l>=i.text.length){l=i.text.length;c="before"}else if(l<=0){l=0;c="after"}if(!s)return a("before"==c?l-1:l,"before"==c);function u(e,t,n){var i=s[t],r=i.level%2!=0;return a(n?e-1:e,r!=n)}var d=st(s,l,c);var f=at;var p=u(l,d,"before"==c);null!=f&&(p.other=u(l,f,"before"!=c));return p}function Si(e,t){var n=0;t=Ce(e.doc,t);e.options.lineWrapping||(n=Ai(e.display)*t.ch);var i=ce(e.doc,t.line);var r=nt(i)+Kn(e.display);return{left:n,right:n,top:r,bottom:r+i.height}}function wi(e,t,n,i,r){var o=me(e,t,n);o.xRel=r;i&&(o.outside=true);return o}function qi(e,t,n){var i=e.doc;n+=e.display.viewOffset;if(n<0)return wi(i.first,0,null,true,-1);var r=he(i,n),o=i.first+i.size-1;if(r>o)return wi(i.first+i.size-1,ce(i,o).text.length,null,true,1);t<0&&(t=0);var a=ce(i,r);for(;;){var s=Ii(e,a,r,t,n);var l=We(a);var c=l&&l.find(0,true);if(!l||!(s.ch>c.from.ch||s.ch==c.from.ch&&s.xRel>0))return s;r=pe(a=c.to.line)}}function Ci(e,t,n,i){var r=function(i){return mi(e,t,ai(e,n,i),"line")};var o=t.text.length;var a=se(function(e){return r(e-1).bottom<=i},o,0);o=se(function(e){return r(e).top>i},a,o);return{begin:a,end:o}}function _i(e,t,n,i){var r=mi(e,t,ai(e,n,i),"line").top;return Ci(e,t,n,r)}function Ii(e,t,n,i,r){r-=nt(t);var o=0,a=t.text.length;var s=oi(e,t);var l;var c=ct(t,e.doc.direction);if(c){if(e.options.lineWrapping){var u;u=Ci(e,t,s,r),o=u.begin,a=u.end}l=new me(n,Math.floor(o+(a-o)/2));var d=xi(e,l,"line",t,s).left;var f=d<i?1:-1;var p,h=d-i,v;var g=Math.ceil((a-o)/4);e:do{p=h;v=l;var m=0;for(;m<g;++m){var b=l;l=pt(e,t,l,f);if(null==l||l.ch<o||a<=("before"==l.sticky?l.ch-1:l.ch)){l=b;break e}}h=xi(e,l,"line",t,s).left-i;if(g>1){var y=Math.abs(h-p)/g;g=Math.min(g,Math.ceil(Math.abs(h)/y));f=h<0?1:-1}}while(0!=h&&(g>1||f<0!=h<0&&Math.abs(h)<=Math.abs(p)));if(Math.abs(h)>Math.abs(p)){if(h<0==p<0)throw new Error("Broke out of infinite loop in coordsCharInner");l=v}}else{var x=se(function(n){var o=mi(e,t,ai(e,s,n),"line");if(o.top>r){a=Math.min(n,a);return true}return!(o.bottom<=r)&&(o.left>i||!(o.right<i)&&i-o.left<o.right-i)},o,a);x=ae(t.text,x,1);l=new me(n,x,x==a?"before":"after")}var S=xi(e,l,"line",t,s);(r<S.top||S.bottom<r)&&(l.outside=true);l.xRel=i<S.left?-1:i>S.right?1:0;return l}var Ei;function Di(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Ei){Ei=D("pre");for(var t=0;t<49;++t){Ei.appendChild(document.createTextNode("x"));Ei.appendChild(D("br"))}Ei.appendChild(document.createTextNode("x"))}E(e.measure,Ei);var n=Ei.offsetHeight/50;n>3&&(e.cachedTextHeight=n);I(e.measure);return n||1}function Ai(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=D("span","xxxxxxxxxx");var n=D("pre",[t]);E(e.measure,n);var i=t.getBoundingClientRect(),r=(i.right-i.left)/10;r>2&&(e.cachedCharWidth=r);return r||10}function Ti(e){var t=e.display,n={},i={};var r=t.gutters.clientLeft;for(var o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a){n[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+r;i[e.options.gutters[a]]=o.clientWidth}return{fixedPos:Oi(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function Oi(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ki(e){var t=Di(e.display),n=e.options.lineWrapping;var i=n&&Math.max(5,e.display.scroller.clientWidth/Ai(e.display)-3);return function(r){if(et(e.doc,r))return 0;var o=0;if(r.widgets)for(var a=0;a<r.widgets.length;a++)r.widgets[a].height&&(o+=r.widgets[a].height);return n?o+(Math.ceil(r.text.length/i)||1)*t:o+t}}function Li(e){var t=e.doc,n=ki(e);t.iter(function(e){var t=n(e);t!=e.height&&fe(e,t)})}function Pi(e,t,n,i){var r=e.display;if(!n&&"true"==Et(t).getAttribute("cm-not-content"))return null;var o,a,s=r.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left;a=t.clientY-s.top}catch(t){return null}var l=qi(e,o,a),c;if(i&&1==l.xRel&&(c=ce(e.doc,l.line).text).length==l.ch){var u=F(c,c.length,e.options.tabSize)-c.length;l=me(l.line,Math.max(0,Math.round((o-Xn(e.display).left)/Ai(e.display))-u))}return l}function Mi(e,t){if(t>=e.display.viewTo)return null;t-=e.display.viewFrom;if(t<0)return null;var n=e.display.view;for(var i=0;i<n.length;i++){t-=n[i].size;if(t<0)return i}}function Ni(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ri(e,t){var n=e.doc,i={};var r=i.cursors=document.createDocumentFragment();var o=i.selection=document.createDocumentFragment();for(var a=0;a<n.sel.ranges.length;a++){if(false===t&&a==n.sel.primIndex)continue;var s=n.sel.ranges[a];if(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)continue;var l=s.empty();(l||e.options.showCursorWhenSelecting)&&Fi(e,s.head,r);l||$i(e,s,o)}return i}function Fi(e,t,n){var i=xi(e,t,"div",null,null,!e.options.singleCursorHeightPerLine);var r=n.appendChild(D("div","","CodeMirror-cursor"));r.style.left=i.left+"px";r.style.top=i.top+"px";r.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px";if(i.other){var o=n.appendChild(D("div","","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="";o.style.left=i.other.left+"px";o.style.top=i.other.top+"px";o.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function $i(e,t,n){var i=e.display,r=e.doc;var o=document.createDocumentFragment();var a=Xn(e.display),s=a.left;var l=Math.max(i.sizerWidth,Jn(e)-i.sizer.offsetLeft)-a.right;function c(e,t,n,i){t<0&&(t=0);t=Math.round(t);i=Math.round(i);o.appendChild(D("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(i-t)+"px"))}function u(t,n,i){var o=ce(r,t);var a=o.text.length;var u,d;function f(n,i){return yi(e,me(t,n),"div",o,i)}ot(ct(o,r.direction),n||0,null==i?a:i,function(e,t,r){var o=f(e,"left"),p,h,v;if(e==t){p=o;h=v=o.left}else{p=f(t-1,"right");if("rtl"==r){var g=o;o=p;p=g}h=o.left;v=p.right}null==n&&0==e&&(h=s);if(p.top-o.top>3){c(h,o.top,null,o.bottom);h=s;o.bottom<p.top&&c(h,o.bottom,null,p.top)}null==i&&t==a&&(v=l);(!u||o.top<u.top||o.top==u.top&&o.left<u.left)&&(u=o);(!d||p.bottom>d.bottom||p.bottom==d.bottom&&p.right>d.right)&&(d=p);h<s+1&&(h=s);c(h,p.top,v-h,p.bottom)});return{start:u,end:d}}var d=t.from(),f=t.to();if(d.line==f.line)u(d.line,d.ch,f.ch);else{var p=ce(r,d.line),h=ce(r,f.line);var v=Ye(p)==Ye(h);var g=u(d.line,d.ch,v?p.text.length+1:null).end;var m=u(f.line,v?0:null,f.ch).start;if(v)if(g.top<m.top-2){c(g.right,g.top,null,g.bottom);c(s,m.top,m.left,m.bottom)}else c(g.right,g.top,m.left-g.right,g.bottom);g.bottom<m.top&&c(s,g.bottom,null,m.top)}n.appendChild(o)}function ji(e){if(!e.state.focused)return;var t=e.display;clearInterval(t.blinker);var n=true;t.cursorDiv.style.visibility="";e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}function Hi(e){if(!e.state.focused){e.display.input.focus();Bi(e)}}function Vi(e){e.state.delayingBlurEvent=true;setTimeout(function(){if(e.state.delayingBlurEvent){e.state.delayingBlurEvent=false;zi(e)}},100)}function Bi(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=false);if("nocursor"==e.options.readOnly)return;if(!e.state.focused){bt(e,"focus",e,t);e.state.focused=true;L(e.display.wrapper,"CodeMirror-focused");if(!e.curOp&&e.display.selForContextMenu!=e.doc.sel){e.display.input.reset();l&&setTimeout(function(){return e.display.input.reset(true)},20)}e.display.input.receivedFocus()}ji(e)}function zi(e,t){if(e.state.delayingBlurEvent)return;if(e.state.focused){bt(e,"blur",e,t);e.state.focused=false;_(e.display.wrapper,"CodeMirror-focused")}clearInterval(e.display.blinker);setTimeout(function(){e.state.focused||(e.display.shift=false)},150)}function Ui(e){var t=e.display;var n=t.lineDiv.offsetTop;for(var i=0;i<t.view.length;i++){var r=t.view[i],o=void 0;if(r.hidden)continue;if(a&&s<8){var l=r.node.offsetTop+r.node.offsetHeight;o=l-n;n=l}else{var c=r.node.getBoundingClientRect();o=c.bottom-c.top}var u=r.line.height-o;o<2&&(o=Di(t));if(u>.005||u<-.005){fe(r.line,o);Gi(r.line);if(r.rest)for(var d=0;d<r.rest.length;d++)Gi(r.rest[d])}}}function Gi(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function Wi(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-Kn(e));var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight;var o=he(t,i),a=he(t,r);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;if(s<o){o=s;a=he(t,nt(ce(t,s))+e.wrapper.clientHeight)}else if(Math.min(l,t.lastLine())>=a){o=he(t,nt(ce(t,l))-e.wrapper.clientHeight);a=l}}return{from:o,to:Math.max(a,o+1)}}function Ki(e){var t=e.display,n=t.view;if(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))return;var i=Oi(t)-t.scroller.scrollLeft+e.doc.scrollLeft;var r=t.gutters.offsetWidth,o=i+"px";for(var a=0;a<n.length;a++)if(!n[a].hidden){if(e.options.fixedGutter){n[a].gutter&&(n[a].gutter.style.left=o);n[a].gutterBackground&&(n[a].gutterBackground.style.left=o)}var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=i+r+"px")}function Yi(e){if(!e.options.lineNumbers)return false;var t=e.doc,n=ge(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(D("div",[D("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var o=r.firstChild.offsetWidth,a=r.offsetWidth-o;i.lineGutter.style.width="";i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-a)+1;i.lineNumWidth=i.lineNumInnerWidth+a;i.lineNumChars=i.lineNumInnerWidth?n.length:-1;i.lineGutter.style.width=i.lineNumWidth+"px";Ur(e);return true}return false}function Xi(e,t){if(yt(e,"scrollCursorIntoView"))return;var n=e.display,i=n.sizer.getBoundingClientRect(),r=null;t.top+i.top<0?r=true:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=false);if(null!=r&&!h){var o=D("div","",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Kn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Qn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o);o.scrollIntoView(r);e.display.lineSpace.removeChild(o)}}function Qi(e,t,n,i){null==i&&(i=0);var r;if(!e.options.lineWrapping&&t==n){t=t.ch?me(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t;n="before"==t.sticky?me(t.line,t.ch+1,"before"):t}for(var o=0;o<5;o++){var a=false;var s=xi(e,t);var l=n&&n!=t?xi(e,n):s;r={left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-i,right:Math.max(s.left,l.left),bottom:Math.max(s.bottom,l.bottom)+i};var c=Zi(e,r);var u=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=c.scrollTop){ar(e,c.scrollTop);Math.abs(e.doc.scrollTop-u)>1&&(a=true)}if(null!=c.scrollLeft){lr(e,c.scrollLeft);Math.abs(e.doc.scrollLeft-d)>1&&(a=true)}if(!a)break}return r}function Ji(e,t){var n=Zi(e,t);null!=n.scrollTop&&ar(e,n.scrollTop);null!=n.scrollLeft&&lr(e,n.scrollLeft)}function Zi(e,t){var n=e.display,i=Di(e.display);t.top<0&&(t.top=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop;var o=Zn(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var s=e.doc.height+Yn(n);var l=t.top<i,c=t.bottom>s-i;if(t.top<r)a.scrollTop=l?0:t.top;else if(t.bottom>r+o){var u=Math.min(t.top,(c?s:t.bottom)-o);u!=r&&(a.scrollTop=u)}var d=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft;var f=Jn(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0);var p=t.right-t.left>f;p&&(t.right=t.left+f);t.left<10?a.scrollLeft=0:t.left<d?a.scrollLeft=Math.max(0,t.left-(p?0:10)):t.right>f+d-3&&(a.scrollLeft=t.right+(p?0:10)-f);return a}function er(e,t){if(null==t)return;rr(e);e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t}function tr(e){rr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function nr(e,t,n){null==t&&null==n||rr(e);null!=t&&(e.curOp.scrollLeft=t);null!=n&&(e.curOp.scrollTop=n)}function ir(e,t){rr(e);e.curOp.scrollToPos=t}function rr(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=Si(e,t.from),i=Si(e,t.to);or(e,n,i,t.margin)}}function or(e,t,n,i){var r=Zi(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});nr(e,r.scrollLeft,r.scrollTop)}function ar(e,t){if(Math.abs(e.doc.scrollTop-t)<2)return;n||Br(e,{top:t});sr(e,t,true);n&&Br(e);Mr(e,100)}function sr(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t);if(e.display.scroller.scrollTop==t&&!n)return;e.doc.scrollTop=t;e.display.scrollbars.setScrollTop(t);e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t)}function lr(e,t,n,i){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth);if((n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i)return;e.doc.scrollLeft=t;Ki(e);e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t);e.display.scrollbars.setScrollLeft(t)}function cr(e){var t=e.display,n=t.gutters.offsetWidth;var i=Math.round(e.doc.height+Yn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Qn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var ur=function(e,t,n){this.cm=n;var i=this.vert=D("div",[D("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var r=this.horiz=D("div",[D("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(i);e(r);vt(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")});vt(r,"scroll",function(){r.clientWidth&&t(r.scrollLeft,"horizontal")});this.checkedZeroWidth=false;a&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ur.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1;var n=e.scrollHeight>e.clientHeight+1;var i=e.nativeBarWidth;if(n){this.vert.style.display="block";this.vert.style.bottom=t?i+"px":"0";var r=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(t){this.horiz.style.display="block";this.horiz.style.right=n?i+"px":"0";this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&e.clientHeight>0){0==i&&this.zeroWidthHack();this.checkedZeroWidth=true}return{right:n?i:0,bottom:t?i:0}};ur.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e);this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")};ur.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e);this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")};ur.prototype.zeroWidthHack=function(){var e=b&&!p?"12px":"18px";this.horiz.style.height=this.vert.style.width=e;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new $;this.disableVert=new $};ur.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto";function i(){var r=e.getBoundingClientRect();var o="vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1);o!=e?e.style.pointerEvents="none":t.set(1e3,i)}t.set(1e3,i)};ur.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz);e.removeChild(this.vert)};var dr=function(){};dr.prototype.update=function(){return{bottom:0,right:0}};dr.prototype.setScrollLeft=function(){};dr.prototype.setScrollTop=function(){};dr.prototype.clear=function(){};function fr(e,t){t||(t=cr(e));var n=e.display.barWidth,i=e.display.barHeight;pr(e,t);for(var r=0;r<4&&n!=e.display.barWidth||i!=e.display.barHeight;r++){n!=e.display.barWidth&&e.options.lineWrapping&&Ui(e);pr(e,cr(e));n=e.display.barWidth;i=e.display.barHeight}}function pr(e,t){var n=e.display;var i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px";n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px";n.heightForcer.style.borderBottom=i.bottom+"px solid transparent";if(i.right&&i.bottom){n.scrollbarFiller.style.display="block";n.scrollbarFiller.style.height=i.bottom+"px";n.scrollbarFiller.style.width=i.right+"px"}else n.scrollbarFiller.style.display="";if(i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter){n.gutterFiller.style.display="block";n.gutterFiller.style.height=i.bottom+"px";n.gutterFiller.style.width=t.gutterWidth+"px"}else n.gutterFiller.style.display=""}var hr={native:ur,null:dr};function vr(e){if(e.display.scrollbars){e.display.scrollbars.clear();e.display.scrollbars.addClass&&_(e.display.wrapper,e.display.scrollbars.addClass)}e.display.scrollbars=new hr[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller);vt(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)});t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?lr(e,t):ar(e,t)},e);e.display.scrollbars.addClass&&L(e.display.wrapper,e.display.scrollbars.addClass)}var gr=0;function mr(e){e.curOp={cm:e,viewChanged:false,startHeight:e.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++gr};Dn(e.curOp)}function br(e){var t=e.curOp;Tn(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;yr(e)})}function yr(e){var t=e.ops;for(var n=0;n<t.length;n++)xr(t[n]);for(var i=0;i<t.length;i++)Sr(t[i]);for(var r=0;r<t.length;r++)wr(t[r]);for(var o=0;o<t.length;o++)qr(t[o]);for(var a=0;a<t.length;a++)Cr(t[a])}function xr(e){var t=e.cm,n=t.display;Fr(t);e.updateMaxLine&&rt(t);e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping;e.update=e.mustUpdate&&new Rr(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Sr(e){e.updatedDisplay=e.mustUpdate&&Hr(e.cm,e.update)}function wr(e){var t=e.cm,n=t.display;e.updatedDisplay&&Ui(t);e.barMeasure=cr(t);if(n.maxLineChanged&&!t.options.lineWrapping){e.adjustWidthTo=ii(t,n.maxLine,n.maxLine.text.length).left+3;t.display.sizerWidth=e.adjustWidthTo;e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Qn(t)+t.display.barWidth);e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Jn(t))}(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection(e.focus))}function qr(e){var t=e.cm;if(null!=e.adjustWidthTo){t.display.sizer.style.minWidth=e.adjustWidthTo+"px";e.maxScrollLeft<t.doc.scrollLeft&&lr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),true);t.display.maxLineChanged=false}var n=e.focus&&e.focus==k()&&(!document.hasFocus||document.hasFocus());e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n);(e.updatedDisplay||e.startHeight!=t.doc.height)&&fr(t,e.barMeasure);e.updatedDisplay&&Gr(t,e.barMeasure);e.selectionChanged&&ji(t);t.state.focused&&e.updateInput&&t.display.input.reset(e.typing);n&&Hi(e.cm)}function Cr(e){var t=e.cm,n=t.display,i=t.doc;e.updatedDisplay&&Vr(t,e.update);null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null);null!=e.scrollTop&&sr(t,e.scrollTop,e.forceScroll);null!=e.scrollLeft&&lr(t,e.scrollLeft,true,true);if(e.scrollToPos){var r=Qi(t,Ce(i,e.scrollToPos.from),Ce(i,e.scrollToPos.to),e.scrollToPos.margin);Xi(t,r)}var o=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||bt(o[s],"hide");if(a)for(var l=0;l<a.length;++l)a[l].lines.length&&bt(a[l],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop);e.changeObjs&&bt(t,"changes",t,e.changeObjs);e.update&&e.update.finish()}function _r(e,t){if(e.curOp)return t();mr(e);try{return t()}finally{br(e)}}function Ir(e,t){return function(){if(e.curOp)return t.apply(e,arguments);mr(e);try{return t.apply(e,arguments)}finally{br(e)}}}function Er(e){return function(){if(this.curOp)return e.apply(this,arguments);mr(this);try{return e.apply(this,arguments)}finally{br(this)}}}function Dr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);mr(t);try{return e.apply(this,arguments)}finally{br(t)}}}function Ar(e,t,n,i){null==t&&(t=e.doc.first);null==n&&(n=e.doc.first+e.doc.size);i||(i=0);var r=e.display;i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t);e.curOp.viewChanged=true;if(t>=r.viewTo)De&&Je(e.doc,t)<r.viewTo&&Or(e);else if(n<=r.viewFrom)if(De&&Ze(e.doc,n+i)>r.viewFrom)Or(e);else{r.viewFrom+=i;r.viewTo+=i}else if(t<=r.viewFrom&&n>=r.viewTo)Or(e);else if(t<=r.viewFrom){var o=kr(e,n,n+i,1);if(o){r.view=r.view.slice(o.index);r.viewFrom=o.lineN;r.viewTo+=i}else Or(e)}else if(n>=r.viewTo){var a=kr(e,t,t,-1);if(a){r.view=r.view.slice(0,a.index);r.viewTo=a.lineN}else Or(e)}else{var s=kr(e,t,t,-1);var l=kr(e,n,n+i,1);if(s&&l){r.view=r.view.slice(0,s.index).concat(In(e,s.lineN,l.lineN)).concat(r.view.slice(l.index));r.viewTo+=i}else Or(e)}var c=r.externalMeasured;c&&(n<c.lineN?c.lineN+=i:t<c.lineN+c.size&&(r.externalMeasured=null))}function Tr(e,t,n){e.curOp.viewChanged=true;var i=e.display,r=e.display.externalMeasured;r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null);if(t<i.viewFrom||t>=i.viewTo)return;var o=i.view[Mi(e,t)];if(null==o.node)return;var a=o.changes||(o.changes=[]);-1==j(a,n)&&a.push(n)}function Or(e){e.display.viewFrom=e.display.viewTo=e.doc.first;e.display.view=[];e.display.viewOffset=0}function kr(e,t,n,i){var r=Mi(e,t),o,a=e.display.view;if(!De||n==e.doc.first+e.doc.size)return{index:r,lineN:n};var s=e.display.viewFrom;for(var l=0;l<r;l++)s+=a[l].size;if(s!=t){if(i>0){if(r==a.length-1)return null;o=s+a[r].size-t;r++}else o=s-t;t+=o;n+=o}while(Je(e.doc,n)!=n){if(r==(i<0?0:a.length-1))return null;n+=i*a[r-(i<0?1:0)].size;r+=i}return{index:r,lineN:n}}function Lr(e,t,n){var i=e.display,r=i.view;if(0==r.length||t>=i.viewTo||n<=i.viewFrom){i.view=In(e,t,n);i.viewFrom=t}else{i.viewFrom>t?i.view=In(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(Mi(e,t)));i.viewFrom=t;i.viewTo<n?i.view=i.view.concat(In(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,Mi(e,n)))}i.viewTo=n}function Pr(e){var t=e.display.view,n=0;for(var i=0;i<t.length;i++){var r=t[i];r.hidden||r.node&&!r.changes||++n}return n}function Mr(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,N(Nr,e))}function Nr(e){var t=e.doc;if(t.highlightFrontier>=e.display.viewTo)return;var n=+new Date+e.options.workTime;var i=tn(e,t.highlightFrontier);var r=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(i.line>=e.display.viewFrom){var a=o.styles;var s=o.text.length>e.options.maxHighlightLength?Wt(t.mode,i.state):null;var l=Zt(e,o,i,true);s&&(i.state=s);o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);var d=!a||a.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass);for(var f=0;!d&&f<a.length;++f)d=a[f]!=o.styles[f];d&&r.push(i.line);o.stateAfter=i.save();i.nextLine()}else{o.text.length<=e.options.maxHighlightLength&&nn(e,o.text,i);o.stateAfter=i.line%5==0?i.save():null;i.nextLine()}if(+new Date>n){Mr(e,e.options.workDelay);return true}});t.highlightFrontier=i.line;t.modeFrontier=Math.max(t.modeFrontier,i.line);r.length&&_r(e,function(){for(var t=0;t<r.length;t++)Tr(e,r[t],"text")})}var Rr=function(e,t,n){var i=e.display;this.viewport=t;this.visible=Wi(i,e.doc,t);this.editorIsHidden=!i.wrapper.offsetWidth;this.wrapperHeight=i.wrapper.clientHeight;this.wrapperWidth=i.wrapper.clientWidth;this.oldDisplayWidth=Jn(e);this.force=n;this.dims=Ti(e);this.events=[]};Rr.prototype.signal=function(e,t){St(e,t)&&this.events.push(arguments)};Rr.prototype.finish=function(){var e=this;for(var t=0;t<this.events.length;t++)bt.apply(null,e.events[t])};function Fr(e){var t=e.display;if(!t.scrollbarsClipped&&t.scroller.offsetWidth){t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth;t.heightForcer.style.height=Qn(e)+"px";t.sizer.style.marginBottom=-t.nativeBarWidth+"px";t.sizer.style.borderRightWidth=Qn(e)+"px";t.scrollbarsClipped=true}}function $r(e){if(e.hasFocus())return null;var t=k();if(!t||!O(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=window.getSelection();if(i.anchorNode&&i.extend&&O(e.display.lineDiv,i.anchorNode)){n.anchorNode=i.anchorNode;n.anchorOffset=i.anchorOffset;n.focusNode=i.focusNode;n.focusOffset=i.focusOffset}}return n}function jr(e){if(!e||!e.activeElt||e.activeElt==k())return;e.activeElt.focus();if(e.anchorNode&&O(document.body,e.anchorNode)&&O(document.body,e.focusNode)){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset);n.collapse(false);t.removeAllRanges();t.addRange(n);t.extend(e.focusNode,e.focusOffset)}}function Hr(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden){Or(e);return false}if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Pr(e))return false;if(Yi(e)){Or(e);t.dims=Ti(e)}var r=i.first+i.size;var o=Math.max(t.visible.from-e.options.viewportMargin,i.first);var a=Math.min(r,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom));n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(r,n.viewTo));if(De){o=Je(e.doc,o);a=Ze(e.doc,a)}var s=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;Lr(e,o,a);n.viewOffset=nt(ce(e.doc,n.viewFrom));e.display.mover.style.top=n.viewOffset+"px";var l=Pr(e);if(!s&&0==l&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return false;var c=$r(e);l>4&&(n.lineDiv.style.display="none");zr(e,n.updateLineNumbers,t.dims);l>4&&(n.lineDiv.style.display="");n.renderedView=n.view;jr(c);I(n.cursorDiv);I(n.selectionDiv);n.gutters.style.height=n.sizer.style.minHeight=0;if(s){n.lastWrapHeight=t.wrapperHeight;n.lastWrapWidth=t.wrapperWidth;Mr(e,400)}n.updateLineNumbers=null;return true}function Vr(e,t){var n=t.viewport;for(var i=true;;i=false){if(!i||!e.options.lineWrapping||t.oldDisplayWidth==Jn(e)){n&&null!=n.top&&(n={top:Math.min(e.doc.height+Yn(e.display)-Zn(e),n.top)});t.visible=Wi(e.display,e.doc,n);if(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}if(!Hr(e,t))break;Ui(e);var r=cr(e);Ni(e);fr(e,r);Gr(e,r);t.force=false}t.signal(e,"update",e);if(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo){t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo);e.display.reportedViewFrom=e.display.viewFrom;e.display.reportedViewTo=e.display.viewTo}}function Br(e,t){var n=new Rr(e,t);if(Hr(e,n)){Ui(e);Vr(e,n);var i=cr(e);Ni(e);fr(e,i);Gr(e,i);n.finish()}}function zr(e,t,n){var i=e.display,r=e.options.lineNumbers;var o=i.lineDiv,a=o.firstChild;function s(t){var n=t.nextSibling;l&&b&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t);return n}var c=i.view,u=i.viewFrom;for(var d=0;d<c.length;d++){var f=c[d];if(f.hidden);else if(f.node&&f.node.parentNode==o){while(a!=f.node)a=s(a);var p=r&&null!=t&&t<=u&&f.lineNumber;if(f.changes){j(f.changes,"gutter")>-1&&(p=false);Pn(e,f,u,n)}if(p){I(f.lineNumber);f.lineNumber.appendChild(document.createTextNode(ge(e.options,u)))}a=f.node.nextSibling}else{var h=Vn(e,f,u,n);o.insertBefore(h,a)}u+=f.size}while(a)a=s(a)}function Ur(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function Gr(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";e.display.heightForcer.style.top=t.docHeight+"px";e.display.gutters.style.height=t.docHeight+e.display.barHeight+Qn(e)+"px"}function Wr(e){var t=e.display.gutters,n=e.options.gutters;I(t);var i=0;for(;i<n.length;++i){var r=n[i];var o=t.appendChild(D("div",null,"CodeMirror-gutter "+r));if("CodeMirror-linenumbers"==r){e.display.lineGutter=o;o.style.width=(e.display.lineNumWidth||1)+"px"}}t.style.display=i?"":"none";Ur(e)}function Kr(e){var t=j(e.gutters,"CodeMirror-linenumbers");if(-1==t&&e.lineNumbers)e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]);else if(t>-1&&!e.lineNumbers){e.gutters=e.gutters.slice(0);e.gutters.splice(t,1)}}var Yr=0;var Xr=null;a?Xr=-.53:n?Xr=15:u?Xr=-.7:f&&(Xr=-1/3);function Qr(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail);null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta);return{x:t,y:n}}function Jr(e){var t=Qr(e);t.x*=Xr;t.y*=Xr;return t}function Zr(e,t){var i=Qr(t),r=i.x,o=i.y;var a=e.display,s=a.scroller;var c=s.scrollWidth>s.clientWidth;var u=s.scrollHeight>s.clientHeight;if(!(r&&c||o&&u))return;if(o&&b&&l)e:for(var f=t.target,p=a.view;f!=s;f=f.parentNode)for(var h=0;h<p.length;h++)if(p[h].node==f){e.display.currentWheelTarget=f;break e}if(r&&!n&&!d&&null!=Xr){o&&u&&ar(e,Math.max(0,s.scrollTop+o*Xr));lr(e,Math.max(0,s.scrollLeft+r*Xr));(!o||o&&u)&&qt(t);a.wheelStartX=null;return}if(o&&null!=Xr){var v=o*Xr;var g=e.doc.scrollTop,m=g+a.wrapper.clientHeight;v<0?g=Math.max(0,g+v-50):m=Math.min(e.doc.height,m+v+50);Br(e,{top:g,bottom:m})}if(Yr<20)if(null==a.wheelStartX){a.wheelStartX=s.scrollLeft;a.wheelStartY=s.scrollTop;a.wheelDX=r;a.wheelDY=o;setTimeout(function(){if(null==a.wheelStartX)return;var e=s.scrollLeft-a.wheelStartX;var t=s.scrollTop-a.wheelStartY;var n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null;if(!n)return;Xr=(Xr*Yr+n)/(Yr+1);++Yr},200)}else{a.wheelDX+=r;a.wheelDY+=o}}var eo=function(e,t){this.ranges=e;this.primIndex=t};eo.prototype.primary=function(){return this.ranges[this.primIndex]};eo.prototype.equals=function(e){var t=this;if(e==this)return true;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return false;for(var n=0;n<this.ranges.length;n++){var i=t.ranges[n],r=e.ranges[n];if(!ye(i.anchor,r.anchor)||!ye(i.head,r.head))return false}return true};eo.prototype.deepCopy=function(){var e=this;var t=[];for(var n=0;n<this.ranges.length;n++)t[n]=new to(xe(e.ranges[n].anchor),xe(e.ranges[n].head));return new eo(t,this.primIndex)};eo.prototype.somethingSelected=function(){var e=this;for(var t=0;t<this.ranges.length;t++)if(!e.ranges[t].empty())return true;return false};eo.prototype.contains=function(e,t){var n=this;t||(t=e);for(var i=0;i<this.ranges.length;i++){var r=n.ranges[i];if(be(t,r.from())>=0&&be(e,r.to())<=0)return i}return-1};var to=function(e,t){this.anchor=e;this.head=t};to.prototype.from=function(){return we(this.anchor,this.head)};to.prototype.to=function(){return Se(this.anchor,this.head)};to.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function no(e,t){var n=e[t];e.sort(function(e,t){return be(e.from(),t.from())});t=j(e,n);for(var i=1;i<e.length;i++){var r=e[i],o=e[i-1];if(be(o.to(),r.from())>=0){var a=we(o.from(),r.from()),s=Se(o.to(),r.to());var l=o.empty()?r.from()==r.head:o.from()==o.head;i<=t&&--t;e.splice(--i,2,new to(l?s:a,l?a:s))}}return new eo(e,t)}function io(e,t){return new eo([new to(e,t||e)],0)}function ro(e){if(!e.text)return e.to;return me(e.from.line+e.text.length-1,Y(e.text).length+(1==e.text.length?e.from.ch:0))}function oo(e,t){if(be(e,t.from)<0)return e;if(be(e,t.to)<=0)return ro(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;e.line==t.to.line&&(i+=ro(t).ch-t.to.ch);return me(n,i)}function ao(e,t){var n=[];for(var i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new to(oo(r.anchor,t),oo(r.head,t)))}return no(n,e.sel.primIndex)}function so(e,t,n){return e.line==t.line?me(n.line,e.ch-t.ch+n.ch):me(n.line+(e.line-t.line),e.ch)}function lo(e,t,n){var i=[];var r=me(e.first,0),o=r;for(var a=0;a<t.length;a++){var s=t[a];var l=so(s.from,r,o);var c=so(ro(s),r,o);r=s.to;o=c;if("around"==n){var u=e.sel.ranges[a],d=be(u.head,u.anchor)<0;i[a]=new to(d?c:l,d?l:c)}else i[a]=new to(l,l)}return new eo(i,e.sel.primIndex)}function co(e){e.doc.mode=zt(e.options,e.doc.modeOption);uo(e)}function uo(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null);e.styles&&(e.styles=null)});e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first;Mr(e,100);e.state.modeGen++;e.curOp&&Ar(e)}function fo(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Y(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function po(e,t,n,i){function r(e){return n?n[e]:null}function o(e,n,r){pn(e,n,r,i);kn(e,"change",e,t)}function a(e,t){var n=[];for(var o=e;o<t;++o)n.push(new fn(c[o],r(o),i));return n}var s=t.from,l=t.to,c=t.text;var u=ce(e,s.line),d=ce(e,l.line);var f=Y(c),p=r(c.length-1),h=l.line-s.line;if(t.full){e.insert(0,a(0,c.length));e.remove(c.length,e.size-c.length)}else if(fo(e,t)){var v=a(0,c.length-1);o(d,d.text,p);h&&e.remove(s.line,h);v.length&&e.insert(s.line,v)}else if(u==d)if(1==c.length)o(u,u.text.slice(0,s.ch)+f+u.text.slice(l.ch),p);else{var g=a(1,c.length-1);g.push(new fn(f+u.text.slice(l.ch),p,i));o(u,u.text.slice(0,s.ch)+c[0],r(0));e.insert(s.line+1,g)}else if(1==c.length){o(u,u.text.slice(0,s.ch)+c[0]+d.text.slice(l.ch),r(0));e.remove(s.line+1,h)}else{o(u,u.text.slice(0,s.ch)+c[0],r(0));o(d,f+d.text.slice(l.ch),p);var m=a(1,c.length-1);h>1&&e.remove(s.line+1,h-1);e.insert(s.line+1,m)}kn(e,"change",e,t)}function ho(e,t,n){function i(e,r,o){if(e.linked)for(var a=0;a<e.linked.length;++a){var s=e.linked[a];if(s.doc==r)continue;var l=o&&s.sharedHist;if(n&&!l)continue;t(s.doc,l);i(s.doc,e,l)}}i(e,null,true)}function vo(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t;t.cm=e;Li(e);co(e);go(e);e.options.lineWrapping||rt(e);e.options.mode=t.modeOption;Ar(e)}function go(e){("rtl"==e.doc.direction?L:_)(e.display.lineDiv,"CodeMirror-rtl")}function mo(e){_r(e,function(){go(e);Ar(e)})}function bo(e){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=e||1}function yo(e,t){var n={from:xe(t.from),to:ro(t),text:ue(e,t.from,t.to)};Io(e,n,t.from.line,t.to.line+1);ho(e,function(e){return Io(e,n,t.from.line,t.to.line+1)},true);return n}function xo(e){while(e.length){var t=Y(e);if(!t.ranges)break;e.pop()}}function So(e,t){if(t){xo(e.done);return Y(e.done)}if(e.done.length&&!Y(e.done).ranges)return Y(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges){e.done.pop();return Y(e.done)}}function wo(e,t,n,i){var r=e.history;r.undone.length=0;var o=+new Date,a;var s;if((r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&r.lastModTime>o-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(a=So(r,r.lastOp==i))){s=Y(a.changes);0==be(t.from,t.to)&&0==be(t.from,s.to)?s.to=ro(t):a.changes.push(yo(e,t))}else{var l=Y(r.done);l&&l.ranges||_o(e.sel,r.done);a={changes:[yo(e,t)],generation:r.generation};r.done.push(a);while(r.done.length>r.undoDepth){r.done.shift();r.done[0].ranges||r.done.shift()}}r.done.push(n);r.generation=++r.maxGeneration;r.lastModTime=r.lastSelTime=o;r.lastOp=r.lastSelOp=i;r.lastOrigin=r.lastSelOrigin=t.origin;s||bt(e,"historyAdded")}function qo(e,t,n,i){var r=t.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Co(e,t,n,i){var r=e.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||qo(e,o,Y(r.done),t))?r.done[r.done.length-1]=t:_o(t,r.done);r.lastSelTime=+new Date;r.lastSelOrigin=o;r.lastSelOp=n;i&&false!==i.clearRedo&&xo(r.undone)}function _o(e,t){var n=Y(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Io(e,t,n,i){var r=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[o]=n.markedSpans);++o})}function Eo(e){if(!e)return null;var t;for(var n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function Do(e,t){var n=t["spans_"+e.id];if(!n)return null;var i=[];for(var r=0;r<t.text.length;++r)i.push(Eo(n[r]));return i}function Ao(e,t){var n=Do(e,t);var i=Re(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],a=i[r];if(o&&a)e:for(var s=0;s<a.length;++s){var l=a[s];for(var c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else a&&(n[r]=a)}return n}function To(e,t,n){var i=[];for(var r=0;r<e.length;++r){var o=e[r];if(o.ranges){i.push(n?eo.prototype.deepCopy.call(o):o);continue}var a=o.changes,s=[];i.push({changes:s});for(var l=0;l<a.length;++l){var c=a[l],u=void 0;s.push({from:c.from,to:c.to,text:c.text});if(t)for(var d in c)if((u=d.match(/^spans_(\d+)$/))&&j(t,Number(u[1]))>-1){Y(s)[d]=c[d];delete c[d]}}}return i}function Oo(e,t,n,i){if(i){var r=e.anchor;if(n){var o=be(t,r)<0;if(o!=be(n,r)<0){r=t;t=n}else o!=be(t,n)<0&&(t=n)}return new to(r,t)}return new to(n||t,t)}function ko(e,t,n,i,r){null==r&&(r=e.cm&&(e.cm.display.shift||e.extend));Fo(e,new eo([Oo(e.sel.primary(),t,n,r)],0),i)}function Lo(e,t,n){var i=[];var r=e.cm&&(e.cm.display.shift||e.extend);for(var o=0;o<e.sel.ranges.length;o++)i[o]=Oo(e.sel.ranges[o],t[o],null,r);var a=no(i,e.sel.primIndex);Fo(e,a,n)}function Po(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n;Fo(e,no(r,e.sel.primIndex),i)}function Mo(e,t,n,i){Fo(e,io(t,n),i)}function No(e,t,n){var i={ranges:t.ranges,update:function(t){var n=this;this.ranges=[];for(var i=0;i<t.length;i++)n.ranges[i]=new to(Ce(e,t[i].anchor),Ce(e,t[i].head))},origin:n&&n.origin};bt(e,"beforeSelectionChange",e,i);e.cm&&bt(e.cm,"beforeSelectionChange",e.cm,i);return i.ranges!=t.ranges?no(i.ranges,i.ranges.length-1):t}function Ro(e,t,n){var i=e.history.done,r=Y(i);if(r&&r.ranges){i[i.length-1]=t;$o(e,t,n)}else Fo(e,t,n)}function Fo(e,t,n){$o(e,t,n);Co(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function $o(e,t,n){(St(e,"beforeSelectionChange")||e.cm&&St(e.cm,"beforeSelectionChange"))&&(t=No(e,t,n));var i=n&&n.bias||(be(t.primary().head,e.sel.primary().head)<0?-1:1);jo(e,Vo(e,t,i,true));n&&false===n.scroll||!e.cm||tr(e.cm)}function jo(e,t){if(t.equals(e.sel))return;e.sel=t;if(e.cm){e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=true;xt(e.cm)}kn(e,"cursorActivity",e)}function Ho(e){jo(e,Vo(e,e.sel,null,false))}function Vo(e,t,n,i){var r;for(var o=0;o<t.ranges.length;o++){var a=t.ranges[o];var s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o];var l=zo(e,a.anchor,s&&s.anchor,n,i);var c=zo(e,a.head,s&&s.head,n,i);if(r||l!=a.anchor||c!=a.head){r||(r=t.ranges.slice(0,o));r[o]=new to(l,c)}}return r?no(r,t.primIndex):t}function Bo(e,t,n,i,r){var o=ce(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],l=s.marker;if((null==s.from||(l.inclusiveLeft?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(l.inclusiveRight?s.to>=t.ch:s.to>t.ch))){if(r){bt(l,"beforeCursorEnter");if(l.explicitlyCleared){if(o.markedSpans){--a;continue}break}}if(!l.atomic)continue;if(n){var c=l.find(i<0?1:-1),u=void 0;(i<0?l.inclusiveRight:l.inclusiveLeft)&&(c=Uo(e,c,-i,c&&c.line==t.line?o:null));if(c&&c.line==t.line&&(u=be(c,n))&&(i<0?u<0:u>0))return Bo(e,c,t,i,r)}var d=l.find(i<0?-1:1);(i<0?l.inclusiveLeft:l.inclusiveRight)&&(d=Uo(e,d,i,d.line==t.line?o:null));return d?Bo(e,d,t,i,r):null}}return t}function zo(e,t,n,i,r){var o=i||1;var a=Bo(e,t,n,o,r)||!r&&Bo(e,t,n,o,true)||Bo(e,t,n,-o,r)||!r&&Bo(e,t,n,-o,true);if(!a){e.cantEdit=true;return me(e.first,0)}return a}function Uo(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?Ce(e,me(t.line-1)):null:n>0&&t.ch==(i||ce(e,t.line)).text.length?t.line<e.first+e.size-1?me(t.line+1,0):null:new me(t.line,t.ch+n)}function Go(e){e.setSelection(me(e.firstLine(),0),me(e.lastLine()),B)}function Wo(e,t,n){var i={canceled:false,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=true}};n&&(i.update=function(t,n,r,o){t&&(i.from=Ce(e,t));n&&(i.to=Ce(e,n));r&&(i.text=r);void 0!==o&&(i.origin=o)});bt(e,"beforeChange",e,i);e.cm&&bt(e.cm,"beforeChange",e.cm,i);if(i.canceled)return null;return{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Ko(e,t,n){if(e.cm){if(!e.cm.curOp)return Ir(e.cm,Ko)(e,t,n);if(e.cm.state.suppressEdits)return}if(St(e,"beforeChange")||e.cm&&St(e.cm,"beforeChange")){t=Wo(e,t,true);if(!t)return}var i=Ee&&!n&&$e(e,t.from,t.to);if(i)for(var r=i.length-1;r>=0;--r)Yo(e,{from:i[r].from,to:i[r].to,text:r?[""]:t.text});else Yo(e,t)}function Yo(e,t){if(1==t.text.length&&""==t.text[0]&&0==be(t.from,t.to))return;var n=ao(e,t);wo(e,t,n,e.cm?e.cm.curOp.id:NaN);Jo(e,t,n,Re(e,t));var i=[];ho(e,function(e,n){if(!n&&-1==j(i,e.history)){ia(e.history,t);i.push(e.history)}Jo(e,t,null,Re(e,t))})}function Xo(e,t,n){if(e.cm&&e.cm.state.suppressEdits&&!n)return;var i=e.history,r,o=e.sel;var a="undo"==t?i.done:i.undone,s="undo"==t?i.undone:i.done;var l=0;for(;l<a.length;l++){r=a[l];if(n?r.ranges&&!r.equals(e.sel):!r.ranges)break}if(l==a.length)return;i.lastOrigin=i.lastSelOrigin=null;for(;;){r=a.pop();if(!r.ranges)break;_o(r,s);if(n&&!r.equals(e.sel)){Fo(e,r,{clearRedo:false});return}o=r}var c=[];_o(o,s);s.push({changes:c,generation:i.generation});i.generation=r.generation||++i.maxGeneration;var u=St(e,"beforeChange")||e.cm&&St(e.cm,"beforeChange");var d=function(n){var i=r.changes[n];i.origin=t;if(u&&!Wo(e,i,false)){a.length=0;return{}}c.push(yo(e,i));var o=n?ao(e,i):Y(a);Jo(e,i,o,Ao(e,i));!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:ro(i)});var s=[];ho(e,function(e,t){if(!t&&-1==j(s,e.history)){ia(e.history,i);s.push(e.history)}Jo(e,i,null,Ao(e,i))})};for(var f=r.changes.length-1;f>=0;--f){var p=d(f);if(p)return p.v}}function Qo(e,t){if(0==t)return;e.first+=t;e.sel=new eo(X(e.sel.ranges,function(e){return new to(me(e.anchor.line+t,e.anchor.ch),me(e.head.line+t,e.head.ch))}),e.sel.primIndex);if(e.cm){Ar(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)Tr(e.cm,i,"gutter")}}function Jo(e,t,n,i){if(e.cm&&!e.cm.curOp)return Ir(e.cm,Jo)(e,t,n,i);if(t.to.line<e.first){Qo(e,t.text.length-1-(t.to.line-t.from.line));return}if(t.from.line>e.lastLine())return;if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);Qo(e,r);t={from:me(e.first,0),to:me(t.to.line+r,t.to.ch),text:[Y(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:me(o,ce(e,o).text.length),text:[t.text[0]],origin:t.origin});t.removed=ue(e,t.from,t.to);n||(n=ao(e,t));e.cm?Zo(e.cm,t,i):po(e,t,i);$o(e,n,B)}function Zo(e,t,n){var i=e.doc,r=e.display,o=t.from,a=t.to;var s=false,l=o.line;if(!e.options.lineWrapping){l=pe(Ye(ce(i,o.line)));i.iter(l,a.line+1,function(e){if(e==r.maxLine){s=true;return true}})}i.sel.contains(t.from,t.to)>-1&&xt(e);po(i,t,n,ki(e));if(!e.options.lineWrapping){i.iter(l,o.line+t.text.length,function(e){var t=it(e);if(t>r.maxLineLength){r.maxLine=e;r.maxLineLength=t;r.maxLineChanged=true;s=false}});s&&(e.curOp.updateMaxLine=true)}dn(i,o.line);Mr(e,400);var c=t.text.length-(a.line-o.line)-1;t.full?Ar(e):o.line!=a.line||1!=t.text.length||fo(e.doc,t)?Ar(e,o.line,a.line+1,c):Tr(e,o.line,"text");var u=St(e,"changes"),d=St(e,"change");if(d||u){var f={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};d&&kn(e,"change",e,f);u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}function ea(e,t,n,i,r){i||(i=n);if(be(i,n)<0){var o=i;i=n;n=o}"string"==typeof t&&(t=e.splitLines(t));Ko(e,{from:n,to:i,text:t,origin:r})}function ta(e,t,n,i){if(n<e.line)e.line+=i;else if(t<e.line){e.line=t;e.ch=0}}function na(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r],a=true;if(o.ranges){if(!o.copied){o=e[r]=o.deepCopy();o.copied=true}for(var s=0;s<o.ranges.length;s++){ta(o.ranges[s].anchor,t,n,i);ta(o.ranges[s].head,t,n,i)}continue}for(var l=0;l<o.changes.length;++l){var c=o.changes[l];if(n<c.from.line){c.from=me(c.from.line+i,c.from.ch);c.to=me(c.to.line+i,c.to.ch)}else if(t<=c.to.line){a=false;break}}if(!a){e.splice(0,r+1);r=0}}}function ia(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;na(e.done,n,i,r);na(e.undone,n,i,r)}function ra(e,t,n,i){var r=t,o=t;"number"==typeof t?o=ce(e,qe(e,t)):r=pe(t);if(null==r)return null;i(o,r)&&e.cm&&Tr(e.cm,r,n);return o}function oa(e){var t=this;this.lines=e;this.parent=null;var n=0;for(var i=0;i<e.length;++i){e[i].parent=t;n+=e[i].height}this.height=n}oa.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){var n=this;for(var i=e,r=e+t;i<r;++i){var o=n.lines[i];n.height-=o.height;hn(o);kn(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){var i=this;this.height+=n;this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=i},iterN:function(e,t,n){var i=this;for(var r=e+t;e<r;++e)if(n(i.lines[e]))return true}};function aa(e){var t=this;this.children=e;var n=0,i=0;for(var r=0;r<e.length;++r){var o=e[r];n+=o.chunkSize();i+=o.height;o.parent=t}this.size=n;this.height=i;this.parent=null}aa.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){var n=this;this.size-=t;for(var i=0;i<this.children.length;++i){var r=n.children[i],o=r.chunkSize();if(e<o){var a=Math.min(t,o-e),s=r.height;r.removeInner(e,a);n.height-=s-r.height;if(o==a){n.children.splice(i--,1);r.parent=null}if(0==(t-=a))break;e=0}else e-=o}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof oa))){var l=[];this.collapse(l);this.children=[new oa(l)];this.children[0].parent=this}},collapse:function(e){var t=this;for(var n=0;n<this.children.length;++n)t.children[n].collapse(e)},insertInner:function(e,t,n){var i=this;this.size+=t.length;this.height+=n;for(var r=0;r<this.children.length;++r){var o=i.children[r],a=o.chunkSize();if(e<=a){o.insertInner(e,t,n);if(o.lines&&o.lines.length>50){var s=o.lines.length%25+25;for(var l=s;l<o.lines.length;){var c=new oa(o.lines.slice(l,l+=25));o.height-=c.height;i.children.splice(++r,0,c);c.parent=i}o.lines=o.lines.slice(0,s);i.maybeSpill()}break}e-=a}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5);var n=new aa(t);if(e.parent){e.size-=n.size;e.height-=n.height;var i=j(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new aa(e.children);r.parent=e;e.children=[r,n];e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iterN:function(e,t,n){var i=this;for(var r=0;r<this.children.length;++r){var o=i.children[r],a=o.chunkSize();if(e<a){var s=Math.min(t,a-e);if(o.iterN(e,s,n))return true;if(0==(t-=s))break;e=0}else e-=a}}};var sa=function(e,t,n){var i=this;if(n)for(var r in n)n.hasOwnProperty(r)&&(i[r]=n[r]);this.doc=e;this.node=t};sa.prototype.clear=function(){var e=this;var t=this.doc.cm,n=this.line.widgets,i=this.line,r=pe(i);if(null==r||!n)return;for(var o=0;o<n.length;++o)n[o]==e&&n.splice(o--,1);n.length||(i.widgets=null);var a=Gn(this);fe(i,Math.max(0,i.height-a));if(t){_r(t,function(){la(t,i,-a);Tr(t,r,"widget")});kn(t,"lineWidgetCleared",t,this,r)}};sa.prototype.changed=function(){var e=this;var t=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=Gn(this)-t;if(!r)return;fe(i,i.height+r);n&&_r(n,function(){n.curOp.forceUpdate=true;la(n,i,r);kn(n,"lineWidgetChanged",n,e,pe(i))})};wt(sa);function la(e,t,n){nt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&er(e,n)}function ca(e,t,n,i){var r=new sa(e,n,i);var o=e.cm;o&&r.noHScroll&&(o.display.alignWidgets=true);ra(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);null==r.insertAt?n.push(r):n.splice(Math.min(n.length-1,Math.max(0,r.insertAt)),0,r);r.line=t;if(o&&!et(e,t)){var i=nt(t)<e.scrollTop;fe(t,t.height+Gn(r));i&&er(o,r.height);o.curOp.forceUpdate=true}return true});kn(o,"lineWidgetAdded",o,r,"number"==typeof t?t:pe(t));return r}var ua=0;var da=function(e,t){this.lines=[];this.type=t;this.doc=e;this.id=++ua};da.prototype.clear=function(){var e=this;if(this.explicitlyCleared)return;var t=this.doc.cm,n=t&&!t.curOp;n&&mr(t);if(St(this,"clear")){var i=this.find();i&&kn(this,"clear",i.from,i.to)}var r=null,o=null;for(var a=0;a<this.lines.length;++a){var s=e.lines[a];var l=ke(s.markedSpans,e);if(t&&!e.collapsed)Tr(t,pe(s),"text");else if(t){null!=l.to&&(o=pe(s));null!=l.from&&(r=pe(s))}s.markedSpans=Le(s.markedSpans,l);null==l.from&&e.collapsed&&!et(e.doc,s)&&t&&fe(s,Di(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var c=0;c<this.lines.length;++c){var u=Ye(e.lines[c]),d=it(u);if(d>t.display.maxLineLength){t.display.maxLine=u;t.display.maxLineLength=d;t.display.maxLineChanged=true}}null!=r&&t&&this.collapsed&&Ar(t,r,o+1);this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;t&&Ho(t.doc)}t&&kn(t,"markerCleared",t,this,r,o);n&&br(t);this.parent&&this.parent.clear()};da.prototype.find=function(e,t){var n=this;null==e&&"bookmark"==this.type&&(e=1);var i,r;for(var o=0;o<this.lines.length;++o){var a=n.lines[o];var s=ke(a.markedSpans,n);if(null!=s.from){i=me(t?a:pe(a),s.from);if(-1==e)return i}if(null!=s.to){r=me(t?a:pe(a),s.to);if(1==e)return r}}return i&&{from:i,to:r}};da.prototype.changed=function(){var e=this;var t=this.find(-1,true),n=this,i=this.doc.cm;if(!t||!i)return;_r(i,function(){var r=t.line,o=pe(t.line);var a=ri(i,o);if(a){fi(a);i.curOp.selectionChanged=i.curOp.forceUpdate=true}i.curOp.updateMaxLine=true;if(!et(n.doc,r)&&null!=n.height){var s=n.height;n.height=null;var l=Gn(n)-s;l&&fe(r,r.height+l)}kn(i,"markerChanged",i,e)})};da.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=j(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)};da.prototype.detachLine=function(e){this.lines.splice(j(this.lines,e),1);if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};wt(da);function fa(e,t,n,i,r){if(i&&i.shared)return ha(e,t,n,i,r);if(e.cm&&!e.cm.curOp)return Ir(e.cm,fa)(e,t,n,i,r);var o=new da(e,r),a=be(t,n);i&&R(i,o,false);if(a>0||0==a&&false!==o.clearWhenEmpty)return o;if(o.replacedWith){o.collapsed=true;o.widgetNode=A("span",[o.replacedWith],"CodeMirror-widget");i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true");i.insertLeft&&(o.widgetNode.insertLeft=true)}if(o.collapsed){if(Ke(e,t.line,t,n,o)||t.line!=n.line&&Ke(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Te()}o.addToHistory&&wo(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var s=t.line,l=e.cm,c;e.iter(s,n.line+1,function(e){l&&o.collapsed&&!l.options.lineWrapping&&Ye(e)==l.display.maxLine&&(c=true);o.collapsed&&s!=t.line&&fe(e,0);Pe(e,new Oe(o,s==t.line?t.ch:null,s==n.line?n.ch:null));++s});o.collapsed&&e.iter(t.line,n.line+1,function(t){et(e,t)&&fe(t,0)});o.clearOnEnter&&vt(o,"beforeCursorEnter",function(){return o.clear()});if(o.readOnly){Ae();(e.history.done.length||e.history.undone.length)&&e.clearHistory()}if(o.collapsed){o.id=++ua;o.atomic=true}if(l){c&&(l.curOp.updateMaxLine=true);if(o.collapsed)Ar(l,t.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var u=t.line;u<=n.line;u++)Tr(l,u,"text");o.atomic&&Ho(l.doc);kn(l,"markerAdded",l,o)}return o}var pa=function(e,t){var n=this;this.markers=e;this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=n};pa.prototype.clear=function(){var e=this;if(this.explicitlyCleared)return;this.explicitlyCleared=true;for(var t=0;t<this.markers.length;++t)e.markers[t].clear();kn(this,"clear")};pa.prototype.find=function(e,t){return this.primary.find(e,t)};wt(pa);function ha(e,t,n,i,r){i=R(i);i.shared=false;var o=[fa(e,t,n,i,r)],a=o[0];var s=i.widgetNode;ho(e,function(e){s&&(i.widgetNode=s.cloneNode(true));o.push(fa(e,Ce(e,t),Ce(e,n),i,r));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=Y(o)});return new pa(o,a)}function va(e){return e.findMarks(me(e.first,0),e.clipPos(me(e.lastLine())),function(e){return e.parent})}function ga(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.find();var o=e.clipPos(r.from),a=e.clipPos(r.to);if(be(o,a)){var s=fa(e,o,a,i.primary,i.primary.type);i.markers.push(s);s.parent=i}}}function ma(e){var t=function(t){var n=e[t],i=[n.primary.doc];ho(n.primary.doc,function(e){return i.push(e)});for(var r=0;r<n.markers.length;r++){var o=n.markers[r];if(-1==j(i,o.doc)){o.parent=null;n.markers.splice(r--,1)}}};for(var n=0;n<e.length;n++)t(n)}var ba=0;var ya=function(e,t,n,i,r){if(!(this instanceof ya))return new ya(e,t,n,i,r);null==n&&(n=0);aa.call(this,[new oa([new fn("",null)])]);this.first=n;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=n;var o=me(n,0);this.sel=io(o);this.history=new bo(null);this.id=++ba;this.modeOption=t;this.lineSep=i;this.direction="rtl"==r?"rtl":"ltr";this.extend=false;"string"==typeof e&&(e=this.splitLines(e));po(this,{from:o,to:o,text:e});Fo(this,io(o),B)};ya.prototype=Z(aa.prototype,{constructor:ya,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){var n=0;for(var i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=de(this,this.first,this.first+this.size);if(false===e)return t;return t.join(e||this.lineSeparator())},setValue:Dr(function(e){var t=me(this.first,0),n=this.first+this.size-1;Ko(this,{from:t,to:me(n,ce(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:true},true);this.cm&&nr(this.cm,0,0);Fo(this,io(t),B)}),replaceRange:function(e,t,n,i){t=Ce(this,t);n=n?Ce(this,n):t;ea(this,e,t,n,i)},getRange:function(e,t,n){var i=ue(this,Ce(this,e),Ce(this,t));if(false===n)return i;return i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(ve(this,e))return ce(this,e)},getLineNumber:function(e){return pe(e)},getLineHandleVisualStart:function(e){"number"==typeof e&&(e=ce(this,e));return Ye(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Ce(this,e)},getCursor:function(e){var t=this.sel.primary(),n;n=null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||false===e?t.to():t.from();return n},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Dr(function(e,t,n){Mo(this,Ce(this,"number"==typeof e?me(e,t||0):e),null,n)}),setSelection:Dr(function(e,t,n){Mo(this,Ce(this,e),Ce(this,t||e),n)}),extendSelection:Dr(function(e,t,n){ko(this,Ce(this,e),t&&Ce(this,t),n)}),extendSelections:Dr(function(e,t){Lo(this,Ie(this,e),t)}),extendSelectionsBy:Dr(function(e,t){var n=X(this.sel.ranges,e);Lo(this,Ie(this,n),t)}),setSelections:Dr(function(e,t,n){var i=this;if(!e.length)return;var r=[];for(var o=0;o<e.length;o++)r[o]=new to(Ce(i,e[o].anchor),Ce(i,e[o].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex));Fo(this,no(r,t),n)}),addSelection:Dr(function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new to(Ce(this,e),Ce(this,t||e)));Fo(this,no(i,i.length-1),n)}),getSelection:function(e){var t=this;var n=this.sel.ranges,i;for(var r=0;r<n.length;r++){var o=ue(t,n[r].from(),n[r].to());i=i?i.concat(o):o}return false===e?i:i.join(e||this.lineSeparator())},getSelections:function(e){var t=this;var n=[],i=this.sel.ranges;for(var r=0;r<i.length;r++){var o=ue(t,i[r].from(),i[r].to());false!==e&&(o=o.join(e||t.lineSeparator()));n[r]=o}return n},replaceSelection:function(e,t,n){var i=[];for(var r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:Dr(function(e,t,n){var i=this;var r=[],o=this.sel;for(var a=0;a<o.ranges.length;a++){var s=o.ranges[a];r[a]={from:s.from(),to:s.to(),text:i.splitLines(e[a]),origin:n}}var l=t&&"end"!=t&&lo(this,r,t);for(var c=r.length-1;c>=0;c--)Ko(i,r[c]);l?Ro(this,l):this.cm&&tr(this.cm)}),undo:Dr(function(){Xo(this,"undo")}),redo:Dr(function(){Xo(this,"redo")}),undoSelection:Dr(function(){Xo(this,"undo",true)}),redoSelection:Dr(function(){Xo(this,"redo",true)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){var e=this.history,t=0,n=0;for(var i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new bo(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(e){e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:To(this.history.done),undone:To(this.history.undone)}},setHistory:function(e){var t=this.history=new bo(this.history.maxGeneration);t.done=To(e.done.slice(0),null,true);t.undone=To(e.undone.slice(0),null,true)},setGutterMarker:Dr(function(e,t,n){return ra(this,e,"gutter",function(e){var i=e.gutterMarkers||(e.gutterMarkers={});i[t]=n;!n&&ie(i)&&(e.gutterMarkers=null);return true})}),clearGutter:Dr(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&ra(t,n,"gutter",function(){n.gutterMarkers[e]=null;ie(n.gutterMarkers)&&(n.gutterMarkers=null);return true})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!ve(this,e))return null;t=e;e=ce(this,e);if(!e)return null}else{t=pe(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Dr(function(e,t,n){return ra(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(C(n).test(e[i]))return false;e[i]+=" "+n}else e[i]=n;return true})}),removeLineClass:Dr(function(e,t,n){return ra(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";var r=e[i];if(!r)return false;if(null==n)e[i]=null;else{var o=r.match(C(n));if(!o)return false;var a=o.index+o[0].length;e[i]=r.slice(0,o.index)+(o.index&&a!=r.length?" ":"")+r.slice(a)||null}return true})}),addLineWidget:Dr(function(e,t,n){return ca(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return fa(this,Ce(this,e),Ce(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:false,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};e=Ce(this,e);return fa(this,e,e,n,"bookmark")},findMarksAt:function(e){e=Ce(this,e);var t=[],n=ce(this,e.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,n){e=Ce(this,e);t=Ce(this,t);var i=[],r=e.line;this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&r==e.line&&e.ch>=l.to||null==l.from&&r!=e.line||null!=l.from&&r==t.line&&l.from>=t.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r});return i},getAllMarks:function(){var e=[];this.iter(function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)});return e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;this.iter(function(r){var o=r.text.length+i;if(o>e){t=e;return true}e-=o;++n});return Ce(this,me(n,t))},indexFromPos:function(e){e=Ce(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;this.iter(this.first,e.line,function(e){t+=e.text.length+n});return t},copy:function(e){var t=new ya(de(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);t.scrollTop=this.scrollTop;t.scrollLeft=this.scrollLeft;t.sel=this.sel;t.extend=false;if(e){t.history.undoDepth=this.history.undoDepth;t.setHistory(this.getHistory())}return t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from);null!=e.to&&e.to<n&&(n=e.to);var i=new ya(de(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);e.sharedHist&&(i.history=this.history);(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist});i.linked=[{doc:this,isParent:true,sharedHist:e.sharedHist}];ga(i,va(this));return i},unlinkDoc:function(e){var t=this;e instanceof Ds&&(e=e.doc);if(this.linked)for(var n=0;n<this.linked.length;++n){var i=t.linked[n];if(i.doc!=e)continue;t.linked.splice(n,1);e.unlinkDoc(t);ma(va(t));break}if(e.history==this.history){var r=[e.id];ho(e,function(e){return r.push(e.id)},true);e.history=new bo(null);e.history.done=To(this.history.done,r);e.history.undone=To(this.history.undone,r)}},iterLinkedDocs:function(e){ho(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){if(this.lineSep)return e.split(this.lineSep);return Pt(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Dr(function(e){"rtl"!=e&&(e="ltr");if(e==this.direction)return;this.direction=e;this.iter(function(e){return e.order=null});this.cm&&mo(this.cm)})});ya.prototype.eachLine=ya.prototype.iter;var xa=0;function Sa(e){var t=this;Ca(t);if(yt(t,e)||Wn(t.display,e))return;qt(e);a&&(xa=+new Date);var n=Pi(t,e,true),i=e.dataTransfer.files;if(!n||t.isReadOnly())return;if(i&&i.length&&window.FileReader&&window.File){var r=i.length,o=Array(r),s=0;var l=function(e,i){if(t.options.allowDropFileTypes&&-1==j(t.options.allowDropFileTypes,e.type))return;var a=new FileReader;a.onload=Ir(t,function(){var e=a.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e="");o[i]=e;if(++s==r){n=Ce(t.doc,n);var l={from:n,to:n,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};Ko(t.doc,l);Ro(t.doc,io(n,ro(l)))}});a.readAsText(e)};for(var c=0;c<r;++c)l(i[c],c)}else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1){t.state.draggingText(e);setTimeout(function(){return t.display.input.focus()},20);return}try{var u=e.dataTransfer.getData("Text");if(u){var d;t.state.draggingText&&!t.state.draggingText.copy&&(d=t.listSelections());$o(t.doc,io(n,n));if(d)for(var f=0;f<d.length;++f)ea(t.doc,"",d[f].anchor,d[f].head,"drag");t.replaceSelection(u,"around","paste");t.display.input.focus()}}catch(e){}}}function wa(e,t){if(a&&(!e.state.draggingText||+new Date-xa<100)){It(t);return}if(yt(e,t)||Wn(e.display,t))return;t.dataTransfer.setData("Text",e.getSelection());t.dataTransfer.effectAllowed="copyMove";if(t.dataTransfer.setDragImage&&!f){var n=D("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(d){n.width=n.height=1;e.display.wrapper.appendChild(n);n._top=n.offsetTop}t.dataTransfer.setDragImage(n,0,0);d&&n.parentNode.removeChild(n)}}function qa(e,t){var n=Pi(e,t);if(!n)return;var i=document.createDocumentFragment();Fi(e,n,i);if(!e.display.dragCursor){e.display.dragCursor=D("div",null,"CodeMirror-cursors CodeMirror-dragcursors");e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)}E(e.display.dragCursor,i)}function Ca(e){if(e.display.dragCursor){e.display.lineSpace.removeChild(e.display.dragCursor);e.display.dragCursor=null}}function _a(e){if(!document.getElementsByClassName)return;var t=document.getElementsByClassName("CodeMirror");for(var n=0;n<t.length;n++){var i=t[n].CodeMirror;i&&e(i)}}var Ia=false;function Ea(){if(Ia)return;Da();Ia=true}function Da(){var e;vt(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null;_a(Aa)},100))});vt(window,"blur",function(){return _a(zi)})}function Aa(e){var t=e.display;if(t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth)return;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null;t.scrollbarsClipped=false;e.setSize()}var Ta={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var Oa=0;Oa<10;Oa++)Ta[Oa+48]=Ta[Oa+96]=String(Oa);for(var ka=65;ka<=90;ka++)Ta[ka]=String.fromCharCode(ka);for(var La=1;La<=12;La++)Ta[La+111]=Ta[La+63235]="F"+La;var Pa={};Pa.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};Pa.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};Pa.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};Pa.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};Pa["default"]=b?Pa.macDefault:Pa.pcDefault;function Ma(e){var t=e.split(/-(?!$)/);e=t[t.length-1];var n,i,r,o;for(var a=0;a<t.length-1;a++){var s=t[a];if(/^(cmd|meta|m)$/i.test(s))o=true;else if(/^a(lt)?$/i.test(s))n=true;else if(/^(c|ctrl|control)$/i.test(s))i=true;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);r=true}}n&&(e="Alt-"+e);i&&(e="Ctrl-"+e);o&&(e="Cmd-"+e);r&&(e="Shift-"+e);return e}function Na(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}var r=X(n.split(" "),Ma);for(var o=0;o<r.length;o++){var a=void 0,s=void 0;if(o==r.length-1){s=r.join(" ");a=i}else{s=r.slice(0,o+1).join(" ");a="..."}var l=t[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else t[s]=a}delete e[n]}for(var c in t)e[c]=t[c];return e}function Ra(e,t,n,i){t=Ha(t);var r=t.call?t.call(e,i):t[e];if(false===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Ra(e,t.fallthrough,n,i);for(var o=0;o<t.fallthrough.length;o++){var a=Ra(e,t.fallthrough[o],n,i);if(a)return a}}}function Fa(e){var t="string"==typeof e?e:Ta[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function $a(e,t,n){var i=e;t.altKey&&"Alt"!=i&&(e="Alt-"+e);(w?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e);(w?t.ctrlKey:t.metaKey)&&"Cmd"!=i&&(e="Cmd-"+e);!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e);return e}function ja(e,t){if(d&&34==e.keyCode&&e["char"])return false;var n=Ta[e.keyCode];if(null==n||e.altGraphKey)return false;return $a(n,e,t)}function Ha(e){return"string"==typeof e?Pa[e]:e}function Va(e,t){var n=e.doc.sel.ranges,i=[];for(var r=0;r<n.length;r++){var o=t(n[r]);while(i.length&&be(o.from,Y(i).to)<=0){var a=i.pop();if(be(a.from,o.from)<0){o.from=a.from;break}}i.push(o)}_r(e,function(){for(var t=i.length-1;t>=0;t--)ea(e.doc,"",i[t].from,i[t].to,"+delete");tr(e)})}var Ba={selectAll:Go,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),B)},killLine:function(e){return Va(e,function(t){if(t.empty()){var n=ce(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:me(t.head.line+1,0)}:{from:t.head,to:me(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Va(e,function(t){return{from:me(t.from().line,0),to:Ce(e.doc,me(t.to().line+1,0))}})},delLineLeft:function(e){return Va(e,function(e){return{from:me(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return Va(e,function(t){var n=e.charCoords(t.head,"div").top+5;var i=e.coordsChar({left:0,top:n},"div");return{from:i,to:t.from()}})},delWrappedLineRight:function(e){return Va(e,function(t){var n=e.charCoords(t.head,"div").top+5;var i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(me(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(me(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return za(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Ga(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return Ua(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},U)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},U)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;var i=e.coordsChar({left:0,top:n},"div");if(i.ch<e.getLine(i.line).search(/\S/))return Ga(e,t.head);return i},U)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){var t=[],n=e.listSelections(),i=e.options.tabSize;for(var r=0;r<n.length;r++){var o=n[r].from();var a=F(e.getLine(o.line),o.ch,i);t.push(K(i-a%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return _r(e,function(){var t=e.listSelections(),n=[];for(var i=0;i<t.length;i++){if(!t[i].empty())continue;var r=t[i].head,o=ce(e.doc,r.line).text;if(o){r.ch==o.length&&(r=new me(r.line,r.ch-1));if(r.ch>0){r=new me(r.line,r.ch+1);e.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),me(r.line,r.ch-2),r,"+transpose")}else if(r.line>e.doc.first){var a=ce(e.doc,r.line-1).text;if(a){r=new me(r.line,1);e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),me(r.line-1,a.length-1),r,"+transpose")}}}n.push(new to(r,r))}e.setSelections(n)})},newlineAndIndent:function(e){return _r(e,function(){var t=e.listSelections();for(var n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,true);tr(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function za(e,t){var n=ce(e.doc,t);var i=Ye(n);i!=n&&(t=pe(i));return ft(true,e,i,t,1)}function Ua(e,t){var n=ce(e.doc,t);var i=Xe(n);i!=n&&(t=pe(i));return ft(true,e,n,t,-1)}function Ga(e,t){var n=za(e,t.line);var i=ce(e.doc,n.line);var r=ct(i,e.doc.direction);if(!r||0==r[0].level){var o=Math.max(0,i.text.search(/\S/));var a=t.line==n.line&&t.ch<=o&&t.ch;return me(n.line,a?0:o,n.sticky)}return n}function Wa(e,t,n){if("string"==typeof t){t=Ba[t];if(!t)return false}e.display.input.ensurePolled();var i=e.display.shift,r=false;try{e.isReadOnly()&&(e.state.suppressEdits=true);n&&(e.display.shift=false);r=t(e)!=V}finally{e.display.shift=i;e.state.suppressEdits=false}return r}function Ka(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var r=Ra(t,e.state.keyMaps[i],n,e);if(r)return r}return e.options.extraKeys&&Ra(t,e.options.extraKeys,n,e)||Ra(t,e.options.keyMap,n,e)}var Ya=new $;function Xa(e,t,n,i){var r=e.state.keySeq;if(r){if(Fa(t))return"handled";Ya.set(50,function(){if(e.state.keySeq==r){e.state.keySeq=null;e.display.input.reset()}});t=r+" "+t}var o=Ka(e,t,i);"multi"==o&&(e.state.keySeq=t);"handled"==o&&kn(e,"keyHandled",e,t,n);if("handled"==o||"multi"==o){qt(n);ji(e)}if(r&&!o&&/\'$/.test(t)){qt(n);return true}return!!o}function Qa(e,t){var n=ja(t,true);if(!n)return false;return t.shiftKey&&!e.state.keySeq?Xa(e,"Shift-"+n,t,function(t){return Wa(e,t,true)})||Xa(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return Wa(e,t)}):Xa(e,n,t,function(t){return Wa(e,t)})}function Ja(e,t,n){return Xa(e,"'"+n+"'",t,function(t){return Wa(e,t,true)})}var Za=null;function es(e){var t=this;t.curOp.focus=k();if(yt(t,e))return;a&&s<11&&27==e.keyCode&&(e.returnValue=false);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var i=Qa(t,e);if(d){Za=i?n:null;!i&&88==n&&!Nt&&(b?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")}18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||ts(t)}function ts(e){var t=e.display.lineDiv;L(t,"CodeMirror-crosshair");function n(e){if(18==e.keyCode||!e.altKey){_(t,"CodeMirror-crosshair");mt(document,"keyup",n);mt(document,"mouseover",n)}}vt(document,"keyup",n);vt(document,"mouseover",n)}function ns(e){16==e.keyCode&&(this.doc.sel.shift=false);yt(this,e)}function is(e){var t=this;if(Wn(t.display,e)||yt(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)return;var n=e.keyCode,i=e.charCode;if(d&&n==Za){Za=null;qt(e);return}if(d&&(!e.which||e.which<10)&&Qa(t,e))return;var r=String.fromCharCode(null==i?n:i);if("\b"==r)return;if(Ja(t,e,r))return;t.display.input.onKeyPress(e)}var rs=400;var os=function(e,t,n){this.time=e;this.pos=t;this.button=n};os.prototype.compare=function(e,t,n){return this.time+rs>e&&0==be(t,this.pos)&&n==this.button};var as;var ss;function ls(e,t){var n=+new Date;if(ss&&ss.compare(n,e,t)){as=ss=null;return"triple"}if(as&&as.compare(n,e,t)){ss=new os(n,e,t);as=null;return"double"}as=new os(n,e,t);ss=null;return"single"}function cs(e){var t=this,n=t.display;if(yt(t,e)||n.activeTouch&&n.input.supportsTouch())return;n.input.ensurePolled();n.shift=e.shiftKey;if(Wn(n,e)){if(!l){n.scroller.draggable=false;setTimeout(function(){return n.scroller.draggable=true},100)}return}if(ms(t,e))return;var i=Pi(t,e),r=Dt(e),o=i?ls(i,r):"single";window.focus();1==r&&t.state.selectingText&&t.state.selectingText(e);if(i&&us(t,r,i,o,e))return;if(1==r)i?fs(t,i,o,e):Et(e)==n.scroller&&qt(e);else if(2==r){i&&ko(t.doc,i);setTimeout(function(){return n.input.focus()},20)}else 3==r&&(q?bs(t,e):Vi(t))}function us(e,t,n,i,r){var o="Click";"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o);o=(1==t?"Left":2==t?"Middle":"Right")+o;return Xa(e,$a(o,r),r,function(t){"string"==typeof t&&(t=Ba[t]);if(!t)return false;var i=false;try{e.isReadOnly()&&(e.state.suppressEdits=true);i=t(e,n)!=V}finally{e.state.suppressEdits=false}return i})}function ds(e,t,n){var i=e.getOption("configureMouse");var r=i?i(e,t,n):{};if(null==r.unit){var o=y?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}(null==r.extend||e.doc.extend)&&(r.extend=e.doc.extend||n.shiftKey);null==r.addNew&&(r.addNew=b?n.metaKey:n.ctrlKey);null==r.moveOnDrag&&(r.moveOnDrag=!(b?n.altKey:n.ctrlKey));return r}function fs(e,t,n,i){a?setTimeout(N(Hi,e),0):e.curOp.focus=k();var r=ds(e,n,i);var o=e.doc.sel,s;e.options.dragDrop&&At&&!e.isReadOnly()&&"single"==n&&(s=o.contains(t))>-1&&(be((s=o.ranges[s]).from(),t)<0||t.xRel>0)&&(be(s.to(),t)>0||t.xRel<0)?ps(e,i,t,r):vs(e,i,t,r)}function ps(e,t,n,i){var r=e.display,o=false;var c=Ir(e,function(t){l&&(r.scroller.draggable=false);e.state.draggingText=false;mt(document,"mouseup",c);mt(document,"mousemove",u);mt(r.scroller,"dragstart",d);mt(r.scroller,"drop",c);if(!o){qt(t);i.addNew||ko(e.doc,n,null,null,i.extend);l||a&&9==s?setTimeout(function(){document.body.focus();r.input.focus()},20):r.input.focus()}});var u=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10};var d=function(){return o=true};l&&(r.scroller.draggable=true);e.state.draggingText=c;c.copy=!i.moveOnDrag;r.scroller.dragDrop&&r.scroller.dragDrop();vt(document,"mouseup",c);vt(document,"mousemove",u);vt(r.scroller,"dragstart",d);vt(r.scroller,"drop",c);Vi(e);setTimeout(function(){return r.input.focus()},20)}function hs(e,t,n){if("char"==n)return new to(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new to(me(t.line,0),Ce(e.doc,me(t.line+1,0)));var i=n(e,t);return new to(i.from,i.to)}function vs(e,t,n,i){var r=e.display,o=e.doc;qt(t);var a,s,l=o.sel,c=l.ranges;if(i.addNew&&!i.extend){s=o.sel.contains(n);a=s>-1?c[s]:new to(n,n)}else{a=o.sel.primary();s=o.sel.primIndex}if("rectangle"==i.unit){i.addNew||(a=new to(n,n));n=Pi(e,t,true,true);s=-1}else{var u=hs(e,n,i.unit);a=i.extend?Oo(a,u.anchor,u.head,i.extend):u}if(i.addNew)if(-1==s){s=c.length;Fo(o,no(c.concat([a]),s),{scroll:false,origin:"*mouse"})}else if(c.length>1&&c[s].empty()&&"char"==i.unit&&!i.extend){Fo(o,no(c.slice(0,s).concat(c.slice(s+1)),0),{scroll:false,origin:"*mouse"});l=o.sel}else Po(o,s,a,z);else{s=0;Fo(o,new eo([a],0),z);l=o.sel}var d=n;function f(t){if(0==be(d,t))return;d=t;if("rectangle"==i.unit){var r=[],c=e.options.tabSize;var u=F(ce(o,n.line).text,n.ch,c);var f=F(ce(o,t.line).text,t.ch,c);var p=Math.min(u,f),h=Math.max(u,f);for(var v=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));v<=g;v++){var m=ce(o,v).text,b=G(m,p,c);p==h?r.push(new to(me(v,b),me(v,b))):m.length>b&&r.push(new to(me(v,b),me(v,G(m,h,c))))}r.length||r.push(new to(n,n));Fo(o,no(l.ranges.slice(0,s).concat(r),s),{origin:"*mouse",scroll:false});e.scrollIntoView(t)}else{var y=a;var x=hs(e,t,i.unit);var S=y.anchor,w;if(be(x.anchor,S)>0){w=x.head;S=we(y.from(),x.anchor)}else{w=x.anchor;S=Se(y.to(),x.head)}var q=l.ranges.slice(0);q[s]=new to(Ce(o,S),w);Fo(o,no(q,s),z)}}var p=r.wrapper.getBoundingClientRect();var h=0;function v(t){var n=++h;var a=Pi(e,t,true,"rectangle"==i.unit);if(!a)return;if(0!=be(a,d)){e.curOp.focus=k();f(a);var s=Wi(r,o);(a.line>=s.to||a.line<s.from)&&setTimeout(Ir(e,function(){h==n&&v(t)}),150)}else{var l=t.clientY<p.top?-20:t.clientY>p.bottom?20:0;l&&setTimeout(Ir(e,function(){if(h!=n)return;r.scroller.scrollTop+=l;v(t)}),50)}}function g(t){e.state.selectingText=false;h=Infinity;qt(t);r.input.focus();mt(document,"mousemove",m);mt(document,"mouseup",b);o.history.lastSelOrigin=null}var m=Ir(e,function(e){Dt(e)?v(e):g(e)});var b=Ir(e,g);e.state.selectingText=b;vt(document,"mousemove",m);vt(document,"mouseup",b)}function gs(e,t,n,i){var r,o;try{r=t.clientX;o=t.clientY}catch(t){return false}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return false;i&&qt(t);var a=e.display;var s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!St(e,n))return _t(t);o-=s.top-a.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var c=a.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=r){var u=he(e.doc,o);var d=e.options.gutters[l];bt(e,n,e,u,d,t);return _t(t)}}}function ms(e,t){return gs(e,t,"gutterClick",true)}function bs(e,t){if(Wn(e.display,t)||ys(e,t))return;if(yt(e,t,"contextmenu"))return;e.display.input.onContextMenu(t)}function ys(e,t){if(!St(e,"gutterContextMenu"))return false;return gs(e,t,"gutterContextMenu",false)}function xs(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-");hi(e)}var Ss={toString:function(){return"CodeMirror.Init"}};var ws={};var qs={};function Cs(e){var t=e.optionHandlers;function n(n,i,r,o){e.defaults[n]=i;r&&(t[n]=o?function(e,t,n){n!=Ss&&r(e,t,n)}:r)}e.defineOption=n;e.Init=Ss;n("value","",function(e,t){return e.setValue(t)},true);n("mode",null,function(e,t){e.doc.modeOption=t;co(e)},true);n("indentUnit",2,co,true);n("indentWithTabs",false);n("smartIndent",true);n("tabSize",4,function(e){uo(e);hi(e);Ar(e)},true);n("lineSeparator",null,function(e,t){e.doc.lineSep=t;if(!t)return;var n=[],i=e.doc.first;e.doc.iter(function(e){for(var r=0;;){var o=e.text.indexOf(t,r);if(-1==o)break;r=o+t.length;n.push(me(i,o))}i++});for(var r=n.length-1;r>=0;r--)ea(e.doc,t,n[r],me(n[r].line,n[r].ch+t.length))});n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g");n!=Ss&&e.refresh()});n("specialCharPlaceholder",yn,function(e){return e.refresh()},true);n("electricChars",true);n("inputStyle",m?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);n("spellcheck",false,function(e,t){return e.getInputField().spellcheck=t},true);n("rtlMoveVisually",!x);n("wholeLineUpdateBefore",true);n("theme","default",function(e){xs(e);_s(e)},true);n("keyMap","default",function(e,t,n){var i=Ha(t);var r=n!=Ss&&Ha(n);r&&r.detach&&r.detach(e,i);i.attach&&i.attach(e,r||null)});n("extraKeys",null);n("configureMouse",null);n("lineWrapping",false,Es,true);n("gutters",[],function(e){Kr(e.options);_s(e)},true);n("fixedGutter",true,function(e,t){e.display.gutters.style.left=t?Oi(e.display)+"px":"0";e.refresh()},true);n("coverGutterNextToScrollbar",false,function(e){return fr(e)},true);n("scrollbarStyle","native",function(e){vr(e);fr(e);e.display.scrollbars.setScrollTop(e.doc.scrollTop);e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},true);n("lineNumbers",false,function(e){Kr(e.options);_s(e)},true);n("firstLineNumber",1,_s,true);n("lineNumberFormatter",function(e){return e},_s,true);n("showCursorWhenSelecting",false,Ni,true);n("resetSelectionOnContextMenu",true);n("lineWiseCopyCut",true);n("pasteLinesPerSelection",true);n("readOnly",false,function(e,t){if("nocursor"==t){zi(e);e.display.input.blur()}e.display.input.readOnlyChanged(t)});n("disableInput",false,function(e,t){t||e.display.input.reset()},true);n("dragDrop",true,Is);n("allowDropFileTypes",null);n("cursorBlinkRate",530);n("cursorScrollMargin",0);n("cursorHeight",1,Ni,true);n("singleCursorHeightPerLine",true,Ni,true);n("workTime",100);n("workDelay",100);n("flattenSpans",true,uo,true);n("addModeClass",false,uo,true);n("pollInterval",100);n("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t});n("historyEventDelay",1250);n("viewportMargin",10,function(e){return e.refresh()},true);n("maxHighlightLength",1e4,uo,true);n("moveInputWithCursor",true,function(e,t){t||e.display.input.resetPosition()});n("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""});n("autofocus",null);n("direction","ltr",function(e,t){return e.doc.setDirection(t)},true)}function _s(e){Wr(e);Ar(e);Ki(e)}function Is(e,t,n){var i=n&&n!=Ss;if(!t!=!i){var r=e.display.dragFunctions;var o=t?vt:mt;o(e.display.scroller,"dragstart",r.start);o(e.display.scroller,"dragenter",r.enter);o(e.display.scroller,"dragover",r.over);o(e.display.scroller,"dragleave",r.leave);o(e.display.scroller,"drop",r.drop)}}function Es(e){if(e.options.lineWrapping){L(e.display.wrapper,"CodeMirror-wrap");e.display.sizer.style.minWidth="";e.display.sizerWidth=null}else{_(e.display.wrapper,"CodeMirror-wrap");rt(e)}Li(e);Ar(e);hi(e);setTimeout(function(){return fr(e)},100)}function Ds(e,t){var n=this;if(!(this instanceof Ds))return new Ds(e,t);this.options=t=t?R(t):{};R(ws,t,false);Kr(t);var i=t.value;"string"==typeof i&&(i=new ya(i,t.mode,null,t.lineSeparator,t.direction));this.doc=i;var r=new Ds.inputStyles[t.inputStyle](this);var o=this.display=new le(e,i,r);o.wrapper.CodeMirror=this;Wr(this);xs(this);t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");vr(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new $,keySeq:null,specialChars:null};t.autofocus&&!m&&o.input.focus();a&&s<11&&setTimeout(function(){return n.display.input.reset(true)},20);As(this);Ea();mr(this);this.curOp.forceUpdate=true;vo(this,i);t.autofocus&&!m||this.hasFocus()?setTimeout(N(Bi,this),20):zi(this);for(var c in qs)qs.hasOwnProperty(c)&&qs[c](n,t[c],Ss);Yi(this);t.finishInit&&t.finishInit(this);for(var u=0;u<Ts.length;++u)Ts[u](n);br(this);l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Ds.defaults=ws;Ds.optionHandlers=qs;function As(e){var t=e.display;vt(t.scroller,"mousedown",Ir(e,cs));vt(t.scroller,"dblclick",a&&s<11?Ir(e,function(t){if(yt(e,t))return;var n=Pi(e,t);if(!n||ms(e,t)||Wn(e.display,t))return;qt(t);var i=e.findWordAt(n);ko(e.doc,i.anchor,i.head)}):function(t){return yt(e,t)||qt(t)});q||vt(t.scroller,"contextmenu",function(t){return bs(e,t)});var n,i={end:0};function r(){if(t.activeTouch){n=setTimeout(function(){return t.activeTouch=null},1e3);i=t.activeTouch;i.end=+new Date}}function o(e){if(1!=e.touches.length)return false;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function l(e,t){if(null==t.left)return true;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}vt(t.scroller,"touchstart",function(r){if(!yt(e,r)&&!o(r)){t.input.ensurePolled();clearTimeout(n);var a=+new Date;t.activeTouch={start:a,moved:false,prev:a-i.end<=300?i:null};if(1==r.touches.length){t.activeTouch.left=r.touches[0].pageX;t.activeTouch.top=r.touches[0].pageY}}});vt(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=true)});vt(t.scroller,"touchend",function(n){var i=t.activeTouch;if(i&&!Wn(t,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var o=e.coordsChar(t.activeTouch,"page"),a;a=!i.prev||l(i,i.prev)?new to(o,o):!i.prev.prev||l(i,i.prev.prev)?e.findWordAt(o):new to(me(o.line,0),Ce(e.doc,me(o.line+1,0)));e.setSelection(a.anchor,a.head);e.focus();qt(n)}r()});vt(t.scroller,"touchcancel",r);vt(t.scroller,"scroll",function(){if(t.scroller.clientHeight){ar(e,t.scroller.scrollTop);lr(e,t.scroller.scrollLeft,true);bt(e,"scroll",e)}});vt(t.scroller,"mousewheel",function(t){return Zr(e,t)});vt(t.scroller,"DOMMouseScroll",function(t){return Zr(e,t)});vt(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0});t.dragFunctions={enter:function(t){yt(e,t)||It(t)},over:function(t){if(!yt(e,t)){qa(e,t);It(t)}},start:function(t){return wa(e,t)},drop:Ir(e,Sa),leave:function(t){yt(e,t)||Ca(e)}};var c=t.input.getField();vt(c,"keyup",function(t){return ns.call(e,t)});vt(c,"keydown",Ir(e,es));vt(c,"keypress",Ir(e,is));vt(c,"focus",function(t){return Bi(e,t)});vt(c,"blur",function(t){return zi(e,t)})}var Ts=[];Ds.defineInitHook=function(e){return Ts.push(e)};function Os(e,t,n,i){var r=e.doc,o;null==n&&(n="add");"smart"==n&&(r.mode.indent?o=tn(e,t).state:n="prev");var a=e.options.tabSize;var s=ce(r,t),l=F(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var c=s.text.match(/^\s*/)[0],u;if(i||/\S/.test(s.text)){if("smart"==n){u=r.mode.indent(o,s.text.slice(c.length),s.text);if(u==V||u>150){if(!i)return;n="prev"}}}else{u=0;n="not"}"prev"==n?u=t>r.first?F(ce(r,t-1).text,null,a):0:"add"==n?u=l+e.options.indentUnit:"subtract"==n?u=l-e.options.indentUnit:"number"==typeof n&&(u=l+n);u=Math.max(0,u);var d="",f=0;if(e.options.indentWithTabs)for(var p=Math.floor(u/a);p;--p){f+=a;d+="\t"}f<u&&(d+=K(u-f));if(d!=c){ea(r,d,me(t,0),me(t,c.length),"+input");s.stateAfter=null;return true}for(var h=0;h<r.sel.ranges.length;h++){var v=r.sel.ranges[h];if(v.head.line==t&&v.head.ch<c.length){var g=me(t,c.length);Po(r,h,new to(g,g));break}}}var ks=null;function Ls(e){ks=e}function Ps(e,t,n,i,r){var o=e.doc;e.display.shift=false;i||(i=o.sel);var a=e.state.pasteIncoming||"paste"==r;var s=Pt(t),l=null;if(a&&i.ranges.length>1)if(ks&&ks.text.join("\n")==t){if(i.ranges.length%ks.text.length==0){l=[];for(var c=0;c<ks.text.length;c++)l.push(o.splitLines(ks.text[c]))}}else s.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(l=X(s,function(e){return[e]}));var u;for(var d=i.ranges.length-1;d>=0;d--){var f=i.ranges[d];var p=f.from(),h=f.to();f.empty()&&(n&&n>0?p=me(p.line,p.ch-n):e.state.overwrite&&!a?h=me(h.line,Math.min(ce(o,h.line).text.length,h.ch+Y(s).length)):ks&&ks.lineWise&&ks.text.join("\n")==t&&(p=h=me(p.line,0)));u=e.curOp.updateInput;var v={from:p,to:h,text:l?l[d%l.length]:s,origin:r||(a?"paste":e.state.cutIncoming?"cut":"+input")};Ko(e.doc,v);kn(e,"inputRead",e,v)}t&&!a&&Ns(e,t);tr(e);e.curOp.updateInput=u;e.curOp.typing=true;e.state.pasteIncoming=e.state.cutIncoming=false}function Ms(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n){e.preventDefault();t.isReadOnly()||t.options.disableInput||_r(t,function(){return Ps(t,n,0,null,"paste")});return true}}function Ns(e,t){if(!e.options.electricChars||!e.options.smartIndent)return;var n=e.doc.sel;for(var i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)continue;var o=e.getModeAt(r.head);var a=false;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){a=Os(e,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(ce(e.doc,r.head.line).text.slice(0,r.head.ch))&&(a=Os(e,r.head.line,"smart"));a&&kn(e,"electricInput",e,r.head.line)}}function Rs(e){var t=[],n=[];for(var i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line;var o={anchor:me(r,0),head:me(r+1,0)};n.push(o);t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Fs(e,t){e.setAttribute("autocorrect","off");e.setAttribute("autocapitalize","off");e.setAttribute("spellcheck",!!t)}function $s(){var e=D("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var t=D("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");l?e.style.width="1000px":e.setAttribute("wrap","off");v&&(e.style.border="1px solid black");Fs(e);return t}var js=function(e){var t=e.optionHandlers;var n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus();this.display.input.focus()},setOption:function(e,n){var i=this.options,r=i[e];if(i[e]==n&&"mode"!=e)return;i[e]=n;t.hasOwnProperty(e)&&Ir(this,t[e])(this,n,r);bt(this,"optionChange",this,e)},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Ha(e))},removeKeyMap:function(e){var t=this.state.keyMaps;for(var n=0;n<t.length;++n)if(t[n]==e||t[n].name==e){t.splice(n,1);return true}},addOverlay:Er(function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");Q(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority});this.state.modeGen++;Ar(this)}),removeOverlay:Er(function(e){var t=this;var n=this.state.overlays;for(var i=0;i<n.length;++i){var r=n[i].modeSpec;if(r==e||"string"==typeof e&&r.name==e){n.splice(i,1);t.state.modeGen++;Ar(t);return}}}),indentLine:Er(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract");ve(this.doc,e)&&Os(this,e,t,n)}),indentSelection:Er(function(e){var t=this;var n=this.doc.sel.ranges,i=-1;for(var r=0;r<n.length;r++){var o=n[r];if(o.empty()){if(o.head.line>i){Os(t,o.head.line,e,true);i=o.head.line;r==t.doc.sel.primIndex&&tr(t)}}else{var a=o.from(),s=o.to();var l=Math.max(i,a.line);i=Math.min(t.lastLine(),s.line-(s.ch?0:1))+1;for(var c=l;c<i;++c)Os(t,c,e);var u=t.doc.sel.ranges;0==a.ch&&n.length==u.length&&u[r].from().ch>0&&Po(t.doc,r,new to(a,u[r].to()),B)}}}),getTokenAt:function(e,t){return sn(this,e,t)},getLineTokens:function(e,t){return sn(this,me(e),t,true)},getTokenTypeAt:function(e){e=Ce(this.doc,e);var t=en(this,ce(this.doc,e.line));var n=0,i=(t.length-1)/2,r=e.ch;var o;if(0==r)o=t[2];else for(;;){var a=n+i>>1;if((a?t[2*a-1]:0)>=r)i=a;else{if(!(t[2*a+1]<r)){o=t[2*a+2];break}n=a+1}}var s=o?o.indexOf("overlay "):-1;return s<0?o:0==s?null:o.slice(0,s-1)},getModeAt:function(t){var n=this.doc.mode;if(!n.innerMode)return n;return e.innerMode(n,this.getTokenAt(t).state).mode},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=this;var r=[];if(!n.hasOwnProperty(t))return r;var o=n[t],a=this.getModeAt(e);if("string"==typeof a[t])o[a[t]]&&r.push(o[a[t]]);else if(a[t])for(var s=0;s<a[t].length;s++){var l=o[a[t][s]];l&&r.push(l)}else a.helperType&&o[a.helperType]?r.push(o[a.helperType]):o[a.name]&&r.push(o[a.name]);for(var c=0;c<o._global.length;c++){var u=o._global[c];u.pred(a,i)&&-1==j(r,u.val)&&r.push(u.val)}return r},getStateAfter:function(e,t){var n=this.doc;e=qe(n,null==e?n.first+n.size-1:e);return tn(this,e+1,t).state},cursorCoords:function(e,t){var n,i=this.doc.sel.primary();n=null==e?i.head:"object"==typeof e?Ce(this.doc,e):e?i.from():i.to();return xi(this,n,t||"page")},charCoords:function(e,t){return yi(this,Ce(this.doc,e),t||"page")},coordsChar:function(e,t){e=bi(this,e,t||"page");return qi(this,e.left,e.top)},lineAtHeight:function(e,t){e=bi(this,{top:e,left:0},t||"page").top;return he(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var i=false,r;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;if(e<this.doc.first)e=this.doc.first;else if(e>o){e=o;i=true}r=ce(this.doc,e)}else r=e;return mi(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-nt(r):0)},defaultTextHeight:function(){return Di(this.display)},defaultCharWidth:function(){return Ai(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var o=this.display;e=xi(this,Ce(this.doc,e));var a=e.bottom,s=e.left;t.style.position="absolute";t.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(t);o.sizer.appendChild(t);if("over"==i)a=e.top;else if("above"==i||"near"==i){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(a=e.bottom);s+t.offsetWidth>c&&(s=c-t.offsetWidth)}t.style.top=a+"px";t.style.left=t.style.right="";if("right"==r){s=o.sizer.clientWidth-t.offsetWidth;t.style.right="0px"}else{"left"==r?s=0:"middle"==r&&(s=(o.sizer.clientWidth-t.offsetWidth)/2);t.style.left=s+"px"}n&&Ji(this,{left:s,top:a,right:s+t.offsetWidth,bottom:a+t.offsetHeight})},triggerOnKeyDown:Er(es),triggerOnKeyPress:Er(is),triggerOnKeyUp:ns,triggerOnMouseDown:Er(cs),execCommand:function(e){if(Ba.hasOwnProperty(e))return Ba[e].call(null,this)},triggerElectric:Er(function(e){Ns(this,e)}),findPosH:function(e,t,n,i){var r=this;var o=1;if(t<0){o=-1;t=-t}var a=Ce(this.doc,e);for(var s=0;s<t;++s){a=Hs(r.doc,a,o,n,i);if(a.hitSide)break}return a},moveH:Er(function(e,t){var n=this;this.extendSelectionsBy(function(i){return n.display.shift||n.doc.extend||i.empty()?Hs(n.doc,i.head,e,t,n.options.rtlMoveVisually):e<0?i.from():i.to()},U)}),deleteH:Er(function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Va(this,function(n){var r=Hs(i,n.head,e,t,false);return e<0?{from:r,to:n.head}:{from:n.head,to:r}})}),findPosV:function(e,t,n,i){var r=this;var o=1,a=i;if(t<0){o=-1;t=-t}var s=Ce(this.doc,e);for(var l=0;l<t;++l){var c=xi(r,s,"div");null==a?a=c.left:c.left=a;s=Vs(r,c,o,n);if(s.hitSide)break}return s},moveV:Er(function(e,t){var n=this;var i=this.doc,r=[];var o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();i.extendSelectionsBy(function(a){if(o)return e<0?a.from():a.to();var s=xi(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn);r.push(s.left);var l=Vs(n,s,e,t);"page"==t&&a==i.sel.primary()&&er(n,yi(n,l,"div").top-s.top);return l},U);if(r.length)for(var a=0;a<i.sel.ranges.length;a++)i.sel.ranges[a].goalColumn=r[a]}),findWordAt:function(e){var t=this.doc,n=ce(t,e.line).text;var i=e.ch,r=e.ch;if(n){var o=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=n.length||!i?++r:--i;var a=n.charAt(i);var s=ne(a,o)?function(e){return ne(e,o)}:/\s/.test(a)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ne(e)};while(i>0&&s(n.charAt(i-1)))--i;while(r<n.length&&s(n.charAt(r)))++r}return new to(me(e.line,i),me(e.line,r))},toggleOverwrite:function(e){if(null!=e&&e==this.state.overwrite)return;(this.state.overwrite=!this.state.overwrite)?L(this.display.cursorDiv,"CodeMirror-overwrite"):_(this.display.cursorDiv,"CodeMirror-overwrite");bt(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==k()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Er(function(e,t){nr(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Qn(this)-this.display.barHeight,width:e.scrollWidth-Qn(this)-this.display.barWidth,clientHeight:Zn(this),clientWidth:Jn(this)}},scrollIntoView:Er(function(e,t){if(null==e){e={from:this.doc.sel.primary().head,to:null};null==t&&(t=this.options.cursorScrollMargin)}else"number"==typeof e?e={from:me(e,0),to:null}:null==e.from&&(e={from:e,to:null});e.to||(e.to=e.from);e.margin=t||0;null!=e.from.line?ir(this,e):or(this,e.from,e.to,e.margin)}),setSize:Er(function(e,t){var n=this;var i=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=i(e));null!=t&&(this.display.wrapper.style.height=i(t));this.options.lineWrapping&&pi(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Tr(n,r,"widget");break}++r});this.curOp.forceUpdate=true;bt(this,"refresh",this)}),operation:function(e){return _r(this,e)},startOperation:function(){return mr(this)},endOperation:function(){return br(this)},refresh:Er(function(){var e=this.display.cachedTextHeight;Ar(this);this.curOp.forceUpdate=true;hi(this);nr(this,this.doc.scrollLeft,this.doc.scrollTop);Ur(this);(null==e||Math.abs(e-Di(this.display))>.5)&&Li(this);bt(this,"refresh",this)}),swapDoc:Er(function(e){var t=this.doc;t.cm=null;vo(this,e);hi(this);this.display.input.reset();nr(this,e.scrollLeft,e.scrollTop);this.curOp.forceScroll=true;kn(this,"swapDoc",this,t);return t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};wt(e);e.registerHelper=function(t,i,r){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]});n[t][i]=r};e.registerGlobalHelper=function(t,i,r,o){e.registerHelper(t,i,o);n[t]._global.push({pred:r,val:o})}};function Hs(e,t,n,i,r){var o=t;var a=n;var s=ce(e,t.line);function l(){var i=t.line+n;if(i<e.first||i>=e.first+e.size)return false;t=new me(i,t.ch,t.sticky);return s=ce(e,i)}function c(i){var o;o=r?pt(e.cm,s,t,n):dt(s,t,n);if(null==o){if(i||!l())return false;t=ft(r,e.cm,s,t.line,n)}else t=o;return true}if("char"==i)c();else if("column"==i)c(true);else if("word"==i||"group"==i){var u=null,d="group"==i;var f=e.cm&&e.cm.getHelper(t,"wordChars");for(var p=true;;p=false){if(n<0&&!c(!p))break;var h=s.text.charAt(t.ch)||"\n";var v=ne(h,f)?"w":d&&"\n"==h?"n":!d||/\s/.test(h)?null:"p";!d||p||v||(v="s");if(u&&u!=v){if(n<0){n=1;c();t.sticky="after"}break}v&&(u=v);if(n>0&&!c(!p))break}}var g=zo(e,t,o,a,true);ye(o,g)&&(g.hitSide=true);return g}function Vs(e,t,n,i){var r=e.doc,o=t.left,a;if("page"==i){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var l=Math.max(s-.5*Di(e.display),3);a=(n>0?t.bottom:t.top)+n*l}else"line"==i&&(a=n>0?t.bottom+3:t.top-3);var c;for(;;){c=qi(e,o,a);if(!c.outside)break;if(n<0?a<=0:a>=r.height){c.hitSide=true;break}a+=5*n}return c}var Bs=function(e){this.cm=e;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new $;this.composing=null;this.gracePeriod=false;this.readDOMTimeout=null};Bs.prototype.init=function(e){var t=this;var n=this,i=n.cm;var r=n.div=e.lineDiv;Fs(r,i.options.spellcheck);vt(r,"paste",function(e){if(yt(i,e)||Ms(e,i))return;s<=11&&setTimeout(Ir(i,function(){return t.updateFromDOM()}),20)});vt(r,"compositionstart",function(e){t.composing={data:e.data,done:false}});vt(r,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:false})});vt(r,"compositionend",function(e){if(t.composing){e.data!=t.composing.data&&t.readFromDOMSoon();t.composing.done=true}});vt(r,"touchstart",function(){return n.forceCompositionEnd()});vt(r,"input",function(){t.composing||t.readFromDOMSoon()});function o(e){if(yt(i,e))return;if(i.somethingSelected()){Ls({lineWise:false,text:i.getSelections()});"cut"==e.type&&i.replaceSelection("",null,"cut")}else{if(!i.options.lineWiseCopyCut)return;var t=Rs(i);Ls({lineWise:true,text:t.text});"cut"==e.type&&i.operation(function(){i.setSelections(t.ranges,0,B);i.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var o=ks.text.join("\n");e.clipboardData.setData("Text",o);if(e.clipboardData.getData("Text")==o){e.preventDefault();return}}var a=$s(),s=a.firstChild;i.display.lineSpace.insertBefore(a,i.display.lineSpace.firstChild);s.value=ks.text.join("\n");var l=document.activeElement;M(s);setTimeout(function(){i.display.lineSpace.removeChild(a);l.focus();l==r&&n.showPrimarySelection()},50)}vt(r,"copy",o);vt(r,"cut",o)};Bs.prototype.prepareSelection=function(){var e=Ri(this.cm,false);e.focus=this.cm.state.focused;return e};Bs.prototype.showSelection=function(e,t){if(!e||!this.cm.display.view.length)return;(e.focus||t)&&this.showPrimarySelection();this.showMultipleSelections(e)};Bs.prototype.showPrimarySelection=function(){var e=window.getSelection(),t=this.cm,i=t.doc.sel.primary();var r=i.from(),o=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||o.line<t.display.viewFrom){e.removeAllRanges();return}var a=Ks(t,e.anchorNode,e.anchorOffset);var s=Ks(t,e.focusNode,e.focusOffset);if(a&&!a.bad&&s&&!s.bad&&0==be(we(a,s),r)&&0==be(Se(a,s),o))return;var l=t.display.view;var c=r.line>=t.display.viewFrom&&zs(t,r)||{node:l[0].measure.map[2],offset:0};var u=o.line<t.display.viewTo&&zs(t,o);if(!u){var d=l[l.length-1].measure;var f=d.maps?d.maps[d.maps.length-1]:d.map;u={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(!c||!u){e.removeAllRanges();return}var p=e.rangeCount&&e.getRangeAt(0),h;try{h=T(c.node,c.offset,u.offset,u.node)}catch(e){}if(h){if(!n&&t.state.focused){e.collapse(c.node,c.offset);if(!h.collapsed){e.removeAllRanges();e.addRange(h)}}else{e.removeAllRanges();e.addRange(h)}p&&null==e.anchorNode?e.addRange(p):n&&this.startGracePeriod()}this.rememberSelection()};Bs.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){e.gracePeriod=false;e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=true})},20)};Bs.prototype.showMultipleSelections=function(e){E(this.cm.display.cursorDiv,e.cursors);E(this.cm.display.selectionDiv,e.selection)};Bs.prototype.rememberSelection=function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode;this.lastAnchorOffset=e.anchorOffset;this.lastFocusNode=e.focusNode;this.lastFocusOffset=e.focusOffset};Bs.prototype.selectionInEditor=function(){var e=window.getSelection();if(!e.rangeCount)return false;var t=e.getRangeAt(0).commonAncestorContainer;return O(this.div,t)};Bs.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly){this.selectionInEditor()||this.showSelection(this.prepareSelection(),true);this.div.focus()}};Bs.prototype.blur=function(){this.div.blur()};Bs.prototype.getField=function(){return this.div};Bs.prototype.supportsTouch=function(){return true};Bs.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():_r(this.cm,function(){return e.cm.curOp.selectionChanged=true});function t(){if(e.cm.state.focused){e.pollSelection();e.polling.set(e.cm.options.pollInterval,t)}}this.polling.set(this.cm.options.pollInterval,t)};Bs.prototype.selectionChanged=function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset};Bs.prototype.pollSelection=function(){if(null!=this.readDOMTimeout||this.gracePeriod||!this.selectionChanged())return;var e=window.getSelection(),t=this.cm;if(g&&u&&this.cm.options.gutters.length&&Us(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs});this.blur();this.focus();return}if(this.composing)return;this.rememberSelection();var n=Ks(t,e.anchorNode,e.anchorOffset);var i=Ks(t,e.focusNode,e.focusOffset);n&&i&&_r(t,function(){Fo(t.doc,io(n,i),B);(n.bad||i.bad)&&(t.curOp.selectionChanged=true)})};Bs.prototype.pollContent=function(){if(null!=this.readDOMTimeout){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null}var e=this.cm,t=e.display,n=e.doc.sel.primary();var i=n.from(),r=n.to();0==i.ch&&i.line>e.firstLine()&&(i=me(i.line-1,ce(e.doc,i.line-1).length));r.ch==ce(e.doc,r.line).text.length&&r.line<e.lastLine()&&(r=me(r.line+1,0));if(i.line<t.viewFrom||r.line>t.viewTo-1)return false;var o,a,s;if(i.line==t.viewFrom||0==(o=Mi(e,i.line))){a=pe(t.view[0].line);s=t.view[0].node}else{a=pe(t.view[o].line);s=t.view[o-1].node.nextSibling}var l=Mi(e,r.line);var c,u;if(l==t.view.length-1){c=t.viewTo-1;u=t.lineDiv.lastChild}else{c=pe(t.view[l+1].line)-1;u=t.view[l+1].node.previousSibling}if(!s)return false;var d=e.doc.splitLines(Ws(e,s,u,a,c));var f=ue(e.doc,me(a,0),me(c,ce(e.doc,c).text.length));while(d.length>1&&f.length>1)if(Y(d)==Y(f)){d.pop();f.pop();c--}else{if(d[0]!=f[0])break;d.shift();f.shift();a++}var p=0,h=0;var v=d[0],g=f[0],m=Math.min(v.length,g.length);while(p<m&&v.charCodeAt(p)==g.charCodeAt(p))++p;var b=Y(d),y=Y(f);var x=Math.min(b.length-(1==d.length?p:0),y.length-(1==f.length?p:0));while(h<x&&b.charCodeAt(b.length-h-1)==y.charCodeAt(y.length-h-1))++h;if(1==d.length&&1==f.length&&a==i.line)while(p&&p>i.ch&&b.charCodeAt(b.length-h-1)==y.charCodeAt(y.length-h-1)){p--;h++}d[d.length-1]=b.slice(0,b.length-h).replace(/^\u200b+/,"");d[0]=d[0].slice(p).replace(/\u200b+$/,"");var S=me(a,p);var w=me(c,f.length?Y(f).length-h:0);if(d.length>1||d[0]||be(S,w)){ea(e.doc,d,S,w,"+input");return true}};Bs.prototype.ensurePolled=function(){this.forceCompositionEnd()};Bs.prototype.reset=function(){this.forceCompositionEnd()};Bs.prototype.forceCompositionEnd=function(){if(!this.composing)return;clearTimeout(this.readDOMTimeout);this.composing=null;this.updateFromDOM();this.div.blur();this.div.focus()};Bs.prototype.readFromDOMSoon=function(){var e=this;if(null!=this.readDOMTimeout)return;this.readDOMTimeout=setTimeout(function(){e.readDOMTimeout=null;if(e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80)};Bs.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||_r(this.cm,function(){return Ar(e.cm)})};Bs.prototype.setUneditable=function(e){e.contentEditable="false"};Bs.prototype.onKeyPress=function(e){if(0==e.charCode)return;e.preventDefault();this.cm.isReadOnly()||Ir(this.cm,Ps)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)};Bs.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)};Bs.prototype.onContextMenu=function(){};Bs.prototype.resetPosition=function(){};Bs.prototype.needsContentAttribute=true;function zs(e,t){var n=ri(e,t.line);if(!n||n.hidden)return null;var i=ce(e.doc,t.line);var r=ti(n,i,t.line);var o=ct(i,e.doc.direction),a="left";if(o){var s=st(o,t.ch);a=s%2?"right":"left"}var l=li(r.map,t.ch,a);l.offset="right"==l.collapse?l.end:l.start;return l}function Us(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return true;return false}function Gs(e,t){t&&(e.bad=true);return e}function Ws(e,t,n,i,r){var o="",a=false,s=e.doc.lineSeparator();function l(e){return function(t){return t.id==e}}function c(){if(a){o+=s;a=false}}function u(e){if(e){c();o+=e}}function d(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(null!=n){u(n||t.textContent.replace(/\u200b/g,""));return}var o=t.getAttribute("cm-marker"),f;if(o){var p=e.findMarks(me(i,0),me(r+1,0),l(+o));p.length&&(f=p[0].find())&&u(ue(e.doc,f.from,f.to).join(s));return}if("false"==t.getAttribute("contenteditable"))return;var h=/^(pre|div|p)$/i.test(t.nodeName);h&&c();for(var v=0;v<t.childNodes.length;v++)d(t.childNodes[v]);h&&(a=true)}else 3==t.nodeType&&u(t.nodeValue)}for(;;){d(t);if(t==n)break;t=t.nextSibling}return o}function Ks(e,t,n){var i;if(t==e.display.lineDiv){i=e.display.lineDiv.childNodes[n];if(!i)return Gs(e.clipPos(me(e.display.viewTo-1)),true);t=null;n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var o=e.display.view[r];if(o.node==i)return Ys(o,t,n)}}function Ys(e,t,n){var i=e.text.firstChild,r=false;if(!t||!O(i,t))return Gs(me(pe(e.line),0),true);if(t==i){r=true;t=i.childNodes[n];n=0;if(!t){var o=e.rest?Y(e.rest):e.line;return Gs(me(pe(o),o.text.length),r)}}var a=3==t.nodeType?t:null,s=t;if(!a&&1==t.childNodes.length&&3==t.firstChild.nodeType){a=t.firstChild;n&&(n=a.nodeValue.length)}while(s.parentNode!=i)s=s.parentNode;var l=e.measure,c=l.maps;function u(t,n,i){for(var r=-1;r<(c?c.length:0);r++){var o=r<0?l.map:c[r];for(var a=0;a<o.length;a+=3){var s=o[a+2];if(s==t||s==n){var u=pe(r<0?e.line:e.rest[r]);var d=o[a]+i;(i<0||s!=t)&&(d=o[a+(i?1:0)]);return me(u,d)}}}}var d=u(a,s,n);if(d)return Gs(d,r);for(var f=s.nextSibling,p=a?a.nodeValue.length-n:0;f;f=f.nextSibling){d=u(f,f.firstChild,0);if(d)return Gs(me(d.line,d.ch-p),r);p+=f.textContent.length}for(var h=s.previousSibling,v=n;h;h=h.previousSibling){d=u(h,h.firstChild,-1);if(d)return Gs(me(d.line,d.ch+v),r);v+=h.textContent.length}}var Xs=function(e){this.cm=e;this.prevInput="";this.pollingFast=false;this.polling=new $;this.hasSelection=false;this.composing=null};Xs.prototype.init=function(e){var t=this;var n=this,i=this.cm;var r=this.wrapper=$s();var o=this.textarea=r.firstChild;e.wrapper.insertBefore(r,e.wrapper.firstChild);v&&(o.style.width="0px");vt(o,"input",function(){a&&s>=9&&t.hasSelection&&(t.hasSelection=null);n.poll()});vt(o,"paste",function(e){if(yt(i,e)||Ms(e,i))return;i.state.pasteIncoming=true;n.fastPoll()});function l(e){if(yt(i,e))return;if(i.somethingSelected())Ls({lineWise:false,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var t=Rs(i);Ls({lineWise:true,text:t.text});if("cut"==e.type)i.setSelections(t.ranges,null,B);else{n.prevInput="";o.value=t.text.join("\n");M(o)}}"cut"==e.type&&(i.state.cutIncoming=true)}vt(o,"cut",l);vt(o,"copy",l);vt(e.scroller,"paste",function(t){if(Wn(e,t)||yt(i,t))return;i.state.pasteIncoming=true;n.focus()});vt(e.lineSpace,"selectstart",function(t){Wn(e,t)||qt(t)});vt(o,"compositionstart",function(){var e=i.getCursor("from");n.composing&&n.composing.range.clear();n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}});vt(o,"compositionend",function(){if(n.composing){n.poll();n.composing.range.clear();n.composing=null}})};Xs.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc;var i=Ri(e);if(e.options.moveInputWithCursor){var r=xi(e,n.sel.primary().head,"div");var o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+a.top-o.top));i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+a.left-o.left))}return i};Xs.prototype.showSelection=function(e){var t=this.cm,n=t.display;E(n.cursorDiv,e.cursors);E(n.selectionDiv,e.selection);if(null!=e.teTop){this.wrapper.style.top=e.teTop+"px";this.wrapper.style.left=e.teLeft+"px"}};Xs.prototype.reset=function(e){if(this.contextMenuPending||this.composing)return;var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n;t.state.focused&&M(this.textarea);a&&s>=9&&(this.hasSelection=n)}else if(!e){this.prevInput=this.textarea.value="";a&&s>=9&&(this.hasSelection=null)}};Xs.prototype.getField=function(){return this.textarea};Xs.prototype.supportsTouch=function(){return false};Xs.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!m||k()!=this.textarea))try{this.textarea.focus()}catch(e){}};Xs.prototype.blur=function(){this.textarea.blur()};Xs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};Xs.prototype.receivedFocus=function(){this.slowPoll()};Xs.prototype.slowPoll=function(){var e=this;if(this.pollingFast)return;this.polling.set(this.cm.options.pollInterval,function(){e.poll();e.cm.state.focused&&e.slowPoll()})};Xs.prototype.fastPoll=function(){var e=false,t=this;t.pollingFast=true;function n(){var i=t.poll();if(i||e){t.pollingFast=false;t.slowPoll()}else{e=true;t.polling.set(60,n)}}t.polling.set(20,n)};Xs.prototype.poll=function(){var e=this;var t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||Mt(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return false;var r=n.value;if(r==i&&!t.somethingSelected())return false;if(a&&s>=9&&this.hasSelection===r||b&&/[\uf700-\uf7ff]/.test(r)){t.display.input.reset();return false}if(t.doc.sel==t.display.selForContextMenu){var o=r.charCodeAt(0);8203!=o||i||(i="");if(8666==o){this.reset();return this.cm.execCommand("undo")}}var l=0,c=Math.min(i.length,r.length);while(l<c&&i.charCodeAt(l)==r.charCodeAt(l))++l;_r(t,function(){Ps(t,r.slice(l),i.length-l,null,e.composing?"*compose":null);r.length>1e3||r.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=r;if(e.composing){e.composing.range.clear();e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"})}});return true};Xs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=false)};Xs.prototype.onKeyPress=function(){a&&s>=9&&(this.hasSelection=null);this.fastPoll()};Xs.prototype.onContextMenu=function(e){var t=this,n=t.cm,i=n.display,r=t.textarea;var o=Pi(n,e),c=i.scroller.scrollTop;if(!o||d)return;var u=n.options.resetSelectionOnContextMenu;u&&-1==n.doc.sel.contains(o)&&Ir(n,Fo)(n.doc,io(o),B);var f=r.style.cssText,p=t.wrapper.style.cssText;t.wrapper.style.cssText="position: absolute";var h=t.wrapper.getBoundingClientRect();r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-h.top-5)+"px; left: "+(e.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var v;l&&(v=window.scrollY);i.input.focus();l&&window.scrollTo(null,v);i.input.reset();n.somethingSelected()||(r.value=t.prevInput=" ");t.contextMenuPending=true;i.selForContextMenu=n.doc.sel;clearTimeout(i.detectingSelectAll);function g(){if(null!=r.selectionStart){var e=n.somethingSelected();var o=""+(e?r.value:"");r.value="";r.value=o;t.prevInput=e?"":"";r.selectionStart=1;r.selectionEnd=o.length;i.selForContextMenu=n.doc.sel}}function m(){t.contextMenuPending=false;t.wrapper.style.cssText=p;r.style.cssText=f;a&&s<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=c);if(null!=r.selectionStart){(!a||a&&s<9)&&g();var e=0,o=function(){if(i.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&""==t.prevInput)Ir(n,Go)(n);else if(e++<10)i.detectingSelectAll=setTimeout(o,500);else{i.selForContextMenu=null;i.input.reset()}};i.detectingSelectAll=setTimeout(o,200)}}a&&s>=9&&g();if(q){It(e);var b=function(){mt(window,"mouseup",b);setTimeout(m,20)};vt(window,"mouseup",b)}else setTimeout(m,50)};Xs.prototype.readOnlyChanged=function(e){e||this.reset();this.textarea.disabled="nocursor"==e};Xs.prototype.setUneditable=function(){};Xs.prototype.needsContentAttribute=false;function Qs(e,t){t=t?R(t):{};t.value=e.value;!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex);!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder);if(null==t.autofocus){var n=k();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function i(){e.value=s.getValue()}var r;if(e.form){vt(e.form,"submit",i);if(!t.leaveSubmitMethodAlone){var o=e.form;r=o.submit;try{var a=o.submit=function(){i();o.submit=r;o.submit();o.submit=a}}catch(e){}}}t.finishInit=function(t){t.save=i;t.getTextArea=function(){return e};t.toTextArea=function(){t.toTextArea=isNaN;i();e.parentNode.removeChild(t.getWrapperElement());e.style.display="";if(e.form){mt(e.form,"submit",i);"function"==typeof e.form.submit&&(e.form.submit=r)}}};e.style.display="none";var s=Ds(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return s}function Js(e){e.off=mt;e.on=vt;e.wheelEventPixels=Jr;e.Doc=ya;e.splitLines=Pt;e.countColumn=F;e.findColumn=G;e.isWordChar=te;e.Pass=V;e.signal=bt;e.Line=fn;e.changeEnd=ro;e.scrollbarModel=hr;e.Pos=me;e.cmpPos=be;e.modes=$t;e.mimeModes=jt;e.resolveMode=Bt;e.getMode=zt;e.modeExtensions=Ut;e.extendMode=Gt;e.copyState=Wt;e.startState=Yt;e.innerMode=Kt;e.commands=Ba;e.keyMap=Pa;e.keyName=ja;e.isModifierKey=Fa;e.lookupKey=Ra;e.normalizeKeyMap=Na;e.StringStream=Xt;e.SharedTextMarker=pa;e.TextMarker=da;e.LineWidget=sa;e.e_preventDefault=qt;e.e_stopPropagation=Ct;e.e_stop=It;e.addClass=L;e.contains=O;e.rmClass=_;e.keyNames=Ta}Cs(Ds);js(Ds);var Zs="iter insert remove copy getEditor constructor".split(" ");for(var el in ya.prototype)ya.prototype.hasOwnProperty(el)&&j(Zs,el)<0&&(Ds.prototype[el]=function(e){return function(){return e.apply(this.doc,arguments)}}(ya.prototype[el]));wt(ya);Ds.inputStyles={textarea:Xs,contenteditable:Bs};Ds.defineMode=function(e){Ds.defaults.mode||"null"==e||(Ds.defaults.mode=e);Ht.apply(this,arguments)};Ds.defineMIME=Vt;Ds.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}});Ds.defineMIME("text/plain","null");Ds.defineExtension=function(e,t){Ds.prototype[e]=t};Ds.defineDocExtension=function(e,t){ya.prototype[e]=t};Ds.fromTextArea=Qs;Js(Ds);Ds.version="5.28.0-qlik.1";return Ds})},function(e,t,n){"use strict";var i,r;!(i=[n(102),n(92)],r=function(e,t){var n={Expression:0,NumberOrExpression:1};var i=t.extend("ExpressionValidator",{init:function t(i,r){this.currentExpr=null;this.nextExpr=null;this.hasOutstandingCall=false;this.app=i;this.mode=r||n.Expression;e.create(this,"Update")},onResponse:function e(t){var n,i,r,o,a;this.hasOutstandingCall=false;if(this.nextExpr){n=this.nextExpr;i=this.nextLabels;this.nextExpr=null;this.nextLabels=null;this.callEngine(n,i)}else{n=this.currentExpr;r=!t.qErrorMsg&&0===t.qBadFieldNames.length;for(o=0;o<t.qBadFieldNames.length;o++){a=t.qBadFieldNames[o];a.name=n.substr(a.qFrom||0,a.qCount)}this.Update.emit({valid:r,data:{error:t.qErrorMsg,bad:t.qBadFieldNames}})}},callEngine:function e(t,i){var r=this;if(this.hasOutstandingCall)throw new Error("Invalid state");this.currentExpr=t;this.hasOutstandingCall=true;var o;o=this.mode===n.NumberOrExpression?this.app.checkNumberOrExpression(t):this.app.checkExpression(t,i||[]);o.then(function(e){r.onResponse(e)},function(){r.onResponse({qErrorMsg:"Error",qBadFieldNames:[]})})},validate:function e(t,n){if(this.hasOutstandingCall){this.nextExpr=t;this.nextLabels=n}else this.callEngine(t,n)}});return{ExpressionValidator:i,Modes:n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(93),n(89),n(90)],r=function(e,t,n){function i(n){return n?t.resolve(n.enigmaModel):e.getApp()}var r={};r.create=function(e,t){return i(e).then(function(e){var i={qInfo:{qId:n.generateId(),qType:"odagapplink"},qMetaDef:{odagLinkRef:"",timestamp:Date.now()}};return e.createObject(n.extend(true,i,t))})};r.remove=function(e,t){return i(e).then(function(e){return e.destroyObject(t)})};r.get=function(e,t){return i(e).then(function(e){return e.getObject(t)})};r.getList=function(e){return i(e).then(function(e){return e.getODAGAppLinkObject()})};return r}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(91),n(90),n(13),n(89),n(108)],r=function(e,t,n,i,r,o){e.service("$contentApi",["$http",function(e){function a(e){e.headers||(e.headers={})}function s(e){e.params||(e.params={})}function l(e){var t=n.getRandomString(16);e.headers["X-Qlik-XrfKey"]=t;e.params.xrfkey=t;return e}function c(e){"/"===e.url[0]&&(e.url=e.url.substr(1));e.url=i.rootPath+e.url;return e}function u(e){var n=t.language;n&&(e.headers["Accept-Language"]="pseudo"!==n?n:"qps-ploc");return e}function d(t){var n;var i;var d;var f=new r;var p=f.promise;a(t);s(t);o.isPersonalModeSync()||l(t);c(t);u(t);d=e(t);d.then(function(e){f.resolve(e);n&&n(e.data,e.status,e.headers,e.config)},function(e){if(i){f.resolve(e);i(e.data,e.status,e.headers,e.config)}else f.reject(e)});p.success=function(e){n=e;return p};p.error=function(e){i=e;return p};return p}function f(){var e={method:"GET",url:"/qrs/extension/schema"};return d(e).then(function(e){return e.data}).catch(function(e){throw e.data})}return{getExtensions:f,request:d}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){var t={};t.nextIndex=function(t,n){var i=1;var r;r=""===n?new RegExp("^\\((\\d+)\\)$"):new RegExp("^"+e.escapeRegExp(n)+" \\((\\d+)\\)$");t.forEach(function(e){var t=r.exec(e);if(t&&2===t.length){var n=parseInt(t[1],10);i=Math.max(n+1,i)}});return i};t.generateUniqueName=function(e,n){var i=t.nextIndex(e,n);return""===n?"("+i+")":n+" ("+i+")"};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(160),n(101),n(385)],r=function(e,t,n){var i=["scatterplot","map"];var r=["scatterplot","map","barchart","linechart","combochart","piechart","treemap","distributionplot"];return{baseColor:{isSupported:function e(t){return t&&t.length&&-1===i.indexOf(t)}},colorBy:{isSupported:function e(t){return r.contains(t)}},colorByUpdater:function i(r,a){var s=t.getValue(r,"color.mode");var d=t.getValue(r,"color.auto");var f=t.getValue(r,a+"qDimensions",[]);var p=t.getValue(r,a+"qMeasures",[]);var h=t.getValue(r,a+"qLayoutExclude.qHyperCubeDef.qDimensions",[]);var v,g,m,b;var y=t.getValue(r,"visualization");if(d)o(f,h);else if(!d&&"byDimension"===s&&f.length){v=t.getValue(r,"color.byDimDef");v&&u(r,v.label);if(v&&v.activeDimensionIndex>-1){v.activeDimensionIndex=Math.min(v.activeDimensionIndex,f.length-1);g=f[v.activeDimensionIndex];b=n.getColorByDefinition("dimension",false,g);b.activeDimensionIndex=v.activeDimensionIndex;l(r,b)}else if(!v||!v.key){g=f[f.length-1];var x=a.split(".");2===f.length&&"map"===y&&"point"===r.layers[Number(x[1])].type&&(g=f[0]);m=e.getById(g.qAttributeDimensions,e.IDMAP.COLOR_BY_ALTERNATIVE);l(r,n.getColorByDefinition("dimension",!!m,m||g));if(m)return}c(r,true,f,h,p,t.getValue(r,"color.byDimDef.label"))}else if(d||"byMeasure"!==s||!f.length||"map"!==y&&!p.length){"byMultiple"===s&&p.length<2&&t.setValue(r,"color.mode","primary");o(f,h)}else{v=t.getValue(r,"color.byMeasureDef");v&&u(r,v.label);if(v&&v.activeMeasureIndex>-1){v.activeMeasureIndex=Math.min(v.activeMeasureIndex,p.length-1);if(v.activeMeasureIndex>-1){var S=p[v.activeMeasureIndex];b=n.getColorByDefinition("measure",false,S);b.activeMeasureIndex=v.activeMeasureIndex;l(r,b)}}else if((!v||!v.key)&&p.length){var w=p[0];g=f[f.length-1];m=e.getById(g.qAttributeExpressions,e.IDMAP.COLOR_BY_ALTERNATIVE);l(r,n.getColorByDefinition("measure",!!m,m||w));if(m)return}c(r,false,f,h,p,t.getValue(r,"color.byMeasureDef.label"))}},setColorByPropertyDef:l,resolveColorByPropertyDef:c,clearColorByItem:o};function o(t,n){t.forEach(function(t){a(t,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeDimensions");a(t,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeExpressions")});n.forEach(function(t){a(t,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeDimensions");a(t,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeExpressions")})}function a(t,n,i){if(t[i]){var r=e.getIndexById(t[i],n);r>=0&&t[i].splice(r,1)}else t[i]=[]}function s(e){return e.split(" ").length>1&&"="!==e[0]&&"["!==e[0]?"["+e+"]":e}function l(e,t,n,i){var r=n?"expression":t.type,o=e.color.mode,a=t.label||t.name||"";u(e,a);switch(r){case"field":o="byDimension";e.color.byDimDef={label:t.label||s(t.name),key:s(t.name),type:"expression",activeDimensionIndex:t.activeDimensionIndex};break;case"expression":o="byMeasure";e.color.byMeasureDef={label:n||t.label||t.name,key:n||t.name,type:"expression",activeMeasureIndex:t.activeMeasureIndex};break;case"dimension":o="byDimension";e.color.byDimDef={label:t.name,key:t.id,type:"libraryItem",activeDimensionIndex:t.activeDimensionIndex};break;case"measure":o="byMeasure";e.color.byMeasureDef={label:t.name,key:t.id,type:"libraryItem",activeMeasureIndex:t.activeMeasureIndex};break}if(!i){e.color.auto=false;e.color.mode=o}}function c(n,i,r,a,s,l){o(r,a);var c=r[r.length-1];if(c){var u=i?t.getValue(n,"color.byDimDef"):t.getValue(n,"color.byMeasureDef");if(u){var d=e.create(e.IDMAP.COLOR_BY_ALTERNATIVE);switch(u.type){case"expression":d.label=l||u.label;i?d.qDef=u.key:d.qExpression=u.key;d.matchMeasure=u.activeMeasureIndex;d.label&&"="===d.label.charAt(0)&&(d.labelExpRef="color.altLabel");break;case"libraryItem":if(!i){var f=-1;s.forEach(function(e,t){u.key===e.qLibraryId&&(f=t)});d.matchMeasure=f}d.qLibraryId=u.key;d.colorMapRef=u.key;break}if(i){d.qSortBy={qSortByAscii:1};c.qAttributeDimensions.push(d)}else c.qAttributeExpressions.push(d)}}}function u(e,t){if(!t)return;var n="="===t.charAt(0);e.color.altLabel=n?{qStringExpression:{qExpr:t.substr(1)}}:t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){return{MEASURE:"measure",DIMENSION:"dimension",FIELD:"field",PUBSUB_TOPIC:"/cao/light-editing/swap"}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(54),n(118)],r=function(e,t){var n="localstorageservice";function i(t){if(!e.isString(t))throw new Error('The key "'+t+'" is not a String.');return n+"."+t}function r(t,n,r){var o=(new Date).getTime(),a,s;if(!e.isString(t))throw new Error('The key "'+t+'" is not a String.');if(!e.isObject(n))throw new Error('The value "'+n+'" for the key "'+t+'" is not valid object.');if(r){if(!e.isNumber(r))throw new Error('The time to live value "'+r+'" is not numeric.');r+=o}s={timeToLive:r,value:n};a=JSON.stringify(s);localStorage[i(t)]=a}function o(t){if(!e.isString(t))throw new Error('The key "'+t+'" is not a String.');var n=e.isEmpty(localStorage[i(t)]);return!n}function a(t,n){if(!e.isString(t))throw new Error('The key "'+t+'" is not a String.');if(!o(t)){if(void 0!==n)return n;throw new Error('There is no data set for the key "'+t+'". Please use contains() first to verify you should actually do a get().')}var i=s(t);return i.value}function s(e){var t=JSON.parse(localStorage[i(e)]);return t}function l(t){if(!e.isString(t))throw new Error('The key "'+t+'" is not a String.');if(!o(t))throw new Error('There is no data set for the key "'+t+'". Please use contains() first to verify you should actually do a get().');delete localStorage[i(t)]}function c(){var i,r,o;for(i in localStorage)if(t.startsWith(i,n)){i=i.substring(n.length+1);r=s(i);o=(new Date).getTime();e.isNumber(r.timeToLive&&o>r.timeToLive)&&l(i)}}return{set:r,get:a,contains:o,clean:c,remove:l}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(92),n(89),n(497),n(622)],r=function(e,t,n,i,r){var o;o=t.extend("BackendApi",{init:function e(t,n,o){this.model=t;this.localeInfo=t.app&&t.app.layout?t.app.layout.qLocaleInfo:{};this.path=n;n&&(this.dataPath=n.slice(1,-3));this.cacheCube=new i(t,"qDataPages",this.path,o);this.backendStackThrottle=new r(t,"qDataPages",this.path)},setPath:function e(t){this.path=t;t&&(this.dataPath=t.slice(1,-3));this.cacheCube.setPath(t);this.backendStackThrottle.setPath(t)},setCacheOptions:function e(t){this.cacheCube.setOptions(t)},updateCache:function e(){},applyPatches:function e(t,n){return this.model.applyPatches(t,n)},clearSoftProperties:function e(){var t=this;return this.model.getLayout().then(function(e){return e.qHasSoftPatches?t.model.clearSoftPatches():n.resolve()})},beginSelections:function e(){return this.model.app.switchModalSelection(this.model,this.path)},endSelections:function e(t){return this.model.app.switchModalSelection(null,null,t)},clearSelections:function e(t){t=t||0;return this.model.clearSelections(this.path,[t])},getDimensionInfos:function e(){if(!this.model.layout[this.dataPath].qDimensionInfo)return[];if(Array.isArray(this.model.layout[this.dataPath].qDimensionInfo))return this.model.layout[this.dataPath].qDimensionInfo;return[this.model.layout[this.dataPath].qDimensionInfo]},getMeasureInfos:function e(){return this.model.layout[this.dataPath].qMeasureInfo},getRowCount:function e(){return this.model.layout[this.dataPath].qSize.qcy},eachDataRow:function t(n){var i=this.model.layout[this.dataPath],r=true;i&&e.each(i.qDataPages,function(t,i){e.each(i.qMatrix,function(e,t){r=n(i.qArea.qTop+e,t);return r});return r})},drillUp:function e(t,n){return this.model.drillUp(this.path,t,n)},hasSelections:function e(){var t=this.getDimensionInfos();for(var n=0;n<t.length;++n)if(t[n].qStateCounts.qSelected>0)return true;return false},inSelections:function e(){return this.model.layout.qSelectionInfo&&this.model.layout.qSelectionInfo.qInSelections},destroy:function e(){this.cacheCube.destroy();this.backendStackThrottle.destroy()},getSize:function e(){return this.model.layout[this.dataPath].qSize}});return o}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){var t="undefined"!==typeof window&&"undefined"!==typeof document;var n=(t&&e.getParameterByName("debug")||"").split("+");var i={LANGUAGES:false,DEVELOPER:false,RELEASEMODELS:false,ASSOCIATE:false,BUBBLES:false,DLE_SAFE_MODE:false,DM_LINEAGE:false,DM_PERF:false,DM_STU:false,NOCONNECTOR:false};n.forEach(function(e){e&&(i[e.toUpperCase()]=true)});return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92)],r=function(e){var t;t=e.extend({init:function e(){this._elements=[[1,0,0],[0,1,0],[0,0,1]];this._stack=[]},clone:function e(){var n=new t;return n.multiply(this._elements)},set:function e(t){this._elements=t;return this},save:function e(){this._stack.push(this.elements);return this},restore:function e(){this._stack.length&&(this._elements=this._stack.pop());return this},add:function e(t){var n,i;for(n=0;n<this._elements.length;n++)for(i=0;i<this._elements[n].length;i++)this._elements[n][i]+=t;return this},translate:function e(t,n){this.multiply([[1,0,t],[0,1,n],[0,0,1]]);return this},rotate:function e(t){var n=Math.cos(-t),i=Math.sin(-t);this.multiply([[n,i,0],[-i,n,0],[0,0,1]]);return this},skew:function e(t,n){var i=Math.tan(t),r=Math.tan(n);this.multiply([[1,i,0],[r,1,0],[0,0,1]]);return this},multiply:function e(n){var i,r,o,a;n instanceof t&&(n=n._elements);if(Array.isArray(n)){o=[[0,0,0],[0,0,0],[0,0,0]];for(i=0;i<this._elements.length;i++)for(r=0;r<this._elements[i].length;r++)for(a=0;a<3;a++)o[i][r]+=this._elements[i][a]*n[a][r];this._elements=o}else for(i=0;i<this._elements.length;i++)for(r=0;r<this._elements[i].length;r++)this._elements[i][r]*=n;return this},scale:function e(t,n){(arguments.length<2||"undefined"===typeof n)&&(n=t);this.multiply([[t,0,0],[0,n,0],[0,0,1]]);return this},determinant:function e(){var t=this._elements[0][0],n=this._elements[0][1],i=this._elements[0][2],r=this._elements[1][0],o=this._elements[1][1],a=this._elements[1][2],s=this._elements[2][0],l=this._elements[2][1],c=this._elements[2][2],u=0;u=t*o*c+n*a*s+i*r*l-i*o*s-n*r*c-t*a*l;return u},invert:function e(){var t=this.determinant(),n=this._elements[0][0],i=this._elements[0][1],r=this._elements[0][2],o=this._elements[1][0],a=this._elements[1][1],s=this._elements[1][2],l=this._elements[2][0],c=this._elements[2][1],u=this._elements[2][2];this._elements=[[a*u-s*c,r*c-i*u,i*s-r*a],[s*l-o*u,n*u-r*l,r*o-n*s],[o*c-a*l,l*i-n*c,n*a-i*o]];this.multiply(1/t);return this},transpose:function e(){var t=Object.create(this._elements);this._elements=[[t[0][0],t[1][0],t[2][0]],[t[0][1],t[1][1],t[2][1]],[t[0][2],t[1][2],t[2][2]]];return this},identity:function e(){this._elements=[[1,0,0],[0,1,0],[0,0,1]];return this},transformPoint:function e(t){var n=[t.x,t.y,1],i,r,o=this._elements,a=[0,0,0];for(i=0;i<this._elements.length;i++)for(r=0;r<this._elements[i].length;r++)a[i]+=n[r]*o[i][r];return{x:a[0],y:a[1]}},transformPoints:function e(t){var n,i,r,o,a,s=this._elements,l=[];for(o=0;o<t.length;o++){n=[t[o].x,t[o].y,1];a=[0,0,0];for(i=0;i<this._elements.length;i++)for(r=0;r<this._elements[i].length;r++)a[i]+=n[r]*s[i][r];l.push({x:a[0],y:a[1]})}return l},toString:function e(){var t="";this._elements.forEach(function(e,n,i){t+=e.join("\t")+(n<i.length?"\n":"")});return t},isIdentity:function e(){var t=this._elements;return 1===t[0][0]&&0===t[0][1]&&0===t[0][2]&&0===t[1][0]&&1===t[1][1]&&0===t[1][2]&&0===t[2][0]&&0===t[2][1]&&1===t[2][2]},identityIfClose:function e(t){var n=this._elements;Math.abs(n[0][0]-1)<t&&Math.abs(n[0][1])<t&&Math.abs(n[0][2])<t&&Math.abs(n[1][0])<t&&Math.abs(n[1][1]-1)<t&&Math.abs(n[1][2])<t&&Math.abs(n[2][0])<t&&Math.abs(n[2][1])<t&&Math.abs(n[2][2]-1)<t&&this.identity()}});Object.defineProperties(t.prototype,{elements:{get:function e(){var t=this._elements;return[[t[0][0],t[0][1],t[0][2]],[t[1][0],t[1][1],t[1][2]],[t[2][0],t[2][1],t[2][2]]]}}});return t}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(90),n(89),n(122),n(177),n(94),n(93),n(49),n(108),n(50)],r=function(e,t,n,i,r,o,a,s,l){function c(){var t=e.getParameterByName("app");var n=e.getParameterByName("sheet");var r=i.analysis(t);var o=r&&r.sheetId?r.sheetId:n;return{appId:t,sheetId:o}}function u(e){if(!s.inClient()||!a.getFlag("SSA_IN_EDIT")||l.isSmallDevice||e)return t.resolve("analysis");return o.getApp().then(function(e){return e.getLayout().then(function(e){var t=e&&e.permissions&&e.permissions.update;var n=t?r.States.edit:r.States.analysis;return r.getAllStateKeys()[n]})}).catch(function(){return t.resolve("analysis")})}function d(n,r){var o=i.analysis(e.getParameterByName("app"));if(s.inClient()&&o&&o.state&&!r)return t.resolve(o.state);return u(n)}function f(e,t,r,o){i.setSheet(e,t,r,o);n.goToSheet(e,t,o)}function p(t){var n=e.getParameterByName("app");var o=i.analysis(n).overlay;return o===r.getAllStateKeys()[t]}function h(){return a.getFlag("SSA_IN_EDIT")||r.state!==r.States.edit}function v(){return p(r.States.insight)}function g(){return p(r.States.selections)}function m(e,t,n){if(s.inClient()){var o=i.analysis(t).state;var a=r.getAllStateKeys()[n];o||u().then(function(n){f(e,n,t,a)});f(e,o,t,a)}}function b(e,t){if(s.inClient()){var n=i.analysis(t).state;n?f(e,n,t,null):u().then(function(n){f(e,n,t,null)})}}return{getCurrentSheetInfo:c,closeAnalysisOverlay:b,openAnalysisOverlay:m,getDefaultSheetViewState:u,getCurrentSheetViewState:d,shouldShowOverlay:h,isInInsightMode:v,isInSelectionsMode:g}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(104),n(398),n(11),n(200),n(89),n(159)],r=function(e,t,n,i,r,o,a){var s,l,c=window.devicePixelRatio||1,u=document.createElement("canvas"),d=u.getContext("2d"),f=document.createElement("span"),p=d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1,h=c/p,v={},g=[],m=!a.supportDirAuto();f.innerText="Wj";function b(e,t){g.length>100&&delete v[g.shift()];g.push(e);v[e]=t}function y(e){if(e.font in v)return v[e.font];var t=1.5*e.measureText("m").width;b(e.font,t);return t}function x(e,t,n,i,r){var o=t.shape.points,a=o?o.length:0,s,l;e.beginPath();s=o[0];if(!s)return;e.moveTo(s.x,s.y);for(l=1;l<a;l+=1){s=o[l];e.lineTo(s.x,s.y)}r&&e.closePath();n&&e.fill();i&&e.stroke()}l={rect:function e(t,n,i,r){i&&t.fillRect(n.shape.x||0,n.shape.y||0,n.shape.width||0,n.shape.height||0);r&&t.strokeRect(n.shape.x||0,n.shape.y||0,n.shape.width||0,n.shape.height||0)},roundRect:function e(t,n,i,r){t.beginPath();t.moveTo(n.shape.x+n.shape.radius,n.shape.y);t.lineTo(n.shape.x+n.shape.width-n.shape.radius,n.shape.y);t.quadraticCurveTo(n.shape.x+n.shape.width,n.shape.y,n.shape.x+n.shape.width,n.shape.y+n.shape.radius);t.lineTo(n.shape.x+n.shape.width,n.shape.y+n.shape.height-n.shape.radius);t.quadraticCurveTo(n.shape.x+n.shape.width,n.shape.y+n.shape.height,n.shape.x+n.shape.width-n.shape.radius,n.shape.y+n.shape.height);t.lineTo(n.shape.x+n.shape.radius,n.shape.y+n.shape.height);t.quadraticCurveTo(n.shape.x,n.shape.y+n.shape.height,n.shape.x,n.shape.y+n.shape.height-n.shape.radius);t.lineTo(n.shape.x,n.shape.y+n.shape.radius);t.quadraticCurveTo(n.shape.x,n.shape.y,n.shape.x+n.shape.radius,n.shape.y);t.closePath();i&&t.fill();r&&t.stroke()},circle:function e(t,n,i,r){n.shape&&n.shape.r&&!n.shape.radius&&(n.shape.radius=n.shape.r);if(Number.isNaN(+n.shape.cx)||Number.isNaN(+n.shape.cy)||Number.isNaN(+n.shape.radius)||n.shape.radius<=0)return;var o=.551784;t.save();t.translate(n.shape.cx,n.shape.cy);t.scale(n.shape.radius,n.shape.radius);t.beginPath();t.moveTo(1,0);t.bezierCurveTo(1,-o,o,-1,0,-1);t.bezierCurveTo(-o,-1,-1,-o,-1,0);t.bezierCurveTo(-1,o,-o,1,0,1);t.bezierCurveTo(o,1,1,o,1,0);t.closePath();t.restore();i&&t.fill();r&&t.stroke()},line:function e(t,n,i,r){if(!r)return;t.beginPath();t.moveTo(n.shape.x1,n.shape.y1);t.lineTo(n.shape.x2,n.shape.y2);t.stroke()},polygon:function e(t,n,i,r){x(t,n,i,r,true)},polyline:function e(t,n,i,r){x(t,n,i,r)},polygons:function e(t,n,i,r){var e=n.shape.polygons,o=e?e.length:0,a,s,l,c,u,d;t.beginPath();for(u=0;u<o;u++){a=e[u];s=a.points;l=s?s.length:0;if(0===l)continue;c=s[0];if(!c)continue;t.moveTo(c.x,c.y);for(d=1;d<l;d+=1){c=s[d];t.lineTo(c.x,c.y)}}i&&t.fill();r&&t.stroke()},multipolygon:function e(t,n,i,r){var o=n.shape.geopolygons,a=o?o.length:0,s,l,c,u,d,f,p,h;t.beginPath();for(f=0;f<a;f++){s=o[f].getPolygons();l=s?s.length:0;for(p=0;p<l;p++){c=s[p].points;u=c?c.length:0;if(0===u)continue;d=c[0];if(!d)continue;t.moveTo(d.x,d.y);for(h=1;h<u;h+=1){d=c[h];t.lineTo(d.x,d.y)}}}i&&t.fill();r&&t.stroke()},arc:function e(t,n,i,r){var e=n.shape;t.beginPath();if(e.end-e.start===2*Math.PI){t.arc(e.cx,e.cy,e.radius,e.start+e.radianOffset,e.end+e.radianOffset,false);t.moveTo(e.cx+e.innerRadius*Math.cos(e.radianOffset+e.start),e.cy+e.innerRadius*Math.sin(e.radianOffset+e.start));t.arc(e.cx,e.cy,e.innerRadius,e.end+e.radianOffset,e.start+e.radianOffset,true)}else{t.arc(e.cx,e.cy,e.radius,e.start+e.radianOffset,e.end+e.radianOffset,false);if(!Number.isNaN(+e.innerRadius)&&e.innerRadius!==e.radius){t.lineTo(e.innerRadius*Math.cos(e.end+e.radianOffset)+e.cx,e.innerRadius*Math.sin(e.end+e.radianOffset)+e.cy);e.innerRadius>0&&t.arc(e.cx,e.cy,e.innerRadius,e.end+e.radianOffset,e.start+e.radianOffset,true);t.lineTo(e.radius*Math.cos(e.start+e.radianOffset)+e.cx,e.radius*Math.sin(e.start+e.radianOffset)+e.cy)}}t.closePath();i&&t.fill();r&&t.stroke()},text:function e(t,n){if(!n.shape||!n.shape.text||!n.fill)return;n.shape.font&&(t.font=n.shape.font);n.shape.align&&(t.textAlign=n.shape.align);n.shape.baseline&&(t.textBaseline=n.shape.baseline);C(t,n.shape)}};function S(e,t,n){var i,r=e?e.replace(/^\s*|\s*$/,"").split(" "):[],o=[],a,s,l=r[0];if(!l)return[];for(i=1;i<r.length;i++){a=l+" "+r[i];s=d.measureText(a).width;if(s>t&&n>o.length){o.push(l);l=r[i]}else l=a}o.length<n?o.push(l):o[Math.max(0,o.length-1)]?o[Math.max(0,o.length-1)]+=" "+l:o[Math.max(0,o.length-1)]=" "+l;return o}function w(e,t,n){if(void 0===e)return;var i,r,o,a,s,l,c,u="",f,p=d.measureText("i").width;for(i=0;i<e.length;i++){r=e[i];c=Math.ceil(Math.max(0,t/p))+1;if(c<r.length){a=r.slice(c);r=r.slice(0,c)}else a="";o=r;if(r&&r.length>1&&d.measureText(r).width>t){s=false;for(l=r.length;l>0;l--){o=o.substring(0,o.length-1);f=o+(i+1<n?"-":u);if(d.measureText(f).width<t){a=r.substring(l-1)+a;r=f;s=true;break}}if(!s){a=r.substring(1);r=r.substring(0,1)}if(!s&&!l){a="";r=u}}e[i]=String(r).trim();a&&i<e.length-1?e[i+1]=a+" "+e[i+1]:a&&e.length<n&&e.push(a)}}function q(e,t,n){var i=n.maxWidth,r;if(Number.isNaN(+i))return[e];r=t>1?S(e,i,t):[e];w(r,i,t);return r}function C(e,t,n){var i=t.text,r=(t.lineHeight||1)*y(e),o="maxWidth"in t?t.maxWidth:t.width,s="maxHeight"in t?t.maxHeight:t.height,l=t.width,c=t.height,u=t.maxNumLines,f,p=t.x||0,h=t.y||0,v=e.textAlign,g="center"===v&&m,b,x,S;d.font=e.font;Number.isNaN(+u)&&(u=s?Math.max(1,Math.floor(s/r)):1);f=q(i,u,{maxWidth:o,maxHeight:s});if(n){l=0;for(b=0;b<f.length;b++)l=Math.max(l,e.measureText(f[b]).width);return{lines:f,numLines:f.length,width:l,height:f.length*r,truncated:Array.isArray(/$/.exec(f[f.length-1]))}}"middle"===e.textBaseline?"undefined"!==typeof c?h+=c/2:f.length&&(h-=(f.length-1)*r/2):"bottom"===e.textBaseline&&("undefined"!==typeof c?h+=c:h-=(f.length-1)*r);"center"===e.textAlign&&l?p+=l/2:"right"===e.textAlign&&l&&(p+=l);for(b=0;b<f.length;b++){x=a.detectTextDirection(f[b]);e.canvas.dir=x;if(g&&"rtl"===x){e.textAlign="left";S=p-e.measureText(f[b]).width/2}else{e.textAlign=v;S=p}e.canvas.dir=a.detectTextDirection(f[b]);e.fillText(f[b],S,h);h+=r}e.textAlign=v}function _(e,t,n,i,r,o){var a,s,c,u,d,f,p;for(a=0;a<n.length;a+=1){u=n[a];if(!u)continue;e.save();c=u.transform;if(c){t.save();t.multiply(c)}"opacity"in u&&(e.globalAlpha=u.opacity);if(u.fill)if(u.fill.gradient){p=u.fill.gradient;if(Number.isNaN(+p.x0)||Number.isNaN(+p.y0)||Number.isNaN(+p.x1)||Number.isNaN(+p.y1))return;f=e.createLinearGradient(p.x0,p.y0,p.x1,p.y1);for(s=0;s<p.limits.length;s++)f.addColorStop(p.limits[s],p.colors[s]);e.fillStyle=f}else e.fillStyle=u.fill;if(u.stroke&&0!==u.strokeWidth){if(u.stroke.gradient){p=u.stroke.gradient;f=e.createLinearGradient(p.x0,p.y0,p.x1,p.y1);for(s=0;s<p.limits.length;s++)f.addColorStop(p.limits[s],p.colors[s]);e.strokeStyle=f}else e.strokeStyle=u.stroke;e.lineWidth=u.strokeWidth||1;i>1&&"polygon"!==u.type&&(e.lineWidth/=i)}u.lineJoin&&(e.lineJoin=u.lineJoin);u.lineCap&&(e.lineCap=u.lineCap);d=t.elements;if("group"===u.type){t.save();if(u.clip){e.beginPath();e.setTransform(d[0][0],d[1][0],d[0][1],d[1][1],d[0][2],d[1][2]);e.rect(u.clip.rect.x,u.clip.rect.y,u.clip.rect.width,u.clip.rect.height);e.clip()}_(e,t,u.children,void 0,!!u.fill||!!r,!!u.stroke&&0!==u.strokeWidth||!!o);t.restore()}else if(u.type in l){e.setTransform(d[0][0],d[1][0],d[0][1],d[1][1],d[0][2],d[1][2]);l[u.type](e,u,!!u.fill||!!r,!!u.stroke&&0!==u.strokeWidth||!!o)}e.globalAlpha=1;c&&t.restore();e.restore()}}function I(e,t,n){if(n){var i=t.elements;switch(n.type){case"clip":e.save();e.setTransform(i[0][0],i[1][0],i[0][1],i[1][1],i[0][2],i[1][2]);e.beginPath();e.rect(n.rect.x,n.rect.y,n.rect.width,n.rect.height);e.clip();break;case"slice":break;default:break}}}function E(e,t){t&&e.restore()}s=e.extend({init:function e(n,o){var a=i.extend(true,{storeObjects:false},o);this._container=n;this._canvas=document.createElement("canvas");this._canvas.style.position="absolute";this._canvas.width=0;this._canvas.height=0;a.name&&this._canvas.setAttribute("name",a.name);this.storeRenderedObjects=true===a.storeObjects;this.scaling={x:1,y:1};this._container&&this._container.appendChild(this._canvas);this.rect=new t(0,0,0,0);this.shapes=[];this._matrix=new r},setDimensions:function e(t,n,i,r){this.rect.set(t,n,i,r)},setDimensionsToContainerRatio:function e(t,n){this.scaling={x:t,y:n};this.ratios={x:t,y:n}},show:function e(){this._canvas.style.display=""},hide:function e(){this._canvas.style.display="none"},clear:function e(t){if(t){if(!this._clearTimer){var r=this;this._clearTimer=n.request(function(){if(r._clearTimer){r._canvas.width=0;r._clearTimer=0}})}}else{n.cancel(this._clearTimer);this._clearTimer=0;this._canvas.width=0;this._canvas.height=0;i(this._canvas).data("shapes",null);this.shapes=[]}},render:function e(){n.cancel(this._clearTimer);this._clearTimer=0;c=window.devicePixelRatio||1;p=d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1;h=c/p;var t=this._canvas,r=t.getContext("2d"),a=h,s=this._matrix,l=0,u=0,f,v;v=this.rect.height*this.scaling.y;f=this.rect.width*this.scaling.x;if(this.edgeBleed){l=this.edgeBleed.left*this.scaling.x;u=this.edgeBleed.top*this.scaling.y;v+=this.edgeBleed.top*this.scaling.y+this.edgeBleed.bottom*this.scaling.y;f+=this.edgeBleed.left*this.scaling.x+this.edgeBleed.right*this.scaling.x}v=Math.round(v);f=Math.round(f);this._canvas.style.left=-l+"px";this._canvas.style.top=-u+"px";if(t.width!==f||t.height!==v){t.width=a*f;t.height=a*v;this._canvas.style.width=f+"px";this._canvas.style.height=v+"px"}else r.clearRect(0,0,t.width,t.height);r.save();s.save();s.scale(a*this.scaling.x,a*this.scaling.y);s.translate(l/this.scaling.x,u/this.scaling.y);I(r,s,this.viewBox);_(r,s,this.shapes,this.scaling.x);E(r,this.viewBox);r.restore();s.restore();this.storeRenderedObjects&&i(this._canvas).data("shapes",this.shapes);return o.resolve()},setFont:function e(t){this._canvas.getContext("2d").font=t},getFontHeight:function e(t){if("string"!==typeof t)throw new Error("CanvasRenderer.getFontHeight(): Input font is not a string");if(t in v)return v[t];var n=this._canvas.getContext("2d"),i;if(n.font!==t){n.save();n.font=t;i=1.5*n.measureText("m").width;n.restore()}else i=1.5*n.measureText("m").width;b(t,i);return i},getTextWidth:function e(t,n){var i=this._canvas.getContext("2d"),r;i.save();i.font=n;r=void 0!==t?Math.ceil(i.measureText(t).width):0;i.restore();return r},getEMFontWidth:function e(t){var n="m",i,r=this._canvas.getContext("2d");r.save();r.font=t;i=r.measureText(n).width;r.restore();return i},getAverageLetterWidth:function e(t){var n="eeeaaaiinnoorsstldumcph",i;d.font=t||this._canvas.getContext("2d").font;i=d.measureText(n).width;return i/n.length},release:function e(){i(this._canvas).data("shapes",null);this.shapes=[];if(this._container){this._container.removeChild(this._canvas);this._container=null}},applyTransform:function e(){var t;for(t=0;t<this.shapes.length;t+=1)this.shapes[t].type in D&&D[this.shapes[t].type](this.shapes[t].shape,this.ratios)}});var D={rect:function e(t,n){t.x*=n.x;t.y*=n.y;t.width*=n.x;t.height*=n.y},line:function e(t,n){t.x1*=n.x;t.y1*=n.y;t.x2*=n.x;t.y2*=n.y},circle:function e(t,n){t.cx*=n.x;t.cy*=n.y;t.r*=Math.min(n.x,n.y)},polygon:function e(t,n){var i,r;for(i=0;i<t.points.length;i++){r=t.points[i];r.x*=n.x;r.y*=n.y}},text:function e(t,n){t.x*=n.x;t.y*=n.y;t.width*=n.x;t.height*=n.y}};s.getTextWidth=function(e){return Math.ceil(d.measureText(e).width)};s.setFont=function(e){d.font=e};s.getAverageLetterWidth=function(e){var t="eeeaaaiinnoorsstldumcph",n;d.font=e;n=d.measureText(t).width;return n/t.length};s.measureText=function(e,t){var n=d,i,r,o;if(t&&n.font!==t){n.save();n.font=t}r=n.measureText(e).width;if(t in v)i=v[t];else{i=1.5*n.measureText("m").width;b(t,i)}t&&n.restore();o=void 0!==e?{width:r,height:i}:{width:0,height:0};return o};s.measureTextObject=function(e){e.shape.font&&(d.font=e.shape.font);e.shape.align&&(d.textAlign=e.shape.align);e.shape.baseline&&(d.textBaseline=e.shape.baseline);return C(d,e.shape,true)};s.measureDisplayTextObject=function(e){e.font&&(d.font=e.font);e.align&&(d.textAlign=e.align);e.baseline&&(d.textBaseline=e.baseline);return C(d,e,true)};s.getFontHeight=function(e){var t=d,n;if(e in v)return v[e];if(e){t.save();t.font=e}n=1.5*t.measureText("m").width;b(e,n);e&&t.restore();return n};s.getDevicePixelToBackingStoreRatio=function(){return(window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1)};return s}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(238),n(89),n(130),n(125),n(90),n(195),n(185)],r=function(e,t,n,i,r,o,a){var s=1e3,l=1e3;var c;function u(e,t){if(!e)return[];return t&&r.getValue(e,t)?r.getValue(e,t).qHyperCube:e.qHyperCube}c=e.extend({init:function e(t){this._super(t);this.path=t.path},setProperties:function e(t){if(!t)return;this._super(t);this.hcProperties=this.path?r.getValue(t,(this.path?this.path+".":"")+"qHyperCubeDef"):t.qHyperCubeDef;if(!this.hcProperties)return;this.hcProperties.qDimensions||(this.hcProperties.qDimensions=[]);this.hcProperties.qMeasures||(this.hcProperties.qMeasures=[]);this.hcProperties.qInterColumnSortOrder||(this.hcProperties.qInterColumnSortOrder=[]);this.hcProperties.qLayoutExclude||(this.hcProperties.qLayoutExclude={});this.hcProperties.qLayoutExclude.qHyperCubeDef||(this.hcProperties.qLayoutExclude.qHyperCubeDef={});this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions||(this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions=[]);this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures||(this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures=[]);this.hcProperties.qDimensions.forEach(function(e){if(void 0!==e.autoSort){e.qDef.autoSort=e.autoSort;delete e.autoSort}});this.hcProperties.qMeasures.forEach(function(e){if(void 0!==e.autoSort){e.qDef.autoSort=e.autoSort;delete e.autoSort}})},canColorBy:function e(t,n){var i=t||{qHyperCubeDef:this.hcProperties||this.properties.qHyperCubeDef},r=this.layout?this.layout.visualization:null,a=i.qHyperCubeDef.qDimensions.length>=this.minDimensions()&&i.qHyperCubeDef.qMeasures.length>=this.minMeasures();if(o.colorBy.isSupported(r)||n)return a&&this.layout&&this.layout.color?c.canColorBy(i,r):{};return false},getDimensions:function e(){return this.hcProperties?this.hcProperties.qDimensions:[]},getMeasures:function e(){return this.hcProperties?this.hcProperties.qMeasures:[]},getLabels:function e(){return this.getMeasures().filter(function(e){return!e.qLibraryId&&!!e.qDef.qLabel}).map(function(e){return e.qDef.qLabel})},getSorting:function e(){return this.hcProperties.qInterColumnSortOrder},addDimension:function e(n,o,a){var l=this.getDimensions(),c=this;n.qDef.cId||(n.qDef.cId=r.generateId());n.qOtherTotalSpec||(n.qOtherTotalSpec={});if(o){a=void 0!==a?a:this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.splice(a,0,n);return t.resolve(n)}if(l.length<this.maxDimensions()){a=void 0!==a?a:l.length;l.splice(a,0,n);return this.autoSortDimension(n).then(function(){i.indexAdded(c.hcProperties.qInterColumnSortOrder,"undefined"!==typeof a?a:l.length-1);if("function"===typeof c.dimensionDefinition.add)return t.when(c.dimensionDefinition.add.call(c,n,c.properties,c)).then(function(){return n});return n})}if(l.length<s){a=this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.splice(a,0,n);return t.resolve(n)}},reinsertDimension:function e(n,o,a){var l=this.getDimensions(),c=this;n.qDef.cId||(n.qDef.cId=r.generateId());if(o){a=void 0!==a?a:this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.splice(a,0,n);if("function"===typeof c.dimensionDefinition.move)return t.when(c.dimensionDefinition.move.call(c,n,c.properties,c)).then(function(){return n})}else if(l.length<this.maxDimensions()){a=void 0!==a?a:l.length;l.splice(a,0,n);i.indexAdded(c.hcProperties.qInterColumnSortOrder,"undefined"!==typeof a?a:l.length-1);if("function"===typeof c.dimensionDefinition.move)return t.when(c.dimensionDefinition.move.call(c,n,c.properties,c)).then(function(){return n})}else if(l.length<s){a=this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.splice(a,0,n)}return t.resolve(n)},addMeasure:function e(n,o,a){var s=this.getMeasures(),c=this;n.qDef.cId||(n.qDef.cId=r.generateId());if(o){a=void 0!==a?a:this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.splice(a,0,n);return t.resolve(n)}a=void 0!==a?a:s.length;if(s.length<this.maxMeasures()){s.splice(a,0,n);return this.autoSortMeasure(n).then(function(){i.indexAdded(c.hcProperties.qInterColumnSortOrder,c.getDimensions().length+s.length-1);if("function"===typeof c.measureDefinition.add)return t.when(c.measureDefinition.add.call(null,n,c.properties,c)).then(function(){return n});return n})}if(s.length<l){a=this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.splice(a,0,n);return t.resolve(n)}},getDimensionLayouts:function e(){var t=u(this.layout,this.path);return t?t.qDimensionInfo:[]},getDimensionLayout:function e(t){return this.getDimensionLayouts().filter(function(e){return t===e.cId})[0]},getMeasureLayouts:function e(){var t=u(this.layout,this.path);return t?t.qMeasureInfo:[]},getMeasureLayout:function e(t){return this.getMeasureLayouts().filter(function(e){return t===e.cId})[0]},reinsertMeasure:function e(n,o,a){var s=this.getMeasures(),c=this;n.qDef.cId||(n.qDef.cId=r.generateId());if(o){a=void 0!==a?a:this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.splice(a,0,n)}else{a=void 0!==a?a:s.length;if(s.length<this.maxMeasures()){s.splice(a,0,n);i.indexAdded(c.hcProperties.qInterColumnSortOrder,c.getDimensions().length+s.length-1);if("function"===typeof c.measureDefinition.move)return t.when(c.measureDefinition.move.call(null,n,c.properties,c,true)).then(function(){return n})}else if(s.length<l){a=this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.length;this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.splice(a,0,n)}}return t.resolve(n)},replaceDimension:function e(t,n){var i=this.getDimensions(),o=i[t],a=this;return this.autoSortDimension(n).then(function(){n.qDef.cId=r.generateId();i[t]=n;"function"===typeof a.dimensionDefinition.replace&&a.dimensionDefinition.replace.call(null,n,o,t,a.properties,a);return n})},replaceMeasure:function e(t,n){var i=this.getMeasures(),o=i[t],a=this;return this.autoSortMeasure(n).then(function(){n.qDef.cId=r.generateId();i[t]=n;"function"===typeof a.measureDefinition.replace&&a.measureDefinition.replace.call(null,n,o,t,a.properties,a);return n})},autoSortDimension:function e(t){var i=this;function r(e){e.forEach(function(e,n){var r=e.qTags;var o={qSortByLoadOrder:1};if("function"===typeof i.dimensionDefinition.autoSort)i.dimensionDefinition.autoSort(t,i.properties,r,o,i);else{o.qSortByNumeric=1;o.qSortByAscii=1}t.qDef.qSortCriterias?t.qDef.qSortCriterias[n]=o:t.qDef.qSortCriterias=[o]})}return t.qLibraryId?this.app.getDimensionList().then(function(e){var i=n.findLibraryDimension(t.qLibraryId,e);i&&r(i.qData.info);return t}):this.app.getFieldList().then(function(e){var i=n.findField(t.qDef.qFieldDefs[0],e);i&&r([i]);return t})},autoSortMeasure:function e(n){n.qSortBy={qSortByLoadOrder:1,qSortByNumeric:-1};return t.resolve(n)},removeDimension:function e(n,r){var o;if(r){o=this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions.splice(n,1);if("function"===typeof this.dimensionDefinition.remove)return t.when(this.dimensionDefinition.remove.call(null,o,this.properties,this,n))}else{o=this.hcProperties.qDimensions.splice(n,1)[0];i.indexRemoved(this.hcProperties.qInterColumnSortOrder,n);if("function"===typeof this.dimensionDefinition.remove)return t.when(this.dimensionDefinition.remove.call(null,o,this.properties,this,n))}return t.resolve(o)},removeMeasure:function e(n,r){var o;if(r)o=this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures.splice(n,1)[0];else{o=this.hcProperties.qMeasures.splice(n,1)[0];i.indexRemoved(this.hcProperties.qInterColumnSortOrder,this.getDimensions().length+n);if("function"===typeof this.measureDefinition.remove)return t.when(this.measureDefinition.remove.call(null,o,this.properties,this,n))}return t.resolve(o)},moveDimension:function e(n,r){var o=this.getDimensions(),a=this.hcProperties.qLayoutExclude.qHyperCubeDef.qDimensions,s,l,c;if(n<o.length&&r<o.length)i.move(o,n,r);else if(n<o.length&&r>=o.length){l=r-o.length;c=a.splice(0,1)[0];o.push(c);c=o.splice(n,1)[0];a.splice(l,0,c)}else if(n>=o.length&&r<o.length){s=n-o.length;c=o.splice(o.length-1,1)[0];a.splice(0,0,c);c=a.splice(s+1,1)[0];o.splice(r,0,c)}else{s=n-o.length;l=r-o.length;i.move(a,s,l)}return t.resolve(c)},moveMeasure:function e(n,r){var o=this.getMeasures(),a=this.hcProperties.qLayoutExclude.qHyperCubeDef.qMeasures,s,l,c;if(n<o.length&&r<o.length)i.move(o,n,r);else if(n<o.length&&r>=o.length){l=r-o.length;c=a.splice(0,1)[0];o.push(c);c=o.splice(n,1)[0];a.splice(l,0,c)}else if(n>=o.length&&r<o.length){s=n-o.length;c=o.splice(o.length-1,1)[0];a.splice(0,0,c);c=a.splice(s+1,1)[0];o.splice(r,0,c)}else{s=n-o.length;l=r-o.length;i.move(a,s,l)}return t.resolve(c)},changeSorting:function e(t,n){i.move(this.hcProperties.qInterColumnSortOrder,t,n)},setSorting:function e(t){t&&t.length===this.hcProperties.qInterColumnSortOrder.length&&(this.hcProperties.qInterColumnSortOrder=t)}});c.canColorBy=function(e,t){var n={primary:true};if(e){var i=a.getLogicFor("hard",t).helpers.colorModeOptions;n.byDimension=i.dimension(e);n.byMeasure=i.measure(e);n.byMultiple=i.multiColor(e);n.byExpression=i.expression(e)}return n};return c}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(89),n(225),n(101)],r=function(e,t,n,i){function r(e){var t=i.getValue(e,"selections.currentDataColIx",void 0);return i.getValue(e,"layout.qHyperCube.qDimensionInfo."+t+".qIsOneAndOnlyOne",false)}var o=e.extend({$scope:null,init:function e(t){this.$scope=t},onPaint:function e(){return t.resolve()},onResize:function e(){return t.resolve()},setInteractionState:function e(){},setFreeResize:function e(){},setDirection:function e(){},setSnapshotData:function e(){},setBackendApi:function e(){},getContextMenu:function e(){},getObjectMenu:function e(){},getSelectionToolbar:function e(){var t=[];r(this.$scope)||t.push({name:"Tooltip.clearSelection",tid:"selection-toolbar.clear",isIcon:true,buttonClass:"clear",iconClass:"lui-icon lui-icon--clear-selections",action:function e(){this.selectionsApi.clear()},isDisabled:function e(){return!this.selectionsApi.selectionsMade}});return new n(this.$scope.backendApi,this.$scope.selectionsApi,false,false,t,[])},getPreferredSize:function e(){},onInit:function e(){return t.resolve()}});o.$inject=["$scope"];return o}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(102),n(90),n(99),n(179),n(243),n(355),n(773),n(774),n(244)],r=function(e,t,n,i,r,o,a){var s;s=e.extend({destroy:function e(){this.$timeout.cancel(this.initPromise);this.$timeout.cancel(this.setVirtualSizePromise);this.unpreventNativeScroll&&this.unpreventNativeScroll();this.domApi.destroy()},init:function e(r,o){t.create(this,"Scroll");this.$timeout=r;this.initPromise=null;this.setVirtualSizePromise=null;void 0!==o.virtualScrollEnabled?this.virtualScrollEnabled=o.virtualScrollEnabled:this.virtualScrollEnabled=i.treatAsDesktop();this.loaderStyle={width:0,height:0};this.totalRows=0;this.totalColumns=0;this.alignBottomAbsolute=false;this.axisDelta={xAxis:0,yAxis:0};this.alignToBottomReduce={active:false,activeFromStart:false};this.ignoreScroll=false;this.loadNext=false;this.loadPrevious=false;this.settings=n.extend(true,{alignToBottom:"absolute",minRowHeight:21,maxRowHeight:21,minColumnWidth:30,viewportRowCount:0,viewportColumnCount:0,width:0,height:0,blockSize:100,keepItemsCount:10},o)},initialize:function e(t,n,i,s){if(!(t instanceof r))throw new Error("Must provide an instance of domApi");if(!(n instanceof o))throw new Error("Must provide an instance of dataApi");if(!(i instanceof a[a.length-1]))throw new Error("Must provide an instance of ScrollAreaController");if(!s||"function"!==typeof s.fadeIn||"function"!==typeof s.fadeOut)throw new Error("Must provide valid loader api");if(this.initPromise)return this.initPromise;Object.defineProperty(this,"DELTA_MODE",{value:i.DELTA_MODE});this.domApi=t;this.dataApi=n;this.virtualScrollApi=i;this.loaderApi=s;this.initPromise=this.$timeout(function(){this.onInit();this.onInitVirtualScroll();this.bindNativeScroll()}.bind(this));return this.initPromise},onInit:function e(){this.updateViewport()},onInitVirtualScroll:function e(){this.virtualScrollApi.onScroll(this.onVirtualScroll.bind(this));this.virtualScrollApi.getScrollAmount=this.getVirtualScrollAmount.bind(this)},bindNativeScroll:function e(){this.domApi.bindNativeScroll(this.onNativeScroll.bind(this))},activate:function e(){this.virtualScrollEnabled&&this.virtualScrollApi.on();if(this.unpreventNativeScroll){this.unpreventNativeScroll();this.unpreventNativeScroll=null}},deactivate:function e(){this.unpreventNativeScroll=this.domApi.preventNativeScroll();this.virtualScrollApi.off()},updateViewport:function e(){var t=this.domApi.getBoundingBox();this.settings.width=t.width;this.settings.height=t.height;this.settings.viewportRowCount=Math.ceil(this.settings.height/this.settings.minRowHeight);this.settings.viewportColumnCount=Math.ceil(this.settings.width/this.settings.minColumnWidth)},setTotalRows:function e(t){this.totalRows=t},setTotalColumns:function e(t){this.totalColumns=t},getSpliceArgs:function e(){var t=this.dataApi.getRowCount(),n=this.settings.viewportRowCount,i=this.settings.keepItemsCount,r=t-n-i;return[0,r]},onSetVirtualSize:function e(t){var n,i=this.domApi.getScrollAreaBoundingBox(),r=this.domApi.getScrollContentBoundingBox(),o=this.virtualScrollApi.getVirtualPosition(),a=this.settings.minRowHeight*this.totalRows,s,l,c;if("reduce"===this.settings.alignToBottom){this.alignToBottomReduce.active=false;this.alignToBottomReduce.activeFromStart=false;if(r.height>=i.height&&this.settings.viewportRowCount>=this.totalRows){n=this.domApi.getVisibleRowCount(this.settings.maxRowHeight);if(n<this.settings.viewportRowCount){this.alignToBottomReduce.active=true;this.alignToBottomReduce.activeFromStart=true;this.settings.viewportRowCount=n}}l={width:i.width,height:this.settings.viewportRowCount*this.settings.minRowHeight}}else l={width:i.width,height:i.height};s={width:this.settings.minColumnWidth*this.totalColumns,height:a};c={top:0,left:0,width:i.width,height:i.height};this.virtualScrollApi.setVirtualSize(s,l,c);t&&this.virtualScrollApi.scroll(o.vPosX,o.vPosY,true)},setVirtualSize:function e(t){if(!this.virtualScrollEnabled)return;this.setVirtualSizePromise=this.$timeout(function(){this.updateViewport();this.onSetVirtualSize(t);this.updateAlignToBottom()}.bind(this));return this.setVirtualSizePromise},getVirtualScrollAmount:function e(t,n,i){var r=this.virtualScrollApi.getVirtualPosition(),o=this.virtualScrollApi.getMaxPosition();switch(i){case this.DELTA_MODE.LINE:return{deltaX:0,deltaY:this.settings.minRowHeight*n};case this.DELTA_MODE.PAGE:var a=Math.max(0,this.domApi.getVisibleRowCount()-1);return{deltaX:0,deltaY:a*this.settings.minRowHeight*n};case this.DELTA_MODE.AREA:return{deltaX:0,deltaY:n>0?r.vPosY*n:r.vPosY-o.vPosY};default:return{deltaX:t,deltaY:n}}},getPage:function e(t){t||(t=this.virtualScrollApi.getVirtualPosition());return{left:Math.floor(t.vPosX/this.settings.minColumnWidth),top:Math.floor(t.vPosY/this.settings.minRowHeight),width:this.settings.viewportColumnCount,height:this.settings.viewportRowCount}},adjustPageToBounds:function e(t){if(t.top>0&&t.top+t.height>this.totalRows){t.top=Math.max(0,this.totalRows-t.height);t.height=Math.min(this.totalRows,t.height)}if(t.left>0&&t.left+t.width>this.totalColumns){t.left=Math.max(0,this.totalColumns-t.width);t.width=Math.min(this.totalColumns,t.width)}},scroll:function e(t,n,i){var r=this.virtualScrollApi.getScrollAmount(t,n,i);this.virtualScrollApi.scroll(r.deltaX,r.deltaY,false,false)},onVirtualScroll:function e(t,n){this.Scroll.emit();var i=this.virtualScrollApi.getVirtualPosition(),r=this.virtualScrollApi.getMaxPosition(),o=this.getPage(i);if(this.alignToBottomReduce.active&&n<0){this.graduallyLeaveAlignToBottomReduce(o);r=this.virtualScrollApi.getMaxPosition()}"reduce"===this.settings.alignToBottom&&r.vPosY>0&&i.vPosY===r.vPosY&&(this.alignToBottomReduce.active=true);this.adjustPageToBounds(o);this.axisDelta.xAxis=t;this.axisDelta.yAxis=n;return this.dataApi.onVirtualScroll(o.top,o.height,o.left,o.width,t,n).then(function(){this.updateAlignToBottom()}.bind(this)).catch(function(e){false})},updateAlignToBottom:function e(){"reduce"===this.settings.alignToBottom?this.updateAlignToBottomReduce():this.updateAlignToBottomAbsolute()},updateAlignToBottomAbsolute:function e(){var t=this.virtualScrollApi.getVirtualPosition(),n=this.virtualScrollApi.getMaxPosition();this.virtualScrollApi.isVerticalScrollEnabled()&&t.vPosY===n.vPosY?this.alignBottomAbsolute=true:this.alignBottomAbsolute=false},updateAlignToBottomReduce:function e(){var t=false;if(this.alignToBottomReduce.active){if(this.axisDelta.yAxis>0){var n=this.domApi.getVisibleRowCount(this.settings.maxRowHeight);this.settings.viewportRowCount=Math.max(1,n)}else{var i=Math.ceil(this.domApi.getScrollAreaClientHeight()/this.settings.minRowHeight);this.settings.viewportRowCount>=i&&(this.alignToBottomReduce.active=false);t=true}var r=this.domApi.getScrollAreaBoundingBox();this.virtualScrollApi.setViewport({top:0,left:0,width:r.width,height:r.height});this.virtualScrollApi.setVirtualViewport({width:r.width,height:this.settings.viewportRowCount*this.settings.minRowHeight});t&&this.virtualScrollApi.setVirtualScrollPos(0,-1)}},graduallyLeaveAlignToBottomReduce:function e(t){var n=Math.ceil(this.domApi.getScrollAreaClientHeight()/this.settings.minRowHeight);if(this.alignToBottomReduce.activeFromStart)return;t.height=Math.min(this.totalRows-t.top,n);this.settings.viewportRowCount=t.height},updateLoadingButtons:function e(){var t=this.dataApi.getFirstElementIndex(),n=this.dataApi.getRowCount();t+n>=this.totalRows||0===this.totalRows||t<0?this.loadNext=false:this.loadNext=true;this.loadPrevious=t>0},resetNativeScroll:function e(){this.ignoreScroll=true;this.loadNext=false;this.loadPrevious=false;this.domApi.resetNativeScroll();return function(){this.ignoreScroll=false}.bind(this)},onNativeScroll:function e(){if(this.virtualScrollEnabled){this.domApi.resetNativeScroll();return}this.Scroll.emit();if(this.ignoreScroll)return;var t=this.dataApi.getLastElementIndex()+1,n=this.settings.blockSize-t;this.ignoreScroll=true;this.dataApi.onInitialNativeScroll(t,n).then(function(){this.updateLoadingButtons()}.bind(this))},gotoNextBlock:function e(){var t="function"===typeof this.domApi.getHorizontalScroll?this.domApi.getHorizontalScroll():0;this.loaderApi.fadeIn(this.domApi.getScrollAreaOffsetTop(),t,this.domApi.getBoundingBox()).then(function(){var e=this.domApi.alignToLastRow(),t=this.dataApi.getLastElementIndex()+1,n=this.settings.blockSize-this.settings.keepItemsCount;this.dataApi.onGotoNextBlock(t,n).then(function(){this.updateLoadingButtons();this.$timeout(function(){e();this.$timeout(function(){this.loaderApi.fadeOut()}.bind(this))}.bind(this))}.bind(this))}.bind(this))},gotoPreviousBlock:function e(){var t="function"===typeof this.domApi.getHorizontalScroll?this.domApi.getHorizontalScroll():0;this.loaderApi.fadeIn(this.domApi.getScrollAreaOffsetTop(),t,this.domApi.getBoundingBox()).then(function(){var e=this.domApi.alignToFirstRow(),t=this.settings.blockSize-this.settings.keepItemsCount,n=this.dataApi.getFirstElementIndex()-t;if(n<0){t+=n;n=0}this.dataApi.onGotoPreviousBlock(n,t).then(function(){this.updateLoadingButtons();this.$timeout(function(){e();this.$timeout(function(){this.loaderApi.fadeOut()}.bind(this))}.bind(this))}.bind(this))}.bind(this))}});return s}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(90),n(249),n(303)],r=function(e,t,n,i){var r=e.extend("SortableItemList",{init:function e(t,n){this.items=[];this.disabled=false;this.typeFlag=t||1;this.locked=false;Object.keys(n||{}).forEach(function(e){this[e]=n[e]},this)},addSortableItem:function e(t,n){Object.defineProperty(t,"__sortableItem__",{configurable:false,enumerable:true,writable:true,value:{typeFlag:n||1}});this.items.push(t)},moveItem:function e(t,n){this.items.splice(n,0,this.items.splice(t,1)[0])},getIndexByItem:function e(t){return this.items.indexOf(t)},get:function e(t){return this.items.filter(t||function(){return true})},getLockedIndices:function e(){return this.get(function(e){return!!(e.__sortableItem__.typeFlag&i.TYPEFLAG_LOCKED)}).map(function(e){return this.getIndexByItem(e)},this)},reset:function e(){this.items.length=0;this.disabled=false},isEmpty:function e(){return 0===this.items.length},setLocked:function e(t){this.locked=t}});Object.defineProperties(r.prototype,{length:{get:function e(){return this.items.length}}});var o=n.extend("SortableItemLists",{init:function e(){this._super.apply(this,arguments);this.lists=[];this.dragPlaceholder=null},addPlaceholder:function e(n){var r=this.getList(n),o=r?r.items.indexOf(n):-1;this.dragPlaceholder=t.extend(true,{},n);this.dragPlaceholder.id="placeholder";this.dragPlaceholder.__sortableItem__.typeFlag=i.TYPEFLAG_PLACEHOLDER;this.dragPlaceholder.style={opacity:"0.3"};r&&r.items.splice(o,0,this.dragPlaceholder);return this.dragPlaceholder},removePlaceholder:function e(){if(!this.dragPlaceholder)return;var t=this.getList(this.dragPlaceholder),n=t?t.items.indexOf(this.dragPlaceholder):-1;if(-1!==n){t.items.splice(n,1);this.dragPlaceholder=null}},getPlaceholder:function e(){return this.dragPlaceholder},createList:function e(t,n){var i=new r(t,n);this.lists.push(i);return i},reset:function e(){this.lists.forEach(function(e){e.reset()})},getList:function e(t){return this.lists.filter(function(e){return-1!==e.items.indexOf(t)})[0]},disable:function e(t){this.lists.forEach(function(e){e.disabled=!(t.__sortableItem__.typeFlag&e.typeFlag)})},enable:function e(){this.lists.forEach(function(e){e.disabled=false})},getIndexOfItem:function e(t){var n=this.getList(t);var i=n?n.items.indexOf(t):-1;return i},moveItem:function e(t,n){var i=this.getList(t),r=this.getList(n),o,a;if(!i||!r)return;a=r.items.indexOf(n);o=i.items.indexOf(t);i.items.splice(o,1);r.items.splice(a,0,t)},onBegin:function e(t,n){this.addPlaceholder(t,n);this.disable(t)},onEnter:function e(t,n){var r=this.getList(t),o=r.getLockedIndices();if(t===this.dragPlaceholder)return;if(n===i.ENTER_BEFORE||n===i.ENTER_AFTER){var a=this.getList(this.dragPlaceholder),s,l;if(!a||!r)return;s=a.getIndexByItem(this.dragPlaceholder);a.items.splice(s,1);l=r.getIndexByItem(t);l+=n===i.ENTER_AFTER?1:0;r.items.splice(l,0,this.dragPlaceholder)}else this.moveItem(this.dragPlaceholder,t);var c=r.getLockedIndices();o.forEach(function(e,t){r.moveItem(c[t],e)})},onEnterList:function e(t){if(t.disabled||t.locked)return;var n=this.getList(this.dragPlaceholder);if(!n)return;var i=n.getIndexByItem(this.dragPlaceholder);n.items.splice(i,1);t.items.push(this.dragPlaceholder)},onMove:function e(t){if(-1===this.getIndexOfItem(t)){this.onCancel();return false}var n=this.dragPlaceholder;this.moveItem(t,n);this.removePlaceholder();this.enable();return true},onMoveToList:function e(t,n){var i=this.getList(t);if(i&&!(n.disabled||n.locked)){var r=i.items.indexOf(t);if(i===n){this.onMove(t,this.dragPlaceholder);return true}i.items.splice(r,1);n.items.push(t)}this.removePlaceholder();this.enable();return!!i},onCancel:function e(){this.removePlaceholder();this.enable()},allowEnter:function e(t,n){var i=this.getList(t);return void 0!==i&&!i.disabled&&!i.locked&&!!(n.__sortableItem__.typeFlag&i.typeFlag)},allowEnterList:function e(t,n){return!t.disabled&&!t.locked&&!!(n.__sortableItem__.typeFlag&t.typeFlag)}});o.create=function(e){var t=o.extend(e||{});e=new t(e&&e.options);return e};return o}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";(function(i){var r,o;function a(e){a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return a(e)}!(r=[n(517)],o=function(e){var t,n,i,r,o,s,l,c,u,d,f,p,h,v,g,m,b,y,x,S,w,q,C,_,I,E;t={};n={js:[",",".","_"," "]};i={default:[",",".","-","_"," "]};r={width:["%"],height:["%"]};o={default:["-"," ","%"],color:["#"," ","(",")"],image:["(",")",":","/","?","&","-",".",'"',"="," "]};s={background:["(",")",":","%","/","?","&","-"," ",".",'"',"=","#"],"background-image":o.image,"background-color":o.color,"border-color":o.color,"border-image":o.image,color:o.color,icon:o.image,"list-style-image":o.image,"outline-color":o.color};l={attr_name:["on[a-z]{1,}","style","href","src"],attr_val:["javascript:"],css_key:["behavior","-moz-behavior","-ms-behavior"],css_val:["expression"]};c={blacklist:true,RFC3986:true,LOG:false};t.encoder={encodeForHTML:function e(t){if("undefined"===typeof t||null===t)return"";var n="",i=document.createTextNode(t);E.appendChild(i);n=E.innerHTML;E.removeChild(i);return n},encodeForAttr:function e(n,o,a){var s,c,u,d,f,p,h,v,g;n=t.encoder.canonicalize(n).toLowerCase();o=t.encoder.canonicalize(o);if(_(n,l.attr_name)>=0)throw new Error("Unsafe attribute name used: "+n);for(u=0;u<l.attr_val;u++)if(o.toLowerCase().match(l.attr_val[u]))throw new Error("Unsafe attribute value used: "+o);s=r[n];s||(s=i.default);c="";if(!a){for(d=0;d<n.length;d++){f=n.charAt(d);if(!f.match(/[a-zA-Z\-0-9]/))throw new Error("Invalid attribute name specified");c+=f}c+='="'}for(p=0;p<o.length;p++){h=o.charAt(p);v=o.charCodeAt(p);if(!h.match(/[a-zA-Z0-9]/)&&_(h,s)<0){g=v.toString(16);c+="&#x"+g+";"}else c+=h}a||(c+='"');return c},encodeForAttr2:function e(n){return t.encoder.encodeForAttr("nonsens",n,true)},encodeForCSS:function e(n,i,r){var a,c,u,d,f,p,h,v,g,m;n=t.encoder.canonicalize(n).toLowerCase();i=t.encoder.canonicalize(i);if(_(n,l.css_key)>=0)throw new Error("Unsafe property name used: "+n);for(a=0;a<l.css_val.length;a++)if(i.toLowerCase().indexOf(l.css_val[a])>=0)throw new Error("Unsafe property value used: "+i);c=s[n];c||(c=o.default);u="";if(!r){for(d=0;d<n.length;d++){f=n.charAt(d);if(!f.match(/[a-zA-Z-]/))throw new Error("Invalid Property Name specified");u+=f}u+=": "}for(p=0;p<i.length;p++){h=i.charAt(p);v=i.charCodeAt(p);if(!h.match(/[a-zA-Z0-9]/)&&_(h,c)<0){g=v.toString(16);m="000000".substr(g.length);u+="\\"+m+g}else u+=h}return u},encodeForURL:function e(n,i){var r="";if(i){i.match(/^[A-Za-z\-0-9]{1,}$/)?r+=t.encoder.canonicalize(i).toLowerCase():h(this,"Illegal Attribute Name Specified");r+='="'}c.RFC3986?r+=encodeURIComponent(n).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A"):r+=encodeURIComponent(n);r+=i?'"':"";return r},encodeForHref:function n(i){t.encoder.canonicalize(i);0!==i.search("[a-zA-Z0-9]+:")&&(i="http://"+i);var r=new e(i);var o=e.encodeAuthorityAndPath(decodeURI(r.authorityAndPath));var a=r.searchParams;var s=e.encodeSearchParams(a);i=o+s+r.hash;if(-1!==i.indexOf("javascript:"))throw new Error("Attack Detected - Javascript in input");return i},encodeForJS:function e(t,i){var r,o,a,s,l,c;i||(i=n.js);c="";for(r=0;r<t.length;r++){a=t.charAt(r);s=t.charCodeAt(r);if(_(a,i)>=0||null==d[s]){c+=a;continue}o=s.toString(16);if(s<256){l="00".substr(o.length);c+="\\x"+l+o.toUpperCase()}else{l="0000".substr(o.length);c+="\\u"+l+o.toUpperCase()}}return c},canonicalize:function e(t,n){var i,r,o,a,s,l,c=false;if(null===t)return null;i=t;r=t;o=0;a=[new b,new y,new x];while(!c){r=i;for(s=0;s<a.length;s++){l=a[s].decode(i);if(l!==i){o++;i=l}}if(r===i){c=true;continue}}o>1&&v(this,"Attack Detected - Multiple/Double Encodings used in input");if(n&&o>1)throw new Error("Attack Detected - Multiple/Double Encodings used in input");return i}};d=[];for(f=0;f<255;f++)d[f]=f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122?null:f.toString(16);u={html:function e(n){return t.encoder.encodeForHTML(n.unsafe)},css:function e(n){var i,r=[],o=[],a={},s="";n.map?r=n.map:r[n.name]=n.unsafe;for(i in r)if("function"!==typeof r[i]&&r.hasOwnProperty(i)){o[i]=t.encoder.encodeForCSS(i,r[i],true);s+=t.encoder.encodeForCSS(i,r[i],true);a[i]=o[i]}return n.map?a:s},attr:function e(n){var i,r,o=[],a=[],s={},l="";n.map?o=n.map:o[n.name]=n.unsafe;for(i in o)if("function"!==typeof o[i]&&o.hasOwnProperty(i)){a[i]=t.encoder.encodeForAttr(i,o[i],true);l+=t.encoder.encodeForAttr(i,o[i],true);s[i]=a[i]}r=n.map?s:l;return r}};t.encoder.encode=function(){var e=arguments.length,t={context:"html",unsafe:null,name:null,map:null,setter:null,strict:true};if(1===e&&"object"===a(arguments[0]))I(t,arguments[0]);else{t.context=arguments[0];if(2===arguments.length)"html"===t.context?t.unsafe=arguments[1]:"attr"!==t.context&&"css"!==t.context||(t.map=arguments[1]);else{t.name=arguments[2];t.unsafe=arguments[1]}}if("html"===t.context)return u.html(t);if("css"===t.context){null!=t.map&&"object"!==a(t.map)&&h(this,"Invalid parameter type");return u.css(t)}if("attr"===t.context){null!=t.map&&"object"!==a(t.map)&&h(this,"Invalid parameter type");return u.attr(t)}h(this,"Invalid parameter type")};h=function e(t,n){v(t,n);throw new Error(n)};v=function e(t,n){c.LOG&&window.console&&window.console.log&&window.console.log(t,n)};p=function(){var e=false,t;t=function e(){};t.extend=function(n){var i,r;e=true;i=new this;e=false;for(r in n)i[r]=n[r];function o(){!e&&this.init&&this.init.apply(this,arguments)}o.prototype=i;o.constructor=o;o.extend=t.extend;return o};return t}();g=p.extend({_input:null,_pushback:null,_temp:null,_index:0,_mark:0,_hasNext:function e(){if(null==this._input)return false;if(0===this._input.length)return false;return this._index<this._input.length},init:function e(t){this._input=t},pushback:function e(t){this._pushback=t},index:function e(){return this._index},hasNext:function e(){if(null!=this._pushback)return true;return this._hasNext()},next:function e(){if(null!=this._pushback){var t=this._pushback;this._pushback=null;return t}return this._hasNext()?this._input.charAt(this._index++):null},nextHex:function e(){var t=this.next();if(null==t)return null;if(t.match(/[0-9A-Fa-f]/))return t;return null},peek:function e(t){if(t){if(this._pushback&&this._pushback===t)return true;return!!this._hasNext()&&this._input.charAt(this._index)===t}if(this._pushback)return this._pushback;return this._hasNext()?this._input.charAt(this._index):null},mark:function e(){this._temp=this._pushback;this._mark=this._index},reset:function e(){this._pushback=this._temp;this._index=this._mark},remainder:function e(){var t=this._input.substr(this._index);null!=this._pushback&&(t=this._pushback+t);return t}});m=p.extend({decode:function e(t){var n="",i=new g(t),r;while(i.hasNext()){r=this.decodeCharacter(i);n+=null!=r?r:i.next()}return n},decodeCharacter:function e(t){return t.next()}});b=m.extend({decodeCharacter:function e(t){var n,i,r;t.mark();n=t.next();if(null==n||"&"!==n){t.reset();return null}i=t.next();if(null==i){t.reset();return null}if("#"===i){r=this._getNumericEntity(t);if(null!=r)return r}else if(i.match(/[A-Za-z]/)){t.pushback(i);r=this._getNamedEntity(t);if(null!=r)return r}t.reset();return null},_getNamedEntity:function e(t){var n="",i,r,o,a;r=Math.min(t.remainder().length,T.getMaxKeyLength());for(a=0;a<r;a++)n+=t.next().toLowerCase();i=T.getLongestMatch(n);if(null==i)return null;t.reset();t.next();r=i.getKey().length;for(o=0;o<r;o++)t.next();t.peek(";")&&t.next();return i.getValue()},_getNumericEntity:function e(t){var n=t.peek();if(null==n)return null;if("x"===n||"X"===n){t.next();return this._parseHex(t)}return this._parseNumber(t)},_parseHex:function e(t){var n="",i,r;while(t.hasNext()){i=t.peek();if(Number.isNaN(+parseInt(i,16))){if(";"===i){t.next();break}break}n+=i;t.next()}r=parseInt(n,16);if(!Number.isNaN(+r)&&w(r))return String.fromCharCode(r);return null},_parseNumber:function e(t){var n="",i,r;while(t.hasNext()){i=t.peek();if(Number.isNaN(+parseInt(i,10))){if(";"===i){t.next();break}break}n+=i;t.next()}r=parseInt(n,10);if(!Number.isNaN(+r)&&w(r))return String.fromCharCode(r);return null}});y=m.extend({decodeCharacter:function e(t){t.mark();var n=t.next(),i,r,o,a;if(null==n){t.reset();return null}if("%"!==n){t.reset();return null}i="";for(r=0;r<2;r++){o=t.nextHex();null!=o&&(i+=o)}if(2===i.length){a=parseInt(i,16);if(w(a))return String.fromCharCode(a)}t.reset();return null}});x=m.extend({decodeCharacter:function e(t){t.mark();var n=t.next(),i,r,o,a,s;if(null==n||"\\"!==n){t.reset();return null}i=t.next();if(null==i){t.reset();return null}switch(i){case"\r":t.peek("\n")&&t.next();case"\n":case"\f":case"\0":return this.decodeCharacter(t)}if("NaN"===parseInt(i,16))return i;r=i;for(o=0;o<5;o++){a=t.next();if(null==a||q(a))break;if("NaN"===parseInt(a,16)){t.pushback(a);break}r+=a}s=parseInt(r,16);if(w(s))return String.fromCharCode(s);return""}});S=p.extend({root:null,maxKeyLen:0,size:0,init:function e(){this.clear()},getLongestMatch:function e(t){return null==this.root&&null==t?null:this.root.getLongestMatch(t,0)},getMaxKeyLength:function e(){return this.maxKeyLen},clear:function e(){this.root=null;this.maxKeyLen=0;this.size=0},put:function e(t,n){var i,r;null==this.root&&(this.root=new S.Node);if(null!=(i=this.root.put(t,0,n)))return i;r=t.length;r>this.maxKeyLen&&(this.maxKeyLen=t.length);this.size++;return null}});S.Entry=p.extend({_key:null,_value:null,init:function e(t,n){this._key=t;this._value=n},getKey:function e(){return this._key},getValue:function e(){return this._value},equals:function e(t){if(!(t instanceof S.Entry))return false;return this._key===t._key&&this._value===t._value}});S.Node=p.extend({_value:null,_nextMap:null,setValue:function e(t){this._value=t},getNextNode:function e(t){if(!this._nextMap)return null;return this._nextMap[t]},put:function e(t,n,i){var r,o,a;if(t.length===n){a=this._value;this.setValue(i);return a}o=t.charAt(n);if(null==this._nextMap){this._nextMap=S.Node.newNodeMap();r=new S.Node;this._nextMap[o]=r}else if(null==(r=this._nextMap[o])){r=new S.Node;this._nextMap[o]=r}return r.put(t,n+1,i)},get:function e(t,n){var i;if(t.length<=n)return this._value;if(null==(i=this.getNextNode(t.charAt(n))))return null;return i.get(t,n+1)},getLongestMatch:function e(t,n){var i,r;if(t.length<=n)return S.Entry.newInstanceIfNeeded(t,this._value);if(null==(i=this.getNextNode(t.charAt(n))))return S.Entry.newInstanceIfNeeded(t,n,this._value);if(null!=(r=i.getLongestMatch(t,n+1)))return r;return S.Entry.newInstanceIfNeeded(t,n,this._value)}});S.Entry.newInstanceIfNeeded=function(){var e=arguments[0],t,n;if("string"===typeof arguments[1]){t=arguments[1];n=e.length}else{n=arguments[1];t=arguments[2]}if(null==t||null==e)return null;e.length>n&&(e=e.substr(0,n));return new S.Entry(e,t)};S.Node.newNodeMap=function(){return{}};w=function e(t){return t>=0&&t<=1114111};q=function e(t){return t.match(/[\s]/)};var D=[],A=[],T=new S;(function(){D["&quot"]="34";D["&amp"]="38";D["&lt"]="60";D["&gt"]="62";D["&nbsp"]="160";D["&iexcl"]="161";D["&cent"]="162";D["&pound"]="163";D["&curren"]="164";D["&yen"]="165";D["&brvbar"]="166";D["&sect"]="167";D["&uml"]="168";D["&copy"]="169";D["&ordf"]="170";D["&laquo"]="171";D["&not"]="172";D["&shy"]="173";D["&reg"]="174";D["&macr"]="175";D["&deg"]="176";D["&plusmn"]="177";D["&sup2"]="178";D["&sup3"]="179";D["&acute"]="180";D["&micro"]="181";D["&para"]="182";D["&middot"]="183";D["&cedil"]="184";D["&sup1"]="185";D["&ordm"]="186";D["&raquo"]="187";D["&frac14"]="188";D["&frac12"]="189";D["&frac34"]="190";D["&iquest"]="191";D["&Agrave"]="192";D["&Aacute"]="193";D["&Acirc"]="194";D["&Atilde"]="195";D["&Auml"]="196";D["&Aring"]="197";D["&AElig"]="198";D["&Ccedil"]="199";D["&Egrave"]="200";D["&Eacute"]="201";D["&Ecirc"]="202";D["&Euml"]="203";D["&Igrave"]="204";D["&Iacute"]="205";D["&Icirc"]="206";D["&Iuml"]="207";D["&ETH"]="208";D["&Ntilde"]="209";D["&Ograve"]="210";D["&Oacute"]="211";D["&Ocirc"]="212";D["&Otilde"]="213";D["&Ouml"]="214";D["&times"]="215";D["&Oslash"]="216";D["&Ugrave"]="217";D["&Uacute"]="218";D["&Ucirc"]="219";D["&Uuml"]="220";D["&Yacute"]="221";D["&THORN"]="222";D["&szlig"]="223";D["&agrave"]="224";D["&aacute"]="225";D["&acirc"]="226";D["&atilde"]="227";D["&auml"]="228";D["&aring"]="229";D["&aelig"]="230";D["&ccedil"]="231";D["&egrave"]="232";D["&eacute"]="233";D["&ecirc"]="234";D["&euml"]="235";D["&igrave"]="236";D["&iacute"]="237";D["&icirc"]="238";D["&iuml"]="239";D["&eth"]="240";D["&ntilde"]="241";D["&ograve"]="242";D["&oacute"]="243";D["&ocirc"]="244";D["&otilde"]="245";D["&ouml"]="246";D["&divide"]="247";D["&oslash"]="248";D["&ugrave"]="249";D["&uacute"]="250";D["&ucirc"]="251";D["&uuml"]="252";D["&yacute"]="253";D["&thorn"]="254";D["&yuml"]="255";D["&OElig"]="338";D["&oelig"]="339";D["&Scaron"]="352";D["&scaron"]="353";D["&Yuml"]="376";D["&fnof"]="402";D["&circ"]="710";D["&tilde"]="732";D["&Alpha"]="913";D["&Beta"]="914";D["&Gamma"]="915";D["&Delta"]="916";D["&Epsilon"]="917";D["&Zeta"]="918";D["&Eta"]="919";D["&Theta"]="920";D["&Iota"]="921";D["&Kappa"]="922";D["&Lambda"]="923";D["&Mu"]="924";D["&Nu"]="925";D["&Xi"]="926";D["&Omicron"]="927";D["&Pi"]="928";D["&Rho"]="929";D["&Sigma"]="931";D["&Tau"]="932";D["&Upsilon"]="933";D["&Phi"]="934";D["&Chi"]="935";D["&Psi"]="936";D["&Omega"]="937";D["&alpha"]="945";D["&beta"]="946";D["&gamma"]="947";D["&delta"]="948";D["&epsilon"]="949";D["&zeta"]="950";D["&eta"]="951";D["&theta"]="952";D["&iota"]="953";D["&kappa"]="954";D["&lambda"]="955";D["&mu"]="956";D["&nu"]="957";D["&xi"]="958";D["&omicron"]="959";D["&pi"]="960";D["&rho"]="961";D["&sigmaf"]="962";D["&sigma"]="963";D["&tau"]="964";D["&upsilon"]="965";D["&phi"]="966";D["&chi"]="967";D["&psi"]="968";D["&omega"]="969";D["&thetasym"]="977";D["&upsih"]="978";D["&piv"]="982";D["&ensp"]="8194";D["&emsp"]="8195";D["&thinsp"]="8201";D["&zwnj"]="8204";D["&zwj"]="8205";D["&lrm"]="8206";D["&rlm"]="8207";D["&ndash"]="8211";D["&mdash"]="8212";D["&lsquo"]="8216";D["&rsquo"]="8217";D["&sbquo"]="8218";D["&ldquo"]="8220";D["&rdquo"]="8221";D["&bdquo"]="8222";D["&dagger"]="8224";D["&Dagger"]="8225";D["&bull"]="8226";D["&hellip"]="8230";D["&permil"]="8240";D["&prime"]="8242";D["&Prime"]="8243";D["&lsaquo"]="8249";D["&rsaquo"]="8250";D["&oline"]="8254";D["&frasl"]="8260";D["&euro"]="8364";D["&image"]="8365";D["&weierp"]="8472";D["&real"]="8476";D["&trade"]="8482";D["&alefsym"]="8501";D["&larr"]="8592";D["&uarr"]="8593";D["&rarr"]="8594";D["&darr"]="8595";D["&harr"]="8596";D["&crarr"]="8629";D["&lArr"]="8656";D["&uArr"]="8657";D["&rArr"]="8658";D["&dArr"]="8659";D["&hArr"]="8660";D["&forall"]="8704";D["&part"]="8706";D["&exist"]="8707";D["&empty"]="8709";D["&nabla"]="8711";D["&isin"]="8712";D["&notin"]="8713";D["&ni"]="8715";D["&prod"]="8719";D["&sum"]="8721";D["&minus"]="8722";D["&lowast"]="8727";D["&radic"]="8730";D["&prop"]="8733";D["&infin"]="8734";D["&ang"]="8736";D["&and"]="8743";D["&or"]="8744";D["&cap"]="8745";D["&cup"]="8746";D["&int"]="8747";D["&there4"]="8756";D["&sim"]="8764";D["&cong"]="8773";D["&asymp"]="8776";D["&ne"]="8800";D["&equiv"]="8801";D["&le"]="8804";D["&ge"]="8805";D["&sub"]="8834";D["&sup"]="8835";D["&nsub"]="8836";D["&sube"]="8838";D["&supe"]="8839";D["&oplus"]="8853";D["&otimes"]="8855";D["&perp"]="8869";D["&sdot"]="8901";D["&lceil"]="8968";D["&rceil"]="8969";D["&lfloor"]="8970";D["&rfloor"]="8971";D["&lang"]="9001";D["&rang"]="9002";D["&loz"]="9674";D["&spades"]="9824";D["&clubs"]="9827";D["&hearts"]="9829";D["&diams"]="9830";var e,t,n;for(e in D)"function"!==typeof D[e]&&D.hasOwnProperty(e)&&(A[D[e]]=e);for(t in A)if("function"!==typeof A[t]&&A.hasOwnProperty(t)){n=A[t].toLowerCase().substr(1);T.put(n,String.fromCharCode(t))}})();C=Array.prototype.indexOf;_=function e(t,n,i){var r;if(n){if(C)return C.call(n,t,i);r=n.length;i=i?i<0?Math.max(0,r+i):i:0;for(;i<r;i++)if(i in n&&n[i]===t)return i}return-1};I=function e(){var t,n,i,r=arguments[0]||{},o=1,a=arguments.length;for(;o<a;o++)if(null!=(t=arguments[o]))for(n in t)if(t.hasOwnProperty(n)){i=t[n];if(r===i)continue;void 0!==i&&(r[n]=i)}return r};"undefined"!==typeof document&&(E=document.createElement("div"));return t.encoder}.apply(t,r),void 0!==o&&(e.exports=o))}).call(this,n(11))},function(e,t,n){"use strict";var i,r;!(i=[n(119),n(718)],r=function(e,t){var n=30;e.directive("qvTagcloud",["$parse",function(e){return{template:t,replace:true,restrict:"E",scope:{tags:"=",onChange:"&"},link:function t(i,r,o){i.tagInput="";var a=r.find(".qv-tagText");a.bind("blur",function(){i.$apply(function(){i.addTags()})});a.bind("keydown",function(e){if(13===e.which){e.stopPropagation();i.$apply(function(){i.addTags()})}});function s(e){var t=i.tags;e=e.trim();if(!e||-1!==t.indexOf(e)||t.length>=n)return;t.push(e)}i.removeTagAt=function(e){i.tags.splice(e,1);i.onChange()};i.addTags=function(){var e=i.tagInput;if(!e)return;i.tagInput="";var t=e.trim().split(",");t.forEach(s);i.tags.sort(function(e,t){return e.localeCompare(t)});i.onChange()};i.addTagsAndFocus=function(e){e.preventDefault();i.addTags();a.focus()};var l=e(o.update);l.assign&&l.assign(i.$parent,i.addTags)}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(48),n(193)],r=function(e,t){var n={list:[]},i=null;n.getList=function(){var n=this;function r(e){t.getService("$contentApi").getExtensions().then(function(t){n.list=[];for(var i in t)t.hasOwnProperty(i)&&n.list.push({id:i,data:t[i]});e.resolve(n.list)},function(){n.list=[];e.resolve(n.list)});return e.promise}if(null===i){i=new e;return r(i)}return i.promise};return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(48),n(93),n(716),n(191),n(107),n(90),n(150)],r=function(e,t,n,i,r,a,s){e.directive("qvDescriptionTextarea",function(){return{restrict:"E",scope:{description:"=",descriptionExpression:"=",disableExpression:"=?",isValid:"=?"},template:n,link:function e(n){t.getApp().then(function(e){var t;n.onBlur=c;n.openExpressionDialog=u;n.enableDescriptionExpression=!n.disableExpression;void 0===n.isValid&&(n.isValid=true);n.$watch("editorValue",function(e){if(void 0===e)return;p(n.editorValue,true);h()});t=new i.ExpressionValidator(e);t.Update.bind(g);n.$watchGroup(["description","descriptionExpression"],function(){var e=f();if(!v(e,n.editorValue)){n.editorValue=e;l()}});function l(){var e=d(n.editorValue);e?t.validate(n.editorValue):n.isValid=!n.editorValue||n.editorValue.length<=r.description}function c(){p(n.editorValue,true);l()}function u(){var e={expr:n.editorValue,title:n.editorValue?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title"};s.show(e).then(function(e){e.length&&"="!==e[0]&&(e="="+e);p(e,false);l()})}function d(e){return n.enableDescriptionExpression&&0===(e||"").indexOf("=")}function f(){if("object"===o(n.descriptionExpression)&&n.enableDescriptionExpression){var e=a.getValue(n.descriptionExpression,"qStringExpression.qExpr","");"="!==e[0]&&(e="="+e);return e}return n.description}function p(e,t){var i=d(e);if(i){n.description="";n.descriptionExpression={qStringExpression:{qExpr:e.substr(1)}}}else{n.description=(e||"").trim();n.descriptionExpression=void 0}t||(n.editorValue=e)}function h(){n.maxLength=d(n.editorValue)?r.expression:r.description}function v(e,t){e=(e||"").trim();t=(t||"").trim();return e===t}function g(e){n.isValid=e.valid}n.$on("$destroy",function(){t.Update.unbind(g)})})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(10),n(95),n(48),n(909),n(94),n(140),n(184),n(103),n(168),n(155),n(49),n(89),n(202),n(223),n(176),n(175)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h){i.service("qvCaoService",["$document","qvSelectionToolbarService","qvGlobalSelectionsService","qvCaoSelectionService",function(i,v,g,m){var b,y,x;var S=300;var w=new c;var q=new u;var C=false;var _=d.getFlag("CE_PRECEDENTS");var I,E;x=s.createGroup("cao",1);x.registerKeys("ctrl+left",s.preventDefault);x.registerKeys("ctrl+home",s.preventDefault);x.registerKeys("ctrl+right",s.preventDefault);x.registerKeys("ctrl+end",s.preventDefault);x.registerKeys("ctrl+e",s.preventDefault);x.registerKeys("ctrl+c",s.preventDefault);x.registerKeys("ctrl+x",s.preventDefault);x.registerKeys("ctrl+v",s.preventDefault);x.registerKeys("ctrl+z",s.preventDefault);x.registerKeys("ctrl+y",s.preventDefault);x.registerKeys("cmd+shift+z",s.preventDefault);x.registerKeys("del",s.preventDefault);x.registerKeys("ctrl+f",s.preventDefault);x.registerKeys("backspace",s.preventDefault);x.registerKeys("esc",s.preventDefault);x.registerKeys("ctrl+shift+left",T);x.registerKeys("ctrl+shift+right",O);function D(){return{$container:void 0,$containerId:".qv-cao-container",getComponent:function e(){return r},setup:function e(){a.get().then(function(e){o.StateChanged.bind(A);e.enigmaModel.isInModalSelection()&&v.confirm()})},destroy:function e(){o.StateChanged.unbind(A)}}}function A(){(o.isInEditMode()||o.isInAnalysisMode()||o.inObjectView())&&P()}function T(){a.get().then(function(e){h.toggleAssetsPanel(e.id);n.publish("cao/insight/assetsPanelToggled",h.storageObj(e.id).assetsPanel)})}function O(){a.get().then(function(e){h.toggleContextPanel(e.id);n.publish("cao/insight/contextPanelToggled",h.storageObj(e.id).contextPanel)})}function k(n){x.on();y.$container=t.element("<div>");n=n||i;n.find(y.$containerId).append(y.$container);y.$container.showComponent(y.getComponent());y.setup();g.setCaoActive(true);e(".qv-cao").slideDown(S)}function L(){return!(!y||void 0===y.$container)}function P(){x.off();if(!y)return;e(".qv-cao").slideUp(S,function(){if(y.$container){y.$container.remove();y.$container=void 0}y.destroy();y=null;g.setCaoActive(false)})}b={isCaoOpen:L,toggleCao:function e(t){var n=p.getCurrentSheetInfo();m.clearSelection();y||(y=new D);if(L()){P();p.closeAnalysisOverlay(n.sheetId,n.appId);l.trackEvent(l.customEvents.INSIGHTS_CLICKED,{type:"close"});return false}p.openAnalysisOverlay(n.sheetId,n.appId,o.States.insight);k(t);C=false;l.trackEvent(l.customEvents.INSIGHTS_CLICKED,{type:"open"});return true},off:function e(){l.trackEvent(l.customEvents.INSIGHTS_CLICKED,{type:"off"});P()},scrapeApp:function e(){if(_){if(I)return E;I=true;E=w.scrapeApp().then(function(){I=false});return E}return(new f).resolve()},setRefreshIndicatorVisibility:function e(t){C=t},getRefreshIndicatorVisibility:function e(){return C},isInsightsAvailable:function e(){var t=new f;q.isRunning().then(function(){t.resolve(true)},function(){t.resolve(false)});return t.promise}};return b}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(91),n(14)],r=function(e,t){var n=t.getProductInfoSync();var i=n.externalUrls;e.ready.then(function(){i.serverHelpBaseUrl=i.serverHelpBaseUrl.replace("{language}",e.language);i.personalHelpBaseUrl=i.personalHelpBaseUrl.replace("{language}",e.language)});Object.defineProperty(i,"gettingStarted",{get:function t(){return i.qlikWebPageUrl+"/"+e.language+"-sense-gettingstarted"}});return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=c(n(49));var r=c(n(93));var o=c(n(95));var a=c(n(89));var s=c(n(326));var l=c(n(91));function c(e){return e&&e.__esModule?e:{default:e}}var u;var d;var f;var p;var h=false;var v=true;var g="";var m=false;var b="2013-08-08 13:15:19";var y="OBSERVER_KEY_APP_IS_NOW_DIRTY";var x="OBSERVER_KEY_APP_IS_NOW_CLEAN";function S(){if(d&&!f)return true;var e=d>f;return e}function w(){return f>p}function q(e){var t=new Date;t.setTime(24*(e-25569)*3600*1e3);return Math.floor(t.getTime()/1e3)}function C(e){p=q(e.qUtcLastReloadTime);d=f}function _(e){r.default.getApp().then(function(t){t.getProperties().then(function(t){b=t.qLastReloadTimeAsString||b;C(t);e&&e()})})}function I(){setTimeout(function(){var e=w();var t=S()?y:x;o.default.publish(t,e)})}function E(){u=d;d=new Date;I()}function D(e){var t=new a.default;if(e&&"function"!==typeof e)throw new Error("The callback function specified is not a function.");h=true;r.default.getApp().then(function(n){n.doSave().then(function(){h=false;v=true;f=new Date;_(I);e&&e();t.resolve()},function(e){h=false;v=false;t.reject(e)})});return t.promise}function A(){r.default.getApp().then(function(e){e.getLayout().then(function(e){g="";e.qTitle?g=e.qTitle:e.qFileName&&(g=e.qFileName.replace(/\.(qvw|qvf)$/i,""));e.qModified&&E()})})}function T(e){h=e}function O(){return h}function k(){return v}function L(e){o.default.subscribe(y,e)}function P(e){o.default.unsubscribe(y,e)}function M(e){o.default.subscribe(x,e)}function N(e){o.default.unsubscribe(x,e)}function R(){if(!d)throw new Error("Cannot do rollback since the app has never been flagged as dirty.");d=u;I()}function F(){_(I)}var $={saveApp:D,haveWeDoneSaveButNoReload:w,notifyThatNewChangeIsDoneAndSaveIsRequired:E,updateWhenLastScriptWasExecuted:F,isAppDirty:S,isSaveOngoing:O,setSaveOngoing:T,getLastSaveSuccess:k,onAppIsNowDirty:L,onAppIsNowDirtyRemove:P,onAppIsNowClean:M,onAppIsNowCleanRemove:N,getLastSavedAsString:function e(){if(f){var t=new s.default(null);var n=t.format(f,"HH:mm:ss");return l.default.get("scripteditor.autosave.lastsaved",n)}return""},getLastReloadAsString:function e(){return b||""},getTitle:function e(){return g},isAutoSaveOn:function e(t){if(m&&t&&i.default.getFlag("DISABLE_DLE_AUTOSAVE"))return false;return m},doDirtyRollback:R,init:function e(){d=new Date;r.default.getApp().then(function(e){e.global.getConfiguration().then(function(e){var t=e.qFeatures;m=t.qAutoSave});_();A();e.Invalidated.bind(A)})},reset:function e(){_(I)}};t.default=$;e.exports=t.default},function(e,t,n){"use strict";var i,r;!(i=[n(93),n(89)],r=function(e,t){function n(n){return n?t.resolve(n.enigmaModel):e.getApp()}var i={};i.create=function(e,t){return n(t).then(function(t){return t.createStory(e).then(function(e){return e.createSlide().then(function(){return e})})})};i.remove=function(e,t){return n(t).then(function(t){return t.destroyObject(e)})};i.get=function(e,t){return n(t).then(function(t){return t.getObject(e)})};i.getList=function(e){return n(e).then(function(e){return e.getStoryListObject()})};return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(101)],r=function(e){var t={getDimensions:function t(n){return e.getValue(n,"qHyperCubeDef.qDimensions",[])},getNumDimensions:function t(n){return e.getValue(n,"qHyperCubeDef.qDimensions.length",0)},getMeasures:function t(n){return e.getValue(n,"qHyperCubeDef.qMeasures",[])},getNumMeasures:function t(n){return e.getValue(n,"qHyperCubeDef.qMeasures.length",0)},getDimensionLayouts:function t(n,i){var r=e.getValue(n,i?i+".qHyperCube":"qHyperCube",null);if(r)return r.qDimensionInfo;return[]},getDimensionLayout:function e(t,n,i){return this.getDimensionLayouts(n,i).filter(function(e){return t===e.cId})[0]},getMeasureLayouts:function t(n,i){var r=e.getValue(n,i?i+".qHyperCube":"qHyperCube",null);if(r)return r.qMeasureInfo;return[]},getMeasureLayout:function e(t,n,i){return this.getMeasureLayouts(n,i).filter(function(e){return t===e.cId})[0]}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(676),n(742),n(745),n(133),n(219),n(147),n(90),n(100)],r=function(e,t,n,i,r,o,a,s,l){function c(e){return l.currentPalette.indexOf(e)}function u(e,t){delete e.baseColor;e.coloring||(e.coloring={});t.baseColor&&t.baseColor.color&&"none"!==t.baseColor.color?s.extend(true,e.coloring,{baseColor:{color:t.baseColor.color,index:c(t.baseColor.color)}}):delete e.coloring.baseColor;t.gradient&&t.gradient.colors&&0!==t.gradient.colors.length?e.coloring.gradient={colors:t.gradient.colors.map(function(e){return{color:e,index:c(e)}}),breakTypes:t.gradient.breakType,limits:t.gradient.limits,limitType:t.gradient.limitType}:delete e.coloring.gradient}function d(e){var t={qInfo:{qType:"measure"},qMetaDef:{title:e.name,description:e.description,tags:e.tags},qMeasure:{qLabel:e.name,qDef:e.expr,qLabelExpression:e.labelExpression,descriptionExpression:e.descriptionExpression}};u(t.qMeasure,e);return a.create(t)}function f(e,t){var n={name:t.name,rowEstExpr:t.rowEstExpr,templateApp:t.templateApp,properties:{rowEstRange:[{highBound:t.rowEstCount}],genAppLimit:[{context:"User_*",limit:t.genAppLimit}],appRetentionTime:[{context:"User_*",retentionTime:t.retentionLimit}],targetSheet:[{context:"User_*",sheetId:t.defaultViewId}]}};t.publishToStreamId&&(n.properties.publishTo=[{context:"User_*",streamId:t.publishToStreamId}]);var i=new o(n);return i.create(e)}function p(e,t,n,i){n.data.name=i.name;n.data.properties.rowEstRange[0].highBound=i.rowEstCount;n.data.properties.genAppLimit[0].limit=i.genAppLimit;n.data.rowEstExpr=i.rowEstExpr;n.data.templateApp=i.templateApp;n.data.properties.appRetentionTime[0].retentionTime=i.retentionLimit;n.data.properties.targetSheet[0].sheetId=i.defaultViewId;i.publishToStreamId?n.data.properties.publishTo.length?n.data.properties.publishTo[0].streamId=i.publishToStreamId:n.data.properties.publishTo=[{context:"User_*",streamId:i.publishToStreamId}]:n.data.properties.publishTo=[];return r.updateODAGLink(e,t,n.data)}function h(e,t,n){e.qMetaDef.title=n.name;e.qMetaDef.description=n.description;e.qMetaDef.tags=n.tags;e.qMeasure.qLabel=n.name;e.qMeasure.qDef=n.expr;e.qMeasure.qLabelExpression=n.labelExpression;e.qMeasure.descriptionExpression=n.descriptionExpression;u(e.qMeasure,n);return t.setProperties(e)}function v(t){function n(n){return f(t,n).then(function(){e.$rootScope.$emit("clearUndo")})}var r=i.show({title:"ODAGLink.Dialog.Add.Title",confirm:"Common.Create",name:"",inEditMode:false,description:"",genAppLimit:5,retentionLimit:"",defaultViewId:"",publishToStreamId:"",confirmCallback:n,app:t});r.resultPromise.then(function(){r.destroy()})}function g(t,n,r){o.get(n,t).then(function(o){var a=o.properties;function s(i){return p(t,n,a,i).then(function(t){r&&r(t);e.$rootScope.$emit("clearUndo")})}var l={title:"ODAGLink.Dialog.Edit.Title",confirm:"Common.Save",inEditMode:true,name:a.data.name,templateApp:a.data.templateApp,rowEstExpr:a.data.rowEstExpr,rowEstCount:a.data.properties.rowEstRange[0].highBound,genAppLimit:a.data.properties.genAppLimit[0].limit,retentionLimit:a.data.properties.appRetentionTime.length?a.data.properties.appRetentionTime[0].retentionTime:"",defaultViewId:a.data.properties.targetSheet.length?a.data.properties.targetSheet[0].sheetId:"",publishToStreamId:a.data.properties.publishTo.length?a.data.properties.publishTo[0].streamId:"",confirmCallback:s,app:t};var c=i.show(l);c.resultPromise.then(function(){c.destroy()})})}function m(n,i,r){var o,a=n||"",l=s.escapeField(a);var c=function t(n){d(n).then(function(t){r&&r(t);e.$rootScope.$emit("clearUndo")})};var u={title:"Measure.Dialog.Add.Title",confirm:"Common.Create",name:a,description:"",tags:[],expr:n?"("+l+")":"",callback:c};o=t.show(u);o.closed.then(function(){o=null})}function b(n,i){a.get(n).then(function(n){n.getProperties().then(function(r){var o=function t(o){h(r,n,o).then(function(t){i&&i(t);e.$rootScope.$emit("clearUndo")})};var a={title:"Measure.Dialog.Edit.Title",confirm:"Common.Save",name:r.qMetaDef.title,description:r.qMetaDef.description,descriptionExpression:r.qMeasure.descriptionExpression,tags:r.qMetaDef.tags,expr:r.qMeasure.qDef,labelExpression:r.qMeasure.qLabelExpression,baseColor:r.qMeasure.coloring?r.qMeasure.coloring.baseColor:r.qMeasure.baseColor,gradient:r.qMeasure.coloring?r.qMeasure.coloring.gradient:r.qMeasure.gradient,callback:o};var s=t.show(a);s.closed.then(function(){s=null})})})}function y(e){n.show({title:"Visualization.Dialog.Add.Title",confirm:"Visualization.Dialog.Saveclose",visualization:{name:e.qMetaDef.title,description:e.qMetaDef.description,tags:e.qMetaDef.tags},onSaveCallback:e.onSave})}function x(e){e.onSave({expr:e.expr,path:e.elem.data("path"),pathAttribute:"definition"})}return{addMeasure:m,editMeasure:b,addMetadata:y,addODAGLink:v,editODAGLink:g,breakLink:x}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(688),n(689)],r=function(e,t){e.directive("objectAddTypeahead",[function(){return{template:t,scope:{},transclude:true,replace:true,restrict:"E",controller:["$scope",function(e){var t=this;e.items=[];function n(){var t=e.menu;if(e.activeItem){var n=e.activeItem;var i=n.getPosition();i.top<0?t.setScrollTop(n.getOffsetTop()):i.top+n.getHeight()>t.getHeight()&&n.scrollIntoView(false)}else t.setScrollTop(0)}this.activate=function(t){e.activeItem=t};this.nextItem=function(i){var r=e.items.indexOf(e.activeItem);"undefined"!==typeof i&&(r=(r+i)%e.items.length);r===e.items.length-1?t.activate(null):-1===r?t.activate(e.items[0]):t.activate(e.items[r+1]);n()};this.prevItem=function(i){var r=e.items.indexOf(e.activeItem);"undefined"!==typeof i&&(r=(r-i+e.items.length)%e.items.length);0===r?t.activate(null):-1===r?t.activate(e.items[e.items.length-1]):t.activate(e.items[r-1]);n()};this.getActiveItem=function(){return e.activeItem};this.selectActiveItem=function(){e.activeItem&&e.activeItem.select()};this.select=function(t){e.select({item:t});e.activeItem=null};this.setMenu=function(t){e.menu=t};this.addItem=function(t){e.items.push(t)};this.removeItem=function(t){var n=e.items.indexOf(t);n>=0&&e.items.splice(n,1)}}]}}]);e.directive("objectAddTypeaheadInput",[function(){return{require:["^objectAddTypeahead","ngModel"],link:function e(t,n,i,r){var o=r[0],a=r[1];n.on("keydown",function(e){e.stopPropagation();if(13===e.which||9===e.which){e.preventDefault();o.getActiveItem()?t.$apply(function(){o.selectActiveItem()}):t.$apply(function(){t.$eval(i.onEnter,{$event:e})})}else if(33===e.which){e.preventDefault();t.$apply(function(){o.prevItem(10)})}else if(34===e.which){e.preventDefault();t.$apply(function(){o.nextItem(10)})}else if(40===e.which){e.preventDefault();t.$apply(function(){o.nextItem()})}else if(38===e.which){e.preventDefault();t.$apply(function(){o.prevItem()})}else if(27===e.which){e.preventDefault();t.$apply(function(){t.$eval(i.onEscape,{$event:e})})}});t.$watch(o.getActiveItem,function(e){e?e.item.label&&n.val(e.item.label):n.val(a.$modelValue)});t.$watch(a.$modelValue,function(e){e||o.activate(null)})}}}]);e.directive("objectAddTypeaheadMenu",[function(){return{require:"^objectAddTypeahead",link:function e(t,n,i,r){t.controller=r;r.setMenu({getHeight:function e(){return n.height()},setScrollTop:function e(t){n[0].scrollTop=t}})}}}]);e.directive("objectAddTypeaheadItem",[function(){return{require:"^objectAddTypeahead",link:function e(t,n,i,r){var o=t.$eval(i.objectAddTypeaheadItem);var a={item:o,getOffsetTop:function e(){return n[0].offsetTop},scrollIntoView:function e(t){n[0].scrollIntoView(t)},getPosition:function e(){return n.position()},getHeight:function e(){return n.height()},select:function e(){s()}};function s(){t.$eval(i.onSelect,{item:o})}r.addItem(a);t.$on("$destroy",function(){r.removeItem(a)});t.$watch(function(){var e=r.getActiveItem();if(e)return e.item===o;return false},function(e){e?n.addClass("object-add-typeahead-active"):n.removeClass("object-add-typeahead-active")});n.on("mouseenter",function(){n.addClass("object-add-typeahead-hover")});n.on("mouseleave",function(){n.removeClass("object-add-typeahead-hover")});n.on("qv-activate",function(e){e.preventDefault();t.$apply(function(){s()})})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(89),n(133),n(92),n(49)],r=function(e,t,n,i,r){var o=i.extend("ODAGLink",{properties:null,getProperties:function e(){return t.resolve(this.properties)},create:function e(t){return n.createODAGLink(t,this.properties.data)},init:function t(n){this.properties={type:"odaglink",data:{id:"",name:"",templateApp:"",rowEstExpr:"",privileges:[],properties:{rowEstRange:[{context:"*",highBound:null}],genAppLimit:[{context:"User_*",limit:5}],appRetentionTime:[{context:"User_*",retentionTime:""}],publishTo:[],targetSheet:[{context:"User_*",sheetId:""}]},tags:[]}};e.extend(true,this.properties.data,n);return this}});o.getLinkedObjects=function(){return t.resolve([])};o.get=function(e,t){return n.loadODAGLink(t,e).then(function(e){var t=r.getFlag("ODAG_SAAS_ENABLED")?e:e.objectDef;var n=new o(t);return n})};o.getList=function(e,t){return n.getODAGLinks(e,t).then(function(t){var i=[];for(var r=0;r<t.length;r++){var a=t[r];if(a&&a.link)if("decommissioned"===a.link.status)n.removeODAGAppLinkWithODAGLinkId(e,a.link.id);else{var s=new o(a.link);i.push(s)}}return i})};return o}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(155),n(89),n(94),n(91),n(54),n(154),n(147),n(246),n(363),n(273),n(142),n(93),n(275),n(271)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f){e.service("qvSelectionInsightsService",["qvCaoSearchService","qvCurrentSelectionsService",function(e,p){var h;var v=new t;var g=new l(r.localeDetected,"","","","numeric");var m={};var b=2e4;var y="$";function x(e){return g.format(e,"#.#A")}function S(e){var t=parseFloat(e.toFixed(3));return new Intl.NumberFormat(r.localeDetected,{style:"percent",maximumSignificantDigits:3,minimumSignificantDigits:1}).format(parseFloat(t))}function w(e){var t="";var n=e.measureAggregation;if("avg"==n){var i=x(e.excludedMeasure.qNumber);t=r.get("SelectionInsights.CardSummaryAvg",[i])}else t=Number.isNaN(+e.excludedMeasurePercentage.toFixed(1))?"NaN":r.get("SelectionInsights.CardSummarySum",[S(e.excludedMeasurePercentage.toFixed(1)/100)]);return t}function q(e){var t=e.counts.excluded+e.counts.included;var n=e.counts.excluded;var i=e.measureBreakdown.excluded.num;return n>1?r.get("SelectionInsights.InsightSummaryExcludedLongMulti",[n,t,"<span class='dimLabelDesc'>"+e.dimension+"</span>","<span>"+i+"</span>","<span>"+e.measure+"</span>","<span>"+(e.measureAggregation[0].toUpperCase()+e.measureAggregation.slice(1))+"</span>"]):r.get("SelectionInsights.InsightSummaryExcludedLongSingle",[n,t,"<span class='dimLabelDesc'>"+e.dimension+"</span>","<span>"+i+"</span>","<span>"+e.measure+"</span>","<span>"+(e.measureAggregation[0].toUpperCase()+e.measureAggregation.slice(1))+"</span>"])}function C(e,t){var i=new n;var o={};var a=true;o.counts={};o.counts.excluded=parseFloat(t.analysis.numExcluded);o.counts.included=parseFloat(t.analysis.distinctCount)-parseFloat(t.analysis.numExcluded);o.counts.summary=r.get("SelectionInsights.CardCountsSummary",[o.counts.excluded,o.counts.excluded+o.counts.included,S(o.counts.excluded/(o.counts.excluded+o.counts.included))]);var s="";var l="";var c="";var u="";for(var d in t.analysis.matchRecord.matches){var f=t.analysis.matchRecord.matches[d];if("dimension"==f.slotRole){c=f.field||f.libIdLabel;u=f.libId}else{s=f.field||f.libIdLabel;l=Array.isArray(f.aggr)?f.aggr[0]:f.aggr}}o.dimension=c;o.measure=s;o.measureAggregation=l;o.dimensionId=u;var p=[];var h=e.evaluateEx(t.analysis.aggrMrsExcluded);p.push(h);var v=e.evaluateEx(t.analysis.aggrMrsTotal);p.push(v);var g=e.evaluateEx(t.analysis.aggrMrsIncluded);p.push(g);var y=e.evaluateEx(t.analysis.aggrMrs);p.push(y);var C=setTimeout(function(){var t=false;p.forEach(function(n){if(-1===n.$$state.status){t=true;e.global.cancelRequest(n.requestId).then(function(){})}});t&&i.reject()},b);n.all(p).then(function(e){var n=e[0];var r=e[1];var s=e[2];var l=e[3];o.excludedMeasurePercentage=n.qNumber/r.qNumber*100;o.includedMeasurePercentage=s.qNumber/r.qNumber*100;o.excludedMeasure=n;o.totalMeasure=r;o.includedMeasure=s;o.summaryString=w(o);o.excludedVis={dimension:t.analysis.dim,measure:t.analysis.aggrMrsExcluded};o.includedVis={dimension:t.analysis.dim,measure:t.analysis.aggrMrsIncluded};o.measureBreakdown={};o.measureBreakdown.excluded={num:x(n.qNumber),percentage:o.excludedMeasurePercentage.toFixed(1)};o.measureBreakdown.included={num:x(s.qNumber),percentage:o.includedMeasurePercentage.toFixed(1)};o.selectedMeasure={total:x(r.qNumber),selected:{num:x(l.qNumber),percentage:l.qNumber/r.qNumber*100,qNum:l.qNumber},excluded:{num:x(r.qNumber-l.qNumber),percentage:(r.qNumber-l.qNumber)/r.qNumber*100,qNum:r.qNumber-l.qNumber}};o.summaryStringLong=q(o);m[o.dimension].insight=o;clearTimeout(C);a=o.excludedMeasurePercentage+o.includedMeasurePercentage<100.01&&o.counts.included>=0&&o.counts.excluded>=0&&o.excludedMeasurePercentage+o.includedMeasurePercentage>99.9;o.show=a;i.resolve({show:a,summary:o.summaryString})}).catch(function(e){i.reject(e)});return i.promise}function _(e){return e.getObject(i.model.id).then(function(e){return e.getLayout().then(function(e){return e.qMeta.title})})}function I(e){var t=void 0;e||(t={scope:["libItems"]});return t}function E(e){b=e.runtimeSettings.suggestedTimeout;var t={};var n=null;if(!o.isEmpty(e.appRecommendations)){var i=e.appRecommendations[0].visualizations;var r=[];i.forEach(function(e){if("excludedCompareMsrSelector"!=e.analysis.analysis){var i=parseFloat(e.analysis.numExcluded)/parseFloat(e.analysis.distinctCount);var o=(parseFloat(e.analysis.distinctCount)-parseFloat(e.analysis.numExcluded))/parseFloat(e.analysis.distinctCount);var a="";var s="";var l="";for(var c in e.analysis.matchRecord.matches){var u=e.analysis.matchRecord.matches[c];if("dimension"==u.slotRole)l=u.field||u.libIdLabel;else{a=u.field||u.libIdLabel;s=u.aggr}}var d=true;(0===i||0===o||"avg"!=s&&"sum"!=s)&&(d=false);r.indexOf(l)>-1&&(d=false);if(d){r.push(l);t[l]={vis:e,measure:a,measureAggregation:s}}else;}else for(var f in e.analysis.matchRecord.matches){var p=e.analysis.matchRecord.matches[f];"measure"==p.slotRole&&(n=p.field||p.libIdLabel)}})}return{insights:t,measure:n}}function D(e,t){var n=I(e);var i=[];var o=false;if(void 0!=t)if(t.masterItem){i.push(t.libId);o=true}else i.push(t.qName);return v.getExcludedCompareVisualizations(i,n,o).then(function(e){if(e.__report.appDataModel.memberSelectionDone)return E(e);throw{error:r.get("SelectionInsights.Unsupported")}})}function A(t){var n=[];return t?a.getList().then(function(e){return e.getLayout()}).then(function(e){var t=e.filter(function(e){return e.qTags&&(-1===e.qTags.indexOf("$date")||-1===e.qTags.indexOf("$timestamp"))&&-1===e.qTags.indexOf("$geopoint")&&(e.qTags.indexOf("$numeric")>-1||e.qTags.indexOf("$integer")>-1)});n=n.concat(t);return T()}).then(function(t){n=n.concat(t);var i=e.sortFields(n);return i}):T().then(function(t){var n=e.sortFields(t);return n})}function T(){return s.getList().then(function(e){return e.getLayout().then(function(e){var t=e.map(function(e){return{qName:e.qData.title,classifications:["measure"],masterItem:true,libId:e.qInfo.qId,libIdLabel:e.qMeta.title}});return t})})}function O(e){if(e&&e.selectionsInStates){var t=[];e.selectionsInStates.forEach(function(e){e.qSelectionObject.qSelections.forEach(function(t){t.stateName=e.stateName});t=t.concat(e.qSelectionObject.qSelections)});var n=t.filter(function(e){return!e.qIsHidden});n.forEach(function(e){e.translation=p.translate(e);e.screenReaderLabel=p.translatedScreenReaderLabel(e);e.name=e.qReadableName||e.qField;e.displayStateName=e.stateName===y?r.get(u.DEFAULT_STATE_TRANSLATION):e.stateName});var i=c.groupSelectionsByField(n);var o=i.filter(function(e){return!e.isSingleState});o.forEach(function(e){e.translation=p.translate(e);e.screenReaderLabel=p.translatedScreenReaderLabel(e)});i=i.sort(d.sortSelections);return i}}function k(e,t){var n={qHyperCubeDef:{qDimensions:[{qDef:{qFieldDefs:[t?e.excludedVis.dimension:e.includedVis.dimension],qFieldLabels:[e.dimension]},qNullSuppression:true}],qMeasures:[{qDef:{qDef:t?e.excludedVis.measure:e.includedVis.measure,qLabel:e.measureAggregation[0].toUpperCase()+e.measureAggregation.slice(1)+"("+e.measure+")",qNumFormat:{qType:"F",qnDec:2,qUseThou:0,qFmt:"#,##0.00",qDec:".",qThou:","}},qSortBy:{qSortByAscii:-1}}],qInterColumnSortOrder:[1,0],qInitialDataFetch:[{qTop:0,qHeight:500,qLeft:0,qWidth:2}],columnOrder:[0,1],columnWidths:[197,230],qSuppressMissing:true,qReductionMode:"N",qMode:"S",qPseudoDimPos:-1,qNoOfLeftDims:-1,qMaxStackedCells:5e3},qInfo:{qId:"",qType:"visualization"},visualization:"table"};return f.getApp().then(function(e){return e.enigmaModel.createSessionObject(n).then(function(e){return e})})}function L(e){if(e&&e.selectionsInStates){var t=c.getAllSelectionsInStates(e);var n=t.filter(function(e){return true===e.qOneAndOnlyOne}).map(function(e,t){return"<strong>"+(t?" ":"")+e.name+"</strong>"});if(n.length>0)return{isOneAndOnlyOne:true,items:n};return false}return false}function P(e){if(e&&e.selectionsInStates){var t=c.getAllSelectionsInStates(e);if(t.filter(function(e){return true===e.qLocked}).length>0)return true;return false}return false}h={getSheet:function e(t){return _(t).then(function(e){return e})},getInsightDimensions:function e(t,n){return D(t,n).then(function(e){m={};m=e.insights;var t=[];for(var n in m){var i={};i.excluded=parseFloat(m[n].vis.analysis.numExcluded);i.included=parseFloat(m[n].vis.analysis.distinctCount)-parseFloat(m[n].vis.analysis.numExcluded);i.summary=r.get("SelectionInsights.CardCountsSummary",[i.excluded,i.excluded+i.included,S(i.excluded/(i.excluded+i.included))]);t.push({dimension:n,counts:i,measure:m[n].measure,measureAggregation:m[n].measureAggregation,show:true})}return{insights:t,measure:e.measure}}).catch(function(e){throw e})},getInsightSummary:function e(t,n){var i=m[t].vis;return C(n,i).then(function(e){return e})},getInsightDetails:function e(t){return m[t].insight},clearInsights:function e(){m={}},getMeasures:function e(t){return A(t).then(function(e){return e})},getLocalizedPercentage:function e(t){return S(t)},getSelectionItems:function e(t){return O(t)},getTableVis:function e(t,n){return k(t,n).then(function(e){return e})},isOneAndOnlyOne:function e(t){return L(t)},isHasLockedSelections:function e(t){return P(t)}};return h}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(89),n(155),n(406),n(367),n(876),n(877),n(880),n(368)],r=function(e,t,n,i,r,o,a,s){e.service("qvCaoChartService",["qvCaoComplexityEstimatorService",function(e){var l;var c;var u=new n;function d(e,t,n){n.title=e;return i.createChart(n,t,false).then(function(e){return{model:e}})}function f(e){if(c)return v(c.app,c.searchPhrase,c.libItems,e);return t.reject({norefresh:true})}function p(e,t,n){var i=[];t.forEach(function(t){i.push(a.generateChartPropertiesForRecommendation(t.visualization,n).then(function(n){t.visualization=new r(t.visualization,e.__report,n);return t}))});return i}function h(n,i){var r=[];var a=3e3;n.runtimeSettings&&n.runtimeSettings.suggestedTimeout&&(a=n.runtimeSettings.suggestedTimeout);n.appRecommendations.forEach(function(t){t.recAnalyses.forEach(function(t){if("fact"===t.analysis.analysis&&1!==t.relevance)return;var n={relevance:t.relevance,suggestedTimeout:a,visualization:t,complexity:e.estimateComplexity(t,i)};r.push(n)})});return t.all(p(n,r,i)).then(function(e){var t=[];n.appCharts&&n.appCharts.forEach(function(e){e.appearsOnSheets.length>0&&t.push({relevance:e.relevance,suggestedTimeout:a,visualization:new o(e.id,e.appearsOnSheets,n.__report,i),complexity:-1})});return{recommendations:e.map(function(e){return new s(e,i)}),chartMatches:t.map(function(e){return new s(e,i)})}})}function v(e,t,n,i){c={app:e,searchPhrase:t,libItems:n};var r={exploreSupplemental:["appInsights"]};var o={};n&&(o={scope:["libItems"]});"boolean"===typeof i&&false===i&&(o.appPrecedents="skip");return u.getInsightRecommendations(t,r,true,[],o).then(function(t){return h(t,e)})}function g(e,t,n){c={app:e,searchPhrase:"",libItems:n};var i={exploreSupplemental:["appInsights"]};var r;n&&(r={scope:["libItems"]});return u.getVisRecommendations(t,true,i,[],r).then(function(t){return h(t,e)})}function m(e,t,n){return d(e,t,n)}function b(e,t){var n=e.matchRecord;var i=e.analysis.analysis;return u.adaptMatchRecord("update",n,i).then(function(n){n[0].analysis={analysis:n[0].analysis,analysisGroup:n[0].analysisGroup,dims:n[0].dims,msrs:n[0].msrs,titleTemplate:n[0].titleTemplate};return a.generateChartPropertiesForRecommendation(n[0],t).then(function(t){return{properties:t,analysis:n[0].analysis,matchRecord:e.matchRecord}})})}l={getInsights:v,getVisualRecommendations:g,refreshInsights:f,buildInsightChart:m,adaptRecommendation:b};return l}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={resizeCharts:function e(t){if("function"===typeof Event)t.dispatchEvent(new Event("resize"));else{var n=t.document.createEvent("UIEvents");n.initUIEvent("resize",true,false,t,0);t.dispatchEvent(n)}}};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e="qCaoStorageObj";function t(){var t=JSON.parse(sessionStorage.getItem(e));null===t&&(t=JSON.parse(localStorage.getItem(e))||{});return t}function n(t){var n=JSON.parse(localStorage.getItem(e))||{};if(!n||!n[t]){n[t]={contextPanel:true,assetsPanel:true};sessionStorage.setItem(e,JSON.stringify(n));localStorage.setItem(e,JSON.stringify(n));return n[t]}return n[t]}var i={storageObj:function e(t){return n(t)},toggleContextPanel:function n(i){var r=t(i);r[i].contextPanel=!r[i].contextPanel;localStorage.setItem(e,JSON.stringify(r));sessionStorage.setItem(e,JSON.stringify(r));return r},toggleAssetsPanel:function n(i){var r=t(i);r[i].assetsPanel=!r[i].assetsPanel;localStorage.setItem(e,JSON.stringify(r));sessionStorage.setItem(e,JSON.stringify(r));return r}};return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(48),n(140),n(633),n(451),n(100),n(90),n(162),n(108),n(49)],r=function(e,t,n,i,r,o,a,s,l,c){var u=function t(i,r,o){var a=i&&"function"===typeof i.getConfiguration?i:n.get(r);return e.resolve(a).then(function(e){var t=e.layout&&e.layout.qTitle||"";var n=e.id||"";var i=null;var r=e.getConfiguration().then(function(r){for(var a=0;a<r.qServices.length;a++)if("senseprinting"===r.qServices[a].qName.toLowerCase()){i={appName:t,appId:n,qUrl:c.getFlag("EXPORT_API_ENDPOINT")?"".concat(o||"","/api/export/printing/"):o?o+unescape(r.qServices[a].qUrl):unescape(r.qServices[a].qUrl),localeInfo:e.layout.qLocaleInfo};break}return i});return r})};var d=function t(n,i,a,l,c,d){var f=n.model.layout.qInfo.qType;var p="story"===f||"sheet"===f?f:"object";var h="object"===p?n:n.model;var v=r.snapshot(n.model.id,p,{size:a,source:h,sourceSize:i,sheetLayout:"grid"});var g=u(c,n.model.app.id,d);var m=s.getProperties().then(function(e){return{sheetLogoPosition:e.sheetLogoPosition,sheetLogoThumbnail:e.sheetLogoThumbnail,sheetTitleBgColor:e.sheetTitleBgColor,sheetTitleColor:e.sheetTitleColor,sheetTitleGradientColor:e.sheetTitleGradientColor,rtl:e.rtl}});return e.all([v,g,m]).then(function(t){var n=t[0];var i=t[1];var r=t[2];if(!i)return e.reject();var a=o.getCurrentTheme();var s=i.qUrl;var c=l;c.objTree=n;c.appName=i.appName;c.appId=i.appId;c.appStylingInfo=r;c.localeInfo=i.localeInfo;c.themeName=a;return{qUrl:s,payload:c,snapshotType:p}})};var f={poolPromise:null,printTree:function e(t,n,i,r,o){return d(t,n,i,r).then(function(e){return f.enqueueRequest(e.qUrl,e.payload,e.snapshotType,o,r.timeoutMsec,r.checkInterval)})},getPrintDataForQSC:function t(n,r){var o=e();d(n,null,null,r).then(function(e){var t={imageType:"Jpeg",captureSize:{},images:[{name:"280x375",width:280,height:375,dpi:96,requestId:"?requestId="+i.generateId()},{name:"400x400",width:400,height:400,dpi:96,requestId:"?requestId="+i.generateId()},{name:"fallback",width:1024,height:768,dpi:96,requestId:"?requestId="+i.generateId()}],payload:e.payload,url:e.qUrl+"export/object/image",pollingUrl:e.qUrl+"export/request/status",host:location.host,prefix:a.basePath};o.resolve(t)},function(){o.reject({status:-1})});return o.promise},enqueueRequest:function n(r,o,a,s,l,c){var u=e();this.cancel(s);var d=this.getStates();l=l||36e5;c=c||3e3;var p=l/c;var h=0;var v=i.generateId();var g=r+"export/"+("story"===a?"story":"object")+"/"+s;g=g+"?requestId="+v;var m=t.getService("$http");var b=t.getService("$interval");var y=null;m({url:g,method:"POST",data:o}).then(function(e){var t=e.data;var n=t&&t.requestId;var i=r+"export/request/status?requestId="+n;var o=function e(){m({url:i,method:"GET"}).then(function(e){var t=e.data;h++;if(h>p){b.cancel(y);u.reject({status:d.TIMEOUT});return}if(t&&t.status){var n=t.status;if("Failed"===n||"Canceled"===n){b.cancel(y);u.reject({status:"Canceled"===n?d.CANCELED:d.FAILED})}else if("Completed"===n){b.cancel(y);u.resolve({status:d.COMPLETED,qUrl:t.qUrl})}}else{b.cancel(y);u.reject({status:d.FAILED})}}).catch(function(e,t){b.cancel(y);u.reject({status:d.FAILED,data:e,httpStatusCode:t})})};y=b(o,c);switch(s){case"image":f.poolPromiseImage=y;break;case"pdf":f.poolPromisePdf=y;break;default:f.poolPromise=y}}).catch(function(e,t){u.reject({status:d.FAILED,data:e,httpStatusCode:t})});t.$rootScope.$on("$routeChangeStart",function(){this.cancel()});return u.promise},cancel:function e(n){var i=[];switch(n){case"image":i.push(this.poolPromiseImage);break;case"pdf":i.push(this.poolPromisePdf);break;default:i.push(this.poolPromise,this.poolPromiseImage,this.poolPromisePdf);break}if(i.length>0){var r=t.getService("$interval");i.forEach(function(e){if(e){r.cancel(e);e=null}})}},getStates:function e(){return{NODATA:-4,CANCELED:-3,TIMEOUT:-2,FAILED:-1,IDLE:0,PENDING:1,COMPLETED:2}},printObject:function e(t,n,i,r,o,a,s){return l.setup().then(function(e){return d(n,r,o,a,t,e.isPersonalMode?null:i).then(function(e){return f.enqueueRequest(e.qUrl,e.payload,e.snapshotType,s,void 0,void 0)})})}};return f}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92)],r=function(e){var t;t=e.extend("SelectionToolbar",{menuButtons:[],init:function e(t,n,i,r,o,a){o=o||[];this.menuButtons=a||[];var s=[];this.backendApi=t;this.selectionsApi=n;this.showMenu=i;this.showLock=r;o&&o.length&&s.push({clazz:"sel-toolbar-separator",buttonClass:"sel-toolbar-icon-separator",isDisabled:function e(){return true}});s.push({name:"Tooltip.CancelSelections",tid:"selection-toolbar.undo",isIcon:false,iconClass:"lui-icon lui-icon--close",buttonClass:"sel-toolbar-cancel",action:function e(){this.selectionsApi.cancel()}});s.push({name:"Tooltip.ConfirmSelections",tid:"selection-toolbar.refresh",iconClass:"lui-icon lui-icon--tick",buttonClass:"sel-toolbar-confirm",action:function e(){this.selectionsApi.confirm()},isDisabled:function e(){return!this.selectionsApi.selectionsMade}});this.buttons=o.concat(s)},hasState:function e(t){if(!t)return true;var n=this.backendApi.getDimensionInfos();for(var i=0;i<n.length;++i)for(var r=0;r<t.length;++r)if(n[i].qStateCounts[t[r]]>0)return true;return false}});return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(413)],r=function(e){function t(e,t,n,i){0===arguments.length?this.set(0,0,0,0):2===arguments.length?this.set(e.x,e.y,t.x,t.y):this.set(e,t,n,i)}t.prototype={toString:function e(){return this.x1+" "+this.y1+" "+this.x2+" "+this.y2},clone:function e(){return new t(this.x1,this.y1,this.x2,this.y2)},set:function e(t,n,i,r){this.x1=t;this.y1=n;this.x2=i;this.y2=r},intersectsLine:function t(n){return e.checkLineSegmentIntersectingLineSegment(this.getPoints(),n.getPoints())},intersectsRect:function e(n){return this.intersectsLine(new t(n.x,n.y,n.x+n.width,n.y))||this.intersectsLine(new t(n.x+n.width,n.y,n.x+n.width,n.y+n.height))||this.intersectsLine(new t(n.x,n.y+n.height,n.x+n.width,n.y+n.height))||this.intersectsLine(new t(n.x,n.y,n.x,n.y+n.height))},getPoints:function e(){var t=[];t.push({x:this.x1,y:this.y1});t.push({x:this.x2,y:this.y2});return t}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(91),n(135),n(213),n(560),n(437)],r=function(e,t,n,i,r){var o=false;function a(e,t){return"ErrorDialog.AppClosed"===e.message||"ProxyError.OnNoEngineAvailable"===e.message||"OnEngineWebsocketFailed"===e.method||e.code===t.LOCERR_APP_NOT_FOUND||e.code===t.LOCERR_APP_CONNECT_FAILED}function s(i){var o=e.getService("qvConfirmDialog").show({message:c(t.get("ErrorDialog.Title"),r.getErrorDescription(i)),okLabel:t.get("Common.Refresh"),cancelLabel:t.get("ErrorDialog.GoToHub.Button"),closeOnEscape:false});o.closed.then(function(e){e?r.refreshPage():location.href=n.buildHubUrl()});return o}function l(n){e.getService("clientSections").get(function(e){e.HubSection_Home?s(n):u(t.get("ErrorDialog.Title"),r.getErrorDescription(n))})}function c(e,t){return'<h2 class="inline-title">'+e+"</h2><span>"+t+"</span>"}function u(n,i){var a=e.getService("qvAlertDialog").show({message:c(n,i),closeLabel:t.get("Common.Refresh"),closeOnEscape:false});a.closed.then(function(){o=false;r.refreshPage()});return a}function d(i,a){var s=n.isSuffixInUse("noData");var l=e.getService("qvAlertDialog").show({message:c(i,a),closeLabel:t.get(s?"Dialog.Button.Open.With.Data":"Dialog.Button.Open.Without.Data"),closeOnEscape:false});l.closed.then(function(){o=false;if(s)n.removePartialSuffix("noData");else{var e=location.href;var t=e.lastIndexOf("/")===e.length-1;var i="noData/true";t||(i="/"+i);n.setUrl(e+i)}r.refreshPage()});return l}function f(n,i,a){var s=c(n,i);var l=e.getService("qvAlertDialog").show({message:s,closeOnEscape:true,keepOpen:a||false});l.closed.then(function(){o=false;e.$rootScope.$broadcast("errorHandlerClosed",s,{name:t.get("Common.Refresh"),callback:r.refreshPage})});return l}function p(n,i){var a=c(n,i);var s=e.getService("qvConfirmDialog").show({message:a,okLabel:t.get("Common.Refresh"),cancelLabel:t.get("Common.Close"),closeOnEscape:true});s.closed.then(function(n){o=false;n?r.refreshPage():e.$rootScope.$broadcast("errorHandlerClosed",a,{name:t.get("Common.Refresh"),callback:r.refreshPage})});return s}function h(e){return o||e.code===r.errors.LOCERR_JSON_RPC_INVALID_PARAMETERS}function v(e,n){if(h(e))return;o=true;t.ready.then(function(){if(a(e,r.errors))l(e);else if(r.isLocErr(e,r.errors))p(t.get("ErrorDialog.Title"),r.getErrorDescription(e));else if(e.code===r.errors.LOCERR_GENERIC_CONNECTION_LOST)u(t.get("ErrorDialog.Title"),r.getErrorDescription(e));else if(e.code===r.errors.LOCERR_PERSONAL_VERSION_EXPIRED){var o=t.get("Info.QlikView.Personal.Upgrade",["<a href='"+i.personalUpgradeUrl+"' target='_blank'>"+i.personalUpgradeBase+"</a>"]);u(t.get("ErrorCode.12001.Sense.Desktop.Expired"),o)}else"ProxyError.OnSessionTimedOut"===e.message?u(t.get("TimeoutDialog.Title"),r.getErrorDescription(e)):e.code===r.errors.LOCERR_APP_ALREADY_OPEN_IN_DIFFERENT_MODE?d(t.get("ErrorDialog.Title"),r.getErrorDescription(e)):e.refreshButton?u(t.get("ErrorDialog.Title"),r.getErrorDescription(e)):f(t.get("ErrorDialog.Title"),r.getErrorDescription(e),n)})}function g(e){var t=e.error;var n=e.keepOpen;var i=t.type;if(h(t))return;o=true;if("refreshDialog"===i)return u(t.title,t.message);if("refreshCloseDialog"===i)return p(t.title,t.message);return f(t.title,t.message,n)}return{showDialog:v,showDialogReact:g,isOpen:function e(){return o}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(102),n(94),n(50)],r=function(e,t,n){var i={},r,o,a,s,l;i.ViewMode={grid:0,list:1};i.NavigationMode={sheet:"sheet",bookmark:"bookmark",story:"story"};r=i.ViewMode.grid;o=i.NavigationMode.sheet;l=r;a=false;e.mixin(i);i.notification("ViewModeChanged");i.notification("NavigationModeChanged");i.notification("AddingItemChanged");i.setViewMode=function(e){if(e!==r){r=e;i.ViewModeChanged.emit(r)}};i.setNavigationMode=function(e){if(e!==o){o=e;i.NavigationModeChanged.emit(o)}};i.setAddingItem=function(e){if(e!==a){a=e;i.AddingItemChanged.emit(a)}};i.setDuplicatingItem=function(e){e!==s&&(s=e)};t.StateChanged.bind(function(e){e===t.Views.sheet?i.setNavigationMode(i.NavigationMode.sheet):e===t.Views.story&&i.setNavigationMode(i.NavigationMode.story)});n.ViewChanged.bind(function(e){e&&(l=r)});Object.defineProperties(i,{viewMode:{get:function e(){return r}},navigationMode:{get:function e(){return o}},viewModeBeforeEnterSmallDevice:{get:function e(){return l}},addingItem:{get:function e(){return a}},duplicatingItem:{get:function e(){return s}}});return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(54),n(92)],r=function(e,t){var n=t.extend("ClassificationModel",{spec:null,init:function e(t){this.spec=t},getDataTypes:function t(n,i){var r=this._getFields(n,i);var o=[];o=r.map(function(e){return e.recommendedDataType||e.dataType});return e.uniq(o)},getClassifications:function t(n,i){var r=this._getFields(n,i);var o=r.map(function(e){return e.classifications});o=e.flatten(o);return e.uniq(o)},getDefaultAggregation:function e(t,n){var i=this._getFields(t,n);return i[0].defaultAggregation},_getFields:function t(n,i){var r=[];i.forEach(function(t){var i=e.findWhere(this.spec.datasets,{name:t});if(i){var o=e.findWhere(i.fields,{name:n});o&&r.push(o)}}.bind(this));return r}});return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(173),n(89),n(93)],r=function(e,t,n){function i(e){return e?t.resolve(e.enigmaModel):n.getApp()}var r={},o=500;r.getLibraryContent=function(e,t){return i().then(function(n){return n.getSnapshotListObject().then(function(n){n.Invalidated&&n.Invalidated.unbind();n.Invalidated.bind(t);return n.getLayout().then(function(t){return t.filter(function(t){var n=true;e&&(n=e===t.qData.sourceObjectId);return!t.qData.isClone&&n})})})})};r.unbindList=function(){return i().then(function(e){return e.getSnapshotListObject().then(function(e){e.Invalidated.unbind()})})};r.getSnapshotCount=function(e){return i().then(function(t){return t.getSnapshotList().then(function(t){var n=0;for(var i=0;i<t.length;i++)t[i].qData.isClone||t[i].qData.sourceObjectId!==e||n++;return n})})};r.create=function(t,n){t&&(t.qInfo={qType:"snapshot"});return i().then(function(i){return i.getSnapshotList().then(function(i){var a=0;for(var s=0;s<i.length;s++)i[s].qData.isClone||a++;var l=a<o;return!!l&&e.create.call(r,t,n).then(function(e){return{limit:l,id:e.id}})})})};r.get=function(t,n){return e.get(t,n)};r.remove=function(t,n){return e.remove(t,n)};r.getEmbedded=function(e){return e.enigmaModel.getSnapshotObject()};return r}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(110),n(91)],r=function(e,t){var n=e.NxLocalizedErrorCode;function i(e){return"ErrorCode."+e}return{getDimensionError:function e(r){var o;o=r===n.LOCERR_CALC_INVALID_DEF?"Object.ErrorMessage.InvalidDimension":r===n.LOCERR_CALC_NOT_IN_LIB?"Object.ErrorMessage.MissingDimension":i(r);return t.get(o)},getMeasureError:function e(r){var o;o=r===n.LOCERR_CALC_INVALID_DEF?"Object.ErrorMessage.InvalidMeasure":r===n.LOCERR_CALC_NOT_IN_LIB?"Object.ErrorMessage.MissingMeasure":i(r);return t.get(o)},getHyperCubeError:function e(n){var r=i(n);return t.get(r)},getListObjectError:function e(n){var r=i(n);return t.get(r)}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(96),n(92),n(102),n(164)],r=function(e,t,n,i){var r=e(document),o=[],a="chart-interaction";function s(e){return a+"."+e}function l(e,t){return e.priority-t.priority}function c(e,t){if(e.filter(function(e){return e.target===t.target&&e.container===t.container}).length)return null;t.priority=Number.isNaN(+t.priority)?0:t.priority;e.push(t);e.sort(l);return t}function u(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}function d(e,t,n){return e.filter(function(e){return e[n]===t})}var f={tap:{containers:[]},taptwo:{containers:[]},tapthree:{containers:[]},swipe:{containers:[]},swipetwo:{containers:[]},wheelswipe:{containers:[]},rotate:{containers:[]}};var p={mousemove:{containers:[]},mouseleave:{containers:[]},mousewheel:{containers:[]},mouseup:{containers:[]}};function h(e,n,i){var r=e.gesture,o=e.action,a=e.item.targets,s;for(var l=0;l<a.length;l++){s=a[l].target;if(s.active(a[l].data)){s.preventDefault&&("touchmove"===n.type||"touchstart"===n.type||"touchend"===n.type?t.WebkitHack.prevent():n.preventDefault());s[r][o]&&s[r][o].apply(this,[n,i,a[l].data]);if(s.exclusive())break}}}function v(e,t,n){var i=e.gesture,r=e.item.targets,o;for(var a=0;a<r.length;a++){o=r[a].target;if(o.active()){o.preventDefault&&t.preventDefault();o[i].apply(this,[t,n,r[a].data]);if(o.exclusive&&o.exclusive())break}}}function g(e,t){e.handlers.start=function(n,i){h.apply(this,[{gesture:t,action:"start",item:e},n,i])};e.handlers.end=function(n,i){h.apply(this,[{gesture:t,action:"end",item:e},n,i])};if(["swipe","swipetwo","wheelswipe","rotate"].contains(t)){e.handlers.update=function(n,i){h.apply(this,[{gesture:t,action:"update",item:e},n,i])};e.handlers.cancel=function(n,i){h.apply(this,[{gesture:t,action:"cancel",item:e},n,i])}}}function m(e,t){var n={id:s(t),options:{preventDefault:false}};Object.keys(e.handlers).forEach(function(t){n[t]=e.handlers[t]});switch(t){case"swipe":n.options.useMomentum=true;n.options.inertia=.5;case"tap":n.options.touches=1;break;case"swipetwo":n.options.useMomentum=true;n.options.inertia=.5;case"taptwo":n.options.touches=2;break;case"tapthree":n.options.touches=3;break;case"wheelswipe":case"rotate":default:break}return n}function b(e){switch(e){case"taptwo":case"tapthree":return"tap";case"swipetwo":return"swipe";case"tap":case"swipe":case"wheelswipe":case"rotate":default:return e}}function y(e,n){var i=f[n].containers.filter(function(t){return t.container===e.container})[0];if(!i){i={container:e.container,targets:[],handlers:{}};g(i,n);i.unbind=t(e.container)[b(n)](m(i,n));f[n].containers.push(i)}c(i.targets,e);return i}function x(t,n){var i=p[n].containers.filter(function(e){return e.container===t.container})[0];if(!i){i={container:t.container,targets:[],handler:null};i.handler=function(e){v.apply(this,[{gesture:n,item:i},e])};var r=n+"."+a+("mousewheel"===n?" DOMMouseScroll."+a:"");var o=e(t.container);o.on(r,i.handler);i.unbindJqueryEvents=function(){o.off(r,i.handler)}}c(i.targets,t);return i}function S(e){switch(e){case"tap":case"swipe":case"taptwo":case"swipetwo":case"wheelswipe":case"tapthree":case"rotate":return"touche";case"mousemove":case"mouseleave":case"mousewheel":case"mouseup":return"jquery";default:break}}var w=n.extend({init:function e(){i.mixin(this);this.notification("ShiftToggle");this.notification("CtrlToggle");this.notification("KeyPressed");this.notification("MouseUp");this.notification("MouseLeave");r.on("keydown."+a,function(e){if(16!==e.which||this.shiftPressed){if(17===e.which&&!this.ctrlPressed){this.ctrlPressed=true;this.CtrlToggle.emit(this.ctrlPressed)}}else{this.shiftPressed=true;this.ShiftToggle.emit(this.shiftPressed)}}.bind(this));r.on("keyup."+a,function(e){if(16===e.which&&this.shiftPressed){this.shiftPressed=false;this.ShiftToggle.emit(this.shiftPressed)}else if(17===e.which&&this.ctrlPressed){this.ctrlPressed=false;this.CtrlToggle.emit(this.ctrlPressed)}this.KeyPressed.emit(e.which)}.bind(this));r.on("mouseup."+a,function(e){this.MouseUp.emit(e)}.bind(this));r.on("mouseleave."+a,function(e){this.MouseLeave.emit(e)}.bind(this));this.shiftPressed=false;this.ctrlPressed=false},addInteraction:function e(t,n,i,r,a){var s=c(o,{target:t,container:n,priority:i,types:{},data:a});if(!s)throw new Error("Duplicate add of interaction, potential leak detected.");r.forEach(function(e){if(!t[e])throw new Error("Interaction reciver does not implement the specified interaction type: "+e);switch(e){case"tap":case"taptwo":case"swipe":case"swipetwo":case"wheelswipe":case"tapthree":case"rotate":s.types[e]=y(s,e);break;case"mousewheel":case"mousemove":case"mouseleave":case"mouseup":s.types[e]=x(s,e);break;default:throw new Error("The specified interaction type does not exist: "+e)}})},removeInteraction:function e(n,i){var r=d(o,n,"target");i&&(r=d(r,i,"container"));r&&r.length&&r.forEach(function(e){Object.keys(e.types).forEach(function(n){var i=e.types[n];u(i.targets,e);if(!i.targets.length)if("touche"===S(n)){t(i.container).off("*",s(n));u(f[n].containers,i)}else i.unbindJqueryEvents()});u(o,e)})},removeAllInteraction:function e(){Object.keys(f).forEach(function(e){f[e].containers.forEach(function(n){t(n.container).off("*",s(e))});f[e].containers=[]});o=[]}});var q=new w;return{ShiftToggle:q.ShiftToggle,CtrlToggle:q.CtrlToggle,KeyPressed:q.KeyPressed,MouseUp:q.MouseUp,MouseLeave:q.MouseLeave,addInteraction:q.addInteraction,removeInteraction:q.removeInteraction,removeAllInteraction:q.removeAllInteraction,preventGestures:function e(n){if(!n.gestureHandler)throw new Error("Interaction.js, preventGestures: Called with invalid binder");t.preventGestures(n.gestureHandler)},_unitTestExposure:{toucheHandlers:f}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(92),n(89),n(93),n(90),n(183),n(182)],r=function(e,t,n,i,r,o,a){var s;e.service("classificationService",[function(){var e=t.extend("ClassificationService",{init:function e(){},_errorHandler:function e(t){this._deferredClassificationResult.reject(t)},_getAPI:function e(){s||(s=o.getApi("api/dataprepservice/v1","openapi",void 0,void 0,void 0,void 0,a.getServerNodeId()));return s},_getAppName:function e(){return r.getParameterByName("app")},_waitForLoadComplete:function e(t){var i=new n;this._progressIntervalTimer=setInterval(function(){t.global.getProgress(0).then(function(e){if(e.qFinished){i.resolve(true);clearInterval(this._progressIntervalTimer)}}.bind(this))}.bind(this),1e3);return i.promise},_getClassification:function e(t,i){return t.getAppProperties().then(function(e){if(!this._deferredClassificationResult||e.qLastReloadTime!==this._appLastReload){this._appLastReload=e.qLastReloadTime;this._deferredClassificationResult=new n;this._waitForLoadComplete(t).then(function(){i.apis.model.getClassification({appId:r.getParameterByName("app")}).then(function(e){this._deferredClassificationResult.resolve(e.obj.response)}.bind(this)).catch(this._errorHandler.bind(this))}.bind(this))}return this._deferredClassificationResult.promise}.bind(this))},getClassification:function e(){return this._getAPI().then(function(e){return i.getApp().then(function(t){return this._getClassification(t,e).then(function(e){return e})}.bind(this))}.bind(this)).catch(this._errorHandler.bind(this))}});return new e}])}.apply(t,i),void 0!==r&&(e.exports=r))},,,function(e,t,n){"use strict";var i,r;!(i=[n(90),n(48),n(91),n(203)],r=function(e,t,n,i){var r="M4,5.84027778 L4,3 L1.2,3 C1.08954305,3 1,3.08954305 1,3.2 L1,12.8 C1,12.9104569 1.08954305,13 1.2,13 L4,13 L4,6.72152812 C3.36593141,6.95951806 2.69926475,7.31160128 2,7.77777778 C2.66666667,6.94444444 3.33333333,6.29861111 4,5.84027778 Z M5,6.43553932 L5,13 L14.8,13 C14.9104569,13 15,12.9104569 15,12.8 L15,3.2 C15,3.08954305 14.9104569,3 14.8,3 L5,3 L5,5.29340278 C6.96296296,4.49594907 8.92592593,5.32407407 10.8888889,7.77777778 C10.8888889,7.77777778 11.2592593,7.40740741 12,6.66666667 L12,10 L8.66666667,10 C9.40740741,9.25925926 9.77777778,8.88888889 9.77777778,8.88888889 C8.52447243,6.88360034 6.93187984,6.06581715 5,6.43553932 Z M1,2 L15,2 C15.5522847,2 16,2.44771525 16,3 L16,13 C16,13.5522847 15.5522847,14 15,14 L1,14 C0.44771525,14 6.76353751e-17,13.5522847 0,13 L0,3 C-6.76353751e-17,2.44771525 0.44771525,2 1,2 Z";var o=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;function a(e,t,n){this.offsetX=e;this.offsetY=t;this.elem=n}a.prototype.update=function(e,t){var n={x:e.pageX+this.offsetX,y:e.pageY+this.offsetY},i=this.elem;t&&t.snapToGrid&&t.snapToGrid.snapFunc(e,t,n,i);if(o){i.style.left=n.x+"px";i.style.top=n.y+"px"}else{var r="translate3d("+n.x+"px, "+n.y+"px, 0)";i.style.transform=r;i.style.webkitTransform=r;i.style.mozTransform=r;i.style.msTransform=r}};a.prototype.end=function(){this.elem.parentNode.removeChild(this.elem)};function s(e,t,n,i,r){if(e[n]&&e[n][t.type])return e[n][t.type].call(null,i,r);if("function"===typeof e[n])return e[n].call(null,i,r)}function l(e,t,n,i){this.info=e;this.handle=t;this.targets=n;this.scrollComponents=i;this.rects=[];this.scrollRects=[];var r=document.body.getBoundingClientRect();this.docRect=r;var o=document.createElement("canvas");this.canvas=o;o.style.position="absolute";o.style.left=(window.pageXOffset||0)+"px";o.style.top=(window.pageYOffset||0)+"px";o.style.zIndex=999;o.width=r.width;o.height=r.height;o.classList.add("drag-and-drop-canvas");document.body.appendChild(o);this.context=o.getContext("2d")}function c(e,t,n,i){if(e.setLineDash){e.setLineDash(i);e.moveTo(d(t.x),d(t.y));e.lineTo(d(n.x),d(n.y));e.stroke()}else{i=i||[2,4];var r=i.length,o=n.x-t.x,a=n.y-t.y,s=Math.sqrt(o*o+a*a),l=s,c=0,u=true,f,p=t.x,h=t.y;o/=s;a/=s;e.moveTo(d(p),d(h));for(c=0;l>=.1&&c<5e3;++c){f=i[c%r];0===f&&(f=.001);f>l&&(f=l);p+=f*o;h+=f*a;e[u?"lineTo":"moveTo"](d(p),d(h));l-=f;u=!u}}}function u(e,t,n){return e.left<=t&&t<=e.right&&e.top<=n&&n<=e.bottom}function d(e){return Math.round(e)}function f(e,t,n,i){n=n||[5];if(e.setLineDash&&!i){e.setLineDash(n);e.strokeRect(d(t.left),d(t.top),d(t.right-t.left),d(t.bottom-t.top))}else{var r=e.lineWidth/2;e.beginPath();var o={x:t.left+r,y:t.top+r},a={x:t.right-r,y:t.top+r},s={x:t.right-r,y:t.bottom-r},l={x:t.left+r,y:t.bottom-r};i.top||c(e,o,a,n);i.right||c(e,a,s,n);i.bottom||c(e,s,l,n);i.left||c(e,l,o,n);e.stroke()}}function p(e,t,n,i,r){var o=e.lineWidth+4;e.beginPath();e.rect(t.left+o,t.top+o,t.right-t.left-2*o,t.bottom-t.top-2*o);e.fillStyle=n?i||r?"rgba(242,242,242,1)":"rgba(242,242,242,0.9)":"rgba(0,0,0,0.05)";e.fill()}function h(e,t,i,o,a){var s=t.right-t.left,l=t.bottom-t.top,c=t.left+s/2,u=t.top+l/2;if(s>40&&l>40){var d="gridcell"!==i&&(o||a)?"DropZone.CreateChart":"DropZone.DropItem",f=n.get(d),p="bold 13px QlikView Sans";e.fillStyle="#404040";e.textAlign="center";if(v(f,p,s)&&l>60){e.save();e.translate(c-8,u-14);e.fill(new Path2D(r));e.restore();e.font=p;e.fillText(f,c,u+18);return}e.save();e.translate(c-8,u+14);e.fill(new Path2D(r));e.restore()}}function v(e,t,n){var r=i.measureTextObject({type:"text",shape:{text:e,font:t,maxWidth:n-12,align:"center",maxNumLines:1}});return!r.truncated}function g(t,n,i){i.rects=[];for(var r=0;r<t.length;++r)s(t[r],n,"start",i);i.rects.sort(function(t,n){return e.compare(n.prio,t.prio)})}l.prototype.start=function(){var e=this.targets;var n=this.info;g(e,n,this);var i=this.scrollComponents;for(var r=0;r<i.length;++r)s(i[r],n,"start",this);t.$rootScope.$apply()};l.prototype.update=function(t){t.preventDefault();var n=t.pageX;var i=t.pageY;this.handle.update(t,this.info);var r;var o;var a=this.scrollRects;var l;var c;for(c=0;c<a.length;++c){r=a[c].targetRect;o=u(r,n,i);if(o){l=a[c];break}}this.scroller&&s(this.scroller,this.info,"leave",l,t);var d=!!l&&s(l,this.info,"enter",l,t);if(d){this.activeRect&&s(this.activeRect,this.info,"leave",this.info);this.context.clearRect(0,0,this.docRect.width,this.docRect.height);this.activeRect=null;this.scroller=l;return}if(this.scroller){g(this.targets,this.info,this);this.scroller=false}var v=this.rects;var m=null;for(c=0;c<v.length;++c){var b=v[c].targetRect;r=e.isFunction(b)?b():b;o=u(r,n,i);if(o){m=v[c];break}}if(m!==this.activeRect){this.activeRect&&s(this.activeRect,this.info,"leave",this.info);var y=this.context;var x=this.docRect;y.clearRect(0,0,x.width,x.height);if(m){y.strokeStyle="#F7A24D";y.lineWidth=2;var S=m.drawRect;if(S){var w=void 0!==m.isEmpty,q=1===m.prio;f(y,S,[5],m.ignoreLines);p(y,S,w,m.isEmpty,q);w&&h(y,S,this.info.type,m.isEmpty,q)}s(m,this.info,"enter",this.info)}}this.activeRect=m};l.prototype.registerDropRect=function(e){e.prio=e.prio||0;this.rects.push(e)};l.prototype.registerScrollRect=function(e){this.scrollRects.push(e)};l.prototype._end=function(){for(var e=0;e<this.targets.length;++e)s(this.targets[e],this.info,"end",this);document.body.removeChild(this.canvas);this.handle.end();this.ended=true;t.$apply(t.$rootScope)};l.prototype.end=function(e){this.activeRect&&s(this.activeRect,this.info,"drop",this.info,e);this._end()};l.prototype.cancel=function(){this._end()};var m=[];var b=[];var y;return{registerScrollComponent:function e(t){var n=b.indexOf(t);-1===n&&b.push(t)},unregisterScrollComponent:function e(t){var n=b.indexOf(t);-1!==n&&b.splice(n,1)},registerDropTarget:function e(t){var n=m.indexOf(t);-1===n&&m.push(t)},unregisterDropTarget:function e(t){var n=m.indexOf(t);-1!==n&&m.splice(n,1)},startDrag:function e(t,n){if(y&&!y.ended)return false;t.style.position="absolute";t.style.left="0";t.style.top="0";t.style.zIndex=9999;document.body.appendChild(t);var i=t.getBoundingClientRect();var r=new a(-i.width/2,-i.height/2,t);var o=m.filter(function(e){return s(e,n,"accept",n)});var c=b.filter(function(){return true});y=new l(n,r,o,c);try{y.start();return y}catch(e){y.cancel();return false}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(384)],r=function(e){return{isContinuousChart:function t(n){if(!n.qHyperCube)return false;var i=this.canBeContinuousChart(n),r=e.isTimeDimension(i,n.qHyperCube.qDimensionInfo[0]),o="linechart"===n.visualization||n.qHyperCube.qMeasureInfo.some(function(e){return e.series&&"line"===e.series.type}),a=false;a=n.dimensionAxis&&n.dimensionAxis.continuousAuto?r&&o:i&&n.preferContinuousAxis;return a},canBeContinuousChart:function e(t){if(!t.qHyperCube||t.qHyperCube.qDimensionInfo.length<1)return false;var n=t.qHyperCube.qDimensionInfo[0].qTags||[];return t.qHyperCube.qDimensionInfo[0].qContinuousAxes&&n.indexOf("$numeric")>=0}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(90),n(91)],r=function(e,t,n){var i,r;r="Not supported in this object, need to implement in subclass.";i=e.extend({init:function e(t){t=t||{};this.dimensionDefinition=t.dimensionDefinition||{max:0};this.measureDefinition=t.measureDefinition||{max:0};t.dimensionDefinition&&(this.dimensionProperties=t.dimensionProperties||{});t.measureDefinition&&(this.measureProperties=t.measureProperties||{});t.globalChangeListeners&&(this.globalChangeListeners=t.globalChangeListeners);t.addDimensionLabel&&(this.addDimensionLabel=t.addDimensionLabel);this.app=t.app},setProperties:function e(t){this.properties=t},setGlobalChangeListeners:function e(t){this.globalChangeListeners=t},setLayout:function e(t){this.layout=t},type:function e(){throw new Error("Must override this method")},getDimensions:function e(){return[]},getDimension:function e(t){var n=this.getDimensions(),i=0;for(i;i<n.length;++i)if(n[i].qDef.cId===t)return n[i];return null},minDimensions:function e(){if("function"===typeof this.dimensionDefinition.min)return this.dimensionDefinition.min.call(null,this.properties,this);return this.dimensionDefinition.min||0},maxDimensions:function e(t){t=t||0;if("function"===typeof this.dimensionDefinition.max)return this.dimensionDefinition.max.call(null,this.getMeasures().length-t);return Number.isNaN(+this.dimensionDefinition.max)?1e4:this.dimensionDefinition.max},canAddDimension:function e(){return this.getDimensions().length<this.maxDimensions()},minMeasures:function e(){if("function"===typeof this.measureDefinition.min)return this.measureDefinition.min.call(null,this.properties,this);return this.measureDefinition.min||0},maxMeasures:function e(t){t=t||0;if("function"===typeof this.measureDefinition.max)return this.measureDefinition.max.call(null,this.getDimensions().length-t);return Number.isNaN(+this.measureDefinition.max)?1e4:this.measureDefinition.max},canAddMeasure:function e(){return this.getMeasures().length<this.maxMeasures()},getMeasures:function e(){return[]},getLabels:function e(){return[]},getMeasure:function e(t){var n=this.getMeasures(),i=0;for(i;i<n.length;++i)if(n[i].qDef.cId===t)return n[i];return null},addDimension:function e(){throw r},getSorting:function e(){throw r},addFieldDimension:function e(t,n,i){var r=this.createFieldDimension(t,n,i);return this.addDimension(r)},addLibraryDimension:function e(t,n){var i=this.createLibraryDimension(t,n);return this.addDimension(i)},addMeasure:function e(){throw r},addExpressionMeasure:function e(t,n,i){var r=this.createExpressionMeasure(t,n,i);return this.addMeasure(r)},addLibraryMeasure:function e(t,n){var i=this.createLibraryMeasure(t,n);return this.addMeasure(i)},addAlternativeFieldDimension:function e(t,n,i){var r=this.createFieldDimension(t,n,i);return this.addDimension(r,true)},addAlternativeLibraryDimension:function e(t,n){var i=this.createLibraryDimension(t,n);return this.addDimension(i,true)},addAlternativeExpressionMeasure:function e(t,n,i){var r=this.createExpressionMeasure(t,n,i);return this.addMeasure(r,true)},addAlternativeLibraryMeasure:function e(t,n){var i=this.createLibraryMeasure(t,n);return this.addMeasure(i,true)},replaceDimension:function e(){throw r},replaceMeasure:function e(){throw r},autoSortDimension:function e(){throw r},autoSortMeasure:function e(){throw r},createFieldDimension:function e(n,i,r){var o=t.extend(true,{},this.dimensionProperties||{},r||{});o.qDef||(o.qDef={});o.qOtherTotalSpec||(o.qOtherTotalSpec={});if(n){o.qDef.qFieldDefs=[n];o.qDef.qFieldLabels=i?[i]:[""];o.qDef.qSortCriterias=[{qSortByLoadOrder:1}]}else{o.qDef.qFieldDefs=[];o.qDef.qFieldLabels=[];o.qDef.qSortCriterias=[]}o.qDef.autoSort=true;return o},createLibraryDimension:function e(n,i){var r=t.extend(true,{},this.dimensionProperties||{},i||{});r.qDef||(r.qDef={});r.qOtherTotalSpec||(r.qOtherTotalSpec={});r.qLibraryId=n;r.qDef.qSortCriterias=[{qSortByLoadOrder:1}];r.qDef.autoSort=true;delete r.qDef.qFieldDefs;delete r.qDef.qFieldLabels;return r},createExpressionMeasure:function e(n,i,r){var o=t.extend(true,{},this.measureProperties||{},r||{});o.qDef||(o.qDef={});o.qDef.qNumFormat||(o.qDef.qNumFormat={});o.qDef.qDef=n;o.qDef.qLabel=i;o.qDef.autoSort=true;return o},createLibraryMeasure:function e(n,i){var r=t.extend(true,{},this.measureProperties||{},i||{});r.qDef||(r.qDef={});r.qDef.qNumFormat||(r.qDef.qNumFormat={});r.qLibraryId=n;r.qDef.autoSort=true;delete r.qDef.qDef;delete r.qDef.qLabel;return r},updateGlobalChangeListeners:function e(){this.globalChangeListeners&&(this.globalChangeListeners||[]).forEach(function(e){e&&"function"===typeof e&&e(this.properties,this)}.bind(this))},removeDimension:function e(){throw r},removeMeasure:function e(){throw r},moveDimension:function e(){throw r},moveMeasure:function e(){throw r},changeSorting:function e(){throw r},getAddDimensionLabel:function e(){return this.addDimensionLabel||n.get("Visualization.Requirements.AddDimension")}});return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(48),n(140),n(110),n(132),n(230),n(422),n(91),n(628),n(630),n(631),n(334),n(336),n(158),n(632),n(648),n(649),n(113)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v,g,m){var b=i.NxLocalizedErrorCode;var y,x,S={},w;function q(e){this.fieldCache={};this.stateCache={};Object.defineProperties(this,{id:{value:e.id},model:{value:e}});e.session&&Object.defineProperties(this,{global:{value:new d(e.session)},bookmark:{value:new c(e)},variable:{value:new u(e,this)},visualization:{value:new h(this)}});Object.defineProperties(this,{theme:{value:new g(e)}});e.rpcOptions&&e.rpcOptions.qEvent&&(this.qEvent=e.rpcOptions.qEvent);this.getAppLayout()}q.prototype.clearAll=function(e,t){return p.appDoIt(this.model,"clearAll",[e||false,t||"$"])};q.prototype.back=function(){return p.appDoIt(this.model,"back")};q.prototype.forward=function(){return p.appDoIt(this.model,"forward")};q.prototype.lockAll=function(e){return p.appDoIt(this.model,"lockAll",[e||"$"])};q.prototype.unlockAll=function(e){return p.appDoIt(this.model,"unlockAll",[e||"$"])};function C(t,n){var i=n||new e;t.getLayout().then(function(){i.resolve(t)},function(e){i.reject(e)});return i.promise}q.prototype.getObject=function(t,n,i){var o,a,l=this.model;var c=this;if(!n){n=t;t=void 0}o=new e;l.waitForOpen.promise.then(function(){if("CurrentSelections"===n){if(t){var u=i||{};u.currentSelections=true;a=p.showVisualization(t,null,u,l)}r.get(l).then(function(e){e.close=function(){return p.clearElement(t,a)};o.resolve(e)})}else if("AppNavigationBar"===n&&m["ODAG_MASHUP"]){var d=i||{};i.app=l;d.showNavigationToolbar=true;a=p.showVisualization(t,i,d,l);o.resolve()}else l.enigmaModel.getObject(n).then(function(n){return C(n).then(function(n){var r;if(t){r=new e;a=p.showVisualization(t,n,i,l);n.close=function(){n.Closed.emit();return r.promise};n.Closed.once(function(){p.clearElement(t,a).then(function(){r.resolve()})})}C(n,o)})},function(e){e.error&&e.error.code===b.LOCERR_GENERIC_NOT_FOUND&&(e={message:s.get("Object not found"),code:e.error.code});if(c.qEvent&&c.qEvent.hasHandlers("error")){c.qEvent.emit("error",e);e.isHandled=true}else if(y){y(e);e.isHandled=true}o.reject(e)})},function(){o.reject()});return o.promise};q.prototype.getSnapshot=function(e,t){if(!t){t=e;e=void 0}var n=this.model;return n.waitForOpen.promise.then(function(){return o.get(t,n).then(function(t){e&&p.showVisualization(e,t.enigmaModel,{APIType:a,noInteraction:true},n);return t.getLayout().then(function(){return t})})})};q.prototype.getObjectProperties=function(e){var t=this.model;return t.waitForOpen.promise.then(function(){return t.enigmaModel.getObject(e)}).then(function(e){return e.getProperties().then(function(){return e})})};q.prototype.getFullPropertyTree=function(e){var t=this.model;return t.waitForOpen.promise.then(function(){return t.enigmaModel.getObject(e)}).then(function(e){return e.getFullPropertyTree().then(function(t){e.propertyTree=t;return e})})};q.prototype.createGenericObject=function(t,n){var i=this;return i.model.waitForOpen.promise.then(function(){var e=n?function(e){n(e,i)}:function(){};p.setDefaultId(t);return i.model.enigmaModel.getOrCreateSessionObject(t).then(function(t){t.Invalidated.bind(function(){t.getLayout().then(e)});t.close=function(){return i.destroySessionObject(t.id).then(function(){t.emit("closed",t);return t})};t.Closed.bind(function(){i.model.enigmaModel._listCache&&i.model.enigmaModel._listCache[this.id]&&delete i.model.enigmaModel._listCache[this.id]});return t.getLayout().then(function(n){e(n);return t})},function(e){if(y){y(e.error,i);e.error.isHandled=true}})},function(){return e.reject()})};q.prototype.destroySessionObject=function(e){return p.appDoIt(this.model,"destroySessionObject",[e])};q.prototype.createCube=function(e,t){return this.createGenericObject({qHyperCubeDef:e},t)};q.prototype.createList=function(e,t){return this.createGenericObject({qListObjectDef:e},t)};q.prototype.getList=function(e,t){return this.createGenericObject(p.getDefaultListParam(e),t)};q.prototype.getAppObjectList=function(e,t){if(!t){t=e;e="sheet"}return this.getList(e,t)};q.prototype.searchSuggest=function(e,t,n){var i=p.appDoIt(this.model,"searchSuggest",[t,e]).then(function(e){return{qResult:e}});n&&i.then(function(e){n(e)});return i};q.prototype.searchAssociations=function(e,t,n,i){var r=p.appDoIt(this.model,"searchAssociations",[n||{},e,t]).then(function(e){return{qResults:e}});i&&r.then(function(e){i(e)});return r};q.prototype.searchResults=function(e,t,n,i){var r=p.appDoIt(this.model,"searchResults",[n||{},e,t]).then(function(e){return{qResult:e}});i&&r.then(function(e){i(e)});return r};q.prototype.selectAssociations=function(e,t,n){return p.appDoIt(this.model,"selectAssociations",[n||{},t,e])};q.prototype.getAppLayout=function(t){var n=this,i=new e,r=t?function(e){t(e.layout,n)}:function(){};n.model.waitForOpen?n.model.waitForOpen.promise.then(function(){n.model.Invalidated&&n.model.Invalidated.bind(function(){C(n.model).then(r)});C(n.model).then(function(e){r(e);i.resolve(e)})}):C(n.model).then(function(e){r(e);i.resolve(e)});return i.promise};q.prototype.addAlternateState=function(e){return p.appDoIt(this.model,"addAlternateState",[e])};q.prototype.removeAlternateState=function(e){return p.appDoIt(this.model,"removeAlternateState",[e])};q.prototype.doReload=function(e,t,n){this.fieldCache={};return p.appDoIt(this.model,"doReload",[e||0,t||false,n||false])};q.prototype.doSave=function(e){return p.appDoIt(this.model,"doSave",[e])};q.prototype.field=function(e,t){var n=t?e+"/"+t:e;this.fieldCache[n]||(this.fieldCache[n]=new l(this,e,t));return this.fieldCache[n]};q.prototype.table=function(e,t){return new f(this,e,t)};q.setErrorCallback=function(e,t){y=e;x=t};q.prototype.createTable=function(e,t,n){var i=p.createHypercubeDef(e,t,n);return new f(this,this.createGenericObject({qHyperCubeDef:i}))};q.prototype.selectionState=function(e){var t=e||"$";if(!this.stateCache[t]){var n=p.getDefaultListParam("CurrentSelections",{qStateName:t});this.stateCache[t]=new v(this,this.createGenericObject(n),t)}return this.stateCache[t]};q.prototype.getScript=function(){if(this.model.getScript)return this.model.getScript().then(function(e){return{qScript:e}});return this.model.rpc("GetScript")};q.prototype.setScript=function(e){var t=this.model;var n="function"===typeof this.model.setScript?function(e){return t.setScript(e)}:function(e){return t.rpc("SetScript",null,[e])};var i="function"===typeof this.model.checkScriptSyntax?function(){return t.checkScriptSyntax().then(function(e){return{qErrors:e}})}:function(){return t.rpc("CheckScriptSyntax")};function r(e,t){return t.qErrors&&t.qErrors.length>0?t:e}return n(e).then(function(e){return i().then(function(t){return r(e,t)})})};q.currApp=function(e){var t;t=e&&e.backendApi&&e.backendApi.model.session&&(e.backendApi.model.session.currentApp||e.backendApi.model.session.app)?e.backendApi.model.session.currentApp||e.backendApi.model.session.app:e&&e.backendApi&&e.backendApi.model.app?e.backendApi.model.app:n.current;if(!t)return null;w||(w=new q(t));if(w.model===t)return w;return new q(t)};q.openApp=function(i,r){p.initClient();i=i||"";r=r||{};this._qEvent&&(r._qEvent=this._qEvent);var o=p.makeConfig(r),a=n.makeCacheId(i,o),s,l;if(S[a])return S[a];s=y?function(e){y(e||{code:b.LOCERR_GENERIC_CONNECTION_LOST,message:"Connection lost"})}:y;x&&(l=x);var c=n.getSync(i,o,true,s,l);if(c){var u=new q(c);u.close=function(){var t=new e;setTimeout(function(){delete S[a];t.resolve(c.close(false))},200);return t.promise};c.waitForOpen.promise.then(function(){document.addEventListener("onAppStateChanged",function(e){if(e.detail&&e.detail.inForegroundNow){t.getService("$delayedModal").close();c.enigmaModel.session.resume(true)}else if(e.detail&&!e.detail.inForegroundNow){u.fieldCache={};u.stateCache={};c.enigmaModel.session.suspend()}})});S[a]=u}return S[a]};q.sessionApp=function(e){return this.sessionAppFromApp("?transient=",e)};q.sessionAppFromApp=function(t,i){var r;p.initClient();var o=p.makeConfig(i),a=n.makeCacheId(t,o),s;o.identity=o.identity||"sessionapp";o.sessionApp={value:true,appId:t};s=function e(t){if(t&&1002===t.code){t.isHandled=true;return}y&&y({code:b.LOCERR_GENERIC_CONNECTION_LOST,message:"Connection lost"})};var l=n.getSync(t,o,true,s,x);if(l){r=new q(l);r.close=function(){var t=new e;setTimeout(function(){delete S[a];t.resolve(l.close(false))},200);return t.promise}}return r};q.table=function(e,t){var n=q.currApp(e);return n.table(e,t)};q.prototype.on=function(e,t){this.qEvent.register({scope:"QApp",name:e,callback:t})};q.prototype.off=function(e){this.qEvent.clear(e)};return q}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(48),n(102),n(653),n(10)],r=function(e,t,n,i){t.service("qvChartTooltipService",["$document","$timeout",function(t,r){var o,a,s=t.find("body"),l=e.element('<div id="qs-chart-tooltip">').appendTo(s);var c,u,d=false;function f(){r.cancel(u);u=null;r.cancel(c);c=null}o={open:function e(t,n,s){d&&a&&a.hide();f();if(!a){var p=t.position;t.position=void 0;a=l.showComponent(i,t);t.position=p}l.attr("dir",t.dir);c=r(function(){n&&(u=r(function(){o.close()},n));d=true;a.show(t)},s)},close:function e(){this.Closed.emit();a&&r(function(){a.hide()});f()},destroy:function e(){d&&a&&a.hide();a=null}};n.create(o,"Closed");return o}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(119),n(717)],r=function(e,t){e.directive("tinyEditor",function(){return{template:t,replace:true,restrict:"E",scope:{value:"=",invalid:"=?",maxLength:"=?",onOpen:"&",onBlur:"&",alwaysExpression:"@?"},link:function e(t){t.editorValue=t.value;t.isExpression=n(t.editorValue);t.$watch("value",function(){if(t.value!==t.editorValue){t.isExpression=n(t.value);t.editorValue=t.value}});t.focused=function(){t.active=true};t.blurred=function(e){t.isExpression=n(t.editorValue);t.active=false;t.onBlur({$event:e})};t.open=function(e){t.onOpen({$event:e})};t.change=function(){t.value=t.editorValue};function n(e){var n="false"!==t.alwaysExpression;if(n)return(e||"").length>0;return"="===(e||"")[0]}}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){var i,r,o;(function(a){true;!(r=[n(11)],i=a,o="function"===typeof i?i.apply(t,r):i,void 0!==o&&(e.exports=o))})(function(e){e.ui=e.ui||{};var t=e.ui.version="1.12.1";var n=0;var i=Array.prototype.slice;e.cleanData=function(t){return function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{i=e._data(r,"events");i&&i.remove&&e(r).triggerHandler("remove")}catch(e){}t(n)}}(e.cleanData);e.widget=function(t,n,i){var r,o,a;var s={};var l=t.split(".")[0];t=t.split(".")[1];var c=l+"-"+t;if(!i){i=n;n=e.Widget}e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i)));e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)};e[l]=e[l]||{};r=e[l][t];o=e[l][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)};e.extend(o,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]});a=new n;a.options=e.widget.extend({},a.options);e.each(i,function(t,i){if(!e.isFunction(i)){s[t]=i;return}s[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function r(e){return n.prototype[t].apply(this,e)}return function(){var t=this._super;var n=this._superApply;var o;this._super=e;this._superApply=r;o=i.apply(this,arguments);this._super=t;this._superApply=n;return o}}()});o.prototype=e.widget.extend(a,{widgetEventPrefix:r&&a.widgetEventPrefix||t},s,{constructor:o,namespace:l,widgetName:t,widgetFullName:c});if(r){e.each(r._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)});delete r._childConstructors}else n._childConstructors.push(o);e.widget.bridge(t,o);return o};e.widget.extend=function(t){var n=i.call(arguments,1);var r=0;var o=n.length;var a;var s;for(;r<o;r++)for(a in n[r]){s=n[r][a];n[r].hasOwnProperty(a)&&void 0!==s&&(e.isPlainObject(s)?t[a]=e.isPlainObject(t[a])?e.widget.extend({},t[a],s):e.widget.extend({},s):t[a]=s)}return t};e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"===typeof o;var s=i.call(arguments,1);var l=this;if(a)this.length||"instance"!==o?this.each(function(){var n;var i=e.data(this,r);if("instance"===o){l=i;return false}if(!i)return e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'");if(!e.isFunction(i[o])||"_"===o.charAt(0))return e.error("no such method '"+o+"' for "+t+" widget instance");n=i[o].apply(i,s);if(n!==i&&void 0!==n){l=n&&n.jquery?l.pushStack(n.get()):n;return false}}):l=void 0;else{s.length&&(o=e.widget.extend.apply(null,[o].concat(s)));this.each(function(){var t=e.data(this,r);if(t){t.option(o||{});t._init&&t._init()}else e.data(this,r,new n(o,this))})}return l}};e.Widget=function(){};e.Widget._childConstructors=[];e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:false,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0];this.element=e(i);this.uuid=n++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=e();this.hoverable=e();this.focusable=e();this.classesElementLookup={};if(i!==this){e.data(i,this.widgetFullName,this);this._on(true,this.element,{remove:function(e){e.target===i&&this.destroy()}});this.document=e(i.style?i.ownerDocument:i.document||i);this.window=e(this.document[0].defaultView||this.document[0].parentWindow)}this.options=e.widget.extend({},this.options,this._getCreateOptions(),t);this._create();this.options.disabled&&this._setOptionDisabled(this.options.disabled);this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy();e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i=t;var r;var o;var a;if(0===arguments.length)return e.widget.extend({},this.options);if("string"===typeof t){i={};r=t.split(".");t=r.shift();if(r.length){o=i[t]=e.widget.extend({},this.options[t]);for(a=0;a<r.length-1;a++){o[r[a]]=o[r[a]]||{};o=o[r[a]]}t=r.pop();if(1===arguments.length)return void 0===o[t]?null:o[t];o[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];i[t]=n}}this._setOptions(i);return this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){"classes"===e&&this._setOptionClasses(t);this.options[e]=t;"disabled"===e&&this._setOptionDisabled(t);return this},_setOptionClasses:function(t){var n,i,r;for(n in t){r=this.classesElementLookup[n];if(t[n]===this.options.classes[n]||!r||!r.length)continue;i=e(r.get());this._removeClass(r,n);i.addClass(this._classes({element:i,keys:n,classes:t,add:true}))}},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e);if(e){this._removeClass(this.hoverable,null,"ui-state-hover");this._removeClass(this.focusable,null,"ui-state-focus")}},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_classes:function(t){var n=[];var i=this;t=e.extend({element:this.element,classes:this.options.classes||{}},t);function r(r,o){var a,s;for(s=0;s<r.length;s++){a=i.classesElementLookup[r[s]]||e();a=t.add?e(e.unique(a.get().concat(t.element.get()))):e(a.not(t.element).get());i.classesElementLookup[r[s]]=a;n.push(r[s]);o&&t.classes[r[s]]&&n.push(t.classes[r[s]])}}this._on(t.element,{remove:"_untrackClassesElement"});t.keys&&r(t.keys.match(/\S+/g)||[],true);t.extra&&r(t.extra.match(/\S+/g)||[]);return n.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(i,r){-1!==e.inArray(t.target,r)&&(n.classesElementLookup[i]=e(r.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,false)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,true)},_toggleClass:function(e,t,n,i){i="boolean"===typeof i?i:n;var r="string"===typeof e||null===e,o={extra:r?t:n,keys:r?e:t,element:r?this.element:e,add:i};o.element.toggleClass(this._classes(o),i);return this},_on:function(t,n,i){var r;var o=this;if("boolean"!==typeof t){i=n;n=t;t=false}if(i){n=r=e(n);this.bindings=this.bindings.add(n)}else{i=n;n=this.element;r=this.widget()}e.each(i,function(i,a){function s(){if(!t&&(true===o.options.disabled||e(this).hasClass("ui-state-disabled")))return;return("string"===typeof a?o[a]:a).apply(o,arguments)}"string"!==typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/);var c=l[1]+o.eventNamespace;var u=l[2];u?r.on(c,u,s):n.on(c,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.off(n).off(n);this.bindings=e(this.bindings.not(t).get());this.focusable=e(this.focusable.not(t).get());this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"===typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,i){var r,o;var a=this.options[t];i=i||{};n=e.Event(n);n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase();n.target=this.element[0];o=n.originalEvent;if(o)for(r in o)r in n||(n[r]=o[r]);this.element.trigger(n,i);return!(e.isFunction(a)&&false===a.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}};e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"===typeof r&&(r={effect:r});var a;var s=r?true===r||"number"===typeof r?n:r.effect||n:t;r=r||{};"number"===typeof r&&(r={duration:r});a=!e.isEmptyObject(r);r.complete=o;r.delay&&i.delay(r.delay);a&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){e(this)[t]();o&&o.call(i[0]);n()})}});var r=e.widget;(function(){var t,n=Math.max,i=Math.abs,r=/left|center|right/,o=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,l=/%$/,c=e.fn.position;function u(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function d(t,n){return parseInt(e.css(t,n),10)||0}function f(t){var n=t[0];if(9===n.nodeType)return{width:t.width(),height:t.height(),offset:{top:0,left:0}};if(e.isWindow(n))return{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}};if(n.preventDefault)return{width:0,height:0,offset:{top:n.pageY,left:n.pageX}};return{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.position={scrollbarWidth:function(){if(void 0!==t)return t;var n,i,r=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=r.children()[0];e("body").append(r);n=o.offsetWidth;r.css("overflow","scroll");i=o.offsetWidth;n===i&&(i=r[0].clientWidth);r.remove();return t=n-i},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),r="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,o="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),r=!!n[0]&&9===n[0].nodeType,o=!i&&!r;return{element:n,isWindow:i,isDocument:r,offset:o?e(t).offset():{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}};e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var l,p,h,v,g,m,b=e(t.of),y=e.position.getWithinInfo(t.within),x=e.position.getScrollInfo(y),S=(t.collision||"flip").split(" "),w={};m=f(b);b[0].preventDefault&&(t.at="left top");p=m.width;h=m.height;v=m.offset;g=e.extend({},v);e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,i;1===e.length&&(e=r.test(e[0])?e.concat(["center"]):o.test(e[0])?["center"].concat(e):["center","center"]);e[0]=r.test(e[0])?e[0]:"center";e[1]=o.test(e[1])?e[1]:"center";n=a.exec(e[0]);i=a.exec(e[1]);w[this]=[n?n[0]:0,i?i[0]:0];t[this]=[s.exec(e[0])[0],s.exec(e[1])[0]]});1===S.length&&(S[1]=S[0]);"right"===t.at[0]?g.left+=p:"center"===t.at[0]&&(g.left+=p/2);"bottom"===t.at[1]?g.top+=h:"center"===t.at[1]&&(g.top+=h/2);l=u(w.at,p,h);g.left+=l[0];g.top+=l[1];return this.each(function(){var r,o,a=e(this),s=a.outerWidth(),c=a.outerHeight(),f=d(this,"marginLeft"),m=d(this,"marginTop"),q=s+f+d(this,"marginRight")+x.width,C=c+m+d(this,"marginBottom")+x.height,_=e.extend({},g),I=u(w.my,a.outerWidth(),a.outerHeight());"right"===t.my[0]?_.left-=s:"center"===t.my[0]&&(_.left-=s/2);"bottom"===t.my[1]?_.top-=c:"center"===t.my[1]&&(_.top-=c/2);_.left+=I[0];_.top+=I[1];r={marginLeft:f,marginTop:m};e.each(["left","top"],function(n,i){e.ui.position[S[n]]&&e.ui.position[S[n]][i](_,{targetWidth:p,targetHeight:h,elemWidth:s,elemHeight:c,collisionPosition:r,collisionWidth:q,collisionHeight:C,offset:[l[0]+I[0],l[1]+I[1]],my:t.my,at:t.at,within:y,elem:a})});t.using&&(o=function(e){var r=v.left-_.left,o=r+p-s,l=v.top-_.top,u=l+h-c,d={target:{element:b,left:v.left,top:v.top,width:p,height:h},element:{element:a,left:_.left,top:_.top,width:s,height:c},horizontal:o<0?"left":r>0?"right":"center",vertical:u<0?"top":l>0?"bottom":"middle"};p<s&&i(r+o)<p&&(d.horizontal="center");h<c&&i(l+u)<h&&(d.vertical="middle");n(i(r),i(o))>n(i(l),i(u))?d.important="horizontal":d.important="vertical";t.using.call(this,e,d)});a.offset(e.extend(_,{using:o}))})};e.ui.position={fit:{left:function(e,t){var i=t.within,r=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,a=e.left-t.collisionPosition.marginLeft,s=r-a,l=a+t.collisionWidth-o-r,c;if(t.collisionWidth>o)if(s>0&&l<=0){c=e.left+s+t.collisionWidth-o-r;e.left+=s-c}else e.left=l>0&&s<=0?r:s>l?r+o-t.collisionWidth:r;else s>0?e.left+=s:l>0?e.left-=l:e.left=n(e.left-a,e.left)},top:function(e,t){var i=t.within,r=i.isWindow?i.scrollTop:i.offset.top,o=t.within.height,a=e.top-t.collisionPosition.marginTop,s=r-a,l=a+t.collisionHeight-o-r,c;if(t.collisionHeight>o)if(s>0&&l<=0){c=e.top+s+t.collisionHeight-o-r;e.top+=s-c}else e.top=l>0&&s<=0?r:s>l?r+o-t.collisionHeight:r;else s>0?e.top+=s:l>0?e.top-=l:e.top=n(e.top-a,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,o=n.width,a=n.isWindow?n.scrollLeft:n.offset.left,s=e.left-t.collisionPosition.marginLeft,l=s-a,c=s+t.collisionWidth-o-a,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,d="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0],p,h;if(l<0){p=e.left+u+d+f+t.collisionWidth-o-r;(p<0||p<i(l))&&(e.left+=u+d+f)}else if(c>0){h=e.left-t.collisionPosition.marginLeft+u+d+f-a;(h>0||i(h)<c)&&(e.left+=u+d+f)}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,o=n.height,a=n.isWindow?n.scrollTop:n.offset.top,s=e.top-t.collisionPosition.marginTop,l=s-a,c=s+t.collisionHeight-o-a,u="top"===t.my[1],d=u?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1],h,v;if(l<0){v=e.top+d+f+p+t.collisionHeight-o-r;(v<0||v<i(l))&&(e.top+=d+f+p)}else if(c>0){h=e.top-t.collisionPosition.marginTop+d+f+p-a;(h>0||i(h)<c)&&(e.top+=d+f+p)}}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments);e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments);e.ui.position.fit.top.apply(this,arguments)}}}})();var o=e.ui.position;var a=e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])}});var s=e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var l="ui-effects-",c="ui-effects-style",u="ui-effects-animated",d=e;e.effects={effect:{}};(function(e,t){var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",i=/^([\-+])=\s*(\d+\.?\d*)/,r=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],o=e.Color=function(t,n,i,r){return new e.Color.fn.parse(t,n,i,r)},a={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},s={byte:{floor:true,max:255},percent:{max:1},degrees:{mod:360,floor:true}},l=o.support={},c=e("<p>")[0],u,d=e.each;c.style.cssText="background-color:rgba(1,1,1,.5)";l.rgba=c.style.backgroundColor.indexOf("rgba")>-1;d(a,function(e,t){t.cache="_"+e;t.props.alpha={idx:3,type:"percent",def:1}});function f(e,t,n){var i=s[t.type]||{};if(null==e)return n||!t.def?null:t.def;e=i.floor?~~e:parseFloat(e);if(isNaN(e))return t.def;if(i.mod)return(e+i.mod)%i.mod;return 0>e?0:i.max<e?i.max:e}function p(t){var n=o(),i=n._rgba=[];t=t.toLowerCase();d(r,function(e,r){var o,s=r.re.exec(t),l=s&&r.parse(s),c=r.space||"rgba";if(l){o=n[c](l);n[a[c].cache]=o[a[c].cache];i=n._rgba=o._rgba;return false}});if(i.length){"0,0,0,0"===i.join()&&e.extend(i,u.transparent);return n}return u[t]}o.fn=e.extend(o.prototype,{parse:function(n,i,r,s){if(n===t){this._rgba=[null,null,null,null];return this}if(n.jquery||n.nodeType){n=e(n).css(i);i=t}var l=this,c=e.type(n),h=this._rgba=[];if(i!==t){n=[n,i,r,s];c="array"}if("string"===c)return this.parse(p(n)||u._default);if("array"===c){d(a.rgba.props,function(e,t){h[t.idx]=f(n[t.idx],t)});return this}if("object"===c){d(a,n instanceof o?function(e,t){n[t.cache]&&(l[t.cache]=n[t.cache].slice())}:function(t,i){var r=i.cache;d(i.props,function(e,t){if(!l[r]&&i.to){if("alpha"===e||null==n[e])return;l[r]=i.to(l._rgba)}l[r][t.idx]=f(n[e],t,true)});if(l[r]&&e.inArray(null,l[r].slice(0,3))<0){l[r][3]=1;i.from&&(l._rgba=i.from(l[r]))}});return this}},is:function(e){var t=o(e),n=true,i=this;d(a,function(e,r){var o,a=t[r.cache];if(a){o=i[r.cache]||r.to&&r.to(i._rgba)||[];d(r.props,function(e,t){if(null!=a[t.idx]){n=a[t.idx]===o[t.idx];return n}})}return n});return n},_space:function(){var e=[],t=this;d(a,function(n,i){t[i.cache]&&e.push(n)});return e.pop()},transition:function(e,t){var n=o(e),i=n._space(),r=a[i],l=0===this.alpha()?o("transparent"):this,c=l[r.cache]||r.to(l._rgba),u=c.slice();n=n[r.cache];d(r.props,function(e,i){var r=i.idx,o=c[r],a=n[r],l=s[i.type]||{};if(null===a)return;if(null===o)u[r]=a;else{l.mod&&(a-o>l.mod/2?o+=l.mod:o-a>l.mod/2&&(o-=l.mod));u[r]=f((a-o)*t+o,i)}});return this[i](u)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=o(t)._rgba;return o(e.map(n,function(e,t){return(1-i)*r[t]+i*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});if(1===n[3]){n.pop();t="rgb("}return t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){null==e&&(e=t>2?1:0);t&&t<3&&(e=Math.round(100*e)+"%");return e});if(1===n[3]){n.pop();t="hsl("}return t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),i=n.pop();t&&n.push(~~(255*i));return"#"+e.map(n,function(e){e=(e||0).toString(16);return 1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});o.fn.parse.prototype=o.fn;function h(e,t,n){n=(n+1)%1;if(6*n<1)return e+(t-e)*n*6;if(2*n<1)return t;if(3*n<2)return e+(t-e)*(2/3-n)*6;return e}a.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,i=e[2]/255,r=e[3],o=Math.max(t,n,i),a=Math.min(t,n,i),s=o-a,l=o+a,c=.5*l,u,d;u=a===o?0:t===o?60*(n-i)/s+360:n===o?60*(i-t)/s+120:60*(t-n)/s+240;d=0===s?0:c<=.5?s/l:s/(2-l);return[Math.round(u)%360,d,c,null==r?1:r]};a.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],r=e[3],o=i<=.5?i*(1+n):i+n-i*n,a=2*i-o;return[Math.round(255*h(a,o,t+1/3)),Math.round(255*h(a,o,t)),Math.round(255*h(a,o,t-1/3)),r]};d(a,function(n,r){var a=r.props,s=r.cache,l=r.to,c=r.from;o.fn[n]=function(n){l&&!this[s]&&(this[s]=l(this._rgba));if(n===t)return this[s].slice();var i,r=e.type(n),u="array"===r||"object"===r?n:arguments,p=this[s].slice();d(a,function(e,t){var n=u["object"===r?e:t.idx];null==n&&(n=p[t.idx]);p[t.idx]=f(n,t)});if(c){i=o(c(p));i[s]=p;return i}return o(p)};d(a,function(t,r){if(o.fn[t])return;o.fn[t]=function(o){var a=e.type(o),s="alpha"===t?this._hsla?"hsla":"rgba":n,l=this[s](),c=l[r.idx],u;if("undefined"===a)return c;if("function"===a){o=o.call(this,c);a=e.type(o)}if(null==o&&r.empty)return this;if("string"===a){u=i.exec(o);u&&(o=c+parseFloat(u[2])*("+"===u[1]?1:-1))}l[r.idx]=o;return this[s](l)}})});o.hook=function(t){var n=t.split(" ");d(n,function(t,n){e.cssHooks[n]={set:function(t,i){var r,a,s="";if("transparent"!==i&&("string"!==e.type(i)||(r=p(i)))){i=o(r||i);if(!l.rgba&&1!==i._rgba[3]){a="backgroundColor"===n?t.parentNode:t;while((""===s||"transparent"===s)&&a&&a.style)try{s=e.css(a,"backgroundColor");a=a.parentNode}catch(e){}i=i.blend(s&&"transparent"!==s?s:"_default")}i=i.toRgbaString()}try{t.style[n]=i}catch(e){}}};e.fx.step[n]=function(t){if(!t.colorInit){t.start=o(t.elem,n);t.end=o(t.end);t.colorInit=true}e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})};o.hook(n);e.cssHooks.borderColor={expand:function(e){var t={};d(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e});return t}};u=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(d);(function(){var t=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr){d.style(e.elem,n,e.end);e.setAttr=true}}});function i(t){var n,i,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(r&&r.length&&r[0]&&r[r[0]]){i=r.length;while(i--){n=r[i];"string"===typeof r[n]&&(o[e.camelCase(n)]=r[n])}}else for(n in r)"string"===typeof r[n]&&(o[n]=r[n]);return o}function r(t,i){var r={},o,a;for(o in i){a=i[o];t[o]!==a&&(n[o]||!e.fx.step[o]&&isNaN(parseFloat(a))||(r[o]=a))}return r}e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))});e.effects.animateClass=function(n,o,a,s){var l=e.speed(o,a,s);return this.queue(function(){var o=e(this),a=o.attr("class")||"",s,c=l.children?o.find("*").addBack():o;c=c.map(function(){var t=e(this);return{el:t,start:i(this)}});s=function(){e.each(t,function(e,t){n[t]&&o[t+"Class"](n[t])})};s();c=c.map(function(){this.end=i(this.el[0]);this.diff=r(this.start,this.end);return this});o.attr("class",a);c=c.map(function(){var t=this,n=e.Deferred(),i=e.extend({},l,{queue:false,complete:function(){n.resolve(t)}});this.el.animate(this.diff,i);return n.promise()});e.when.apply(e,c.get()).done(function(){s();e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})});l.complete.call(o[0])})})};e.fn.extend({addClass:function(t){return function(n,i,r,o){return i?e.effects.animateClass.call(this,{add:n},i,r,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,i,r,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},i,r,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,i,r,o,a){return"boolean"===typeof i||void 0===i?r?e.effects.animateClass.call(this,i?{add:n}:{remove:n},r,o,a):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},i,r,o)}}(e.fn.toggleClass),switchClass:function(t,n,i,r,o){return e.effects.animateClass.call(this,{add:n,remove:t},i,r,o)}})})();(function(){e.expr&&e.expr.filters&&e.expr.filters.animated&&(e.expr.filters.animated=function(t){return function(n){return!!e(n).data(u)||t(n)}}(e.expr.filters.animated));false!==e.uiBackCompat&&e.extend(e.effects,{save:function(e,t){var n=0,i=t.length;for(;n<i;n++)null!==t[n]&&e.data(l+t[n],e[0].style[t[n]])},restore:function(e,t){var n,i=0,r=t.length;for(;i<r;i++)if(null!==t[i]){n=e.data(l+t[i]);e.css(t[i],n)}},setMode:function(e,t){"toggle"===t&&(t=e.is(":hidden")?"show":"hide");return t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(true),height:t.outerHeight(true),float:t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(e){o=document.body}t.wrap(i);(t[0]===o||e.contains(t[0],o))&&e(o).trigger("focus");i=t.parent();if("static"===t.css("position")){i.css({position:"relative"});t.css({position:"relative"})}else{e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")});e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i);isNaN(parseInt(n[i],10))&&(n[i]="auto")});t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}t.css(r);return i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;if(t.parent().is(".ui-effects-wrapper")){t.parent().replaceWith(t);(t[0]===n||e.contains(t[0],n))&&e(n).trigger("focus")}return t}});e.extend(e.effects,{version:"1.12.1",define:function(t,n,i){if(!i){i=n;n="effect"}e.effects.effect[t]=i;e.effects.effect[t].mode=n;return i},scaledDimensions:function(e,t,n){if(0===t)return{height:0,width:0,outerHeight:0,outerWidth:0};var i="horizontal"!==n?(t||100)/100:1,r="vertical"!==n?(t||100)/100:1;return{height:e.height()*r,width:e.width()*i,outerHeight:e.outerHeight()*r,outerWidth:e.outerWidth()*i}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,n){var i=e.queue();t>1&&i.splice.apply(i,[1,0].concat(i.splice(t,n)));e.dequeue()},saveStyle:function(e){e.data(c,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(c)||"";e.removeData(c)},mode:function(e,t){var n=e.is(":hidden");"toggle"===t&&(t=n?"show":"hide");(n?"hide"===t:"show"===t)&&(t="none");return t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createPlaceholder:function(t){var n,i=t.css("position"),r=t.position();t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight());if(/^(static|relative)/.test(i)){i="absolute";n=e("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder");t.data(l+"placeholder",n)}t.css({position:i,left:r.left,top:r.top});return n},removePlaceholder:function(e){var t=l+"placeholder",n=e.data(t);if(n){n.remove();e.removeData(t)}},cleanUp:function(t){e.effects.restoreStyle(t);e.effects.removePlaceholder(t)},setTransition:function(t,n,i,r){r=r||{};e.each(n,function(e,n){var o=t.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])});return r}});function t(t,n,i,r){if(e.isPlainObject(t)){n=t;t=t.effect}t={effect:t};null==n&&(n={});if(e.isFunction(n)){r=n;i=null;n={}}if("number"===typeof n||e.fx.speeds[n]){r=i;i=n;n={}}if(e.isFunction(i)){r=i;i=null}n&&e.extend(t,n);i=i||n.duration;t.duration=e.fx.off?0:"number"===typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default;t.complete=r||n.complete;return t}function n(t){if(!t||"number"===typeof t||e.fx.speeds[t])return true;if("string"===typeof t&&!e.effects.effect[t])return true;if(e.isFunction(t))return true;if("object"===typeof t&&!t.effect)return true;return false}e.fn.extend({effect:function(){var n=t.apply(this,arguments),i=e.effects.effect[n.effect],r=i.mode,o=n.queue,a=o||"fx",s=n.complete,l=n.mode,c=[],d=function(t){var n=e(this),i=e.effects.mode(n,l)||r;n.data(u,true);c.push(i);r&&("show"===i||i===r&&"hide"===i)&&n.show();r&&"none"===i||e.effects.saveStyle(n);e.isFunction(t)&&t()};if(e.fx.off||!i)return l?this[l](n.duration,s):this.each(function(){s&&s.call(this)});function f(t){var o=e(this);function a(){o.removeData(u);e.effects.cleanUp(o);"hide"===n.mode&&o.hide();d()}function d(){e.isFunction(s)&&s.call(o[0]);e.isFunction(t)&&t()}n.mode=c.shift();if(false===e.uiBackCompat||r)if("none"===n.mode){o[l]();d()}else i.call(o[0],n,a);else if(o.is(":hidden")?"hide"===l:"show"===l){o[l]();d()}else i.call(o[0],n,d)}return false===o?this.each(d).each(f):this.queue(a,d).queue(a,f)},show:function(e){return function(i){if(n(i))return e.apply(this,arguments);var r=t.apply(this,arguments);r.mode="show";return this.effect.call(this,r)}}(e.fn.show),hide:function(e){return function(i){if(n(i))return e.apply(this,arguments);var r=t.apply(this,arguments);r.mode="hide";return this.effect.call(this,r)}}(e.fn.hide),toggle:function(e){return function(i){if(n(i)||"boolean"===typeof i)return e.apply(this,arguments);var r=t.apply(this,arguments);r.mode="toggle";return this.effect.call(this,r)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),i=[];e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])});return i},cssClip:function(e){if(e)return this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)");return i(this.css("clip"),this)},transfer:function(t,n){var i=e(this),r=e(t.to),o="fixed"===r.css("position"),a=e("body"),s=o?a.scrollTop():0,l=o?a.scrollLeft():0,c=r.offset(),u={top:c.top-s,left:c.left-l,height:r.innerHeight(),width:r.innerWidth()},d=i.offset(),f=e("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:d.top-s,left:d.left-l,height:i.innerHeight(),width:i.innerWidth(),position:o?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){f.remove();e.isFunction(n)&&n()})}});function i(e,t){var n=t.outerWidth(),i=t.outerHeight(),r=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,o=r.exec(e)||["",0,n,i,0];return{top:parseFloat(o[1])||0,right:"auto"===o[2]?n:parseFloat(o[2]),bottom:"auto"===o[3]?i:parseFloat(o[3]),left:parseFloat(o[4])||0}}e.fx.step.clip=function(t){if(!t.clipInit){t.start=e(t.elem).cssClip();"string"===typeof t.end&&(t.end=i(t.end,t.elem));t.clipInit=true}e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}})();(function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}});e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}});e.each(t,function(t,n){e.easing["easeIn"+t]=n;e.easing["easeOut"+t]=function(e){return 1-n(1-e)};e.easing["easeInOut"+t]=function(e){return e<.5?n(2*e)/2:1-n(-2*e+2)/2}})})();var f=e.effects;var p=e.effects.define("blind","hide",function(t,n){var i={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},r=e(this),o=t.direction||"up",a=r.cssClip(),s={clip:e.extend({},a)},l=e.effects.createPlaceholder(r);s.clip[i[o][0]]=s.clip[i[o][1]];if("show"===t.mode){r.cssClip(s.clip);l&&l.css(e.effects.clipToBox(s));s.clip=a}l&&l.animate(e.effects.clipToBox(s),t.duration,t.easing);r.animate(s,{queue:false,duration:t.duration,easing:t.easing,complete:n})});var h=e.effects.define("bounce",function(t,n){var i,r,o,a=e(this),s=t.mode,l="hide"===s,c="show"===s,u=t.direction||"up",d=t.distance,f=t.times||5,p=2*f+(c||l?1:0),h=t.duration/p,v=t.easing,g="up"===u||"down"===u?"top":"left",m="up"===u||"left"===u,b=0,y=a.queue().length;e.effects.createPlaceholder(a);o=a.css(g);d||(d=a["top"===g?"outerHeight":"outerWidth"]()/3);if(c){r={opacity:1};r[g]=o;a.css("opacity",0).css(g,m?2*-d:2*d).animate(r,h,v)}l&&(d/=Math.pow(2,f-1));r={};r[g]=o;for(;b<f;b++){i={};i[g]=(m?"-=":"+=")+d;a.animate(i,h,v).animate(r,h,v);d=l?2*d:d/2}if(l){i={opacity:0};i[g]=(m?"-=":"+=")+d;a.animate(i,h,v)}a.queue(n);e.effects.unshift(a,y,p+1)});var v=e.effects.define("clip","hide",function(t,n){var i,r={},o=e(this),a=t.direction||"vertical",s="both"===a,l=s||"horizontal"===a,c=s||"vertical"===a;i=o.cssClip();r.clip={top:c?(i.bottom-i.top)/2:i.top,right:l?(i.right-i.left)/2:i.right,bottom:c?(i.bottom-i.top)/2:i.bottom,left:l?(i.right-i.left)/2:i.left};e.effects.createPlaceholder(o);if("show"===t.mode){o.cssClip(r.clip);r.clip=i}o.animate(r,{queue:false,duration:t.duration,easing:t.easing,complete:n})});var g=e.effects.define("drop","hide",function(t,n){var i,r=e(this),o=t.mode,a="show"===o,s=t.direction||"left",l="up"===s||"down"===s?"top":"left",c="up"===s||"left"===s?"-=":"+=",u="+="===c?"-=":"+=",d={opacity:0};e.effects.createPlaceholder(r);i=t.distance||r["top"===l?"outerHeight":"outerWidth"](true)/2;d[l]=c+i;if(a){r.css(d);d[l]=u+i;d.opacity=1}r.animate(d,{queue:false,duration:t.duration,easing:t.easing,complete:n})});var m=e.effects.define("explode","hide",function(t,n){var i,r,o,a,s,l,c=t.pieces?Math.round(Math.sqrt(t.pieces)):3,u=c,d=e(this),f=t.mode,p="show"===f,h=d.show().css("visibility","hidden").offset(),v=Math.ceil(d.outerWidth()/u),g=Math.ceil(d.outerHeight()/c),m=[];function b(){m.push(this);m.length===c*u&&y()}for(i=0;i<c;i++){a=h.top+i*g;l=i-(c-1)/2;for(r=0;r<u;r++){o=h.left+r*v;s=r-(u-1)/2;d.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*v,top:-i*g}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:g,left:o+(p?s*v:0),top:a+(p?l*g:0),opacity:p?0:1}).animate({left:o+(p?0:s*v),top:a+(p?0:l*g),opacity:p?1:0},t.duration||500,t.easing,b)}}function y(){d.css({visibility:"visible"});e(m).remove();n()}});var b=e.effects.define("fade","toggle",function(t,n){var i="show"===t.mode;e(this).css("opacity",i?0:1).animate({opacity:i?1:0},{queue:false,duration:t.duration,easing:t.easing,complete:n})});var y=e.effects.define("fold","hide",function(t,n){var i=e(this),r=t.mode,o="show"===r,a="hide"===r,s=t.size||15,l=/([0-9]+)%/.exec(s),c=!!t.horizFirst,u=c?["right","bottom"]:["bottom","right"],d=t.duration/2,f=e.effects.createPlaceholder(i),p=i.cssClip(),h={clip:e.extend({},p)},v={clip:e.extend({},p)},g=[p[u[0]],p[u[1]]],m=i.queue().length;l&&(s=parseInt(l[1],10)/100*g[a?0:1]);h.clip[u[0]]=s;v.clip[u[0]]=s;v.clip[u[1]]=0;if(o){i.cssClip(v.clip);f&&f.css(e.effects.clipToBox(v));v.clip=p}i.queue(function(n){f&&f.animate(e.effects.clipToBox(h),d,t.easing).animate(e.effects.clipToBox(v),d,t.easing);n()}).animate(h,d,t.easing).animate(v,d,t.easing).queue(n);e.effects.unshift(i,m,4)});var x=e.effects.define("highlight","show",function(t,n){var i=e(this),r={backgroundColor:i.css("backgroundColor")};"hide"===t.mode&&(r.opacity=0);e.effects.saveStyle(i);i.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(r,{queue:false,duration:t.duration,easing:t.easing,complete:n})});var S=e.effects.define("size",function(t,n){var i,r,o,a=e(this),s=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],u=t.mode,d="effect"!==u,f=t.scale||"both",p=t.origin||["middle","center"],h=a.css("position"),v=a.position(),g=e.effects.scaledDimensions(a),m=t.from||g,b=t.to||e.effects.scaledDimensions(a,0);e.effects.createPlaceholder(a);if("show"===u){o=m;m=b;b=o}r={from:{y:m.height/g.height,x:m.width/g.width},to:{y:b.height/g.height,x:b.width/g.width}};if("box"===f||"both"===f){if(r.from.y!==r.to.y){m=e.effects.setTransition(a,l,r.from.y,m);b=e.effects.setTransition(a,l,r.to.y,b)}if(r.from.x!==r.to.x){m=e.effects.setTransition(a,c,r.from.x,m);b=e.effects.setTransition(a,c,r.to.x,b)}}if(("content"===f||"both"===f)&&r.from.y!==r.to.y){m=e.effects.setTransition(a,s,r.from.y,m);b=e.effects.setTransition(a,s,r.to.y,b)}if(p){i=e.effects.getBaseline(p,g);m.top=(g.outerHeight-m.outerHeight)*i.y+v.top;m.left=(g.outerWidth-m.outerWidth)*i.x+v.left;b.top=(g.outerHeight-b.outerHeight)*i.y+v.top;b.left=(g.outerWidth-b.outerWidth)*i.x+v.left}a.css(m);if("content"===f||"both"===f){l=l.concat(["marginTop","marginBottom"]).concat(s);c=c.concat(["marginLeft","marginRight"]);a.find("*[width]").each(function(){var n=e(this),i=e.effects.scaledDimensions(n),o={height:i.height*r.from.y,width:i.width*r.from.x,outerHeight:i.outerHeight*r.from.y,outerWidth:i.outerWidth*r.from.x},a={height:i.height*r.to.y,width:i.width*r.to.x,outerHeight:i.height*r.to.y,outerWidth:i.width*r.to.x};if(r.from.y!==r.to.y){o=e.effects.setTransition(n,l,r.from.y,o);a=e.effects.setTransition(n,l,r.to.y,a)}if(r.from.x!==r.to.x){o=e.effects.setTransition(n,c,r.from.x,o);a=e.effects.setTransition(n,c,r.to.x,a)}d&&e.effects.saveStyle(n);n.css(o);n.animate(a,t.duration,t.easing,function(){d&&e.effects.restoreStyle(n)})})}a.animate(b,{queue:false,duration:t.duration,easing:t.easing,complete:function(){var t=a.offset();0===b.opacity&&a.css("opacity",m.opacity);if(!d){a.css("position","static"===h?"relative":h).offset(t);e.effects.saveStyle(a)}n()}})});var w=e.effects.define("scale",function(t,n){var i=e(this),r=t.mode,o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"effect"!==r?0:100),a=e.extend(true,{from:e.effects.scaledDimensions(i),to:e.effects.scaledDimensions(i,o,t.direction||"both"),origin:t.origin||["middle","center"]},t);if(t.fade){a.from.opacity=1;a.to.opacity=0}e.effects.effect.size.call(this,a,n)});var q=e.effects.define("puff","hide",function(t,n){var i=e.extend(true,{},t,{fade:true,percent:parseInt(t.percent,10)||150});e.effects.effect.scale.call(this,i,n)});var C=e.effects.define("pulsate","show",function(t,n){var i=e(this),r=t.mode,o="show"===r,a="hide"===r,s=o||a,l=2*(t.times||5)+(s?1:0),c=t.duration/l,u=0,d=1,f=i.queue().length;if(o||!i.is(":visible")){i.css("opacity",0).show();u=1}for(;d<l;d++){i.animate({opacity:u},c,t.easing);u=1-u}i.animate({opacity:u},c,t.easing);i.queue(n);e.effects.unshift(i,f,l+1)});var _=e.effects.define("shake",function(t,n){var i=1,r=e(this),o=t.direction||"left",a=t.distance||20,s=t.times||3,l=2*s+1,c=Math.round(t.duration/l),u="up"===o||"down"===o?"top":"left",d="up"===o||"left"===o,f={},p={},h={},v=r.queue().length;e.effects.createPlaceholder(r);f[u]=(d?"-=":"+=")+a;p[u]=(d?"+=":"-=")+2*a;h[u]=(d?"-=":"+=")+2*a;r.animate(f,c,t.easing);for(;i<s;i++)r.animate(p,c,t.easing).animate(h,c,t.easing);r.animate(p,c,t.easing).animate(f,c/2,t.easing).queue(n);e.effects.unshift(r,v,l+1)});var I=e.effects.define("slide","show",function(t,n){var i,r,o=e(this),a={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},s=t.mode,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,d=t.distance||o["top"===c?"outerHeight":"outerWidth"](true),f={};e.effects.createPlaceholder(o);i=o.cssClip();r=o.position()[c];f[c]=(u?-1:1)*d+r;f.clip=o.cssClip();f.clip[a[l][1]]=f.clip[a[l][0]];if("show"===s){o.cssClip(f.clip);o.css(c,f[c]);f.clip=i;f[c]=r}o.animate(f,{queue:false,duration:t.duration,easing:t.easing,complete:n})});var f;false!==e.uiBackCompat&&(f=e.effects.define("transfer",function(t,n){e(this).transfer(t,n)}));var E=f;e.ui.focusable=function(t,n){var i,r,o,a,s,l=t.nodeName.toLowerCase();if("area"===l){i=t.parentNode;r=i.name;if(!t.href||!r||"map"!==i.nodeName.toLowerCase())return false;o=e("img[usemap='#"+r+"']");return o.length>0&&o.is(":visible")}if(/^(input|select|textarea|button|object)$/.test(l)){a=!t.disabled;if(a){s=e(t).closest("fieldset")[0];s&&(a=!s.disabled)}}else a="a"===l&&t.href||n;return a&&e(t).is(":visible")&&D(e(t))};function D(e){var t=e.css("visibility");while("inherit"===t){e=e.parent();t=e.css("visibility")}return"hidden"!==t}e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}});var A=e.ui.focusable;var T=e.fn.form=function(){return"string"===typeof this[0].form?this.closest("form"):e(this[0].form)};var O=e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout(function(){var n=t.data("ui-form-reset-instances");e.each(n,function(){this.refresh()})})},_bindFormResetHandler:function(){this.form=this.element.form();if(!this.form.length)return;var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler);e.push(this);this.form.data("ui-form-reset-instances",e)},_unbindFormResetHandler:function(){if(!this.form.length)return;var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1);t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}};if("1.7"===e.fn.jquery.substring(0,3)){e.each(["Width","Height"],function(t,n){var i="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};function a(t,n,r,o){e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0;r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0);o&&(n-=parseFloat(e.css(t,"margin"+this))||0)});return n}e.fn["inner"+n]=function(t){if(void 0===t)return o["inner"+n].call(this);return this.each(function(){e(this).css(r,a(this,t)+"px")})};e.fn["outer"+n]=function(t,i){if("number"!==typeof t)return o["outer"+n].call(this,t);return this.each(function(){e(this).css(r,a(this,t,true,i)+"px")})}});e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}var k=e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};var L=e.ui.escapeSelector=function(){var e=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(t){return t.replace(e,"\\$1")}}();var P=e.fn.labels=function(){var t,n,i,r,o;if(this[0].labels&&this[0].labels.length)return this.pushStack(this[0].labels);r=this.eq(0).parents("label");i=this.attr("id");if(i){t=this.eq(0).parents().last();o=t.add(t.length?t.siblings():this.siblings());n="label[for='"+e.ui.escapeSelector(i)+"']";r=r.add(o.find(n).addBack(n))}return this.pushStack(r)};var M=e.fn.scrollParent=function(t){var n=this.css("position"),i="absolute"===n,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=e(this);if(i&&"static"===t.css("position"))return false;return r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:e(this[0].ownerDocument||document)};var N=e.extend(e.expr[":"],{tabbable:function(t){var n=e.attr(t,"tabindex"),i=null!=n;return(!i||n>=0)&&e.ui.focusable(t,i)}});var R=e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}});var F=e.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:false,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e();this._addClass("ui-accordion","ui-widget ui-helper-reset");this.element.attr("role","tablist");t.collapsible||false!==t.active&&null!=t.active||(t.active=0);this._processPanels();t.active<0&&(t.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t,n,i=this.options.icons;if(i){t=e("<span>");this._addClass(t,"ui-accordion-header-icon","ui-icon "+i.header);t.prependTo(this.headers);n=this.active.children(".ui-accordion-header-icon");this._removeClass(n,i.header)._addClass(n,null,i.activeHeader)._addClass(this.headers,"ui-accordion-icons")}},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons");this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeAttr("role");this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId();this._destroyIcons();e=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId();"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){if("active"===e){this._activate(t);return}if("event"===e){this.options.event&&this._off(this.headers,this.options.event);this._setupEvents(t)}this._super(e,t);"collapsible"!==e||t||false!==this.options.active||this._activate(0);if("icons"===e){this._destroyIcons();t&&this._createIcons()}},_setOptionDisabled:function(e){this._super(e);this.element.attr("aria-disabled",e);this._toggleClass(null,"ui-state-disabled",!!e);this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!e)},_keydown:function(t){if(t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,i=this.headers.length,r=this.headers.index(t.target),o=false;switch(t.keyCode){case n.RIGHT:case n.DOWN:o=this.headers[(r+1)%i];break;case n.LEFT:case n.UP:o=this.headers[(r-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:o=this.headers[0];break;case n.END:o=this.headers[i-1];break}if(o){e(t.target).attr("tabIndex",-1);e(o).attr("tabIndex",0);e(o).trigger("focus");t.preventDefault()}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels();if(false===t.active&&true===t.collapsible||!this.headers.length){t.active=false;this.active=e()}else if(false===t.active)this._activate(0);else if(this.active.length&&!e.contains(this.element[0],this.active[0]))if(this.headers.length===this.headers.find(".ui-state-disabled").length){t.active=false;this.active=e()}else this._activate(Math.max(0,t.active-1));else t.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header);this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default");this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide();this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content");if(t){this._off(e.not(this.headers));this._off(t.not(this.panels))}},_refresh:function(){var t,n=this.options,i=n.heightStyle,r=this.element.parent();this.active=this._findActive(n.active);this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed");this._addClass(this.active.next(),"ui-accordion-content-active");this.active.next().show();this.headers.attr("role","tab").each(function(){var t=e(this),n=t.uniqueId().attr("id"),i=t.next(),r=i.uniqueId().attr("id");t.attr("aria-controls",r);i.attr("aria-labelledby",n)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(n.event);if("fill"===i){t=r.height();this.element.siblings(":visible").each(function(){var n=e(this),i=n.css("position");if("absolute"===i||"fixed"===i)return;t-=n.outerHeight(true)});this.headers.each(function(){t-=e(this).outerHeight(true)});this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else if("auto"===i){t=0;this.headers.next().each(function(){var n=e(this).is(":visible");n||e(this).show();t=Math.max(t,e(this).css("height","").height());n||e(this).hide()}).height(t)}},_activate:function(t){var n=this._findActive(t)[0];if(n===this.active[0])return;n=n||this.active[0];this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return"number"===typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,n);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(t){var n,i,r=this.options,o=this.active,a=e(t.currentTarget),s=a[0]===o[0],l=s&&r.collapsible,c=l?e():a.next(),u=o.next(),d={oldHeader:o,oldPanel:u,newHeader:l?e():a,newPanel:c};t.preventDefault();if(s&&!r.collapsible||false===this._trigger("beforeActivate",t,d))return;r.active=!l&&this.headers.index(a);this.active=s?e():a;this._toggle(d);this._removeClass(o,"ui-accordion-header-active","ui-state-active");if(r.icons){n=o.children(".ui-accordion-header-icon");this._removeClass(n,null,r.icons.activeHeader)._addClass(n,null,r.icons.header)}if(!s){this._removeClass(a,"ui-accordion-header-collapsed")._addClass(a,"ui-accordion-header-active","ui-state-active");if(r.icons){i=a.children(".ui-accordion-header-icon");this._removeClass(i,null,r.icons.header)._addClass(i,null,r.icons.activeHeader)}this._addClass(a.next(),"ui-accordion-content-active")}},_toggle:function(t){var n=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=n;this.prevHide=i;if(this.options.animate)this._animate(n,i,t);else{i.hide();n.show();this._toggleComplete(t)}i.attr({"aria-hidden":"true"});i.prev().attr({"aria-selected":"false","aria-expanded":"false"});n.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1);n.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,n){var i,r,o,a=this,s=0,l=e.css("box-sizing"),c=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},d=c&&u.down||u,f=function(){a._toggleComplete(n)};"number"===typeof d&&(o=d);"string"===typeof d&&(r=d);r=r||d.easing||u.easing;o=o||d.duration||u.duration;if(!t.length)return e.animate(this.showProps,o,r,f);if(!e.length)return t.animate(this.hideProps,o,r,f);i=e.show().outerHeight();t.animate(this.hideProps,{duration:o,easing:r,step:function(e,t){t.now=Math.round(e)}});e.hide().animate(this.showProps,{duration:o,easing:r,complete:f,step:function(e,n){n.now=Math.round(e);if("height"!==n.prop)"content-box"===l&&(s+=n.now);else if("content"!==a.options.heightStyle){n.now=Math.round(i-t.outerHeight()-s);s=0}}})},_toggleComplete:function(e){var t=e.oldPanel,n=t.prev();this._removeClass(t,"ui-accordion-content-active");this._removeClass(n,"ui-accordion-header-active")._addClass(n,"ui-accordion-header-collapsed");t.length&&(t.parent()[0].className=t.parent()[0].className);this._trigger("activate",null,e)}});var $=e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}t||(t=e.body);t.nodeName||(t=e.body);return t};var j=e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().attr({role:this.options.role,tabIndex:0});this._addClass("ui-menu","ui-widget ui-widget-content");this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target);var i=e(e.ui.safeActiveElement(this.document[0]));if(!this.mouseHandled&&n.not(".ui-state-disabled").length){this.select(t);t.isPropagationStopped()||(this.mouseHandled=true);if(n.has(".ui-menu").length)this.expand(t);else if(!this.element.is(":focus")&&i.closest(".ui-menu").length){this.element.trigger("focus",[true]);this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)}}},"mouseenter .ui-menu-item":function(t){if(this.previousFilter)return;var n=e(t.target).closest(".ui-menu-item"),i=e(t.currentTarget);if(n[0]!==i[0])return;this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active");this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){var n=!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]));n&&this.collapseAll(t)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e);this.mouseHandled=false}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),n=t.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show();n.children().each(function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var n,i,r,o,a=true;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:a=false;i=this.previousFilter||"";o=false;r=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode);clearTimeout(this.filterTimer);r===i?o=true:r=i+r;n=this._filterMenuItems(r);n=o&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n;if(!n.length){r=String.fromCharCode(t.keyCode);n=this._filterMenuItems(r)}if(n.length){this.focus(t,n);this.previousFilter=r;this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)}else delete this.previousFilter}a&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n,i,r,o,a=this,s=this.options.icons.submenu,l=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length);i=l.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev(),i=e("<span>").data("ui-menu-submenu-caret",true);a._addClass(i,"ui-menu-icon","ui-icon "+s);n.attr("aria-haspopup","true").prepend(i);t.attr("aria-labelledby",n.attr("id"))});this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front");t=l.add(this.element);n=t.find(this.options.items);n.not(".ui-menu-item").each(function(){var t=e(this);a._isDivider(t)&&a._addClass(t,"ui-menu-divider","ui-widget-content")});r=n.not(".ui-menu-item, .ui-menu-divider");o=r.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()});this._addClass(r,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper");n.filter(".ui-state-disabled").attr("aria-disabled","true");this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e);this.element.attr("aria-disabled",String(e));this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var n,i,r;this.blur(e,e&&"focus"===e.type);this._scrollIntoView(t);this.active=t.first();i=this.active.children(".ui-menu-item-wrapper");this._addClass(i,null,"ui-state-active");this.options.role&&this.element.attr("aria-activedescendant",i.attr("id"));r=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper");this._addClass(r,null,"ui-state-active");e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);n=t.children(".ui-menu");n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n);this.activeMenu=t.parent();this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,r,o,a,s;if(this._hasScroll()){n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0;i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0;r=t.offset().top-this.activeMenu.offset().top-n-i;o=this.activeMenu.scrollTop();a=this.activeMenu.height();s=t.outerHeight();r<0?this.activeMenu.scrollTop(o+r):r+s>a&&this.activeMenu.scrollTop(o+r-a+s)}},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active");this._trigger("blur",e,{item:this.active});this.active=null},_startOpening:function(e){clearTimeout(this.timer);if("true"!==e.attr("aria-hidden"))return;this.timer=this._delay(function(){this._close();this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true");t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer);this.timer=this._delay(function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element);this._close(i);this.blur(t);this._removeClass(i.find(".ui-state-active"),null,"ui-state-active");this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element);e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(t&&t.length){this._close();this.focus(e,t)}},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();if(t&&t.length){this._open(t.parent());this._delay(function(){this.focus(e,t)})}},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0));i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[t]());this.focus(n,i)},nextPage:function(t){var n,i,r;if(!this.active){this.next(t);return}if(this.isLastItem())return;if(this._hasScroll()){i=this.active.offset().top;r=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){n=e(this);return n.offset().top-i-r<0});this.focus(t,n)}else this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())},previousPage:function(t){var n,i,r;if(!this.active){this.next(t);return}if(this.isFirstItem())return;if(this._hasScroll()){i=this.active.offset().top;r=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){n=e(this);return n.offset().top-i+r>0});this.focus(t,n)}else this.focus(t,this.activeMenu.find(this.options.items).first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,true);this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))})}});e.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,i,r=this.element[0].nodeName.toLowerCase(),o="textarea"===r,a="input"===r;this.isMultiLine=o||!a&&this._isContentEditable(this.element);this.valueMethod=this.element[o||a?"val":"text"];this.isNewMenu=true;this._addClass("ui-autocomplete-input");this.element.attr("autocomplete","off");this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly")){t=true;i=true;n=true;return}t=false;i=false;n=false;var o=e.ui.keyCode;switch(r.keyCode){case o.PAGE_UP:t=true;this._move("previousPage",r);break;case o.PAGE_DOWN:t=true;this._move("nextPage",r);break;case o.UP:t=true;this._keyEvent("previous",r);break;case o.DOWN:t=true;this._keyEvent("next",r);break;case o.ENTER:if(this.menu.active){t=true;r.preventDefault();this.menu.select(r)}break;case o.TAB:this.menu.active&&this.menu.select(r);break;case o.ESCAPE:if(this.menu.element.is(":visible")){this.isMultiLine||this._value(this.term);this.close(r);r.preventDefault()}break;default:n=true;this._searchTimeout(r);break}},keypress:function(i){if(t){t=false;this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault();return}if(n)return;var r=e.ui.keyCode;switch(i.keyCode){case r.PAGE_UP:this._move("previousPage",i);break;case r.PAGE_DOWN:this._move("nextPage",i);break;case r.UP:this._keyEvent("previous",i);break;case r.DOWN:this._keyEvent("next",i);break}},input:function(e){if(i){i=false;e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(e);this._change(e)}});this._initSource();this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._addClass(this.menu.element,"ui-autocomplete","ui-front");this._on(this.menu.element,{mousedown:function(t){t.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,n){var i,r;if(this.isNewMenu){this.isNewMenu=false;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}r=n.item.data("ui-autocomplete-item");false!==this._trigger("focus",t,{item:r})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value);i=n.item.attr("aria-label")||r.value;if(i&&e.trim(i).length){this.liveRegion.children().hide();e("<div>").text(i).appendTo(this.liveRegion)}},menuselect:function(t,n){var i=n.item.data("ui-autocomplete-item"),r=this.previous;if(this.element[0]!==e.ui.safeActiveElement(this.document[0])){this.element.trigger("focus");this.previous=r;this._delay(function(){this.previous=r;this.selectedItem=i})}false!==this._trigger("select",t,{item:i})&&this._value(i.value);this.term=this._value();this.close(t);this.selectedItem=i}});this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t);"source"===e&&this._initSource();"appendTo"===e&&this.menu.element.appendTo(this._appendTo());"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var n=this.menu.element[0];return t.target===this.element[0]||t.target===n||e.contains(n,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0));t&&t[0]||(t=this.element.closest(".ui-front, dialog"));t.length||(t=this.document[0].body);return t},_initSource:function(){var t,n,i=this;if(e.isArray(this.options.source)){t=this.options.source;this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}}else if("string"===typeof this.options.source){n=this.options.source;this.source=function(t,r){i.xhr&&i.xhr.abort();i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}}else this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching);this.searching=this._delay(function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(!t||t&&!n&&!i){this.selectedItem=null;this.search(null,e)}},this.options.delay)},search:function(e,t){e=null!=e?e:this._value();this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(false===this._trigger("search",t))return;return this._search(e)},_search:function(e){this.pending++;this._addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e);this.pending--;this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e));this._trigger("response",null,{content:e});if(!this.options.disabled&&e&&e.length&&!this.cancelSearch){this._suggest(e);this._trigger("open")}else this._close()},close:function(e){this.cancelSearch=true;this._close(e)},_close:function(e){this._off(this.document,"mousedown");if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",e)}},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){if(t.length&&t[0].label&&t[0].value)return t;return e.map(t,function(t){if("string"===typeof t)return{label:t,value:t};return e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t);this.isNewMenu=true;this.menu.refresh();n.show();this._resizeMenu();n.position(e.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next();this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<div>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this.isMultiLine||this._value(this.term);this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(e,t);t.preventDefault()}},_isContentEditable:function(e){if(!e.length)return false;var t=e.prop("contentEditable");if("inherit"===t)return this._isContentEditable(e.parent());return"true"===t}});e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}});e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults;this.liveRegion.children().hide();e("<div>").text(n).appendTo(this.liveRegion)}});var H=e.ui.autocomplete;var V=/ui-corner-([a-z]){2,6}/g;var B=e.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:true,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar");this.refresh()},_destroy:function(){this._callChildMethod("destroy");this.childWidgets.removeData("ui-controlgroup-data");this.element.removeAttr("role");this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,n=[];e.each(this.options.items,function(i,r){var o;var a={};if(!r)return;if("controlgroupLabel"===i){o=t.element.find(r);o.each(function(){var t=e(this);if(t.children(".ui-controlgroup-label-contents").length)return;t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")});t._addClass(o,null,"ui-widget ui-widget-content ui-state-default");n=n.concat(o.get());return}if(!e.fn[i])return;a=t["_"+i+"Options"]?t["_"+i+"Options"]("middle"):{classes:{}};t.element.find(r).each(function(){var r=e(this);var o=r[i]("instance");var s=e.widget.extend({},a);if("button"===i&&r.parent(".ui-spinner").length)return;o||(o=r[i]()[i]("instance"));o&&(s.classes=t._resolveClassesValues(s.classes,o));r[i](s);var l=r[i]("widget");e.data(l[0],"ui-controlgroup-data",o||r[i]("instance"));n.push(l[0])})});this.childWidgets=e(e.unique(n));this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var n=e(this),i=n.data("ui-controlgroup-data");i&&i[t]&&i[t]()})},_updateCornerClass:function(e,t){var n="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all";var i=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,n);this._addClass(e,null,i)},_buildSimpleOptions:function(e,t){var n="vertical"===this.options.direction;var i={classes:{}};i.classes[t]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[e];return i},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");t.classes["ui-spinner-up"]="";t.classes["ui-spinner-down"]="";return t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(t,n){var i={};e.each(t,function(r){var o=n.options.classes[r]||"";o=e.trim(o.replace(V,""));i[r]=(o+" "+t[r]).replace(/\s+/g," ")});return i},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction);this._super(e,t);if("disabled"===e){this._callChildMethod(t?"disable":"enable");return}this.refresh()},refresh:function(){var t,n=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction);"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix");this._initWidgets();t=this.childWidgets;this.options.onlyVisible&&(t=t.filter(":visible"));if(t.length){e.each(["first","last"],function(e,i){var r=t[i]().data("ui-controlgroup-data");if(r&&n["_"+r.widgetName+"Options"]){var o=n["_"+r.widgetName+"Options"](1===t.length?"only":i);o.classes=n._resolveClassesValues(o.classes,r);r.element[r.widgetName](o)}else n._updateCornerClass(t[i](),i)});this._callChildMethod("refresh")}}});e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:true,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,n;var i=this;var r=this._super()||{};this._readType();n=this.element.labels();this.label=e(n[n.length-1]);this.label.length||e.error("No label found for checkboxradio widget");this.originalLabel="";this.label.contents().not(this.element[0]).each(function(){i.originalLabel+=3===this.nodeType?e(this).text():this.outerHTML});this.originalLabel&&(r.label=this.originalLabel);t=this.element[0].disabled;null!=t&&(r.disabled=t);return r},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler();null==this.options.disabled&&(this.options.disabled=this.element[0].disabled);this._setOption("disabled",this.options.disabled);this._addClass("ui-checkboxradio","ui-helper-hidden-accessible");this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget");"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label");this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel);this._enhance();if(e){this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active");this.icon&&this._addClass(this.icon,null,"ui-state-hover")}this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type;"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t;var n=this.element[0].name;var i="input[name='"+e.ui.escapeSelector(n)+"']";if(!n)return e([]);t=this.form.length?e(this.form[0].elements).filter(i):e(i).filter(function(){return 0===e(this).form().length});return t.not(this.element)},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t);this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t);"radio"===this.type&&this._getRadioGroup().each(function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler();if(this.icon){this.icon.remove();this.iconSpace.remove()}},_setOption:function(e,t){if("label"===e&&!t)return;this._super(e,t);if("disabled"===e){this._toggleClass(this.label,null,"ui-state-disabled",t);this.element[0].disabled=t;return}this.refresh()},_updateIcon:function(t){var n="ui-icon ui-icon-background ";if(this.options.icon){if(!this.icon){this.icon=e("<span>");this.iconSpace=e("<span> </span>");this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")}if("checkbox"===this.type){n+=t?"ui-icon-check ui-state-checked":"ui-icon-blank";this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")}else n+="ui-icon-blank";this._addClass(this.icon,"ui-checkboxradio-icon",n);t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked");this.icon.prependTo(this.label).after(this.iconSpace)}else if(void 0!==this.icon){this.icon.remove();this.iconSpace.remove();delete this.icon}},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0]));this.iconSpace&&(e=e.not(this.iconSpace[0]));e.remove();this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e);this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e);null!==this.options.label&&this._updateLabel();t!==this.options.disabled&&this._setOptions({disabled:t})}}]);var z=e.ui.checkboxradio;e.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:true},_getCreateOptions:function(){var e,t=this._super()||{};this.isInput=this.element.is("input");e=this.element[0].disabled;null!=e&&(t.disabled=e);this.originalLabel=this.isInput?this.element.val():this.element.html();this.originalLabel&&(t.label=this.originalLabel);return t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=true);null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||false);this.hasTitle=!!this.element.attr("title");this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label));this._addClass("ui-button","ui-widget");this._setOption("disabled",this.options.disabled);this._enhance();this.element.is("a")&&this._on({keyup:function(t){if(t.keyCode===e.ui.keyCode.SPACE){t.preventDefault();this.element[0].click?this.element[0].click():this.element.trigger("click")}}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button");if(this.options.icon){this._updateIcon("icon",this.options.icon);this._updateTooltip()}},_updateTooltip:function(){this.title=this.element.attr("title");this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,n){var i="iconPosition"!==t,r=i?this.options.iconPosition:n,o="top"===r||"bottom"===r;if(this.icon)i&&this._removeClass(this.icon,null,this.options.icon);else{this.icon=e("<span>");this._addClass(this.icon,"ui-button-icon","ui-icon");this.options.showLabel||this._addClass("ui-button-icon-only")}i&&this._addClass(this.icon,null,n);this._attachIcon(r);if(o){this._addClass(this.icon,null,"ui-widget-icon-block");this.iconSpace&&this.iconSpace.remove()}else{if(!this.iconSpace){this.iconSpace=e("<span> </span>");this._addClass(this.iconSpace,"ui-button-icon-space")}this._removeClass(this.icon,null,"ui-wiget-icon-block");this._attachIconSpace(r)}},_destroy:function(){this.element.removeAttr("role");this.icon&&this.icon.remove();this.iconSpace&&this.iconSpace.remove();this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,n=void 0===e.icon?this.options.icon:e.icon;t||n||(e.showLabel=true);this._super(e)},_setOption:function(e,t){if("icon"===e)if(t)this._updateIcon(e,t);else if(this.icon){this.icon.remove();this.iconSpace&&this.iconSpace.remove()}"iconPosition"===e&&this._updateIcon(e,t);if("showLabel"===e){this._toggleClass("ui-button-icon-only",null,!t);this._updateTooltip()}if("label"===e)if(this.isInput)this.element.val(t);else{this.element.html(t);if(this.icon){this._attachIcon(this.options.iconPosition);this._attachIconSpace(this.options.iconPosition)}}this._super(e,t);if("disabled"===e){this._toggleClass(null,"ui-state-disabled",t);this.element[0].disabled=t;t&&this.element.blur()}},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e});this._updateTooltip()}});if(false!==e.uiBackCompat){e.widget("ui.button",e.ui.button,{options:{text:true,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text);!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel);if(this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary)this.options.icon&&(this.options.icons.primary=this.options.icon);else if(this.options.icons.primary)this.options.icon=this.options.icons.primary;else{this.options.icon=this.options.icons.secondary;this.options.iconPosition="end"}this._super()},_setOption:function(e,t){if("text"===e){this._super("showLabel",t);return}"showLabel"===e&&(this.options.text=t);"icon"===e&&(this.options.icons.primary=t);if("icons"===e)if(t.primary){this._super("icon",t.primary);this._super("iconPosition","beginning")}else if(t.secondary){this._super("icon",t.secondary);this._super("iconPosition","end")}this._superApply(arguments)}});e.fn.button=function(t){return function(){if(!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type"))return t.apply(this,arguments);e.ui.checkboxradio||e.error("Checkboxradio widget missing");if(0===arguments.length)return this.checkboxradio({icon:false});return this.checkboxradio.apply(this,arguments)}}(e.fn.button);e.fn.buttonset=function(){e.ui.controlgroup||e.error("Controlgroup widget missing");if("option"===arguments[0]&&"items"===arguments[1]&&arguments[2])return this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]);if("option"===arguments[0]&&"items"===arguments[1])return this.controlgroup.apply(this,[arguments[0],"items.button"]);"object"===typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items});return this.controlgroup.apply(this,arguments)}}var U=e.ui.button;e.extend(e.ui,{datepicker:{version:"1.12.1"}});var G;function W(e){var t,n;while(e.length&&e[0]!==document){t=e.css("position");if("absolute"===t||"relative"===t||"fixed"===t){n=parseInt(e.css("zIndex"),10);if(!isNaN(n)&&0!==n)return n}e=e.parent()}return 0}function K(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};e.extend(this._defaults,this.regional[""]);this.regional.en=e.extend(true,{},this.regional[""]);this.regional["en-US"]=e.extend(true,{},this.regional.en);this.dpDiv=Y(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}e.extend(K.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){Q(this._defaults,e||{});return this},_attachDatepicker:function(t,n){var i,r,o;i=t.nodeName.toLowerCase();r="div"===i||"span"===i;if(!t.id){this.uuid+=1;t.id="dp"+this.uuid}o=this._newInst(e(t),r);o.settings=e.extend({},n||{});"input"===i?this._connectDatepicker(t,o):r&&this._inlineDatepicker(t,o)},_newInst:function(t,n){var i=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:i,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?Y(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var i=e(t);n.append=e([]);n.trigger=e([]);if(i.hasClass(this.markerClassName))return;this._attachments(i,n);i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp);this._autoSize(n);e.data(t,"datepicker",n);n.settings.disabled&&this._disableDatepicker(t)},_attachments:function(t,n){var i,r,o,a=this._get(n,"appendText"),s=this._get(n,"isRTL");n.append&&n.append.remove();if(a){n.append=e("<span class='"+this._appendClass+"'>"+a+"</span>");t[s?"before":"after"](n.append)}t.off("focus",this._showDatepicker);n.trigger&&n.trigger.remove();i=this._get(n,"showOn");"focus"!==i&&"both"!==i||t.on("focus",this._showDatepicker);if("button"===i||"both"===i){r=this._get(n,"buttonText");o=this._get(n,"buttonImage");n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:o,alt:r,title:r}):e("<button type='button'></button>").addClass(this._triggerClass).html(o?e("<img/>").attr({src:o,alt:r,title:r}):r));t[s?"before":"after"](n.trigger);n.trigger.on("click",function(){if(e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0])e.datepicker._hideDatepicker();else if(e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]){e.datepicker._hideDatepicker();e.datepicker._showDatepicker(t[0])}else e.datepicker._showDatepicker(t[0]);return false})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,i,r,o=new Date(2009,11,20),a=this._get(e,"dateFormat");if(a.match(/[DM]/)){t=function(e){n=0;i=0;for(r=0;r<e.length;r++)if(e[r].length>n){n=e[r].length;i=r}return i};o.setMonth(t(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort")));o.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())}e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(t,n){var i=e(t);if(i.hasClass(this.markerClassName))return;i.addClass(this.markerClassName).append(n.dpDiv);e.data(t,"datepicker",n);this._setDate(n,this._getDefaultDate(n),true);this._updateDatepicker(n);this._updateAlternate(n);n.settings.disabled&&this._disableDatepicker(t);n.dpDiv.css("display","block")},_dialogDatepicker:function(t,n,i,r,o){var a,s,l,c,u,d=this._dialogInst;if(!d){this.uuid+=1;a="dp"+this.uuid;this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.on("keydown",this._doKeyDown);e("body").append(this._dialogInput);d=this._dialogInst=this._newInst(this._dialogInput,false);d.settings={};e.data(this._dialogInput[0],"datepicker",d)}Q(d.settings,r||{});n=n&&n.constructor===Date?this._formatDate(d,n):n;this._dialogInput.val(n);this._pos=o?o.length?o:[o.pageX,o.pageY]:null;if(!this._pos){s=document.documentElement.clientWidth;l=document.documentElement.clientHeight;c=document.documentElement.scrollLeft||document.body.scrollLeft;u=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[s/2-100+c,l/2-150+u]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");d.settings.onSelect=i;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);e.blockUI&&e.blockUI(this.dpDiv);e.data(this._dialogInput[0],"datepicker",d);return this},_destroyDatepicker:function(t){var n,i=e(t),r=e.data(t,"datepicker");if(!i.hasClass(this.markerClassName))return;n=t.nodeName.toLowerCase();e.removeData(t,"datepicker");if("input"===n){r.append.remove();r.trigger.remove();i.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)}else"div"!==n&&"span"!==n||i.removeClass(this.markerClassName).empty();G===r&&(G=null)},_enableDatepicker:function(t){var n,i,r=e(t),o=e.data(t,"datepicker");if(!r.hasClass(this.markerClassName))return;n=t.nodeName.toLowerCase();if("input"===n){t.disabled=false;o.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if("div"===n||"span"===n){i=r.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled");i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var n,i,r=e(t),o=e.data(t,"datepicker");if(!r.hasClass(this.markerClassName))return;n=t.nodeName.toLowerCase();if("input"===n){t.disabled=true;o.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if("div"===n||"span"===n){i=r.children("."+this._inlineClass);i.children().addClass("ui-state-disabled");i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e});this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e)return false;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return true;return false},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,n,i){var r,o,a,s,l=this._getInst(t);if(2===arguments.length&&"string"===typeof n)return"defaults"===n?e.extend({},e.datepicker._defaults):l?"all"===n?e.extend({},l.settings):this._get(l,n):null;r=n||{};if("string"===typeof n){r={};r[n]=i}if(l){this._curInst===l&&this._hideDatepicker();o=this._getDateDatepicker(t,true);a=this._getMinMaxDate(l,"min");s=this._getMinMaxDate(l,"max");Q(l.settings,r);null!==a&&void 0!==r.dateFormat&&void 0===r.minDate&&(l.settings.minDate=this._formatDate(l,a));null!==s&&void 0!==r.dateFormat&&void 0===r.maxDate&&(l.settings.maxDate=this._formatDate(l,s));"disabled"in r&&(r.disabled?this._disableDatepicker(t):this._enableDatepicker(t));this._attachments(e(t),l);this._autoSize(l);this._setDate(l,o);this._updateAlternate(l);this._updateDatepicker(l)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);if(n){this._setDate(n,t);this._updateDatepicker(n);this._updateAlternate(n)}},_getDateDatepicker:function(e,t){var n=this._getInst(e);n&&!n.inline&&this._setDateFromField(n,t);return n?this._getDate(n):null},_doKeyDown:function(t){var n,i,r,o=e.datepicker._getInst(t.target),a=true,s=o.dpDiv.is(".ui-datepicker-rtl");o._keyEvent=true;if(e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker();a=false;break;case 13:r=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",o.dpDiv);r[0]&&e.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,r[0]);n=e.datepicker._get(o,"onSelect");if(n){i=e.datepicker._formatDate(o);n.apply(o.input?o.input[0]:null,[i,o])}else e.datepicker._hideDatepicker();return false;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target);a=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target);a=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?1:-1,"D");a=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D");a=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,s?-1:1,"D");a=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D");a=t.ctrlKey||t.metaKey;break;default:a=false}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):a=false;if(a){t.preventDefault();t.stopPropagation()}},_doKeyPress:function(t){var n,i,r=e.datepicker._getInst(t.target);if(e.datepicker._get(r,"constrainInput")){n=e.datepicker._possibleChars(e.datepicker._get(r,"dateFormat"));i=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode);return t.ctrlKey||t.metaKey||i<" "||!n||n.indexOf(i)>-1}},_doKeyUp:function(t){var n,i=e.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,e.datepicker._getFormatConfig(i));if(n){e.datepicker._setDateFromField(i);e.datepicker._updateAlternate(i);e.datepicker._updateDatepicker(i)}}catch(e){}return true},_showDatepicker:function(t){t=t.target||t;"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]);if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)return;var n,i,r,o,a,s,l;n=e.datepicker._getInst(t);if(e.datepicker._curInst&&e.datepicker._curInst!==n){e.datepicker._curInst.dpDiv.stop(true,true);n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])}i=e.datepicker._get(n,"beforeShow");r=i?i.apply(t,[t,n]):{};if(false===r)return;Q(n.settings,r);n.lastVal=null;e.datepicker._lastInput=t;e.datepicker._setDateFromField(n);e.datepicker._inDialog&&(t.value="");if(!e.datepicker._pos){e.datepicker._pos=e.datepicker._findPos(t);e.datepicker._pos[1]+=t.offsetHeight}o=false;e(t).parents().each(function(){o|="fixed"===e(this).css("position");return!o});a={left:e.datepicker._pos[0],top:e.datepicker._pos[1]};e.datepicker._pos=null;n.dpDiv.empty();n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});e.datepicker._updateDatepicker(n);a=e.datepicker._checkOffset(n,a,o);n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"});if(!n.inline){s=e.datepicker._get(n,"showAnim");l=e.datepicker._get(n,"duration");n.dpDiv.css("z-index",W(e(t))+1);e.datepicker._datepickerShowing=true;e.effects&&e.effects.effect[s]?n.dpDiv.show(s,e.datepicker._get(n,"showOptions"),l):n.dpDiv[s||"show"](s?l:null);e.datepicker._shouldFocusInput(n)&&n.input.trigger("focus");e.datepicker._curInst=n}},_updateDatepicker:function(t){this.maxRows=4;G=t;t.dpDiv.empty().append(this._generateHTML(t));this._attachHandlers(t);var n,i=this._getNumberOfMonths(t),r=i[1],o=17,a=t.dpDiv.find("."+this._dayOverClass+" a");a.length>0&&X.apply(a.get(0));t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");r>1&&t.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",o*r+"em");t.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi");t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.trigger("focus");if(t.yearshtml){n=t.yearshtml;setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml);n=t.yearshtml=null},0)}},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,i){var r=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(i?0:e(document).scrollTop());n.left-=this._get(t,"isRTL")?r-a:0;n.left-=i&&n.left===t.input.offset().left?e(document).scrollLeft():0;n.top-=i&&n.top===t.input.offset().top+s?e(document).scrollTop():0;n.left-=Math.min(n.left,n.left+r>l&&l>r?Math.abs(n.left+r-l):0);n.top-=Math.min(n.top,n.top+o>c&&c>o?Math.abs(o+s):0);return n},_findPos:function(t){var n,i=this._getInst(t),r=this._get(i,"isRTL");while(t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t)))t=t[r?"previousSibling":"nextSibling"];n=e(t).offset();return[n.left,n.top]},_hideDatepicker:function(t){var n,i,r,o,a=this._curInst;if(!a||t&&a!==e.data(t,"datepicker"))return;if(this._datepickerShowing){n=this._get(a,"showAnim");i=this._get(a,"duration");r=function(){e.datepicker._tidyDialog(a)};e.effects&&(e.effects.effect[n]||e.effects[n])?a.dpDiv.hide(n,e.datepicker._get(a,"showOptions"),i,r):a.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,r);n||r();this._datepickerShowing=false;o=this._get(a,"onClose");o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]);this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(e.blockUI){e.unblockUI();e("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst)return;var n=e(t.target),i=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&0===n.parents("#"+e.datepicker._mainDivId).length&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&!(e.datepicker._inDialog&&e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==i)&&e.datepicker._hideDatepicker()},_adjustDate:function(t,n,i){var r=e(t),o=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(o,n+("M"===i?this._get(o,"showCurrentAtPos"):0),i);this._updateDatepicker(o)},_gotoToday:function(t){var n,i=e(t),r=this._getInst(i[0]);if(this._get(r,"gotoCurrent")&&r.currentDay){r.selectedDay=r.currentDay;r.drawMonth=r.selectedMonth=r.currentMonth;r.drawYear=r.selectedYear=r.currentYear}else{n=new Date;r.selectedDay=n.getDate();r.drawMonth=r.selectedMonth=n.getMonth();r.drawYear=r.selectedYear=n.getFullYear()}this._notifyChange(r);this._adjustDate(i)},_selectMonthYear:function(t,n,i){var r=e(t),o=this._getInst(r[0]);o["selected"+("M"===i?"Month":"Year")]=o["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10);this._notifyChange(o);this._adjustDate(r)},_selectDay:function(t,n,i,r){var o,a=e(t);if(e(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0]))return;o=this._getInst(a[0]);o.selectedDay=o.currentDay=e("a",r).html();o.selectedMonth=o.currentMonth=n;o.selectedYear=o.currentYear=i;this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var i,r=e(t),o=this._getInst(r[0]);n=null!=n?n:this._formatDate(o);o.input&&o.input.val(n);this._updateAlternate(o);i=this._get(o,"onSelect");i?i.apply(o.input?o.input[0]:null,[n,o]):o.input&&o.input.trigger("change");if(o.inline)this._updateDatepicker(o);else{this._hideDatepicker();this._lastInput=o.input[0];"object"!==typeof o.input[0]&&o.input.trigger("focus");this._lastInput=null}},_updateAlternate:function(t){var n,i,r,o=this._get(t,"altField");if(o){n=this._get(t,"altFormat")||this._get(t,"dateFormat");i=this._getDate(t);r=this.formatDate(n,i,this._getFormatConfig(t));e(o).val(r)}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));t=n.getTime();n.setMonth(0);n.setDate(1);return Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,i){if(null==t||null==n)throw"Invalid arguments";n="object"===typeof n?n.toString():n+"";if(""===n)return null;var r,o,a,s=0,l=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!==typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),u=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,d=(i?i.dayNames:null)||this._defaults.dayNames,f=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,p=(i?i.monthNames:null)||this._defaults.monthNames,h=-1,v=-1,g=-1,m=-1,b=false,y,x=function(e){var n=r+1<t.length&&t.charAt(r+1)===e;n&&r++;return n},S=function(e){var t=x(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,r="y"===e?i:1,o=new RegExp("^\\d{"+r+","+i+"}"),a=n.substring(s).match(o);if(!a)throw"Missing number at position "+s;s+=a[0].length;return parseInt(a[0],10)},w=function(t,i,r){var o=-1,a=e.map(x(t)?r:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(a,function(e,t){var i=t[1];if(n.substr(s,i.length).toLowerCase()===i.toLowerCase()){o=t[0];s+=i.length;return false}});if(-1!==o)return o+1;throw"Unknown name at position "+s},q=function(){if(n.charAt(s)!==t.charAt(r))throw"Unexpected literal at position "+s;s++};for(r=0;r<t.length;r++)if(b)"'"!==t.charAt(r)||x("'")?q():b=false;else switch(t.charAt(r)){case"d":g=S("d");break;case"D":w("D",u,d);break;case"o":m=S("o");break;case"m":v=S("m");break;case"M":v=w("M",f,p);break;case"y":h=S("y");break;case"@":y=new Date(S("@"));h=y.getFullYear();v=y.getMonth()+1;g=y.getDate();break;case"!":y=new Date((S("!")-this._ticksTo1970)/1e4);h=y.getFullYear();v=y.getMonth()+1;g=y.getDate();break;case"'":x("'")?q():b=true;break;default:q()}if(s<n.length){a=n.substr(s);if(!/^\s+/.test(a))throw"Extra/unparsed characters found in date: "+a}-1===h?h=(new Date).getFullYear():h<100&&(h+=(new Date).getFullYear()-(new Date).getFullYear()%100+(h<=c?0:-100));if(m>-1){v=1;g=m;do{o=this._getDaysInMonth(h,v-1);if(g<=o)break;v++;g-=o}while(true)}y=this._daylightSavingAdjust(new Date(h,v-1,g));if(y.getFullYear()!==h||y.getMonth()+1!==v||y.getDate()!==g)throw"Invalid date";return y},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var i,r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,o=(n?n.dayNames:null)||this._defaults.dayNames,a=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,l=function(t){var n=i+1<e.length&&e.charAt(i+1)===t;n&&i++;return n},c=function(e,t,n){var i=""+t;if(l(e))while(i.length<n)i="0"+i;return i},u=function(e,t,n,i){return l(e)?i[t]:n[t]},d="",f=false;if(t)for(i=0;i<e.length;i++)if(f)"'"!==e.charAt(i)||l("'")?d+=e.charAt(i):f=false;else switch(e.charAt(i)){case"d":d+=c("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),r,o);break;case"o":d+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),a,s);break;case"y":d+=l("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":f=true;break;default:d+=e.charAt(i)}return d},_possibleChars:function(e){var t,n="",i=false,r=function(n){var i=t+1<e.length&&e.charAt(t+1)===n;i&&t++;return i};for(t=0;t<e.length;t++)if(i)"'"!==e.charAt(t)||r("'")?n+=e.charAt(t):i=false;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":r("'")?n+="'":i=true;break;default:n+=e.charAt(t)}return n},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal)return;var n=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),o=r,a=this._getFormatConfig(e);try{o=this.parseDate(n,i,a)||r}catch(e){i=t?"":i}e.selectedDay=o.getDate();e.drawMonth=e.selectedMonth=o.getMonth();e.drawYear=e.selectedYear=o.getFullYear();e.currentDay=i?o.getDate():0;e.currentMonth=i?o.getMonth():0;e.currentYear=i?o.getFullYear():0;this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,i){var r=function(e){var t=new Date;t.setDate(t.getDate()+e);return t},o=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(e){}var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,r=i.getFullYear(),o=i.getMonth(),a=i.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(n);while(l){switch(l[2]||"d"){case"d":case"D":a+=parseInt(l[1],10);break;case"w":case"W":a+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10);a=Math.min(a,e.datepicker._getDaysInMonth(r,o));break;case"y":case"Y":r+=parseInt(l[1],10);a=Math.min(a,e.datepicker._getDaysInMonth(r,o));break}l=s.exec(n)}return new Date(r,o,a)},a=null==n||""===n?i:"string"===typeof n?o(n):"number"===typeof n?isNaN(n)?i:r(n):new Date(n.getTime());a=a&&"Invalid Date"===a.toString()?i:a;if(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0)}return this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(e){if(!e)return null;e.setHours(e.getHours()>12?e.getHours()+2:0);return e},_setDate:function(e,t,n){var i=!t,r=e.selectedMonth,o=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate();e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth();e.drawYear=e.selectedYear=e.currentYear=a.getFullYear();r===e.selectedMonth&&o===e.selectedYear||n||this._notifyChange(e);this._adjustInstDate(e);e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(i,-n,"M")},next:function(){e.datepicker._adjustDate(i,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(i)},selectDay:function(){e.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){e.datepicker._selectMonthYear(i,this,"M");return false},selectYear:function(){e.datepicker._selectMonthYear(i,this,"Y");return false}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,i,r,o,a,s,l,c,u,d,f,p,h,v,g,m,b,y,x,S,w,q,C,_,I,E,D,A,T,O,k,L,P,M,N,R,F,$,j=new Date,H=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),V=this._get(e,"isRTL"),B=this._get(e,"showButtonPanel"),z=this._get(e,"hideIfNoPrevNext"),U=this._get(e,"navigationAsDateFormat"),G=this._getNumberOfMonths(e),W=this._get(e,"showCurrentAtPos"),K=this._get(e,"stepMonths"),Y=1!==G[0]||1!==G[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-W,ee=e.drawYear;if(Z<0){Z+=12;ee--}if(J){t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-G[0]*G[1]+1,J.getDate()));t=Q&&t<Q?Q:t;while(this._daylightSavingAdjust(new Date(ee,Z,1))>t){Z--;if(Z<0){Z=11;ee--}}}e.drawMonth=Z;e.drawYear=ee;n=this._get(e,"prevText");n=U?this.formatDate(n,this._daylightSavingAdjust(new Date(ee,Z-K,1)),this._getFormatConfig(e)):n;i=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"e":"w")+"'>"+n+"</span></a>":z?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"e":"w")+"'>"+n+"</span></a>";r=this._get(e,"nextText");r=U?this.formatDate(r,this._daylightSavingAdjust(new Date(ee,Z+K,1)),this._getFormatConfig(e)):r;o=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"w":"e")+"'>"+r+"</span></a>":z?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"w":"e")+"'>"+r+"</span></a>";a=this._get(e,"currentText");s=this._get(e,"gotoCurrent")&&e.currentDay?X:H;a=U?this.formatDate(a,s,this._getFormatConfig(e)):a;l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>";c=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(V?l:"")+(this._isInRange(e,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(V?"":l)+"</div>":"";u=parseInt(this._get(e,"firstDay"),10);u=isNaN(u)?0:u;d=this._get(e,"showWeek");f=this._get(e,"dayNames");p=this._get(e,"dayNamesMin");h=this._get(e,"monthNames");v=this._get(e,"monthNamesShort");g=this._get(e,"beforeShowDay");m=this._get(e,"showOtherMonths");b=this._get(e,"selectOtherMonths");y=this._getDefaultDate(e);x="";for(w=0;w<G[0];w++){q="";this.maxRows=4;for(C=0;C<G[1];C++){_=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay));I=" ui-corner-all";E="";if(Y){E+="<div class='ui-datepicker-group";if(G[1]>1)switch(C){case 0:E+=" ui-datepicker-group-first";I=" ui-corner-"+(V?"right":"left");break;case G[1]-1:E+=" ui-datepicker-group-last";I=" ui-corner-"+(V?"left":"right");break;default:E+=" ui-datepicker-group-middle";I="";break}E+="'>"}E+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&0===w?V?o:i:"")+(/all|right/.test(I)&&0===w?V?i:o:"")+this._generateMonthYearHeader(e,Z,ee,Q,J,w>0||C>0,h,v)+"</div><table class='ui-datepicker-calendar'><thead><tr>";D=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(S=0;S<7;S++){A=(S+u)%7;D+="<th scope='col'"+((S+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+f[A]+"'>"+p[A]+"</span></th>"}E+=D+"</tr></thead><tbody>";T=this._getDaysInMonth(ee,Z);ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,T));O=(this._getFirstDayOfMonth(ee,Z)-u+7)%7;k=Math.ceil((O+T)/7);L=Y&&this.maxRows>k?this.maxRows:k;this.maxRows=L;P=this._daylightSavingAdjust(new Date(ee,Z,1-O));for(M=0;M<L;M++){E+="<tr>";N=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"";for(S=0;S<7;S++){R=g?g.apply(e.input?e.input[0]:null,[P]):[true,""];F=P.getMonth()!==Z;$=F&&!b||!R[0]||Q&&P<Q||J&&P>J;N+="<td class='"+((S+u+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===_.getTime()&&Z===e.selectedMonth&&e._keyEvent||y.getTime()===P.getTime()&&y.getTime()===_.getTime()?" "+this._dayOverClass:"")+($?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!m?"":" "+R[1]+(P.getTime()===X.getTime()?" "+this._currentClass:"")+(P.getTime()===H.getTime()?" ui-datepicker-today":""))+"'"+(F&&!m||!R[2]?"":" title='"+R[2].replace(/'/g,"&#39;")+"'")+($?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!m?"&#xa0;":$?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===H.getTime()?" ui-state-highlight":"")+(P.getTime()===X.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>";P.setDate(P.getDate()+1);P=this._daylightSavingAdjust(P)}E+=N+"</tr>"}Z++;if(Z>11){Z=0;ee++}E+="</tbody></table>"+(Y?"</div>"+(G[0]>0&&C===G[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");q+=E}x+=q}x+=c;e._keyEvent=false;return x},_generateMonthYearHeader:function(e,t,n,i,r,o,a,s){var l,c,u,d,f,p,h,v,g=this._get(e,"changeMonth"),m=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",x="";if(o||!g)x+="<span class='ui-datepicker-month'>"+a[t]+"</span>";else{l=i&&i.getFullYear()===n;c=r&&r.getFullYear()===n;x+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(u=0;u<12;u++)(!l||u>=i.getMonth())&&(!c||u<=r.getMonth())&&(x+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+s[u]+"</option>");x+="</select>"}b||(y+=x+(o||!(g&&m)?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(o||!m)y+="<span class='ui-datepicker-year'>"+n+"</span>";else{d=this._get(e,"yearRange").split(":");f=(new Date).getFullYear();p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?f+parseInt(e,10):parseInt(e,10);return isNaN(t)?f:t};h=p(d[0]);v=Math.max(h,p(d[1]||""));h=i?Math.max(h,i.getFullYear()):h;v=r?Math.min(v,r.getFullYear()):v;e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;h<=v;h++)e.yearshtml+="<option value='"+h+"'"+(h===n?" selected='selected'":"")+">"+h+"</option>";e.yearshtml+="</select>";y+=e.yearshtml;e.yearshtml=null}}y+=this._get(e,"yearSuffix");b&&(y+=(o||!(g&&m)?"&#xa0;":"")+x);y+="</div>";return y},_adjustInstDate:function(e,t,n){var i=e.selectedYear+("Y"===n?t:0),r=e.selectedMonth+("M"===n?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(i,r))+("D"===n?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,r,o)));e.selectedDay=a.getDate();e.drawMonth=e.selectedMonth=a.getMonth();e.drawYear=e.selectedYear=a.getFullYear();"M"!==n&&"Y"!==n||this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),r=n&&t<n?n:t;return i&&r>i?i:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"===typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var r=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(n,i+(t<0?t:r[0]*r[1]),1));t<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth()));return this._isInRange(e,o)},_isInRange:function(e,t){var n,i,r=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),a=null,s=null,l=this._get(e,"yearRange");if(l){n=l.split(":");i=(new Date).getFullYear();a=parseInt(n[0],10);s=parseInt(n[1],10);n[0].match(/[+\-].*/)&&(a+=i);n[1].match(/[+\-].*/)&&(s+=i)}return(!r||t.getTime()>=r.getTime())&&(!o||t.getTime()<=o.getTime())&&(!a||t.getFullYear()>=a)&&(!s||t.getFullYear()<=s)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");t="string"!==typeof t?t:(new Date).getFullYear()%100+parseInt(t,10);return{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){if(!t){e.currentDay=e.selectedDay;e.currentMonth=e.selectedMonth;e.currentYear=e.selectedYear}var r=t?"object"===typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}});function Y(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",n,function(){e(this).removeClass("ui-state-hover");-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",n,X)}function X(){if(!e.datepicker._isDisabledDatepicker(G.inline?G.dpDiv.parent()[0]:G.input[0])){e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");e(this).addClass("ui-state-hover");-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover")}}function Q(t,n){e.extend(t,n);for(var i in n)null==n[i]&&(t[i]=n[i]);return t}e.fn.datepicker=function(t){if(!this.length)return this;if(!e.datepicker.initialized){e(document).on("mousedown",e.datepicker._checkExternalClick);e.datepicker.initialized=true}0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);if("string"===typeof t&&("isDisabled"===t||"getDate"===t||"widget"===t))return e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n));if("option"===t&&2===arguments.length&&"string"===typeof arguments[1])return e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n));return this.each(function(){"string"===typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)})};e.datepicker=new K;e.datepicker.initialized=false;e.datepicker.uuid=(new Date).getTime();e.datepicker.version="1.12.1";var J=e.datepicker;var Z=e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var ee=false;e(document).on("mouseup",function(){ee=false});var te=e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(n){if(true===e.data(n.target,t.widgetName+".preventClickEvent")){e.removeData(n.target,t.widgetName+".preventClickEvent");n.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.off("."+this.widgetName);this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(ee)return;this._mouseMoved=false;this._mouseStarted&&this._mouseUp(t);this._mouseDownEvent=t;var n=this,i=1===t.which,r=!("string"!==typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;if(!i||r||!this._mouseCapture(t))return true;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=true},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=false!==this._mouseStart(t);if(!this._mouseStarted){t.preventDefault();return true}}true===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(e){return n._mouseMove(e)};this._mouseUpDelegate=function(e){return n._mouseUp(e)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);t.preventDefault();ee=true;return true},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=true;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}(t.which||t.button)&&(this._mouseMoved=true);if(this._mouseStarted){this._mouseDrag(t);return t.preventDefault()}if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=false!==this._mouseStart(this._mouseDownEvent,t);this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)}return!this._mouseStarted},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",true);this._mouseStop(t)}if(this._mouseDelayTimer){clearTimeout(this._mouseDelayTimer);delete this._mouseDelayTimer}this.ignoreMissingWhich=false;ee=false;t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}});var ne=e.ui.plugin={add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i){o.plugins[r]=o.plugins[r]||[];o.plugins[r].push([n,i[r]])}},call:function(e,t,n,i){var r,o=e.plugins[t];if(!o)return;if(!i&&(!e.element[0].parentNode||11===e.element[0].parentNode.nodeType))return;for(r=0;r<o.length;r++)e.options[o[r][0]]&&o[r][1].apply(e.element,n)}};var ie=e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")};e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this._addClass("ui-draggable");this._setHandleClassName();this._mouseInit()},_setOption:function(e,t){this._super(e,t);if("handle"===e){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return}this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;if(this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0)return false;this.handle=this._getHandle(t);if(!this.handle)return false;this._blurActiveElement(t);this._blockFrames(true===n.iframeFix?"iframe":n.iframeFix);return true},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]),i=e(t.target);if(i.closest(n).length)return;e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;this.helper=this._createHelper(t);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();e.ui.ddmanager&&(e.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(t);this.originalPosition=this.position=this._generatePosition(t,false);this.originalPageX=t.pageX;this.originalPageY=t.pageY;n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt);this._setContainment();if(false===this._trigger("start",t)){this._clear();return false}this._cacheHelperProportions();e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t);this._mouseDrag(t,true);e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t);return true},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset());this.position=this._generatePosition(t,true);this.positionAbs=this._convertPositionTo("absolute");if(!n){var i=this._uiHash();if(false===this._trigger("drag",t,i)){this._mouseUp(new e.Event("mouseup",t));return false}this.position=i.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";e.ui.ddmanager&&e.ui.ddmanager.drag(this,t);return false},_mouseStop:function(t){var n=this,i=false;e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t));if(this.dropped){i=this.dropped;this.dropped=false}"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||true===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){false!==n._trigger("stop",t)&&n._clear()}):false!==this._trigger("stop",t)&&this._clear();return false},_mouseUp:function(t){this._unblockFrames();e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t);this.handleElement.is(t.target)&&this.element.trigger("focus");return e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear();return this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper),r=i?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo);i&&r[0]===this.element[0]&&this._setPositionRelative();r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute");return r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"===typeof t&&(t=t.split(" "));e.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];if("absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0});return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options,o=this.document[0];this.relativeContainer=null;if(!r.containment){this.containment=null;return}if("window"===r.containment){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if("document"===r.containment){this.containment=[0,0,e(o).width()-this.helperProportions.width-this.margins.left,(e(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(r.containment.constructor===Array){this.containment=r.containment;return}"parent"===r.containment&&(r.containment=this.helper[0].parentNode);n=e(r.containment);i=n[0];if(!i)return;t=/(scroll|auto)/.test(n.css("overflow"));this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=n},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,r,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()});if(t){if(this.containment){if(this.relativeContainer){i=this.relativeContainer.offset();n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else n=this.containment;e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left);e.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top);e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left);e.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)}if(a.grid){r=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY;c=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-a.grid[1]:r+a.grid[1]:r;o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX;l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o}"y"===a.axis&&(l=this.originalPageX);"x"===a.axis&&(c=this.originalPageY)}return{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=false;this.destroyOnClear&&this.destroy()},_trigger:function(t,n,i){i=i||this._uiHash();e.ui.plugin.call(this,t,[n,i,this],true);if(/^(drag|start|stop)/.test(t)){this.positionAbs=this._convertPositionTo("absolute");i.offset=this.positionAbs}return e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,i){var r=e.extend({},n,{item:i.element});i.sortables=[];e(i.options.connectToSortable).each(function(){var n=e(this).sortable("instance");if(n&&!n.options.disabled){i.sortables.push(n);n.refreshPositions();n._trigger("activate",t,r)}})},stop:function(t,n,i){var r=e.extend({},n,{item:i.element});i.cancelHelperRemoval=false;e.each(i.sortables,function(){var e=this;if(e.isOver){e.isOver=0;i.cancelHelperRemoval=true;e.cancelHelperRemoval=false;e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")};e._mouseStop(t);e.options.helper=e.options._helper}else{e.cancelHelperRemoval=true;e._trigger("deactivate",t,r)}})},drag:function(t,n,i){e.each(i.sortables,function(){var r=false,o=this;o.positionAbs=i.positionAbs;o.helperProportions=i.helperProportions;o.offset.click=i.offset.click;if(o._intersectsWith(o.containerCache)){r=true;e.each(i.sortables,function(){this.positionAbs=i.positionAbs;this.helperProportions=i.helperProportions;this.offset.click=i.offset.click;this!==o&&this._intersectsWith(this.containerCache)&&e.contains(o.element[0],this.element[0])&&(r=false);return r})}if(r){if(!o.isOver){o.isOver=1;i._parent=n.helper.parent();o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",true);o.options._helper=o.options.helper;o.options.helper=function(){return n.helper[0]};t.target=o.currentItem[0];o._mouseCapture(t,true);o._mouseStart(t,true,true);o.offset.click.top=i.offset.click.top;o.offset.click.left=i.offset.click.left;o.offset.parent.left-=i.offset.parent.left-o.offset.parent.left;o.offset.parent.top-=i.offset.parent.top-o.offset.parent.top;i._trigger("toSortable",t);i.dropped=o.element;e.each(i.sortables,function(){this.refreshPositions()});i.currentItem=i.element;o.fromOutside=i}if(o.currentItem){o._mouseDrag(t);n.position=o.position}}else if(o.isOver){o.isOver=0;o.cancelHelperRemoval=true;o.options._revert=o.options.revert;o.options.revert=false;o._trigger("out",t,o._uiHash(o));o._mouseStop(t,true);o.options.revert=o.options._revert;o.options.helper=o.options._helper;o.placeholder&&o.placeholder.remove();n.helper.appendTo(i._parent);i._refreshOffsets(t);n.position=i._generatePosition(t,true);i._trigger("fromSortable",t);i.dropped=false;e.each(i.sortables,function(){this.refreshPositions()})}})}});e.ui.plugin.add("draggable","cursor",{start:function(t,n,i){var r=e("body"),o=i.options;r.css("cursor")&&(o._cursor=r.css("cursor"));r.css("cursor",o.cursor)},stop:function(t,n,i){var r=i.options;r._cursor&&e("body").css("cursor",r._cursor)}});e.ui.plugin.add("draggable","opacity",{start:function(t,n,i){var r=e(n.helper),o=i.options;r.css("opacity")&&(o._opacity=r.css("opacity"));r.css("opacity",o.opacity)},stop:function(t,n,i){var r=i.options;r._opacity&&e(n.helper).css("opacity",r._opacity)}});e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(false));n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,i){var r=i.options,o=false,a=i.scrollParentNotHidden[0],s=i.document[0];if(a!==s&&"HTML"!==a.tagName){r.axis&&"x"===r.axis||(i.overflowOffset.top+a.offsetHeight-t.pageY<r.scrollSensitivity?a.scrollTop=o=a.scrollTop+r.scrollSpeed:t.pageY-i.overflowOffset.top<r.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-r.scrollSpeed));r.axis&&"y"===r.axis||(i.overflowOffset.left+a.offsetWidth-t.pageX<r.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+r.scrollSpeed:t.pageX-i.overflowOffset.left<r.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-r.scrollSpeed))}else{r.axis&&"x"===r.axis||(t.pageY-e(s).scrollTop()<r.scrollSensitivity?o=e(s).scrollTop(e(s).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(s).scrollTop())<r.scrollSensitivity&&(o=e(s).scrollTop(e(s).scrollTop()+r.scrollSpeed)));r.axis&&"y"===r.axis||(t.pageX-e(s).scrollLeft()<r.scrollSensitivity?o=e(s).scrollLeft(e(s).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(s).scrollLeft())<r.scrollSensitivity&&(o=e(s).scrollLeft(e(s).scrollLeft()+r.scrollSpeed)))}false!==o&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}});e.ui.plugin.add("draggable","snap",{start:function(t,n,i){var r=i.options;i.snapElements=[];e(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var t=e(this),n=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,i){var r,o,a,s,l,c,u,d,f,p,h=i.options,v=h.snapTolerance,g=n.offset.left,m=g+i.helperProportions.width,b=n.offset.top,y=b+i.helperProportions.height;for(f=i.snapElements.length-1;f>=0;f--){l=i.snapElements[f].left-i.margins.left;c=l+i.snapElements[f].width;u=i.snapElements[f].top-i.margins.top;d=u+i.snapElements[f].height;if(m<l-v||g>c+v||y<u-v||b>d+v||!e.contains(i.snapElements[f].item.ownerDocument,i.snapElements[f].item)){i.snapElements[f].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[f].item}));i.snapElements[f].snapping=false;continue}if("inner"!==h.snapMode){r=Math.abs(u-y)<=v;o=Math.abs(d-b)<=v;a=Math.abs(l-m)<=v;s=Math.abs(c-g)<=v;r&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top);o&&(n.position.top=i._convertPositionTo("relative",{top:d,left:0}).top);a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left);s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)}p=r||o||a||s;if("outer"!==h.snapMode){r=Math.abs(u-b)<=v;o=Math.abs(d-y)<=v;a=Math.abs(l-g)<=v;s=Math.abs(c-m)<=v;r&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top);o&&(n.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top);a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left);s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)}!i.snapElements[f].snapping&&(r||o||a||s||p)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[f].item}));i.snapElements[f].snapping=r||o||a||s||p}}});e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var r,o=i.options,a=e.makeArray(e(o.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!a.length)return;r=parseInt(e(a[0]).css("zIndex"),10)||0;e(a).each(function(t){e(this).css("zIndex",r+t)});this.css("zIndex",r+a.length)}});e.ui.plugin.add("draggable","zIndex",{start:function(t,n,i){var r=e(n.helper),o=i.options;r.css("zIndex")&&(o._zIndex=r.css("zIndex"));r.css("zIndex",o.zIndex)},stop:function(t,n,i){var r=i.options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}});var re=e.ui.draggable;e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return false;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=false;if(t[i]>0)return true;t[i]=1;r=t[i]>0;t[i]=0;return r},_create:function(){var t,n=this.options,i=this;this._addClass("ui-resizable");e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));this.elementIsWrapper=true;t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(t);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css(t);this._proportionallyResize()}this._setupHandles();n.autoHide&&e(this.element).on("mouseenter",function(){if(n.disabled)return;i._removeClass("ui-resizable-autohide");i._handles.show()}).on("mouseleave",function(){if(n.disabled)return;if(!i.resizing){i._addClass("ui-resizable-autohide");i._handles.hide()}});this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){n(this.element);t=this.element;this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t);t.remove()}this.originalElement.css("resize",this.originalResizeStyle);n(this.originalElement);return this},_setOption:function(e,t){this._super(e,t);switch(e){case"handles":this._removeHandles();this._setupHandles();break;default:break}},_setupHandles:function(){var t=this.options,n,i,r,o,a,s=this;this.handles=t.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");this._handles=e();if(this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");r=this.handles.split(",");this.handles={};for(i=0;i<r.length;i++){n=e.trim(r[i]);o="ui-resizable-"+n;a=e("<div>");this._addClass(a,"ui-resizable-handle "+o);a.css({zIndex:t.zIndex});this.handles[n]=".ui-resizable-"+n;this.element.append(a)}}this._renderAxis=function(t){var n,i,r,o;t=t||this.element;for(n in this.handles){if(this.handles[n].constructor===String)this.handles[n]=this.element.children(this.handles[n]).first().show();else if(this.handles[n].jquery||this.handles[n].nodeType){this.handles[n]=e(this.handles[n]);this._on(this.handles[n],{mousedown:s._mouseDown})}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){i=e(this.handles[n],this.element);o=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth();r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(r,o);this._proportionallyResize()}this._handles=this._handles.add(this.handles[n])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){if(!s.resizing){this.className&&(a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i));s.axis=a&&a[1]?a[1]:"se"}});if(t.autoHide){this._handles.hide();this._addClass("ui-resizable-autohide")}},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,i,r=false;for(n in this.handles){i=e(this.handles[n])[0];(i===t.target||e.contains(i,t.target))&&(r=true)}return!this.options.disabled&&r},_mouseStart:function(t){var n,i,r,o=this.options,a=this.element;this.resizing=true;this._renderProxy();n=this._num(this.helper.css("left"));i=this._num(this.helper.css("top"));if(o.containment){n+=e(o.containment).scrollLeft()||0;i+=e(o.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:n,top:i};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()};this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()};this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()};this.originalPosition={left:n,top:i};this.originalMousePosition={left:t.pageX,top:t.pageY};this.aspectRatio="number"===typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1;r=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor","auto"===r?this.axis+"-resize":r);this._addClass("ui-resizable-resizing");this._propagate("start",t);return true},_mouseDrag:function(t){var n,i,r=this.originalMousePosition,o=this.axis,a=t.pageX-r.left||0,s=t.pageY-r.top||0,l=this._change[o];this._updatePrevProperties();if(!l)return false;n=l.apply(this,[t,a,s]);this._updateVirtualBoundaries(t.shiftKey);(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t));n=this._respectSize(n,t);this._updateCache(n);this._propagate("resize",t);i=this._applyChanges();!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();if(!e.isEmptyObject(i)){this._updatePrevProperties();this._trigger("resize",t,this.ui());this._applyChanges()}return false},_mouseStop:function(t){this.resizing=false;var n,i,r,o,a,s,l,c=this.options,u=this;if(this._helper){n=this._proportionallyResizeElements;i=n.length&&/textarea/i.test(n[0].nodeName);r=i&&this._hasScroll(n[0],"left")?0:u.sizeDiff.height;o=i?0:u.sizeDiff.width;a={width:u.helper.width()-o,height:u.helper.height()-r};s=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null;l=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null;c.animate||this.element.css(e.extend(a,{top:l,left:s}));u.helper.height(u.size.height);u.helper.width(u.size.width);this._helper&&!c.animate&&this._proportionallyResize()}e("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",t);this._helper&&this.helper.remove();return false},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px");this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px");this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px");this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px");this.helper.css(e);return e},_updateVirtualBoundaries:function(e){var t,n,i,r,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:Infinity,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:Infinity};if(this._aspectRatio||e){t=o.minHeight*this.aspectRatio;i=o.minWidth/this.aspectRatio;n=o.maxHeight*this.aspectRatio;r=o.maxWidth/this.aspectRatio;t>o.minWidth&&(o.minWidth=t);i>o.minHeight&&(o.minHeight=i);n<o.maxWidth&&(o.maxWidth=n);r<o.maxHeight&&(o.maxHeight=r)}this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset();this._isNumber(e.left)&&(this.position.left=e.left);this._isNumber(e.top)&&(this.position.top=e.top);this._isNumber(e.height)&&(this.size.height=e.height);this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio);if("sw"===i){e.left=t.left+(n.width-e.width);e.top=null}if("nw"===i){e.top=t.top+(n.height-e.height);e.left=t.left+(n.width-e.width)}return e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,r=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,a=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,s=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);o&&(e.width=t.minWidth);a&&(e.height=t.minHeight);i&&(e.width=t.maxWidth);r&&(e.height=t.maxHeight);o&&c&&(e.left=s-t.minWidth);i&&c&&(e.left=s-t.maxWidth);a&&u&&(e.top=l-t.minHeight);r&&u&&(e.top=l-t.maxHeight);e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null;return e},_getPaddingPlusBorderDimensions:function(e){var t=0,n=[],i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],r=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];for(;t<4;t++){n[t]=parseFloat(i[t])||0;n[t]+=parseFloat(r[t])||0}return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t=0,n=this.helper||this.element;for(;t<this._proportionallyResizeElements.length;t++){e=this._proportionallyResizeElements[t];this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e));e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e("<div style='overflow:hidden;'></div>");this._addClass(this.helper,this._helper);this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,i=this.originalPosition;return{left:i.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize,r=this.originalPosition;return{top:r.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]);"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),i=n.options,r=n._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),a=o&&n._hasScroll(r[0],"left")?0:n.sizeDiff.height,s=o?0:n.sizeDiff.width,l={width:n.size.width-s,height:n.size.height-a},c=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,u=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};r&&r.length&&e(r[0]).css({width:i.width,height:i.height});n._updateCache(i);n._propagate("resize",t)}})}});e.ui.plugin.add("resizable","containment",{start:function(){var t,n,i,r,o,a,s,l=e(this).resizable("instance"),c=l.options,u=l.element,d=c.containment,f=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;if(!f)return;l.containerElement=e(f);if(/document/.test(d)||d===document){l.containerOffset={left:0,top:0};l.containerPosition={left:0,top:0};l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}}else{t=e(f);n=[];e(["Top","Right","Left","Bottom"]).each(function(e,i){n[e]=l._num(t.css("padding"+i))});l.containerOffset=t.offset();l.containerPosition=t.position();l.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]};i=l.containerOffset;r=l.containerSize.height;o=l.containerSize.width;a=l._hasScroll(f,"left")?f.scrollWidth:o;s=l._hasScroll(f)?f.scrollHeight:r;l.parentData={element:f,left:i.left,top:i.top,width:a,height:s}}},resize:function(t){var n,i,r,o,a=e(this).resizable("instance"),s=a.options,l=a.containerOffset,c=a.position,u=a._aspectRatio||t.shiftKey,d={top:0,left:0},f=a.containerElement,p=true;f[0]!==document&&/static/.test(f.css("position"))&&(d=l);if(c.left<(a._helper?l.left:0)){a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-d.left);if(u){a.size.height=a.size.width/a.aspectRatio;p=false}a.position.left=s.helper?l.left:0}if(c.top<(a._helper?l.top:0)){a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top);if(u){a.size.width=a.size.height*a.aspectRatio;p=false}a.position.top=a._helper?l.top:0}r=a.containerElement.get(0)===a.element.parent().get(0);o=/relative|absolute/.test(a.containerElement.css("position"));if(r&&o){a.offset.left=a.parentData.left+a.position.left;a.offset.top=a.parentData.top+a.position.top}else{a.offset.left=a.element.offset().left;a.offset.top=a.element.offset().top}n=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-d.left:a.offset.left-l.left));i=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-d.top:a.offset.top-l.top));if(n+a.size.width>=a.parentData.width){a.size.width=a.parentData.width-n;if(u){a.size.height=a.size.width/a.aspectRatio;p=false}}if(i+a.size.height>=a.parentData.height){a.size.height=a.parentData.height-i;if(u){a.size.width=a.size.height*a.aspectRatio;p=false}}if(!p){a.position.left=a.prevPosition.left;a.position.top=a.prevPosition.top;a.size.width=a.prevSize.width;a.size.height=a.prevSize.height}},stop:function(){var t=e(this).resizable("instance"),n=t.options,i=t.containerOffset,r=t.containerPosition,o=t.containerElement,a=e(t.helper),s=a.offset(),l=a.outerWidth()-t.sizeDiff.width,c=a.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(o.css("position"))&&e(this).css({left:s.left-r.left-i.left,width:l,height:c});t._helper&&!n.animate&&/static/.test(o.css("position"))&&e(this).css({left:s.left-r.left-i.left,width:l,height:c})}});e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var i=e(this).resizable("instance"),r=i.options,o=i.originalSize,a=i.originalPosition,s={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-a.top||0,left:i.position.left-a.left||0};e(r.alsoResize).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),r={},o=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(s[t]||0);n&&n>=0&&(r[t]=n||null)});t.css(r)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}});e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0});t._addClass(t.ghost,"ui-resizable-ghost");false!==e.uiBackCompat&&"string"===typeof t.options.ghost&&t.ghost.addClass(this.options.ghost);t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}});e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),i=n.options,r=n.size,o=n.originalSize,a=n.originalPosition,s=n.axis,l="number"===typeof i.grid?[i.grid,i.grid]:i.grid,c=l[0]||1,u=l[1]||1,d=Math.round((r.width-o.width)/c)*c,f=Math.round((r.height-o.height)/u)*u,p=o.width+d,h=o.height+f,v=i.maxWidth&&i.maxWidth<p,g=i.maxHeight&&i.maxHeight<h,m=i.minWidth&&i.minWidth>p,b=i.minHeight&&i.minHeight>h;i.grid=l;m&&(p+=c);b&&(h+=u);v&&(p-=c);g&&(h-=u);if(/^(se|s|e)$/.test(s)){n.size.width=p;n.size.height=h}else if(/^(ne)$/.test(s)){n.size.width=p;n.size.height=h;n.position.top=a.top-f}else if(/^(sw)$/.test(s)){n.size.width=p;n.size.height=h;n.position.left=a.left-d}else{(h-u<=0||p-c<=0)&&(t=n._getPaddingPlusBorderDimensions(this));if(h-u>0){n.size.height=h;n.position.top=a.top-f}else{h=u-t.height;n.size.height=h;n.position.top=a.top+o.height-h}if(p-c>0){n.size.width=p;n.position.left=a.left-d}else{p=c-t.width;n.size.width=p;n.position.left=a.left+o.width-p}}}});var oe=e.ui.resizable;e.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:true,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:true,closeText:"Close",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions:{maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle);this.options.disabled&&(this.options.disabled=false);this._createWrapper();this.element.show().removeAttr("title").appendTo(this.uiDialog);this._addClass("ui-dialog-content","ui-widget-content");this._createTitlebar();this._createButtonPane();this.options.draggable&&e.fn.draggable&&this._makeDraggable();this.options.resizable&&e.fn.resizable&&this._makeResizable();this._isOpen=false;this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;if(t&&(t.jquery||t.nodeType))return e(t);return this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().css(this.originalCss).detach();this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);e=t.parent.children().eq(t.index);e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;if(!this._isOpen||false===this._trigger("beforeClose",t))return;this._isOpen=false;this._focusedElement=null;this._destroyOverlay();this._untrackInstance();this.opener.filter(":focusable").trigger("focus").length||e.ui.safeBlur(e.ui.safeActiveElement(this.document[0]));this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,n){var i=false,r=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),o=Math.max.apply(null,r);if(o>=+this.uiDialog.css("z-index")){this.uiDialog.css("z-index",o+1);i=true}i&&!n&&this._trigger("focus",t);return i},open:function(){var t=this;if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this._isOpen=true;this.opener=e(e.ui.safeActiveElement(this.document[0]));this._size();this._position();this._createOverlay();this._moveToTop(null,true);this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1);this._show(this.uiDialog,this.options.show,function(){t._focusTabbable();t._trigger("focus")});this._makeFocusTarget();this._trigger("open")},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]"));e.length||(e=this.element.find(":tabbable"));e.length||(e=this.uiDialogButtonPane.find(":tabbable"));e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable"));e.length||(e=this.uiDialog);e.eq(0).trigger("focus")},_keepFocus:function(t){function n(){var t=e.ui.safeActiveElement(this.document[0]),n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault();n.call(this);this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front");this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE){t.preventDefault();this.close(t);return}if(t.keyCode!==e.ui.keyCode.TAB||t.isDefaultPrevented())return;var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),r=n.filter(":last");if(t.target!==r[0]&&t.target!==this.uiDialog[0]||t.shiftKey){if((t.target===i[0]||t.target===this.uiDialog[0])&&t.shiftKey){this._delay(function(){r.trigger("focus")});t.preventDefault()}}else{this._delay(function(){i.trigger("focus")});t.preventDefault()}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>");this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix");this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}});this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:false}).appendTo(this.uiDialogTitlebar);this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close");this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault();this.close(e)}});t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar);this._addClass(t,"ui-dialog-title");this._title(t);this.uiDialogTitlebar.prependTo(this.uiDialog);this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>");this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix");this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane);this._addClass(this.uiButtonSet,"ui-dialog-buttonset");this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if(e.isEmptyObject(n)||e.isArray(n)&&!n.length){this._removeClass(this.uiDialog,"ui-dialog-buttons");return}e.each(n,function(n,i){var r,o;i=e.isFunction(i)?{click:i,text:n}:i;i=e.extend({type:"button"},i);r=i.click;o={icon:i.icon,iconPosition:i.iconPosition,showLabel:i.showLabel,icons:i.icons,text:i.text};delete i.click;delete i.icon;delete i.iconPosition;delete i.showLabel;delete i.icons;"boolean"===typeof i.text&&delete i.text;e("<button></button>",i).button(o).appendTo(t.uiButtonSet).on("click",function(){r.apply(t.element[0],arguments)})});this._addClass(this.uiDialog,"ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var t=this,n=this.options;function i(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,r){t._addClass(e(this),"ui-dialog-dragging");t._blockFrames();t._trigger("dragStart",n,i(r))},drag:function(e,n){t._trigger("drag",e,i(n))},stop:function(r,o){var a=o.offset.left-t.document.scrollLeft(),s=o.offset.top-t.document.scrollTop();n.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(s>=0?"+":"")+s,of:t.window};t._removeClass(e(this),"ui-dialog-dragging");t._unblockFrames();t._trigger("dragStop",r,i(o))}})},_makeResizable:function(){var t=this,n=this.options,i=n.resizable,r=this.uiDialog.css("position"),o="string"===typeof i?i:"n,e,s,w,se,sw,ne,nw";function a(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:o,start:function(n,i){t._addClass(e(this),"ui-dialog-resizing");t._blockFrames();t._trigger("resizeStart",n,a(i))},resize:function(e,n){t._trigger("resize",e,a(n))},stop:function(i,r){var o=t.uiDialog.offset(),s=o.left-t.document.scrollLeft(),l=o.top-t.document.scrollTop();n.height=t.uiDialog.height();n.width=t.uiDialog.width();n.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(l>=0?"+":"")+l,of:t.window};t._removeClass(e(this),"ui-dialog-resizing");t._unblockFrames();t._trigger("resizeStop",i,a(r))}}).css("position",r)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget();this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),n=e.inArray(this,t);-1!==n&&t.splice(n,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");if(!e){e=[];this.document.data("ui-dialog-instances",e)}return e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show();this.uiDialog.position(this.options.position);e||this.uiDialog.hide()},_setOptions:function(t){var n=this,i=false,r={};e.each(t,function(e,t){n._setOption(e,t);e in n.sizeRelatedOptions&&(i=true);e in n.resizableRelatedOptions&&(r[e]=t)});if(i){this._size();this._position()}this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,n){var i,r,o=this.uiDialog;if("disabled"===t)return;this._super(t,n);"appendTo"===t&&this.uiDialog.appendTo(this._appendTo());"buttons"===t&&this._createButtons();"closeText"===t&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()});if("draggable"===t){i=o.is(":data(ui-draggable)");i&&!n&&o.draggable("destroy");!i&&n&&this._makeDraggable()}"position"===t&&this._position();if("resizable"===t){r=o.is(":data(ui-resizable)");r&&!n&&o.resizable("destroy");r&&"string"===typeof n&&o.resizable("option","handles",n);r||false===n||this._makeResizable()}"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var e,t,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});i.minWidth>i.width&&(i.width=i.minWidth);e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight();t=Math.max(0,i.minHeight-e);n="number"===typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none";"auto"===i.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-e));this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_allowInteraction:function(t){if(e(t.target).closest(".ui-dialog").length)return true;return!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(!this.options.modal)return;var t=true;this._delay(function(){t=false});this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){if(t)return;if(!this._allowInteraction(e)){e.preventDefault();this._trackingInstances()[0]._focusTabbable()}}});this.overlay=e("<div>").appendTo(this._appendTo());this._addClass(this.overlay,null,"ui-widget-overlay ui-front");this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)},_destroyOverlay:function(){if(!this.options.modal)return;if(this.overlay){var e=this.document.data("ui-dialog-overlays")-1;if(e)this.document.data("ui-dialog-overlays",e);else{this._off(this.document,"focusin");this.document.removeData("ui-dialog-overlays")}this.overlay.remove();this.overlay=null}}});false!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super();this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t);this._superApply(arguments)}});var ae=e.ui.dialog;e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:true,greedy:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,i=n.accept;this.isover=false;this.isout=true;this.accept=e.isFunction(i)?i:function(e){return e.is(i)};this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]};this._addToManager(n.scope);n.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[];e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){var t=0;for(;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,n){if("accept"===t)this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if("scope"===t){var i=e.ui.ddmanager.droppables[this.options.scope];this._splice(i);this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this._addActiveClass();n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this._removeActiveClass();n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;if(this.accept.call(this.element[0],n.currentItem||n.element)){this._addHoverClass();this._trigger("over",t,this.ui(n))}},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;if(this.accept.call(this.element[0],n.currentItem||n.element)){this._removeHoverClass();this._trigger("out",t,this.ui(n))}},_drop:function(t,n){var i=n||e.ui.ddmanager.current,r=false;if(!i||(i.currentItem||i.element)[0]===this.element[0])return false;this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=e(this).droppable("instance");if(n.options.greedy&&!n.options.disabled&&n.options.scope===i.options.scope&&n.accept.call(n.element[0],i.currentItem||i.element)&&se(i,e.extend(n,{offset:n.element.offset()}),n.options.tolerance,t)){r=true;return false}});if(r)return false;if(this.accept.call(this.element[0],i.currentItem||i.element)){this._removeActiveClass();this._removeHoverClass();this._trigger("drop",t,this.ui(i));return this.element}return false},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var se=e.ui.intersect=function(){function e(e,t,n){return e>=t&&e<t+n}return function(t,n,i,r){if(!n.offset)return false;var o=(t.positionAbs||t.position.absolute).left+t.margins.left,a=(t.positionAbs||t.position.absolute).top+t.margins.top,s=o+t.helperProportions.width,l=a+t.helperProportions.height,c=n.offset.left,u=n.offset.top,d=c+n.proportions().width,f=u+n.proportions().height;switch(i){case"fit":return c<=o&&s<=d&&u<=a&&l<=f;case"intersect":return c<o+t.helperProportions.width/2&&s-t.helperProportions.width/2<d&&u<a+t.helperProportions.height/2&&l-t.helperProportions.height/2<f;case"pointer":return e(r.pageY,u,n.proportions().height)&&e(r.pageX,c,n.proportions().width);case"touch":return(a>=u&&a<=f||l>=u&&l<=f||a<u&&l>f)&&(o>=c&&o<=d||s>=c&&s<=d||o<c&&s>d);default:return false}}}();e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,n){var i,r,o=e.ui.ddmanager.droppables[t.options.scope]||[],a=n?n.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(i=0;i<o.length;i++){if(o[i].options.disabled||t&&!o[i].accept.call(o[i].element[0],t.currentItem||t.element))continue;for(r=0;r<s.length;r++)if(s[r]===o[i].element[0]){o[i].proportions().height=0;continue e}o[i].visible="none"!==o[i].element.css("display");if(!o[i].visible)continue;"mousedown"===a&&o[i]._activate.call(o[i],n);o[i].offset=o[i].element.offset();o[i].proportions({width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight})}},drop:function(t,n){var i=false;e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){if(!this.options)return;!this.options.disabled&&this.visible&&se(t,this,this.options.tolerance,n)&&(i=this._drop.call(this,n)||i);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)){this.isout=true;this.isover=false;this._deactivate.call(this,n)}});return i},dragStart:function(t,n){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n);e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var i,r,o,a=se(t,this,this.options.tolerance,n),s=!a&&this.isover?"isout":a&&!this.isover?"isover":null;if(!s)return;if(this.options.greedy){r=this.options.scope;o=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===r});if(o.length){i=e(o[0]).droppable("instance");i.greedyChild="isover"===s}}if(i&&"isover"===s){i.isover=false;i.isout=true;i._out.call(i,n)}this[s]=true;this["isout"===s?"isover":"isout"]=false;this["isover"===s?"_over":"_out"].call(this,n);if(i&&"isout"===s){i.isout=false;i.isover=true;i._over.call(i,n)}})},dragStop:function(t,n){t.element.parentsUntil("body").off("scroll.droppable");t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}};false!==e.uiBackCompat&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:false,activeClass:false},_addActiveClass:function(){this._super();this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super();this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super();this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super();this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});var le=e.ui.droppable;var ce=e.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.attr({role:"progressbar","aria-valuemin":this.min});this._addClass("ui-progressbar","ui-widget ui-widget-content");this.valueDiv=e("<div>").appendTo(this.element);this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header");this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow");this.valueDiv.remove()},value:function(e){if(void 0===e)return this.options.value;this.options.value=this._constrainedValue(e);this._refreshValue()},_constrainedValue:function(e){void 0===e&&(e=this.options.value);this.indeterminate=false===e;"number"!==typeof e&&(e=0);return!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value;this._super(e);this.options.value=this._constrainedValue(t);this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t));this._super(e,t)},_setOptionDisabled:function(e){this._super(e);this.element.attr("aria-disabled",e);this._toggleClass(null,"ui-state-disabled",!!e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(n.toFixed(0)+"%");this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate);if(this.indeterminate){this.element.removeAttr("aria-valuenow");if(!this.overlayDiv){this.overlayDiv=e("<div>").appendTo(this.valueDiv);this._addClass(this.overlayDiv,"ui-progressbar-overlay")}}else{this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t});if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null}}if(this.oldValue!==t){this.oldValue=t;this._trigger("change")}t===this.options.max&&this._trigger("complete")}});var ue=e.widget("ui.selectable",e.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable");this.dragged=false;this.refresh=function(){t.elementPos=e(t.element[0]).offset();t.selectees=e(t.options.filter,t.element[0]);t._addClass(t.selectees,"ui-selectee");t.selectees.each(function(){var n=e(this),i=n.offset(),r={left:i.left-t.elementPos.left,top:i.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:n,left:r.left,top:r.top,right:r.left+n.outerWidth(),bottom:r.top+n.outerHeight(),startselected:false,selected:n.hasClass("ui-selected"),selecting:n.hasClass("ui-selecting"),unselecting:n.hasClass("ui-unselecting")})})};this.refresh();this._mouseInit();this.helper=e("<div>");this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item");this._mouseDestroy()},_mouseStart:function(t){var n=this,i=this.options;this.opos=[t.pageX,t.pageY];this.elementPos=e(this.element[0]).offset();if(this.options.disabled)return;this.selectees=e(i.filter,this.element[0]);this._trigger("start",t);e(i.appendTo).append(this.helper);this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0});i.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var i=e.data(this,"selectable-item");i.startselected=true;if(!t.metaKey&&!t.ctrlKey){n._removeClass(i.$element,"ui-selected");i.selected=false;n._addClass(i.$element,"ui-unselecting");i.unselecting=true;n._trigger("unselecting",t,{unselecting:i.element})}});e(t.target).parents().addBack().each(function(){var i,r=e.data(this,"selectable-item");if(r){i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected");n._removeClass(r.$element,i?"ui-unselecting":"ui-selected")._addClass(r.$element,i?"ui-selecting":"ui-unselecting");r.unselecting=!i;r.selecting=i;r.selected=i;i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element});return false}})},_mouseDrag:function(t){this.dragged=true;if(this.options.disabled)return;var n,i=this,r=this.options,o=this.opos[0],a=this.opos[1],s=t.pageX,l=t.pageY;if(o>s){n=s;s=o;o=n}if(a>l){n=l;l=a;a=n}this.helper.css({left:o,top:a,width:s-o,height:l-a});this.selectees.each(function(){var n=e.data(this,"selectable-item"),c=false,u={};if(!n||n.element===i.element[0])return;u.left=n.left+i.elementPos.left;u.right=n.right+i.elementPos.left;u.top=n.top+i.elementPos.top;u.bottom=n.bottom+i.elementPos.top;"touch"===r.tolerance?c=!(u.left>s||u.right<o||u.top>l||u.bottom<a):"fit"===r.tolerance&&(c=u.left>o&&u.right<s&&u.top>a&&u.bottom<l);if(c){if(n.selected){i._removeClass(n.$element,"ui-selected");n.selected=false}if(n.unselecting){i._removeClass(n.$element,"ui-unselecting");n.unselecting=false}if(!n.selecting){i._addClass(n.$element,"ui-selecting");n.selecting=true;i._trigger("selecting",t,{selecting:n.element})}}else{if(n.selecting)if((t.metaKey||t.ctrlKey)&&n.startselected){i._removeClass(n.$element,"ui-selecting");n.selecting=false;i._addClass(n.$element,"ui-selected");n.selected=true}else{i._removeClass(n.$element,"ui-selecting");n.selecting=false;if(n.startselected){i._addClass(n.$element,"ui-unselecting");n.unselecting=true}i._trigger("unselecting",t,{unselecting:n.element})}if(n.selected&&!t.metaKey&&!t.ctrlKey&&!n.startselected){i._removeClass(n.$element,"ui-selected");n.selected=false;i._addClass(n.$element,"ui-unselecting");n.unselecting=true;i._trigger("unselecting",t,{unselecting:n.element})}}});return false},_mouseStop:function(t){var n=this;this.dragged=false;e(".ui-unselecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");n._removeClass(i.$element,"ui-unselecting");i.unselecting=false;i.startselected=false;n._trigger("unselected",t,{unselected:i.element})});e(".ui-selecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");n._removeClass(i.$element,"ui-selecting")._addClass(i.$element,"ui-selected");i.selecting=false;i.selected=true;i.startselected=true;n._trigger("selected",t,{selected:i.element})});this._trigger("stop",t);this.helper.remove();return false}});var de=e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:false,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"};this._drawButton();this._drawMenu();this._bindFormResetHandler();this._rendered=false;this.menuItems=e()},_drawButton:function(){var t,n=this,i=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button);this._on(this.labels,{click:function(e){this.button.focus();e.preventDefault()}});this.element.hide();this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element);this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget");t=e("<span>").appendTo(this.button);this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button);this.buttonItem=this._renderButtonItem(i).appendTo(this.button);false!==this.options.width&&this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){n._rendered||n._refreshMenu()})},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=e("<div>").append(this.menu);this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front");this.menuWrap.appendTo(this._appendTo());this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,n){e.preventDefault();t._setSelection();t._select(n.item.data("ui-selectmenu-item"),e)},focus:function(e,n){var i=n.item.data("ui-selectmenu-item");if(null!=t.focusIndex&&i.index!==t.focusIndex){t._trigger("focus",e,{item:i});t.isOpen||t._select(i,e)}t.focusIndex=i.index;t.button.attr("aria-activedescendant",t.menuItems.eq(i.index).attr("id"))}}).menu("instance");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return false};this.menuInstance._isDivider=function(){return false}},refresh:function(){this._refreshMenu();this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{}));null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var e,t=this.element.find("option");this.menu.empty();this._parseOptions(t);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper");this._rendered=true;if(!t.length)return;e=this._getSelectedItem();this.menuInstance.focus(null,e);this._setAria(e.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"))},open:function(e){if(this.options.disabled)return;if(this._rendered){this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active");this.menuInstance.focus(null,this._getSelectedItem())}else this._refreshMenu();if(!this.menuItems.length)return;this.isOpen=true;this._toggleAttr();this._resizeMenu();this._position();this._on(this.document,this._documentClick);this._trigger("open",e)},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){if(!this.isOpen)return;this.isOpen=false;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",e)},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var n=e("<span>");this._setText(n,t.label);this._addClass(n,"ui-selectmenu-text");return n},_renderMenu:function(t,n){var i=this,r="";e.each(n,function(n,o){var a;if(o.optgroup!==r){a=e("<li>",{text:o.optgroup});i._addClass(a,"ui-selectmenu-optgroup","ui-menu-divider"+(o.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""));a.appendTo(t);r=o.optgroup}i._renderItemData(t,o)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,n){var i=e("<li>"),r=e("<div>",{title:n.element.attr("title")});n.disabled&&this._addClass(i,null,"ui-state-disabled");this._setText(r,n.label);return i.append(r).appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var n,i,r=".ui-menu-item";if(this.isOpen)n=this.menuItems.eq(this.focusIndex).parent("li");else{n=this.menuItems.eq(this.element[0].selectedIndex).parent("li");r+=":not(.ui-state-disabled)"}i="first"===e||"last"===e?n["first"===e?"prevAll":"nextAll"](r).eq(-1):n[e+"All"](r).eq(0);i.length&&this.menuInstance.focus(t,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;if(!this.range)return;if(window.getSelection){e=window.getSelection();e.removeAllRanges();e.addRange(this.range)}else this.range.select();this.button.focus()},_documentClick:{mousedown:function(t){if(!this.isOpen)return;e(t.target).closest(".ui-selectmenu-menu, #"+e.ui.escapeSelector(this.ids.button)).length||this.close(t)}},_buttonEvents:{mousedown:function(){var e;if(window.getSelection){e=window.getSelection();e.rangeCount&&(this.range=e.getRangeAt(0))}else this.range=document.selection.createRange()},click:function(e){this._setSelection();this._toggle(e)},keydown:function(t){var n=true;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t);n=false;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t);n=false}n&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index;this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e));this._setAria(e);this._trigger("select",t,{item:e});e.index!==n&&this._trigger("change",t,{item:e});this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t});this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if("icons"===e){var n=this.button.find("span.ui-icon");this._removeClass(n,null,this.options.icons.button)._addClass(n,null,t.button)}this._super(e,t);"appendTo"===e&&this.menuWrap.appendTo(this._appendTo());"width"===e&&this._resizeButton()},_setOptionDisabled:function(e){this._super(e);this.menuInstance.option("disabled",e);this.button.attr("aria-disabled",e);this._toggleClass(this.button,null,"ui-state-disabled",e);this.element.prop("disabled",e);if(e){this.button.attr("tabindex",-1);this.close()}else this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0));t&&t[0]||(t=this.element.closest(".ui-front, dialog"));t.length||(t=this.document[0].body);return t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen);this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;if(false===e){this.button.css("width","");return}if(null===e){e=this.element.show().outerWidth();this.element.hide()}this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var e=this._super();e.disabled=this.element.prop("disabled");return e},_parseOptions:function(t){var n=this,i=[];t.each(function(t,r){i.push(n._parseOption(e(r),t))});this.items=i},_parseOption:function(e,t){var n=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),optgroup:n.attr("label")||"",disabled:n.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler();this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.labels.attr("for",this.ids.element)}}]);var fe=e.widget("ui.slider",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:false,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var t,n,i=this.options,r=this.element.find(".ui-slider-handle"),o="<span tabindex='0'></span>",a=[];n=i.values&&i.values.length||1;if(r.length>n){r.slice(n).remove();r=r.slice(0,n)}for(t=r.length;t<n;t++)a.push(o);this.handles=r.add(e(a.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each(function(t){e(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;if(t.range){true===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]);if(this.range&&this.range.length){this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max");this.range.css({left:"",bottom:""})}else{this.range=e("<div>").appendTo(this.element);this._addClass(this.range,"ui-slider-range")}"min"!==t.range&&"max"!==t.range||this._addClass(this.range,"ui-slider-range-"+t.range)}else{this.range&&this.range.remove();this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();this.range&&this.range.remove();this._mouseDestroy()},_mouseCapture:function(t){var n,i,r,o,a,s,l,c,u=this,d=this.options;if(d.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();n={x:t.pageX,y:t.pageY};i=this._normValueFromMouse(n);r=this._valueMax()-this._valueMin()+1;this.handles.each(function(t){var n=Math.abs(i-u.values(t));if(r>n||r===n&&(t===u._lastChangedValue||u.values(t)===d.min)){r=n;o=e(this);a=t}});s=this._start(t,a);if(false===s)return false;this._mouseSliding=true;this._handleIndex=a;this._addClass(o,null,"ui-state-active");o.trigger("focus");l=o.offset();c=!e(t.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(t,a,i);this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);this._slide(e,this._handleIndex,n);return false},_mouseStop:function(e){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=false;this._stop(e,this._handleIndex);this._change(e,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,r,o;if("horizontal"===this.orientation){t=this.elementSize.width;n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{t=this.elementSize.height;n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}i=n/t;i>1&&(i=1);i<0&&(i=0);"vertical"===this.orientation&&(i=1-i);r=this._valueMax()-this._valueMin();o=this._valueMin()+i*r;return this._trimAlignValue(o)},_uiHash:function(e,t,n){var i={handle:this.handles[e],handleIndex:e,value:void 0!==t?t:this.value()};if(this._hasMultipleValues()){i.value=void 0!==t?t:this.values(e);i.values=n||this.values()}return i},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(e,t){return this._trigger("start",e,this._uiHash(t))},_slide:function(e,t,n){var i,r,o=this.value(),a=this.values();if(this._hasMultipleValues()){r=this.values(t?0:1);o=this.values(t);2===this.options.values.length&&true===this.options.range&&(n=0===t?Math.min(r,n):Math.max(r,n));a[t]=n}if(n===o)return;i=this._trigger("slide",e,this._uiHash(t,n,a));if(false===i)return;this._hasMultipleValues()?this.values(t,n):this.value(n)},_stop:function(e,t){this._trigger("stop",e,this._uiHash(t))},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){this._lastChangedValue=t;this._trigger("change",e,this._uiHash(t))}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e);this._refreshValue();this._change(null,0);return}return this._value()},values:function(t,n){var i,r,o;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n);this._refreshValue();this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this._hasMultipleValues()?this._values(t):this.value();i=this.options.values;r=arguments[0];for(o=0;o<i.length;o+=1){i[o]=this._trimAlignValue(r[o]);this._change(null,o)}this._refreshValue()},_setOption:function(t,n){var i,r=0;if("range"===t&&true===this.options.range)if("min"===n){this.options.value=this._values(0);this.options.values=null}else if("max"===n){this.options.value=this._values(this.options.values.length-1);this.options.values=null}e.isArray(this.options.values)&&(r=this.options.values.length);this._super(t,n);switch(t){case"orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();this.options.range&&this._refreshRange(n);this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=r-1;i>=0;i--)this._change(null,i);this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_setOptionDisabled:function(e){this._super(e);this._toggleClass(null,"ui-state-disabled",!!e)},_value:function(){var e=this.options.value;e=this._trimAlignValue(e);return e},_values:function(e){var t,n,i;if(arguments.length){t=this.options.values[e];t=this._trimAlignValue(t);return t}if(this._hasMultipleValues()){n=this.options.values.slice();for(i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;2*Math.abs(n)>=t&&(i+=n>0?t:-t);return parseFloat(i.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),n=this.options.step,i=Math.round((e-t)/n)*n;e=i+t;e>this.options.max&&(e-=n);this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min)));return e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(e){"vertical"===e&&this.range.css({width:"",left:""});"horizontal"===e&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var t,n,i,r,o,a=this.options.range,s=this.options,l=this,c=!this._animateOff&&s.animate,u={};if(this._hasMultipleValues())this.handles.each(function(i){n=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100;u["horizontal"===l.orientation?"left":"bottom"]=n+"%";e(this).stop(1,1)[c?"animate":"css"](u,s.animate);if(true===l.options.range)if("horizontal"===l.orientation){0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},s.animate);1===i&&l.range[c?"animate":"css"]({width:n-t+"%"},{queue:false,duration:s.animate})}else{0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},s.animate);1===i&&l.range[c?"animate":"css"]({height:n-t+"%"},{queue:false,duration:s.animate})}t=n});else{i=this.value();r=this._valueMin();o=this._valueMax();n=o!==r?(i-r)/(o-r)*100:0;u["horizontal"===this.orientation?"left":"bottom"]=n+"%";this.handle.stop(1,1)[c?"animate":"css"](u,s.animate);"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},s.animate);"max"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:100-n+"%"},s.animate);"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},s.animate);"max"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:100-n+"%"},s.animate)}},_handleEvents:{keydown:function(t){var n,i,r,o,a=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=true;this._addClass(e(t.target),null,"ui-state-active");n=this._start(t,a);if(false===n)return}break}o=this.options.step;i=r=this._hasMultipleValues()?this.values(a):this.value();switch(t.keyCode){case e.ui.keyCode.HOME:r=this._valueMin();break;case e.ui.keyCode.END:r=this._valueMax();break;case e.ui.keyCode.PAGE_UP:r=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;r=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;r=this._trimAlignValue(i-o);break}this._slide(t,a,r)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(t,n);this._change(t,n);this._removeClass(e(t.target),null,"ui-state-active")}}}});var pe=e.widget("ui.sortable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&e<t+n},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(e,t){this._super(e,t);"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");e.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var i=null,r=false,o=this;if(this.reverting)return false;if(this.options.disabled||"static"===this.options.type)return false;this._refreshItems(t);e(t.target).parents().each(function(){if(e.data(this,o.widgetName+"-item")===o){i=e(this);return false}});e.data(t.target,o.widgetName+"-item")===o&&(i=e(t.target));if(!i)return false;if(this.options.handle&&!n){e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(r=true)});if(!r)return false}this.currentItem=i;this._removeCurrentsFromItems();return true},_mouseStart:function(t,n,i){var r,o,a=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(t);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(t);this.originalPageX=t.pageX;this.originalPageY=t.pageY;a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!==this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();a.containment&&this._setContainment();if(a.cursor&&"auto"!==a.cursor){o=this.document.find("body");this.storedCursor=o.css("cursor");o.css("cursor",a.cursor);this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)}if(a.opacity){this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity"));this.helper.css("opacity",a.opacity)}if(a.zIndex){this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex"));this.helper.css("zIndex",a.zIndex)}this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",t,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));e.ui.ddmanager&&(e.ui.ddmanager.current=this);e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t);this.dragging=true;this._addClass(this.helper,"ui-sortable-helper");this._mouseDrag(t);return true},_mouseDrag:function(t){var n,i,r,o,a=this.options,s=false;this.position=this._generatePosition(t);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName){this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed);this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)}else{t.pageY-this.document.scrollTop()<a.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<a.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed));t.pageX-this.document.scrollLeft()<a.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))}false!==s&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(n=this.items.length-1;n>=0;n--){i=this.items[n];r=i.item[0];o=this._intersectsWithPointer(i);if(!o)continue;if(i.instance!==this.currentContainer)continue;if(r!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==r&&!e.contains(this.placeholder[0],r)&&("semi-dynamic"!==this.options.type||!e.contains(this.element[0],r))){this.direction=1===o?"down":"up";if("pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i);this._trigger("change",t,this._uiHash());break}}this._contactContainers(t);e.ui.ddmanager&&e.ui.ddmanager.drag(this,t);this._trigger("sort",t,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var i=this,r=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft));o&&"y"!==o||(a.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop));this.reverting=true;e(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return false},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null}));if("original"===this.options.helper){this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--){this.containers[t]._trigger("deactivate",null,this._uiHash(this));if(this.containers[t].containerCache.over){this.containers[t]._trigger("out",null,this._uiHash(this));this.containers[t].containerCache.over=0}}}if(this.placeholder){this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove();e.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];t=t||{};e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))});!i.length&&t.key&&i.push(t.key+"=");return i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];t=t||{};n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")});return i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=e.left,a=o+e.width,s=e.top,l=s+e.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||i+c>s&&i+c<l,f="y"===this.options.axis||t+u>o&&t+u<a,p=d&&f;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<a&&s<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t,n,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),r="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),o=i&&r;if(!o)return false;t=this._getDragVerticalDirection();n=this._getDragHorizontalDirection();return this.floating?"right"===n||"down"===t?2:1:t&&("down"===t?2:1)},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:i&&("down"===i&&t||"up"===i&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){this._refreshItems(e);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,i,r,o,a=[],s=[],l=this._connectWith();if(l&&t)for(n=l.length-1;n>=0;n--){r=e(l[n],this.document[0]);for(i=r.length-1;i>=0;i--){o=e.data(r[i],this.widgetFullName);o&&o!==this&&!o.options.disabled&&s.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o])}}s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function c(){a.push(this)}for(n=s.length-1;n>=0;n--)s[n][0].each(c);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return false;return true})},_refreshItems:function(t){this.items=[];this.containers=[this];var n,i,r,o,a,s,l,c,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(n=f.length-1;n>=0;n--){r=e(f[n],this.document[0]);for(i=r.length-1;i>=0;i--){o=e.data(r[i],this.widgetFullName);if(o&&o!==this&&!o.options.disabled){d.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]);this.containers.push(o)}}}for(n=d.length-1;n>=0;n--){a=d[n][1];s=d[n][0];for(i=0,c=s.length;i<c;i++){l=e(s[i]);l.data(this.widgetName+"-item",a);u.push({item:l,instance:a,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item));this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,r,o;for(n=this.items.length-1;n>=0;n--){i=this.items[n];if(i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0])continue;r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item;if(!t){i.width=r.outerWidth();i.height=r.outerHeight()}o=r.offset();i.left=o.left;i.top=o.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--){o=this.containers[n].element.offset();this.containers[n].containerCache.left=o.left;this.containers[n].containerCache.top=o.top;this.containers[n].containerCache.width=this.containers[n].element.outerWidth();this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;if(!i.placeholder||i.placeholder.constructor===String){n=i.placeholder;i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+i+">",t.document[0]);t._addClass(r,"ui-sortable-placeholder",n||t.currentItem[0].className)._removeClass(r,"ui-sortable-helper");"tbody"===i?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(r)):"tr"===i?t._createTrPlaceholder(t.currentItem,r):"img"===i&&r.attr("src",t.currentItem.attr("src"));n||r.css("visibility","hidden");return r},update:function(e,r){if(n&&!i.forcePlaceholderSize)return;r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10));r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}}}t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem));t.currentItem.after(t.placeholder);i.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var i=this;t.children().each(function(){e("<td>&#160;</td>",i.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,i,r,o,a,s,l,c,u,d,f=null,p=null;for(n=this.containers.length-1;n>=0;n--){if(e.contains(this.currentItem[0],this.containers[n].element[0]))continue;if(this._intersectsWith(this.containers[n].containerCache)){if(f&&e.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n];p=n}else if(this.containers[n].containerCache.over){this.containers[n]._trigger("out",t,this._uiHash(this));this.containers[n].containerCache.over=0}}if(!f)return;if(1===this.containers.length){if(!this.containers[p].containerCache.over){this.containers[p]._trigger("over",t,this._uiHash(this));this.containers[p].containerCache.over=1}}else{r=1e4;o=null;u=f.floating||this._isFloating(this.currentItem);a=u?"left":"top";s=u?"width":"height";d=u?"pageX":"pageY";for(i=this.items.length-1;i>=0;i--){if(!e.contains(this.containers[p].element[0],this.items[i].item[0]))continue;if(this.items[i].item[0]===this.currentItem[0])continue;l=this.items[i].item.offset()[a];c=false;t[d]-l>this.items[i][s]/2&&(c=true);if(Math.abs(t[d]-l)<r){r=Math.abs(t[d]-l);o=this.items[i];this.direction=c?"up":"down"}}if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p]){if(!this.currentContainer.containerCache.over){this.containers[p]._trigger("over",t,this._uiHash());this.currentContainer.containerCache.over=1}return}o?this._rearrange(t,o,null,true):this._rearrange(t,null,this.containers[p].element,true);this._trigger("change",t,this._uiHash());this.containers[p]._trigger("change",t,this._uiHash(this));this.currentContainer=this.containers[p];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[p]._trigger("over",t,this._uiHash(this));this.containers[p].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]);i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});i[0].style.width&&!n.forceHelperSize||i.width(this.currentItem.width());i[0].style.height&&!n.forceHelperSize||i.height(this.currentItem.height());return i},_adjustOffsetFromHelper:function(t){"string"===typeof t&&(t=t.split(" "));e.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();if("absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])){t.left+=this.scrollParent.scrollLeft();t.top+=this.scrollParent.scrollTop()}(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0});return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode);"document"!==r.containment&&"window"!==r.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===r.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===r.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);if(!/^(document|window|parent)$/.test(r.containment)){t=e(r.containment)[0];n=e(r.containment).offset();i="hidden"!==e(t).css("overflow");this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(t){var n,i,r=this.options,o=t.pageX,a=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());if(this.originalPosition){if(this.containment){t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left);t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top);t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left);t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)}if(r.grid){n=this.originalPageY+Math.round((a-this.originalPageY)/r.grid[1])*r.grid[1];a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n;i=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0];o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i}}return{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){this.reverting=false;var n,i=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())});if(this!==this.currentContainer&&!t){i.push(function(e){this._trigger("remove",e,this._uiHash())});i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer));i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))}function r(e,t,n){return function(i){n._trigger(e,i,t._uiHash(t))}}for(n=this.containers.length-1;n>=0;n--){t||i.push(r("deactivate",this,this.containers[n]));if(this.containers[n].containerCache.over){i.push(r("out",this,this.containers[n]));this.containers[n].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex);this.dragging=false;t||this._trigger("beforeStop",e,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){this.helper[0]!==this.currentItem[0]&&this.helper.remove();this.helper=null}if(!t){for(n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}this.fromOutside=false;return!this.cancelHelperRemoval},_trigger:function(){false===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}});function he(e){return function(){var t=this.element.val();e.apply(this,arguments);this._refresh();t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);""!==this.value()&&this._value(this.element.val(),true);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t=this._super();var n=this.element;e.each(["min","max","step"],function(e,i){var r=n.attr(i);null!=r&&r.length&&(t[i]=r)});return t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}this._stop();this._refresh();this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(!t)return;if(!this.spinning&&!this._start(e))return false;this._spin((t>0?1:-1)*this.options.step,e);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100);e.preventDefault()},"mousedown .ui-spinner-button":function(t){var n;n=this.element[0]===e.ui.safeActiveElement(this.document[0])?this.previous:this.element.val();function i(){var t=this.element[0]===e.ui.safeActiveElement(this.document[0]);if(!t){this.element.trigger("focus");this.previous=n;this._delay(function(){this.previous=n})}}t.preventDefault();i.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;i.call(this)});if(false===this._start(t))return;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(!e(t.currentTarget).hasClass("ui-state-active"))return;if(false===this._start(t))return false;this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance();this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content");this._addClass("ui-spinner-input");this.element.attr("role","spinbutton");this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",true).button({classes:{"ui-button":""}});this._removeClass(this.buttons,"ui-corner-all");this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up");this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down");this.buttons.first().button({icon:this.options.icons.up,showLabel:false});this.buttons.last().button({icon:this.options.icons.down,showLabel:false});this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var n=this.options,i=e.ui.keyCode;switch(t.keyCode){case i.UP:this._repeat(null,1,t);return true;case i.DOWN:this._repeat(null,-1,t);return true;case i.PAGE_UP:this._repeat(null,n.page,t);return true;case i.PAGE_DOWN:this._repeat(null,-n.page,t);return true}return false},_start:function(e){if(!this.spinning&&false===this._trigger("start",e))return false;this.counter||(this.counter=1);this.spinning=true;return true},_repeat:function(e,t,n){e=e||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,t,n)},e);this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1);n=this._adjustValue(n+e*this._increment(this.counter));if(!this.spinning||false!==this._trigger("spin",t,{value:n})){this._value(n);this.counter++}},_increment:function(t){var n=this.options.incremental;if(n)return e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1);return 1},_precision:function(){var e=this._precisionOf(this.options.step);null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min)));return e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1},_adjustValue:function(e){var t,n,i=this.options;t=null!==i.min?i.min:0;n=e-t;n=Math.round(n/i.step)*i.step;e=t+n;e=parseFloat(e.toFixed(this._precision()));if(null!==i.max&&e>i.max)return i.max;if(null!==i.min&&e<i.min)return i.min;return e},_stop:function(e){if(!this.spinning)return;clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",e)},_setOption:function(e,t){var n,i,r;if("culture"===e||"numberFormat"===e){n=this._parse(this.element.val());this.options[e]=t;this.element.val(this._format(n));return}"max"!==e&&"min"!==e&&"step"!==e||"string"===typeof t&&(t=this._parse(t));if("icons"===e){i=this.buttons.first().find(".ui-icon");this._removeClass(i,null,this.options.icons.up);this._addClass(i,null,t.up);r=this.buttons.last().find(".ui-icon");this._removeClass(r,null,this.options.icons.down);this._addClass(r,null,t.down)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e);this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e);this.element.prop("disabled",!!e);this.buttons.button(e?"disable":"enable")},_setOptions:he(function(e){this._super(e)}),_parse:function(e){"string"===typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e);return""===e||isNaN(e)?null:e},_format:function(e){if(""===e)return"";return window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();if(null===e)return false;return e===this._adjustValue(e)},_value:function(e,t){var n;if(""!==e){n=this._parse(e);if(null!==n){t||(n=this._adjustValue(n));e=this._format(n)}}this.element.val(e);this._refresh()},_destroy:function(){this.element.prop("disabled",false).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:he(function(e){this._stepUp(e)}),_stepUp:function(e){if(this._start()){this._spin((e||1)*this.options.step);this._stop()}},stepDown:he(function(e){this._stepDown(e)}),_stepDown:function(e){if(this._start()){this._spin((e||1)*-this.options.step);this._stop()}},pageUp:he(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:he(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());he(this._value).call(this,e)},widget:function(){return this.uiSpinner}});false!==e.uiBackCompat&&e.widget("ui.spinner",e.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}});var ve=e.ui.spinner;e.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var n,i;n=t.href.replace(e,"");i=location.href.replace(e,"");try{n=decodeURIComponent(n)}catch(e){}try{i=decodeURIComponent(i)}catch(e){}return t.hash.length>1&&n===i}}(),_create:function(){var t=this,n=this.options;this.running=false;this._addClass("ui-tabs","ui-widget ui-widget-content");this._toggleClass("ui-tabs-collapsible",null,n.collapsible);this._processTabs();n.active=this._initialActive();e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort());false!==this.options.active&&this.anchors.length?this.active=this._findActive(n.active):this.active=e();this._refresh();this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,i=location.hash.substring(1);if(null===t){i&&this.tabs.each(function(n,r){if(e(r).attr("aria-controls")===i){t=n;return false}});null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active")));null!==t&&-1!==t||(t=!!this.tabs.length&&0)}if(false!==t){t=this.tabs.index(this.tabs.eq(t));-1===t&&(t=!n&&0)}!n&&false===t&&this.anchors.length&&(t=0);return t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(e.ui.safeActiveElement(this.document[0])).closest("li"),i=this.tabs.index(n),r=true;if(this._handlePageNav(t))return;switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:i++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=false;i--;break;case e.ui.keyCode.END:i=this.anchors.length-1;break;case e.ui.keyCode.HOME:i=0;break;case e.ui.keyCode.SPACE:t.preventDefault();clearTimeout(this.activating);this._activate(i);return;case e.ui.keyCode.ENTER:t.preventDefault();clearTimeout(this.activating);this._activate(i!==this.options.active&&i);return;default:return}t.preventDefault();clearTimeout(this.activating);i=this._focusNextTab(i,r);if(!t.ctrlKey&&!t.metaKey){n.attr("aria-selected","false");this.tabs.eq(i).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",i)},this.delay)}},_panelKeydown:function(t){if(this._handlePageNav(t))return;if(t.ctrlKey&&t.keyCode===e.ui.keyCode.UP){t.preventDefault();this.active.trigger("focus")}},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true}if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true}},_findNextTab:function(t,n){var i=this.tabs.length-1;function r(){t>i&&(t=0);t<0&&(t=i);return t}while(-1!==e.inArray(r(),this.options.disabled))t=n?t+1:t-1;return t},_focusNextTab:function(e,t){e=this._findNextTab(e,t);this.tabs.eq(e).trigger("focus");return e},_setOption:function(e,t){if("active"===e){this._activate(t);return}this._super(e,t);if("collapsible"===e){this._toggleClass("ui-tabs-collapsible",null,t);t||false!==this.options.active||this._activate(0)}"event"===e&&this._setupEvents(t);"heightStyle"===e&&this._setupHeightStyle(t)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)});this._processTabs();if(false!==t.active&&this.anchors.length)if(this.active.length&&!e.contains(this.tablist[0],this.active[0]))if(this.tabs.length===t.disabled.length){t.active=false;this.active=e()}else this._activate(this._findNextTab(Math.max(0,t.active-1),false));else t.active=this.tabs.index(this.active);else{t.active=false;this.active=e()}this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});if(this.active.length){this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});this._addClass(this.active,"ui-tabs-active","ui-state-active");this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})}else this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,n=this.tabs,i=this.anchors,r=this.panels;this.tablist=this._getList().attr("role","tablist");this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header");this.tablist.on("mousedown"+this.eventNamespace,"> li",function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()});this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1});this._addClass(this.tabs,"ui-tabs-tab","ui-state-default");this.anchors=this.tabs.map(function(){return e("a",this)[0]}).attr({role:"presentation",tabIndex:-1});this._addClass(this.anchors,"ui-tabs-anchor");this.panels=e();this.anchors.each(function(n,i){var r,o,a,s=e(i).uniqueId().attr("id"),l=e(i).closest("li"),c=l.attr("aria-controls");if(t._isLocal(i)){r=i.hash;a=r.substring(1);o=t.element.find(t._sanitizeSelector(r))}else{a=l.attr("aria-controls")||e({}).uniqueId()[0].id;r="#"+a;o=t.element.find(r);if(!o.length){o=t._createPanel(a);o.insertAfter(t.panels[n-1]||t.tablist)}o.attr("aria-live","polite")}o.length&&(t.panels=t.panels.add(o));c&&l.data("ui-tabs-aria-controls",c);l.attr({"aria-controls":a,"aria-labelledby":s});o.attr("aria-labelledby",s)});this.panels.attr("role","tabpanel");this._addClass(this.panels,"ui-tabs-panel","ui-widget-content");if(n){this._off(n.not(this.tabs));this._off(i.not(this.anchors));this._off(r.not(this.panels))}},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).data("ui-tabs-destroy",true)},_setOptionDisabled:function(t){var n,i,r;e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=true):t=false);for(r=0;i=this.tabs[r];r++){n=e(i);if(true===t||-1!==e.inArray(r,t)){n.attr("aria-disabled","true");this._addClass(n,null,"ui-state-disabled")}else{n.removeAttr("aria-disabled");this._removeClass(n,null,"ui-state-disabled")}}this.options.disabled=t;this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,true===t)},_setupEvents:function(t){var n={};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(true,this.anchors,{click:function(e){e.preventDefault()}});this._on(this.anchors,n);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,i=this.element.parent();if("fill"===t){n=i.height();n-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");if("absolute"===i||"fixed"===i)return;n-=t.outerHeight(true)});this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(true)});this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else if("auto"===t){n=0;this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n)}},_eventHandler:function(t){var n=this.options,i=this.active,r=e(t.currentTarget),o=r.closest("li"),a=o[0]===i[0],s=a&&n.collapsible,l=s?e():this._getPanelForTab(o),c=i.length?this._getPanelForTab(i):e(),u={oldTab:i,oldPanel:c,newTab:s?e():o,newPanel:l};t.preventDefault();if(o.hasClass("ui-state-disabled")||o.hasClass("ui-tabs-loading")||this.running||a&&!n.collapsible||false===this._trigger("beforeActivate",t,u))return;n.active=!s&&this.tabs.index(o);this.active=a?e():o;this.xhr&&this.xhr.abort();c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier.");l.length&&this.load(this.tabs.index(o),t);this._toggle(t,u)},_toggle:function(t,n){var i=this,r=n.newPanel,o=n.oldPanel;this.running=true;function a(){i.running=false;i._trigger("activate",t,n)}function s(){i._addClass(n.newTab.closest("li"),"ui-tabs-active","ui-state-active");if(r.length&&i.options.show)i._show(r,i.options.show,a);else{r.show();a()}}if(o.length&&this.options.hide)this._hide(o,this.options.hide,function(){i._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active");s()});else{this._removeClass(n.oldTab.closest("li"),"ui-tabs-active","ui-state-active");o.hide();s()}o.attr("aria-hidden","true");n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});r.length&&o.length?n.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1);r.attr("aria-hidden","false");n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var n,i=this._findActive(t);if(i[0]===this.active[0])return;i.length||(i=this.active);n=i.find(".ui-tabs-anchor")[0];this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return false===t?e():this.tabs.eq(t)},_getIndex:function(t){"string"===typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+e.ui.escapeSelector(t)+"']")));return t},_destroy:function(){this.xhr&&this.xhr.abort();this.tablist.removeAttr("role").off(this.eventNamespace);this.anchors.removeAttr("role tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")});this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var n=this.options.disabled;if(false===n)return;if(void 0===t)n=false;else{t=this._getIndex(t);n=e.isArray(n)?e.map(n,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,n){return n!==t?n:null})}this._setOptionDisabled(n)},disable:function(t){var n=this.options.disabled;if(true===n)return;if(void 0===t)n=true;else{t=this._getIndex(t);if(-1!==e.inArray(t,n))return;n=e.isArray(n)?e.merge([t],n).sort():[t]}this._setOptionDisabled(n)},load:function(t,n){t=this._getIndex(t);var i=this,r=this.tabs.eq(t),o=r.find(".ui-tabs-anchor"),a=this._getPanelForTab(r),s={tab:r,panel:a},l=function(e,t){"abort"===t&&i.panels.stop(false,true);i._removeClass(r,"ui-tabs-loading");a.removeAttr("aria-busy");e===i.xhr&&delete i.xhr};if(this._isLocal(o[0]))return;this.xhr=e.ajax(this._ajaxSettings(o,n,s));if(this.xhr&&"canceled"!==this.xhr.statusText){this._addClass(r,"ui-tabs-loading");a.attr("aria-busy","true");this.xhr.done(function(e,t,r){setTimeout(function(){a.html(e);i._trigger("load",n,s);l(r,t)},1)}).fail(function(e,t){setTimeout(function(){l(e,t)},1)})}},_ajaxSettings:function(t,n,i){var r=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,o){return r._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:o},i))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}});false!==e.uiBackCompat&&e.widget("ui.tabs",e.ui.tabs,{_processTabs:function(){this._superApply(arguments);this._addClass(this.tabs,"ui-tab")}});var ge=e.ui.tabs;e.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,track:false,close:null,open:null},_addDescribedBy:function(t,n){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(n);t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(i.join(" ")))},_removeDescribedBy:function(t){var n=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),r=e.inArray(n,i);-1!==r&&i.splice(r,1);t.removeData("ui-tooltip-id");i=e.trim(i.join(" "));i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=e([])},_setOption:function(t,n){var i=this;this._super(t,n);"content"===t&&e.each(this.tooltips,function(e,t){i._updateContent(t.element)})},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,function(n,i){var r=e.Event("blur");r.target=r.currentTarget=i.element[0];t.close(r,true)});this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=e(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))});this.disabledTitles=e([])},open:function(t){var n=this,i=e(t?t.target:this.element).closest(this.options.items);if(!i.length||i.data("ui-tooltip-id"))return;i.attr("title")&&i.data("ui-tooltip-title",i.attr("title"));i.data("ui-tooltip-open",true);t&&"mouseover"===t.type&&i.parents().each(function(){var t=e(this),i;if(t.data("ui-tooltip-open")){i=e.Event("blur");i.target=i.currentTarget=this;n.close(i,true)}if(t.attr("title")){t.uniqueId();n.parents[this.id]={element:this,title:t.attr("title")};t.attr("title","")}});this._registerCloseHandlers(t,i);this._updateContent(i,t)},_updateContent:function(e,t){var n,i=this.options.content,r=this,o=t?t.type:null;if("string"===typeof i||i.nodeType||i.jquery)return this._open(t,e,i);n=i.call(e[0],function(n){r._delay(function(){if(!e.data("ui-tooltip-open"))return;t&&(t.type=o);this._open(t,e,n)})});n&&this._open(t,e,n)},_open:function(t,n,i){var r,o,a,s,l=e.extend({},this.options.position);if(!i)return;r=this._find(n);if(r){r.tooltip.find(".ui-tooltip-content").html(i);return}n.is("[title]")&&(t&&"mouseover"===t.type?n.attr("title",""):n.removeAttr("title"));r=this._tooltip(n);o=r.tooltip;this._addDescribedBy(n,o.attr("id"));o.find(".ui-tooltip-content").html(i);this.liveRegion.children().hide();s=e("<div>").html(o.find(".ui-tooltip-content").html());s.removeAttr("name").find("[name]").removeAttr("name");s.removeAttr("id").find("[id]").removeAttr("id");s.appendTo(this.liveRegion);function c(e){l.of=e;if(o.is(":hidden"))return;o.position(l)}if(this.options.track&&t&&/^mouse/.test(t.type)){this._on(this.document,{mousemove:c});c(t)}else o.position(e.extend({of:n},this.options.position));o.hide();this._show(o,this.options.show);this.options.track&&this.options.show&&this.options.show.delay&&(a=this.delayedShow=setInterval(function(){if(o.is(":visible")){c(l.of);clearInterval(a)}},e.fx.interval));this._trigger("open",t,{tooltip:o})},_registerCloseHandlers:function(t,n){var i={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0];this.close(i,true)}}};n[0]!==this.element[0]&&(i.remove=function(){this._removeTooltip(this._find(n).tooltip)});t&&"mouseover"!==t.type||(i.mouseleave="close");t&&"focusin"!==t.type||(i.focusout="close");this._on(true,n,i)},close:function(t){var n,i=this,r=e(t?t.currentTarget:this.element),o=this._find(r);if(!o){r.removeData("ui-tooltip-open");return}n=o.tooltip;if(o.closing)return;clearInterval(this.delayedShow);r.data("ui-tooltip-title")&&!r.attr("title")&&r.attr("title",r.data("ui-tooltip-title"));this._removeDescribedBy(r);o.hiding=true;n.stop(true);this._hide(n,this.options.hide,function(){i._removeTooltip(e(this))});r.removeData("ui-tooltip-open");this._off(r,"mouseleave focusout keyup");r[0]!==this.element[0]&&this._off(r,"remove");this._off(this.document,"mousemove");t&&"mouseleave"===t.type&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title);delete i.parents[t]});o.closing=true;this._trigger("close",t,{tooltip:n});o.hiding||(o.closing=false)},_tooltip:function(t){var n=e("<div>").attr("role","tooltip"),i=e("<div>").appendTo(n),r=n.uniqueId().attr("id");this._addClass(i,"ui-tooltip-content");this._addClass(n,"ui-tooltip","ui-widget ui-widget-content");n.appendTo(this._appendTo(t));return this.tooltips[r]={element:t,tooltip:n}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove();delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");t.length||(t=this.document[0].body);return t},_destroy:function(){var t=this;e.each(this.tooltips,function(n,i){var r=e.Event("blur"),o=i.element;r.target=r.currentTarget=o[0];t.close(r,true);e("#"+n).remove();if(o.data("ui-tooltip-title")){o.attr("title")||o.attr("title",o.data("ui-tooltip-title"));o.removeData("ui-tooltip-title")}});this.liveRegion.remove()}});false!==e.uiBackCompat&&e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass);return e}});var me=e.ui.tooltip})},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(92)],r=function(e,t){var n;n=t.extend({getRowCount:function e(){return 0},getFirstElementIndex:function e(){return-1},getLastElementIndex:function e(){return-1},getIndexOf:function e(t){return t.getIndex()},onVirtualScroll:function t(){return e.resolve()},onGotoNextBlock:function t(){return e.resolve()},onGotoPreviousBlock:function t(){return e.resolve()},onInitialNativeScroll:function t(){return e.resolve()}});return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(11),n(48),n(355),n(776),n(777),n(96),n(99),n(356),n(778)],r=function(e,t,n,i,r,a,s){t.directive("qvScrollArea",["$document",function(t){return{restrict:"E",transclude:true,template:i,replace:true,scope:{scrollbarSize:"=?",nonMouseViewportScrolling:"=?",direction:"=?"},require:"qvScrollArea",controller:n,link:function n(i,r,l,c){function u(e,t){var n=i.viewportRect.left,r=i.viewportRect.top,o=i.viewportRect.left+i.viewportRect.width,a=i.viewportRect.top+i.viewportRect.height;return e>=n&&e<=o&&t>=r&&t<=a}"number"!==typeof i.scrollbarSize&&(i.scrollbarSize=8);i.direction||(i.direction="ltr");i.$watch("scrollbarX.enabled",function(e){true===e&&r.css("overflow-x","hidden")});i.$watch("scrollbarY.enabled",function(e){true===e&&r.css("overflow-y","hidden")});i.namespace=".scroll-area-"+i.$id;function d(){r.off(i.namespace);t.off(i.namespace);a(r[0]).off("*",i.namespace)}i.on=function(){r.on("wheel"+i.namespace,function(e){e.preventDefault();var t=e.originalEvent,n=t.shiftKey?t.deltaY:t.deltaX,i=t.shiftKey?t.deltaX:t.deltaY,r=c.getScrollAmount(n,i,t.deltaMode);c.scroll(r.deltaX,r.deltaY,false,false);if(!s.treatAsDesktop()){c.setMouseTrackSize();c.fadeInScrollbars();c.fadeOutScrollbarsDelayed()}c.digest()});t.on("keydown"+i.namespace,function(t){var n=0,r=0,o,a,s=e(t.target),l=s.is("input")||s.is("textarea");if(i.hover&&!l){switch(t.keyCode){case 33:r=1;o=c.DELTA_MODE.PAGE;break;case 34:r=-1;o=c.DELTA_MODE.PAGE;break;case 36:r=1;o=c.DELTA_MODE.AREA;break;case 35:r=-1;o=c.DELTA_MODE.AREA;break;case 38:r=1;o=c.DELTA_MODE.LINE;break;case 40:r=-1;o=c.DELTA_MODE.LINE;break;case 39:n=-1;o=c.DELTA_MODE.LINE;break;case 37:n=1;o=c.DELTA_MODE.LINE;break;default:return}a=c.getScrollAmount(n,r,o);c.scroll(-a.deltaX,-a.deltaY,false,false);c.digest()}});r.on("mouseenter"+i.namespace+"pointerenter"+i.namespace,function(e){i.isMouse=s.isMouse(e.originalEvent);if(i.isMouse){i.hover=true;if(s.treatAsDesktop()){c.setMouseTrackSize();c.fadeInScrollbars()}c.digest()}else e.preventDefault()});r.on("mouseleave"+i.namespace+"pointerleave"+i.namespace,function(e){i.isMouse=s.isMouse(e.originalEvent);if(i.isMouse){i.hover=false;s.treatAsDesktop()&&c.fadeOutScrollbars()}});if("object"===o(i.nonMouseViewportScrolling)){"number"!==typeof i.nonMouseViewportScrolling.scrollbarSize&&(i.nonMouseViewportScrolling.scrollbarSize=36);"string"!==typeof i.nonMouseViewportScrolling.className&&(i.nonMouseViewportScrolling.className="show-non-mouse-scrollbars");a(r[0]).swipe({id:i.namespace,options:{radiusThreshold:0,useMomentum:true,inertia:.7,preventDefault:true},start:function e(t,n){if(s.isMouse(t)){this.cancel();return}if(!u(n.pagePoints[0].x-this.rect.x,n.pagePoints[0].y-this.rect.y)){this.cancel();return}c.setMouse(false);c.setNonMouseTrackSize();c.scrollStart();c.fadeInScrollbars();c.digest()},update:function e(t,n){var r=i.scrollbarX.getScrollDelta(n)[0],o=i.scrollbarY.getScrollDelta(n)[1];c.scroll(-1*r,-1*o,false,true);c.digest()},end:function e(){c.scrollEnd();c.fadeOutScrollbars();c.digest()}})}return d};i.$on("$destroy",function(){d()})}}}]);t.directive("qvScrollbar",["qvScrollAreaService",function(e){return{restrict:"E",require:["^qvScrollArea","qvScrollbar"],scope:{data:"=",interactive:"=",viewportRect:"="},template:r,replace:true,controller:function e(){},link:function t(n,i,r,o){var a=o[0],l=o[1];if("vertical"===n.data.direction){n.data.classList.push("vertical");a.addScrollbarYCtrl(l)}else{n.data.classList.push("horizontal");a.addScrollbarXCtrl(l)}function c(e){i[e?"addClass":"removeClass"]("fade")}l.allowFade=function(){return!n.data.active};l.fadeIn=function(){return c(true)};l.fadeOut=function(){return c(false)};n.thumbStyle={};n.$watch("data.thumb",function(){e.setThumbStyle(n.thumbStyle,n.data)},true);n.$watch("data.vPage",function(){e.setThumbStyle(n.thumbStyle,n.data)});n.$watch("data.vLength",function(){e.setThumbStyle(n.thumbStyle,n.data)});n.$watch("data.enabled",function(e){a.isMouseOver()&&e&&l.fadeIn()});n.setThumbStyle=e.setThumbStyle.bind(null,n.thumbStyle,n.data);n.trackHitAreaStyle={};n.$watch("data.trackSize",function(t){if(void 0===t)return;e.setTrackHitAreaStyle(n.trackHitAreaStyle,n.data,t)});n.start=function(e){a.setMouse(e);if(!n.data.active&&!s.treatAsDesktop()){e?a.setMouseTrackSize():a.setNonMouseTrackSize();a.fadeInScrollbars()}n.data.active=true;a.scrollStart()};n.update=function(e,t){a.scroll(e,t,false,true)};n.end=function(e){var t=n.data,i=0,r=t.vLength-t.vViewportLength;t.vPos<i?t.vPos=i:t.vPos>r&&(t.vPos=r);n.data.active=false;a.scrollEnd();e?a.fadeOutScrollbarsDelayed():a.fadeOutScrollbars()};n.on=function(){n.hitAreaOff=n.hitAreaOn();n.thumbOff=n.thumbOn();return function(){n.hitAreaOff();n.thumbOff()}};n.$watch("interactive",function(e){e?n.off=n.on():n.off&&n.off()})}}}]);t.directive("qvScrollbarThumb",[function(){return{restrict:"E",template:"<div></div>",replace:true,require:"^qvScrollArea",link:function e(t,n,i,r){t.thumbOn=function(){a(n[0]).tap({start:function e(n){a.preventGestures(this.gestureHandler);t.start(s.isMouse(n));r.digest()}}).swipe({options:{radiusThreshold:0},update:function e(n,i){t.update.apply(t,t.data.getScrollDelta(i));r.digest()},end:function e(){t.end();r.digest()}});return function(){a(n[0]).off()}};t.$on("$destroy",function(){a(n[0]).off()})}}}]);t.directive("qvScrollbarTrackHitArea",[function(){return{restrict:"E",replace:true,template:"<div></div>",require:"^qvScrollArea",link:function e(t,n,i,r){function o(e,n){var i=t.data.thumb.size,o=t.data.thumb.pos,a=0,s=0,l,c,u,d,f;switch(t.data.direction){case"vertical":c=e.pagePoints[0].y-n.y<o;u=e.pagePoints[0].y-n.y>o+i;if(u){l=r.getScrollAmount(0,-1,r.DELTA_MODE.PAGE);a=0;s=-l.deltaY}else if(c){l=r.getScrollAmount(0,1,r.DELTA_MODE.PAGE);a=0;s=-l.deltaY}break;case"horizontal":d=e.pagePoints[0].x-n.x<o;f=e.pagePoints[0].x-n.x>o+i;if(d){l=r.getScrollAmount(1,0,r.DELTA_MODE.PAGE);a=-l.deltaX;s=0}else if(f){l=r.getScrollAmount(-1,0,r.DELTA_MODE.PAGE);a=-l.deltaX;s=0}break}r.scroll(a,s)}function l(e,n){switch(t.data.direction){case"vertical":t.update(0,(e.pagePoints[0].y-n.y-(t.data.thumb.pos+t.data.thumb.size/2))*(1/t.data.scaleFactor));break;case"horizontal":t.update((e.pagePoints[0].x-n.x-(t.data.thumb.pos+t.data.thumb.size/2))*(1/t.data.scaleFactor),0);break;default:throw new Error("not implemented")}}t.hitAreaOn=function(){a(n[0]).tap({start:function e(n,i){a.preventGestures(this.gestureHandler);t.start(s.isMouse(n));t.setThumbStyle();s.isMouse(n)?o(i,this.rect):l(i,this.rect);r.digest()},end:function e(){t.end(true);r.digest()}}).swipe({options:{radiusThreshold:0},start:function e(n,i){if(s.isMouse(n)){this.cancel();return}t.update.apply(t,t.data.getScrollDelta(i));r.digest()},update:function e(n,i){t.update.apply(t,t.data.getScrollDelta(i));r.digest()},end:function e(){t.end(true);r.digest()}});return function(){a(n[0]).off()}};t.$on("$destroy",function(){a(n[0]).off()})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(89),n(115),n(305),n(124),n(1013),n(95),n(312),n(90),n(91),n(1014),n(272),n(97),n(205),n(386),n(123),n(247),n(100),n(377),n(164),n(103),n(391),n(1020),n(176),n(1021),n(999),n(1024)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v,g,m,b,y,x,S){var w=new l({type:"invalid",path:"objects.error-handling/invalid-type"});function q(){var e=/\.(qlik-stage|qlikcloud)\.com/;var t=window.location.hostname.match(e)||[];return t.length}var C={INVALID:0,RENDERED:1};t.componentDirective("qvObjectContent",{object:"=",backendApi:"=",ext:"=",options:"=",layout:"=",selectionsApi:"=",tooltipApi:"=",throbberApi:"=",onInit:"="},null,function(e,t,n){t.onInit(e,t,n)});function _(e){e.selectionsApi&&e.selectionsApi.active&&e.selectionsApi.confirm()}function I(e,n){var i;function r(){return!e.options||false!==e.options.isVisible}function o(){_(n)}function a(){if(!r())return;t.$apply(e,function(){n.resize()});n.throbberApi&&n.throbberApi.resize();n.explore.resize()}function l(){i||(i=setTimeout(function(){a();clearTimeout(i);i=null},100))}e.$on("resizeCell",function(){l()});s.subscribe("/ui/object/resize."+e.$id,function(){l()});p.on("start."+e.$id,o);e.$on("$destroy",function(){clearTimeout(i);s.unsubscribe("."+e.$id);p.off("start."+e.$id,o)})}function E(e,t){e.object._forcePaint=true;function n(n){if(!e.model.isCancelled){e.layout=n;t.setLayout(n,e.options)}}function i(e){if(!e)return;t.model&&a(t.model);o(e);t.setModel(e)}function r(){t.setRenderState(C.INVALID)}function o(i){i.Invalidated&&!i.isCancelled&&i.Invalidated.bind(r);t.subscription=e.model.layoutSubscribe(n)}function a(n){n&&n.Invalidated&&n.Invalidated.unbind(r);n&&n.isValidating&&e.options._softCancelOnRemove&&n.markAsCancelled();t.subscription&&t.subscription.dispose()}e.$watch("model",i);e.$on("$destroy",function(){a(e.model)})}function D(e){return parseInt(e)/13+"em"}function A(e,t){if(!t.qInfo)return;var n=b.initializeService("object."+b.getMatch(t.visualization||t.qInfo.qType));e.styles=c.extend(true,e.styles||{},{backgroundColor:{"background-color":n.getStyle("","backgroundColor")},title:{"font-size":D(n.getStyle("title.main","fontSize")),color:n.getStyle("title.main","color")},subTitle:{"font-size":D(n.getStyle("title.subTitle","fontSize")),color:n.getStyle("title.subTitle","color")},footer:{"font-size":D(n.getStyle("title.footer","fontSize")),color:n.getStyle("title.footer","color"),"background-color":n.getStyle("title.footer","backgroundColor")}})}function T(e,n,i,o){var a,s,l,d;var p,h;n.updateTitlePadding=function(t){var n="rtl"===e.options.direction;c.setValue(e,"styles.title.padding-right",n?0:t+"px");c.setValue(e,"styles.title.padding-left",n?t+"px":0);o.contentLoaded().then(function(e){e.view&&e.view.updateTitlePadding&&e.view.updateTitlePadding(t)})};n.setObjectClass=function(t){d||(d=i.find(".qv-object"));if(d[0]){(t||void 0===p)&&(p=d[0].clientWidth);(t||void 0===h)&&(h=d[0].clientHeight)}var o=r.getLayoutMode(p,h);var a=n.type&&n.type.type;var s=[];n._inEditState&&s.push("qv-mode-edit");n.hasValidContent()||s.push("qv-incomplete");n.supportSnapshot()&&s.push("qv-can-take-snapshot");n.selectionsApi&&n.selectionsApi.active&&s.push("qv-selections-active");n.objectSize={w:p,h:h};e.options.layoutMode=o;var l="qv-layout-"+r.getLayoutModeKey(o);s.push(l);e.objectClass="qv-object-"+a;s.push(e.objectClass);n.selectionClass&&s.push(n.selectionClass);e.classList=s;e.wrapperClassList=[];e.object&&e.object.hasFrame&&e.object.showTitles&&!!e.layout.footnote&&e.wrapperClassList.push("has-footnote");e.options.thinHeader=!n.showTitles||""===e.layout.title&&""===e.layout.subtitle&&!n._inEditState};function v(){return!e.options||false!==e.options.isVisible}n.update=function(){if(!this.valid)return;A(e,e.layout);var i=this;a=t.getService("$timeout")(function(){n.backendApi&&n.backendApi.updateCache(e.layout);n.setObjectClass();e.$digest();i.loadContent();var t=n.type===w&&e.options.hardError;o.contentLoaded().then(function(i){if(!i.isDestroyed)try{return i.onPaint(e.layout,{visible:v()}).then(function(i){if(false===i)return;if(t){n.setRenderState(C.INVALID);"function"===typeof e.options.onRendered&&e.options.onRendered.call(null,"INVALID")}else{n.setRenderState(C.RENDERED);"function"===typeof e.options.onRendered&&e.options.onRendered.call(null)}}).catch(function(){n.setRenderState(C.INVALID);"function"===typeof e.options.onRendered&&e.options.onRendered.call(null)})}catch(t){n.setRenderState(C.INVALID);n.error={class:"hard-error",title:u.get("Object.Error"),message:u.get("Object.ErrorMessage.RenderingFailed",n.ext&&n.ext.type)};S.trackEvent(S.customEvents.EXTENSION_PAINT_ERROR,{message:"string"===typeof t?t:t.message,stack:t.stack,extension:n.type?n.type.type:"undefined",isThirdParty:n.type&&n.type.libraryInfo.isThirdParty});o.updateContent(f).then(function(i){i.onPaint(e.layout,{visible:false}).then(function(){n.setRenderState(C.RENDERED);"function"===typeof e.options.onRendered&&e.options.onRendered.call(null,t)})});throw t}})})};n.resize=function(){if(!v())return;n.setRenderState(C.INVALID);n.setObjectClass(true);s=t.getService("$timeout")(function(){o.contentLoaded().then(function(t){t.isDestroyed||t.onResize(e.layout).then(function(){n.setRenderState(C.RENDERED)}).catch(function(e){false})}).catch(function(e){false})})};n.onResize=function(){o.contentLoaded().then(function(t){t.onResize(e.layout).then(function(){n.setRenderState(C.RENDERED)})})};e.$on("$destroy",function(){var e=t.getService("$timeout");e.cancel(a);e.cancel(s);l&&l.reject()})}function O(e,r,o,a){var s=n(),l;o.loaded=s.promise;o.valid=false;o.loadContent=function(){var t={options:e.options,object:o,layout:e.layout,ext:o.ext};var n;n=o.ext.hasError(t)?f:o.ext.showRequirements(t)?d:o.ext;a.updateContent(n)};o.reset=function(){if(!this.valid)return;e.options=c.extend({},e.resetOptions,{isZoomed:e.options.isZoomed,interactionState:e.options.interactionState,direction:e.options.direction,onRendered:e.options.onRendered});s=n();this.loaded=s.promise;this.valid=false};o.validate=function(){if(this.valid)return;if(this.layout&&this.type&&this.ext){this.valid=true;s.resolve()}};o.setExtension=function(t){this.ext=t;e.ext=t;if("invalid"!==t.type){t.mapProperties(this.model);t.mapSoftProperties();this.setBackendApi();if(t.migrate){this.model.migrate={properties:t.migrate.properties||function(e){return e},snapshot:t.migrate.snapshot||function(e){return e}};"function"===typeof t.migrate.snapshot&&y.isSnapshotData(this.model.layout)&&t.migrate.snapshot(this.model.layout)}else this.model.migrate={properties:function e(t){return t},snapshot:function e(t){return t}}}this.validate();this.update();this.ext.model=this.model};o.setBackendApi=function(){var t=e.options.APIType||this.ext.BackendApi;var n=new t(this.model);this.backendApi=n;a.contentLoaded().then(function(e){e.setBackendApi(n)})};o.setType=function(n,i){this.backendApi&&this.backendApi.destroy();this.ext=null;this.backendApi=null;this.hasContent=false;this.type=n;n.load().then(function(s){if(o.type!==n)return;n!==w&&(o.error=null);function l(){o.setExtension(s);k(e,r,o,a);if(i){t.$rootScope.$broadcast("refreshPropertyPanel");t.$rootScope.$broadcast("reloadExploreContent")}}if("function"===typeof s.init){var c=s.init.call(null,r,o.layout);c&&"function"===typeof c.then?c.then(function(){l()},function(t){o.setRenderState(C.INVALID);o.error={class:"hard-error",title:u.get("Object.Invalid.Title"),message:t||u.get("Object.ErrorMessage.RenderingFailed",s.type)};a.updateContent(f).then(function(n){n.onPaint(e.layout,{visible:false}).then(function(){o.setRenderState(C.RENDERED);"function"===typeof e.options.onRendered&&e.options.onRendered.call(null,t)})});l()}):l()}else l()},function(){o.setType(w);q()?o.error={class:"hard-error",title:u.get("Object.Invalid.Title"),message:u.get("Object.ErrorMessage.NotFound.Cloud.Extensions",n.type)}:o.error={class:"hard-error",title:u.get("Object.Invalid.Title"),message:u.get("Object.ErrorMessage.NotFound",n.type)};o.isInvalid=true;o.setObjectClass()})};o.setModel=function(e){this.model=e;if(this.ext){this.ext.model=e;this.setBackendApi()}};o.on=function(){a.contentLoaded().then(function(e){e.view&&e.view.on()})};o.off=function(){a.contentLoaded().then(function(e){e.view&&e.view.off()})};o.isOn=function(){return a.contentLoaded().then(function(e){return e.view?e.view.isOn():null})};o.setInteractionState=function(n){o._interactionState=n;o._inEditState=n===g.EDIT;o._inAnalysisState=n===g.ANALYSIS;e.options.interactionState=n;this._inEditState&&o.viewDataToggled&&o.toggleDataView();a.contentLoaded().then(function(e){n!==g.ANALYSIS&&_(o);e.setInteractionState(n);t.getService("$timeout").cancel(l);l=t.getService("$timeout")(function(){o.setObjectClass()})})};o.getInteractionState=function(){return o._interactionState};o.inAnalysisState=function(){return o._inAnalysisState};o.inEditState=function(){return o._inEditState};o.setFreeResize=function(t){e.options.freeResize=t;a.contentLoaded().then(function(e){e.setFreeResize(t)})};o.setDirection=function(t){if(!t||e.options.direction===t)return;e.options.direction=t;a.contentLoaded().then(function(e){e.setDirection(t);o.update()})};o.setLayout=function(e){this.layout=e;var t=e.visualization||e.qInfo&&e.qInfo.qType;var n=i.getType(t);var r=n;e.extensionMeta&&e.extensionMeta.name&&(r=e.extensionMeta.name);if(e.qError){n=w;this.error={title:"Object.Error",message:"Object.Invalid.Info"}}if(!n){n=w;q()?this.error={title:"Object.Invalid.Title",message:["Object.ErrorMessage.NotFound.Cloud.Extensions",r,t]}:this.error={title:"Object.Invalid.Title",message:["Object.ErrorMessage.NotFound",r,t]}}if(this.ext&&this.ext.hasNewType&&this.ext.hasNewType(this,n,e)||this.type!==n){this.reset();this.setType(n,!!this.type)}this.isInvalid=n===w;this.isLink=!this.isInvalid&&!!e.qExtendsId;this.showTitles=false!==e.showTitles;this.validate();this.update()}}function k(n,i,r){function o(t){var n=e(t.target);if(r.selectionsApi.ignoreOnOutside(n))return;r.selectionsApi.getDockToElement().off(".object");r.selectionsApi.confirm()}r.activateSelections=function(){if("undefined"===typeof r.ext.options.selections)return;r.inAnalysisState()&&r.selectionsApi.activate()};r.selectionsApi&&"function"===typeof r.selectionsApi.destroy&&r.selectionsApi.destroy();function a(){r.backendApi&&r.backendApi.endSelections(true);return null}r.tooltipApi={cancel:function e(){},destroy:function e(){}};r.selectionsApi={destroy:function t(){this._activatedCallbacks=[];this._deactivatedCallbacks=[];e(window).off("onbeforeunload",a)},active:false,selectionsMade:false,_activatedCallbacks:[],_deactivatedCallbacks:[],on:function e(){},off:function e(){},ignoreOnOutside:function e(t){return!!(t.closest(".qv-selection-toolbar").length||t.closest(".selections-data-area-ui").length)},getDockToElement:function e(){return i},getMenuMaxHeight:function e(){return r.selectionsApi.getDockToElement().outerHeight()},getSelectionToolbarWidthOffset:function e(){return 0},refreshToolbar:function e(){t.getService("qvSelectionToolbarService").refresh()},watchActivated:function e(t){this._activatedCallbacks.push(t);return function(){var e=this._activatedCallbacks.indexOf(t);this._activatedCallbacks.splice(e,1)}.bind(this)},activated:function s(l){this.active=true;l||r.backendApi.beginSelections();e(window).on("onbeforeunload",a);if(!n.options.isPopover){this.getDockToElement().on("qv-outside.object",o);t.$apply(n,function(){r.setObjectClass();r.getSelectionToolbar().then(function(e){var o={toolbar:e,selectionsApi:r.selectionsApi,options:n.options,menuMaxHeight:r.selectionsApi.getMenuMaxHeight(),offsetWidth:r.selectionsApi.getSelectionToolbarWidthOffset()};var a=i.parent().closest(".qv-object-wrapper").length?i.parent().closest(".qv-object-wrapper"):i;t.getService("qvSelectionToolbarService").open(a,r.selectionsApi.getDockToElement(),o)})})}this._activatedCallbacks.forEach(function(e){e.call(this)},this)},watchDeactivated:function e(t){this._deactivatedCallbacks.push(t);return function(){var e=this._deactivatedCallbacks.indexOf(t);this._deactivatedCallbacks.splice(e,1)}.bind(this)},deactivated:function i(){e(window).off("onbeforeunload",a);this.active=false;this.selectionsMade=false;r.tooltipApi.cancel();if(!n.options.isPopover){r.selectionsApi.getDockToElement().off(".object");t.$apply(n,function(){r.setObjectClass();t.getService("qvSelectionToolbarService").close()})}this._deactivatedCallbacks.forEach(function(e){e.call(this)},this)},confirm:function e(){r.selectionsApi.deactivateSearch&&r.selectionsApi.deactivateSearch();r.backendApi.endSelections(true);r.tooltipApi.cancel();this.deactivated()},cancel:function e(){r.selectionsApi.deactivateSearch&&r.selectionsApi.deactivateSearch();r.backendApi.endSelections(false);r.tooltipApi.cancel();this.deactivated()},clear:function e(){r.backendApi.clearSelections();r.tooltipApi.cancel();this.selectionsMade=false},toggleKeyboardAccelerators:function e(){},getKeyAsToggleSelected:function e(t){return!(t.metaKey||t.ctrlKey)},search:function e(){},confirmSearch:function e(){},cancelSearch:function e(){},activate:function e(){if(this.active)return;this.activated()},notifyLockedSelections:function e(t){x.showLockedFeedback(t)}};r.selectionsApi.watchDeactivated(function(){n.$emit("childSelectionActive",false)});r.selectionsApi.watchActivated(function(){n.$emit("childSelectionActive",true)})}function L(e,n){var i,r,o;n.throbberApi&&"function"===typeof n.throbberApi.destroy&&n.throbberApi.destroy();function a(i,a){t.getService("$timeout").cancel(r);t.getService("$timeout").cancel(o);if(n.selectionsApi&&n.selectionsApi.active)n.throbberApi.hide();else if(e.model&&void 0===e.model.state)n.throbberApi.show();else if(e.model&&e.model.isCancelled)n.throbberApi.isQueryCanceled=true;else if(i){r=t.getService("$timeout")(function(){e.model&&e.model.isValidating&&n.throbberApi.show()},a);o=t.getService("$timeout")(function(){if(true===n.throbberApi.isVisible){n.throbberApi.isLongRunningQuery=true;n.throbberApi.isQueryCanceled=false}},8e3)}else{n.throbberApi.hide();n.throbberApi.isLongRunningQuery=false}}n.throbberApi={resizeCallbacks:[],isVisible:false,isLongRunningQuery:false,isQueryCanceled:false,initialize:function t(){i=e.$watch("model.isValidating",function(e){a(e,1e3)})},reset:function e(t){a(t,0)},show:function e(){n.throbberApi.isVisible=true;n.throbberApi.isQueryCanceled=false;n.throbberApi.isLongRunningQuery=false},hide:function e(){n.throbberApi.isVisible=false;n.throbberApi.isLongRunningQuery=false;t.getService("$timeout").cancel(r);t.getService("$timeout").cancel(o)},off:function e(){i();t.getService("$timeout").cancel(r);t.getService("$timeout").cancel(o)},destroy:function e(){n.throbberApi.off();n.throbberApi.resizeCallbacks.length=0},resize:function e(){n.throbberApi.resizeCallbacks.forEach(function(e){e()})},watchResize:function e(t){var i=n.throbberApi.resizeCallbacks;i.push(t);return function e(){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}}};n.throbberApi.initialize()}function P(e,t){t.explore={resizeCallbacks:[],resize:function e(){t.explore.resizeCallbacks.forEach(function(e){e()})},watchResize:function e(n){t.explore.resizeCallbacks.push(n)},unwatchResize:function e(n){var i=t.explore.resizeCallbacks.indexOf(n);-1!==i&&t.explore.resizeCallbacks.splice(i,1)},destroy:function e(){t.explore.resizeCallbacks=[]}}}t.directive("qvObject",function(){return{restrict:"E",replace:true,template:a,scope:{options:"=",model:"=",object:"=?",navMenu:"=",snapshot:"=?"},controller:["$scope","qvDefaultViewSelectionService",function(e,t){var i=n();this.updateContent=function(t){var r=e.object;if(r&&r.content!==t){"undefined"!==typeof r.content&&(i=n());r.content=t}return i.promise};this.contentLoaded=function(){return i.promise};e.onInit=function(e,n,r){e instanceof h||(e=new(v.extend(e))(n,r,t));i.resolve(e)}}],link:function i(r,a,s,l){var u={},p;r.object=u;r.options||(r.options={});r.options.zoomEnabled=!!s.zoomObject;r.resetOptions=c.extend({},r.options);Object.defineProperties(u,{hasFrame:{get:function e(){return!r.options.isPopover&&!u.isInvalid}},isReadonly:{get:function e(){return!u||u.isLink||u.isInvalid||r.options.isReadonly}},isInteractive:{get:function e(){return!!u&&r.options.interactionState!==g.STATIC}},hasSoftProperties:{get:function e(){return!!this.ext&&!!this.ext.mappedSoftDefinition}}});u.getCreatePropertyHandler=function(){var e=u.model.app;return u.ext.getCreatePropertyHandler(e)};u.getPropertyPanelContent=function(){return u.loaded.then(function(){var e=u.getCreatePropertyHandler();var t=u.ext.mappedDefinition||u.ext.definition;var n=u.ext.globalChangeListeners;return{definition:t,globalChangeListeners:n,type:u.type,app:u.model.app,backendApi:u.backendApi,handler:e,iconName:u.ext.libraryInfo.icon,titleRef:"title",ext:u.ext}})};u.getSoftPropertyContent=function(){return u.loaded.then(function(){var e=u.ext.mappedSoftDefinition||u.ext.softDefinition;return{definition:e,type:u.type,backendApi:u.backendApi}})};u.setSnapshotData=function(e,t){return l.contentLoaded().then(function(n){return n.setSnapshotData(e,t)})};u.getViewState=function(){return l.contentLoaded().then(function(e){return e.getViewState?e.getViewState():void 0})};u.getPreferredSize=function(){return l.contentLoaded().then(function(e){var t=e.getPreferredSize();return t?t.then(function(e){if(!e)return;var t=a.find("footer"),n=a.find("header"),i=35;return{w:e.w,h:e.h+(t.height()||0)+(n.height()||0)+i+a[0].offsetTop}}):void 0})};u.getSnapshotLayout=function(){return u.loaded.then(function(){return l.contentLoaded().then(function(){return m.prepSnapshotData(u.model.layout,u,true)})})};u.toggleDataView=function(){return l.contentLoaded().then(function(e){if(e.view&&"function"===typeof e.view.toggleDataView){void 0===e.view.toggled&&e.view.initDataView(a[0].parentElement);return e.view.toggleDataView().then(function(t){if(t){u.dataViewObject=e.view.getDataViewObject();u.dataViewObject.setOnBlurHandler(u.blur)}u.viewDataToggled=t})}return n.resolve()})};u.getDropOptions=function(e,t){return u.loaded.then(function(){return l.contentLoaded().then(function(){return u.ext.getDropOptions(u,e,t)})})};u.canReceive=function(e){return!u.ext||!u.ext.canReceive||u.ext.canReceive(e)};u.getContextMenu=function(e,t){return l.contentLoaded().then(function(n){return n.getContextMenu(u,e,t)})};u.getObjectMenu=function(e){return l.contentLoaded().then(function(t){return t.getObjectMenu(u,e)})};u.getSelectionToolbar=function(){return u.loaded.then(function(){return l.contentLoaded().then(function(e){return e.getSelectionToolbar()})})};u.reloadContent=function(){u.ext=e.extend({},u.ext);r.ext=u.ext;u.loadContent();u.update()};u.canShowExploreMenu=function(){var e=this.content===d||this.content===f;return!this.isInvalid&&this.hasSoftProperties&&!e};function h(e,t,n){var i=u&&r.ext&&!(r.model&&!r.model.isValid&&!r.model.isValidating);t||(i=i&&e!==d);n||(i=i&&e!==f);return i}function v(e){var t=r.ext&&r.ext.support[e];if("function"===typeof t)return t.call(null,r.layout);if("boolean"===typeof t)return t;return false}u.supportCssScaling=function(){return h(this.content)&&v("cssScaling")};u.hasValidContent=function(){return h(this.content)};u.supportSnapshot=function(){if(!h(this.content))return false;var e=r.ext&&r.ext.snapshot&&r.ext.snapshot.canTakeSnapshot;if("undefined"===typeof e)return v("snapshot");if("function"===typeof e)return e.call(null,r.layout);if("boolean"===typeof e)return e;return false};u.supportObjectInfo=function(){if(!h(this.content))return false;if(u.isInvalid)return false;return this.layout.showDetails};u.supportExportData=function(){return h(this.content,false,true)&&v("exportData")};u.supportExport=function(){return h(this.content)&&v("export")};u.supportSharing=function(){return h(this.content)&&v("sharing")};u.supportViewData=function(){return h(this.content)&&v("viewData")};u.setRenderState=function(e){if(u&&u.renderState!==e){u.renderState=e;r.$emit("objectRenderStateChange",e)}};u.setOnFocusHandler=function(e){u.focus=e};u.setOnBlurHandler=function(e){u&&(u.blur=e)};u.cancel=function(){u.subscription.cancel();u.throbberApi.hide();u.throbberApi.isQueryCanceled=true;l.contentLoaded().then(function(e){e.view&&e.view.cancel()});"function"===typeof r.options.onCanceled&&r.options.onCanceled.call(null)};u.retry=function(){u.throbberApi.hide();u.throbberApi.reset(true);u.throbberApi.isQueryCanceled=false;r.model.markAsInvalid();r.model.getLayout().then(function(e){r.layout=e;u.setLayout(e)});l.contentLoaded().then(function(e){e.view&&e.view.retry()})};O(r,a,u,l);I(r,u);T(r,u,a,l);P(r,u);u.setRenderState(C.INVALID);function y(){u.update()}u._themeChangeWatcher=y;b.ThemeChanged.bind(u._themeChangeWatcher);o.load(r.options._skipRegisterExtensions).then(function(){E(r,u);L(r,u,l)});u.loaded.then(function(){r.cancelled=r.model.isCancelled});r.$watch("options.interactionState",function(e){var t=Number.isNaN(+e)?1:e;u.setInteractionState(t)});r.$watch("options.direction",function(e){u.setDirection(e)});r.$watch("options",function(e){e&&e.setController&&l.contentLoaded().then(function(){e.setController(u)})});r.$on("childSelectionActive",function(e,t){u&&(u.childInSelection=t);e.preventDefault()});r.titleClicked=function(){this.options._disableSelections||u._inEditState||l.contentLoaded().then(function(e){(e.view&&e.view.selections||e.$scope.interactive)&&u.activateSelections()})};r.cancel=function(){u.cancel()};r.retry=function(){u.retry()};var x=false;r.$on("$destroy",function(){if(x)return;x=true;t.getService("$timeout").cancel(p);b.ThemeChanged.unbind(u._themeChangeWatcher);if(u){_(u);u.selectionsApi&&"function"===typeof u.selectionsApi.destroy&&u.selectionsApi.destroy();if(u.tooltipApi){u.tooltipApi.destroy&&u.tooltipApi.destroy();u.tooltipApi=null}if(u.backendApi){u.backendApi.destroy();u.backendApi=null}u.throbberApi&&u.throbberApi.destroy();u.explore&&u.explore.destroy();u=null;r.object=null}})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(90),n(405)],r=function(e,t,n){var i,r={3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",24:"Y","-3":"m","-6":"","-9":"n","-12":"p","-15":"f","-18":"a","-21":"z","-24":"y"},o=/%$/,a=/^\(r(0[2-9]|[12]\d|3[0-6])\)/i,s=/^\(oct\)/i,l=/^\(dec\)/i,c=/^\(hex\)/i,u=/^\(bin\)/i,d=/^\(rom\)/i,f=/^(\(rom\)|\(bin\)|\(hex\)|\(dec\)|\(oct\)|\(r(0[2-9]|[12]\d|3[0-6])\))/i;function p(e,t,n,i){e=e.toString(t);n[1]===n[1].toUpperCase()&&(e=e.toUpperCase());e.length-e.indexOf(".")>10&&(e=e.slice(0,e.indexOf(".")+11));return e.replace(".",i||".")}function h(e,t,n){var i;if(a.test(t))e=p(e,Number(/\d{2}/.exec(t)[0]),t,n);else if(s.test(t))e=p(e,8,t,n);else if(l.test(t))e=p(e,10,t,n);else if(c.test(t))e=p(e,16,t,n);else if(u.test(t))e=p(e,2,t,n);else if(d.test(t)){i="";if(e<0){i="-";e=-e}e=Math.floor(e);if(0===e)e="0";else if(e<=5e5){e=v(e,t);e=i+e}else e=t+i+e.toExponential(0)}return e}function v(e,t){var n,i="",r=Number(String(e).slice(-3)),o=(e-r)/1e3,a=[0,1,4,5,9,10,40,50,90,100,400,500,900].reverse(),s=["0","I","IV","V","IX","X","XL","L","XC","C","CD","D","CM"].reverse();while(r>0)for(n=0;n<a.length;n++)if(a[n]<=r){i+=s[n];r-=a[n];break}for(n=0;n<o;n++)i="M"+i;t[1]!==t[1].toUpperCase()&&(i=i.toLowerCase());return i}function g(e){if(!e||!e.qNumericalAbbreviation)return r;var t={};var n=e.qNumericalAbbreviation.split(";");n.forEach(function(e){var n=e.split(":");2===n.length&&(t[n[0]]=n[1])});return t}i=e.extend("NumberFormatter",{init:function e(t,n,i,r,o){this.localeInfo=t;this.pattern=n;this.thousandDelimiter=i||",";this.decimalDelimiter=r||".";this.type=o||"numeric";this.abbreviations=g(t);this.prepare()},clone:function e(){var t=new i(this.localeInfo,this.pattern,this.thousandDelimiter,this.decimalDelimiter,this.type);t.subtype=this.subtype;return t},format:function e(t,n,i,r){this.prepare(n,i,r);return this.formatValue(t)},prepare:function e(t,n,i){var r,o;"undefined"===typeof t&&(t=this.pattern);"undefined"===typeof n&&(n=this.thousandDelimiter);"undefined"===typeof i&&(i=this.decimalDelimiter);if(!t){this._prepared={pattern:false};return}this._prepared={positive:{d:i,t:n,abbreviate:false,isFunctional:false,prefix:"",postfix:""},negative:{d:i,t:n,abbreviate:false,isFunctional:false,prefix:"",postfix:""}};r=this._prepared;t=t.split(";");r.positive.pattern=t[0];r.negative.pattern=t[1];f.test(t[0])&&(r.positive.isFunctional=true);t[1]?f.test(t[1])&&(r.negative.isFunctional=true):r.negative=false;o=r.positive.isFunctional&&(!r.negative||r.negative&&r.negative.isFunctional);if(!o){m(r.positive,n,i);r.negative&&m(r.negative,n,i)}},formatValue:function e(t){var i=this._prepared,r,o,a="",s,l,c="",u,d,f,p,v;if(Number.isNaN(+t))return t;if(false===i.pattern)return t.toString();if(t<0&&i.negative){i=i.negative;t=-t}else i=i.positive;u=i.d;d=i.t;if(i.isFunctional)t=h(t,i.pattern,u);else{i.percentage&&(t*=100);if(i.abbreviate){var g=this.abbreviations;var m=Object.keys(g).map(function(e){return parseInt(e)}).sort(function(e,t){return e>t?1:-1});var b;var y=m[0];f=0;o=Number(Number(t).toExponential().split("e")[1]);while(y<=o&&f<m.length){f++;y=m[f]}f>0&&(b=m[f-1]);var x;b&&o>0&&b>0?x=b:(o<0&&b<0||!b)&&(y<0&&y-o<=i.maxPrecision?x=y:b<=o&&!(y>0&&-o<=i.maxPrecision)&&(x=b));if(x){a=g[x];t/=Math.pow(10,x)}}s=Math.abs(t);r=i.temp;p=i.numericPattern;v=p.split(u)[1];"I"===this.type&&(t=Math.round(t));l=t;if(v||"#"!==p.slice(-1)[0])if(s>=1e15||s>0&&s<=1e-14)t=s?s.toExponential(15).replace(/\.?0+(?=e)/,""):"0";else{var S=Number(t.toFixed(Math.min(20,v?v.length:0)).split(".")[0]);var w=p.split(u)[0];w+=u;t=n(w,S)||"0";if(v){var q=Math.max(0,Math.min(14,v.length));var C=v.replace(/#+$/,"").length;var _=Number((s%1).toPrecision(q)).toFixed(q);_=_.slice(2).replace(/0+$/,"");for(f=_.length;f<C;f++)_+="0";_&&(t+=u+_)}else 0===S&&(l=0)}else if(s>=Math.pow(10,r)||s<1||s<1e-4)if(0===t)t="0";else if(s<1e-4||s>=1e20){t=l.toExponential(Math.max(1,Math.min(14,r))-1);t=t.replace(/\.?0+(?=e)/,"");c=""}else{t=t.toPrecision(Math.max(1,Math.min(14,r)));if(t.indexOf(".")>=0){t=t.replace(t.indexOf("e")<0?/0+$/:/\.?0+(?=e)/,"");t=t.replace(".",u)}}else{p+=u;r=Math.max(0,Math.min(20,r-Math.ceil(Math.log(s)/Math.log(10))));for(f=0;f<r;f++)p+="#";t=n(p,t)}t=t.replace(i.numericRegex,function(e){if(e===d)return i.groupTemp;if(e===u)return i.decTemp;return""});l<0&&!/^-/.test(t)&&(t="-"+t)}return i.prefix+t+c+a+i.postfix}});function m(e,t,n){var i,r,a=e.pattern,s,l,c,u,d,f,p;if(a.indexOf("A")>=0){a=a.replace("A","");e.abbreviate=true}p=y(t,n);s=a.match(p);s=s?s[0]:"";l=s?a.substr(0,a.indexOf(s)):a;c=s?a.substring(a.indexOf(s)+s.length):"";s||(s=a?"#":"##########");if(t&&t===n){i=s.split(n);r=i.pop();s=i.join("")+n+r;t=""}u=t;t=/,/.test(n)?"":",";u&&(s=s.replace(b(u,"g"),t));d=n;n=".";d&&(s=s.replace(b(d,"g"),n));f=s.match(/#/g);f=f?f.length:0;var h=a.split(d);var v;h[1]&&(v=h[1].match(/#|0/g));e.prefix=l||"";e.postfix=c||"";e.pattern=a;e.maxPrecision=v?v.length:2;e.percentage=o.test(a);e.numericPattern=s||"";e.numericRegex=new RegExp(b(t,null,true)+"|"+b(n,null,true),"g");e.groupTemp=u;e.decTemp=d;e.t=t;e.d=n;e.temp=f}function b(e,n,i){var r=t.escapeRegExp(e);if(i)return r;return new RegExp(r||"",n)}function y(e,n){n&&(n=t.escapeRegExp(n));e&&(e=t.escapeRegExp(e));return new RegExp("(?:[#0]+"+e+")?[#0]+(?:"+n+"[#0]+)?")}window.NumberFormatter=i;i.getStaticFormatter=function(){return{prepare:function e(){},formatValue:function e(t){return t+""}}};return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(11),n(90),n(91),n(48),n(162),n(230),n(89),n(94),n(114),n(634)],r=function(e,t,n,i,r,a,s,l,c){var u=1e3,d=null;function f(e){var t=!d||d!==e;if(t){d=e;setTimeout(function(){d=null},u)}return t}function p(e,t,n){var i=new s,r=e.layout,o=r.qInfo.qId;if(f(o))return h(r,e,true,n).then(function(e){delete e.qInfo;return v(t,e)});i.reject();return i.promise}function h(n,i,o,a,c){var u=new s,d=new Date,f=o?t.extend(true,{},n):n;b(i,f,c).then(function(){r.getProperties().then(function(r){f.snapshotData={object:{size:i.objectSize},rtl:void 0!==r.rtl&&r.rtl};i.setSnapshotData(f,a||{}).then(function(){if(o){f.qInfo.qId=t.generateId();f.visualizationType=n.qInfo.qType;f.sourceObjectId=n.qInfo.qId;f.sheetId=l.model?l.model.id:"";f.timestamp=d.getTime();f.isClone=false;f.qMetaDef={title:n.title};f.supportExport=i.supportExport();delete f.qExtendsId;var r=e(".qv-panel-sheet");f.snapshotData.parent={h:r.length?r.height():e(window).height(),w:r.length?r.width():e(window).width()}}else{f.snapshotData.object.origDataPages=i.model.layout.snapshotData.object.origDataPages;f.snapshotData.content&&(f.snapshotData.content.chartData=t.extend(true,{},i.model.layout.snapshotData.content.chartData))}u.resolve(f)})})});return u.promise}function v(e,t){var r=new s;a.create(t).then(function(t){if(t.limit){g(e.find(".qv-object"));r.resolve(t.id)}else i.getService("qvAlertDialog").show({title:n.get("Storytelling.Snapshot.MaxLimitReached.Title"),message:n.get("Storytelling.Snapshot.MaxLimitReached.Text"),closeLabel:n.get("Common.OK")})});return r.promise}function g(t){t.prepend(e('<div class="qv-snapshot-tool-flash '+c.direction+'" />').bind("oanimationend animationend webkitAnimationEnd",function(){e(this).remove()}))}function m(e){return a.getSnapshotCount(e)}function b(e,n,i){var r=[],a=[],l=new s;"undefined"===typeof i&&(i=true);n.qExtendsId&&"text-image"===n.visualization?e.model.app.getObject(n.qExtendsId).then(function(e){e.getProperties().then(function(e){c(e)})}):e.model.getProperties().then(function(e){c(e)});function c(e){d(r,"qStaticContentUrl",n,i);d(a,"qStaticContentUrlDef",e);u();l.resolve(n)}function u(){r.forEach(function(e,n){t.extend(true,e,a[n])})}function d(e,t,n,i){for(var r in n)if(n.hasOwnProperty(r)&&"qHyperCube"!==r&&"qHyperCubeDef"!==r)if(r===t){if(i){delete n[r];n.qStaticContentUrlDef={}}e.push(n.qStaticContentUrlDef)}else"object"===o(n[r])&&d(e,t,n[r],i)}return l.promise}function y(e,t){var i=JSON.stringify({data:e,appLocaleInfo:t||{},language:n.language});return i}return{createSnapshot:p,getNumberOfSnapshots:m,prepSnapshotData:h,prepareStaticContent:b,formatSnapshotForRendering:y}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(197),n(285),n(251)],r=function(e,t,n){var i="DATAMODELVIEWER_GLOBAL_CONFIGRATION_INTERNAL_TABLE_VIEW";var r="dmv.islocked",o="dmv.internaltableview",a="dmv.tablesizedata",s="dmv.lastUsedResizeMode",l;function c(){return p(r)}function u(){return p(o)}function d(){return p(a)}function f(){return p(s)}function p(e){if(!l)throw new Error('Cannot create key for "'+e+'", as I have not yet gotten a hashed app id.');return e+"."+l}function h(t){var n=c();e.set(n,{value:t})}function v(){var t=c();return!!e.contains(t)&&e.get(t).value}function g(n){var r=u();e.set(r,{value:n});t.notifyAll(i,n)}function m(t){var n=d();e.set(n,{value:t})}function b(t){var n=f();e.set(n,{value:t})}function y(t){var n=f();return!!e.contains(n)&&t===e.get(n).value}function x(){var t=d();var n=e.get(t).value;return n}function S(){var t=d();return e.contains(t)}function w(){var t=u();return!e.contains(t)||e.get(t).value}function q(e){l=n.sha256(e);t.notifyAll(i,w())}function C(e){t.addObserver(i,e)}return{setIsLocked:h,isLocked:v,setIsInternalTableView:g,setTableSizeData:m,setLastUsedResizeMode:b,isLastUsedResizeMode:y,getTableSizeData:x,hasTableSizeData:S,isInternalTableView:w,setAppID:q,onInternalTableViewChange:C,STORAGE_KEY_IS_LOCKED:r,STORAGE_KEY_IS_INTERNAL_TABLE_VIEW:o,STORAGE_KEY_TABLE_SIZE_DATA:a}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(90),n(11),n(48),n(96),n(127),n(99),n(780)],r=function(e,t,n,i,r,o,a){var s=e.extend("DefaultSortableList",{init:function e(n,i){this.options=t.extend(true,{gesture:{name:"swipe",options:{radiusThreshold:2,preventDefault:false}},direction:"",scrollSelector:"",listSelector:"",containerSelector:"",listKey:"",itemSelector:"[ng-repeat]",itemDragSelector:"[ng-repeat]",itemGhostSelector:"",isOuterScroll:false,suppressDragStyle:[],suppressEnd:function e(){return false},itemKey:"$index",zIndex:1},n||{});this.ctrl=i},onBegin:function e(){},onEnter:function e(){},onEnterList:function e(){},onMove:function e(){},onMoveToList:function e(){},onCancel:function e(){},onEnd:function e(){},allowDrag:function e(t){if(a.isMouse(t))return!!n(t.target).closest(this.options.itemSelector).length;return!!n(t.target).closest(this.options.itemDragSelector).length},allowScroll:function e(t){return!this.allowDrag(t)},allowEnter:function e(){return true},allowEnterList:function e(){return true},allowAutoScroll:function e(){return true},onAutoScroll:function e(t){t()},getGesture:function e(){return this.options.gesture},getDirection:function e(){return this.options.direction},getScrollSensitivity:function e(t){return a.isMouse(t)?15:25},getScrollSpeed:function e(t){return a.isMouse(t)?15:25}});i.directive("qvSortableList",["qvSortableListDragService",function(e){return{restrict:"A",controller:function e(){},link:function t(i,a,l,c){var u=i.$watch(l.qvSortableList,function(t){u();if(t instanceof s)t.ctrl=c;else{var l=s.extend(t||{});t=new l(t&&t.options,c)}var d=a.closest(t.options.scrollSelector);d.length||(d=a);var f;var p=e.$new(t.options);var h;var v;var g;var m="sortable-list-"+i.$id;var b;var y={id:m,options:{preventDefault:false},start:function i(r,a){f=void 0;if(o.isInput(r.target)||!e.isChild(d[0],r.target))return;if(!t.allowDrag(r))return;f=n(r.target).closest(t.options.itemGhostSelector||t.options.itemSelector);if(0===f.length){f=void 0;return}var s;if(t.options.containerSelector){var l=f.closest(t.options.containerSelector);l.length&&(s=l)}p.direction=t.getDirection();h=t.getScrollSpeed(r);v=t.getScrollSensitivity(r);e.startOffset(d,p,f,a.pagePoints[0],t.options.isOuterScroll,s);e.startData(d,p,f,t.options.itemKey)},end:function e(){f=void 0}};var x={id:m,start:function n(o){if(!f){this.cancel();return}o.preventDefault();r.WebkitHack.prevent();t.onBegin(p.fromItem,p.clientRect);i.$digest();e.start(d,p,f)},update:function n(r,o){if(!f){this.cancel();return}function a(){if(t.allowEnter(p.enterItem,p.fromItem)){p.toItem=p.enterItem;p.toList=void 0;t.onEnter(p.enterItem,p.enterItemAction);i.$digest()}}function s(){if(t.allowEnterList(p.enterList,p.fromItem)){p.toItem=void 0;p.toList=p.enterList;t.onEnterList(p.enterList);i.$digest()}}function n(){e.update(d,p,f,o.swipe);e.updateDragCoordinates(p,void 0!==o.clientX?o.clientX:o.pagePoints[0].x,void 0!==o.clientY?o.clientY:o.pagePoints[0].y,t.options.boundingRect);e.updateData(d,p,f,t.options.listSelector,t.options.listKey,t.options.itemSelector,t.options.itemKey,a,s)}if(r.touches&&r.touches[0]){o.clientX=r.touches[0].clientX;o.clientY=r.touches[0].clientY}else{o.clientX=r.clientX;o.clientY=r.clientY}n();if(t.allowAutoScroll()){var l=e.autoScroll.bind(this,d[0],p.scroll.clientRect,p.scroll.width,p.scroll.height,p,n,h,v);t.onAutoScroll(l,p.enterList,p.enterItem,function(t,i,r,o){e.autoScroll(t,i,r,o,p,n,h,v)})}},end:function n(r,o){e.end(p,f);t.options.suppressEnd(o)||(void 0!==p.toItem?t.onMove(p.fromItem,p.toItem):void 0!==p.toList?t.onMoveToList(p.fromItem,p.toList):t.onCancel(p.fromItem));i.$digest();t.onEnd(p.fromItem);f=void 0},cancel:function n(){if(!f)return;e.end(p,f);t.onCancel(p.fromItem);f=void 0;"$digest"!==i.$root.$$phase&&i.$digest()}};g=t.options.gesture;x.options=g.options;function S(){f=void 0;r(a[0])[g.name](x).tap(y);r(d[0]).tap({id:"sortable-list-tap-"+i.$id,options:{preventDefault:false},start:function e(i){if(!t.allowScroll(i)&&!o.isInput(i.target)){var r=n(i.target).hasClass("slider")||n(i.target).parent().hasClass("slider");r||i.preventDefault()}}});return function(){r(d[0]).off("*","sortable-list-tap-"+i.$id);r(a[0]).off("*",m)}}i.$on("$destroy",function(){r(d[0]).off("*","sortable-list-tap-"+i.$id);r(a[0]).off("*",m)});c.on=function(){b||(b=S())};c.off=function(){if(b){b();b=void 0}};c.cancel=function(){x.cancel()};c.on()})}}}]);return s}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(378)],r=function(e){function t(t){if(void 0===t)throw new Error("String is undefined.");if(0===t.length)throw new Error("String is empty.");var n=e(t);return n}return{sha256:t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(109)],r=function(e){var t={},n={},i=5e3,r=0,o=Math.floor;function a(e,t){return function(){var n=function e(){},i,r;n.prototype=e.prototype;i=new n;r=e.apply(i,t);return Object(r)===r?r:i}}function s(){r++}function l(){var o,l,c,u;if(arguments.length<3)"string"===typeof arguments[0]?o=arguments[0]:"number"===typeof arguments[0]&&arguments[0]>=0&&(o=arguments[0]+"");else if(arguments.length>=3){o=arguments[0];for(c=0;c>arguments.length;c++)o+=","+arguments[c]}if(o&&t[o])return t[o];u=a(e,arguments)();l=u.isInvalid()?"INVALID":u._r+","+u._g+","+u._b+","+u._a;if(n[l])u=n[l];else{if(r>=i)return u;n[l]=u;s()}o&&(t[o]=u);return u}function c(t,l,c){var u,d;var f=o(t._r+(l._r-t._r)*c),p=o(t._g+(l._g-t._g)*c),h=o(t._b+(l._b-t._b)*c),v=o(t._a+(l._a-t._a)*c);u=f+","+p+","+h+","+v;if(n[u])d=n[u];else{d=a(e,[f,p,h,v])();if(r>=i)return d;n[u]=d;s()}return d}function u(){t={};n={};r=0}return{retriveColor:l,retriveBlend:c,clear:u}}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(48),n(102),n(89),n(93),n(110)],r=function(e,t,n,i,r){var o=r.NxLocalizedErrorCode;var a=null;var s=[];var l=1e3;var c=/(?!^GetHyperCube|^GetListObject)(^Get)/i;function u(e,t,n,i){e.Send.emit(n);n.outKey=-1;var r=t.send(n);e.dfdCache[n.id]=i;e.reqCache[n.id]=n;i.id=n.id;i.promise.requestId=r.requestId;return i.promise}function d(e){var n=this;t.mixin(n);n.notification("Open");n.notification("Close");n.notification("Send");n.notification("Data");n.notification("Error");n.notification("ClosedHandles");n.notification("ChangedHandles");n.notification("Notification");n.notification("Warning");n.changeHandlers={};n.cacheName=e.cacheName;n.dfdCache={};n.reqCache={};n.modelCache={};n.options=e;n.socket={url:""}}d.prototype={open:function e(){return this.enigmaPromise},onError:function e(t){var n=this;Object.keys(n.dfdCache).forEach(function(e){t.error={err:t,isHandled:true};n.dfdCache[e].reject(t)});n.Error.emit(t)},_cleanup:function e(){var n=this;if(!n.Close)return;n.Close.emit();for(var i in n.modelCache)n.modelCache[i].then(function(e){e.close(true)});t.release(n)},onClose:function e(){var t=this;if(t._isClosed)return;delete d.__cache[t.cacheName];d.useTimeoutOnClose?setTimeout(t._cleanup.bind(t),l):t._cleanup();t._isClosed=true},onData:function e(t){var n=this;var i=n.dfdCache[t.id];t.change&&n.handleChanged(t);t.close&&n.handleClosed(t);d.debounceApply(function(){if(t.handle&&!n.changeHandlers[t.handle]&&i)i.reject("No model mapped to handle");else if(t.result){n.Data.emit(t);t.warnings&&n.Warning.emit(t);i&&i.resolve(t)}else if(t.params){n.Notification.emit(t);i&&i.resolve(t)}else if(t.suspend){n.rpc({method:"Resume",params:[],handle:t.suspend[0]});i&&i.resolve(t)}else if(t.error){var e=n.reqCache[t.id];if(e)if(t.error.code===o.LOCERR_GENERIC_ABORTED&&c.test(e.method)){t.error.isHandled=true;u(n,n.__enigmaSession,e,i)}else{i&&i.reject(t);n.Error.emit(t)}}delete n.dfdCache[t.id];delete n.reqCache[t.id]})},handleChanged:function e(t){var n=this;t.change.forEach(function(e){var t=n.changeHandlers[e];t&&t.forEach(function(e){e()})});n.ChangedHandles.emit(t.change)},handleClosed:function e(t){var n=this;Object.keys(n.modelCache).forEach(function(e){n.modelCache[e].then(function(e){t.close.indexOf(e.handle)>-1&&e.close(true)})});n.ClosedHandles.emit(t.close)},close:function e(){var t=this;t.enigmaPromise.then(function(){t.__enigmaSession.close()})},suspend:function e(){var t=this;t.enigmaPromise.then(function(){t.__enigmaSession.suspendResume.suspend()})},resume:function e(t){var n=this;return n.enigmaPromise.then(function(){return n.__enigmaSession.suspendResume.resume(t)})},rpc:function e(t,i){var r=this;i||(i=new n);if(r.__enigmaSession)return u(r,r.__enigmaSession,t,i);return r.enigmaPromise.then(function(){return u(r,r.__enigmaSession,t,i)})},onChange:function e(t,n){this.changeHandlers[t]||(this.changeHandlers[t]=[]);this.changeHandlers[t].push(n)},getRequest:function e(t){return this.reqCache[t]||null}};d.useTimeoutOnClose=true;d.__cache={};d.createInput=function(e,t){t=t||{};t.appName=e;t.cacheName=d.buildUrl(t);return t};d.debounceApply=function(t){clearTimeout(a);s.push(t);a=setTimeout(function(){e.$apply(e.$rootScope,function(){for(var e=0;e<s.length;e++)try{s[e]()}catch(e){}s.length=0})})};function f(e,t,n,i){n.open().then(function(){e[t](i)})}function p(e){var t=e.__enigmaSession;t.on("suspended",function(t){"network"===t.initiator&&e.close()});t.on("closed",function(n){f(e,"onClose",t,n)});t.rpc.on("error-socket",function(n){f(e,"onError",t,n)});t.rpc.on("message",function(n){f(e,"onData",t,n)});t.rpc.on("notification",function(n){f(e,"onData",t,n)})}d.get=function(e,t){e=e||"";var n=d.createInput(e,t);var r;function o(e){r.__enigmaApp=e.app||e;r.__enigmaGlobal=e.global||e;r.__enigmaSession=(e.app||e.global||e).session;p(r)}r=new d(n);d.__cache[n.cacheName]=r;if(e&&"?transient="!==e&&!t.sessionApp)r.enigmaPromise=i.get(e,t).then(o);else if(t.sessionApp&&t.sessionApp.value&&t.sessionApp.appId){t.route="app/"+encodeURIComponent(t.sessionApp.appId);r.enigmaPromise=i.getSessionApp(t.sessionApp.appId,t).then(o)}else{"?transient="===e&&(t.route="app/"+encodeURIComponent(e));r.enigmaPromise=i.getGlobal(t).then(o)}return r};d.getIfCached=function(e,t){var n=d.createInput(e,t);return d.__cache[n.cacheName]};d.buildUrl=function(e){var t="",n=e.host,i="string"===typeof e.port?e.port:e.isSecure?443:4848;t+=e.isSecure?"wss":"ws";t+="://";t+=n||"localhost";if(e.port){t+=":";t+=i}t+=e.prefix||"/";e.subpath&&(t+=e.subpath+"/");e.route?t+=e.route:t+="app/"+encodeURIComponent(e.appName);e.identity&&(t+="/identity/"+encodeURIComponent(e.identity));t+="?reloadUri="+(e.reloadURI||"");return t};return d}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(92)],r=function(e){var t=e.extend({init:function e(){},tap:{},taptwo:{},tapthree:{},swipe:{},swipetwo:{},rotate:{},mousemove:{},mouseleave:{},mousewheel:{},wheelswipe:{},exclusive:function e(){return false},active:function e(){return true}});return{extend:function n(){return 2===arguments.length?t.extend.call(e,arguments[0],arguments[1]):new(t.extend(arguments[0]))}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(48),n(871),n(94),n(102),n(169),n(176)],r=function(e,t,n,i,r){t.service("qvGlobalSearchService",["$document","qvSelectionToolbarService",function(t,o){var a,s={};function l(e){return s[u(e)]}function c(e,t){s[u(e)]=t}function u(e){if(e.id)return e.id.toUpperCase();return e.id}function d(e){return{$container:void 0,$containerId:".qv-global-search-container",$app:e,$lastKnownIndexProgress:void 0,$haveQuery:false,getComponent:function e(){return n},setup:function t(){i.StateChanged.bind(f.bind(null,e));e.isInModalSelection()&&o.confirm()},destroy:function e(){i.StateChanged.unbind(f)}}}function f(e){(i.isInEditMode()||!i.isInAnalysisMode||i.inObjectView())&&v(l(e))}function p(n,i,r){n.$container=e.element("<div>");i=i||t;i.find(n.$containerId).append(n.$container);n.$container.showComponent(n.getComponent(),["$scope",function(e){e.app=n.$app;e.options={objectSearchIsOn:r}}]);n.setup()}function h(e){return!(!e||void 0===e.$container)}function v(e){if(e.$container){e.$container.remove();e.$container=void 0}e.destroy()}function g(e){var t=l(e);if(!t){t=new d(e);c(e,t)}return t}function m(e,t){try{var n=t.qTransientProgressMessage.qMessageParameters[0],i=new Number(n),r=g(e);!Number.isNaN(+i)&&n&&(r.$lastKnownIndexProgress=i);a.IndexProgressUpdate.emit(u(e),i)}catch(e){return}}a={toggleGlobalSearch:function e(t,n,i){var r=g(t);h(r)?v(r):p(r,n,i)},openGlobalSearch:function e(t,n){var i=g(t);if(!h(i)){v(i);p(i,n)}},closeGlobalSearchIfNoQuery:function e(t){var n=l(t);n&&n.$haveQuery||this.off()},off:function e(){Object.keys(s).forEach(function(e){v(s[e])})},isSearchOpen:function e(t){return h(l(t))},setLastKnownIndexProgress:function e(t,n){var i=l(t)||{};i.$lastKnownIndexProgress=n},getLastKnownIndexProgress:function e(t){var n=l(t)||{};return n.$lastKnownIndexProgress},couldEngineBeIndexing:function e(t){var n=l(t)||{},i=n.$lastKnownIndexProgress;return void 0!==i&&i<100},requestIndexProgressUpdate:function e(t){t.global.getProgress(0).then(m.bind(null,t))},setHaveQuery:function e(t,n){var i=g(t);i.$haveQuery=n}};r.mixin(a);a.notification("IndexProgressUpdate");return a}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){return function(e,t){e.$root&&e.$root.$$phase?t&&t():e.$apply(t)}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(989)],r=function(e){return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(2)],r=function(e){var t={};t.getJson=function(t){return e.get(t,{responseType:"json"}).then(function(e){if(e.data)return e.data;console.warn("Theme parsing error for theme: "+t);return{}}).catch(function(e){console.warn("Couldn't get theme: "+t+". Error: "+e);return{}})};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(2)],r=function(e,t){var n=function e(){};var i=function e(n){return t.request(n).then(function(e){var t=e.data;return t.data}).catch(function(e){throw e.data})};n.getTenantId=function t(){var n=e("#appFrame");if(n.length)return n.attr("tenantId");try{var i=e("#appFrame",window.parent.document);if(i.length)return i.attr("tenantId")}catch(e){}return""};n.getTenantIdUrlParameter=function(){var e=n.getTenantId();return e?"?tenantId="+e:""};n.getConfig=function(e){var t=n.getTenantIdUrlParameter();return{method:"GET",url:"/api/v1/"+e+t}};n.getCloudExtensions=function(){var e=n.getConfig("extensions");return i(e)};n.getCloudThemes=function(){var e=n.getConfig("themes");return i(e)};return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){function t(t){var n=e.getService("qvAlertDialog");return n.show({title:t.title,message:t.message,closeOnEscape:false})}return{show:t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(608)],r=function(e,t){e.directive("qvSpinner",function(){return{replace:true,template:t,restrict:"E",scope:{show:"=",showDelay:"=?",showForAtLeast:"=?",spinnerWidth:"@?",spinnerHeight:"@?",centerInParent:"=?"},controller:["$scope","$timeout",function(e,t){var n;var i;e.internalShow=false;function r(){e.showDelay?n=t(function(){o(e.showForAtLeast)},e.showDelay):o(e.showForAtLeast)}function o(n){e.internalShow=true;i=t(function(){},n)}function a(){n&&t.cancel(n);i&&i.then(function(){e.internalShow=false})}e.$watch("show",function(e){e?r():a()})}]}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(612)],r=function(e){return{template:e,controller:[function(){}],scope:{item:"=",style:"="}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(104)],r=function(e,t){var n,i=new t(0,0,0,0),r=new t(0,0,0,0);n=e.extend("CubeSlicer",{init:function e(){this.pages=[]},get:function e(t){return t.map(function(e){return this.getPage(e)}.bind(this))},getPage:function e(n){var o,a,s=[],l;for(a=0;a<this.pages.length;a++){o=this.pages[a].qArea;i.set(n.qLeft,n.qTop,n.qWidth,n.qHeight);r.set(o.qLeft,o.qTop,o.qWidth,o.qHeight);l=r.intersection(i,true);s.push({coverage:l?l.clone():new t(0,0,0,0),idx:a});if(o.qLeft<=n.qLeft&&o.qLeft+o.qWidth>=n.qLeft+n.qWidth&&o.qTop<=n.qTop&&o.qTop+o.qHeight>=n.qTop+n.qHeight)return this._extract(n,this.pages[a])}s.sort(function(e,t){return t.coverage.width*t.coverage.height-e.coverage.width*e.coverage.height});if(s[0].coverage.height>0&&s[0].coverage.width>0)return this._extract(n,this.pages[s[0].idx]);return{qArea:{qTop:n.qTop,qLeft:n.qLeft,qWidth:0,qHeight:0},qMatrix:[]}},destroy:function e(){this.clear()},isEmpty:function e(){return!this.pages||!this.pages[0]||!this.pages[0].qArea.qHeight||!this.pages[0].qArea.qWidth},clear:function e(){this.pages=[]},store:function e(t){this.pages=t},containsArea:function e(t){var n;for(var i=0;i<this.pages.length;i++){n=this.pages[i].qArea;if(n.qLeft<=t.qLeft&&n.qLeft+n.qWidth>=t.qLeft+t.qWidth&&n.qTop<=t.qTop&&n.qTop+n.qHeight>=t.qTop+t.qHeight)return true}return false},contains:function e(t){if(!this.pages||!this.pages.length)return false;return 0===t.filter(function(e){return!this.containsArea(e)}.bind(this)).length},_extract:function e(t,n){i.set(t.qLeft,t.qTop,t.qWidth,t.qHeight);r.set(n.qArea.qLeft,n.qArea.qTop,n.qArea.qWidth,n.qArea.qHeight);var o=i.intersection(r,true),a,s,l;if(!o)return{qArea:{qTop:t.qTop,qLeft:t.qLeft,qWidth:0,qHeight:0},qMatrix:[]};l=Math.max(0,t.qTop-n.qArea.qTop);s=Math.max(0,t.qLeft-n.qArea.qLeft);a=n.qMatrix.slice(l,l+o.height).map(function(e){return e.slice(s,s+o.width)});return{qArea:{qTop:o.y,qLeft:o.x,qWidth:o.width,qHeight:o.height},qMatrix:a}}});return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(343)],r=function(e){var t=e.extend({init:function e(t,n){this._super(t.cache,n);this._selectedShapes=[];this.handler=t;this.options=n;this.components=n.components||{}},release:function e(){this._super();this.components={};this._selectedShapes=[];this.handler=null},resetSelectedShapes:function e(){this._selectedShapes.length=0},getSelectedShapes:function e(){return this._selectedShapes},toggleSelectedShape:function e(t){var n=this._selectedShapes.indexOf(t);-1!==n?this._selectedShapes.splice(n,1):this._selectedShapes.push(t)},setActiveMode:function e(t){this._activeMode=t},getActiveMode:function e(){return this._activeMode},register:function e(t,n){this.handler.register(t,n)},deregister:function e(t,n){this.handler.deregister(t,n)},getActiveDimensions:function e(){return this.activeComponent.getSelectionIndices()},toggle:function e(){},toggleRect:function e(){},start:function e(){},update:function e(){},end:function e(){},cancel:function e(){},move:function e(){},leave:function e(){},getTransformedPoint:function e(t,n){return this._super(t,n,this.handler.containerRect)},getPagePoint:function e(t,n,i){return this._super(t,n,i,this.handler.containerRect)},shapeFromPoint:function e(t){return this.shapesFrom.shapeFromPoint(t)},shapesFromPoints:function e(t){return this.shapesFrom.shapesFromPoints(t)},shapesFromLines:function e(t){return this.shapesFrom.shapesFromLines(t)},shapesFromPolygon:function e(t){return this.shapesFrom.shapesFromPolygon(t)},shapesFromRect:function e(t,n){return this.shapesFrom.shapesFromRect(t,n)},shapesFromRectForDirection:function e(t,n,i){return this.shapesFrom.shapesFromRectForDirection(t,n,i)},shapesFromRange:function e(t,n,i,r){return this.shapesFrom.shapesFromRange(t,n,i,r)},shapesFromDimensionValue:function e(t){return this.shapesFrom.shapesFromDimensionValue(t)},groupedItemsFromShapes:function e(t){return this.shapesFrom.groupedItemsFromShapes(t)},shapesFromIndex:function e(t,n){return this.shapesFrom.shapesFromIndex(t,n)},ToggleFlag:{select:1,deselect:2,auto:4,replace:8},toggleSelection:function e(t,n){var i=this.handler._disableSelections,r=this.ToggleFlag,o=this.handler.ToggleShape,a=this.handler.ToggleShapes,s=this.toggleSelectedShape.bind(this),l;n=n||r.auto;function c(e){var r=t.filter(e);r.forEach(function(e){if(!i){e.selected=!e.selected;s(e);o.emit(e,n)}});r.length>0&&a.emit(t,n)}if(n&r.select)c(function(e){return!e.selected});else if(n&r.deselect)c(function(e){return e.selected});else if(n&r.auto)c(function(){return true});else if(n&r.replace){l=t;t=this.handler.cache.data;c(function(e){return e.selected});t=l;c(function(){return true})}},clearSelection:function e(){var t=this.handler.Clear,n=this.handler.cache.data,i=this.ToggleFlag.deselect;this.toggleSelection(n,i);t.emit()}});t.defaultOptions={};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(120),n(328),n(89),n(181),n(49)],r=function(e,t,n,i,r,o){var a={};function s(e,t,n){return e.bounds?e.bounds:r.getBounds(e,t,n)}function l(e,t,n){var i={};if(e.bounds){var o=e.bounds;i=r.getInfluenceOnGrid(o,t,n);i.bounds={x:o.x,y:o.y,width:o.width,height:o.height}}else{i.row=e.row;i.col=e.col;i.rowspan=e.rowspan;i.colspan=e.colspan;i.bounds=s(i,t,n)}return i}function c(e,t){var n=[];for(var i=0;i<t;i++){n[i]=[];for(var r=0;r<e;r++)n[i][r]=1}return n}function u(e,t){var n,i;var r,o;r=t.row+t.rowspan;o=t.col+t.colspan;for(n=t.row;n<r;n++)for(i=t.col;i<o;i++)e[n]&&(e[n][i]=0)}function d(e,t){var n;if(!t)return null;for(n=0;n<t.length;++n)if(t[n].id===e)return t[n];return null}function f(e){return e.getLayout().then(function(e){var t=a.updateGridCells(e.columns,e.rows,[],e.cells);return a.getOptimalGridCell(t)})}a.addToSheet=function(e,t){return f(e).then(function(n){var i={cell:n,init:t,template:t.qInfo.qType};return e.addObject(i).then(function(){return e})})};a.getOptimalGridCell=function(e){e.sort(function(e,t){if(e.isEmpty&&!t.isEmpty)return-1;if(t.isEmpty&&!e.isEmpty)return 1;var n=e.pos.colspan*e.pos.rowspan;var i=t.pos.colspan*t.pos.rowspan;if(n>i)return-1;if(n<i)return 1;return 0});var t=e[0]||null;if(t&&!t.isEmpty)if(t.pos.colspan>1||t.pos.rowspan>1){var n=t.pos.colspan>t.pos.rowspan?"right":"bottom";t={isEmpty:true,pos:{pos:t.pos,split:n}}}else t=null;return t};a.updateGridCells=function(e,t,n,i,r,a){var s=i;var f=o.getFlag("DROP_ZONES");var p=[];var h=c(e,t);r=r||t;var v;var g;if(f){v=a?Math.round(r/2):r;g=a?v:Math.round(v/2)}function m(n){var i=l(n,e,t);u(h,i,t,e);var r={};r.pos=i;r.isEmpty=true;r.navMenu={};p.push(r)}function b(i){var r=l(i,e,t);u(h,r,t,e);var o=d(i.name,n);if(!o){o={};o.id=i.name;o.navMenu={};o.options={id:i.name,isVisible:true,isZoomed:false,isActive:false}}o.pos=r;o.isEmpty=false;p.push(o)}function y(n,i,o,a){n=n||0;o=o||0;i=i||t;a=a||e;var s;var l;var c=a;var u=[];var d;var p;var v;while(c-- >o){l=0;s=i;u[c]=[];while(s-- >n)if(h[s][c])u[c][s]=++l;else{l=0;u[c][s]=null}}v=null;p=0;function g(e,t,n){var i=e;while(d.length>0){var o=d[d.length-1];if(o.rowSpan===n)return;if(o.rowSpan<n)break;d.pop();i=o.col;var a=e-o.col;var s=o.rowSpan*a;if(s>p){p=s;v={col:o.col,row:t,colspan:a,rowspan:o.rowSpan}}}n>0&&n&&d.push({col:i,rowSpan:f?n:Math.min(n,r)})}d=[];for(s=n;s<i;++s){for(c=o;c<a;++c){if(null===u[c][s]){g(c,s,0);continue}g(c,s,u[c][s])}g(c,s,0)}return v}function x(){var n=1,i;if(f){var r=Math.ceil(t/g);var o=Math.ceil(e/v);for(var a=0;a<r;++a)for(var l=0;l<o;++l)while(true){i=y(g*a,Math.min(g*(a+1),t),v*l,Math.min(v*(l+1),e));if(!i)break;i.priority=n++;s.push(i);m(i)}}else while(true){i=y();if(!i)break;i.priority=n++;s.push(i);m(i)}}function S(e){e.sort(function(e,t){e=e.pos;t=t.pos;return e.row-t.row}).sort(function(e,t){e=e.pos;t=t.pos;if(e.row===t.row)return e.col-t.col;return e.row-t.row})}s.forEach(b);S(p);x();return p};e.service("qvObjectPlacementService",[function(){var e={addObjectToSheet:function e(n,r,o){if(!n)return i.reject();if(!r&&o)return a.addToSheet(o,n);if(r)return t.get(r).then(function(e){return a.addToSheet(e,n)})},addToNewSheet:function e(r){return t.getList().then(function(e){if(!r)return i.reject();return e.getLayout().then(function(e){var t=0;e.forEach(function(e){!e.qMeta.published&&e.qData.rank>t&&(t=e.qData.rank)});return n.addSheet(t+1).then(function(e){return a.addToSheet(e,r)})})})},getOptimalCell:function e(t){return a.getOptimalGridCell(t)},updateGridCells:function e(t,n,i,r,o,s){return a.updateGridCells(t,n,i,r,o,s)},getCellAlignment:function e(t,n,i,r){return s(t,n,i,r)}};return e}]);return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(93),n(715),n(191),n(107),n(150)],r=function(e,t,n,i,r,o,a){t.directive("qvExpressionInput",function(){return{restrict:"E",scope:{expression:"=",isValidExpression:"=",labelTranslation:"@"},template:i,link:function t(i){n.getApp().then(function(t){var n;i.onExpressionChange=l;i.shouldForceEditInExpressionEditor=c;i.onExpressionActivate=u;i.openExpressionDialog=d;i.maxLength=o.name;i.labelTranslation=i.labelTranslation||"metadata.labelExpression";n=new r.ExpressionValidator(t);l();var s=function e(t){i.isValidExpression=t.valid};n.Update.bind(s);i.$on("$destroy",function(){n.Update.unbind(s)});function l(){i.isExpression=f(i.expression);n.validate(i.expression)}function c(){return i.expression&&i.expression.length>o.name}function u(t){if(!c())return;e(t.target).blur();d()}function d(){var e={expr:i.expression,title:i.expression?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title"};a.show(e).then(function(e){i.expression=e;l()})}function f(e){return(e||"").length>0}})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(90),n(768),n(134),n(150),n(93),n(354),n(148),n(790),n(144)],r=function(e,t,n,i,r,o,a,s,l,c){var u=a.dimensionTypes,d=l.create(s);function f(e,t){return e.localeCompare(t)}function p(){return o.getApp().then(function(e){return e.getFieldList().then(function(e){var n,i,r;e=t.extend(true,[],e);e=s.removeMeasureAndDetailsFields(e);e.sort(function(e,t){return e.qName.localeCompare(t.qName)});e=c.expand(e);r=[];for(n=0;n<e.length;++n){var o=e[n];for(i=0;i<o.qSrcTables.length;++i)-1===r.indexOf(o.qSrcTables[i])&&r.push(o.qSrcTables[i]);d.addIconMetaData(o)}r.sort(f);return{fields:e,tables:r}})})}function h(e,t,n){r.show({expr:n,title:n?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title"}).then(function(n){e(t,n)})}function v(e,i){p().then(function(r){var o=!e.qInfo.qId;function s(t){var n=a.dimensionTypes,r="drilldown",o="single";e.qMetaDef={title:t.name,description:t.description,tags:t.tags};e.qDim.title=t.name;e.qDim.qGrouping=t.type===r?n.drilldown:n.single;e.qDim.qFieldDefs=t.expr;e.qDim.qLabelExpression=t.labelExpression;e.qDim.descriptionExpression=t.descriptionExpression;e.qDim.coloring||(e.qDim.coloring={});e.qDim.baseColor&&delete e.qDim.baseColor;if(t.colorsChanged){e.qDim.coloring.colorMapRef=e.qInfo.qId;e.qDim.coloring.changeHash=Math.random()+""}t.baseColor&&"none"!==t.baseColor.color?e.qDim.coloring.baseColor=t.baseColor:delete e.qDim.coloring.baseColor;t.type===o?e.qDim.qFieldLabels=[t.name]:e.qDim.qFieldLabels=[];i()}var l=t.extend(true,{},e);l.name=e.qMetaDef.title;l.description=e.qMetaDef.description;l.tags=e.qMetaDef.tags;o?n.add({dimension:l,tableData:r,expressionInterface:h,callback:s}):n.edit({dimension:l,tableData:r,expressionInterface:h,callback:s})})}function g(){return{add:function t(n,r){function o(){return i.create(a).then(function(t){e.$rootScope.$emit("clearUndo");r&&r(t)})}var a={qInfo:{qType:"dimension"},qDim:{qGrouping:u.single,qFieldDefs:[]},qMetaDef:{title:"",description:"",tags:[]}};if(n){a.qMetaDef.title=n;a.qDim.qFieldDefs.push(n)}v(a,o)},edit:function t(n,r){i.get(n).then(function(t){t.getProperties().then(function(n){v(n,function(){var i=n.qDim.coloring;i.baseColor&&i.baseColor.color&&"none"===i.baseColor.color&&delete i.baseColor;return t.setProperties(n).then(function(t){e.$rootScope.$emit("clearUndo");r&&r(t)})})})})}}}return g}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(243)],r=function(e,t){var n;n=t.extend({init:function e(t){this.list=[];this.scrollApi=t},getRowCount:function e(){return this.scrollApi.items?this.scrollApi.items.length:0},getFirstElementIndex:function e(){return this.list.indexOf(this.scrollApi.items[0])},getLastElementIndex:function e(){return this.list.indexOf(this.scrollApi.items[this.scrollApi.items.length-1])},getItems:function e(t,n){return this.list.slice(Math.max(0,t),t+n)},setItems:function e(t,n){this.scrollApi.items=this.getItems(t,n)},setList:function e(t,n){this.list=t;this.scrollApi.setTotalRows(this.list.length);var i=this.getRowCount();var r=n&&i>0?this.getFirstElementIndex():0;if(this.scrollApi.virtualScrollEnabled){this.setItems(r,this.scrollApi.settings.viewportRowCount);this.scrollApi.setVirtualSize(n)}else if(n){i=Math.min(t.length-r,Math.max(this.getRowCount(),this.scrollApi.settings.blockSize));this.setItems(r,i);this.scrollApi.updateLoadingButtons()}else{this.setItems(r,this.scrollApi.settings.viewportRowCount+1);this.scrollApi.resetNativeScroll()()}},resize:function t(){this.scrollApi.updateViewport();var n=this.getRowCount();var i=n>0?this.getFirstElementIndex():0;0!==i&&i+this.scrollApi.settings.viewportRowCount>n&&(i=Math.max(0,n-this.scrollApi.settings.viewportRowCount));if(this.scrollApi.virtualScrollEnabled){this.setItems(i,this.scrollApi.settings.viewportRowCount);return this.scrollApi.setVirtualSize(true)}if(0===i&&n<this.scrollApi.settings.blockSize){this.setItems(i,this.scrollApi.settings.viewportRowCount+1);this.scrollApi.resetNativeScroll()();return e.resolve()}return e.resolve()},onVirtualScroll:function t(n,i){this.setItems(n,i);return e.resolve()},onInitialNativeScroll:function t(n,i){this.setItems(0,n+i);return e.resolve()},onGotoNextBlock:function t(n,i){var r=this.scrollApi.settings.keepItemsCount+this.scrollApi.settings.viewportRowCount;this.setItems(n-r,i+r);return e.resolve()},onGotoPreviousBlock:function t(n,i){var r=this.scrollApi.settings.keepItemsCount+this.scrollApi.settings.viewportRowCount;this.setItems(n,i+r);return e.resolve()}});return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(91)],r=function(e,t){e.service("qvCurrentSelectionsService",[function(){function e(e){return e.qStateCounts.qSelected+e.qStateCounts.qSelectedExcluded+e.qStateCounts.qLocked+e.qStateCounts.qLockedExcluded}function n(e){var n=e.states.length;return t.get("CurrentSelections.SelectionsInStates",n)}function i(n){var i=e(n),r=n.qTotal,o;o=r===i&&r>1?t.get("CurrentSelections.All"):i>1&&r>1?t.get("CurrentSelections.Of",[i,r]):n.qSelectedFieldSelectionInfo.map(function(e){return e.qName}).join(", ").toString();return o}return{translate:function e(t){return t.states?n(t):i(t)},translatedScreenReaderLabel:function i(r){var o;if(r.states)o=n(r);else{var a=e(r),s=r.qTotal,l=r.qField,c=r.qSelected;o=s===a&&s>1?t.get("CurrentSelections.AllSelections",[l]):a>1&&s>1?t.get("CurrentSelections.MultipleSelections",[l,a,s]):t.get("CurrentSelections.SingleSelection",[l,c])}return o}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(96),n(91),n(89),n(390),n(1018),n(205),n(231),n(110),n(461)],r=function(e,t,n,i,r,o,a,s,l,c){function u(e){return e.qErrorCode===l.NxLocalizedErrorCode.LOCERR_CALC_EVAL_CONDITION_FAILED}function d(e){return e.qErrorCode===l.NxLocalizedErrorCode.LOCERR_CALC_NOT_CALCULATED}function f(e,t){var n={holder:null,type:""};var i=t&&e[t]?e[t].qHyperCube:e.qHyperCube;if(i&&i.qError){n.holder=i;n.errorTranslationFunc=s.getHyperCubeError}else if(e.layers&&e.layers.length&&e.layers[0].qHyperCube){e.layers[0].qHyperCube.qError?n.holder=e.layers[0].qHyperCube:e.layers[0].geodata.qHyperCube.qError&&(n.holder=e.layers[0].geodata.qHyperCube);n.errorTranslationFunc=s.getHyperCubeError}else if(e.qListObject&&e.qListObject.qError){n.holder=e.qListObject;n.errorTranslationFunc=s.getListObjectError}else if(e.qListObject.qDimensionInfo&&e.qListObject.qDimensionInfo.qError.qErrorCode){n.holder=e.qListObject.qDimensionInfo;n.errorTranslationFunc=s.getDimensionError}return n}function p(e){var t=e.qError.qErrorCode;switch(t){case l.NxLocalizedErrorCode.LOCERR_CALC_EVAL_CONDITION_FAILED:return c.getLayoutMsg(e)||""}if(e.qError.qContext){var i=[e.qError.qContext];return n.get("ErrorCode."+t,i)}}var h=a.extend({$scope:null,init:function n(i){this.$scope=i;i.hasSoftError=false;i.hasHardError=false;i.showMore=function(n){var o=e.element("<div>").appendTo("body");o.showComponent(r,{alignTo:e.element(n.target),error:i.error,onClose:function e(){o.remove();t.preventGestures()}})}},onPaint:function e(){var t=this.$scope,r;var o=t.object.error;if(!o){var a=t.layout;var s=t.object.ext&&t.object.ext.options?t.object.ext.options.hyperCubePath:"";var l=f(a,s);if(l.holder){r=p(l.holder)||l.errorTranslationFunc(l.holder.qError.qErrorCode);o=u(l.holder.qError)?{class:"soft-error",message:r}:{class:"hard-error",title:n.get("Object.Error"),message:r}}}t.error=o;return i.resolve()}});h.$inject=["$scope"];return{template:o,controller:h,isCalcCondNotCalculatedErr:d}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){return{DEFAULT_STATE_TRANSLATION:"AlternateState.DefaultState",DEFAULT_STATE_NAME:"$"}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(97),n(99),n(854)],r=function(e,t,n){e.directive("qvPager",["$timeout",function(e){return{restrict:"A",priority:0,link:function i(r,o){n.treatAsDesktop()||o.css("overflow-x","auto");r.pagerData=o.find("ul").pager().data("qv-pager");o.addClass("qv-pager");r.nextPage=function(){e(function(){r.pagerData.goToNextPage();r.refreshPager(true)})};r.prevPage=function(){e(function(){r.pagerData.goToPreviousPage();r.refreshPager(true)})};r.goToPage=function(e){r.pagerData.goToPage(e);r.refreshPager(true)};r.refreshPager=function(e){var t="";e||r.pagerData.refresh();o.removeClass("qv-pager-back qv-pager-forward");if(1!==r.pagerData.currentPage){r.showShadow=true;t+="qv-pager-back "}else r.showShadow=false;r.pagerData.currentPage!==r.pagerData.maxPages&&(t+="qv-pager-forward ");o.addClass(t)};function a(){r.refreshPager()}r.$on("refreshPager",a);r.$on("$destroy",function(){t.off("end",a)})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(54),n(91),n(48),n(89),n(105),n(147),n(154),n(134),n(112),n(233),n(366)],r=function(e,t,n,i,r,o,a,s,l){n.service("qvCaoSearchService",["qvCaoSelectionService",function(n){var c;function u(){c=this;this.fieldList=[];this.queryString=[];this.queryTokens=[];this.caoSearchQueryHandlers=[]}u.prototype.createFieldList=function(){var e=[];return a.getList().then(function(e){return e.getLayout()}).then(function(t){e=e.concat(t);return c.getMasterItems()}).then(function(t){e=e.concat(t);c.fieldList=c.sortFields(e);return c.fieldList})};u.prototype.getFields=function(){return this.fieldList};u.prototype.getSelectedFields=function(e){return this.getFields().filter(function(e){return e.selected}).filter(function(t){var n=e.indexOf(t.qName);return n>-1})};u.prototype.syncFieldsInQueryWithFieldPicker=function(t){var n=this.getSelectedFields(t);this.fieldList=this.fieldList.map(function(t){var i=e.find(n,function(e){return e.caoFieldId===t.caoFieldId});t.selected=!!i;return t})};u.prototype.getMeasureMasterItems=function(){var e=this;return o.getList().then(function(t){return t.getLayout().then(function(t){e.measureMasterItems=t.map(function(e){return{qName:e.qData.title,classifications:["measure"],masterItem:true,libId:e.qInfo.qId,libIdLabel:e.qMeta.title}});return e.measureMasterItems})})};u.prototype.getDimensionMasterItems=function(){var e=this;return s.getList().then(function(t){return t.getLayout().then(function(t){e.dimensionMasterItems=t.map(function(e){return{qName:e.qData.title,classifications:["dimension"],masterItem:true,libId:e.qInfo.qId,libIdLabel:e.qMeta.title}});return e.dimensionMasterItems})})};u.prototype.getMasterItems=function(){var e=[];return i.all({measureItems:this.getMeasureMasterItems(),dimItems:this.getDimensionMasterItems()}).then(function(t){e=t.measureItems.concat(t.dimItems);return e})};u.prototype.sortFields=function(e){e=e.map(function(e){var n="cao_field_"+e.qName;n=n.split(" ").join("_");e.masterItem||(1===e.qSrcTables.length?e.tablesAssociated=e.qSrcTables[0]+" "+t.get("cao.search.field.table"):e.tablesAssociated=t.get("cao.search.field.table.title",e.qSrcTables.length));e.qSrcTables&&(e.tablesTooltip=e.qSrcTables.join(", "));e.name=e.qName;e.caoFieldId=e.masterItem?n+"masterItem_"+e.classifications[0]:n;e.highlight=false;e.classificationIcon=c.getFieldClassificationIcon(e);e.displayNameTokens=[{text:e.qName,matching:false}];if(e.classifications&&e.classifications.length>0){e.masterItemDimension="dimension"===e.classifications[0]&&e.masterItem;e.masterItemMeasures="measure"===e.classifications[0]&&e.masterItem}e.masterItem&&(e.masterItemTitle=e.masterItemDimension?t.get("cao.fieldPicker.masterItem.dimension"):t.get("cao.fieldPicker.masterItem.measure"));return e});return l.localeOrderBy(e,function(e){return e.qName})};u.prototype.getFieldClassificationIcon=function(t){var n;var i=e.find(t.qTags,function(e){return"$date"===e});var r=e.find(t.qTags,function(e){return"$geoname"===e});i?n="lui-icon--calendar":r&&(n="lui-icon--map");return n};u.prototype.indexesOfWordInString=function(e,t){e=e.toLowerCase();t=t.toLowerCase();var n=[];var i=e.indexOf(t);i>-1&&n.push(i);while(i>-1){i=e.indexOf(t,++i);i>-1&&n.push(i)}return n};u.prototype.getQueryTokensBasedOnQuotes=function(e){var t=[];if(e&&e.length>0){var n=e.split(" ");var i=0;var r=null;var o=null;var a=null;var s=false;n.forEach(function(l,u){r='"'===l.charAt(0);o='"'===l.charAt(l.length-1);u<n.length-1&&(a='"'===n[u+1].charAt(0));if(r){i=u;s=true;if(1===n.length&&r){l=l.substr(1);t.push(c.createToken(l,t,e,false));s=false}else if(u===n.length-1&&n.length>1){l=n.slice(i,u+1).join(" ").substr(1);t.push(c.createToken(l,t,e,false));s=false}if(s&&a&&!o){l=n.slice(i,u+1).join(" ").substr(1);t.push(c.createToken(l,t,e,false));s=false}}else if(s&&a&&!o){l=n.slice(i,u+1).join(" ").substr(1);t.push(c.createToken(l,t,e,false));s=false}else if(o){l=n.slice(i,u+1).join(" ");t.push(c.createToken(l,t,e,true));s=false}else if(s&&u===n.length-1){l=n.slice(i,u+1).join(" ").substr(1);t.push(c.createToken(l,t,e,false));s=false}else s||t.push(c.createToken(l,t,e,false))})}this.queryTokens=t;return this.queryTokens};u.prototype.createToken=function(e,t,n,i){var r;var o=e.length;if(t&&t.length>0){var a=t[t.length-1];r=n.indexOf(e,a.indexEnd)}else r=n.indexOf(e);""===e&&(o=1);return{word:i?e.substr(1).slice(0,-1):e,indexStart:""===e?r+1:r,indexEnd:r+o}};u.prototype.addStringToQueryAtIndex=function(e,t,n){var i="";if(t&&t.length>0){var r=t;var o=t.slice(0,n).trim();var a=r.slice(n).trim();i=o+e+a}return i};u.prototype.getCurrentToken=function(e,t){var n={index:null,token:null};var i=this.getQueryTokensBasedOnQuotes(e);i.some(function(e,i){if(t>=e.indexStart&&t<=e.indexEnd){n.index=i;n.token=e;return t>=e.indexStart&&t<=e.indexEnd}});return n};u.prototype.replaceTwoOrMoreSpacesWithOne=function(e){return e.replace(/\s\s+/g," ")};u.prototype.removeFieldFromQuery=function(e,t,n){var i=this.indexesOfWordInString(t,e.qName);if(i.length>1){n=n.filter(function(t){return t.caoFieldId!==e.caoFieldId}).map(function(e){e.indexStartOfFieldInQuery=t.indexOf(e.qName);e.indexEndOfFieldInQuery=t.indexOf(e.qName)+e.qName.length;return e});var r=-1;i.forEach(function(i){n.forEach(function(n){r=i!==n.indexStartOfFieldInQuery?i:t.indexOf(e.qName)})});if(-1===r)t=t.replace(e.qName,"");else{var o=t.split("");o.splice(r,e.qName.length);t=o.join("")}}else t=t.replace(e.qName,"");return t.replace(/^\s+/g,"")};u.prototype.addFieldToQuery=function(e,t,n,i,r){t=t||"";var o=e.qName.match(" ")||e.qName.match(String.fromCharCode(160));var a=o?'"'+e.qName+'"':e.qName;var s=this.getQueryTokensBasedOnQuotes(t);var l=0;var c=r-i>0;if(c){var u=t.split("");u.splice(i,r-i,a);t=u.join("");l=i+a.length+1}else if(""===t){t=a;l=n+a.length+1}else if(s.length>0&&e){var d=this.getCurrentToken(t,n);if(null!==d.index){s[d.index]={word:e.qName};t=s.map(function(e,t){if(t===d.index&&t<s.length-1&&s[t+1].word)return e.word.match(" ")?'"'+e.word+'" ':e.word+" ";return e.word.match(" ")?'"'+e.word+'"':e.word}).join(" ");l=d.token.indexStart+a.length+1}else{var f=" "+a;t=this.addStringToQueryAtIndex(f,t,n);l=n+a.length+1}}t=t.replace(/^\s+/g,"");return{query:t,cursorPosition:l}};u.prototype.searchResultPositionRelativeToQuery=function(e,t){var n=7.5;var i=.7;var r=0;if(e&&e.length>0){var o=e.slice(0,t).split("");var a=o.filter(function(e){return" "!==e});var s=o.filter(function(e){return" "===e});r+=a.length*n;r+=s.length*i}return r};u.prototype.registerForCaoSearchQuery=function(e){this.caoSearchQueryHandlers.push(e)};u.prototype.unRegisterFromCaoSearchQuery=function(){this.caoSearchQueryHandlers=[]};u.prototype.getMatchingFields=function(t,n){var i=[];var r=this.fieldList;var o;t?t=t?t.toLowerCase():"":t&&""!==t||(o=true);i=r.filter(function(e){var i=e.qName.toLowerCase();if(o||i.indexOf(t)>-1)return!n||n&&e.masterItem;return false});i=e.uniq(i).filter(function(e){return l.librarySearchFn(e,t)});return l.localeOrderBy(i,function(e){return e.qName})};u.prototype.clearSelectedFields=function(){this.fieldList.forEach(function(e){e.selected=false});n.clearSelection()};u.prototype.selectField=function(e,t){this.fieldList=this.fieldList.map(function(n){n.caoFieldId===e.caoFieldId&&(n.selected=t);return n})};u.prototype.updateInsights=function(e){this.caoSearchQueryHandlers.forEach(function(t){t&&t({query:e,fields:c.getFields().filter(function(e){return e.selected})})});n.clearSelection()};u.prototype.showIntro=function(e){this.caoSearchQueryHandlers.forEach(function(t){t&&t({showIntro:e})})};u.prototype.matchingField=function(e,t,n){var i=t>0&&t<=n.length-1;var o=t>=-1&&t<n.length-1;switch(e){case r.KeyCodes.Up:i&&t--;break;case r.KeyCodes.Down:o&&t++;break;case r.KeyCodes.Tab:break}return n[t]};return new u}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(907)],r=function(e,t){e.directive("qvProgressBar",["$interval",function(e){return{replace:true,template:t,restrict:"E",scope:{percentDone:"=",onCompleted:"&",options:"="},link:function t(n){var i,r=true;n.display="0%";n.showPercent=0;function o(){if(n.showPercent>=100){e.cancel(i);n.onCompleted();return}if(n.showPercent>=n.percentDone){e.cancel(i);return}a(n.showPercent+1)}n.$watch("percentDone",function(t){if(void 0!==t)if(r){a(t);r=false}else{e.cancel(i);i=e(o,10)}});function a(e){n.showPercent=e;n.display=e+"%"}n.$on("$destroy",function(){e.cancel(i)})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(968)],r=function(e,t){var n={bindings:{currentSelectionDisabled:"<"},template:t};e.directive("qvCurrentSelectionsItem",function(){return n});return n}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(11),n(117),n(170),n(89),n(110)],r=function(e,t,n,i,r){var o;var a;var s;var l=61;function c(n){if(o)return i.resolve(o);var s=new i;var l=200;var c=30;var u=e(".table-container").width()-l;var d=e(".table-container").height()-c+e("#datamodelviewer_footer").height();var f={qcx:u,qcy:d};var p={qcx:0,qcy:0};var h=30;var v=n;var g=false;t.currentApp.getTablesAndKeys(f,p,h,v,g).then(function(e){o=e;a=e;return s.resolve(e)},function(e){e.code===r.LOCERR_RELOAD_IN_PROGRESS&&(e.isHandled=true);return s.resolve(a)});return s.promise}function u(e){if(s){e(s);return}t.currentApp.getLooselyCoupledVector().then(function(t){s=t;e(t)})}function d(e,i){if(!i)throw new Error("Table name is empty.");var r=-1;var o=l;var a=e;var s=n.decodeTableName(i);return t.currentApp.getTableData(r,o,a,s)}function f(){return t.currentApp.getViewDlgSaveInfo()}function p(e){return t.currentApp.setViewDlgSaveInfo(e)}function h(){o=void 0;s=void 0}function v(e,n){return t.currentApp.assignDerivedFieldFor(e,n)}function g(){return t.currentApp.getAppLayout().then(function(e){return!!e.qLayout.qHasData})}return{getTablesAndKeys:c,getLooselyCoupledVector:u,getTableData:d,getTablePositions:f,setTablePositions:p,clearAllCaches:h,setDerivedField:v,hasAppGotData:g}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(89),n(48),n(397),n(10)],r=function(e,t,n,i){var r=window.angular,o={"max-height":"90%","max-width":"90%","min-height":"180px",width:"400px"},a,s=false,l=false;n.directive("qvDelayedDialogButton",function(){return{replace:true,restrict:"A",link:function e(t){t.button&&t.button.defaultEscButton&&(a=t);t.closeModal=function(e,n){if(e){e.preventDefault();e.stopPropagation()}t.button&&t.button.callback&&("undefined"===typeof t.button.expression||t.button.expression)&&t.button.callback();(n||t.autoClose||t.button&&!t.button.callback)&&t.destroyModal();return}}}});n.service("$delayedModal",["$compile","$rootScope","$document",function(n,c,u){var d={},f,p,h,v,g=i,m;var b={open:function e(i){var b=new t,y;if(f){p=f;v=h}f=c.$new();h=r.element('<div class="qv-modal-container qui-modalbackground-centered" qva-outside-ignore-for="allOutside" ng-style="containerStyle" ng-class="classes"></div>');f.containerStyle={content:" "};f.classes={};f.modalStyle={};var x;for(x in o)f.modalStyle[x]=o[x];f.wasDisabled=[];f.showDefaultButton=true;s=true;l=false;d=i;f.failed=false;f.autoClose=true;for(x in d)f[x]=d[x];h.html(g).appendTo(u.find("body"));f.html&&h.find("main").append(f.html);y=f.$watch("element",function(){b.resolve();y()});m=n(h)(f);f.destroyModal=this.close.bind(this);f.handleEscButton=function(e){if(e){e.preventDefault();e.stopPropagation()}f.buttons&&a?a&&a.closeModal():f.destroyModal()};f.$broadcast("delayed-modal-opened");f.$watchCollection("[width, height]",function(){f.width&&(f.modalStyle.width=f.width);f.height&&(f.modalStyle.height=f.height)});return b.promise},update:function e(t){if(!s)return;for(var i in t){f[i]=t[i];d[i]=t[i]}if(t.html||t.buttons){h.html(g);h.find("main").html(t.html);u.find("body").find(".qui-delayedModal").replaceWith(h.html());m=n(h)(f)}},close:function e(){if(f&&h){f.$broadcast("delayed-modal-closed");h.remove();f.$destroy();f=p||null;h=v||null;v=null;p=null}s=false;l=false},lock:function t(){l=true;f.wasDisabled.length=0;m.find("button, input, textarea, select").each(function(){var t=e(this);t.prop("disabled")?f.wasDisabled.push(this):t.prop("disabled",true)})},unlock:function t(){l=false;m.find("button, input, textarea, select").each(function(){-1===f.wasDisabled.indexOf(this)&&e(this).prop("disabled",false)});f.wasDisabled.length=0}};Object.defineProperty(b,"isOpened",{get:function e(){return s}});Object.defineProperty(b,"isLocked",{get:function e(){return l}});Object.defineProperty(b,"scope",{get:function e(){return f}});return b}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){function t(t,n){n=n?n+".":"";return e.getValue(t,n+"qHyperCube.qDimensionInfo.length")>1}function n(t,n){n=n?n+".":"";return e.getValue(t,n+"qHyperCube.qMeasureInfo.length")>1}function i(e,n){if(!t(e,n))return 1;return o(e,n)}function r(t,n){n=n?n+".":"";return e.getValue(t,n+"qHyperCube.qSize.qcy")}function o(t,n){n=n?n+".":"";if(e.getValue(t,n+"qHyperCube.qStackedDataPages.0.qData.length"))return e.getValue(t,n+"qHyperCube.qStackedDataPages.0.qData.0.qSubNodes.length",0)+e.getValue(t,n+"qHyperCube.qStackedDataPages.0.qData.0.qDown",0)+e.getValue(t,n+"qHyperCube.qStackedDataPages.0.qData.0.qUp",0);var i=e.getValue(t,n+"qHyperCube.qEffectiveInterColumnSortOrder.0");var r=e.getValue(t,n+"qHyperCube.qDimensionInfo."+i);return l(r)}function a(e,n){if(!t(e,n))return r(e,n);return o(e,n)}function s(t,n){if(!t)return null;t=n?e.getValue(t,n):t;return t&&t.qHyperCube?t.qHyperCube:null}function l(e){return e.qCardinalities.qHypercubeCardinal}return{getHyperCube:s,hasSecondDimension:t,hasSecondMeasure:n,getStackedCubeSizeOf2Dims:o,getStackedCubeSizeOfMax2Dims:a,getOuterDimensionSizeOfMax2Dims:i,getDimensionSize:l}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(115)],r=function(e){return{getChartType:t,getExtensionType:n,getInitialProperties:i};function t(t){return e.getType(t)}function n(e){return t(e).getExtensionType()}function i(e){return t(e).getInitialProperties()}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(11),n(48),n(1011),n(1012),n(89),n(90)],r=function(e,t,n,i,r,a){var s,l,c=i.BUTTON_WIDTH,u=i.SEPARATOR_WIDTH,d=i.BORDER_SPACING,f=i.SELECT_DEFAULT_WIDTH,p=i.EXTRA_EDGE_PADDING,h=i.TYPE_BUTTON,v=i.TYPE_SEPARATOR,g=i.TYPE_SELECT;t.componentDirective("qvaIncludeSelectionToolbar",{toolbar:"=",options:"="});l={width:0,items:[],hasItems:function e(){return this.items.length>0},reset:function e(t){this.width=t;this.items.length=0},freeWidth:function e(){var t,n=0;for(t=0;t<this.items.length;t++)n+=this.items[t];return this.width-n}};s={template:n,controller:["$scope",function(n){var i=r(),s=i.promise,m={},b;n.filteredButtons=[];n.currentMenuButtons=[];n.levels=[];n.selectionInfo={show:false,selected:0,total:0};n.lassoEnabled=false;function y(e){if(e.component)return e.component;if("sel-toolbar-icon-separator"===e.buttonClass)return v;return h}function x(e){var t=y(e);switch(t){case h:return c+d;case v:return u+d;case g:return(e.width||f)+d}}function S(e,t,i){var r=0,o,a;l.reset(e-(d+2*p));for(a=t.length-1;a>=0;a--){o=x(t[a]);if(!(o<=l.freeWidth()))break;l.items.push(o)}(n.toolbar.showLock||n.locked)&&(r+=c+d);(i.length>0||t.length>l.items.length)&&(r+=c+d);while(l.hasItems()&&l.freeWidth()<r)l.items.pop();return l.items.length}function w(e,t){e._componentId=t;e.items&&e.items.forEach(function(e){e._componentId=t})}function q(e){e.forEach(function(e){e._componentId&&w(e,e._componentId)});n.currentMenuButtons=e}function C(e){e.forEach(function(e){w(e,e._componentId||a.generateId());m[e._componentId]=e})}function _(){var e=[].concat(n.toolbar.buttons),t=[].concat(n.toolbar.menuButtons),i=S(n.toolbar.style.width,e,t),r,o,a=[];n.filteredButtons=[];var s=[];n.levels=[];var l=e.concat(t).filter(function(e){return e.component});C(l);for(r=0;r<i&&e.length;++r){o=e.pop();o.component?a.push(o):n.filteredButtons.push(o)}n.filteredButtons.reverse();while(e.length){o=e.pop();y(o)!==v&&s.push(o)}while(t.length)s.push(t.shift());q(s);I(a)}this.layoutItems=_;function I(e){e.forEach(function(e){switch(e.component){case g:var t={width:f};var i=a.extend(true,t,e);a.extend(e,i);n.selectComponents=n.selectComponents||[];n.selectComponents.push(e);break;default:throw new Error("Select toolbar component: "+e.component+" was not recognized")}})}this.confirm=function(){n.selectionsApi.confirm()};this.close=function(){n.destroyComponent()};this.refresh=function(){t.$apply(n)};function E(){b=null;var e=n.levels.pop();q(e.items)}function D(e){n.levels.push({items:n.currentMenuButtons});q(e)}function A(e){return m[e]}n.shouldShowBtnMore=function(){return n.currentMenuButtons.length>0};n.shouldDisableSelect=function(e){var t=true===e.isDisabled||"function"===typeof e.isDisabled&&e.isDisabled();return!!t};n.shouldShowSelect=function(e){var t=!n.locked&&(void 0===e.show||"boolean"===typeof e.show&&false!==e.show||"function"===typeof e.show&&e.show(e.value));return!!t};n.buttonAction=function(e,t){e.originalEvent.preventDefault();e.stopPropagation();t.action.call(n.toolbar)};n.buttonIsDisabled=function(e){switch(o(e.isDisabled)){case"function":return!!e.isDisabled.call(n.toolbar);case"boolean":return e.isDisabled;default:return false}};n.isButtonSelected=function(e){var t=e.items;var n=A(e._componentId)||{};var i=!t&&e._componentId&&e.hasOwnProperty("value")&&n.value===e.value;return!!i};n.menuAction=function(t){t.originalEvent.preventDefault();var i="DIV"===t.target.tagName?e(t.target):e(t.target).parents("div");var r=i.scope();var o=i.attr("tid");if(r.button&&r.button.items){b=r;D(r.button.items)}else if("sel-toolbar-menu-back"===o)E();else{b&&E();var a=r.button.action||b&&b.action;if(!a)throw Error("selection-toolbar: menu button has no action function defined");a.call(n.toolbar,r.button);n.toolbar.showMenu=!n.toolbar.showMenu}};n.toggleShowMenu=function(e){e.originalEvent.preventDefault();n.toolbar.showMenu=!n.toolbar.showMenu};n.toggleLasso=function(){n.lassoEnabled=!n.lassoEnabled;n.toolbar.toggleLasso(n.lassoEnabled)};function T(e){n.locked=e;n.toolbar.showMenu=false;s.then(function(){_()})}n.toggleLock=function(t){t.originalEvent.preventDefault();t.stopPropagation();if(e(t.target).closest(".sel-toolbar-list-item-close").length>0)return;if(n.toolbar.backendApi.isLocked()){n.toolbar.selectionsApi.selectionsMade=true;n.toolbar.backendApi.unlock()}else n.toolbar.backendApi.lock()};n.$watch("toolbar.backendApi.isLocked()",function(e){void 0!==e&&T(!!e)});n.$watch("toolbar.position",function(e){if(!e)return;n.toolbar.style=e;i.resolve();T(!!n.toolbar.backendApi.isLocked&&n.toolbar.backendApi.isLocked())});n.$watch("toolbar.menuMaxHeight",function(e){if(!e)return;n.toolbar.menuStyle={maxHeight:e}});n.$watch("options.lassoEnabled",function(e){n.lassoEnabled=e})}]};return s}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(94),n(158),n(334),n(239),n(848),n(849),n(341),n(335),n(427),n(320),n(360),n(361),n(245),n(306),n(508),n(428)],r=function(e,t,n,i,r,o,a,s){var l=t.inClient(),c,u;var d=new s;d.scope="root";if(!l){e.setState(e.States.analysis);e.setView(e.Views.sheet)}if(f()){document.body.classList.add("absolute-position-mashup");document.documentElement.classList.add("absolute-position-mashup")}c=new r(l);u=new a;o.init();function f(){var e=Array.prototype.slice.call(document.querySelectorAll("body > .qvobject, body > .qvplaceholder"));if(0===e.length)return false;return!e.some(function(e){return"absolute"!==e.style.position})}function p(e,t){i.setErrorCallback(e,t);n.setErrorCallback(e,t)}function h(e,t){d.register({scope:"root",name:e,callback:t})}function v(e){d.clear(e)}var g={openApp:i.openApp.bind({_qEvent:d}),currApp:i.currApp,getGlobal:n.get.bind({_qEvent:d}),setOnError:p,on:h,off:v,setLanguage:t.setLanguage,setDeviceType:t.setDeviceType,table:i.table,getAppList:n.getAppList,resize:t.resize,getExtensionList:t.getExtensionList,callRepository:t.callRepository,registerExtension:t.registerExtension,navigation:c,sessionApp:i.sessionApp,sessionAppFromApp:i.sessionAppFromApp,getThemeList:a.getThemeList,theme:u};Object.defineProperty(g,"Promise",{get:function e(){return t.Promise}});return g}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i;!(i=function(){var e={};function t(t){var n=e[t];if(!n){n=[];e[t]=n}return n}function n(e,n){if(!e)throw new Error("Key is not defined.");if("string"!==typeof e)throw new Error("Key has to a String.");if(!n)throw new Error("No observer was defined.");if("function"!==typeof n)throw new Error("Observer is not a function.");var i=t(e);i.push(n)}function i(e,n,i){if(!e)throw new Error("Key is not defined.");if("string"!==typeof e)throw new Error("Key has to a String.");var r=t(e);r.forEach(function(e){e(n,i)})}function r(e,n){if(!e)throw new Error("Key is not defined.");if(!n)throw new Error("Observer is not defined.");var i=t(e);var r=i.indexOf(n);if(-1===r)throw new Error('Unknown observer for the key "'+e+'".');i.splice(r,1)}return{addObserver:n,notifyAll:i,removeObserver:r}}.call(t,n,t,e),void 0!==i&&(e.exports=i))},function(e,t,n){"use strict";var i,r;!(i=[n(117),n(381),n(89)],r=function(e,t,n){var i={};function r(e){var t={};var n={keywords:[],keywordsAsLowerCase:[],functions:[],functionsAndCategories:[],notFunctions:[],bnfEntries:[],mapping:{}};function i(e){return e.replace(/\s+/g," ").replace(/\s+(\)|\]|,)/g,"$1").replace(/(\(|\[|,)\s+/g,"$1")}function r(){e.forEach(a);var t=[{qStr:"must_include",qBnfLiteral:true}];t.forEach(a)}function o(){n.functions.length<1&&r();function e(e,t){return{text:t,type:e}}var t=n.notFunctions.map(e.bind(null,"keyword"));var i=n.functions.map(e.bind(null,"function"));n.autocompleteList=t.concat(i)}function a(e){if(true===e.qBnfLiteral){-1===n.keywords.indexOf(e.qStr)&&n.keywords.push(e.qStr);if(e.qStr){n.keywordsAsLowerCase.push(e.qStr.toLowerCase());n.mapping[e.qStr.toLowerCase()]=e.qNbr;if(!e.qAggrFunc&&!e.qQvFunc){if(!e.qFieldFlag){-1===n.notFunctions.indexOf(e.qStr)&&n.notFunctions.push(e.qStr);t[e.qStr.toLowerCase()]="keyword"}}else{-1===n.functions.indexOf(e.qStr)&&n.functions.push(e.qStr);t[e.qStr.toLowerCase()]="function";n.functionsAndCategories.push({fglist:e.qFGList,func:e.qStr})}}}}function s(t){t=parseInt(t,10);if(n.bnfEntries[t])return n.bnfEntries[t];var i=e.filter(function(e){return parseInt(e.qNbr,10)===t});n.bnfEntries[t]=i[0];return i[0]||false}function l(e){n.keywords.length<1&&r();e=e.toLowerCase();var t=n.mapping[e];return s(t)}function c(e){var t="",n=s(e);e>=0&&e<=56?t=n.qStr||"":n&&(t=n.qStr||n.qName);return t}function u(e){if(e&&!e.signature){e.qBnf&&e.qBnf.length>0?e.signature=e.qBnf.map(c).join(" ").trim():e.qPNbr&&(e.signature=u(s(e.qPNbr)));e.signature=i(e.signature)}return e.signature||""}function d(){n.keywords.length<1&&r();return n.keywords}function f(){n.keywordsAsLowerCase.length<1&&r();return n.keywordsAsLowerCase}function p(){n.autocompleteList||o();return n.autocompleteList}function h(e){var t=l(e);return false!==t?u(t):""}function v(){return e.filter(function(e){return e.qHelpId&&e.qHelpId>0}).map(function(e){return e.qStr})}function g(e){return"function"===t[e.toLowerCase()]}function m(){return false}function b(){return false}function y(e){return!!t[e.toLowerCase()]}function x(){n.functions.length<1&&r();return n.functions}function S(){return n.functionsAndCategories}r();return{getBnfEntry:s,getLiteralString:c,getAllKeywords:d,getAllKeywordsAsLowerCase:f,getAutocompleteList:p,getKeywordsWithHelp:v,getSignatureFromKeyword:h,getFunctionTip:h,isFunction:g,isField:m,isKeyword:y,isVariable:b,getAllFunctions:x,getAllFunctionsAndCategories:S}}function o(i,o){var a="BNF_CACHE_DATA_"+i;var s="BNF_HASH_"+i;o=o||e;return o.global.getBaseBNFHash(i).then(function(e){var l=e.qBnfHash;var c=new n;var u=localStorage.getItem(s);var d=u===l;var f=d?localStorage.getItem(a):void 0;if(f)try{var p=JSON.parse(t.decompressFromUTF16(f));c.resolve(r(p));return c.promise}catch(e){}o.global.getBaseBNF(i).then(function(e){var n=e.qBnfDefs;localStorage.setItem(a,t.compressToUTF16(JSON.stringify(n)));localStorage.setItem(s,e.qBnfHash);c.resolve(r(n))});return c.promise})}function a(i){var r="BNF_STRING_CACHE_DATA_"+i;var o="BNF_STRING_HASH_"+i;return e.global.getBaseBNFHash(i).then(function(a){var s=a.qBnfHash;var l=new n;var c=localStorage.getItem(o);var u=c===s;var d=u?localStorage.getItem(r):void 0;if(d)try{var f=JSON.parse(t.decompressFromUTF16(d));l.resolve(f);return l.promise}catch(e){}e.global.getBaseBNFString(i).then(function(e){var n=e.qBnfStr;localStorage.setItem(r,t.compressToUTF16(JSON.stringify(n)));localStorage.setItem(o,e.qBnfHash);l.resolve(n)});return l.promise})}function s(e,t){i[e]||(i[e]=o(e,t));return i[e]}function l(e){return a(e)}function c(){return s("S")}function u(e){return s("E",e)}function d(){return l("S")}return{createBnfModel:r,getReloadScriptBnfModel:c,getExpressionBnfModel:u,getScriptBnf:d}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(95),n(94),n(131),n(673)],r=function(e,t,n,i,r){e.service("qvSheetService",function(){var o;var a=e.getService("$cacheFactory"),s=a("pp-sheet");return{set:function e(t){o=t},get:function e(){return o},destroy:function e(){o=null},setSheetAsSelectedObj:function e(){var o=n.model;var a={id:o.id,type:"sheetCell",canCopy:function e(){return false},canCut:function e(){return false},canRemove:function e(){return false},remove:function e(){return},paste:function e(){t.publish("/activeSheet/pasteObject",null)},getAllPropertyPanelContent:function e(){return o.getProperties().then(function(e){return o.getLayout().then(function(t){var n={properties:e,layout:t,definition:r,type:"sheet",model:o,iconName:"sheet",titleRef:"qMeta.title",cache:s};return n})})}};return i.setSelectedObject(a)}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(198)],r=function(e){var t;t=e.extend("Listbox",{init:function e(t){this._super(t,"/qListObjectDef",{width:1});this.cacheCube.setMethodName("getListObjectData")},select:function e(t,n,i){return this.model.selectListObjectValues(this.path,n,i)},selectAll:function e(){return this.model.selectListObjectAll(this.path)},selectPossible:function e(){return this.model.selectListObjectPossible(this.path)},selectAlternative:function e(){return this.model.selectListObjectAlternative(this.path)},selectExcluded:function e(){return this.model.selectListObjectExcluded(this.path)},search:function e(t){return this.model.searchListObjectFor(this.path,t)},abortSearch:function e(){return this.model.abortListObjectSearch(this.path)},confirmSearch:function e(t){return this.model.acceptListObjectSearch(this.path,t)},updateCache:function e(t){this.cacheCube.set(t.qListObject.qDataPages);this.cacheCube.setCubeSize(t.qListObject.qSize)},setInitialData:function e(t){this.cacheCube.set(t.qListObject.qDataPages)},getData:function e(t){return this.cacheCube.getData(t)},getDataPage:function e(t){return this.getData([t]).then(function(e){return e[0]})},getSize:function e(){return this.model.layout.qListObject.qSize},lock:function e(){return this.model.lock(this.path)},unlock:function e(){return this.model.unlock(this.path)},isLocked:function e(){return!(!this.model.layout||!this.model.layout.qListObject)&&!!this.model.layout.qListObject.qDimensionInfo.qLocked},isDrillDown:function e(){return!(!this.model.layout||!this.model.layout.qListObject)&&"H"===this.model.layout.qListObject.qDimensionInfo.qGrouping},getDimensionInfos:function e(){if(this.model.layout&&this.model.layout.qListObject)return[this.model.layout.qListObject.qDimensionInfo];return[]}});return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(48),n(90),n(89),n(141),n(283),n(1094),n(50),n(1095),n(245)],r=function(e,t,n,i,r,o,a,s,l){t.service("qvListboxPopoverServiceMobile",["$document",function(t){var c=t.find("body"),u,d,f;d={show:function t(r,d,p,h){var v=i(),g={$alignToElement:d.$alignToElement,popupPosition:d.position||"bottom",collision:d.collision||"none",qvaOutsideIgnoreFor:d.qvaOutsideIgnoreFor,getVisualization:function e(){return v.promise},model:r,onPopoverClose:this.onPopoverClose,options:{setController:v.resolve,isPopover:true,showLock:d.showLock,search:d.search||{},smallDevice:s.isSmallDevice,direction:d.direction},selectionToolbarComponent:o};if(f){f.selectionsActivated=function(){};f.selectionsDeactivated=function(){};f.close()}u=e.element("<div>");c.append(u);a.template=l;f=u.showComponent(a,g);f.selectionsActivated=function(){n.isFunction(h)&&h()};f.selectionsDeactivated=function(){n.isFunction(p)&&p();p=null;h=null};return f},showField:function e(t,n,o,a,s,l){return r.createTransientField(n,t,a).then(function(e){return i.resolve(this.show(e,o,s,l))}.bind(this))},showDimension:function e(t,n,i,o,a,s){r.createTransientDimension(n,t,o).then(function(e){this.show(e,i,a,s)}.bind(this))},close:function e(){f&&f.close()},onPopoverClose:function e(){}};return d}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(90),n(89),n(141),n(283),n(364),n(50),n(365),n(245)],r=function(e,t,n,i,r,o,a,s){e.service("qvListboxPopoverService",["luiPopover",function(e){var l;var c;var u={showDelayed:function i(u,d,f,p){var h=n();if(l){c.selectionsActivated=function(){};c.selectionsDeactivated=function(){};l.close()}c={getVisualization:function e(){return h.promise},onPopoverClose:this.onPopoverClose,options:{setController:h.resolve,isPopover:true,showLock:d.showLock,search:d.search||{},smallDevice:a.isSmallDevice,direction:d.direction},selectionToolbarComponent:r,onClose:o};l=e.show({template:s,controller:o.controller,alignTo:d.$alignToElement[0],input:c,closeOnResize:false,dock:"top"});u.then(function(e){c.model=e}).catch(function(e){false});c.selectionsActivated=function(){t.isFunction(p)&&p()};c.selectionsDeactivated=function(){t.isFunction(f)&&f();f=null;p=null};return l},show:function e(t,i,r,o){return this.showDelayed(n.when(t),i,r,o)},showField:function e(t,r,o,a,s,l){return i.createTransientField(r,t,a).then(function(e){return n.resolve(this.show(e,o,s,l))}.bind(this)).catch(function(e){false})},showDimension:function e(t,n,r,o,a,s){i.createTransientDimension(n,t,o).then(function(e){this.show(e,r,a,s)}.bind(this)).catch(function(e){false})},close:function e(){l&&l.close();l=null},onPopoverClose:function e(){},getPopover:function e(){return l},onClosing:function e(){}};return u}])}.apply(t,i),void 0!==r&&(e.exports=r))},,,,,function(e,t){e.exports='<div class="qv-block-ui" ng-class="{\'qv-fade-out\': fadeOut}">\n\t<div class="qv-loader-container" ng-class="ngClasses">\n\t\t<div class="qv-loader"></div>\n\t</div>\n\t<div class="qv-loader-text" ng-if="messageObj" ng-class="ngClasses">\n\t\t<div ng-show="messageObj.task" q-translation="{{messageObj.task}}"></div>\n\t\t<div ng-show="messageObj.message" q-translation="{{messageObj.message}}"></div>\n\t</div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(97),n(719),n(348),n(297)],r=function(e,t,n,i,r){var o,a,s=r.popupComponent,l={name:"default",colors:["#b0afae","#7b7a78","#545352","#4477aa","#7db8da","#b6d7ea","#46c646","#f93f17","#ffcf02","#276e27","#ffffff","#000000"]};function c(e,t){if(void 0!==e){if(void 0!==e.index&&-1!==e.index&&t[e.index])return t[e.index];if(void 0!==e.color)return e.color?e.color:"none";return e||"none"}}function u(e,t){if("none"===t){e.addClass("transparent");e.css("background-color","transparent")}else{e.css("background-color",t);e.removeClass("transparent")}}function d(){return"inverse"}function f(n,i,r,d,f,p){if(a&&a.element===i){o&&o.close();o=null;a=null;return}a={model:f,element:i,previewBox:d,scope:n};var h=n.palettes;var v=n.palette||l;var g=false!==n.$eval(r.extended);var m=t.getService("luiPopover");var b=n.$eval(r.recentColorsFlag)||false;var y=n.$eval(r.dock)||"top";var x;function S(e,t){t.$setViewValue(e);n.onChange&&n.onChange();if(d){var i="undefined"!==typeof v.colors?c(t.$viewValue,v.colors):c(t.$viewValue,v);u(d,i)}}var w;var q;var C=t.getService("$timeout");var _=t.getService("qvGlyphService"),I=_.getDefaultGlyphs();I.forEach(function(e){e.cssClass=_.getIconClass(e.icon)});o=m.show({template:s.template,controller:s.controller,input:{$palettes:h,$palette:v,$glyphPalette:I,$useGlyph:n.$eval(r.useGlyph)||false,$disableNone:n.$eval(r.disableNone)||false,$defaultColor:"undefined"!==typeof v.colors?c(f.$viewValue,v.colors):c(f.$viewValue,v),$inputViewValue:f.$viewValue,$extended:g,$recentColorsFlag:b,onColorChange:function e(t,n,i,r,o){q=t?{color:i,index:n,icon:o,cssClass:_.getIconClass(o)}:{color:i,index:n,palette:r,icon:o,cssClass:_.getIconClass(o)};S(q,f)}},alignTo:i[0],variant:p,closeOnEscape:true,closeOnOutside:true,outsideIgnore:"colorpicker-tooltip",dock:y,autoFocus:false});o.closing.then(function(t){n.onClose&&n.onClose(t);var r;if(t){x=t;r=e(t.target).closest(i[0]).length>0}if(w){C.cancel(w);S(q,f);w=null}r||(a=null)});o.closed.then(function(){x&&x.target.classList.contains("color-scale-container")&&(a=null)});n.onOpen&&n.onOpen(o)}t.directive("qvColorPickerCustomNew",function(){return{require:"?ngModel",scope:{onClose:"=",onOpen:"=",onChange:"=",callback:"=",palette:"=",palettes:"="},link:function e(t,i,r,s){t.callback&&(t.callback.close=function(){o&&o.close()});t.$parent&&(t.$parent.onClick=function(){var e=d();f(t,i,r,null,s,e)});function l(){o&&o.close()}n.on("start",l);t.$on("$destroy",function(){o&&a&&a.element===i&&o.close();n.off("start",l)})}}});t.directive("qvColorPickerButtonNew",function(){return{require:"?ngModel",replace:true,scope:{onClose:"=",onOpen:"=",onChange:"=",callback:"=",palette:"=",palettes:"="},template:i,link:function e(t,i,r,s){var p=t.palette||l,h="undefined"!==typeof p.colors?c(s.$viewValue,p.colors):c(s.$viewValue,p),v=i.find(".qv-color-picker-preview");t.onClick=function(){var e=d();f(t,i,r,v,s,e)};t.callback&&(t.callback.close=function(){o&&o.close()});function g(){o&&o.close()}t.variantClass=r.variant?"lui-button--"+r.variant:"";n.on("start",g);t.$watch("palette",function(){p=t.palette||l;s.$render()});s.$render=function(){if(void 0===s.$viewValue)return;h="undefined"!==typeof p.colors?c(s.$viewValue,p.colors):c(s.$viewValue,p);u(v,h)};t.$on("$destroy",function(){o&&a&&a.element===i&&o.close();n.off("start",g)})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){e.service("qvGlyphService",[function(){var e=["","m","","R","S","T","U","P","Q","","",""],t=[{key:"m",value:"lui-icon--tick"},{key:"",value:"lui-icon--star"},{key:"R",value:"lui-icon--triangle-top"},{key:"S",value:"lui-icon--triangle-bottom"},{key:"T",value:"lui-icon--triangle-left"},{key:"U",value:"lui-icon--triangle-right"},{key:"P",value:"lui-icon--plus"},{key:"Q",value:"lui-icon--minus"},{key:"",value:"lui-icon--warning-triangle"},{key:"",value:"lui-icon--hand"},{key:"",value:"lui-icon--flag"}],n=t.length;var i={getIconClass:function e(i){var r,o=null;if(void 0!==i&&null!==i)if(0===i.length)o="";else for(r=0;r<n;r++)if(t[r].key===i){o=t[r].value;break}return o},getDefaultGlyphs:function t(){return e.map(function(e){return{icon:e}})}};return i}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(97),n(725),n(726)],r=function(e,t,n,i,r){var o,a,s=r.popupComponent,l=["#b0afae","#7b7a78","#545352","#4477aa","#7db8da","#b6d7ea","#46c646","#f93f17","#ffcf02","#276e27","#ffffff","#000000"],c=[{icon:""},{icon:"m"},{icon:""},{icon:"R"},{icon:"S"},{icon:"T"},{icon:"U"},{icon:"P"},{icon:"Q"},{icon:""},{icon:""},{icon:""}];function u(e,t){if(t[e])return t[e];return e||"none"}function d(e,t){if("none"===t){e.addClass("transparent");e.css("background-color","transparent")}else{e.css("background-color",t);e.removeClass("transparent")}}function f(){return"inverse"}function p(n,i,r,f,p,h){if(a&&a.element===i){o&&o.close();o=null;a=null;return}a={model:p,element:i,previewBox:f,scope:n};var v=n.$eval(r.palette)||l;var g=n.$eval(r.extended)||false;var m=t.getService("luiPopover");var b=n.$eval(r.actualColor)||false;var y=n.$eval(r.dock)||"top";var x;function S(e,t,i){i.$setViewValue(e);n.onChange&&n.onChange();f&&d(f,t)}var w;var q;var C;var _=t.getService("$timeout");o=m.show({template:s.template,controller:s.controller,input:{$palette:v,$glyphPalette:c,$useGlyph:n.$eval(r.useGlyph)||false,$disableNone:n.$eval(r.disableNone)||false,$defaultColor:u(p.$viewValue,v),$inputViewValue:p.$viewValue,$extended:g,onColorChange:function e(t,n,i,r){w&&_.cancel(w);q=t?{color:b?i:n,icon:r}:b?i:n;C=i;w=_(function(){S(q,C,p);w=null},300)}},alignTo:i[0],variant:h,closeOnEscape:true,closeOnOutside:true,outsideIgnore:"colorpicker-tooltip",dock:y,autoFocus:false});o.closing.then(function(t){n.onClose&&n.onClose(t);var r;if(t){x=t;r=e(t.target).closest(i[0]).length>0}if(w){_.cancel(w);S(q,C,p);w=null}r||(a=null)});o.closed.then(function(){x&&x.target.classList.contains("color-scale-container")&&(a=null)});n.onOpen&&n.onOpen(o)}t.directive("qvColorPickerCustom",function(){return{require:"?ngModel",scope:{onClose:"=",onOpen:"=",onChange:"=",callback:"="},link:function e(t,i,r,s){t.callback&&(t.callback.close=function(){o&&o.close()});t.$parent&&(t.$parent.onClick=function(){var e=f();p(t,i,r,null,s,e)});function l(){o&&o.close()}n.on("start",l);t.$on("$destroy",function(){o&&a&&a.element===i&&o.close();n.off("start",l)})}}});t.directive("qvColorPickerButton",function(){return{require:"?ngModel",replace:true,scope:{onClose:"=",onOpen:"=",onChange:"=",callback:"="},template:i,link:function e(t,i,r,s){var c=t.$eval(r.palette)||l,h=u(s.$viewValue,c),v=i.find(".qv-color-picker-preview");t.onClick=function(){var e=f();p(t,i,r,v,s,e)};t.callback&&(t.callback.close=function(){o&&o.close()});function g(){o&&o.close()}t.variantClass=r.variant?"lui-button--"+r.variant:"";n.on("start",g);s.$render=function(){if(void 0===s.$viewValue)return;h=u(s.$viewValue,c);d(v,h)};t.$on("$destroy",function(){o&&a&&a.element===i&&o.close();n.off("start",g)})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(11),n(104)],r=function(e,t){function n(n,i){var r,o,a=e("body").outerHeight();r=i.y+i.height/2-n.height/2;r=r<0?0:r;a-r-n.height<0&&(r=a-n.height);o=i.x+i.width;return new t(o,r,n.width,n.height)}function i(n,i){var r,o,a=e("body").outerWidth();o=i.x+i.width/2-n.width/2;o=o<0?0:o;a-o-n.width<0&&(o=a-n.width);r=i.y+i.height;return new t(o,r,n.width,n.height)}function r(n,i){var r,o,a=e("body").outerHeight();r=i.y+i.height/2-n.height/2;r=r<0?0:r;a-r-n.height<0&&(r=a-n.height);o=i.x-n.width;return new t(o,r,n.width,n.height)}function o(n,i){var r,o,a=e("body").outerWidth();o=i.x+i.width/2-n.width/2;o=o<0?0:o;a-o-n.width<0&&(o=a-n.width);r=i.y-n.height;return new t(o,r,n.width,n.height)}function a(e){var n;var i=window.scrollX?window.scrollX:document.documentElement.scrollLeft?document.documentElement.scrollLeft:0;var r=window.scrollY?window.scrollY:document.documentElement.scrollTop?document.documentElement.scrollTop:0;if(e[0]===window)n=new t(i,r,e.outerWidth(),e.outerHeight());else{var o=e[0].getBoundingClientRect();n=new t(o.left+i,o.top+r,o.width,o.height)}return n}function s(e,t,a){var s,l={top:o,right:n,bottom:i,left:r};s=l[a]||n;return s.call({},e,t)}function l(e){var t="bottom,bottomLeft,bottomRight,centerLeft,center,centerRight,topLeft,top,topRight,topLeft,left,right".split(",");if(-1===t.indexOf(e))throw new Error("Not a valid docking position. Try "+t.join(" ,")+".")}function c(e,t,n){if("right"===e)return t.getRight()-n.getRight();if("left"===e)return n.x-t.x;if("top"===e)return n.y-t.y;if("bottom"===e)return t.getBottom()-n.getBottom();return 0}function u(e){var t={top:"bottom",right:"left",bottom:"top",left:"right"};return t[e]}function d(e){return"flip"===e||"flipfit"===e}function f(e){return"fit"===e||"flipfit"===e}function p(e){var t={top:"vertical",right:"horizontal",bottom:"vertical",left:"horizontal"};return t[e]}function h(e){var t={vertical:["top","bottom"],horizontal:["left","right"]};return t[e]}function v(e){var t={horizontal:"vertical",vertical:"horizontal"};return t[e]}function g(e){var t=e.collision.split(" "),n={horizontal:t[0],vertical:t[1]||t[0]},i=p(e.position),r=v(i);return{flipPrimary:d(n[i]),fitPrimary:f(n[i]),fitSecondary:f(n[r])}}function m(e,t,n){var i,r;for(i=0;i<t.length;i++){r=t[i];if("left"===r&&e.x<n.x){e.x=n.x;break}if("right"===r&&e.getRight()>n.getRight()){e.x=n.getRight()-e.width;break}if("top"===r&&e.y<n.y){e.y=n.y;break}if("bottom"===r&&e.getBottom()>n.getBottom()){e.y=n.getBottom()-e.height;break}}return e}function b(e,t,n,i,r,o){if(!n)return e.map(function(e,n){var i=t[n]||t[0];return{align:e,x:i.x,y:i.y}});var a=t[0].x,s=t[0].y;var l=function e(t){var n=t?t.length/2:0,o=new Array(n),l,c,u,d;for(l=0;l<n;l++){c=t[2*l+1];u=c*a+(1-c)*i;d=c*s+(1-c)*r;o[l]={align:t[2*l],x:u,y:d}}return o};var c=e[0]+(e[1]?"-"+e[1]:"");var u=1,d=.7,f=.5,p=o>.5?0:.5-o,h=o>.5?.5:.7-.4*o;switch(c){case"top":if(a>=i)return l(["top",u,"top",d,"top",f,"right",d,"right",f,"left",f,"left",d,"bottom",p,"bottom",h]);return l(["top",u,"top",d,"top",f,"left",d,"left",f,"right",f,"right",d,"bottom",p,"bottom",h]);case"top-right":return l(["top",u,"top",d,"top",f,"right",d,"right",f,"left",f,"left",d,"bottom",p,"bottom",h]);case"top-left":return l(["top",u,"top",d,"top",f,"left",d,"left",f,"right",f,"right",d,"bottom",p,"bottom",h]);case"bottom":if(a>=i)return l(["bottom",u,"bottom",d,"bottom",f,"right",d,"right",f,"left",f,"left",d,"top",p,"top",h]);return l(["bottom",u,"bottom",d,"bottom",f,"left",d,"left",f,"right",f,"right",d,"top",p,"top",h]);case"bottom-right":return l(["bottom",u,"bottom",d,"bottom",f,"right",d,"right",f,"left",f,"left",d,"top",p,"top",h]);case"bottom-left":return l(["bottom",u,"bottom",d,"bottom",f,"left",d,"left",f,"right",f,"right",d,"top",p,"top",h]);case"left":if(s<=r)return l(["left",u,"left",d,"left",f,"top",d,"top",f,"bottom",f,"bottom",d,"right",f,"right",d]);return l(["left",u,"left",d,"left",f,"bottom",d,"bottom",f,"top",f,"top",d,"right",f,"right",d]);case"left-top":return l(["left",u,"left",d,"left",f,"top",d,"top",f,"bottom",f,"bottom",d,"right",f,"right",d]);case"left-bottom":return l(["left",u,"left",d,"left",f,"bottom",d,"bottom",f,"top",f,"top",d,"right",f,"right",d]);case"right":if(s<=r)return l(["right",u,"right",d,"right",f,"top",d,"top",f,"bottom",f,"bottom",d,"left",f,"left",d]);return l(["right",u,"right",d,"right",f,"bottom",d,"bottom",f,"top",f,"top",d,"left",f,"left",d]);case"right-top":return l(["right",u,"right",d,"right",f,"top",d,"top",f,"bottom",f,"bottom",d,"left",f,"left",d]);case"right-bottom":return l(["right",u,"right",d,"right",f,"bottom",d,"bottom",f,"top",f,"top",d,"left",f,"left",d])}}var y={align:function t(n,i,r){r=r||{position:"right",collision:"none"};r.position=r.position||"right";r.collision=r.collision||"none";if(n&&i){var o=a(e(window)),l=a(n),d=a(i),f=g(r),b=s(l,d,r.position),y;y=function e(t){var n=s(l,d,u(r.position)),i=c(r.position,t,o),a=c(u(r.position),n,o);return a<i};if(f.flipPrimary&&c(r.position,b,o)>0&&y(b)){b=s(l,d,u(r.position));r.position=u(r.position)}f.fitPrimary&&(b=m(b,[r.position],o));f.fitSecondary&&(b=m(b,h(v(p(r.position))),o));r.limits&&b.y<r.limits.top&&(b.y=r.limits.top);n.offset({top:b.y,left:b.x})}return r.position},alignToCoordinate:function t(n,i,r,o,a){l(o);var s,c;o=o||"top";s=function e(t,i,r){var o=i,a=r;switch(t){case"topRight":a=r-n.outerHeight();break;case"top":o=i-n.outerWidth()/2;a=r-n.outerHeight();break;case"topLeft":o=i-n.outerWidth();a=r-n.outerHeight();break;case"right":case"centerRight":a=r-n.outerHeight()/2;break;case"center":o=i-n.outerWidth()/2;a=r-n.outerHeight()/2;break;case"left":case"centerLeft":o=i-n.outerWidth();a=r-n.outerHeight()/2;break;case"bottom":o=i-n.outerWidth()/2;break;case"bottomLeft":o=i-n.outerWidth();break;case"bottomRight":o=i;a=r;break}return{x:o,y:a}};c=s(o,i,r);var u,d={},f={},p,h,v;u=e(window);p=10;f.x=u.outerWidth()-n.outerWidth()-p;d.x=p;f.y=u.outerHeight()-n.outerHeight()-p;d.y=p;var g=function e(t,n){return n[t]>f[t]?n[t]-f[t]:n[t]<d[t]?d[t]-n[t]:0};if(a){h=g("x",c);v=g("y",c);var m=s(a,i,r);if(h>g("x",m)||v>g("y",m)){c=m;o=a}}c.x=Math.max(d.x,Math.min(f.x,c.x));c.y=Math.max(d.y,Math.min(f.y,c.y));n.offset({left:c.x,top:c.y});return o},alignToBestCoordinate:function t(n,i,r,o,s,c,u){var d=e(window);var f=a(d);l(r[0]);i=i instanceof Array?i:[i];var p=i[0].x-f.x,h=i[0].y-f.y;n.offset({left:0,top:0});n.width("auto");n.height("auto");var v=d.outerWidth(),g=d.outerHeight(),m=n.outerWidth(),y=n.outerHeight();var x={},S={};u=void 0===u?5:u;var w=(void 0===c?5:c)+u;S.x=v-m-w;x.x=w;S.y=g-y-w;x.y=w;if(v<m+2*w){m=v-2*w;n.width(m);S.x=x.x}if(g<y+2*w){y=g-2*w;n.height(y);S.y=x.y}r=r||["top"];var q=function e(t,n,i){var r=n,o=i;switch(t){case"topRight":o=i-y;break;case"top":r=n-m/2;o=i-y;break;case"topLeft":r=n-m;o=i-y;break;case"right":case"centerRight":o=i-y/2;break;case"center":r=n-m/2;o=i-y/2;break;case"left":case"centerLeft":r=n-m;o=i-y/2;break;case"bottom":r=n-m/2;break;case"bottomLeft":r=n-m;break;case"bottomRight":r=n;o=i;break}return{x:r,y:o}};var C=function e(t,n){return n[t]>S[t]?n[t]-S[t]:n[t]<x[t]?n[t]-x[t]:0};var _,I,E=p,D=h,A,T,O,k,L,P,M,N,R;if(s){T=o.shape.cx+o.targetToPageTranslation.x-f.x;O=o.shape.cy+o.targetToPageTranslation.y-f.y;k=o.shape.innerRadius;L=o.shape.radius;P=0;if(k>0){P=k/L;T+=P*(p-T);O+=P*(h-O)}}R=b(r,i,s,T,O,P);var F=function e(){for(_=0;_<R.length;_++){I=R[_].align;E=R[_].x-f.x;D=R[_].y-f.y;A=q(I,E,D);M=C("x",A);N=C("y",A);if(0!==M||0!==N)if(0!==N||"top"!==I&&"bottom"!==I){if(0===M&&("left"===I||"right"===I)){A.y-=N;N=0}}else{A.x-=M;M=0}if(0===M&&0===N)return}if(0!==M||0!==N){I=R[0].align;E=R[0].x-f.x;D=R[0].y-f.y;A=q(I,E,D);M=C("x",A);N=C("y",A);A.x-=M;A.y-=N}};F();A&&n.offset({left:A.x+f.x,top:A.y+f.y});return{position:I,x:E+f.x,y:D+f.y}}};y.getScrolledRect=a;return y}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(91),n(49)],r=function(e,t){var n=function e(){return t.getFlag("AOSHARE")};var i={alphabetical:0,publishedDate:1};function r(e,t){return e.qData.rank-t.qData.rank}function o(e,t,n){t.aoItems.init(t.AppOverviewState);if(e.is.sheet){e.translations.navigatorHeader="Common.Sheets";n(e,"sheet")&&t.aoItems.initSheet(e,t.commonFunctions.sortArrayByRank)}else if(e.is.story){e.translations.navigatorHeader="Common.Stories";n(e,"story")&&t.aoItems.initStories(e,t.commonFunctions.sortArrayByRank)}else e.is.bookmark&&(e.translations.navigatorHeader="Common.Bookmarks")}function a(e,t){var n=false;"sheet"===t?n=!e.approvedSheets.length&&!e.privateSheets.length:"story"===t&&(n=!e.approvedStories.length&&!e.privateStories.length);return n}function s(t){var i=n();var r={sheets:i?"AppOverview.Content.PublicSheets":"AppOverview.Content.ApprovedSheets",stories:i?"AppOverview.Content.PublicStories":"AppOverview.Content.ApprovedStories"};t.translations.addNew=t.is.sheet?"AppOverview.Toolbar.CreateNewSheet":"AppOverview.Toolbar.CreateNewStory";t.translations.navigatorHeader=t.is.sheet?"Common.Sheets":"Common.Stories";t.translations.approvedHeader=e.get(t.is.sheet?r.sheets:r.stories);t.translations.myWorkHeader=e.get(t.is.sheet?"AppOverview.Content.MySheets":"AppOverview.Content.MyStories");t.translations.myPublishedHeader=e.get(t.is.sheet?"AppOverview.Content.MyPublishedSheets":"AppOverview.Content.MyPublishedStories");t.translations.communityHeader=e.get(t.is.sheet?"AppOverview.Content.CommunitySheets":"AppOverview.Content.CommunityStories");t.translations.sharingHelp=e.get(t.is.sheet?"AppOverview.SharingSheet.Help":"AppOverview.SharingStory.Help");t.translations.sharingHelpDesc=e.get(t.is.sheet?"AppOverview.SharingSheet.Help.Description":"AppOverview.SharingStory.Help.Description");t.translations.numberOfItems=function(n){return e.get(t.is.sheet?"Accessibility.SheetSection.NumberOfSheets":"Accessibility.StorySection.NumberOfStories",n)}}function l(e,t){e.shownav=true;e.navigationmode=t.navigationMode;e.hasData=true;e.addingItem=false;e.is={};e.exp={};e.features={sharing:function e(){return n()}};e.funcs={};e.translations={};e.is.smallAppView=false;e.is.appReadOnly=false;e.is.grid=t.viewMode===t.ViewMode.grid;e.is.navigator=false;e.is.smalldevice=false;e.is.sheet="sheet"===t.navigationMode;e.is.story="story"===t.navigationMode;e.is.bookmark="bookmark"===t.navigationMode;s(e);e.exp.readonly=false;e.exp.sections=[];e.exp.isAscending=true;e.exp.hasBookmarks=false;e.exp.canCreateBookmark=false;e.exp.isOpenedByClick=true;e.approvedSheets=[];e.privateSheets=[];e.myPublishedSheets=[];e.communitySheets=[];e.approvedStories=[];e.privateStories=[];e.myPublishedStories=[];e.communityStories=[]}function c(e,t,n){t.AppOverviewState.setAddingItem(false);t.AppOverviewState.setDuplicatingItem(false);e.is.sheet=n===t.AppOverviewState.NavigationMode.sheet;e.is.story=n===t.AppOverviewState.NavigationMode.story;e.is.bookmark=n===t.AppOverviewState.NavigationMode.bookmark;s(e)}function u(t,n){var i=t.sort(function t(n,i){n=n.qData.labelExpression||n.qData.title;i=i.qData.labelExpression||i.qData.title;return n.localeCompare(i,e.language)});if(n)return i.reverse();return i}function d(t,n,i){var r=t.sort(function t(i,r){if(n){i=i.qMeta[n];r=r.qMeta[n]}return i.localeCompare(r,e.language)});if(i)return r.reverse();return r}function f(e,t,n){var i=e.sort(function e(n,i){if(t){var r=new Date(n.qMeta[t]),o=new Date(i.qMeta[t]);return r<o?1:r>o?-1:0}});if(n)return i.reverse();return i}function p(e,t){var n=new Date(e.qMeta.publishTime);var i=new Date(t.qMeta.publishTime);return n<i?1:n>i?-1:0}function h(e,t){return e.qData.rank-t.qData.rank}function v(t){return function(n,i){if(0===t){n=n.qData.labelExpression||n.qData.title;i=i.qData.labelExpression||i.qData.title;return n.localeCompare(i,e.language)}return p(n,i)}}function g(e){var t=void 0===e?{}:e;var n=t.userId?t.userId:null;var i=t.userDirectory?t.userDirectory:null;return{userId:n,userDirectory:i}}function m(e,t){var n=t.hasOwnProperty("userId")&&t.hasOwnProperty("userDirectory");return n&&t.userId===e.userId&&t.userDirectory===e.userDirectory}function b(e){return!n()&&e.qMeta.published&&!e.qMeta.approved}function y(e){return!e.qMeta.published}function x(e){return e.qMeta.published&&(e.qMeta.approved||n())}function S(e){return function(t){var n=g(t.qMeta.owner);return b(t)&&m(e,n)}}function w(e){return function(t){var n=g(t.qMeta.owner);return b(t)&&!m(e,n)}}return{sortArrayByRank:r,setNewAppOverViewMode:o,hasToGet:a,setDefaultScopeVar:l,setNewScopeValOnNavigationChange:c,SortFilterOptions:i,sortAlphabetically:d,sortSheetsAlphabetically:u,sortByPublishedDate:f,sortPublishedTime:p,sortByRank:h,sortCommunity:v,filterPrivate:y,filterApproved:x,filterMyPublishedCommunity:S,filterCommunity:w}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48)],r=function(e,t){t.directive("qvaApplyStyle",function(){return{restrict:"A",link:function t(n,i,r){n.$watch(r.qvaApplyStyle,function t(n){"string"===e.type(n)&&i.attr("style",n)},false)}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={};Object.defineProperties(e,{ENTER_BEFORE:{value:0},ENTER_AFTER:{value:1},ENTER_SWAP:{value:2},TYPEFLAG_PLACEHOLDER:{value:16},TYPEFLAG_LOCKED:{value:32}});return e}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={SPARK:1,XSMALL:3,SMALL:7,MEDIUM:15,FULL:31},t=[[550,450,e.FULL],[400,220,e.MEDIUM],[300,150,e.SMALL],[150,75,e.XSMALL],[0,0,e.SPARK]],n=[[450,e.FULL],[220,e.MEDIUM],[150,e.SMALL],[75,e.XSMALL],[0,e.SPARK]],i=[[550,e.FULL],[400,e.MEDIUM],[300,e.SMALL],[150,e.XSMALL],[0,e.SPARK]],r=t.length;function o(n,i){var o;for(o=0;o<r;++o)if(n>=t[o][0]&&i>=t[o][1])return t[o][2];return e.SPARK}function a(t){var i;for(i=0;i<r;++i)if(t>=n[i][0])return n[i][1];return e.SPARK}function s(t){var n;for(n=0;n<r;++n)if(t>=i[n][0])return i[n][1];return e.SPARK}function l(t){var n=Object.keys(e).filter(function(n){return e[n]===t})[0];return n&&n.toLowerCase()||""}return{LayoutMode:e,getLayoutMode:o,getLayoutModeKey:l,getHorizontalLayoutMode:s,getVerticalLayoutMode:a}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(10),n(48),n(96),n(850),n(851),n(132),n(106),n(97),n(50),n(94),n(202),n(90),n(114),n(113),n(852),n(853),n(363),n(273),n(142),n(95),n(105),n(89),n(167),n(103),n(290),n(274),n(175),n(855),n(257),n(212),n(392),n(240),n(271),n(289),n(276),n(965),n(277)],r=function(e,t,n,i,r,a,s,l,c,u,d,f,p,h,v,g,m,b,y,x,S,w,q,C){var _=b.DEFAULT_STATE_TRANSLATION;var I=b.DEFAULT_STATE_NAME;t.directive("qvSelectionPager",["qvGlobalSelectionsService","$timeout",function(e,n){var i=t.getService("$templateCache");i.put("current-selections-tooltip-template.ng.html",r);return{restrict:"A",priority:1,link:function t(i){var r=i.$watch(function(){return e.isSelectActive(i.app)},function(e){i.$emit("globalSelectionActive",e);n(function(){i.refreshPager(false)})});function o(){i.refreshPager(false)}l.on("end",o);i.$on("$destroy",function(){r();l.off("end",o)})}}}]);var E={template:i,replace:true,restrict:"E",scope:{app:"=",options:"=",expandSmartSearchSuggestedChart:"=?"},link:function e(n,i){var r=t.getService("$timeout"),o=t.getService("qvGlobalSelectionsService"),l=t.getService("qvExploreSelectionsService"),f=t.getService("qvGlobalSearchService"),p=t.getService("qvCaoService"),b=i.parent(),y,w,q;var E=new g(n,c,o,l,f,p);q=new v(n);n.isCaoActive=d.isInInsightMode();n.isExploreSelectionsActive=false;n.nbrSelection=0;n.haveHiddenSelections=false;n.isSmallDevice=c.isSmallDevice;n.cachedPlaceHolders=[];n.isGlobalSearchIndexing=false;n.progressBarOptions={hideText:true};n.setSearchIndexingDone=function(){n.isGlobalSearchIndexing=false};function D(e,t){if(e!==(n.app.enigmaModel.id||"").toUpperCase())return;var i=new Number(t);if(!n.isGlobalSearchIndexing&&i<100){n.indexPercentDone=i;n.isGlobalSearchIndexing=true;T(500)}else if(n.isGlobalSearchIndexing){n.indexPercentDone=i;i<100&&T(500)}else A()}function A(){r.cancel(w);if(y){f.IndexProgressUpdate.unbind(D);y=false}}function T(e){if(!y){f.IndexProgressUpdate.bind(D);y=true}r.cancel(w);w=r(function(){f.requestIndexProgressUpdate(n.app.enigmaModel)},e||0)}function O(){r(function(){n.isSmallDevice=c.isSmallDevice;if(h["SMARTSEARCH_INDEX_CLOSE"])if(n.isSmallDevice){A();n.setSearchIndexingDone()}else!f.isSearchOpen(n.app.enigmaModel)&&f.couldEngineBeIndexing(n.app.enigmaModel)&&T(0);n.isSmallDevice&&n.isCaoActive&&(n.isCaoActive=false)})}function k(){if(!q)return;u.isInAnalysisMode()?q.on():q.off()}function L(){u.inSheetView()&&c.isSmallDevice&&f.openGlobalSearch(n.app.enigmaModel,b);k();var e=d.isInInsightMode();e?e&&!n.isCaoActive&&(n.isCaoActive=true):n.isCaoActive=false}k();c.ViewChanged.bind(O);n.$watch("isSmallDevice",function(e){true!==e||u.inObjectView()?f.closeGlobalSearchIfNoQuery(n.app.enigmaModel):f.openGlobalSearch(n.app.enigmaModel,b)});u.StateChanged.bind(L);n.mobileIndicatorTop=false;n.mobileIndicatorShow=false;o.setCsShowCallback(function(e){n.mobileIndicatorShow=e});o.onClose(function(){document.activeElement!==i.find('[tid="toggleCaoButton"]')[0]&&document.activeElement!==i.find('[tid="currentSelections.toggleExploreSelection"]')[0]&&i.find('[tid="currentSelections.toggleGlobalSelections"]').focus()});n.$on("globalSelectionActive",function(e,t){n.isGlobalSelectionsActive=t});n.$on("exploreSelectionActive",function(e,t){n.isExploreSelectionsActive=t});function P(e){a.get(e).then(function(e){n.model=e;s(n,"app",R)}).catch(function(e){false});n.$watch(e.isInModalSelection.bind(e),function(e){n.inSelection=e;if(n.inSelection&&n.activeFieldName&&n.activeFieldName.length>0)n.cachedPlaceHolders=n.items.map(function(e){return m.createPlaceHolder({},e.qField,e.qReadableName||e.qField)});else{n.cachedPlaceHolders=[];n.items=n.items.filter(function(e){return!e.isPlaceHolder})}});n.app=e;s(n,"app",R)}var M=[];var N;function R(e){var t=false;var i;if(M.length!==e.qStateNames.length||!M.every(function(t,n){return t===e.qStateNames[n]})){i=[_].concat(e.qStateNames);t=true;M=e.qStateNames.concat()}if(n.model&&(!N||t)){i=[I].concat(e.qStateNames);n.model.getProperties().then(function(e){e.selectionsInStates=i.map(function(e){return{stateName:e,qSelectionObjectDef:{qStateName:e}}});n.model.setProperties(e)})}N=n.model}var F=n.$watch("app",function(e){P(e.enigmaModel);F()});n.$watch(function(){return f.isSearchOpen(n.app.enigmaModel)},function(e){n.isGlobalSearchActive=e;if(h["SMARTSEARCH_INDEX_CLOSE"])if(n.isSmallDevice||e){A();n.isGlobalSearchIndexing=false}else if(f.couldEngineBeIndexing(n.app.enigmaModel)){var t=f.getLastKnownIndexProgress(n.app.enigmaModel);n.isGlobalSearchIndexing=true;n.indexPercentDone=t;T(500)}});n.toggleGlobalSelection=function(e){e.preventDefault();E.toggleGlobalSelection(n.app);n.currentSelectionDisabled=false;n.expandSmartSearchSuggestedChart=false;x.publish(S.Events.PubSub.ExpandSmartSearchSuggestedChart,null);C.trackEvent(C.customEvents.GLOBAL_SELECTIONS_CLICKED,{type:"clicked"})};n.toggleGlobalSearch=function(){E.toggleGlobalSearch(b)};n.toggleExploreSelection=function(){E.toggleExploreSelection(b);n.expandSmartSearchSuggestedChart=false;x.publish(S.Events.PubSub.ExpandSmartSearchSuggestedChart,null);n.currentSelectionDisabled=false};n.toggleCao=function(){n.currentSelectionDisabled=false;E.toggleCao(b)};n.$watch("isCaoActive",function(e){false===e&&p.off()});n.$on("$destroy",function(){c.ViewChanged.unbind(O);f.off();p.off();n.isCaoActive=false;o.off();l.off();n.isExploreSelectionsActive=false;u.StateChanged.unbind(L);o.setCsShowCallback(null);r.cancel(w);f.IndexProgressUpdate.unbind(D);q&&q.delete()})},controller:["$scope","$element","$timeout","qvChartTooltipService","qvGlobalSelectionsService","qvCurrentSelectionsService",function(i,r,a,l,d,h){var v,g=false,b,S,C=t.getService("qvListboxPopoverService"),_=t.getService("qvListboxPopoverServiceMobile"),I=t.getService("qvMultiStatePopoverService");i.items=[];i.disable={clear:true,back:true,forward:true};i.brightCurSel=i.options&&"bright"===i.options.variant;i.hideUndoRedo=i.options&&true===i.options.hideUndoRedo;i.hideSelectionsTool=i.options&&true===i.options.hideSelectionsTool;i.hideSearch=i.options&&true===i.options.hideSearch;i.hideClearSelections=i.options&&true===i.options.hideClearSelections;i.currentSelectionDisabled=false;function E(){d.setCsShow(c.isSmallDevice&&i.items.length>0&&u.view!==u.Views.object)}function D(t){i.currentSelectionDisabled=false;i.disable.clear=0===y.getClearableStates(t.selectionsInStates).length;i.disable.back=0===t.qSelectionObject.qBackCount;i.disable.forward=0===t.qSelectionObject.qForwardCount;var n=m.getAllSelectionsInStates(t);i.haveHiddenSelections=n.some(function(e){return e.qIsHidden});var r=n.filter(function(e){return!e.qIsHidden});r.forEach(function(e){e.translation=h.translate(e);e.screenReaderLabel=h.translatedScreenReaderLabel(e);e.name=e.qReadableName||e.qField;e.displayStateName=m.getDisplayStateName(e.stateName);e.currentSelectionDisabled=i.currentSelectionDisabled});i.nbrSelections=r.length;d.setSelectionCount(r.length,i.app);E();var o=m.groupSelectionsByField(r);var s=o.filter(function(e){return!e.isSingleState});s.forEach(function(e){e.translation=h.translate(e);e.screenReaderLabel=h.translatedScreenReaderLabel(e)});o=o.sort(y.sortSelections);if(i.cachedPlaceHolders.length>0&&i.activeFieldName&&i.activeFieldName.length>0){i.cachedPlaceHolders.forEach(function(e){m.createPlaceHolder(e)});r.forEach(function(e){i.cachedPlaceHolders.forEach(function(t,n){e.qField===t.qField&&(i.cachedPlaceHolders[n]=f.extend(true,{},e))})});r=i.cachedPlaceHolders}if(i.multiPopover){var l=m.getIndexByKey(o,"name",i.multiPopover.fieldName);var c=m.getIndexByKey(i.items,"name",i.multiPopover.fieldName);var u=l>-1;if(u){var p=o.splice(l,1)[0];o.splice(c,0,p);var v=m.getAllStatesFromSelections(o,i.multiPopover.fieldName);if(v.length<=1&&i.activeFieldName.length){e.element('.item[data-csid="'+i.activeFieldName+'"]').focus();i.multiPopover.close()}}else i.multiPopover.close()}i.items=o;E();a(function(){i.$broadcast("refreshPager")})}s(i,"model",function(){S&&S.dispose();S=i.model.layoutSubscribe(D)});i.$watch(u.inObjectView,E);i.$watch("isSmallDevice",E);i.clear=function(e,t,n){var r=t?[t]:m.getAllStatesFromSelections(i.items);i.$parent.itemSelected&&(i.$parent.itemSelected=false);n&&n.stopPropagation();var o=r.map(function(t){return i.model.clearField(e,t)});return w.all(o)};i.clearAllFields=function(){return i.model.clearAll()};i.back=function(){return i.model.back()};i.forward=function(){return i.model.forward()};function A(t){var n=e.element(t).next("li");if(e.element(t).parent().find("li").length<=1)return null;return e.element(t).parent().find("li").length>1&&n.length>0?n:null}function T(t){var n=e.element(t).prev("li");if(e.element(t).parent().find("li").length<=1)return null;return n.length>0?n:null}function O(t,n){var r;var o=t.which;o=t.shiftKey&&q.TAB===o?"SHIFT_TAB":o;var s=document.activeElement&&"qv-multi-state-popover-btn-clear"===e.element(document.activeElement).attr("tid");var l=".item-multi-state[data-csid="+i.multiPopover.fieldName+"]";switch(o){case q.ESCAPE:i.multiPopover.close();r=e.element(l);break;case q.DELETE:r=A(t.target)||T(t.target);i.clear(n.qField,n.stateName);break;case q.SPACE:case q.ENTER:a(function(){t.target.click()});break;case q.ARROW_RIGHT:case q.ARROW_DOWN:case q.TAB:if(s)r=e.element('[tid="qv-multi-state-popover"] li.item:first');else{r=A(t.target);if(null===r&&o===q.TAB){i.multiPopover.close();r=e.element(l)}}break;case q.ARROW_LEFT:case q.ARROW_UP:case"SHIFT_TAB":if(s){r=e.element(l);i.multiPopover.close()}else r=T(t.target);break}if(r){r.focus();t.preventDefault()}}i.showPopover=function(t){var n=e.element(t.target).closest(".item"),r=n.scope().item.qField,o=n.scope().item.isPlaceHolder,s={qvaOutsideIgnoreFor:"currentSelectionsItems",$alignToElement:n,showLock:true,direction:p.direction};if(i.isClearSelectionIcon(t.target)){if(i.activeFieldName){c.isSmallDevice?C.close():_.close();i.activeFieldName=""}return}if(!n.hasClass("item-multi-state")&&(r===i.activeFieldName||o)){c.isSmallDevice?C.close():_.close();i.activeFieldName="";return}a(function(){i.closeTooltip()},100);i.activeFieldName=r;var l={listboxPopoverService:C,listboxPopoverServiceMobile:_,$timeout:a};var u=m.getAllStatesFromSelections(i.items,r);if(u.length>1){if(i.multiPopover)return;var d=function e(){return m.getMultiPopoverItems(i.items,r)};i.multiPopover=m.openMultiStatePopover(I,d,n[0],i.brightCurSel,{onClose:function e(){i.multiPopover=null;i.activeFieldName=""},clear:i.clear,click:function t(n){var r=e.element(n.target).closest(".item");var o=r.scope().item.qField;var a=r.scope().item.displayStateName;i.multiPopover.close();i.closeTooltip();i.onCloseFocusSelector='.item[data-csid="'+o+'"]';m.openListboxPopover(m.activatePopover,i,c.isSmallDevice,a,o,s,l)},openTooltip:i.openTooltip,closeTooltip:i.closeTooltip,direction:p.direction,handleKeyDown:O});i.multiPopover.fieldName=r}else m.openListboxPopover(m.activatePopover,i,c.isSmallDevice,u[0],r,s,l)};i.openTooltip=function(e,t){if(i.isClearSelectionIcon(e.target)){i.closeTooltip();return}if(g||n.utils.touch)return;var r=i.multiPopover&&i.multiPopover.fieldName===t.qField;if(t.states&&r)return;i.cancelTooltip();v=a(function(){var n=t.qStateCounts,i="object"===o(n),a=i?" ("+(n.qSelected+n.qSelectedExcluded+n.qLocked+n.qLockedExcluded)+"/"+t.qTotal+")":"";var s=t.states||!r&&"$"===t.stateName?t.translation:[m.getDisplayStateName(t.stateName),": ",t.translation].join("");g=true;l.open({content:[{header:(t.qReadableName||t.qField)+a,rows:[{content:s}]}],position:{x:e.clientX,y:e.clientY},alwaysOnTop:true,direction:"bottom",template:"current-selections-tooltip-template.ng.html"})},500)};i.closeTooltip=function(){g=false;i.cancelTooltip();l.close()};i.cancelTooltip=function(){a.cancel(v)};i.isClearSelectionIcon=function(t){return e.element(t).closest(".remove").is(".remove")};i.handleKeyDown=function(t,n){var o;var a=t.which;a=t.shiftKey&&q.TAB===a?"SHIFT_TAB":a;switch(t.which){case q.DELETE:o=i.items&&i.items.length>1?A(t.target):r.find('[data-tid="current-selections-back"]');i.clear(n.qField);break;case q.ESCAPE:if(i.multiPopover){i.multiPopover.close();o=e.element('.item[data-csid="'+i.multiPopover.fieldName+'"]')}break}if(n.isSingleState)switch(t.which){case q.SPACE:case q.ENTER:case q.ARROW_DOWN:i.showPopover(t);break}else switch(a){case q.SPACE:case q.ENTER:i.multiPopover?i.multiPopover.close():i.showPopover(t);o=e.element('.item[data-csid="'+i.multiPopover.fieldName+'"]');break;case q.ARROW_DOWN:i.multiPopover||i.showPopover(t);o=e.element('.item[data-csid="'+i.multiPopover.fieldName+'"]');break;case q.TAB:if(i.multiPopover){o=e.element('[tid="qv-multi-state-popover-btn-clear"]');t.preventDefault()}break;case"SHIFT_TAB":i.multiPopover&&i.multiPopover.close();break}o&&o.focus()};function k(e,n){i.items.forEach(function(e){if(-1!==n[0].indexOf(e.qField)){n[1]?e.feedbackActive=false:e.feedbackActive=true;t.$apply(i)}})}b=t.$rootScope.$on("locked-feedback",k);var L=function e(){var n=t.getService("qvExploreSelectionsService");n.off();i.isExploreSelectionsActive=false;i.currentSelectionDisabled=false};x.subscribe("selection/insights/close",L);x.subscribe("cao/insights/close",function(){i.isCaoActive=false});x.subscribe("selections/insights/details/close",function(){i.currentSelectionDisabled=false});x.subscribe("selections/insights/details/open",function(){i.currentSelectionDisabled=true});i.$on("$destroy",function(){b();S&&S.dispose();x.unsubscribe("cao/insights/close");x.unsubscribe("selection/insights/close",L);x.unsubscribe("selections/insights/details/close");x.unsubscribe("selections/insights/details/open")})}]};t.directive("qvStageCurrentSelections",function(){return E});return E}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(197)],r=function(e){var t=e.get("deviceType",{value:"auto"}).value;return{deviceType:t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(94),n(90),n(181),n(50)],r=function(e,t,n,i){var r=47;var o=10;var a=54;return{objIndex:function e(t,i){var r,o;var a=-1;for(r=0;r<t.cells.length;++r){o=t.cells[r];if(n.compareBounds(o.bounds,i.bounds))return r;o.col===i.col&&o.row===i.row&&(a=r)}return a},getObject:function e(t,n,i){var r=this.objIndex(t,n);if(-1===r){if(i)return null;throw new Error("invalid pos")}return t.cells[r]},moveObject:function e(t,i,r){t.col=i.col;t.row=i.row;t.colspan=i.colspan;t.rowspan=i.rowspan;t.bounds=i.bounds?i.bounds:n.getBounds(i,r.columns,r.rows)},setObject:function e(t,n,i,r){var o=this.getObject(t,n,true);var a=o?o.name:null;if(o){o.name=i;o.type=r}else t.cells.push({name:i,type:r,col:n.col,row:n.row,colspan:n.colspan,rowspan:n.rowspan,bounds:n.bounds});return a},splitPos:function e(t,i,r,o){var a=t.bounds||n.getBounds(t,r,o);var s=n.getAligmentToGrid(a,r,o);var l={col:s.col,row:s.row,colspan:s.colspan,rowspan:s.rowspan};var c={col:s.col,row:s.row,colspan:s.colspan,rowspan:s.rowspan};var u=n.splitBounds(a,i,s.colspan,s.rowspan);l.bounds=u.near;c.bounds=u.far;if("left"===i||"right"===i){var d=Math.ceil(t.colspan/2);l.colspan-=d;c.col+=t.colspan-d;c.colspan=d}if("top"===i||"bottom"===i){var f=Math.ceil(t.rowspan/2);l.rowspan-=f;c.row+=t.rowspan-f;c.rowspan=f}if("top"===i||"left"===i){var p=l;l=c;c=p}return{pos1:l,pos2:c}},swapObjects:function e(t,i,r){var o=this.getObject(t,i),a=this.getObject(t,r,true);this.moveObject(o,n.alignToGrid(t,r),t);a&&this.moveObject(a,n.alignToGrid(t,i),t)},splitCell:function e(t,i,r){var o=this.getObject(t,i,false);n.alignToGrid(t,o);if(!o||(o.colspan!==i.colspan||o.rowspan!==i.rowspan)&&!n.compareBounds(o.bounds,i.bounds))return false;var a=this.splitPos(o,r,t.columns,t.rows);delete a.pos1.bounds;delete a.pos2.bounds;this.moveObject(o,a.pos1,t);return a.pos2},ifSplit:function e(t,i,r,o){var a=n.getAligmentToGrid(i.pos.bounds,r,o);if(0===a.rowspan||0===a.colspan)return false;if("vertical"===t){if(i.pos.bounds.height>=2/o*100)return true}else if("horizontal"===t&&i.pos.bounds.width>=2/r*100)return true;return false},findCellForId:function e(t,n){return n.filter(function(e){return e.name===t})[0]},addChildrenToObject:function e(n,i){for(var r=0;r<i.length;r++){var o=i[r];o.qInfo.qId=t.generateId();n.qChildren.push({qChildren:[],qProperty:o})}},updatePermissionStyle:function t(n,r){var o=r||i;!n.hasUpdatePermission&&e.isInEditMode()?n.permissionStyle={overflow:"hidden"}:o.isSmallDevice&&n.mobileGrid&&!n.zoomCell?n.permissionStyle={overflow:"auto"}:n.permissionStyle={overflow:"visible"}},getExtendedSheetSize:function e(t,n){var i=n&&t.layoutOptions&&t.layoutOptions.extendable?a:o;return{height:"calc("+t.height+"% - "+i+"px)"}},getCustomSheetSize:function e(t,n){var i=4,a=5,s=t.pxHeight-o-r-i,l=t.pxWidth-o-i,c=n/2-s/2,u=c>a?"calc(50% - "+s/2+"px)":a+"px";return{height:s+"px",width:l+"px",top:u}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i;!(i=function(){return{OFFSET_BETWEEN_TABLE_BOTTOM_AND_UL_BOTTOM:18,MIN_TABLE_RESIZE_WIDTH:150,TABLE_MINIMIZE_HEIGHT:28}}.call(t,n,t,e),void 0!==i&&(e.exports=i))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e="small";var t="LIST";var n={12:"small",15:"medium",18:"large",small:12,medium:15,large:18};var i={width:1280,height:1024};var r={min:{width:300,height:300},max:{width:4e3,height:4e3}};function o(t){e=t}function a(){return e}function s(e){t=e}function l(){return t}function c(e){return n[e]}function u(e){e.pxHeight=e.pxHeight||i.height;var t=e.pxHeight/i.height;return Math.ceil(c(e.gridResolution)*t)}function d(e){e.pxWidth=e.pxWidth||i.width;var t=e.pxWidth/i.width;return Math.ceil(c(e.gridResolution)*t)}function f(e,t){var n=Math.min(r.max.height,e);var i=Math.min(r.max.width,t);n=Math.max(r.min.height,n);i=Math.max(r.min.width,i);return{pxHeight:n,pxWidth:i}}return{setPreferredGridSize:o,getPreferredGridSize:a,setPreferredMobileLayout:s,getPreferredMobileLayout:l,getResolutionFor:c,getCustomRows:u,getCustomCols:d,checkSheetPixelLimits:f}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(92),n(156),n(445),n(332),n(90),n(48),n(498),n(420),n(386),n(669)],r=function(e,t,n,i,r,a,s,l,c){var u;function d(e,t){var i=r.extend(true,{},n,t);i.libraryInfo=e.getLibraryInfo();return i}function f(e){return s.loadExtension(e).then(function(t){return d(e,t)})}a.componentDirective("qvaIncludeObject",{model:"=",ext:"=",options:"="});u=e.extend("ExtensionType",{init:function e(t){var n=t.type;this.type=n;this.path=t.path;this.libraryInfo=i.getLibraryInfo(n);this.components=t.components||[]},getLibraryInfo:function e(){return this.libraryInfo},getIconName:function e(){return this.libraryInfo.icon},getIconChar:function e(){return this.libraryInfo.iconChar||"g"},getIconPath:function e(){return this.libraryInfo.iconPath||"M14.5,9 L13,9 L13,3.3 C13,3.1 12.9,3 12.7,3 L8,3 L8,1.5 C8,0.7 7.3,0 6.5,0 C5.7,0 5,0.7 5,1.5 L5,3 L0.3,3 C0.1,3 0,3.1 0,3.3 L0,9 L1.5,9 C2.3,9 3,9.7 3,10.5 C3,11.3 2.3,12 1.5,12 L0,12 L0,15.7 C0,15.9 0.1,16 0.3,16 L5,16 L5,14.5 C5,13.7 5.7,13 6.5,13 C7.3,13 8,13.7 8,14.5 L8,16 L12.7,16 C12.9,16 13,15.9 13,15.7 L13,12 L14.5,12 C15.3,12 16,11.3 16,10.5 C16,9.7 15.3,9 14.5,9 Z"},getModelCtor:function e(){return f(this).then(function(e){return e.Model})},getInitialProperties:function e(n){var i=this;return f(i).then(function(e){var o=r.extend(true,{qInfo:{qType:i.type},visualization:i.type},e.initialProperties,n);if(e.libraryInfo.isThirdParty){e.libraryInfo.version&&!o.version&&(o.version=e.libraryInfo.version);o.extensionMeta=r.extend(true,{},e.libraryInfo)}return t.mapProperties(e.definition,o,i.type)}).catch(function(){return{qInfo:{qType:i.type},visualization:i.type}})},load:function e(){return f(this).then(function(e){e=r.extend(true,{},e);if(e.View)for(var t in l)if(l.hasOwnProperty(t)&&!o(e.View[t]===l[t]))throw new Error("extension.View property is missing DefaultView "+t);"undefined"===typeof e.View&&(e.View=l);"undefined"===typeof e.controller&&(e.controller=c);return e})},getExtensionType:function e(){return f(this)}});return u}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(89),n(95)],r=function(e,t,i){var r="webkitAnimationEnd oanimationend msAnimationEnd animationend";function o(e,t,n,i){this.app=e;this.model=t;this.toggled=false;this.element=n;this.options=i;this.sourceClass="qv-view-original";this.tableClass="qv-view-data-table"}o.prototype.getSourceElement=function(){var e;e="string"===typeof this.element?document.getElementById(this.element).querySelector(".qv-object-wrapper"):this.element[0]?this.element[0].querySelector(".qv-object-wrapper"):this.element.querySelector(".qv-object-wrapper");return e};o.prototype.show=function(){var i=this;if(this.showIsAnimating)return t.resolve(i.toggled);this.showIsAnimating=true;var o=n(239);return new o(i.app).visualization.create("table",i.model,{totals:{show:false}}).then(function(e){var n=new t;var r;i.options?i.options.onRendered=function(){n.resolve()}:i.options={onRendered:function e(){n.resolve()}};i.sourceElement=i.getSourceElement();var o=i.sourceElement.parentElement;i.qvis=e;i.originalObjectId=i.model.id;i.tableElement=document.createElement("div");i.tableElement.classList.add(i.tableClass);o.insertBefore(i.tableElement,i.sourceElement);r=e.show(i.tableElement,i.options);return t.all([r,n.promise]).then(function(e){i.scope=e[0]})}).then(function(){var n=new t;i.sourceElement.classList.remove("chart-fade-in");i.sourceElement.classList.add("chart-fade-out");e.element(i.sourceElement).on(r,function(){e.element(i.sourceElement).off();i.sourceElement.classList.add(i.sourceClass);i.tableElement.classList.add("table-fade-in");i.toggled=true;i.showIsAnimating=false;n.resolve(i.toggled)});return n.promise})};o.prototype.getObject=function(){if(this.scope)return this.scope.object};o.prototype.hide=function(){var n=this;var o=new t;if(this.hideIsAnimating)return t.resolve(n.toggled);this.hideIsAnimating=true;n.tableElement.classList.remove("table-fade-in");n.tableElement.classList.add("table-fade-out");e.element(n.tableElement).on(r,function(){e.element(n.tableElement).off();n.sourceElement.classList.remove(n.sourceClass);n.sourceElement.classList.remove("chart-fade-out");n.sourceElement.classList.add("chart-fade-in");n.qvis.close();n.tableElement.parentNode.removeChild(n.tableElement);n.toggled=false;n.hideIsAnimating=false;e.element(n.sourceElement).on(r,function(){i.publish("/ui/object/resize."+n.originalObjectId)});o.resolve(n.toggled)});return o.promise};o.prototype.toggle=function(){return this.toggled?this.hide():this.show()};return o}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(93),n(89)],r=function(e,t){function n(n){return n?t.resolve(n.enigmaModel):e.getApp()}var i={};i.create=function(e,t){return n(t).then(function(t){return t.createMasterObject(e)})};i.remove=function(e,t){return n(t).then(function(t){return t.destroyObject(e)})};i.get=function(e,t){return n(t).then(function(t){return t.getObject(e)})};i.getList=function(e){return n(e).then(function(e){return e.getMasterObjectListObject()})};return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(11),n(10),n(48),n(97),n(121),n(191),n(150),n(90),n(127),n(99),n(242)],r=function(e,t,n,i,r,a,s,l,c,u){n.directive("ppSortable",[function(){return{scope:"=",link:function t(n,i,r){n.$watch(r.ppSortable,function(t){if(!t)return;var r;t=l.extend({},{handle:"[pp-sortable-handle]",start:function e(t,n){n.item.data("startPos",n.item.index())},scrollSpeed:u.treatAsDesktop()?25:60,distance:u.treatAsDesktop()?10:0,items:"> :not(.locked)",cancel:".locked",update:function e(i,r){var o=r.item.index(),a=r.item.data("startPos");n.$apply(function(){t.onMove(a,o)})},stop:function e(){u.treatAsDesktop()||i.sortable("option","disabled",true)}},t);r=i.closest(".pp-section");r.length&&(t.containment=r);i.sortable(t);u.treatAsDesktop()||i.sortable("option","disabled",true);n.enableTouchDrag=function(){var t;i.sortable("option","disabled",false);t=e.Event(window.event,{type:"mousedown"});t.which=1;t.pageX=window.event.pageX;t.pageY=window.event.pageY;t.target=window.event.target;e.ui.mouse.prototype._touchStart.call(i.data("ui-sortable"),t)}})}}}]);n.directive("ppSlider",[function(){return{require:"?ngModel",link:function e(i,r,o,a){var s=false;i.$watch(o.ppSlider,function(e){if(!e)return;if(e.range){e=l.extend({},{min:0,max:10,step:1,values:a.$modelValue,stop:function e(t,r){n.$apply(i,function(){a.$setViewValue(r.values)})}},e);s||i.$watchCollection(function(){return a.$modelValue},function(e,n){t.equals(e,n)||r.slider("values",e)})}else{e=e.values?l.extend({},{min:0,max:10,step:1,values:a.$modelValue,stop:function e(t,r){n.$apply(i,function(){a.$setViewValue(r.values)})}},e):l.extend({},{min:0,max:10,step:1,value:a.$modelValue,stop:function e(t,r){n.$apply(i,function(){a.$setViewValue(r.value)})}},e);s||i.$watch(function(){return a.$modelValue},function(e,t){e!==t&&(Array.isArray(e)?r.slider("values",e):r.slider("value",e))})}s&&r.slider("destroy");r.slider(e);s=true})}}}]);n.directive("ppPlaceholder",function(){return{link:function e(t,n,i){function r(){var e=t.$eval(i.ppPlaceholder);var r=t.$eval(i.ppPlaceholderSuppressEqual);r&&"="===e[0]&&(e=e.substr(1));n.attr("placeholder",e)}n.on("focus",function(){n.attr("placeholder","")});n.on("blur",function(){r()});t.$watch(i.ppPlaceholder,function(){r()})}}});n.directive("ppHeaderWithSwitch",function(){return{scope:{definition:"=",data:"=",args:"="}}});n.directive("ppAccordion",function(){return{template:"<div ng-transclude></div>",transclude:true,scope:{ppAccordion:"=",definition:"=",args:"="},controller:["$scope","$element","$timeout",function(t,n,r){var o=t.args.cache;var a=null;var s="accordion_path";t.definition.cacheKey&&(s=s+"_"+t.definition.cacheKey);function l(){a=r(function(){n.accordion("refresh");a=null})}function c(e){var n=-1;e=e.split(".")[0];Object.keys(t.definition.items||{}).filter(function(e){var n=t.definition.items[e];return false!==n.show}).forEach(function(t,i){if(t===e){n=i;return false}});return n}this.loadit=function(r){var a=o.get(s),d=void 0!==t.definition.defaultActiveTabIndex?t.definition.defaultActiveTabIndex:-1;a&&(d=c(a));if(r===t.ppAccordion.length-1){n.accordion({header:".pp-section-header",active:d,heightStyle:"fill",animate:!!u.treatAsDesktop()&&"swing",activate:function n(i,r){var a=e(r.newPanel).attr("x-path");o.put(s,a);t.$broadcast("ppAccordionNewPath",a)}});i.on("end",l)}};t.$on("pp-open-path",function(e,t){var i=c(t);i>=0&&n.accordion("option","active",i)});t.$on("$destroy",function(){if(a){r.cancel(a);a=null}i.off("end",l)})}]}});n.directive("ppAccordionItem",function(){return{require:"^ppAccordion",link:function e(t,n,i,r){r.loadit(t.$index)}}});function d(e){if("ValueExpr"===e||"ValueExpression"===e)return a.Modes.NumberOrExpression;return a.Modes.Expression}n.directive("ppInputValidator",["$parse",function(e){return{require:"ngModel",link:function t(n,i,o,s){var c=null,u=n.definition,f=o.expressionType;function p(e,t){if(u&&"function"===typeof u.isExpression)return u.isExpression(e);if(void 0===e)return false;if("always"===u.expression)return true;switch(t){case"StringExpression":return 0===e.indexOf("=");case"ValueExpression":return"string"===typeof e&&0===e.indexOf("=");case"StringExpr":return 0===e.indexOf("=");case"ValueExpr":return true;case"dimension":return true;case"measure":return true;default:return false}}function h(t){o.ppValidationOnResult?e(o.ppValidationOnResult)(n,{isValid:t}):n.invalid=!t}function v(e){h(e.valid)}if(f){var g=n.args?n.args.app:n.app;c=new a.ExpressionValidator(g,d(f));c.Update.bind(v)}function m(e){if("measure"===f)if(""===e)h(true);else{var t=n.args?n.args.handler.getLabels():[];c.validate(e,t)}else if("dimension"===f)if(""===e)h(false);else{e&&"="!==e[0]&&(e="="+l.escapeField(e));c.validate(e)}else c.validate(e)}function b(e){p(e,f)?m(e):h(r.validateType(e,u,n.data,n.args))}n.$on("datachanged",function(){b(s.$modelValue)});n.$on("pp-revalidate",function(){b(s.$modelValue)});n.$watch(function(){return s.$modelValue},function(e){b(e)});n.$on("$destroy",function(){c&&c.Update.unbind(v)})}}}]);function f(e){e=e||"";return"="===e[0]?e:"="+e}n.directive("ppExpressionEditor",["$parse","$timeout",function(n,i){return{link:function r(a,u,p){function h(e,t){if(void 0===e)return false;switch(t){case"StringExpression":return"object"===o(e);case"ValueExpression":return"object"===o(e);case"StringExpr":return"object"===o(e)&&0===e.qv.indexOf("=");case"ValueExpr":return"object"===o(e);case"dimension":return true;case"measure":return true;default:return false}}function v(e){return"'"!==e[0]&&"'"!==e[e.length-1]&&-1===e.indexOf("(")&&-1===e.indexOf(")")&&!l.isNumeric(e)}function g(){var e=n(p.ppExpressionEditor)(a),i=p.expressionType,r=d(i),c=e,u=[];var g=h(e,i);"object"===o(e)&&("StringExpression"===i?e=f(e.qStringExpression.qExpr):"ValueExpression"===i?e=f(e.qValueExpression.qExpr):"StringExpr"===i?e=e.qv:"ValueExpr"===i&&(e=e.qv));if("dimension"===i&&e.length)"="!==e[0]&&(e="="+l.escapeField(e));else if("measure"===i)u=a.args?a.args.handler.getLabels():[];else if(!g&&("StringExpr"===i||"StringExpression"===i)){"StringExpr"===i&&e.qv&&(e=e.qv);e&&v(e)&&(e="='"+e.replace(/'/g,"''")+"'")}s.show({expr:e,title:e?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title",allowEmpty:true,mode:r,labels:u,app:a.args?a.args.app:a.app,stateName:a.args&&a.args.layout?a.args.layout.qStateName:void 0}).then(function(e){if("ValueExpression"===i&&e.length)e={qValueExpression:{qExpr:e}};else if("StringExpression"===i&&e.length)e={qStringExpression:{qExpr:e}};else if("ValueExpr"===i)e={qv:e};else if("StringExpr"===i){"="!==e[0]&&(e="="+e);e={qv:e}}else"dimension"===i&&e.length&&"="!==e[0]&&(e="="+e);if(p.ppExpressionEditorOnApply)n(p.ppExpressionEditorOnApply)(a,{value:e});else if(!t.equals(c,e)){a.value=e;a.change()}},function(){})}u.on("keypress.pp-expression",function(t){13!==t.which&&32!==t.which||e(t.target).trigger("qv-activate")});u.on("qv-activate.pp-expression",function(){var t=null,r;if(p.editorDisabled){t=n(p.editorDisabled)(a);if(t)return}if(c.isInput(document.activeElement)){r=e(document.activeElement);r.on("blur.pp-expression",function(){i(function(){g()});r.off("blur.pp-expression")});r.blur()}else g()});a.$on("$destroy",function(){u.off(".pp-expression")})}}}]);n.directive("ppScrollableAutoContent",function(){var t=".property-content";return{link:function n(i){i.$watch(function(){return i.isAutoChart},function(e){r(e)});function r(n){var i=e(t);i.length&&i.css({"overflow-y":n?"auto":"hidden"})}i.$on("$destroy",function(){r(false)})}}});n.directive("ppDiDraggableHover",function(){var e=".pp-nm-di__header",t="hovered";return{link:function n(i,r){var o=r.closest(e);if(!o.length)return;r.hover(function(){o.addClass(t)},function(){o.removeClass(t)})}}});n.componentDirective("includePpComponent",{definition:"=",data:"=",args:"="});return{}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){var t=/^[^\\/:*\t?"<>|]+$/,n=true;e.length&&(n=t.test(e));return n}function t(e){return 0===e.length||0===e.replace(/\n|\t|\s|\u200B|\uFEFF|\xA0/g,"").length}return{allowedChars:e,emptyTitle:t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(89),n(91)],r=function(e,t,n){return{show:function i(r){var o=new t;e.getService("qvConfirmDialog").show({title:r.header?n.get(r.header):null,message:n.get(r.text),icon:void 0!==r.icon?r.icon:"cogwheel",okLabel:r.confirm?n.get(r.confirm):null}).closed.then(function(e){e?o.resolve():o.reject()});return o.promise}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(91),n(359),n(102)],r=function(e,t,n,i){var r=[],o={},a="";var s=[{id:"chart",name:"Widget.Type.chart",icon:"line-chart"},{id:"table",name:"Widget.Type.table",icon:"table"},{id:"kpi",name:"Widget.Type.kpi",icon:"kpi"},{id:"navigation",name:"Widget.Type.navigation",icon:"compass"},{id:"other",name:"Widget.Type.other"}];function l(e){var t=null;r.forEach(function(n,i){e.id===n.id&&(t=i)});null===t?r.push(e):r[t]=e;o[e.id]=e}var c=function e(t,n,i,r,o,a,s,l,c){this._version=0;a||(a={});Object.defineProperties(this,{libid:{value:t},id:{value:n},name:{value:i,writable:true},description:{value:r,writable:true},author:{value:o,writable:true},meta:{value:a,writable:true},dummy:{value:true===c?"true":null},html:{get:function e(){return this._html},set:function e(t){this._html=t;this._version++}},css:{get:function e(){return this._css},set:function e(t){this._css=t;this._version++}},properties:{value:s,writable:true},dependencies:{value:l,writable:true},version:{get:function e(){return this._version}},isLoaded:{get:function e(){return void 0!==this._html}}})};c.getIcon=function(e){var t;s.forEach(function(n){n.id===e&&n.icon&&(t=n.icon)});return t||"widget"};c.prototype.load=function(e){this.loadDfd&&!e||(this.loadDfd=n.loadWidget(this));return this.loadDfd};c.prototype.save=function(){var e=this;return n.saveTemplate(this).then(function(){c.Updated.emit(r);return e})};c.prototype.copy=function(e){return c.add({libid:e.libid||this.libid,id:e.id||this.id,name:e.name||this.name,description:e.description||""===e.description?e.description:this.description,author:e.author||this.author,meta:e.meta||this.meta,html:e.html||this.html,css:e.css||this.css,properties:e.properties||this.properties})};c.prototype.delete=function(){var e=n.deleteTemplate(this),t=this;r.forEach(function(e,n){e.id===t.id&&r.splice(n,1)});o&&o[t.id]&&delete o[t.id];e.then(function(){c.Updated.emit(r)});return e};c.prototype.move=function(e){var t=this;var i=this.copy({libid:e});return i.save().then(function(){return t.delete().then(function(){return n.reloadCachedLibraries().then(function(){return i})})})};c.getTemplateListFromLibrary=function(t){var i=[];var o=new e;r.length=0;n.getWidgetListFromLibrary(t).then(function(t){t.forEach(function(e){i.push(c.get(e.id,true,e.libid))});e.all(i).then(function(){o.resolve(r)})});return o.promise};c.getTemplateList=function(t){var i=[];if(!a||t){a=new e;n.getWidgetList(t).then(function(t){t.forEach(function(e){i.push(c.get(e.id,true,e.libid))});e.all(i).then(function(){a.resolve(r)})})}return a.promise};c.getLoaded=function(e){return o[e]};c.resetWidgetsProperties=function(e){o[e].propertiesObj&&o[e].propertiesObj.lastSavedProperties&&(o[e].properties=o[e].propertiesObj.lastSavedProperties)};c.get=function(i,r,a){if(i.indexOf("/")>-1){var s=i.split("/");a=s[0];i=s[1]}var u=new e;if(o[i]){var d=o[i];d.isLoaded||r?u.resolve(d):d.load().then(function(){u.resolve(d)},function(e){u.reject(e)})}else{if(!a){var f=n.getLibForId(i);a=f?f.id:void 0}a?n.getTemplate(a,i).then(function(e){e.properties||(e.properties={});var n=new c(a,i,e.name||t.get("Widget.NoName"),e.description||"",e.author||"",e.meta||{},e.properties,e.dependencies||{});n.lastModified=e.lastModified;l(n);n.isLoaded||r?u.resolve(n):n.load().then(function(){u.resolve(n)},function(e){n.err=e;u.resolve(n)})}).catch(function(){var e=new c(a,i);u.resolve(e)}):u.reject(t.get("Error.NoLibraryForWidget",i))}return u.promise};c.add=function(e){if(!e.id||!e.libid)return false;var t=new c(e.libid,e.id,e.name||"",e.description||"",e.author||"",e.meta,e.properties,e.dependencies||{},e.dummy);t.html=e.html||"";t.css=e.css||"";l(t);n.addTemplate(t);c.Updated.emit(r);return t};i.create(c,"Updated");c.types=s;return c}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(813),n(320),n(360),n(361)],r=function(){}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(96),n(816)],r=function(e,t){var n;function i(t,n,i){return e.Event(t,{pageX:i.pagePoints[0].x,pageY:i.pagePoints[0].y,ctrlKey:n.ctrlKey,metaKey:n.metaKey,shiftKey:n.shiftKey,originalEvent:n,gestureData:i})}t(document.body).tap({options:{preventDefault:false},start:function t(i){n=e(i.target)},end:function e(t,r){var o=i("qv-activate",t,r);0===n.closest(":disabled").length&&n.trigger(o);n=null}});var r=t.Gesture.augment(function(e){this.defaults={precedence:6};this.start=function(e,t){this.binder.start.call(this,e,t)};function t(){e.apply(this,arguments)}return t});t.gestures.add("press",r);t(document.body).press({start:function t(n,r){var o=i("qv-press",n,r);e(n.target).trigger(o)}});e.addOutsideEvent("qv-press","qv-outside","touchstart","touchend")}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(139),n(125),n(99),n(130),n(845),n(148),n(161),n(91),n(218)],r=function(e,t,n,i,r,o,a,s,l){var c=100;function u(e,n){if(""===n)return e;return e.filter(function(e){if("undefined"===typeof e.value)return false;return t.string(e.value.toLowerCase()).indexOf(t.string(n.toLowerCase()))>-1})}var d={template:o,controller:["$scope",function(t){t.search={term:""};t.isDirectDiscoveryField=a.isDirectDiscoveryField;t.getDirectDiscoveryTypeTranslationKey=a.getTypeTranslationKey;t.autoFocus=i.treatAsDesktop();t.position||(t.position="right");t.onEscape=function(e){if(""!==t.search.term){e.stopPropagation();t.search.term=""}else t.close()};t.onEnter=function(e){if(""!==t.search.term){e.stopPropagation();t.addFieldDimension({value:t.search.term})}else t.close()};t.getFieldDisplayName=function(e){return""===t.search.term?e.label:s.trimAutoCalendarName(e.value)};var o=null;t.$watch("search.term",function(i){function a(){var e=u(o.fields,i);var r=u(o.dimensions,i);var a=u(o.activeDimensions,i);if(r.length+a.length>c){r=n.limit(r,Math.max(c-a.length,0));e=[]}else e.length+r.length+a.length>c&&(e=n.limit(e,Math.max(c-r.length-a.length,0)));t.fields=e;t.dimensions=r;t.activeDimensions=a}o?a():e.all({fields:r.getSortedFields(t.app),dimensions:r.getSortedDimensions(t.app)}).then(function(e){var n=e.fields.map(function(e){var t=e.isDerived&&""===i?e.qName.substring(e.qName.lastIndexOf(".")+1,e.qName.length):e.qName;return{toolTip:e.qName,label:t,value:e.qName,trimmedValue:e.displayName,qTags:e.qTags,isDerived:e.isDerived,isDateField:e.isDateField,isGeoField:e.isGeoField,activeDimensionIndex:-1}});var r=e.dimensions.map(function(e){return{label:e.qData.title,value:e.qData.title,libraryId:e.qInfo.qId,isDrillDown:"H"===e.qData.grouping,activeDimensionIndex:-1}});var s=[];t.activeDimensions&&t.activeDimensions.length&&t.activeDimensions.forEach(function(e,t){var i={};if(e.qLibraryId){r.forEach(function(t){if(t.libraryId===e.qLibraryId){i.label=t.label;i.value=t.value}});i.libraryId=e.libraryId}else n.forEach(function(t){if(t.value===e.qDef.qFieldDefs[0]){i.label=t.label;i.value=t.value}});i.translatedTitle=l.get("properties.colorBy.currentDimension",t+1);i.activeDimensionIndex=t;s.push(i)});o={fields:n,dimensions:r,activeDimensions:s};a()})})}],scope:{alignTo:"=",app:"=",addFieldDimension:"=",addLibraryDimension:"=",qvaOutsideIgnoreFor:"=",close:"=",position:"=",allowExpressionEditor:"@",selectColorByDimIndex:"="}};return d}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(429),n(224),n(430),n(478),n(479),n(480),n(481),n(482)],r=function(e,t,n,i,r,o,a,s,l,c){function u(e,t){e=e.toLowerCase()||"image";t=t.toLowerCase();var u=t+"-"+e;function d(){var e;switch(u){case"sheet-pdf":case"object-pdf":e=s;break;case"sheet-image":case"object-image":e=a;break;case"story-ppt":e=l;break;case"story-pdf":e=c;break;default:e=a}return e}var f={template:d(),controller:["$scope","$timeout",function(t,a){t.exportType=e;t.states=i.getStates();t.state=t.states.IDLE;var s={CurrentSize:"0",BestFitPreserveAspectRatio:"1",BestFitNoPreserveAspectRatio:"2"};t.print={fitCriteria:s.CurrentSize};if(t.input.object){var l=t.input.object.model.id;var c={id:l,model:t.input.object.model,options:{id:l,isVisible:true,isOnGrid:false,isZoomed:false}};t.obj=c}switch(u){case"sheet-pdf":case"object-pdf":case"story-pdf":t.sizes=r.sizes;t.layouts=r.layouts;t.selectedSize=t.sizes[1];t.print.dpi=200;t.selectedLayout=t.layouts[1];t.minDpi=72;t.maxDpi=300;a(function(){t.onPrintLayout(t.selectedLayout)});break;case"sheet-image":case"object-image":t.availableFormats=["Jpeg","Png"];t.print.width=t.input.currentWidth;t.print.height=t.input.currentHeight;t.print.dpi=t.input.currentDpi;t.print.format="Png";t.imageCustomSize=false;break;case"story-ppt":t.availablePptDpi=[96,150,220];t.print.dpi=t.availablePptDpi[2];t.print.currentWidth=t.input.currentWidth;t.print.currentHeight=t.input.currentHeight;t.print.currentDpi=t.input.currentDpi;t.formats=o.formats;t.selectedFormat=t.formats[3];a(function(){t.onPptFormatChange(t.selectedFormat)});break}var d=n.create(t);t.confirm=d.confirm;t.onImageCustomSize=d.onImageCustomSize;t.onSizeChange=d.onSizeChange;t.onPrintLayout=d.onPrintLayout;t.onPptFormatChange=d.onPptFormatChange}]};return f}function d(){var e=document.createElement("div");e.style.width="1in";var t=document.getElementsByTagName("body")[0];t.appendChild(e);var n=document.defaultView.getComputedStyle(e,null).getPropertyValue("width");t.removeChild(e);var i=n&&Math.round(parseFloat(n));i=i||96;return i>300?300:i}function f(e,n,r,o,a,s){var l="Print."+n+".Title";var c=d();var f=u(n,r);var p=t.getService("luiDialog").show({controller:f.controller,template:f.template,input:{title:l,object:e,sourceType:"object",exportType:n,currentWidth:o,currentHeight:a,currentDpi:c}});p.closed.then(function(){i.cancel();s&&s()});return p}function p(n,r,o){var a="Print."+r+".Title";var s;s="story"===o.toLowerCase()?n&&n.inStoryPlayState()?e("#qv-storytelling .qv-story-slide-active"):e("#qv-storytelling .qv-grid-story"):n.model&&n.model.isCustomSize()?e("#grid"):e(".qvt-sheet > .sheet-grid");var l=Math.round(s.width()||960);var c=Math.round(s.height()||720);var f=d();var p=u(r,o);var h=t.getService("luiDialog").show({controller:p.controller,template:p.template,input:{title:a,object:n,exportType:r,currentWidth:l,currentHeight:c,currentDpi:f}});h.closed.then(function(){i.cancel()})}return{showForObject:f,showForGlobalMenu:p,getScreenDpi:d}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(54),n(89),n(91),n(133),n(975),n(280)],r=function(e,t,i,r,o){e.service("odagNavpointService",["$timeout","$delayedModal","odagNavpointServiceUI",function(e,a,s){var l;var c={};var u={SUCCEEDED:"succeeded",FAILED:"failed",VALIDATING:"validating",QUEUED:"queued",LOADING:"loading",CANCELING:"canceling",CANCELED:"canceled"};var d=[u.SUCCEEDED,u.FAILED,u.CANCELED];function f(e,t){s.updateImageOnItemHeader(t);return e.getLoadedLinkInfo(e).then(function(e){if(e.templateApp){t.templateName=e.templateApp.name;t.templateDescription=e.templateApp.description;if(e.templateApp.thumbnail){"/"===e.templateApp.thumbnail.substr(0,1)&&(e.templateApp.thumbnail=e.templateApp.thumbnail.substr(1));t.templateThumbnail=n.p+e.templateApp.thumbnail}s.updateImageOnItemHeader(t)}else{t.invalid=true;t.templateName=r.get("odag.toolbar.navpoint.popup.noTemplate");t.templateDescription=""}})}function p(e){switch(e.state){case u.SUCCEEDED:var t=r.get("odag.toolbar.navpoint.popup.delete.confirmation",[e.name]);var n=new i;a.open({title:r.get("odag.toolbar.navpoint.popup.delete.confirmation.title"),content:t,buttons:[{name:"Common.Cancel",tid:"odag-applist-modal-cancelBtn",callback:function e(){n.resolve()}},{name:"Common.Delete",tid:"odag-applist-modal-deleteBtn",defaultButton:true,callback:function t(){return o.deleteGenApp(e.parentContext.app,e.requestId).then(function(){n.resolve()})}}]});return n.promise;case u.FAILED:return o.requestAction(e.parentContext.app,e.requestId,o.ODAGRequestActionConst.FAIL_ACK,true,true);case u.VALIDATING:case u.QUEUED:case u.LOADING:case u.CANCELING:var s=true;var l=true;if(e.lastLoadedTime){s=false;l=false}return o.requestAction(e.parentContext.app,e.requestId,o.ODAGRequestActionConst.CANCEL,s,l);case u.CANCELED:return o.requestAction(e.parentContext.app,e.requestId,o.ODAGRequestActionConst.CANCEL_ACK,true,true)}}function h(e,t,n){return e.getLoadedLinkInfo(e).then(function(i){return o.reloadApp(e.model.parent.app,i,t,n,e.actualRowEst)})}function v(e,t){return o.getSelections(e,t)}function g(e,t){return s.getSelectedValuesDisplayString(e,t)}function m(e){return e.getLoadedLinkInfo(e).then(function(t){return o.generateApp(e.model.parent.app,e.model.parent.id,t,e.id,e.actualRowEst)})}function b(e){delete c[e.id]}function y(n,r,a,l){if(!a){l=Date.now();c[n.id]=l}return c[n.id]&&l>=c[n.id]?o.getGeneratedAppsForLink(n.model.parent.app,n.model.parent.id,n.data.odagLinkRefID,n.id).then(function(i){i.forEach(function(e){var i=s.createGeneratedAppWrapper(e,n.model.parent);var o=r.map(function(e){return e.requestId}).indexOf(e.id);if(o>-1){var a=r[o];var l=t.chain(i).keys().every(function(e){return t.has(a,e)&&t.isEqual(i[e],a[e])}).value();l||r.splice(o,1,i)}else r.push(i)});for(var o=r.length-1;o>-1;o--){var a=r[o];i.some(function(e){return e.id===a.requestId})||r.splice(o,1)}r.sort(function(e,t){var n=new Date(e.createdDate);var i=new Date(t.createdDate);return i-n});if(r.some(function(e){return e.loading}))return e(function(){y(n,r,true,l)},3e3);delete c[n.id]}):i.resolve()}function x(e){var t=r.get("Common.None");e.range&&(e.range.lowerBound&&e.range.lowerBound===e.range.upperBound?t=e.range.lowerBound:void 0===e.range.lowerBound||e.range.upperBound?void 0===e.range.upperBound||e.range.lowerBound?void 0!==e.range.lowerBound&&void 0!==e.range.upperBound&&(t="["+e.range.lowerBound+" - "+e.range.upperBound+"]"):t="<="+e.range.upperBound:t=">="+e.range.lowerBound);return t}function S(e,t){var n=true;e.range&&(e.range.lowerBound&&e.range.lowerBound===e.range.upperBound?n=e.range.lowerBound===t.length:void 0===e.range.lowerBound||e.range.upperBound?void 0===e.range.upperBound||e.range.lowerBound?void 0!==e.range.lowerBound&&void 0!==e.range.upperBound&&(n=t.length>=e.range.lowerBound&&t.length<=e.range.upperBound):n=t.length<=e.range.upperBound:n=t.length>=e.range.lowerBound);return n}function w(e,t){t.length=0;e.getLoadedLinkInfo(e).then(function(n){o.getConstraintFieldBindingValues(e.model.parent.app,n.bindings).then(function(e){for(var i=0;i<n.bindings.length;i++){var r=e[i];var o={fieldName:n.bindings[i].selectAppParamName,values:r.fieldValues,hasConstraint:!r.noConstraint,constraint:x(n.bindings[i]),bindingPassesConstraint:S(n.bindings[i],r.fieldValues)};t.push(o)}})})}function q(e,t,n){return o.renameGenApp(e,t,n)}function C(e){var t=e.parentContext.app;return o.clearSelections(t).then(function(){var n=[];for(var r=0;r<e.selectionsState.length;r++){var a=e.selectionsState[r];var s=a.selectionAppParamName;var l=a.values;n.push(o.selectFieldValuesForField(t,s,l))}return i.all(n)})}l={ODAG_STATE:u,ODAG_TERMINAL_STATES:d,updateItemHeader:f,loadGeneratedApps:y,stopLoadGeneratedApps:b,deleteGeneratedApp:p,reloadApp:h,getSelections:v,getSelectedValuesDisplayString:g,generateApp:m,renameGenApp:q,applySelections:C,initializeBindings:w};return l}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e=[{resource:"sheet",canCreate:true},{resource:"bookmark",canCreate:true},{resource:"story",canCreate:true},{resource:"searchhistory",canCreate:true},{resource:"dimension",canCreate:true},{resource:"measure",canCreate:true},{resource:"masterobject",canCreate:true},{resource:"snapshot",canCreate:true}];var t=true;function n(e,n){e.length||(e=["update","publish","export","exportdata","changeowner","delete"]);t&&(e=[]);n=n||{};n.update=-1!==e.indexOf("update");n.publish=-1!==e.indexOf("publish");n.export=-1!==e.indexOf("export");n.exportData=-1!==e.indexOf("exportdata");n.changeOwner=-1!==e.indexOf("changeowner");n.remove=-1!==e.indexOf("delete");return n}function i(e,n){n=n||{};for(var i in n)delete n[i];if(t)return n;e.forEach(function(e){e.canCreate&&(n["create"+e.resource[0].toUpperCase()+e.resource.substring(1)]=true)});return n}function r(r,o){var a={};r.permissions||Object.defineProperty(r,"permissions",{configurable:false,enumerable:false,get:function s(){if(r){if(o){t=r.qReadOnly;i(r.create||e,a)}n(r.privileges||r.qMeta&&r.qMeta.privileges||[],a)}return a}});return r}return{mapToLayout:r,parse:n,parseCreate:i}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){!function(t,n){e.exports=n()}("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=166)}([function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";function i(e){var t={};return null!==e&&Object.keys(e).forEach(function(n){e[n].forEach(function(e){t[String(e)]=n})}),t}function r(e,t){if(t=t||{},Object.keys(t).forEach(function(t){if(-1===a.indexOf(t))throw new o('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=i(t.styleAliases||null),-1===s.indexOf(this.kind))throw new o('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var o=n(41),a=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],s=["scalar","sequence","mapping"];e.exports=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var i=n(75)("wks"),r=n(47),o=n(2).Symbol,a="function"==typeof o;(e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))}).store=i},function(e,t,n){var i=n(2),r=n(0),o=n(19),a=n(15),s=n(17),l=function(e,t,n){var c,u,d,f=e&l.F,p=e&l.G,h=e&l.S,v=e&l.P,g=e&l.B,m=e&l.W,b=p?r:r[t]||(r[t]={}),y=b.prototype,x=p?i:h?i[t]:(i[t]||{}).prototype;p&&(n=t);for(c in n)(u=!f&&x&&void 0!==x[c])&&s(b,c)||(d=u?x[c]:n[c],b[c]=p&&"function"!=typeof x[c]?n[c]:g&&u?o(d,i):m&&x[c]==d?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):v&&"function"==typeof d?o(Function.call,d):d,v&&((b.virtual||(b.virtual={}))[c]=d,e&l.R&&y&&!y[c]&&a(y,c,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var i=n(8),r=n(112),o=n(70),a=Object.defineProperty;t.f=n(12)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(5);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var i=n(116),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();e.exports=o},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){e.exports={default:n(264),__esModule:!0}},function(e,t,n){e.exports=!n(16)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){e.exports={default:n(168),__esModule:!0}},function(e,t,n){var i=n(7),r=n(30);e.exports=n(12)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(270),o=i(r),a=n(272),s=i(a),l="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===l(o.default)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":l(e)}},function(e,t,n){var i=n(29);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){function i(e,t){var n=o(e,t);return r(n)?n:void 0}var r=n(184),o=n(189);e.exports=i},function(e,t,n){function i(e){return null==e?void 0===e?l:s:c&&c in Object(e)?o(e):a(e)}var r=n(23),o=n(185),a=n(186),s="[object Null]",l="[object Undefined]",c=r?r.toStringTag:void 0;e.exports=i},function(e,t,n){var i=n(71),r=n(72);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(9),r=i.Symbol;e.exports=r},function(e,t,n){function i(e){return a(e)?r(e):o(e)}var r=n(120),o=n(208),a=n(36);e.exports=i},function(e,t){e.exports={}},function(e,t,n){"use strict";function i(e){return void 0===e||null===e}function r(e){return"object"==typeof e&&null!==e}function o(e){return Array.isArray(e)?e:i(e)?[]:[e]}function a(e,t){var n,i,r,o;if(t)for(o=Object.keys(t),n=0,i=o.length;n<i;n+=1)r=o[n],e[r]=t[r];return e}function s(e,t){var n,i="";for(n=0;n<t;n+=1)i+=e;return i}function l(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e}e.exports.isNothing=i,e.exports.isObject=r,e.exports.toArray=o,e.exports.repeat=s,e.exports.isNegativeZero=l,e.exports.extend=a},function(e,t,n){"use strict";function i(e,t,n){var r=[];return e.include.forEach(function(e){n=i(e,t,n)}),e[t].forEach(function(e){n.forEach(function(t,n){t.tag===e.tag&&t.kind===e.kind&&r.push(n)}),n.push(e)}),n.filter(function(e,t){return-1===r.indexOf(t)})}function r(){function e(e){i[e.kind][e.tag]=i.fallback[e.tag]=e}var t,n,i={scalar:{},sequence:{},mapping:{},fallback:{}};for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(e);return i}function o(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new s("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=i(this,"implicit",[]),this.compiledExplicit=i(this,"explicit",[]),this.compiledTypeMap=r(this.compiledImplicit,this.compiledExplicit)}var a=n(26),s=n(41),l=n(1);o.DEFAULT=null,o.create=function(){var e,t;switch(arguments.length){case 1:e=o.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new s("Wrong number of arguments for Schema.create function")}if(e=a.toArray(e),t=a.toArray(t),!e.every(function(e){return e instanceof o}))throw new s("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every(function(e){return e instanceof l}))throw new s("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new o({include:e,explicit:t})},e.exports=o},function(e,t,n){"use strict";t.__esModule=!0;var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=r.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(114),r=n(76);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=!0},function(e,t,n){var i=n(72);e.exports=function(e){return Object(i(e))}},function(e,t,n){function i(e,t,n,i){var a=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var c=t[s],u=i?i(n[c],e[c],c,n,e):void 0;void 0===u&&(u=e[c]),a?o(n,c,u):r(n,c,u)}return n}var r=n(54),o=n(118);e.exports=i},function(e,t,n){function i(e){return null!=e&&o(e.length)&&!r(e)}var r=n(115),o=n(84);e.exports=i},function(e,t,n){n(254);for(var i=n(2),r=n(15),o=n(25),a=n(3)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var c=s[l],u=i[c],d=u&&u.prototype;d&&!d[a]&&r(d,a,c),o[c]=o.Array}},function(e,t,n){var i=n(7).f,r=n(17),o=n(3)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t,n){"use strict";var i=n(260)(!0);n(135)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){e.exports=n(268)},function(e,t,n){"use strict";function i(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},e.exports=i},function(e,t,n){"use strict";var i=n(27);e.exports=new i({include:[n(149)],implicit:[n(302),n(303)],explicit:[n(304),n(308),n(309),n(310)]})},function(e,t,n){"use strict";(function(e){function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,t,n)}function a(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,n,i):"string"==typeof t?u(e,t,n):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,n,i){return s(t),t<=0?r(e,t):void 0!==n?"string"==typeof i?r(e,t).fill(n,i):r(e,t).fill(n):r(e,t)}function c(e,t){if(s(t),e=r(e,t<0?0:0|h(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function u(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|g(t,n);e=r(e,i);var a=e.write(t,n);return a!==i&&(e=e.slice(0,a)),e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=r(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function f(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=d(e,t),e}function p(e,t){if(o.isBuffer(t)){var n=0|h(t.length);return e=r(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Y(t.length)?r(e,0):d(e,t);if("Buffer"===t.type&&J(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function h(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),o.alloc(+e)}function g(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(i)return z(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return D(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function b(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function y(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=o.from(t,i)),o.isBuffer(t))return 0===t.length?-1:x(e,t,n,i,r);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):x(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function x(e,t,n,i,r){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}var c;if(r){var u=-1;for(c=n;c<s;c++)if(o(e,c)===o(t,-1===u?0:c-u)){if(-1===u&&(u=c),c-u+1===l)return u*a}else-1!==u&&(c-=c-u),u=-1}else for(n+l>s&&(n=s-l),c=n;c>=0;c--){for(var d=!0,f=0;f<l;f++)if(o(e,c+f)!==o(t,f)){d=!1;break}if(d)return c}return-1}function S(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function w(e,t,n,i){return K(z(t,e.length-n),e,n,i)}function q(e,t,n,i){return K(U(t),e,n,i)}function C(e,t,n,i){return q(e,t,n,i)}function _(e,t,n,i){return K(W(t),e,n,i)}function I(e,t,n,i){return K(G(t,e.length-n),e,n,i)}function E(e,t,n){return 0===t&&n===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,n))}function D(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var o=e[r],a=null,s=o>239?4:o>223?3:o>191?2:1;if(r+s<=n){var l,c,u,d;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[r+1],128==(192&l)&&(d=(31&o)<<6|63&l)>127&&(a=d);break;case 3:l=e[r+1],c=e[r+2],128==(192&l)&&128==(192&c)&&(d=(15&o)<<12|(63&l)<<6|63&c)>2047&&(d<55296||d>57343)&&(a=d);break;case 4:l=e[r+1],c=e[r+2],u=e[r+3],128==(192&l)&&128==(192&c)&&128==(192&u)&&(d=(15&o)<<18|(63&l)<<12|(63&c)<<6|63&u)>65535&&d<1114112&&(a=d)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),r+=s}return A(i)}function A(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=Z));return n}function T(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function O(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function k(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=t;o<n;++o)r+=B(e[o]);return r}function L(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function P(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,i,r,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function N(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);r<o;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function R(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);r<o;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function F(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function $(e,t,n,i,r){return r||F(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,i,23,4),n+4}function j(e,t,n,i,r){return r||F(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,i,52,8),n+8}function H(e){if(e=V(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var n,i=e.length,r=null,o=[],a=0;a<i;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function G(e,t){for(var n,i,r,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function W(e){return X.toByteArray(H(e))}function K(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function Y(e){return e!==e}var X=n(305),Q=n(306),J=n(307);t.Buffer=o,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return l(null,e,t,n)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,a=Math.min(n,i);r<a;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!J(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=o.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,r),r+=a.length}return i},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?D(this,0,e):m.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,i,r){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,r>>>=0,this===e)return 0;for(var a=r-i,s=n-t,l=Math.min(a,s),c=this.slice(i,r),u=e.slice(t,n),d=0;d<l;++d)if(c[d]!==u[d]){a=c[d],s=u[d];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},o.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return S(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return q(this,e,t,n);case"latin1":case"binary":return C(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var i;if(o.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=o.prototype;else{var r=t-e;i=new o(r,void 0);for(var a=0;a<r;++a)i[a]=this[a+e]}return i},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},o.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),Q.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),Q.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),Q.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),Q.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[t+r]=255&e;--r>=0&&(o*=256);)this[t+r]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);M(this,e,t,n,r-1,-r)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);M(this,e,t,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return $(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return $(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,a=i-n;if(this===e&&n<t&&t<i)for(r=a-1;r>=0;--r)e[r+t]=this[r+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:z(new o(e,i).toString()),l=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%l]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(80))},function(e,t,n){function i(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}var r=n(60),o=1/0;e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.openapi;return!!t&&(0,x.default)(t,"3")}function o(e){var t=e.swagger;return!!t&&(0,x.default)(t,"2")}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.v2OperationIdCompatibilityMode;return e&&"object"===(void 0===e?"undefined":(0,g.default)(e))?(e.operationId||"").replace(/\s/g,"").length?w(e.operationId):s(t,n,{v2OperationIdCompatibilityMode:r}):null}function s(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).v2OperationIdCompatibilityMode){var n=(t.toLowerCase()+"_"+e).replace(/[\s!@#$%^&*()_+=[{\]};:<>|.\/?,\\'""-]/g,"_");return n=n||e.substring(1)+"_"+t,n.replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return""+S(t)+w(e)}function l(e,t){return S(t)+"-"+e}function c(e,t){return e&&e.paths?u(e,function(e){var n=e.pathName,i=e.method,r=e.operation;if(!r||"object"!==(void 0===r?"undefined":(0,g.default)(r)))return!1;var o=r.operationId;return[a(r,n,i),l(n,i),o].some(function(e){return e&&e===t})}):null}function u(e,t){return d(e,t,!0)||null}function d(e,t,n){if(!e||"object"!==(void 0===e?"undefined":(0,g.default)(e))||!e.paths||"object"!==(0,g.default)(e.paths))return null;var i=e.paths;for(var r in i)for(var o in i[r])if("PARAMETERS"!==o.toUpperCase()){var a=i[r][o];if(a&&"object"===(void 0===a?"undefined":(0,g.default)(a))){var s={spec:e,pathName:r,method:o.toUpperCase(),operation:a},l=t(s);if(n&&l)return s}}}function f(e){var t=e.spec,n=t.paths,i={};if(!n||t.$$normalized)return e;for(var r in n){var o=n[r];if((0,b.default)(o)){var s=o.parameters;for(var l in o)(function(e){var n=o[e];if(!(0,b.default)(n))return"continue";var l=a(n,r,e);if(l){i[l]?i[l].push(n):i[l]=[n];var c=i[l];if(c.length>1)c.forEach(function(e,t){e.__originalOperationId=e.__originalOperationId||e.operationId,e.operationId=""+l+(t+1)});else if(void 0!==n.operationId){var u=c[0];u.__originalOperationId=u.__originalOperationId||n.operationId,u.operationId=l}}if("parameters"!==e){var d=[],f={};for(var p in t)"produces"!==p&&"consumes"!==p&&"security"!==p||(f[p]=t[p],d.push(f));if(s&&(f.parameters=s,d.push(f)),d.length){var v=!0,g=!1,m=void 0;try{for(var y,x=(0,h.default)(d);!(v=(y=x.next()).done);v=!0){var S=y.value;for(var w in S)if(n[w]){if("parameters"===w){var q=!0,C=!1,_=void 0;try{for(var I,E=(0,h.default)(S[w]);!(q=(I=E.next()).done);q=!0)!function(){var e=I.value;n[w].some(function(t){return t.name&&t.name===e.name||t.$ref&&t.$ref===e.$ref||t.$$ref&&t.$$ref===e.$$ref||t===e})||n[w].push(e)}()}catch(e){C=!0,_=e}finally{try{!q&&E.return&&E.return()}finally{if(C)throw _}}}}else n[w]=S[w]}}catch(e){g=!0,m=e}finally{try{!v&&x.return&&x.return()}finally{if(g)throw m}}}}})(l)}}return t.$$normalized=!0,e}Object.defineProperty(t,"__esModule",{value:!0});var p=n(96),h=i(p),v=n(18),g=i(v);t.isOAS3=r,t.isSwagger2=o,t.opId=a,t.idFromPathMethod=s,t.legacyIdFromPathMethod=l,t.getOperationRaw=c,t.findOperation=u,t.eachOperation=d,t.normalizeSwagger=f;var m=n(10),b=i(m),y=n(131),x=i(y),S=function(e){return String.prototype.toLowerCase.call(e)},w=function(e){return e.replace(/[^\w]/gi,"_")}},function(e,t,n){var i=n(73),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var r=n(174),o=n(175),a=n(176),s=n(177),l=n(178);i.prototype.clear=r,i.prototype.delete=o,i.prototype.get=a,i.prototype.has=s,i.prototype.set=l,e.exports=i},function(e,t,n){function i(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}var r=n(51);e.exports=i},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){var i=n(20),r=i(Object,"create");e.exports=r},function(e,t,n){function i(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}var r=n(198);e.exports=i},function(e,t,n){function i(e,t,n){var i=e[t];s.call(e,t)&&o(i,n)&&(void 0!==n||t in e)||r(e,t,n)}var r=n(118),o=n(51),a=Object.prototype,s=a.hasOwnProperty;e.exports=i},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){function n(e,t){var n=typeof e;return!!(t=null==t?i:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}var i=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||i)}var i=Object.prototype;e.exports=n},function(e,t,n){var i=n(219),r=n(79),o=n(220),a=n(221),s=n(222),l=n(21),c=n(117),u=c(i),d=c(r),f=c(o),p=c(a),h=c(s),v=l;(i&&"[object DataView]"!=v(new i(new ArrayBuffer(1)))||r&&"[object Map]"!=v(new r)||o&&"[object Promise]"!=v(o.resolve())||a&&"[object Set]"!=v(new a)||s&&"[object WeakMap]"!=v(new s))&&(v=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,i=n?c(n):"";if(i)switch(i){case u:return"[object DataView]";case d:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=v},function(e,t,n){var i=n(54),r=n(35),o=n(235),a=n(36),s=n(57),l=n(24),c=Object.prototype,u=c.hasOwnProperty,d=o(function(e,t){if(s(t)||a(t))return void r(t,l(t),e);for(var n in t)u.call(t,n)&&i(e,n,t[n])});e.exports=d},function(e,t,n){function i(e){return"symbol"==typeof e||o(e)&&r(e)==a}var r=n(21),o=n(13),a="[object Symbol]";e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return t&&(0===t.indexOf("application/json")||t.indexOf("+json")>0)?JSON.parse(e):E.default.safeLoad(e)}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.loadSpec,o=void 0!==i&&i,s={ok:e.ok,url:e.url||t,status:e.status,statusText:e.statusText,headers:a(e.headers)},l=s.headers["content-type"],c=o||O(l);return(c?e.text:e.blob||e.buffer).call(e).then(function(e){if(s.text=e,s.data=e,c)try{var t=r(e,l);s.body=t,s.obj=t}catch(e){s.parseError=e}return s})}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return"function"==typeof e.forEach?(e.forEach(function(e,n){void 0!==t[n]?(t[n]=Array.isArray(t[n])?t[n]:[t[n]],t[n].push(e)):t[n]=e}),t):t}function s(e,t){return t||"undefined"==typeof navigator||(t=navigator),t&&"ReactNative"===t.product?!(!e||"object"!==(void 0===e?"undefined":(0,S.default)(e))||"string"!=typeof e.uri):"undefined"!=typeof File?e instanceof File:null!==e&&"object"===(void 0===e?"undefined":(0,S.default)(e))&&"function"==typeof e.pipe}function l(e,t){var n=e.collectionFormat,i=e.allowEmptyValue,r="object"===(void 0===e?"undefined":(0,S.default)(e))?e.value:e,o={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};if(void 0===r&&i)return"";if(s(r)||"boolean"==typeof r)return r;var a=encodeURIComponent;return t&&(a=(0,A.default)(r)?function(e){return e}:function(e){return(0,m.default)(e)}),"object"!==(void 0===r?"undefined":(0,S.default)(r))||Array.isArray(r)?Array.isArray(r)?Array.isArray(r)&&!n?r.map(a).join(","):"multi"===n?r.map(a):r.map(a).join(o[n]):a(r):""}function c(e){var t=(0,v.default)(e).reduce(function(t,n){var i=e[n],r=!!i.skipEncoding,o=r?n:encodeURIComponent(n),a=function(e){return e&&"object"===(void 0===e?"undefined":(0,S.default)(e))}(i)&&!Array.isArray(i);return t[o]=l(a?i:{value:i},r),t},{});return _.default.stringify(t,{encode:!1,indices:!1})||""}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,i=void 0===t?"":t,r=e.query,o=e.form;if(o){var a=(0,v.default)(o).some(function(e){return s(o[e].value)}),u=e.headers["content-type"]||e.headers["Content-Type"];if(a||/multipart\/form-data/i.test(u)){var d=n(316);e.body=new d,(0,v.default)(o).forEach(function(t){e.body.append(t,l(o[t],!0))})}else e.body=c(o);delete e.form}if(r){var f=i.split("?"),h=(0,p.default)(f,2),g=h[0],m=h[1],b="";if(m){var y=_.default.parse(m);(0,v.default)(r).forEach(function(e){return delete y[e]}),b=_.default.stringify(y,{encode:!0})}var x=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.filter(function(e){return e}).join("&");return i?"?"+i:""}(b,c(r));e.url=g+x,delete e.query}return e}function d(e,t,n){return n=n||function(e){return e},t=t||function(e){return e},function(i){return"string"==typeof i&&(i={url:i}),T.mergeInQueryOrForm(i),i=t(i),n(e(i))}}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldDownloadAsText=t.self=void 0;var f=n(251),p=i(f),h=n(11),v=i(h),g=n(62),m=i(g),b=n(40),y=i(b),x=n(18),S=i(x),w=n(101),q=i(w);t.serializeRes=o,t.serializeHeaders=a,t.isFile=s,t.encodeFormOrQuery=c,t.mergeInQueryOrForm=u,t.makeHttp=d,n(288);var C=n(289),_=i(C),I=n(148),E=i(I),D=n(315),A=i(D),T=t.self={serializeRes:o,mergeInQueryOrForm:u};t.default=function(){function e(e){return t.apply(this,arguments)}var t=(0,q.default)(y.default.mark(function e(t){var n,i,r,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===(void 0===t?"undefined":(0,S.default)(t))&&(a=t,t=a.url),a.headers=a.headers||{},T.mergeInQueryOrForm(a),!a.requestInterceptor){e.next=10;break}return e.next=6,a.requestInterceptor(a);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0=a;case 9:a=e.t0;case 10:return n=a.headers["content-type"]||a.headers["Content-Type"],/multipart\/form-data/i.test(n)&&(delete a.headers["content-type"],delete a.headers["Content-Type"]),i=void 0,e.prev=13,e.next=16,(a.userFetch||fetch)(a.url,a);case 16:return i=e.sent,e.next=19,T.serializeRes(i,t,a);case 19:if(i=e.sent,!a.responseInterceptor){e.next=27;break}return e.next=23,a.responseInterceptor(i);case 23:if(e.t1=e.sent,e.t1){e.next=26;break}e.t1=i;case 26:i=e.t1;case 27:e.next=37;break;case 29:if(e.prev=29,e.t2=e.catch(13),i){e.next=33;break}throw e.t2;case 33:throw r=new Error(i.statusText),r.statusCode=r.status=i.status,r.responseError=e.t2,r;case 37:if(i.ok){e.next=42;break}throw o=new Error(i.statusText),o.statusCode=o.status=i.status,o.response=i,o;case 42:return e.abrupt("return",i);case 43:case"end":return e.stop()}},e,this,[[13,29]])}));return e}();var O=t.shouldDownloadAsText=function(){return/(json|xml|yaml|text)\b/.test(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},function(e,t,n){e.exports={default:n(267),__esModule:!0}},function(e,t,n){var i=n(47)("meta"),r=n(5),o=n(17),a=n(7).f,s=0,l=Object.isExtensible||function(){return!0},c=!n(16)(function(){return l(Object.preventExtensions({}))}),u=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[i].i},f=function(e,t){if(!o(e,i)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[i].w},p=function(e){return c&&h.NEED&&l(e)&&!o(e,i)&&u(e),e},h=e.exports={KEY:i,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},function(e,t,n){var i=n(19),r=n(139),o=n(140),a=n(8),s=n(46),l=n(97),c={},u={},t=e.exports=function(e,t,n,d,f){var p,h,v,g,m=f?function(){return e}:l(e),b=i(n,d,t?2:1),y=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(o(m)){for(p=s(e.length);p>y;y++)if((g=t?b(a(h=e[y])[0],h[1]):b(e[y]))===c||g===u)return g}else for(v=m.call(e);!(h=v.next()).done;)if((g=r(v,b,h.value,t))===c||g===u)return g};t.BREAK=c,t.RETURN=u},function(e,t,n){"use strict";var i=n(27);e.exports=i.DEFAULT=new i({include:[n(42)],explicit:[n(311),n(312),n(313)]})},function(e,t,n){function i(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}var r=n(107);e.exports=i},function(e,t,n){function i(e,t){return r(e)?e:o(e,t)?[e]:a(s(e))}var r=n(6),o=n(108),a=n(339),s=n(134);e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){if(n=n||{},t=(0,B.default)({},t,{path:t.path&&o(t.path)}),"merge"===t.op){var i=L(e,t.path);(0,B.default)(i,t.value),U.default.applyPatch(e,[s(t.path,i)])}else if("mergeDeep"===t.op){var r=L(e,t.path);for(var a in t.value){var l=t.value[a],c=Array.isArray(l);if(c){var u=r[a]||[];r[a]=u.concat(l)}else if(q(l)&&!c){var d=(0,B.default)({},r[a]);for(var f in l){if(Object.prototype.hasOwnProperty.call(d,f)){d=(0,Y.default)((0,Q.default)({},d),l);break}(0,B.default)(d,(0,H.default)({},f,l[f]))}r[a]=d}else r[a]=l}}else if("add"===t.op&&""===t.path&&q(t.value)){var p=(0,$.default)(t.value).reduce(function(e,n){return e.push({op:"add",path:"/"+o(n),value:t.value[n]}),e},[]);U.default.applyPatch(e,p)}else if("replace"===t.op&&""===t.path){var h=t.value;n.allowMetaPatches&&t.meta&&T(t)&&(Array.isArray(t.value)||q(t.value))&&(h=(0,B.default)({},h,t.meta)),e=h}else if(U.default.applyPatch(e,[t]),n.allowMetaPatches&&t.meta&&T(t)&&(Array.isArray(t.value)||q(t.value))){var v=L(e,t.path),g=(0,B.default)({},v,t.meta);U.default.applyPatch(e,[s(t.path,g)])}return e}function o(e){return Array.isArray(e)?e.length<1?"":"/"+e.map(function(e){return(e+"").replace(/~/g,"~0").replace(/\//g,"~1")}).join("/"):e}function a(e,t){return{op:"add",path:e,value:t}}function s(e,t,n){return{op:"replace",path:e,value:t,meta:n}}function l(e,t){return{op:"remove",path:e}}function c(e,t){return{type:"mutation",op:"merge",path:e,value:t}}function u(e,t){return{type:"mutation",op:"mergeDeep",path:e,value:t}}function d(e,t){return{type:"context",path:e,value:t}}function f(e,t){try{return h(e,g,t)}catch(e){return e}}function p(e,t){try{return h(e,v,t)}catch(e){return e}}function h(e,t,n){return w(S(e.filter(T).map(function(e){return t(e.value,n,e.path)})||[]))}function v(e,t,n){return n=n||[],Array.isArray(e)?e.map(function(e,i){return v(e,t,n.concat(i))}):q(e)?(0,$.default)(e).map(function(i){return v(e[i],t,n.concat(i))}):t(e,n[n.length-1],n)}function g(e,t,n){n=n||[];var i=[];if(n.length>0){var r=t(e,n[n.length-1],n);r&&(i=i.concat(r))}if(Array.isArray(e)){var o=e.map(function(e,i){return g(e,t,n.concat(i))});o&&(i=i.concat(o))}else if(q(e)){var a=(0,$.default)(e).map(function(i){return g(e[i],t,n.concat(i))});a&&(i=i.concat(a))}return S(i)}function m(e,t){if(!Array.isArray(t))return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function b(e,t){return t.reduce(function(e,t){return void 0!==t&&e?e[t]:e},e)}function y(e){return w(S(x(e)))}function x(e){return Array.isArray(e)?e:[e]}function S(e){var t;return(t=[]).concat.apply(t,(0,R.default)(e.map(function(e){return Array.isArray(e)?S(e):e})))}function w(e){return e.filter(function(e){return void 0!==e})}function q(e){return e&&"object"===(void 0===e?"undefined":(0,M.default)(e))}function C(e){return q(e)&&_(e.then)}function _(e){return e&&"function"==typeof e}function I(e){return e instanceof Error}function E(e){if(k(e)){var t=e.op;return"add"===t||"remove"===t||"replace"===t}return!1}function D(e){return W.default.isGeneratorFunction(e)}function A(e){return E(e)||k(e)&&"mutation"===e.type}function T(e){return A(e)&&("add"===e.op||"replace"===e.op||"merge"===e.op||"mergeDeep"===e.op)}function O(e){return k(e)&&"context"===e.type}function k(e){return e&&"object"===(void 0===e?"undefined":(0,M.default)(e))}function L(e,t){try{return U.default.getValueByPointer(e,t)}catch(e){return console.error(e),{}}}Object.defineProperty(t,"__esModule",{value:!0});var P=n(18),M=i(P),N=n(349),R=i(N),F=n(11),$=i(F),j=n(354),H=i(j),V=n(14),B=i(V),z=n(355),U=i(z),G=n(40),W=i(G),K=n(358),Y=i(K),X=n(359),Q=i(X);t.default={add:a,replace:s,remove:l,merge:c,mergeDeep:u,context:d,getIn:b,applyPatch:r,parentPathMatch:m,flatten:S,fullyNormalizeArray:y,normalizeArray:x,isPromise:C,forEachNew:f,forEachNewPrimitive:p,isJsonPatch:E,isContextPatch:O,isPatch:k,isMutation:A,isAdditiveMutation:T,isGenerator:D,isFunction:_,isObject:q,isError:I},e.exports=t.default},function(e,t,n){var i=n(5),r=n(2).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var i=n(5);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(32);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(75)("keys"),r=n(47);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t,n){var i=n(0),r=n(2),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(33)?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){function i(e){var t=this.__data__=new r(e);this.size=t.size}var r=n(49),o=n(179),a=n(180),s=n(181),l=n(182),c=n(183);i.prototype.clear=o,i.prototype.delete=a,i.prototype.get=s,i.prototype.has=l,i.prototype.set=c,e.exports=i},function(e,t,n){var i=n(20),r=n(9),o=i(r,"Map");e.exports=o},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var r=n(190),o=n(197),a=n(199),s=n(200),l=n(201);i.prototype.clear=r,i.prototype.delete=o,i.prototype.get=a,i.prototype.has=s,i.prototype.set=l,e.exports=i},function(e,t,n){var i=n(205),r=n(13),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(e){return r(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t,n){(function(e){var i=n(9),r=n(206),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o,l=s?i.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u}).call(t,n(55)(e))},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;e.exports=n},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){(function(e){var i=n(116),r="object"==typeof t&&t&&!t.nodeType&&t,o=r&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===r,s=a&&i.process,l=function(){try{var e=o&&o.require&&o.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=l}).call(t,n(55)(e))},function(e,t,n){var i=n(216),r=n(124),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,l=s?function(e){return null==e?[]:(e=Object(e),i(s(e),function(t){return a.call(e,t)}))}:r;e.exports=l},function(e,t){function n(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}e.exports=n},function(e,t,n){var i=n(122),r=i(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){function i(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}var r=n(128);e.exports=i},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){"use strict";function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(e,t,n){if(e&&c.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}function o(e){return c.isString(e)&&(e=r(e)),e instanceof i?e.format():i.prototype.format.call(e)}function a(e,t){return r(e,!1,!0).resolve(t)}function s(e,t){return e?r(e,!1,!0).resolveObject(t):t}var l=n(246),c=n(247);t.parse=r,t.resolve=a,t.resolveObject=s,t.format=o,t.Url=i;var u=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],h=["{","}","|","\\","^","`"].concat(p),v=["'"].concat(h),g=["%","/","?",";","#"].concat(v),m=["/","?","#"],b=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},q=n(248);i.prototype.parse=function(e,t,n){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),r=-1!==i&&i<e.indexOf("#")?"?":"#",o=e.split(r),a=/\\/g;o[0]=o[0].replace(a,"/"),e=o.join(r);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var d=f.exec(s);if(d)return this.path=s,this.href=s,this.pathname=d[1],d[2]?(this.search=d[2],this.query=t?q.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=u.exec(s);if(p){p=p[0];var h=p.toLowerCase();this.protocol=h,s=s.substr(p.length)}if(n||p||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===s.substr(0,2);!C||p&&S[p]||(s=s.substr(2),this.slashes=!0)}if(!S[p]&&(C||p&&!w[p])){for(var _=-1,I=0;I<m.length;I++){var E=s.indexOf(m[I]);-1!==E&&(-1===_||E<_)&&(_=E)}var D,A;A=-1===_?s.lastIndexOf("@"):s.lastIndexOf("@",_),-1!==A&&(D=s.slice(0,A),s=s.slice(A+1),this.auth=decodeURIComponent(D)),_=-1;for(var I=0;I<g.length;I++){var E=s.indexOf(g[I]);-1!==E&&(-1===_||E<_)&&(_=E)}-1===_&&(_=s.length),this.host=s.slice(0,_),s=s.slice(_),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var O=this.hostname.split(/\./),I=0,k=O.length;I<k;I++){var L=O[I];if(L&&!L.match(b)){for(var P="",M=0,N=L.length;M<N;M++)L.charCodeAt(M)>127?P+="x":P+=L[M];if(!P.match(b)){var R=O.slice(0,I),F=O.slice(I+1),$=L.match(y);$&&(R.push($[1]),F.unshift($[2])),F.length&&(s="/"+F.join(".")+s),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=l.toASCII(this.hostname));var j=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+j,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!x[h])for(var I=0,k=v.length;I<k;I++){var V=v[I];if(-1!==s.indexOf(V)){var B=encodeURIComponent(V);B===V&&(B=escape(V)),s=s.split(V).join(B)}}var z=s.indexOf("#");-1!==z&&(this.hash=s.substr(z),s=s.slice(0,z));var U=s.indexOf("?");if(-1!==U?(this.search=s.substr(U),this.query=s.substr(U+1),t&&(this.query=q.parse(this.query)),s=s.slice(0,U)):t&&(this.search="",this.query={}),s&&(this.pathname=s),w[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var j=this.pathname||"",G=this.search||"";this.path=j+G}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",r=!1,o="";this.host?r=e+this.host:this.hostname&&(r=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(o=q.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||w[t])&&!1!==r?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+r+n+a+i},i.prototype.resolve=function(e){return this.resolveObject(r(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(c.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,r=Object.keys(this),o=0;o<r.length;o++){var a=r[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),l=0;l<s.length;l++){var u=s[l];"protocol"!==u&&(n[u]=e[u])}return w[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!w[e.protocol]){for(var d=Object.keys(e),f=0;f<d.length;f++){var p=d[f];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||S[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",g=n.search||"";n.path=v+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=b||m||n.host&&e.pathname,x=y,q=n.pathname&&n.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],C=n.protocol&&!w[n.protocol];if(C&&(n.hostname="",n.port=null,n.host&&(""===q[0]?q[0]=n.host:q.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),y=y&&(""===h[0]||""===q[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,q=h;else if(h.length)q||(q=[]),q.pop(),q=q.concat(h),n.search=e.search,n.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(C){n.hostname=n.host=q.shift();var _=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");_&&(n.auth=_.shift(),n.host=n.hostname=_.shift())}return n.search=e.search,n.query=e.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!q.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var I=q.slice(-1)[0],E=(n.host||e.host||q.length>1)&&("."===I||".."===I)||""===I,D=0,A=q.length;A>=0;A--)I=q[A],"."===I?q.splice(A,1):".."===I?(q.splice(A,1),D++):D&&(q.splice(A,1),D--);if(!y&&!x)for(;D--;D)q.unshift("..");!y||""===q[0]||q[0]&&"/"===q[0].charAt(0)||q.unshift(""),E&&"/"!==q.join("/").substr(-1)&&q.push("");var T=""===q[0]||q[0]&&"/"===q[0].charAt(0);if(C){n.hostname=n.host=T?"":q.length?q.shift():"";var _=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");_&&(n.auth=_.shift(),n.host=n.hostname=_.shift())}return y=y||n.host&&q.length,y&&!T&&q.unshift(""),q.length?n.pathname=q.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){e.exports=n(15)},function(e,t,n){var i=n(8),r=n(258),o=n(76),a=n(74)("IE_PROTO"),s=function(){},l=function(){var e,t=n(69)("iframe"),i=o.length;for(t.style.display="none",n(136).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;i--;)delete l.prototype[o[i]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=i(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(32),r=n(3)("toStringTag"),o="Arguments"==i(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),r))?n:o?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){e.exports={default:n(262),__esModule:!0}},function(e,t,n){var i=n(95),r=n(3)("iterator"),o=n(25);e.exports=n(0).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||o[i(e)]}},function(e,t,n){t.f=n(3)},function(e,t,n){var i=n(2),r=n(0),o=n(33),a=n(98),s=n(7).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){},function(e,t,n){"use strict";t.__esModule=!0;var i=n(102),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e){return function(){var t=e.apply(this,arguments);return new r.default(function(e,n){function i(o,a){try{var s=t[o](a),l=s.value}catch(e){return void n(e)}if(!s.done)return r.default.resolve(l).then(function(e){i("next",e)},function(e){i("throw",e)});e(l)}return i("next")})}}},function(e,t,n){e.exports={default:n(280),__esModule:!0}},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";function i(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=r(t),this.reject=r(n)}var r=n(29);e.exports.f=function(e){return new i(e)}},function(e,t,n){var i=n(15);e.exports=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:i(e,r,t[r]);return e}},function(e,t,n){"use strict";var i=n(27);e.exports=new i({explicit:[n(295),n(296),n(297)]})},function(e,t,n){function i(e,t){t=r(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[o(t[n++])];return n&&n==i?e:void 0}var r=n(67),o=n(44);e.exports=i},function(e,t,n){function i(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||s.test(e)||!a.test(e)||null!=t&&e in Object(t)}var r=n(6),o=n(60),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=i},function(e,t){function n(e,t){return f.call(e,t)}function i(e){if(Array.isArray(e)){for(var t=new Array(e.length),i=0;i<t.length;i++)t[i]=""+i;return t}if(Object.keys)return Object.keys(e);var t=[];for(var r in e)n(e,r)&&t.push(r);return t}function r(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function o(e){for(var t,n=0,i=e.length;n<i;){t=e.charCodeAt(n);if(!(t>=48&&t<=57))return!1;n++}return!0}function a(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function s(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function l(e,t){var i;for(var r in e)if(n(e,r)){if(e[r]===t)return a(r)+"/";if("object"==typeof e[r]&&""!=(i=l(e[r],t)))return a(r)+"/"+i}return""}function c(e,t){if(e===t)return"/";var n=l(e,t);if(""===n)throw new Error("Object not found in root");return"/"+n}function u(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(u(e[t]))return!0}else if("object"==typeof e)for(var r=i(e),o=r.length,t=0;t<o;t++)if(u(e[r[t]]))return!0;return!1}var d=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},f=Object.prototype.hasOwnProperty;t.hasOwnProperty=n,t._objectKeys=i,t._deepClone=r,t.isInteger=o,t.escapePathComponent=a,t.unescapePathComponent=s,t._getPathRecursive=l,t.getPath=c,t.hasUndefined=u;var p=function(e){function t(t,n,i,r,o){e.call(this,t),this.message=t,this.name=n,this.index=i,this.operation=r,this.tree=o}return d(t,e),t}(Error);t.PatchError=p},function(e,t,n){var i=n(19),r=n(71),o=n(34),a=n(46),s=n(364);e.exports=function(e,t){var n=1==e,l=2==e,c=3==e,u=4==e,d=6==e,f=5==e||d,p=t||s;return function(t,s,h){for(var v,g,m=o(t),b=r(m),y=i(s,h,3),x=a(b.length),S=0,w=n?p(t,x):l?p(t,0):void 0;x>S;S++)if((f||S in b)&&(v=b[S],g=y(v,S,m),e))if(n)w[S]=g;else if(g)switch(e){case 3:return!0;case 5:return v;case 6:return S;case 2:w.push(v)}else if(u)return!1;return d?-1:c||u?u:w}}},function(e,t,n){(function(t){!function(){"use strict";function n(e){var n;return n=e instanceof t?e:new t(e.toString(),"binary"),n.toString("base64")}e.exports=n}()}).call(t,n(43).Buffer)},function(e,t,n){e.exports=!n(12)&&!n(16)(function(){return 7!=Object.defineProperty(n(69)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";var i=n(31),r=n(77),o=n(48),a=n(34),s=n(71),l=Object.assign;e.exports=!l||n(16)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i})?function(e,t){for(var n=a(e),l=arguments.length,c=1,u=r.f,d=o.f;l>c;)for(var f,p=s(arguments[c++]),h=u?i(p).concat(u(p)):i(p),v=h.length,g=0;v>g;)d.call(p,f=h[g++])&&(n[f]=p[f]);return n}:l},function(e,t,n){var i=n(17),r=n(22),o=n(170)(!1),a=n(74)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),l=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);for(;t.length>l;)i(s,n=t[l++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){function i(e){if(!o(e))return!1;var t=r(e);return t==s||t==l||t==a||t==c}var r=n(21),o=n(10),a="[object AsyncFunction]",s="[object Function]",l="[object GeneratorFunction]",c="[object Proxy]";e.exports=i},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(80))},function(e,t){function n(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var i=Function.prototype,r=i.toString;e.exports=n},function(e,t,n){function i(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var r=n(119);e.exports=i},function(e,t,n){var i=n(20),r=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=r},function(e,t,n){function i(e,t){var n=a(e),i=!n&&o(e),u=!n&&!i&&s(e),f=!n&&!i&&!u&&c(e),p=n||i||u||f,h=p?r(e.length,String):[],v=h.length;for(var g in e)!t&&!d.call(e,g)||p&&("length"==g||u&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||l(g,v))||h.push(g);return h}var r=n(204),o=n(82),a=n(6),s=n(83),l=n(56),c=n(121),u=Object.prototype,d=u.hasOwnProperty;e.exports=i},function(e,t,n){var i=n(207),r=n(85),o=n(86),a=o&&o.isTypedArray,s=a?r(a):i;e.exports=s},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){function i(e){return a(e)?r(e,!0):o(e)}var r=n(120),o=n(211),a=n(36);e.exports=i},function(e,t){function n(){return[]}e.exports=n},function(e,t,n){var i=n(88),r=n(89),o=n(87),a=n(124),s=Object.getOwnPropertySymbols,l=s?function(e){for(var t=[];e;)i(t,o(e)),e=r(e);return t}:a;e.exports=l},function(e,t,n){function i(e){return r(e,a,o)}var r=n(127),o=n(87),a=n(24);e.exports=i},function(e,t,n){function i(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}var r=n(88),o=n(6);e.exports=i},function(e,t,n){var i=n(9),r=i.Uint8Array;e.exports=r},function(e,t,n){function i(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,s=o(i.length-t,0),l=Array(s);++a<s;)l[a]=i[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=i[a];return c[t]=n(l),r(e,this,c)}}var r=n(237),o=Math.max;e.exports=i},function(e,t,n){var i=n(238),r=n(240),o=r(i);e.exports=o},function(e,t,n){function i(e,t,n){return e=s(e),n=null==n?0:r(a(n),0,e.length),t=o(t),e.slice(n,n+t.length)==t}var r=n(242),o=n(132),a=n(133),s=n(134);e.exports=i},function(e,t,n){function i(e){if("string"==typeof e)return e;if(a(e))return o(e,i)+"";if(s(e))return u?u.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}var r=n(23),o=n(243),a=n(6),s=n(60),l=1/0,c=r?r.prototype:void 0,u=c?c.toString:void 0;e.exports=i},function(e,t,n){function i(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}var r=n(244);e.exports=i},function(e,t,n){function i(e){return null==e?"":r(e)}var r=n(132);e.exports=i},function(e,t,n){"use strict";var i=n(33),r=n(4),o=n(93),a=n(15),s=n(25),l=n(257),c=n(38),u=n(259),d=n(3)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,h,v,g,m){l(n,t,h);var b,y,x,S=function(e){if(!f&&e in _)return _[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",q="values"==v,C=!1,_=e.prototype,I=_[d]||_["@@iterator"]||v&&_[v],E=I||S(v),D=v?q?S("entries"):E:void 0,A="Array"==t&&_.entries||I;if(A&&(x=u(A.call(new e)))!==Object.prototype&&x.next&&(c(x,w,!0),i||"function"==typeof x[d]||a(x,d,p)),q&&I&&"values"!==I.name&&(C=!0,E=function(){return I.call(this)}),i&&!m||!f&&!C&&_[d]||a(_,d,E),s[t]=E,s[w]=p,v)if(b={values:q?E:S("values"),keys:g?E:S("keys"),entries:D},m)for(y in b)y in _||o(_,y,b[y]);else r(r.P+r.F*(f||C),t,b);return b}},function(e,t,n){var i=n(2).document;e.exports=i&&i.documentElement},function(e,t,n){var i=n(32);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(114),r=n(76).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(8);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&i(o.call(e)),t}}},function(e,t,n){var i=n(25),r=n(3)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}},function(e,t,n){var i=n(8),r=n(29),o=n(3)("species");e.exports=function(e,t){var n,a=i(e).constructor;return void 0===a||void 0==(n=i(a)[o])?t:r(n)}},function(e,t,n){var i,r,o,a=n(19),s=n(282),l=n(136),c=n(69),u=n(2),d=u.process,f=u.setImmediate,p=u.clearImmediate,h=u.MessageChannel,v=u.Dispatch,g=0,m={},b=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},y=function(e){b.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++g]=function(){s("function"==typeof e?e:Function(e),t)},i(g),g},p=function(e){delete m[e]},"process"==n(32)(d)?i=function(e){d.nextTick(a(b,e,1))}:v&&v.now?i=function(e){v.now(a(b,e,1))}:h?(r=new h,o=r.port2,r.port1.onmessage=y,i=a(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(e){u.postMessage(e+"","*")},u.addEventListener("message",y,!1)):i="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:f,clear:p}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var i=n(8),r=n(5),o=n(104);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var i=n(3)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var i=[],r=0;r<t.length;++r)void 0!==t[r]&&i.push(t[r]);n.obj[n.prop]=i}}return t},a=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)void 0!==e[i]&&(n[i]=e[i]);return n},s=function e(t,n,r){if(!n)return t;if("object"!=typeof n){if(Array.isArray(t))t.push(n);else{if("object"!=typeof t)return[t,n];(r.plainObjects||r.allowPrototypes||!i.call(Object.prototype,n))&&(t[n]=!0)}return t}if("object"!=typeof t)return[t].concat(n);var o=t;return Array.isArray(t)&&!Array.isArray(n)&&(o=a(t,r)),Array.isArray(t)&&Array.isArray(n)?(n.forEach(function(n,o){i.call(t,o)?t[o]&&"object"==typeof t[o]?t[o]=e(t[o],n,r):t.push(n):t[o]=n}),t):Object.keys(n).reduce(function(t,o){var a=n[o];return i.call(t,o)?t[o]=e(t[o],a,r):t[o]=a,t},o)},l=function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},c=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},u=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",i=0;i<t.length;++i){var o=t.charCodeAt(i);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=t.charAt(i):o<128?n+=r[o]:o<2048?n+=r[192|o>>6]+r[128|63&o]:o<55296||o>=57344?n+=r[224|o>>12]+r[128|o>>6&63]+r[128|63&o]:(i+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(i)),n+=r[240|o>>18]+r[128|o>>12&63]+r[128|o>>6&63]+r[128|63&o])}return n},d=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],i=0;i<t.length;++i)for(var r=t[i],a=r.obj[r.prop],s=Object.keys(a),l=0;l<s.length;++l){var c=s[l],u=a[c];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:a,prop:c}),n.push(u))}return o(t)},f=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},p=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};e.exports={arrayToObject:a,assign:l,compact:d,decode:c,encode:u,isBuffer:p,isRegExp:f,merge:s}},function(e,t,n){"use strict";var i=String.prototype.replace,r=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return i.call(e,r,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,n){"use strict";var i=n(292);e.exports=i},function(e,t,n){"use strict";var i=n(27);e.exports=new i({include:[n(150)]})},function(e,t,n){"use strict";var i=n(27);e.exports=new i({include:[n(106)],implicit:[n(298),n(299),n(300),n(301)]})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.requestInterceptor,i=t.responseInterceptor,r=e.withCredentials?"include":"same-origin";return function(t){return e({url:t,loadSpec:!0,requestInterceptor:n,responseInterceptor:i,headers:{Accept:"application/json"},credentials:r}).then(function(e){return e.body})}}function o(){p.plugins.refs.clearCache()}function a(e){function t(e){var t=this;w&&(p.plugins.refs.docCache[w]=e),p.plugins.refs.fetchJSON=r(S,{requestInterceptor:b,responseInterceptor:y});var n=[p.plugins.refs];return"function"==typeof m&&n.push(p.plugins.parameters),"function"==typeof g&&n.push(p.plugins.properties),"strict"!==a&&n.push(p.plugins.allOf),(0,h.default)({spec:e,context:{baseDoc:w},plugins:n,allowMetaPatches:c,pathDiscriminator:d,parameterMacro:m,modelPropertyMacro:g}).then(x?function(){var e=(0,u.default)(l.default.mark(function e(n){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n);case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}():v.normalizeSwagger)}var n=e.fetch,i=e.spec,o=e.url,a=e.mode,s=e.allowMetaPatches,c=void 0===s||s,d=e.pathDiscriminator,g=e.modelPropertyMacro,m=e.parameterMacro,b=e.requestInterceptor,y=e.responseInterceptor,x=e.skipNormalization,S=e.http,w=e.baseDoc;return w=w||o,S=n||S||f.default,i?t(i):r(S,{requestInterceptor:b,responseInterceptor:y})(w).then(t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(40),l=i(s),c=n(101),u=i(c);t.makeFetchJSON=r,t.clearCache=o,t.default=a;var d=n(61),f=i(d),p=n(317),h=i(p),v=n(45)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(154),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()},function(e,t,n){e.exports={default:n(321),__esModule:!0}},function(e,t,n){function i(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?s(e)?o(e[0],e[1]):r(e):l(e)}var r=n(325),o=n(338),a=n(91),s=n(6),l=n(344);e.exports=i},function(e,t,n){function i(e,t,n,a,s){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!==e&&t!==t:r(e,t,n,a,i,s))}var r=n(327),o=n(13);e.exports=i},function(e,t,n){function i(e,t,n,i,c,u){var d=n&s,f=e.length,p=t.length;if(f!=p&&!(d&&p>f))return!1;var h=u.get(e);if(h&&u.get(t))return h==t;var v=-1,g=!0,m=n&l?new r:void 0;for(u.set(e,t),u.set(t,e);++v<f;){var b=e[v],y=t[v];if(i)var x=d?i(y,b,v,t,e,u):i(b,y,v,e,t,u);if(void 0!==x){if(x)continue;g=!1;break}if(m){if(!o(t,function(e,t){if(!a(m,t)&&(b===e||c(b,e,n,i,u)))return m.push(t)})){g=!1;break}}else if(b!==y&&!c(b,y,n,i,u)){g=!1;break}}return u.delete(e),u.delete(t),g}var r=n(328),o=n(331),a=n(332),s=1,l=2;e.exports=i},function(e,t,n){function i(e){return e===e&&!r(e)}var r=n(10);e.exports=i},function(e,t){function n(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}e.exports=n},function(e,t,n){function i(e,t){return null!=e&&o(e,t,r)}var r=n(342),o=n(343);e.exports=i},function(e,t,n){function i(e){return null===e||void 0===e}function r(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&"function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0])}function o(e,t,n){var o,u;if(i(e)||i(t))return!1;if(e.prototype!==t.prototype)return!1;if(l(e))return!!l(t)&&(e=a.call(e),t=a.call(t),c(e,t,n));if(r(e)){if(!r(t))return!1;if(e.length!==t.length)return!1;for(o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}try{var d=s(e),f=s(t)}catch(e){return!1}if(d.length!=f.length)return!1;for(d.sort(),f.sort(),o=d.length-1;o>=0;o--)if(d[o]!=f[o])return!1;for(o=d.length-1;o>=0;o--)if(u=d[o],!c(e[u],t[u],n))return!1;return typeof e==typeof t}var a=Array.prototype.slice,s=n(356),l=n(357),c=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:o(e,t,n))}},function(e,t,n){function i(e,t){if(""==t)return e;var n={op:"_get",path:t};return r(e,n),n.value}function r(e,n,r,o){if(void 0===r&&(r=!1),void 0===o&&(o=!0),r&&("function"==typeof r?r(n,0,e,n.path):s(n,0)),""===n.path){var a={newDocument:e};if("add"===n.op)return a.newDocument=n.value,a;if("replace"===n.op)return a.newDocument=n.value,a.removed=e,a;if("move"===n.op||"copy"===n.op)return a.newDocument=i(e,n.from),"move"===n.op&&(a.removed=e),a;if("test"===n.op){if(a.test=d(e,n.value),!1===a.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,e);return a.newDocument=e,a}if("remove"===n.op)return a.removed=e,a.newDocument=null,a;if("_get"===n.op)return n.value=e,a;if(r)throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",0,n,e);return a}o||(e=f._deepClone(e));var l=n.path||"",c=l.split("/"),u=e,v=1,g=c.length,m=void 0,b=void 0,y=void 0;for(y="function"==typeof r?r:s;;){if(b=c[v],r&&void 0===m&&(void 0===u[b]?m=c.slice(0,v).join("/"):v==g-1&&(m=n.path),void 0!==m&&y(n,0,e,m)),v++,Array.isArray(u)){if("-"===b)b=u.length;else{if(r&&!f.isInteger(b))throw new t.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",0,n.path,n);f.isInteger(b)&&(b=~~b)}if(v>=g){if(r&&"add"===n.op&&b>u.length)throw new t.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",0,n.path,n);var a=h[n.op].call(n,u,b,e);if(!1===a.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,e);return a}}else if(b&&-1!=b.indexOf("~")&&(b=f.unescapePathComponent(b)),v>=g){var a=p[n.op].call(n,u,b,e);if(!1===a.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,e);return a}u=u[b]}}function o(e,n,i,o){if(void 0===o&&(o=!0),i&&!Array.isArray(n))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");o||(e=f._deepClone(e));for(var a=new Array(n.length),s=0,l=n.length;s<l;s++)a[s]=r(e,n[s],i),e=a[s].newDocument;return a.newDocument=e,a}function a(e,n){var i=r(e,n);if(!1===i.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,e);return i.newDocument}function s(e,n,i,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new t.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",n,e,i);if(!p[e.op])throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",n,e,i);if("string"!=typeof e.path)throw new t.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",n,e,i);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new t.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",n,e,i);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new t.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",n,e,i);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",n,e,i);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&f.hasUndefined(e.value))throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",n,e,i);if(i)if("add"==e.op){var o=e.path.split("/").length,a=r.split("/").length;if(o!==a+1&&o!==a)throw new t.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",n,e,i)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new t.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",n,e,i)}else if("move"===e.op||"copy"===e.op){var s={op:"_get",path:e.from,value:void 0},c=l([s],i);if(c&&"OPERATION_PATH_UNRESOLVABLE"===c.name)throw new t.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",n,e,i)}}function l(e,n,i){try{if(!Array.isArray(e))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(n)o(f._deepClone(n),f._deepClone(e),i||!0);else{i=i||s;for(var r=0;r<e.length;r++)i(e[r],r,n,void 0)}}catch(e){if(e instanceof t.JsonPatchError)return e;throw e}}var c={strict:!0},u=n(161),d=function(e,t){return u(e,t,c)},f=n(109);t.JsonPatchError=f.PatchError,t.deepClone=f._deepClone;var p={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var o=i(n,this.path);o&&(o=f._deepClone(o));var a=r(n,{op:"remove",path:this.from}).removed;return r(n,{op:"add",path:this.path,value:a}),{newDocument:n,removed:o}},copy:function(e,t,n){var o=i(n,this.from);return r(n,{op:"add",path:this.path,value:f._deepClone(o)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:d(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},h={add:function(e,t,n){return f.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:p.move,copy:p.copy,test:p.test,_get:p._get};t.getValueByPointer=i,t.applyOperation=r,t.applyPatch=o,t.applyReducer=a,t.validator=s,t.validate=l},function(e,t,n){var i=n(5);e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";function i(e,t){function n(){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack;for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];this.message=n[0],t&&t.apply(this,n)}return n.prototype=new Error,n.prototype.name=e,n.prototype.constructor=n,n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e){var t=e[e.length-1],n=e[e.length-2],i=e.join("/");return r.indexOf(t)>-1&&-1===o.indexOf(n)||a.indexOf(i)>-1||s.some(function(e){return i.indexOf(e)>-1})}Object.defineProperty(t,"__esModule",{value:!0}),t.isFreelyNamed=i;var r=["properties"],o=["properties"],a=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],s=["schema/example"]},function(e,t,n){e.exports=n(167)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e?n.url=e:n=e,!(this instanceof r))return new r(n);(0,c.default)(this,n);var i=this.resolve().then(function(){return t.disableInterfaces||(0,c.default)(t,r.makeApisTagOperation(t)),t});return i.client=this,i}Object.defineProperty(t,"__esModule",{value:!0});var o=n(28),a=i(o),s=n(172),l=(i(s),n(59)),c=i(l),u=n(131),d=i(u),f=n(92),p=i(f),h=n(61),v=i(h),g=n(151),m=i(g),b=n(378),y=i(b),x=n(379),S=n(388),w=n(45);r.http=v.default,r.makeHttp=h.makeHttp.bind(null,r.http),r.resolve=m.default,r.resolveSubtree=y.default,r.execute=S.execute,r.serializeRes=h.serializeRes,r.serializeHeaders=h.serializeHeaders,r.clearCache=g.clearCache,r.parameterBuilders=S.PARAMETER_BUILDERS,r.makeApisTagOperation=x.makeApisTagOperation,r.buildRequest=S.buildRequest,r.helpers={opId:w.opId},r.prototype={http:v.default,execute:function(e){return this.applyDefaults(),r.execute((0,a.default)({spec:this.spec,http:this.http,securities:{authorized:this.authorizations},contextUrl:"string"==typeof this.url?this.url:void 0},e))},resolve:function(){var e=this;return r.resolve({spec:this.spec,url:this.url,allowMetaPatches:this.allowMetaPatches,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null}).then(function(t){return e.originalSpec=e.spec,e.spec=t.spec,e.errors=t.errors,e})}},r.prototype.applyDefaults=function(){var e=this.spec,t=this.url;if(t&&(0,d.default)(t,"http")){var n=p.default.parse(t);e.host||(e.host=n.host),e.schemes||(e.schemes=[n.protocol.replace(":","")]),e.basePath||(e.basePath="/")}},t.default=r,e.exports=t.default},function(e,t,n){n(169),e.exports=n(0).Object.assign},function(e,t,n){var i=n(4);i(i.S+i.F,"Object",{assign:n(113)})},function(e,t,n){var i=n(22),r=n(46),o=n(171);e.exports=function(e){return function(t,n,a){var s,l=i(t),c=r(l.length),u=o(a,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var i=n(73),r=Math.max,o=Math.min;e.exports=function(e,t){return e=i(e),e<0?r(e+t,0):o(e,t)}},function(e,t,n){function i(e){return r(e,o|a)}var r=n(173),o=1,a=4;e.exports=i},function(e,t,n){function i(e,t,n,L,P,M){var N,R=t&_,F=t&I,$=t&E;if(n&&(N=P?n(e,L,P,M):n(e)),void 0!==N)return N;if(!w(e))return e;var j=y(e);if(j){if(N=g(e),!R)return u(e,N)}else{var H=v(e),V=H==A||H==T;if(x(e))return c(e,R);if(H==O||H==D||V&&!P){if(N=F||V?{}:b(e),!R)return F?f(e,l(N,e)):d(e,s(N,e))}else{if(!k[H])return P?e:{};N=m(e,H,R)}}M||(M=new r);var B=M.get(e);if(B)return B;if(M.set(e,N),q(e))return e.forEach(function(r){N.add(i(r,t,n,r,e,M))}),N;if(S(e))return e.forEach(function(r,o){N.set(o,i(r,t,n,o,e,M))}),N;var z=$?F?h:p:F?keysIn:C,U=j?void 0:z(e);return o(U||e,function(r,o){U&&(o=r,r=e[o]),a(N,o,i(r,t,n,o,e,M))}),N}var r=n(78),o=n(202),a=n(54),s=n(203),l=n(210),c=n(213),u=n(214),d=n(215),f=n(217),p=n(126),h=n(218),v=n(58),g=n(223),m=n(224),b=n(229),y=n(6),x=n(83),S=n(231),w=n(10),q=n(233),C=n(24),_=1,I=2,E=4,D="[object Arguments]",A="[object Function]",T="[object GeneratorFunction]",O="[object Object]",k={};k[D]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object DataView]"]=k["[object Boolean]"]=k["[object Date]"]=k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Map]"]=k["[object Number]"]=k[O]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object Symbol]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Error]"]=k[A]=k["[object WeakMap]"]=!1,e.exports=i},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function i(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}var r=n(50),o=Array.prototype,a=o.splice;e.exports=i},function(e,t,n){function i(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}var r=n(50);e.exports=i},function(e,t,n){function i(e){return r(this.__data__,e)>-1}var r=n(50);e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}var r=n(50);e.exports=i},function(e,t,n){function i(){this.__data__=new r,this.size=0}var r=n(49);e.exports=i},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function i(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<s-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(e,t),this.size=n.size,this}var r=n(49),o=n(79),a=n(81),s=200;e.exports=i},function(e,t,n){function i(e){return!(!a(e)||o(e))&&(r(e)?h:c).test(s(e))}var r=n(115),o=n(187),a=n(10),s=n(117),l=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,u=Function.prototype,d=Object.prototype,f=u.toString,p=d.hasOwnProperty,h=RegExp("^"+f.call(p).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){var t=a.call(e,l),n=e[l];try{e[l]=void 0;var i=!0}catch(e){}var r=s.call(e);return i&&(t?e[l]=n:delete e[l]),r}var r=n(23),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,l=r?r.toStringTag:void 0;e.exports=i},function(e,t){function n(e){return r.call(e)}var i=Object.prototype,r=i.toString;e.exports=n},function(e,t,n){function i(e){return!!o&&o in e}var r=n(188),o=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=i},function(e,t,n){var i=n(9),r=i["__core-js_shared__"];e.exports=r},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function i(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}var r=n(191),o=n(49),a=n(79);e.exports=i},function(e,t,n){function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var r=n(192),o=n(193),a=n(194),s=n(195),l=n(196);i.prototype.clear=r,i.prototype.delete=o,i.prototype.get=a,i.prototype.has=s,i.prototype.set=l,e.exports=i},function(e,t,n){function i(){this.__data__=r?r(null):{},this.size=0}var r=n(52);e.exports=i},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function i(e){var t=this.__data__;if(r){var n=t[e];return n===o?void 0:n}return s.call(t,e)?t[e]:void 0}var r=n(52),o="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}var r=n(52),o=Object.prototype,a=o.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?o:t,this}var r=n(52),o="__lodash_hash_undefined__";e.exports=i},function(e,t,n){function i(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}var r=n(53);e.exports=i},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function i(e){return r(this,e).get(e)}var r=n(53);e.exports=i},function(e,t,n){function i(e){return r(this,e).has(e)}var r=n(53);e.exports=i},function(e,t,n){function i(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}var r=n(53);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}e.exports=n},function(e,t,n){function i(e,t){return e&&r(t,o(t),e)}var r=n(35),o=n(24);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}e.exports=n},function(e,t,n){function i(e){return o(e)&&r(e)==a}var r=n(21),o=n(13),a="[object Arguments]";e.exports=i},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function i(e){return a(e)&&o(e.length)&&!!s[r(e)]}var r=n(21),o=n(84),a=n(13),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=i},function(e,t,n){function i(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var r=n(57),o=n(209),a=Object.prototype,s=a.hasOwnProperty;e.exports=i},function(e,t,n){var i=n(122),r=i(Object.keys,Object);e.exports=r},function(e,t,n){function i(e,t){return e&&r(t,o(t),e)}var r=n(35),o=n(123);e.exports=i},function(e,t,n){function i(e){if(!r(e))return a(e);var t=o(e),n=[];for(var i in e)("constructor"!=i||!t&&l.call(e,i))&&n.push(i);return n}var r=n(10),o=n(57),a=n(212),s=Object.prototype,l=s.hasOwnProperty;e.exports=i},function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},function(e,t,n){(function(e){function i(e,t){if(t)return e.slice();var n=e.length,i=c?c(n):new e.constructor(n);return e.copy(i),i}var r=n(9),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o,l=s?r.Buffer:void 0,c=l?l.allocUnsafe:void 0;e.exports=i}).call(t,n(55)(e))},function(e,t){function n(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}e.exports=n},function(e,t,n){function i(e,t){return r(e,o(e),t)}var r=n(35),o=n(87);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[r++]=a)}return o}e.exports=n},function(e,t,n){function i(e,t){return r(e,o(e),t)}var r=n(35),o=n(125);e.exports=i},function(e,t,n){function i(e){return r(e,a,o)}var r=n(127),o=n(125),a=n(123);e.exports=i},function(e,t,n){var i=n(20),r=n(9),o=i(r,"DataView");e.exports=o},function(e,t,n){var i=n(20),r=n(9),o=i(r,"Promise");e.exports=o},function(e,t,n){var i=n(20),r=n(9),o=i(r,"Set");e.exports=o},function(e,t,n){var i=n(20),r=n(9),o=i(r,"WeakMap");e.exports=o},function(e,t){function n(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var i=Object.prototype,r=i.hasOwnProperty;e.exports=n},function(e,t,n){function i(e,t,n){var i=e.constructor;switch(t){case m:return r(e);case c:case u:return new i(+e);case b:return o(e,n);case y:case x:case S:case w:case q:case C:case _:case I:case E:return l(e,n);case d:return new i;case f:case v:return new i(e);case p:return a(e);case h:return new i;case g:return s(e)}}var r=n(90),o=n(225),a=n(226),s=n(227),l=n(228),c="[object Boolean]",u="[object Date]",d="[object Map]",f="[object Number]",p="[object RegExp]",h="[object Set]",v="[object String]",g="[object Symbol]",m="[object ArrayBuffer]",b="[object DataView]",y="[object Float32Array]",x="[object Float64Array]",S="[object Int8Array]",w="[object Int16Array]",q="[object Int32Array]",C="[object Uint8Array]",_="[object Uint8ClampedArray]",I="[object Uint16Array]",E="[object Uint32Array]";e.exports=i},function(e,t,n){function i(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var r=n(90);e.exports=i},function(e,t){function n(e){var t=new e.constructor(e.source,i.exec(e));return t.lastIndex=e.lastIndex,t}var i=/\w*$/;e.exports=n},function(e,t,n){function i(e){return a?Object(a.call(e)):{}}var r=n(23),o=r?r.prototype:void 0,a=o?o.valueOf:void 0;e.exports=i},function(e,t,n){function i(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var r=n(90);e.exports=i},function(e,t,n){function i(e){return"function"!=typeof e.constructor||a(e)?{}:r(o(e))}var r=n(230),o=n(89),a=n(57);e.exports=i},function(e,t,n){var i=n(10),r=Object.create,o=function(){function e(){}return function(t){if(!i(t))return{};if(r)return r(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},function(e,t,n){var i=n(232),r=n(85),o=n(86),a=o&&o.isMap,s=a?r(a):i;e.exports=s},function(e,t,n){function i(e){return o(e)&&r(e)==a}var r=n(58),o=n(13),a="[object Map]";e.exports=i},function(e,t,n){var i=n(234),r=n(85),o=n(86),a=o&&o.isSet,s=a?r(a):i;e.exports=s},function(e,t,n){function i(e){return o(e)&&r(e)==a}var r=n(58),o=n(13),a="[object Set]";e.exports=i},function(e,t,n){function i(e){return r(function(t,n){var i=-1,r=n.length,a=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(r--,a):void 0,s&&o(n[0],n[1],s)&&(a=r<3?void 0:a,r=1),t=Object(t);++i<r;){var l=n[i];l&&e(t,l,i,a)}return t})}var r=n(236),o=n(241);e.exports=i},function(e,t,n){function i(e,t){return a(o(e,t,r),e+"")}var r=n(91),o=n(129),a=n(130);e.exports=i},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){var i=n(239),r=n(119),o=n(91),a=r?function(e,t){return r(e,"toString",{configurable:!0,enumerable:!1,value:i(t),writable:!0})}:o;e.exports=a},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t){function n(e){var t=0,n=0;return function(){var a=o(),s=r-(a-n);if(n=a,s>0){if(++t>=i)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var i=800,r=16,o=Date.now;e.exports=n},function(e,t,n){function i(e,t,n){if(!s(n))return!1;var i=typeof t;return!!("number"==i?o(n)&&a(t,n.length):"string"==i&&t in n)&&r(n[t],e)}var r=n(51),o=n(36),a=n(56),s=n(10);e.exports=i},function(e,t){function n(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}e.exports=n},function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}e.exports=n},function(e,t,n){function i(e){if(!e)return 0===e?e:0;if((e=r(e))===o||e===-o)return(e<0?-1:1)*a;return e===e?e:0}var r=n(245),o=1/0,a=1.7976931348623157e308;e.exports=i},function(e,t,n){function i(e){if("number"==typeof e)return e;if(o(e))return a;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=c.test(e);return n||u.test(e)?d(e.slice(2),n?2:8):l.test(e)?a:+e}var r=n(10),o=n(60),a=NaN,s=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt;e.exports=i},function(e,t,n){(function(e,i){var r;!function(o){function a(e){throw RangeError(k[e])}function s(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function l(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),e=e.replace(O,"."),i+s(e.split("."),t).join(".")}function c(e){for(var t,n,i=[],r=0,o=e.length;r<o;)t=e.charCodeAt(r++),t>=55296&&t<=56319&&r<o?(n=e.charCodeAt(r++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--)):i.push(t);return i}function u(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=M(e>>>10&1023|55296),e=56320|1023&e),t+M(e)}).join("")}function d(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:S}function f(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,n){var i=0;for(e=n?P(e/_):e>>1,e+=P(e/t);e>L*q>>1;i+=S)e=P(e/L);return P(i+(L+1)*e/(e+C))}function h(e){var t,n,i,r,o,s,l,c,f,h,v=[],g=e.length,m=0,b=E,y=I;for(n=e.lastIndexOf(D),n<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&a("not-basic"),v.push(e.charCodeAt(i));for(r=n>0?n+1:0;r<g;){for(o=m,s=1,l=S;r>=g&&a("invalid-input"),c=d(e.charCodeAt(r++)),(c>=S||c>P((x-m)/s))&&a("overflow"),m+=c*s,f=l<=y?w:l>=y+q?q:l-y,!(c<f);l+=S)h=S-f,s>P(x/h)&&a("overflow"),s*=h;t=v.length+1,y=p(m-o,t,0==o),P(m/t)>x-b&&a("overflow"),b+=P(m/t),m%=t,v.splice(m++,0,b)}return u(v)}function v(e){var t,n,i,r,o,s,l,u,d,h,v,g,m,b,y,C=[];for(e=c(e),g=e.length,t=E,n=0,o=I,s=0;s<g;++s)(v=e[s])<128&&C.push(M(v));for(i=r=C.length,r&&C.push(D);i<g;){for(l=x,s=0;s<g;++s)(v=e[s])>=t&&v<l&&(l=v);for(m=i+1,l-t>P((x-n)/m)&&a("overflow"),n+=(l-t)*m,t=l,s=0;s<g;++s)if(v=e[s],v<t&&++n>x&&a("overflow"),v==t){for(u=n,d=S;h=d<=o?w:d>=o+q?q:d-o,!(u<h);d+=S)y=u-h,b=S-h,C.push(M(f(h+y%b,0))),u=P(y/b);C.push(M(f(u,0))),o=p(n,m,i==r),n=0,++i}++n,++t}return C.join("")}function g(e){return l(e,function(e){return A.test(e)?h(e.slice(4).toLowerCase()):e})}function m(e){return l(e,function(e){return T.test(e)?"xn--"+v(e):e})}var b=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof i&&i);var y,x=2147483647,S=36,w=1,q=26,C=38,_=700,I=72,E=128,D="-",A=/^xn--/,T=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=S-w,P=Math.floor,M=String.fromCharCode;y={version:"1.3.2",ucs2:{decode:c,encode:u},decode:h,encode:v,toASCII:m,toUnicode:g},void 0!==(r=function(){return y}.call(t,n,t,e))&&(e.exports=r)}()}).call(t,n(55)(e),n(80))},function(e,t,n){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(249),t.encode=t.stringify=n(250)},function(e,t,n){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var d,f,p,h,v=e[u].replace(s,"%20"),g=v.indexOf(n);g>=0?(d=v.substr(0,g),f=v.substr(g+1)):(d=v,f=""),p=decodeURIComponent(d),h=decodeURIComponent(f),i(a,p)?r(a[p])?a[p].push(h):a[p]=[a[p],h]:a[p]=h}return a};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function i(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?i(a(e),function(a){var s=encodeURIComponent(r(a))+n;return o(e[a])?i(e[a],function(e){return s+encodeURIComponent(r(e))}).join(t):s+encodeURIComponent(r(e[a]))}).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(252),o=i(r),a=n(96),s=i(a);t.default=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,l=(0,s.default)(e);!(i=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){e.exports={default:n(253),__esModule:!0}},function(e,t,n){n(37),n(39),e.exports=n(261)},function(e,t,n){"use strict";var i=n(255),r=n(256),o=n(25),a=n(22);e.exports=n(135)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var i=n(94),r=n(30),o=n(38),a={};n(15)(a,n(3)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:r(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var i=n(7),r=n(8),o=n(31);e.exports=n(12)?Object.defineProperties:function(e,t){r(e);for(var n,a=o(t),s=a.length,l=0;s>l;)i.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var i=n(17),r=n(34),o=n(74)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var i=n(73),r=n(72);e.exports=function(e){return function(t,n){var o,a,s=String(r(t)),l=i(n),c=s.length;return l<0||l>=c?e?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){var i=n(95),r=n(3)("iterator"),o=n(25);e.exports=n(0).isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||o.hasOwnProperty(i(t))}},function(e,t,n){n(37),n(39),e.exports=n(263)},function(e,t,n){var i=n(8),r=n(97);e.exports=n(0).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},function(e,t,n){n(265),e.exports=n(0).Object.keys},function(e,t,n){var i=n(34),r=n(31);n(266)("keys",function(){return function(e){return r(i(e))}})},function(e,t,n){var i=n(4),r=n(0),o=n(16);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],a={};a[e]=t(n),i(i.S+i.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){var i=n(0),r=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},function(e,t,n){var i=function(){return this}()||Function("return this")(),r=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,o=r&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,e.exports=n(269),r)i.regeneratorRuntime=o;else try{delete i.regeneratorRuntime}catch(e){i.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";function n(e,t,n,i){var o=t&&t.prototype instanceof r?t:r,a=Object.create(o.prototype),s=new p(i||[]);return a._invoke=c(e,n,s),a}function i(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function r(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function l(e){function t(n,r,o,a){var s=i(e[n],e,r);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&b.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(c).then(function(e){l.value=e,o(l)},a)}a(s.arg)}function n(e,n){function i(){return new Promise(function(i,r){t(e,n,i,r)})}return r=r?r.then(i,i):i()}var r;this._invoke=n}function c(e,t,n){var r=_;return function(o,a){if(r===E)throw new Error("Generator is already running");if(r===D){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var l=u(s,n);if(l){if(l===A)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===_)throw r=D,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=E;var c=i(e,t,n);if("normal"===c.type){if(r=n.done?D:I,c.arg===A)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=D,n.method="throw",n.arg=c.arg)}}}function u(e,t){var n=e.iterator[t.method];if(n===g){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=g,u(e,t),"throw"===t.method))return A;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var r=i(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,A;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=g),t.delegate=null,A):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,A)}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function h(e){if(e){var t=e[x];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(b.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=g,t.done=!0,t};return i.next=i}}return{next:v}}function v(){return{value:g,done:!0}}var g,m=Object.prototype,b=m.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},x=y.iterator||"@@iterator",S=y.asyncIterator||"@@asyncIterator",w=y.toStringTag||"@@toStringTag",q="object"==typeof e,C=t.regeneratorRuntime;if(C)return void(q&&(e.exports=C));C=t.regeneratorRuntime=q?e.exports:{},C.wrap=n;var _="suspendedStart",I="suspendedYield",E="executing",D="completed",A={},T={};T[x]=function(){return this};var O=Object.getPrototypeOf,k=O&&O(O(h([])));k&&k!==m&&b.call(k,x)&&(T=k);var L=a.prototype=r.prototype=Object.create(T);o.prototype=L.constructor=a,a.constructor=o,a[w]=o.displayName="GeneratorFunction",C.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},C.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,w in e||(e[w]="GeneratorFunction")),e.prototype=Object.create(L),e},C.awrap=function(e){return{__await:e}},s(l.prototype),l.prototype[S]=function(){return this},C.AsyncIterator=l,C.async=function(e,t,i,r){var o=new l(n(e,t,i,r));return C.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},s(L),L[w]="Generator",L[x]=function(){return this},L.toString=function(){return"[object Generator]"},C.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},C.values=h,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,i){return o.type="throw",o.arg=e,n.next=t,i&&(n.method="next",n.arg=g),!!i}if(this.done)throw e;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var a=b.call(r,"catchLoc"),s=b.call(r,"finallyLoc");if(a&&s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&b.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,A):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;f(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:h(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=g),A}}}(function(){return this}()||Function("return this")())},function(e,t,n){e.exports={default:n(271),__esModule:!0}},function(e,t,n){n(39),n(37),e.exports=n(98).f("iterator")},function(e,t,n){e.exports={default:n(273),__esModule:!0}},function(e,t,n){n(274),n(100),n(278),n(279),e.exports=n(0).Symbol},function(e,t,n){"use strict";var i=n(2),r=n(17),o=n(12),a=n(4),s=n(93),l=n(63).KEY,c=n(16),u=n(75),d=n(38),f=n(47),p=n(3),h=n(98),v=n(99),g=n(275),m=n(137),b=n(8),y=n(5),x=n(22),S=n(70),w=n(30),q=n(94),C=n(276),_=n(277),I=n(7),E=n(31),D=_.f,A=I.f,T=C.f,O=i.Symbol,k=i.JSON,L=k&&k.stringify,P=p("_hidden"),M=p("toPrimitive"),N={}.propertyIsEnumerable,R=u("symbol-registry"),F=u("symbols"),$=u("op-symbols"),j=Object.prototype,H="function"==typeof O,V=i.QObject,B=!V||!V.prototype||!V.prototype.findChild,z=o&&c(function(){return 7!=q(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=D(j,t);i&&delete j[t],A(e,t,n),i&&e!==j&&A(j,t,i)}:A,U=function(e){var t=F[e]=q(O.prototype);return t._k=e,t},G=H&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},W=function(e,t,n){return e===j&&W($,t,n),b(e),t=S(t,!0),b(n),r(F,t)?(n.enumerable?(r(e,P)&&e[P][t]&&(e[P][t]=!1),n=q(n,{enumerable:w(0,!1)})):(r(e,P)||A(e,P,w(1,{})),e[P][t]=!0),z(e,t,n)):A(e,t,n)},K=function(e,t){b(e);for(var n,i=g(t=x(t)),r=0,o=i.length;o>r;)W(e,n=i[r++],t[n]);return e},Y=function(e,t){return void 0===t?q(e):K(q(e),t)},X=function(e){var t=N.call(this,e=S(e,!0));return!(this===j&&r(F,e)&&!r($,e))&&(!(t||!r(this,e)||!r(F,e)||r(this,P)&&this[P][e])||t)},Q=function(e,t){if(e=x(e),t=S(t,!0),e!==j||!r(F,t)||r($,t)){var n=D(e,t);return!n||!r(F,t)||r(e,P)&&e[P][t]||(n.enumerable=!0),n}},J=function(e){for(var t,n=T(x(e)),i=[],o=0;n.length>o;)r(F,t=n[o++])||t==P||t==l||i.push(t);return i},Z=function(e){for(var t,n=e===j,i=T(n?$:x(e)),o=[],a=0;i.length>a;)!r(F,t=i[a++])||n&&!r(j,t)||o.push(F[t]);return o};H||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===j&&t.call($,n),r(this,P)&&r(this[P],e)&&(this[P][e]=!1),z(this,e,w(1,n))};return o&&B&&z(j,e,{configurable:!0,set:t}),U(e)},s(O.prototype,"toString",function(){return this._k}),_.f=Q,I.f=W,n(138).f=C.f=J,n(48).f=X,n(77).f=Z,o&&!n(33)&&s(j,"propertyIsEnumerable",X,!0),h.f=function(e){return U(p(e))}),a(a.G+a.W+a.F*!H,{Symbol:O});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)p(ee[te++]);for(var ne=E(p.store),ie=0;ne.length>ie;)v(ne[ie++]);a(a.S+a.F*!H,"Symbol",{for:function(e){return r(R,e+="")?R[e]:R[e]=O(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in R)if(R[t]===e)return t},useSetter:function(){B=!0},useSimple:function(){B=!1}}),a(a.S+a.F*!H,"Object",{create:Y,defineProperty:W,defineProperties:K,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:Z}),k&&a(a.S+a.F*(!H||c(function(){var e=O();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(y(t)||void 0!==e)&&!G(e))return m(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!G(t))return t}),i[1]=t,L.apply(k,i)}}),O.prototype[M]||n(15)(O.prototype,M,O.prototype.valueOf),d(O,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(e,t,n){var i=n(31),r=n(77),o=n(48);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var a,s=n(e),l=o.f,c=0;s.length>c;)l.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var i=n(22),r=n(138).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return r(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):r(i(e))}},function(e,t,n){var i=n(48),r=n(30),o=n(22),a=n(70),s=n(17),l=n(112),c=Object.getOwnPropertyDescriptor;t.f=n(12)?c:function(e,t){if(e=o(e),t=a(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t,n){n(99)("asyncIterator")},function(e,t,n){n(99)("observable")},function(e,t,n){n(100),n(39),n(37),n(281),n(286),n(287),e.exports=n(0).Promise},function(e,t,n){"use strict";var i,r,o,a,s=n(33),l=n(2),c=n(19),u=n(95),d=n(4),f=n(5),p=n(29),h=n(103),v=n(64),g=n(141),m=n(142).set,b=n(283)(),y=n(104),x=n(143),S=n(284),w=n(144),q=l.TypeError,C=l.process,_=C&&C.versions,I=_&&_.v8||"",E=l.Promise,D="process"==u(C),A=function(){},T=r=y.f,O=!!function(){try{var e=E.resolve(1),t=(e.constructor={})[n(3)("species")]=function(e){e(A,A)};return(D||"function"==typeof PromiseRejectionEvent)&&e.then(A)instanceof t&&0!==I.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(e){}}(),k=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var n=e._c;b(function(){for(var i=e._v,r=1==e._s,o=0;n.length>o;)!function(t){var n,o,a,s=r?t.ok:t.fail,l=t.resolve,c=t.reject,u=t.domain;try{s?(r||(2==e._h&&N(e),e._h=1),!0===s?n=i:(u&&u.enter(),n=s(i),u&&(u.exit(),a=!0)),n===t.promise?c(q("Promise-chain cycle")):(o=k(n))?o.call(n,l,c):l(n)):c(i)}catch(e){u&&!a&&u.exit(),c(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&P(e)})}},P=function(e){m.call(l,function(){var t,n,i,r=e._v,o=M(e);if(o&&(t=x(function(){D?C.emit("unhandledRejection",r,e):(n=l.onunhandledrejection)?n({promise:e,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=D||M(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},M=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){m.call(l,function(){var t;D?C.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},R=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},F=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw q("Promise can't be resolved itself");(t=k(e))?b(function(){var i={_w:n,_d:!1};try{t.call(e,c(F,i,1),c(R,i,1))}catch(e){R.call(i,e)}}):(n._v=e,n._s=1,L(n,!1))}catch(e){R.call({_w:n,_d:!1},e)}}};O||(E=function(e){h(this,E,"Promise","_h"),p(e),i.call(this);try{e(c(F,this,1),c(R,this,1))}catch(e){R.call(this,e)}},i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(105)(E.prototype,{then:function(e,t){var n=T(g(this,E));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=D?C.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&L(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new i;this.promise=e,this.resolve=c(F,e,1),this.reject=c(R,e,1)},y.f=T=function(e){return e===E||e===a?new o(e):r(e)}),d(d.G+d.W+d.F*!O,{Promise:E}),n(38)(E,"Promise"),n(285)("Promise"),a=n(0).Promise,d(d.S+d.F*!O,"Promise",{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!O),"Promise",{resolve:function(e){return w(s&&this===a?E:this,e)}}),d(d.S+d.F*!(O&&n(145)(function(e){E.all(e).catch(A)})),"Promise",{all:function(e){var t=this,n=T(t),i=n.resolve,r=n.reject,o=x(function(){var n=[],o=0,a=1;v(e,!1,function(e){var s=o++,l=!1;n.push(void 0),a++,t.resolve(e).then(function(e){l||(l=!0,n[s]=e,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=T(t),i=n.reject,r=x(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(2),r=n(142).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,l="process"==n(32)(a);e.exports=function(){var e,t,n,c=function(){var i,r;for(l&&(i=a.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(i){throw e?n():t=void 0,i}}t=void 0,i&&i.enter()};if(l)n=function(){a.nextTick(c)};else if(!o||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);n=function(){u.then(c)}}else n=function(){r.call(i,c)};else{var d=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}},function(e,t,n){var i=n(2),r=i.navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var i=n(2),r=n(0),o=n(7),a=n(12),s=n(3)("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:i[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var i=n(4),r=n(0),o=n(2),a=n(141),s=n(144);i(i.P+i.R,"Promise",{finally:function(e){var t=a(this,r.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var i=n(4),r=n(104),o=n(143);i(i.S,"Promise",{try:function(e){var t=r.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function i(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function l(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}function u(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(m.arrayBuffer&&m.blob&&y(e))this._bodyArrayBuffer=u(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!x(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return S.indexOf(t)>-1?t:e}function p(e,t){var n=(t=t||{}).body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function v(e){var t=new r;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}}),t}function g(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(m.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=function(e){return e&&DataView.prototype.isPrototypeOf(e)},x=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};r.prototype.append=function(e,i){e=t(e),i=n(i);var r=this.map[e];this.map[e]=r?r+","+i:i},r.prototype.delete=function(e){delete this.map[t(e)]},r.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(e,i){this.map[t(e)]=n(i)},r.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),i(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),i(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),i(e)},m.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},d.call(p.prototype),d.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];g.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=p,e.Response=g,e.fetch=function(e,t){return new Promise(function(n,i){var r=new p(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new g(t,e))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(r.method,r.url,!0),"include"===r.credentials&&(o.withCredentials=!0),"responseType"in o&&m.blob&&(o.responseType="blob"),r.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";var i=n(290),r=n(291),o=n(147);e.exports={formats:o,parse:r,stringify:i}},function(e,t,n){"use strict";var i=n(146),r=n(147),o={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},a=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,serializeDate:function(e){return a.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,n,r,o,a,l,c,u,d,f,p,h){var v=t;if("function"==typeof c)v=c(n,v);else if(v instanceof Date)v=f(v);else if(null===v){if(o)return l&&!h?l(n,s.encoder):n;v=""}if("string"==typeof v||"number"==typeof v||"boolean"==typeof v||i.isBuffer(v)){if(l)return[p(h?n:l(n,s.encoder))+"="+p(l(v,s.encoder))];return[p(n)+"="+p(String(v))]}var g=[];if(void 0===v)return g;var m;if(Array.isArray(c))m=c;else{var b=Object.keys(v);m=u?b.sort(u):b}for(var y=0;y<m.length;++y){var x=m[y];a&&null===v[x]||(g=Array.isArray(v)?g.concat(e(v[x],r(n,x),r,o,a,l,c,u,d,f,p,h)):g.concat(e(v[x],n+(d?"."+x:"["+x+"]"),r,o,a,l,c,u,d,f,p,h)))}return g};e.exports=function(e,t){var n=e,a=t?i.assign({},t):{};if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===a.delimiter?s.delimiter:a.delimiter,u="boolean"==typeof a.strictNullHandling?a.strictNullHandling:s.strictNullHandling,d="boolean"==typeof a.skipNulls?a.skipNulls:s.skipNulls,f="boolean"==typeof a.encode?a.encode:s.encode,p="function"==typeof a.encoder?a.encoder:s.encoder,h="function"==typeof a.sort?a.sort:null,v=void 0!==a.allowDots&&a.allowDots,g="function"==typeof a.serializeDate?a.serializeDate:s.serializeDate,m="boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:s.encodeValuesOnly;if(void 0===a.format)a.format=r.default;else if(!Object.prototype.hasOwnProperty.call(r.formatters,a.format))throw new TypeError("Unknown format option provided.");var b,y,x=r.formatters[a.format];"function"==typeof a.filter?(y=a.filter,n=y("",n)):Array.isArray(a.filter)&&(y=a.filter,b=y);var S=[];if("object"!=typeof n||null===n)return"";var w;w=a.arrayFormat in o?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var q=o[w];b||(b=Object.keys(n)),h&&b.sort(h);for(var C=0;C<b.length;++C){var _=b[C];d&&null===n[_]||(S=S.concat(l(n[_],_,q,u,d,f?p:null,y,h,v,g,x,m)))}var I=S.join(c),E=!0===a.addQueryPrefix?"?":"";return I.length>0?E+I:""}},function(e,t,n){"use strict";var i=n(146),r=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:i.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(e,t){for(var n={},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=t.parameterLimit===1/0?void 0:t.parameterLimit,s=i.split(t.delimiter,a),l=0;l<s.length;++l){var c,u,d=s[l],f=d.indexOf("]="),p=-1===f?d.indexOf("="):f+1;-1===p?(c=t.decoder(d,o.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(d.slice(0,p),o.decoder),u=t.decoder(d.slice(p+1),o.decoder)),r.call(n,c)?n[c]=[].concat(n[c]).concat(u):n[c]=u}return n},s=function(e,t,n){for(var i=t,r=e.length-1;r>=0;--r){var o,a=e[r];if("[]"===a)o=[],o=o.concat(i);else{o=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,l=parseInt(s,10);!isNaN(l)&&a!==s&&String(l)===s&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(o=[],o[l]=i):o[s]=i}i=o}return i},l=function(e,t,n){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=o.exec(i),c=l?i.slice(0,l.index):i,u=[];if(c){if(!n.plainObjects&&r.call(Object.prototype,c)&&!n.allowPrototypes)return;u.push(c)}for(var d=0;null!==(l=a.exec(i))&&d<n.depth;){if(d+=1,!n.plainObjects&&r.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(l[1])}return l&&u.push("["+i.slice(l.index)+"]"),s(u,t,n)}};e.exports=function(e,t){var n=t?i.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||i.isRegExp(n.delimiter)?n.delimiter:o.delimiter,n.depth="number"==typeof n.depth?n.depth:o.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:o.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:o.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:o.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:o.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:o.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:o.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:o.strictNullHandling,""===e||null===e||void 0===e)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof e?a(e,n):e,s=n.plainObjects?Object.create(null):{},c=Object.keys(r),u=0;u<c.length;++u){var d=c[u],f=l(d,r[d],n);s=i.merge(s,f,n)}return i.compact(s)}},function(e,t,n){"use strict";function i(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}var r=n(293),o=n(314);e.exports.Type=n(1),e.exports.Schema=n(27),e.exports.FAILSAFE_SCHEMA=n(106),e.exports.JSON_SCHEMA=n(150),e.exports.CORE_SCHEMA=n(149),e.exports.DEFAULT_SAFE_SCHEMA=n(42),e.exports.DEFAULT_FULL_SCHEMA=n(65),e.exports.load=r.load,e.exports.loadAll=r.loadAll,e.exports.safeLoad=r.safeLoad,e.exports.safeLoadAll=r.safeLoadAll,e.exports.dump=o.dump,e.exports.safeDump=o.safeDump,e.exports.YAMLException=n(41),e.exports.MINIMAL_SCHEMA=n(106),e.exports.SAFE_SCHEMA=n(42),e.exports.DEFAULT_SCHEMA=n(65),e.exports.scan=i("scan"),e.exports.parse=i("parse"),e.exports.compose=i("compose"),e.exports.addConstructor=i("addConstructor")},function(e,t,n){"use strict";function i(e){return 10===e||13===e}function r(e){return 9===e||32===e}function o(e){return 9===e||32===e||10===e||13===e}function a(e){return 44===e||91===e||93===e||123===e||125===e}function s(e){var t;return 48<=e&&e<=57?e-48:(t=32|e,97<=t&&t<=102?t-97+10:-1)}function l(e){return 120===e?2:117===e?4:85===e?8:0}function c(e){return 48<=e&&e<=57?e-48:-1}function u(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e?"\t":9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}function d(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}function f(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||z,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function p(e,t){return new H(t,new V(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function h(e,t){throw p(e,t)}function v(e,t){e.onWarning&&e.onWarning.call(null,p(e,t))}function g(e,t,n,i){var r,o,a,s;if(t<n){if(s=e.input.slice(t,n),i)for(r=0,o=s.length;r<o;r+=1)9===(a=s.charCodeAt(r))||32<=a&&a<=1114111||h(e,"expected valid JSON character");else Z.test(s)&&h(e,"the stream contains non-printable characters");e.result+=s}}function m(e,t,n,i){var r,o,a,s;for(j.isObject(n)||h(e,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(n),a=0,s=r.length;a<s;a+=1)o=r[a],U.call(t,o)||(t[o]=n[o],i[o]=!0)}function b(e,t,n,i,r,o,a,s){var l,c;if(r=String(r),null===t&&(t={}),"tag:yaml.org,2002:merge"===i)if(Array.isArray(o))for(l=0,c=o.length;l<c;l+=1)m(e,t,o[l],n);else m(e,t,o,n);else e.json||U.call(n,r)||!U.call(t,r)||(e.line=a||e.line,e.position=s||e.position,h(e,"duplicated mapping key")),t[r]=o,delete n[r];return t}function y(e){var t;t=e.input.charCodeAt(e.position),10===t?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):h(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function x(e,t,n){for(var o=0,a=e.input.charCodeAt(e.position);0!==a;){for(;r(a);)a=e.input.charCodeAt(++e.position);if(t&&35===a)do{a=e.input.charCodeAt(++e.position)}while(10!==a&&13!==a&&0!==a);if(!i(a))break;for(y(e),a=e.input.charCodeAt(e.position),o++,e.lineIndent=0;32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position)}return-1!==n&&0!==o&&e.lineIndent<n&&v(e,"deficient indentation"),o}function S(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!o(t)))}function w(e,t){1===t?e.result+=" ":t>1&&(e.result+=j.repeat("\n",t-1))}function q(e,t,n){var s,l,c,u,d,f,p,h,v,m=e.kind,b=e.result;if(v=e.input.charCodeAt(e.position),o(v)||a(v)||35===v||38===v||42===v||33===v||124===v||62===v||39===v||34===v||37===v||64===v||96===v)return!1;if((63===v||45===v)&&(l=e.input.charCodeAt(e.position+1),o(l)||n&&a(l)))return!1;for(e.kind="scalar",e.result="",c=u=e.position,d=!1;0!==v;){if(58===v){if(l=e.input.charCodeAt(e.position+1),o(l)||n&&a(l))break}else if(35===v){if(s=e.input.charCodeAt(e.position-1),o(s))break}else{if(e.position===e.lineStart&&S(e)||n&&a(v))break;if(i(v)){if(f=e.line,p=e.lineStart,h=e.lineIndent,x(e,!1,-1),e.lineIndent>=t){d=!0,v=e.input.charCodeAt(e.position);continue}e.position=u,e.line=f,e.lineStart=p,e.lineIndent=h;break}}d&&(g(e,c,u,!1),w(e,e.line-f),c=u=e.position,d=!1),r(v)||(u=e.position+1),v=e.input.charCodeAt(++e.position)}return g(e,c,u,!1),!!e.result||(e.kind=m,e.result=b,!1)}function C(e,t){var n,r,o;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=o=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(g(e,r,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;r=e.position,e.position++,o=e.position}else i(n)?(g(e,r,o,!0),w(e,x(e,!1,t)),r=o=e.position):e.position===e.lineStart&&S(e)?h(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);h(e,"unexpected end of the stream within a single quoted scalar")}function _(e,t){var n,r,o,a,c,u;if(34!==(u=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(u=e.input.charCodeAt(e.position));){if(34===u)return g(e,n,e.position,!0),e.position++,!0;if(92===u){if(g(e,n,e.position,!0),u=e.input.charCodeAt(++e.position),i(u))x(e,!1,t);else if(u<256&&re[u])e.result+=oe[u],e.position++;else if((c=l(u))>0){for(o=c,a=0;o>0;o--)u=e.input.charCodeAt(++e.position),(c=s(u))>=0?a=(a<<4)+c:h(e,"expected hexadecimal character");e.result+=d(a),e.position++}else h(e,"unknown escape sequence");n=r=e.position}else i(u)?(g(e,n,r,!0),w(e,x(e,!1,t)),n=r=e.position):e.position===e.lineStart&&S(e)?h(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}h(e,"unexpected end of the stream within a double quoted scalar")}function I(e,t){var n,i,r,a,s,l,c,u,d,f,p,v=!0,g=e.tag,m=e.anchor,y={};if(91===(p=e.input.charCodeAt(e.position)))a=93,c=!1,i=[];else{if(123!==p)return!1;a=125,c=!0,i={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=i),p=e.input.charCodeAt(++e.position);0!==p;){if(x(e,!0,t),(p=e.input.charCodeAt(e.position))===a)return e.position++,e.tag=g,e.anchor=m,e.kind=c?"mapping":"sequence",e.result=i,!0;v||h(e,"missed comma between flow collection entries"),d=u=f=null,s=l=!1,63===p&&(r=e.input.charCodeAt(e.position+1),o(r)&&(s=l=!0,e.position++,x(e,!0,t))),n=e.line,L(e,t,G,!1,!0),d=e.tag,u=e.result,x(e,!0,t),p=e.input.charCodeAt(e.position),!l&&e.line!==n||58!==p||(s=!0,p=e.input.charCodeAt(++e.position),x(e,!0,t),L(e,t,G,!1,!0),f=e.result),c?b(e,i,y,d,u,f):s?i.push(b(e,null,y,d,u,f)):i.push(u),x(e,!0,t),p=e.input.charCodeAt(e.position),44===p?(v=!0,p=e.input.charCodeAt(++e.position)):v=!1}h(e,"unexpected end of the stream within a flow collection")}function E(e,t){var n,o,a,s,l=X,u=!1,d=!1,f=t,p=0,v=!1;if(124===(s=e.input.charCodeAt(e.position)))o=!1;else{if(62!==s)return!1;o=!0}for(e.kind="scalar",e.result="";0!==s;)if(43===(s=e.input.charCodeAt(++e.position))||45===s)X===l?l=43===s?J:Q:h(e,"repeat of a chomping mode identifier");else{if(!((a=c(s))>=0))break;0===a?h(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):d?h(e,"repeat of an indentation width identifier"):(f=t+a-1,d=!0)}if(r(s)){do{s=e.input.charCodeAt(++e.position)}while(r(s));if(35===s)do{s=e.input.charCodeAt(++e.position)}while(!i(s)&&0!==s)}for(;0!==s;){for(y(e),e.lineIndent=0,s=e.input.charCodeAt(e.position);(!d||e.lineIndent<f)&&32===s;)e.lineIndent++,s=e.input.charCodeAt(++e.position);if(!d&&e.lineIndent>f&&(f=e.lineIndent),i(s))p++;else{if(e.lineIndent<f){l===J?e.result+=j.repeat("\n",u?1+p:p):l===X&&u&&(e.result+="\n");break}for(o?r(s)?(v=!0,e.result+=j.repeat("\n",u?1+p:p)):v?(v=!1,e.result+=j.repeat("\n",p+1)):0===p?u&&(e.result+=" "):e.result+=j.repeat("\n",p):e.result+=j.repeat("\n",u?1+p:p),u=!0,d=!0,p=0,n=e.position;!i(s)&&0!==s;)s=e.input.charCodeAt(++e.position);g(e,n,e.position,!1)}}return!0}function D(e,t){var n,i,r,a=e.tag,s=e.anchor,l=[],c=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=l),r=e.input.charCodeAt(e.position);0!==r&&45===r&&(i=e.input.charCodeAt(e.position+1),o(i));)if(c=!0,e.position++,x(e,!0,-1)&&e.lineIndent<=t)l.push(null),r=e.input.charCodeAt(e.position);else if(n=e.line,L(e,t,K,!1,!0),l.push(e.result),x(e,!0,-1),r=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==r)h(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!c&&(e.tag=a,e.anchor=s,e.kind="sequence",e.result=l,!0)}function A(e,t,n){var i,a,s,l,c,u=e.tag,d=e.anchor,f={},p={},v=null,g=null,m=null,y=!1,S=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=f),c=e.input.charCodeAt(e.position);0!==c;){if(i=e.input.charCodeAt(e.position+1),s=e.line,l=e.position,63!==c&&58!==c||!o(i)){if(!L(e,n,W,!1,!0))break;if(e.line===s){for(c=e.input.charCodeAt(e.position);r(c);)c=e.input.charCodeAt(++e.position);if(58===c)c=e.input.charCodeAt(++e.position),o(c)||h(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(b(e,f,p,v,g,null),v=g=m=null),S=!0,y=!1,a=!1,v=e.tag,g=e.result;else{if(!S)return e.tag=u,e.anchor=d,!0;h(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!S)return e.tag=u,e.anchor=d,!0;h(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(y&&(b(e,f,p,v,g,null),v=g=m=null),S=!0,y=!0,a=!0):y?(y=!1,a=!0):h(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,c=i;if((e.line===s||e.lineIndent>t)&&(L(e,t,Y,!0,a)&&(y?g=e.result:m=e.result),y||(b(e,f,p,v,g,m,s,l),v=g=m=null),x(e,!0,-1),c=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==c)h(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&b(e,f,p,v,g,null),S&&(e.tag=u,e.anchor=d,e.kind="mapping",e.result=f),S}function T(e){var t,n,i,r,a=!1,s=!1;if(33!==(r=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&h(e,"duplication of a tag property"),r=e.input.charCodeAt(++e.position),60===r?(a=!0,r=e.input.charCodeAt(++e.position)):33===r?(s=!0,n="!!",r=e.input.charCodeAt(++e.position)):n="!",t=e.position,a){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&62!==r);e.position<e.length?(i=e.input.slice(t,e.position),r=e.input.charCodeAt(++e.position)):h(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==r&&!o(r);)33===r&&(s?h(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),ne.test(n)||h(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),r=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),te.test(i)&&h(e,"tag suffix cannot contain flow indicator characters")}return i&&!ie.test(i)&&h(e,"tag name cannot contain such characters: "+i),a?e.tag=i:U.call(e.tagMap,n)?e.tag=e.tagMap[n]+i:"!"===n?e.tag="!"+i:"!!"===n?e.tag="tag:yaml.org,2002:"+i:h(e,'undeclared tag handle "'+n+'"'),!0}function O(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&h(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!o(n)&&!a(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&h(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function k(e){var t,n,i;if(42!==(i=e.input.charCodeAt(e.position)))return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!o(i)&&!a(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&h(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(n)||h(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],x(e,!0,-1),!0}function L(e,t,n,i,r){var o,a,s,l,c,u,d,f,p=1,v=!1,g=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=s=Y===n||K===n,i&&x(e,!0,-1)&&(v=!0,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)),1===p)for(;T(e)||O(e);)x(e,!0,-1)?(v=!0,s=o,e.lineIndent>t?p=1:e.lineIndent===t?p=0:e.lineIndent<t&&(p=-1)):s=!1;if(s&&(s=v||r),1!==p&&Y!==n||(d=G===n||W===n?t:t+1,f=e.position-e.lineStart,1===p?s&&(D(e,f)||A(e,f,d))||I(e,d)?g=!0:(a&&E(e,d)||C(e,d)||_(e,d)?g=!0:k(e)?(g=!0,null===e.tag&&null===e.anchor||h(e,"alias node should not have any properties")):q(e,d,G===n)&&(g=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===p&&(g=s&&D(e,f))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(l=0,c=e.implicitTypes.length;l<c;l+=1)if(u=e.implicitTypes[l],u.resolve(e.result)){e.result=u.construct(e.result),e.tag=u.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else U.call(e.typeMap[e.kind||"fallback"],e.tag)?(u=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&u.kind!==e.kind&&h(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+u.kind+'", not "'+e.kind+'"'),u.resolve(e.result)?(e.result=u.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):h(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):h(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||g}function P(e){var t,n,a,s,l=e.position,c=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(s=e.input.charCodeAt(e.position))&&(x(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==s));){for(c=!0,s=e.input.charCodeAt(++e.position),t=e.position;0!==s&&!o(s);)s=e.input.charCodeAt(++e.position);for(n=e.input.slice(t,e.position),a=[],n.length<1&&h(e,"directive name must not be less than one character in length");0!==s;){for(;r(s);)s=e.input.charCodeAt(++e.position);if(35===s){do{s=e.input.charCodeAt(++e.position)}while(0!==s&&!i(s));break}if(i(s))break;for(t=e.position;0!==s&&!o(s);)s=e.input.charCodeAt(++e.position);a.push(e.input.slice(t,e.position))}0!==s&&y(e),U.call(se,n)?se[n](e,n,a):v(e,'unknown document directive "'+n+'"')}if(x(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,x(e,!0,-1)):c&&h(e,"directives end mark is expected"),L(e,e.lineIndent-1,Y,!1,!0),x(e,!0,-1),e.checkLineBreaks&&ee.test(e.input.slice(l,e.position))&&v(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&S(e))return void(46===e.input.charCodeAt(e.position)&&(e.position+=3,x(e,!0,-1)));e.position<e.length-1&&h(e,"end of the stream or a document separator is expected")}function M(e,t){e=String(e),t=t||{},0!==e.length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new f(e,t);for(n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)P(n);return n.documents}function N(e,t,n){var i,r,o=M(e,n);if("function"!=typeof t)return o;for(i=0,r=o.length;i<r;i+=1)t(o[i])}function R(e,t){var n=M(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new H("expected a single document in the stream, but found more")}}function F(e,t,n){if("function"!=typeof t)return N(e,j.extend({schema:B},n));N(e,t,j.extend({schema:B},n))}function $(e,t){return R(e,j.extend({schema:B},t))}for(var j=n(26),H=n(41),V=n(294),B=n(42),z=n(65),U=Object.prototype.hasOwnProperty,G=1,W=2,K=3,Y=4,X=1,Q=2,J=3,Z=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ee=/[\x85\u2028\u2029]/,te=/[,\[\]\{\}]/,ne=/^(?:!|!!|![a-z\-]+!)$/i,ie=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i,re=new Array(256),oe=new Array(256),ae=0;ae<256;ae++)re[ae]=u(ae)?1:0,oe[ae]=u(ae);var se={YAML:function(e,t,n){var i,r,o;null!==e.version&&h(e,"duplication of %YAML directive"),1!==n.length&&h(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),null===i&&h(e,"ill-formed argument of the YAML directive"),r=parseInt(i[1],10),o=parseInt(i[2],10),1!==r&&h(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=o<2,1!==o&&2!==o&&v(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var i,r;2!==n.length&&h(e,"TAG directive accepts exactly two arguments"),i=n[0],r=n[1],ne.test(i)||h(e,"ill-formed tag handle (first argument) of the TAG directive"),U.call(e.tagMap,i)&&h(e,'there is a previously declared suffix for "'+i+'" tag handle'),ie.test(r)||h(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[i]=r}};e.exports.loadAll=N,e.exports.load=R,e.exports.safeLoadAll=F,e.exports.safeLoad=$},function(e,t,n){"use strict";function i(e,t,n,i,r){this.name=e,this.buffer=t,this.position=n,this.line=i,this.column=r}var r=n(26);i.prototype.getSnippet=function(e,t){var n,i,o,a,s;if(!this.buffer)return null;for(e=e||4,t=t||75,n="",i=this.position;i>0&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(i-1));)if(i-=1,this.position-i>t/2-1){n=" ... ",i+=5;break}for(o="",a=this.position;a<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(a));)if((a+=1)-this.position>t/2-1){o=" ... ",a-=5;break}return s=this.buffer.slice(i,a),r.repeat(" ",e)+n+s+o+"\n"+r.repeat(" ",e+this.position-i+n.length)+"^"},i.prototype.toString=function(e){var t,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(n+=":\n"+t),n},e.exports=i},function(e,t,n){"use strict";var i=n(1);e.exports=new i("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},function(e,t,n){"use strict";var i=n(1);e.exports=new i("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},function(e,t,n){"use strict";var i=n(1);e.exports=new i("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},function(e,t,n){"use strict";function i(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)}function r(){return null}function o(e){return null===e}var a=n(1);e.exports=new a("tag:yaml.org,2002:null",{kind:"scalar",resolve:i,construct:r,predicate:o,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},function(e,t,n){"use strict";function i(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)}function r(e){return"true"===e||"True"===e||"TRUE"===e}function o(e){return"[object Boolean]"===Object.prototype.toString.call(e)}var a=n(1);e.exports=new a("tag:yaml.org,2002:bool",{kind:"scalar",resolve:i,construct:r,predicate:o,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},function(e,t,n){"use strict";function i(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function r(e){return 48<=e&&e<=55}function o(e){return 48<=e&&e<=57}function a(e){if(null===e)return!1;var t,n=e.length,a=0,s=!1;if(!n)return!1;if(t=e[a],"-"!==t&&"+"!==t||(t=e[++a]),"0"===t){if(a+1===n)return!0;if("b"===(t=e[++a])){for(a++;a<n;a++)if("_"!==(t=e[a])){if("0"!==t&&"1"!==t)return!1;s=!0}return s&&"_"!==t}if("x"===t){for(a++;a<n;a++)if("_"!==(t=e[a])){if(!i(e.charCodeAt(a)))return!1;s=!0}return s&&"_"!==t}for(;a<n;a++)if("_"!==(t=e[a])){if(!r(e.charCodeAt(a)))return!1;s=!0}return s&&"_"!==t}if("_"===t)return!1;for(;a<n;a++)if("_"!==(t=e[a])){if(":"===t)break;if(!o(e.charCodeAt(a)))return!1;s=!0}return!(!s||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(a)))}function s(e){var t,n,i=e,r=1,o=[];return-1!==i.indexOf("_")&&(i=i.replace(/_/g,"")),t=i[0],"-"!==t&&"+"!==t||("-"===t&&(r=-1),i=i.slice(1),t=i[0]),"0"===i?0:"0"===t?"b"===i[1]?r*parseInt(i.slice(2),2):"x"===i[1]?r*parseInt(i,16):r*parseInt(i,8):-1!==i.indexOf(":")?(i.split(":").forEach(function(e){o.unshift(parseInt(e,10))}),i=0,n=1,o.forEach(function(e){i+=e*n,n*=60}),r*i):r*parseInt(i,10)}function l(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!c.isNegativeZero(e)}var c=n(26),u=n(1);e.exports=new u("tag:yaml.org,2002:int",{kind:"scalar",resolve:a,construct:s,predicate:l,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},function(e,t,n){"use strict";function i(e){return null!==e&&!(!c.test(e)||"_"===e[e.length-1])}function r(e){var t,n,i,r;return t=e.replace(/_/g,"").toLowerCase(),n="-"===t[0]?-1:1,r=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach(function(e){r.unshift(parseFloat(e,10))}),t=0,i=1,r.forEach(function(e){t+=e*i,i*=60}),n*t):n*parseFloat(t,10)}function o(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(s.isNegativeZero(e))return"-0.0";return n=e.toString(10),u.test(n)?n.replace("e",".e"):n}function a(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||s.isNegativeZero(e))}var s=n(26),l=n(1),c=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),u=/^[-+]?[0-9]+e/;e.exports=new l("tag:yaml.org,2002:float",{kind:"scalar",resolve:i,construct:r,predicate:a,represent:o,defaultStyle:"lowercase"})},function(e,t,n){"use strict";function i(e){return null!==e&&(null!==s.exec(e)||null!==l.exec(e))}function r(e){var t,n,i,r,o,a,c,u,d,f,p=0,h=null;if(t=s.exec(e),null===t&&(t=l.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,r=+t[3],!t[4])return new Date(Date.UTC(n,i,r));if(o=+t[4],a=+t[5],c=+t[6],t[7]){for(p=t[7].slice(0,3);p.length<3;)p+="0";p=+p}return t[9]&&(u=+t[10],d=+(t[11]||0),h=6e4*(60*u+d),"-"===t[9]&&(h=-h)),f=new Date(Date.UTC(n,i,r,o,a,c,p)),h&&f.setTime(f.getTime()-h),f}function o(e){return e.toISOString()}var a=n(1),s=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),l=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e.exports=new a("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:i,construct:r,instanceOf:Date,represent:o})},function(e,t,n){"use strict";function i(e){return"<<"===e||null===e}var r=n(1);e.exports=new r("tag:yaml.org,2002:merge",{kind:"scalar",resolve:i})},function(e,t,n){"use strict";function i(e){if(null===e)return!1;var t,n,i=0,r=e.length,o=c;for(n=0;n<r;n++)if(!((t=o.indexOf(e.charAt(n)))>64)){if(t<0)return!1;i+=6}return i%8==0}function r(e){var t,n,i=e.replace(/[\r\n=]/g,""),r=i.length,o=c,a=0,l=[];for(t=0;t<r;t++)t%4==0&&t&&(l.push(a>>16&255),l.push(a>>8&255),l.push(255&a)),a=a<<6|o.indexOf(i.charAt(t));return n=r%4*6,0===n?(l.push(a>>16&255),l.push(a>>8&255),l.push(255&a)):18===n?(l.push(a>>10&255),l.push(a>>2&255)):12===n&&l.push(a>>4&255),s?s.from?s.from(l):new s(l):l}function o(e){var t,n,i="",r=0,o=e.length,a=c;for(t=0;t<o;t++)t%3==0&&t&&(i+=a[r>>18&63],i+=a[r>>12&63],i+=a[r>>6&63],i+=a[63&r]),r=(r<<8)+e[t];return n=o%3,0===n?(i+=a[r>>18&63],i+=a[r>>12&63],i+=a[r>>6&63],i+=a[63&r]):2===n?(i+=a[r>>10&63],i+=a[r>>4&63],i+=a[r<<2&63],i+=a[64]):1===n&&(i+=a[r>>2&63],i+=a[r<<4&63],i+=a[64],i+=a[64]),i}function a(e){return s&&s.isBuffer(e)}var s;try{s=n(43).Buffer}catch(e){}var l=n(1),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";e.exports=new l("tag:yaml.org,2002:binary",{kind:"scalar",resolve:i,construct:r,predicate:a,represent:o})},function(e,t,n){"use strict";function i(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function r(e){var t=i(e),n=t[0],r=t[1];return 3*(n+r)/4-r}function o(e,t,n){return 3*(t+n)/4-n}function a(e){for(var t,n=i(e),r=n[0],a=n[1],s=new f(o(e,r,a)),l=0,c=a>0?r-4:r,u=0;u<c;u+=4)t=d[e.charCodeAt(u)]<<18|d[e.charCodeAt(u+1)]<<12|d[e.charCodeAt(u+2)]<<6|d[e.charCodeAt(u+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;return 2===a&&(t=d[e.charCodeAt(u)]<<2|d[e.charCodeAt(u+1)]>>4,s[l++]=255&t),1===a&&(t=d[e.charCodeAt(u)]<<10|d[e.charCodeAt(u+1)]<<4|d[e.charCodeAt(u+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t),s}function s(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function l(e,t,n){for(var i,r=[],o=t;o<n;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),r.push(s(i));return r.join("")}function c(e){for(var t,n=e.length,i=n%3,r=[],o=0,a=n-i;o<a;o+=16383)r.push(l(e,o,o+16383>a?a:o+16383));return 1===i?(t=e[n-1],r.push(u[t>>2]+u[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],r.push(u[t>>10]+u[t>>4&63]+u[t<<2&63]+"=")),r.join("")}t.byteLength=r,t.toByteArray=a,t.fromByteArray=c;for(var u=[],d=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,v=p.length;h<v;++h)u[h]=p[h],d[p.charCodeAt(h)]=h;d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?r-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+e[t+d],d+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=c}return(p?-1:1)*a*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var a,s,l,c=8*o-r-1,u=(1<<c)-1,d=u>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,h=i?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+d>=1?f/l:f*Math.pow(2,1-d),t*l>=2&&(a++,l/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*l-1)*Math.pow(2,r),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,r),a=0));r>=8;e[n+p]=255&s,p+=h,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;e[n+p]=255&a,p+=h,a/=256,c-=8);e[n+p-h]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";function i(e){if(null===e)return!0;var t,n,i,r,o,l=[],c=e;for(t=0,n=c.length;t<n;t+=1){if(i=c[t],o=!1,"[object Object]"!==s.call(i))return!1;for(r in i)if(a.call(i,r)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==l.indexOf(r))return!1;l.push(r)}return!0}function r(e){return null!==e?e:[]}var o=n(1),a=Object.prototype.hasOwnProperty,s=Object.prototype.toString;e.exports=new o("tag:yaml.org,2002:omap",{kind:"sequence",resolve:i,construct:r})},function(e,t,n){"use strict";function i(e){if(null===e)return!0;var t,n,i,r,o,s=e;for(o=new Array(s.length),t=0,n=s.length;t<n;t+=1){if(i=s[t],"[object Object]"!==a.call(i))return!1;if(r=Object.keys(i),1!==r.length)return!1;o[t]=[r[0],i[r[0]]]}return!0}function r(e){if(null===e)return[];var t,n,i,r,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1)i=a[t],r=Object.keys(i),o[t]=[r[0],i[r[0]]];return o}var o=n(1),a=Object.prototype.toString;e.exports=new o("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:i,construct:r})},function(e,t,n){"use strict";function i(e){if(null===e)return!0;var t,n=e;for(t in n)if(a.call(n,t)&&null!==n[t])return!1;return!0}function r(e){return null!==e?e:{}}var o=n(1),a=Object.prototype.hasOwnProperty;e.exports=new o("tag:yaml.org,2002:set",{kind:"mapping",resolve:i,construct:r})},function(e,t,n){"use strict";function i(){return!0}function r(){}function o(){return""}function a(e){return void 0===e}var s=n(1);e.exports=new s("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:i,construct:r,predicate:a,represent:o})},function(e,t,n){"use strict";function i(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,n=/\/([gim]*)$/.exec(e),i="";if("/"===t[0]){if(n&&(i=n[1]),i.length>3)return!1;if("/"!==t[t.length-i.length-1])return!1}return!0}function r(e){var t=e,n=/\/([gim]*)$/.exec(e),i="";return"/"===t[0]&&(n&&(i=n[1]),t=t.slice(1,t.length-i.length-1)),new RegExp(t,i)}function o(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}function a(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var s=n(1);e.exports=new s("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:i,construct:r,predicate:a,represent:o})},function(e,t,n){"use strict";function i(e){if(null===e)return!1;try{var t="("+e+")",n=s.parse(t,{range:!0});return"Program"===n.type&&1===n.body.length&&"ExpressionStatement"===n.body[0].type&&("ArrowFunctionExpression"===n.body[0].expression.type||"FunctionExpression"===n.body[0].expression.type)}catch(e){return!1}}function r(e){var t,n="("+e+")",i=s.parse(n,{range:!0}),r=[];if("Program"!==i.type||1!==i.body.length||"ExpressionStatement"!==i.body[0].type||"ArrowFunctionExpression"!==i.body[0].expression.type&&"FunctionExpression"!==i.body[0].expression.type)throw new Error("Failed to resolve function");return i.body[0].expression.params.forEach(function(e){r.push(e.name)}),t=i.body[0].expression.body.range,"BlockStatement"===i.body[0].expression.body.type?new Function(r,n.slice(t[0]+1,t[1]-1)):new Function(r,"return "+n.slice(t[0],t[1]))}function o(e){return e.toString()}function a(e){return"[object Function]"===Object.prototype.toString.call(e)}var s;"undefined"!=typeof window&&(s=window.esprima);var l=n(1);e.exports=new l("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:i,construct:r,predicate:a,represent:o})},function(e,t,n){"use strict";function i(e,t){var n,i,r,o,a,s,l;if(null===t)return{};for(n={},i=Object.keys(t),r=0,o=i.length;r<o;r+=1)a=i[r],s=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),l=e.compiledTypeMap.fallback[a],l&&N.call(l.styleAliases,s)&&(s=l.styleAliases[s]),n[a]=s;return n}function r(e){var t,n,i;if(t=e.toString(16).toUpperCase(),e<=255)n="x",i=2;else if(e<=65535)n="u",i=4;else{if(!(e<=4294967295))throw new k("code point within a string may not be greater than 0xFFFFFFFF");n="U",i=8}return"\\"+n+O.repeat("0",i-t.length)+t}function o(e){this.schema=e.schema||L,this.indent=Math.max(1,e.indent||2),this.skipInvalid=e.skipInvalid||!1,this.flowLevel=O.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=i(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function a(e,t){for(var n,i=O.repeat(" ",t),r=0,o=-1,a="",s=e.length;r<s;)o=e.indexOf("\n",r),-1===o?(n=e.slice(r),r=s):(n=e.slice(r,o+1),r=o+1),n.length&&"\n"!==n&&(a+=i),a+=n;return a}function s(e,t){return"\n"+O.repeat(" ",e.indent*t)}function l(e,t){var n,i,r;for(n=0,i=e.implicitTypes.length;n<i;n+=1)if(r=e.implicitTypes[n],r.resolve(t))return!0;return!1}function c(e){return e===$||e===R}function u(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function d(e){return u(e)&&65279!==e&&e!==W&&e!==Z&&e!==ee&&e!==ne&&e!==re&&e!==Y&&e!==V}function f(e){return u(e)&&65279!==e&&!c(e)&&e!==K&&e!==Q&&e!==Y&&e!==W&&e!==Z&&e!==ee&&e!==ne&&e!==re&&e!==V&&e!==z&&e!==G&&e!==j&&e!==ie&&e!==X&&e!==U&&e!==H&&e!==B&&e!==J&&e!==te}function p(e){return/^\n* /.test(e)}function h(e,t,n,i,r){var o,a,s=!1,l=!1,h=-1!==i,v=-1,g=f(e.charCodeAt(0))&&!c(e.charCodeAt(e.length-1));if(t)for(o=0;o<e.length;o++){if(a=e.charCodeAt(o),!u(a))return de;g=g&&d(a)}else{for(o=0;o<e.length;o++){if((a=e.charCodeAt(o))===F)s=!0,h&&(l=l||o-v-1>i&&" "!==e[v+1],v=o);else if(!u(a))return de;g=g&&d(a)}l=l||h&&o-v-1>i&&" "!==e[v+1]}return s||l?n>9&&p(e)?de:l?ue:ce:g&&!r(e)?se:le}function v(e,t,n,i){e.dump=function(){function r(t){return l(e,t)}if(0===t.length)return"''";if(!e.noCompatMode&&-1!==ae.indexOf(t))return"'"+t+"'";var o=e.indent*Math.max(1,n),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),c=i||e.flowLevel>-1&&n>=e.flowLevel;switch(h(t,c,e.indent,s,r)){case se:return t;case le:return"'"+t.replace(/'/g,"''")+"'";case ce:return"|"+g(t,e.indent)+m(a(t,o));case ue:return">"+g(t,e.indent)+m(a(b(t,s),o));case de:return'"'+x(t)+'"';default:throw new k("impossible error: invalid scalar style")}}()}function g(e,t){var n=p(e)?String(t):"",i="\n"===e[e.length-1];return n+(!i||"\n"!==e[e.length-2]&&"\n"!==e?i?"":"-":"+")+"\n"}function m(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function b(e,t){for(var n,i,r=/(\n+)([^\n]*)/g,o=function(){var n=e.indexOf("\n");return n=-1!==n?n:e.length,r.lastIndex=n,y(e.slice(0,n),t)}(),a="\n"===e[0]||" "===e[0];i=r.exec(e);){var s=i[1],l=i[2];n=" "===l[0],o+=s+(a||n||""===l?"":"\n")+y(l,t),a=n}return o}function y(e,t){if(""===e||" "===e[0])return e;for(var n,i,r=/ [^ ]/g,o=0,a=0,s=0,l="";n=r.exec(e);)s=n.index,s-o>t&&(i=a>o?a:s,l+="\n"+e.slice(o,i),o=i+1),a=s;return l+="\n",e.length-o>t&&a>o?l+=e.slice(o,a)+"\n"+e.slice(a+1):l+=e.slice(o),l.slice(1)}function x(e){for(var t,n,i,o="",a=0;a<e.length;a++)t=e.charCodeAt(a),t>=55296&&t<=56319&&(n=e.charCodeAt(a+1))>=56320&&n<=57343?(o+=r(1024*(t-55296)+n-56320+65536),a++):(i=oe[t],o+=!i&&u(t)?e[a]:i||r(t));return o}function S(e,t,n){var i,r,o="",a=e.tag;for(i=0,r=n.length;i<r;i+=1)I(e,t,n[i],!1,!1)&&(0!==i&&(o+=","+(e.condenseFlow?"":" ")),o+=e.dump);e.tag=a,e.dump="["+o+"]"}function w(e,t,n,i){var r,o,a="",l=e.tag;for(r=0,o=n.length;r<o;r+=1)I(e,t+1,n[r],!0,!0)&&(i&&0===r||(a+=s(e,t)),e.dump&&F===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=l,e.dump=a||"[]"}function q(e,t,n){var i,r,o,a,s,l="",c=e.tag,u=Object.keys(n);for(i=0,r=u.length;i<r;i+=1)s=e.condenseFlow?'"':"",0!==i&&(s+=", "),o=u[i],a=n[o],I(e,t,o,!1,!1)&&(e.dump.length>1024&&(s+="? "),s+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),I(e,t,a,!1,!1)&&(s+=e.dump,l+=s));e.tag=c,e.dump="{"+l+"}"}function C(e,t,n,i){var r,o,a,l,c,u,d="",f=e.tag,p=Object.keys(n);if(!0===e.sortKeys)p.sort();else if("function"==typeof e.sortKeys)p.sort(e.sortKeys);else if(e.sortKeys)throw new k("sortKeys must be a boolean or a function");for(r=0,o=p.length;r<o;r+=1)u="",i&&0===r||(u+=s(e,t)),a=p[r],l=n[a],I(e,t+1,a,!0,!0,!0)&&(c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024,c&&(e.dump&&F===e.dump.charCodeAt(0)?u+="?":u+="? "),u+=e.dump,c&&(u+=s(e,t)),I(e,t+1,l,!0,c)&&(e.dump&&F===e.dump.charCodeAt(0)?u+=":":u+=": ",u+=e.dump,d+=u));e.tag=f,e.dump=d||"{}"}function _(e,t,n){var i,r,o,a,s,l;for(r=n?e.explicitTypes:e.implicitTypes,o=0,a=r.length;o<a;o+=1)if(s=r[o],(s.instanceOf||s.predicate)&&(!s.instanceOf||"object"==typeof t&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(e.tag=n?s.tag:"?",s.represent){if(l=e.styleMap[s.tag]||s.defaultStyle,"[object Function]"===M.call(s.represent))i=s.represent(t,l);else{if(!N.call(s.represent,l))throw new k("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');i=s.represent[l](t,l)}e.dump=i}return!0}return!1}function I(e,t,n,i,r,o){e.tag=null,e.dump=n,_(e,n,!1)||_(e,n,!0);var a=M.call(e.dump);i&&(i=e.flowLevel<0||e.flowLevel>t);var s,l,c="[object Object]"===a||"[object Array]"===a;if(c&&(s=e.duplicates.indexOf(n),l=-1!==s),(null!==e.tag&&"?"!==e.tag||l||2!==e.indent&&t>0)&&(r=!1),l&&e.usedDuplicates[s])e.dump="*ref_"+s;else{if(c&&l&&!e.usedDuplicates[s]&&(e.usedDuplicates[s]=!0),"[object Object]"===a)i&&0!==Object.keys(e.dump).length?(C(e,t,e.dump,r),l&&(e.dump="&ref_"+s+e.dump)):(q(e,t,e.dump),l&&(e.dump="&ref_"+s+" "+e.dump));else if("[object Array]"===a)i&&0!==e.dump.length?(w(e,t,e.dump,r),l&&(e.dump="&ref_"+s+e.dump)):(S(e,t,e.dump),l&&(e.dump="&ref_"+s+" "+e.dump));else{if("[object String]"!==a){if(e.skipInvalid)return!1;throw new k("unacceptable kind of an object to dump "+a)}"?"!==e.tag&&v(e,e.dump,t,o)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function E(e,t){var n,i,r=[],o=[];for(D(e,r,o),n=0,i=o.length;n<i;n+=1)t.duplicates.push(r[o[n]]);t.usedDuplicates=new Array(i)}function D(e,t,n){var i,r,o;if(null!==e&&"object"==typeof e)if(-1!==(r=t.indexOf(e)))-1===n.indexOf(r)&&n.push(r);else if(t.push(e),Array.isArray(e))for(r=0,o=e.length;r<o;r+=1)D(e[r],t,n);else for(i=Object.keys(e),r=0,o=i.length;r<o;r+=1)D(e[i[r]],t,n)}function A(e,t){t=t||{};var n=new o(t);return n.noRefs||E(e,n),I(n,0,e,!0,!0)?n.dump+"\n":""}function T(e,t){return A(e,O.extend({schema:P},t))}var O=n(26),k=n(41),L=n(65),P=n(42),M=Object.prototype.toString,N=Object.prototype.hasOwnProperty,R=9,F=10,$=32,j=33,H=34,V=35,B=37,z=38,U=39,G=42,W=44,K=45,Y=58,X=62,Q=63,J=64,Z=91,ee=93,te=96,ne=123,ie=124,re=125,oe={};oe[0]="\\0",oe[7]="\\a",oe[8]="\\b",oe[9]="\\t",oe[10]="\\n",oe[11]="\\v",oe[12]="\\f",oe[13]="\\r",oe[27]="\\e",oe[34]='\\"',oe[92]="\\\\",oe[133]="\\N",oe[160]="\\_",oe[8232]="\\L",oe[8233]="\\P";var ae=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],se=1,le=2,ce=3,ue=4,de=5;e.exports.dump=A,e.exports.safeDump=T},function(e,t,n){function i(e){return"string"==typeof e||!o(e)&&a(e)&&r(e)==s}var r=n(21),o=n(6),a=n(13),s="[object String]";e.exports=i},function(e,t){e.exports=FormData},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return new $(e).dispatch()}Object.defineProperty(t,"__esModule",{value:!0}),t.plugins=t.SpecMap=void 0;var o=n(62),a=i(o),s=n(18),l=i(s),c=n(102),u=i(c),d=n(40),f=i(d),p=n(11),h=i(p),v=n(96),g=i(v),m=n(318),b=i(m),y=n(14),x=i(y),S=n(152),w=i(S),q=n(153),C=i(q);t.default=r;var _=n(323),I=i(_),E=n(68),D=i(E),A=n(360),T=i(A),O=n(374),k=i(O),L=n(375),P=i(L),M=n(376),N=i(M),R=n(377),F=i(R),$=function(){function e(t){(0,w.default)(this,e),(0,x.default)(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new F.default,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:(0,x.default)((0,b.default)(this),D.default),allowMetaPatches:!1},t),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=this.plugins.map(this.wrapPlugin.bind(this)).filter(D.default.isFunction),this.patches.push(D.default.add([],this.spec)),this.patches.push(D.default.context([],this.context)),this.updatePatches(this.patches)}return(0,C.default)(e,[{key:"debug",value:function(e){if(this.debugLevel===e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=console).log.apply(t,i)}}},{key:"verbose",value:function(e){if("verbose"===this.debugLevel){for(var t,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=console).log.apply(t,["["+e+"]   "].concat(i))}}},{key:"wrapPlugin",value:function(e,t){var n=this.pathDiscriminator,i=null,r=void 0;return e[this.pluginProp]?(i=e,r=e[this.pluginProp]):D.default.isFunction(e)?r=e:D.default.isObject(e)&&(r=function(e){var t=function(e,t){return!Array.isArray(e)||e.every(function(e,n){return e===t[n]})};return f.default.mark(function i(r,o){var a,s,l,c,u,d,p,v,m;return f.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:m=function i(r,l,c){var u,d,p,v,m,b,y,x,S,w,q,C,_,I,E,A;return f.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(D.default.isObject(r)){a.next=6;break}if(e.key!==l[l.length-1]){a.next=4;break}return a.next=4,e.plugin(r,e.key,l,o);case 4:a.next=48;break;case 6:u=l.length-1,d=l[u],p=l.indexOf("properties"),v="properties"===d&&u===p,m=o.allowMetaPatches&&s[r.$$ref],b=!0,y=!1,x=void 0,a.prev=14,S=(0,g.default)((0,h.default)(r));case 16:if(b=(w=S.next()).done){a.next=34;break}if(q=w.value,C=r[q],_=l.concat(q),I=D.default.isObject(C),E=r.$$ref,m){a.next=26;break}if(!I){a.next=26;break}return o.allowMetaPatches&&E&&(s[E]=!0),a.delegateYield(i(C,_,c),"t0",26);case 26:if(v||q!==e.key){a.next=31;break}if(A=t(n,l),n&&!A){a.next=31;break}return a.next=31,e.plugin(C,q,_,o,c);case 31:b=!0,a.next=16;break;case 34:a.next=40;break;case 36:a.prev=36,a.t1=a.catch(14),y=!0,x=a.t1;case 40:a.prev=40,a.prev=41,!b&&S.return&&S.return();case 43:if(a.prev=43,!y){a.next=46;break}throw x;case 46:return a.finish(43);case 47:return a.finish(40);case 48:case"end":return a.stop()}},a,this,[[14,36,40,48],[41,,43,47]])},a=f.default.mark(m),s={},l=!0,c=!1,u=void 0,i.prev=6,d=(0,g.default)(r.filter(D.default.isAdditiveMutation));case 8:if(l=(p=d.next()).done){i.next=14;break}return v=p.value,i.delegateYield(m(v.value,v.path,v),"t0",11);case 11:l=!0,i.next=8;break;case 14:i.next=20;break;case 16:i.prev=16,i.t1=i.catch(6),c=!0,u=i.t1;case 20:i.prev=20,i.prev=21,!l&&d.return&&d.return();case 23:if(i.prev=23,!c){i.next=26;break}throw u;case 26:return i.finish(23);case 27:return i.finish(20);case 28:case"end":return i.stop()}},i,this,[[6,16,20,28],[21,,23,27]])})}(e)),(0,x.default)(r.bind(i),{pluginName:e.name||t,isGenerator:D.default.isGenerator(r)})}},{key:"nextPlugin",value:function(){var e=this;return(0,I.default)(this.wrappedPlugins,function(t){return e.getMutationsForPlugin(t).length>0})}},{key:"nextPromisedPatch",value:function(){if(this.promisedPatches.length>0)return u.default.race(this.promisedPatches.map(function(e){return e.value}))}},{key:"getPluginHistory",value:function(e){var t=this.getPluginName(e);return this.pluginHistory[t]||[]}},{key:"getPluginRunCount",value:function(e){return this.getPluginHistory(e).length}},{key:"getPluginHistoryTip",value:function(e){var t=this.getPluginHistory(e);return t&&t[t.length-1]||{}}},{key:"getPluginMutationIndex",value:function(e){var t=this.getPluginHistoryTip(e).mutationIndex;return"number"!=typeof t?-1:t}},{key:"getPluginName",value:function(e){return e.pluginName}},{key:"updatePluginHistory",value:function(e,t){var n=this.getPluginName(e);(this.pluginHistory[n]=this.pluginHistory[n]||[]).push(t)}},{key:"updatePatches",value:function(e,t){var n=this;D.default.normalizeArray(e).forEach(function(e){if(e instanceof Error)return void n.errors.push(e);try{if(!D.default.isObject(e))return void n.debug("updatePatches","Got a non-object patch",e);if(n.showDebug&&n.allPatches.push(e),D.default.isPromise(e.value))return n.promisedPatches.push(e),void n.promisedPatchThen(e);if(D.default.isContextPatch(e))return void n.setContext(e.path,e.value);if(D.default.isMutation(e))return void n.updateMutations(e)}catch(e){console.error(e),n.errors.push(e)}})}},{key:"updateMutations",value:function(e){"object"===(0,l.default)(e.value)&&!Array.isArray(e.value)&&this.allowMetaPatches&&(e.value=(0,x.default)({},e.value));var t=D.default.applyPatch(this.state,e,{allowMetaPatches:this.allowMetaPatches});t&&(this.mutations.push(e),this.state=t)}},{key:"removePromisedPatch",value:function(e){var t=this.promisedPatches.indexOf(e);if(t<0)return void this.debug("Tried to remove a promisedPatch that isn't there!");this.promisedPatches.splice(t,1)}},{key:"promisedPatchThen",value:function(e){var t=this;return e.value=e.value.then(function(n){var i=(0,x.default)({},e,{value:n});t.removePromisedPatch(e),t.updatePatches(i)}).catch(function(n){t.removePromisedPatch(e),t.updatePatches(n)})}},{key:"getMutations",value:function(e,t){return e=e||0,"number"!=typeof t&&(t=this.mutations.length),this.mutations.slice(e,t)}},{key:"getCurrentMutations",value:function(){return this.getMutationsForPlugin(this.getCurrentPlugin())}},{key:"getMutationsForPlugin",value:function(e){var t=this.getPluginMutationIndex(e);return this.getMutations(t+1)}},{key:"getCurrentPlugin",value:function(){return this.currentPlugin}},{key:"getPatchesOfType",value:function(e,t){return e.filter(t)}},{key:"getLib",value:function(){return this.libMethods}},{key:"_get",value:function(e){return D.default.getIn(this.state,e)}},{key:"_getContext",value:function(e){return this.contextTree.get(e)}},{key:"setContext",value:function(e,t){return this.contextTree.set(e,t)}},{key:"_hasRun",value:function(e){return this.getPluginRunCount(this.getCurrentPlugin())>(e||0)}},{key:"_clone",value:function(e){return JSON.parse((0,a.default)(e))}},{key:"dispatch",value:function(){function e(e){e&&(e=D.default.fullyNormalizeArray(e),n.updatePatches(e,i))}var t=this,n=this,i=this.nextPlugin();if(!i){var r=this.nextPromisedPatch();if(r)return r.then(function(){return t.dispatch()}).catch(function(){return t.dispatch()});var o={spec:this.state,errors:this.errors};return this.showDebug&&(o.patches=this.allPatches),u.default.resolve(o)}if(n.pluginCount=n.pluginCount||{},n.pluginCount[i]=(n.pluginCount[i]||0)+1,n.pluginCount[i]>100)return u.default.resolve({spec:n.state,errors:n.errors.concat(new Error("We've reached a hard limit of 100 plugin runs"))});if(i!==this.currentPlugin&&this.promisedPatches.length){var a=this.promisedPatches.map(function(e){return e.value});return u.default.all(a.map(function(e){return e.then(Function,Function)})).then(function(){return t.dispatch()})}return function(){n.currentPlugin=i;var t=n.getCurrentMutations(),r=n.mutations.length-1;try{if(i.isGenerator){var o=!0,a=!1,s=void 0;try{for(var l,c=(0,g.default)(i(t,n.getLib()));!(o=(l=c.next()).done);o=!0)e(l.value)}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}}else e(i(t,n.getLib()))}catch(t){console.error(t),e([(0,x.default)((0,b.default)(t),{plugin:i})])}finally{n.updatePluginHistory(i,{mutationIndex:r})}return n.dispatch()}()}}]),e}(),j={refs:T.default,allOf:k.default,parameters:P.default,properties:N.default};t.SpecMap=$,t.plugins=j},function(e,t,n){e.exports={default:n(319),__esModule:!0}},function(e,t,n){n(320);var i=n(0).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){var i=n(4);i(i.S,"Object",{create:n(94)})},function(e,t,n){n(322);var i=n(0).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(4);i(i.S+i.F*!n(12),"Object",{defineProperty:n(7).f})},function(e,t,n){var i=n(324),r=n(347),o=i(r);e.exports=o},function(e,t,n){function i(e){return function(t,n,i){var s=Object(t);if(!o(t)){var l=r(n,3);t=a(t),n=function(e){return l(s[e],e,s)}}var c=e(t,n,i);return c>-1?s[l?t[c]:c]:void 0}}var r=n(155),o=n(36),a=n(24);e.exports=i},function(e,t,n){function i(e){var t=o(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}var r=n(326),o=n(337),a=n(159);e.exports=i},function(e,t,n){function i(e,t,n,i){var l=n.length,c=l,u=!i;if(null==e)return!c;for(e=Object(e);l--;){var d=n[l];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++l<c;){d=n[l];var f=d[0],p=e[f],h=d[1];if(u&&d[2]){if(void 0===p&&!(f in e))return!1}else{var v=new r;if(i)var g=i(p,h,f,e,t,v);if(!(void 0===g?o(h,p,a|s,i,v):g))return!1}}return!0}var r=n(78),o=n(156),a=1,s=2;e.exports=i},function(e,t,n){function i(e,t,n,i,g,b){var y=c(e),x=c(t),S=y?h:l(e),w=x?h:l(t);S=S==p?v:S,w=w==p?v:w;var q=S==v,C=w==v,_=S==w;if(_&&u(e)){if(!u(t))return!1;y=!0,q=!1}if(_&&!q)return b||(b=new r),y||d(e)?o(e,t,n,i,g,b):a(e,t,S,n,i,g,b);if(!(n&f)){var I=q&&m.call(e,"__wrapped__"),E=C&&m.call(t,"__wrapped__");if(I||E){var D=I?e.value():e,A=E?t.value():t;return b||(b=new r),g(D,A,n,i,b)}}return!!_&&(b||(b=new r),s(e,t,n,i,g,b))}var r=n(78),o=n(157),a=n(333),s=n(336),l=n(58),c=n(6),u=n(83),d=n(121),f=1,p="[object Arguments]",h="[object Array]",v="[object Object]",g=Object.prototype,m=g.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}var r=n(81),o=n(329),a=n(330);i.prototype.add=i.prototype.push=o,i.prototype.has=a,e.exports=i},function(e,t){function n(e){return this.__data__.set(e,i),this}var i="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t){function n(e,t){return e.has(t)}e.exports=n},function(e,t,n){function i(e,t,n,i,r,q,_){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case S:return!(e.byteLength!=t.byteLength||!q(new o(e),new o(t)));case f:case p:case g:return a(+e,+t);case h:return e.name==t.name&&e.message==t.message;case m:case y:return e==t+"";case v:var I=l;case b:var E=i&u;if(I||(I=c),e.size!=t.size&&!E)return!1;var D=_.get(e);if(D)return D==t;i|=d,_.set(e,t);var A=s(I(e),I(t),i,r,q,_);return _.delete(e),A;case x:if(C)return C.call(e)==C.call(t)}return!1}var r=n(23),o=n(128),a=n(51),s=n(157),l=n(334),c=n(335),u=1,d=2,f="[object Boolean]",p="[object Date]",h="[object Error]",v="[object Map]",g="[object Number]",m="[object RegExp]",b="[object Set]",y="[object String]",x="[object Symbol]",S="[object ArrayBuffer]",w="[object DataView]",q=r?r.prototype:void 0,C=q?q.valueOf:void 0;e.exports=i},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function i(e,t,n,i,a,l){var c=n&o,u=r(e),d=u.length;if(d!=r(t).length&&!c)return!1;for(var f=d;f--;){var p=u[f];if(!(c?p in t:s.call(t,p)))return!1}var h=l.get(e);if(h&&l.get(t))return h==t;var v=!0;l.set(e,t),l.set(t,e);for(var g=c;++f<d;){p=u[f];var m=e[p],b=t[p];if(i)var y=c?i(b,m,p,t,e,l):i(m,b,p,e,t,l);if(!(void 0===y?m===b||a(m,b,n,i,l):y)){v=!1;break}g||(g="constructor"==p)}if(v&&!g){var x=e.constructor,S=t.constructor;x!=S&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof S&&S instanceof S)&&(v=!1)}return l.delete(e),l.delete(t),v}var r=n(126),o=1,a=Object.prototype,s=a.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){for(var t=o(e),n=t.length;n--;){var i=t[n],a=e[i];t[n]=[i,a,r(a)]}return t}var r=n(158),o=n(24);e.exports=i},function(e,t,n){function i(e,t){return s(e)&&l(t)?c(u(e),t):function(n){var i=o(n,e);return void 0===i&&i===t?a(n,e):r(t,i,d|f)}}var r=n(156),o=n(66),a=n(160),s=n(108),l=n(158),c=n(159),u=n(44),d=1,f=2;e.exports=i},function(e,t,n){var i=n(340),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=i(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,function(e,n,i,r){t.push(i?r.replace(o,"$1"):n||e)}),t});e.exports=a},function(e,t,n){function i(e){var t=r(e,function(e){return n.size===o&&n.clear(),e}),n=t.cache;return t}var r=n(341),o=500;e.exports=i},function(e,t,n){function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(i.Cache||r),n}var r=n(81),o="Expected a function";i.Cache=r,e.exports=i},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function i(e,t,n){t=r(t,e);for(var i=-1,u=t.length,d=!1;++i<u;){var f=c(t[i]);if(!(d=null!=e&&n(e,f)))break;e=e[f]}return d||++i!=u?d:!!(u=null==e?0:e.length)&&l(u)&&s(f,u)&&(a(e)||o(e))}var r=n(67),o=n(82),a=n(6),s=n(56),l=n(84),c=n(44);e.exports=i},function(e,t,n){function i(e){return a(e)?r(s(e)):o(e)}var r=n(345),o=n(346),a=n(108),s=n(44);e.exports=i},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function i(e){return function(t){return r(t,e)}}var r=n(107);e.exports=i},function(e,t,n){function i(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var l=null==n?0:a(n);return l<0&&(l=s(i+l,0)),r(e,o(t,3),l)}var r=n(348),o=n(155),a=n(133),s=Math.max;e.exports=i},function(e,t){function n(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}e.exports=n},function(e,t,n){"use strict";t.__esModule=!0;var i=n(350),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,r.default)(e)}},function(e,t,n){e.exports={default:n(351),__esModule:!0}},function(e,t,n){n(39),n(352),e.exports=n(0).Array.from},function(e,t,n){"use strict";var i=n(19),r=n(4),o=n(34),a=n(139),s=n(140),l=n(46),c=n(353),u=n(97);r(r.S+r.F*!n(145)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,d,f=o(e),p="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,g=void 0!==v,m=0,b=u(f);if(g&&(v=i(v,h>2?arguments[2]:void 0,2)),void 0==b||p==Array&&s(b))for(t=l(f.length),n=new p(t);t>m;m++)c(n,m,g?v(f[m],m):f[m]);else for(d=b.call(f),n=new p;!(r=d.next()).done;m++)c(n,m,g?a(d,v,[r.value,m],!0):r.value);return n.length=m,n}})},function(e,t,n){"use strict";var i=n(7),r=n(30);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){"use strict";t.__esModule=!0;var i=n(154),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e,t,n){return t in e?(0,r.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){function i(e){for(var t=0,n=v.length;t<n;t++)if(v[t].obj===e)return v[t]}function r(e,t){for(var n=0,i=e.observers.length;n<i;n++)if(e.observers[n].callback===t)return e.observers[n].observer}function o(e,t){for(var n=0,i=e.observers.length;n<i;n++)if(e.observers[n].observer===t)return void e.observers.splice(n,1)}function a(e,t){t.unobserve()}function s(e,t){var n,a=[],s=i(e);if(s?n=r(s,t):(s=new g(e),v.push(s)),n)return n;if(n={},s.value=d._deepClone(e),t){n.callback=t,n.next=null;var c=function(){l(n)},u=function(){clearTimeout(n.next),n.next=setTimeout(c)};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mouseup",u),window.addEventListener("keyup",u),window.addEventListener("mousedown",u),window.addEventListener("keydown",u),window.addEventListener("change",u)):(document.documentElement.attachEvent("onmouseup",u),document.documentElement.attachEvent("onkeyup",u),document.documentElement.attachEvent("onmousedown",u),document.documentElement.attachEvent("onkeydown",u),document.documentElement.attachEvent("onchange",u)))}return n.patches=a,n.object=e,n.unobserve=function(){l(n),clearTimeout(n.next),o(s,n),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mouseup",u),window.removeEventListener("keyup",u),window.removeEventListener("mousedown",u),window.removeEventListener("keydown",u)):(document.documentElement.detachEvent("onmouseup",u),document.documentElement.detachEvent("onkeyup",u),document.documentElement.detachEvent("onmousedown",u),document.documentElement.detachEvent("onkeydown",u)))},s.observers.push(new m(t,n)),n}function l(e){for(var t,n=0,i=v.length;n<i;n++)if(v[n].obj===e.object){t=v[n];break}c(t.value,e.object,e.patches,""),e.patches.length&&f.applyPatch(t.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function c(e,t,n,i){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var r=d._objectKeys(t),o=d._objectKeys(e),a=!1,s=o.length-1;s>=0;s--){var l=o[s],u=e[l];if(!d.hasOwnProperty(t,l)||void 0===t[l]&&void 0!==u&&!1===Array.isArray(t))n.push({op:"remove",path:i+"/"+d.escapePathComponent(l)}),a=!0;else{var f=t[l];"object"==typeof u&&null!=u&&"object"==typeof f&&null!=f?c(u,f,n,i+"/"+d.escapePathComponent(l)):u!==f&&(!0,n.push({op:"replace",path:i+"/"+d.escapePathComponent(l),value:d._deepClone(f)}))}}if(a||r.length!=o.length)for(var s=0;s<r.length;s++){var l=r[s];d.hasOwnProperty(e,l)||void 0===t[l]||n.push({op:"add",path:i+"/"+d.escapePathComponent(l),value:d._deepClone(t[l])})}}}function u(e,t){var n=[];return c(e,t,n,""),n}var d=(n(161),n(109)),f=n(162),p=n(162);t.applyOperation=p.applyOperation,t.applyPatch=p.applyPatch,t.applyReducer=p.applyReducer,t.getValueByPointer=p.getValueByPointer,t.validate=p.validate,t.validator=p.validator;var h=n(109);t.JsonPatchError=h.PatchError,t.deepClone=h._deepClone,t.escapePathComponent=h.escapePathComponent,t.unescapePathComponent=h.unescapePathComponent;var v=[],g=function(){function e(e){this.observers=[],this.obj=e}return e}(),m=function(){function e(e,t){this.callback=e,this.observer=t}return e}();t.unobserve=a,t.observe=s,t.generate=l,t.compare=u},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}t=e.exports="function"==typeof Object.keys?Object.keys:n,t.shim=n},function(e,t){function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();t=e.exports=r?n:i,t.supported=n,t.unsupported=i},function(e,t,n){"use strict";(function(t){function n(e){return e instanceof t||e instanceof Date||e instanceof RegExp}function i(e){if(e instanceof t){var n=t.alloc?t.alloc(e.length):new t(e.length);return e.copy(n),n}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);throw new Error("Unexpected situation")}function r(e){var t=[];return e.forEach(function(e,o){"object"==typeof e&&null!==e?Array.isArray(e)?t[o]=r(e):n(e)?t[o]=i(e):t[o]=a({},e):t[o]=e}),t}function o(e,t){return"__proto__"===t?void 0:e[t]}var a=e.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var e,t,s=arguments[0],l=Array.prototype.slice.call(arguments,1);return l.forEach(function(l){"object"!=typeof l||null===l||Array.isArray(l)||Object.keys(l).forEach(function(c){return t=o(s,c),e=o(l,c),e===s?void 0:"object"!=typeof e||null===e?void(s[c]=e):Array.isArray(e)?void(s[c]=r(e)):n(e)?void(s[c]=i(e)):"object"!=typeof t||null===t||Array.isArray(t)?void(s[c]=a({},e)):void(s[c]=a(t,e))})}),s}}).call(t,n(43).Buffer)},function(e,t,n){"use strict";function i(e){return null===e?"null":void 0===e?"undefined":"object"===(void 0===e?"undefined":l(e))?Array.isArray(e)?"array":"object":void 0===e?"undefined":l(e)}function r(e){return"object"===i(e)?a(e):"array"===i(e)?o(e):e}function o(e){return e.map(r)}function a(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=r(e[n]));return t}function s(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={arrayBehaviour:n.arrayBehaviour||"replace"},l=t.map(function(e){return e||{}}),c=e||{},u=0;u<l.length;u++)for(var d=l[u],f=Object.keys(d),p=0;p<f.length;p++){var h=f[p],v=d[h],g=i(v),m=i(c[h]);if("object"===g)if("undefined"!==m){var b="object"===m?c[h]:{};c[h]=s({},[b,a(v)],r)}else c[h]=a(v);else if("array"===g)if("array"===m){var y=o(v);c[h]="merge"===r.arrayBehaviour?c[h].concat(y):y}else c[h]=o(v);else c[h]=v}return c}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return s(e,n)},e.exports.noMutate=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s({},t)},e.exports.withOptions=function(e,t,n){return s(e,t,n)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!H.test(e)){if(!t)throw new V("Tried to resolve a relative URL, without having a basePath. path: '"+e+"' basePath: '"+t+"'");return M.default.resolve(t,e)}return e}function o(e,t){var n=void 0;return n=e&&e.response&&e.response.body?e.response.body.code+" "+e.response.body.message:e.message,new V("Could not resolve reference: "+n,t,e)}function a(e){return(e+"").split("#")}function s(e,t){var n=B[e];if(n&&!R.default.isPromise(n))try{var i=d(t,n);return(0,D.default)(C.default.resolve(i),{__value:i})}catch(e){return C.default.reject(e)}return c(e).then(function(e){return d(t,e)})}function l(e){void 0!==e?delete B[e]:(0,w.default)(B).forEach(function(e){delete B[e]})}function c(e){var t=B[e];return t?R.default.isPromise(t)?t:C.default.resolve(t):(B[e]=G.fetchJSON(e).then(function(t){return B[e]=t,t}),B[e])}function u(e){return(0,A.fetch)(e,{headers:{Accept:"application/json, application/yaml"},loadSpec:!0}).then(function(e){return e.text()}).then(function(e){return O.default.safeLoad(e)})}function d(e,t){var n=f(e);if(n.length<1)return t;var i=R.default.getIn(t,n);if(void 0===i)throw new V("Could not resolve pointer: "+e+" does not exist in document",{pointer:e});return i}function f(e){if("string"!=typeof e)throw new TypeError("Expected a string, got a "+(void 0===e?"undefined":(0,x.default)(e)));return"/"===e[0]&&(e=e.substr(1)),""===e?[]:e.split("/").map(p)}function p(e){return"string"!=typeof e?e:L.default.unescape(e.replace(/~1/g,"/").replace(/~0/g,"~"))}function h(e){return L.default.escape(e.replace(/~/g,"~0").replace(/\//g,"~1"))}function v(e){return 0===e.length?"":"/"+e.map(h).join("/")}function g(e,t){if(W(t))return!0;var n=e.charAt(t.length),i=t.slice(-1);return 0===e.indexOf(t)&&(!n||"/"===n||"#"===n)&&"#"!==i}function m(e,t,n,i){var r=z.get(i);r||(r={},z.set(i,r));var o=v(n),a=(t||"<specmap-base>")+"#"+e;if(t==i.contextTree.get([]).baseDoc&&g(o,e))return!0;var s="";if(n.some(function(e){return s=s+"/"+h(e),r[s]&&r[s].some(function(e){return g(e,a)||g(a,e)})}))return!0;r[o]=(r[o]||[]).concat(a)}function b(e,t){function n(e){return R.default.isObject(e)&&(i.indexOf(e)>=0||(0,w.default)(e).some(function(t){return n(e[t])}))}var i=[e];return t.path.reduce(function(e,t){return i.push(e[t]),e[t]},e),n(t.value)}Object.defineProperty(t,"__esModule",{value:!0});var y=n(18),x=i(y),S=n(11),w=i(S),q=n(102),C=i(q),_=n(361),I=i(_),E=n(14),D=i(E),A=n(372),T=n(148),O=i(T),k=n(373),L=i(k),P=n(92),M=i(P),N=n(68),R=i(N),F=n(164),$=i(F),j=n(165),H=new RegExp("^([a-z]+://|//)","i"),V=(0,$.default)("JSONRefError",function(e,t,n){this.originalError=n,(0,D.default)(this,t||{})}),B={},z=new I.default,U={key:"$ref",plugin:function(e,t,n,i){var l=n.slice(0,-1);if(!(0,j.isFreelyNamed)(l)){var c=i.getContext(n).baseDoc;if("string"!=typeof e)return new V("$ref: must be a string (JSON-Ref)",{$ref:e,baseDoc:c,fullPath:n});var u=a(e),d=u[0],p=u[1]||"",h=void 0;try{h=c||d?r(d,c):null}catch(t){return o(t,{pointer:p,$ref:e,basePath:h,fullPath:n})}var v=void 0,g=void 0;if(!m(p,h,l,i)){if(null==h?(g=f(p),void 0===(v=i.get(g))&&(v=new V("Could not resolve reference: "+e,{pointer:p,$ref:e,baseDoc:c,fullPath:n}))):(v=s(h,p),v=null!=v.__value?v.__value:v.catch(function(t){throw o(t,{pointer:p,$ref:e,baseDoc:c,fullPath:n})})),v instanceof Error)return[R.default.remove(n),v];var y=R.default.replace(l,v,{$$ref:e});if(h&&h!==c)return[y,R.default.context(l,{baseDoc:h})];try{if(!b(i.state,y))return y}catch(e){return null}}}}},G=(0,D.default)(U,{docCache:B,absoluteify:r,clearCache:l,JSONRefError:V,wrapError:o,getDoc:c,split:a,extractFromDoc:s,fetchJSON:u,extract:d,jsonPointerToArray:f,unescapeJsonPointerToken:p});t.default=G;var W=function(e){return!e||"/"===e||"#"===e};e.exports=t.default},function(e,t,n){e.exports={default:n(362),__esModule:!0}},function(e,t,n){n(100),n(37),n(363),n(368),n(370),e.exports=n(0).WeakMap},function(e,t,n){"use strict";var i,r=n(110)(0),o=n(93),a=n(63),s=n(113),l=n(366),c=n(5),u=n(16),d=n(163),f=a.getWeak,p=Object.isExtensible,h=l.ufstore,v={},g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(e){if(c(e)){var t=f(e);return!0===t?h(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(d(this,"WeakMap"),e,t)}},b=e.exports=n(367)("WeakMap",g,m,l,!0,!0);u(function(){return 7!=(new b).set((Object.freeze||Object)(v),7).get(v)})&&(i=l.getConstructor(g,"WeakMap"),s(i.prototype,m),a.NEED=!0,r(["delete","has","get","set"],function(e){var t=b.prototype,n=t[e];o(t,e,function(t,r){if(c(t)&&!p(t)){this._f||(this._f=new i);var o=this._f[e](t,r);return"set"==e?this:o}return n.call(this,t,r)})}))},function(e,t,n){var i=n(365);e.exports=function(e,t){return new(i(e))(t)}},function(e,t,n){var i=n(5),r=n(137),o=n(3)("species");e.exports=function(e){var t;return r(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!r(t.prototype)||(t=void 0),i(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var i=n(105),r=n(63).getWeak,o=n(8),a=n(5),s=n(103),l=n(64),c=n(110),u=n(17),d=n(163),f=c(5),p=c(6),h=0,v=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},m=function(e,t){return f(e.a,function(e){return e[0]===t})};g.prototype={get:function(e){var t=m(this,e);if(t)return t[1]},has:function(e){return!!m(this,e)},set:function(e,t){var n=m(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var c=e(function(e,i){s(e,c,t,"_i"),e._t=t,e._i=h++,e._l=void 0,void 0!=i&&l(i,n,e[o],e)});return i(c.prototype,{delete:function(e){if(!a(e))return!1;var n=r(e);return!0===n?v(d(this,t)).delete(e):n&&u(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=r(e);return!0===n?v(d(this,t)).has(e):n&&u(n,this._i)}}),c},def:function(e,t,n){var i=r(o(t),!0);return!0===i?v(e).set(t,n):i[e._i]=n,e},ufstore:v}},function(e,t,n){"use strict";var i=n(2),r=n(4),o=n(63),a=n(16),s=n(15),l=n(105),c=n(64),u=n(103),d=n(5),f=n(38),p=n(7).f,h=n(110)(0),v=n(12);e.exports=function(e,t,n,g,m,b){var y=i[e],x=y,S=m?"set":"add",w=x&&x.prototype,q={};return v&&"function"==typeof x&&(b||w.forEach&&!a(function(){(new x).entries().next()}))?(x=t(function(t,n){u(t,x,e,"_c"),t._c=new y,void 0!=n&&c(n,m,t[S],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in w&&(!b||"clear"!=e)&&s(x.prototype,e,function(n,i){if(u(this,x,e),!t&&b&&!d(n))return"get"==e&&void 0;var r=this._c[e](0===n?0:n,i);return t?this:r})}),b||p(x.prototype,"size",{get:function(){return this._c.size}})):(x=g.getConstructor(t,e,m,S),l(x.prototype,n),o.NEED=!0),f(x,e),q[e]=x,r(r.G+r.W+r.F,q),b||g.setStrong(x,e,m),x}},function(e,t,n){n(369)("WeakMap")},function(e,t,n){"use strict";var i=n(4);e.exports=function(e){i(i.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(371)("WeakMap")},function(e,t,n){"use strict";var i=n(4),r=n(29),o=n(19),a=n(64);e.exports=function(e){i(i.S,e,{from:function(e){var t,n,i,s,l=arguments[1];return r(this),t=void 0!==l,t&&r(l),void 0==e?new this:(n=[],t?(i=0,s=o(l,arguments[2],2),a(e,!1,function(e){n.push(s(e,i++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t){var n={};!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function i(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function l(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}function u(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(m.arrayBuffer&&m.blob&&y(e))this._bodyArrayBuffer=u(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!x(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return S.indexOf(t)>-1?t:e}function p(e,t){var n=(t=t||{}).body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function v(e){var t=new r;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}}),t}function g(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(m.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=function(e){return e&&DataView.prototype.isPrototypeOf(e)},x=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};r.prototype.append=function(e,i){e=t(e),i=n(i);var r=this.map[e];this.map[e]=r?r+","+i:i},r.prototype.delete=function(e){delete this.map[t(e)]},r.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},r.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},r.prototype.set=function(e,i){this.map[t(e)]=n(i)},r.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),i(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),i(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),i(e)},m.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},d.call(p.prototype),d.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];g.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=p,e.Response=g,e.fetch=function(e,t){return new Promise(function(n,i){var r=new p(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new g(t,e))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(r.method,r.url,!0),"include"===r.credentials&&(o.withCredentials=!0),"responseType"in o&&m.blob&&(o.responseType="blob"),r.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}(void 0!==n?n:this),e.exports=n},function(e,t,n){"use strict";function i(e,t){try{return decodeURIComponent(e)}catch(n){return o.unescapeBuffer(e,t).toString()}}function r(e,t){try{return t(e)}catch(t){return o.unescape(e,!0)}}var o=t,a=n(43).Buffer;o.unescapeBuffer=function(e,t){for(var n,i,r,o=new a(e.length),s=0,l=0,c=0;l<=e.length;l++){var u=l<e.length?e.charCodeAt(l):NaN;switch(s){case 0:switch(u){case 37:n=0,i=0,s=1;break;case 43:t&&(u=32);default:o[c++]=u}break;case 1:if(r=u,u>=48&&u<=57)n=u-48;else if(u>=65&&u<=70)n=u-65+10;else{if(!(u>=97&&u<=102)){o[c++]=37,o[c++]=u,s=0;break}n=u-97+10}s=2;break;case 2:if(s=0,u>=48&&u<=57)i=u-48;else if(u>=65&&u<=70)i=u-65+10;else{if(!(u>=97&&u<=102)){o[c++]=37,o[c++]=r,o[c++]=u;break}i=u-97+10}o[c++]=16*n+i}}return o.slice(0,c-1)},o.unescape=i;for(var s=new Array(256),l=0;l<256;++l)s[l]="%"+((l<16?"0":"")+l.toString(16)).toUpperCase();o.escape=function(e){"string"!=typeof e&&(e+="");for(var t="",n=0,i=0;i<e.length;++i){var r=e.charCodeAt(i);if(!(33===r||45===r||46===r||95===r||126===r||r>=39&&r<=42||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122))if(i-n>0&&(t+=e.slice(n,i)),r<128)n=i+1,t+=s[r];else if(r<2048)n=i+1,t+=s[192|r>>6]+s[128|63&r];else if(r<55296||r>=57344)n=i+1,t+=s[224|r>>12]+s[128|r>>6&63]+s[128|63&r];else{++i;var o;if(!(i<e.length))throw new URIError("URI malformed");o=1023&e.charCodeAt(i),n=i+1,r=65536+((1023&r)<<10|o),t+=s[240|r>>18]+s[128|r>>12&63]+s[128|r>>6&63]+s[128|63&r]}}return 0===n?e:n<e.length?t+e.slice(n):t};var c=function(e){return"string"==typeof e?e:"number"==typeof e&&isFinite(e)?""+e:"boolean"==typeof e?e?"true":"false":""};o.stringify=o.encode=function(e,t,n,i){t=t||"&",n=n||"=";var r=o.escape;if(i&&"function"==typeof i.encodeURIComponent&&(r=i.encodeURIComponent),null!==e&&"object"==typeof e){for(var a=Object.keys(e),s=a.length,l=s-1,u="",d=0;d<s;++d){var f=a[d],p=e[f],h=r(c(f))+n;if(Array.isArray(p)){for(var v=p.length,g=v-1,m=0;m<v;++m)u+=h+r(c(p[m])),m<g&&(u+=t);v&&d<l&&(u+=t)}else u+=h+r(c(p)),d<l&&(u+=t)}return u}return""},o.parse=o.decode=function(e,t,n,a){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;"string"!=typeof t&&(t+="");var l=n.length,c=t.length,u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var d=1/0;u>0&&(d=u);var f=o.unescape;a&&"function"==typeof a.decodeURIComponent&&(f=a.decodeURIComponent);for(var p=f!==i,h=[],v=0,g=0,m=0,b="",y="",x=p,S=p,w=0,q=0;q<e.length;++q){var C=e.charCodeAt(q);if(C!==t.charCodeAt(g)){if(g=0,S||(37===C?w=1:w>0&&(C>=48&&C<=57||C>=65&&C<=70||C>=97&&C<=102)?3==++w&&(S=!0):w=0),m<l){if(C===n.charCodeAt(m)){if(++m===l){var _=q-m+1;v<_&&(b+=e.slice(v,_)),w=0,v=q+1}continue}m=0,x||(37===C?w=1:w>0&&(C>=48&&C<=57||C>=65&&C<=70||C>=97&&C<=102)?3==++w&&(x=!0):w=0)}43===C&&(m<l?(q-v>0&&(b+=e.slice(v,q)),b+="%20",x=!0):(q-v>0&&(y+=e.slice(v,q)),y+="%20",S=!0),v=q+1)}else if(++g===c){var _=q-g+1;if(m<l?v<_&&(b+=e.slice(v,_)):v<_&&(y+=e.slice(v,_)),x&&(b=r(b,f)),S&&(y=r(y,f)),-1===h.indexOf(b))s[b]=y,h[h.length]=b;else{var I=s[b];I instanceof Array?I[I.length]=y:s[b]=[I,y]}if(0==--d)break;x=S=p,w=0,b=y="",v=q+1,g=m=0}}if(d>0&&(v<e.length||m>0))if(v<e.length&&(m<l?b+=e.slice(v):g<c&&(y+=e.slice(v))),x&&(b=r(b,f)),S&&(y=r(y,f)),-1===h.indexOf(b))s[b]=y,h[h.length]=b;else{var I=s[b];I instanceof Array?I[I.length]=y:s[b]=[I,y]}return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),o=n(165);t.default={key:"allOf",plugin:function(e,t,n,i,a){if(!a.meta||!a.meta.$$ref){var s=n.slice(0,-1);if(!(0,o.isFreelyNamed)(s)){if(!Array.isArray(e)){var l=new TypeError("allOf must be an array");return l.fullPath=n,l}var c=!1,u=a.value;s.forEach(function(e){u&&(u=u[e])}),u=(0,r.default)({},u),delete u.allOf;var d=[i.replace(s,{})].concat(e.map(function(e,t){if(!i.isObject(e)){if(c)return null;c=!0;var r=new TypeError("Elements in allOf must be objects");return r.fullPath=n,r}return i.mergeDeep(s,e)}));return d.push(i.mergeDeep(s,u)),u.$$ref||d.push(i.remove([].concat(s,"$$ref"))),d}}}},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),o=i(r),a=n(68),s=i(a);t.default={key:"parameters",plugin:function(e,t,n,i,r){if(Array.isArray(e)&&e.length){var a=(0,o.default)([],e),l=n.slice(0,-1),c=(0,o.default)({},s.default.getIn(i.spec,l));return e.forEach(function(e,t){try{a[t].default=i.parameterMacro(c,e)}catch(e){var r=new Error(e);return r.fullPath=n,r}}),s.default.replace(n,a)}return s.default.replace(n,e)}},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),o=i(r),a=n(68),s=i(a);t.default={key:"properties",plugin:function(e,t,n,i){var r=(0,o.default)({},e);for(var a in e)try{r[a].default=i.modelPropertyMacro(r[a])}catch(e){var l=new Error(e);return l.fullPath=n,l}return s.default.replace(n,r)}},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return o({children:{}},e,t)}function o(e,t,n){return e.value=t||{},e.protoValue=n?(0,c.default)({},n.protoValue,e.value):e.value,(0,s.default)(e.children).forEach(function(t){var n=e.children[t];e.children[t]=o(n,n.value,e)}),e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),s=i(a),l=n(28),c=i(l),u=n(152),d=i(u),f=n(153),p=i(f),h=function(){function e(t){(0,d.default)(this,e),this.root=r(t||{})}return(0,p.default)(e,[{key:"set",value:function(e,t){var n=this.getParent(e,!0);if(!n)return void o(this.root,t,null);var i=e[e.length-1],a=n.children;if(a[i])return void o(a[i],t,n);a[i]=r(t,n)}},{key:"get",value:function(e){if(e=e||[],e.length<1)return this.root.value;for(var t=this.root,n=void 0,i=void 0,r=0;r<e.length&&(i=e[r],n=t.children,n[i]);r++)t=n[i];return t&&t.protoValue}},{key:"getParent",value:function(e,t){return!e||e.length<1?null:e.length<2?this.root:e.slice(0,-1).reduce(function(e,n){if(!e)return e;var i=e.children;return!i[n]&&t&&(i[n]=r(null,e)),i[n]},this.root)}}]),e}();t.default=h,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(40),o=i(r),a=n(28),s=i(a),l=n(101),c=i(l),u=n(66),d=i(u),f=n(151),p=i(f),h=n(45);t.default=function(){function e(e,n){return t.apply(this,arguments)}var t=(0,c.default)(o.default.mark(function e(t,n){var i,r,a,l,c,u,f,v,g,m,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=b.returnEntireTree,r=b.baseDoc,a=b.requestInterceptor,l=b.responseInterceptor,c=b.parameterMacro,u=b.modelPropertyMacro,f={pathDiscriminator:n,baseDoc:r,requestInterceptor:a,responseInterceptor:l,parameterMacro:c,modelPropertyMacro:u},v=(0,h.normalizeSwagger)({spec:t}),g=v.spec,e.next=5,(0,p.default)((0,s.default)({},f,{spec:g,allowMetaPatches:!0,skipNormalization:!0}));case 5:return m=e.sent,!i&&Array.isArray(n)&&n.length&&(m.spec=(0,d.default)(m.spec,n)||null),e.abrupt("return",m);case 8:case"end":return e.stop()}},e,this)}));return e}(),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=t.pathName,i=t.method,r=t.operationId;return function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.execute((0,c.default)({spec:e.spec},(0,d.default)(e,"requestInterceptor","responseInterceptor","userFetch"),{pathName:n,method:i,parameters:t,operationId:r},o))}}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=v.makeExecute(e),n=v.mapTagOperations({v2OperationIdCompatibilityMode:e.v2OperationIdCompatibilityMode,spec:e.spec,cb:t}),i={};for(var r in n){i[r]={operations:{}};for(var o in n[r])i[r].operations[o]={execute:n[r][o]}}return{apis:i}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=v.makeExecute(e);return{apis:v.mapTagOperations({v2OperationIdCompatibilityMode:e.v2OperationIdCompatibilityMode,spec:e.spec,cb:t})}}function s(e){var t=e.spec,n=e.cb,i=void 0===n?p:n,r=e.defaultTag,o=void 0===r?"default":r,a=e.v2OperationIdCompatibilityMode,s={},l={};return(0,f.eachOperation)(t,function(e){var n=e.pathName,r=e.method,c=e.operation;(c.tags?h(c.tags):[o]).forEach(function(e){if("string"==typeof e){var o=l[e]=l[e]||{},u=(0,f.opId)(c,n,r,{v2OperationIdCompatibilityMode:a}),d=i({spec:t,pathName:n,method:r,operation:c,operationId:u});if(s[u])s[u]++,o[""+u+s[u]]=d;else if(void 0!==o[u]){var p=s[u]||1;s[u]=p+1,o[""+u+s[u]]=d;var h=o[u];delete o[u],o[""+u+p]=h}else o[u]=d}})}),l}Object.defineProperty(t,"__esModule",{value:!0}),t.self=void 0;var l=n(28),c=i(l);t.makeExecute=r,t.makeApisTagOperationsOperationExecute=o,t.makeApisTagOperation=a,t.mapTagOperations=s;var u=n(380),d=i(u),f=n(45),p=function(){return null},h=function(e){return Array.isArray(e)?e:[e]},v=t.self={mapTagOperations:s,makeExecute:r}},function(e,t,n){var i=n(381),r=n(384),o=r(function(e,t){return null==e?{}:i(e,t)});e.exports=o},function(e,t,n){function i(e,t){return r(e,t,function(t,n){return o(e,n)})}var r=n(382),o=n(160);e.exports=i},function(e,t,n){function i(e,t,n){for(var i=-1,s=t.length,l={};++i<s;){var c=t[i],u=r(e,c);n(u,c)&&o(l,a(c,e),u)}return l}var r=n(107),o=n(383),a=n(67);e.exports=i},function(e,t,n){function i(e,t,n,i){if(!s(e))return e;t=o(t,e);for(var c=-1,u=t.length,d=u-1,f=e;null!=f&&++c<u;){var p=l(t[c]),h=n;if(c!=d){var v=f[p];h=i?i(v,p,f):void 0,void 0===h&&(h=s(v)?v:a(t[c+1])?[]:{})}r(f,p,h),f=f[p]}return e}var r=n(54),o=n(67),a=n(56),s=n(10),l=n(44);e.exports=i},function(e,t,n){function i(e){return a(o(e,void 0,r),e+"")}var r=n(385),o=n(129),a=n(130);e.exports=i},function(e,t,n){function i(e){return(null==e?0:e.length)?r(e,1):[]}var r=n(386);e.exports=i},function(e,t,n){function i(e,t,n,a,s){var l=-1,c=e.length;for(n||(n=o),s||(s=[]);++l<c;){var u=e[l];t>0&&n(u)?t>1?i(u,t-1,n,a,s):r(s,u):a||(s[s.length]=u)}return s}var r=n(88),o=n(387);e.exports=i},function(e,t,n){function i(e){return a(e)||o(e)||!!(s&&e&&e[s])}var r=n(23),o=n(82),a=n(6),s=r?r.isConcatSpreadable:void 0;e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.http,n=e.fetch,i=e.spec,r=e.operationId,o=e.pathName,a=e.method,s=e.parameters,l=e.securities,c=(0,g.default)(e,["http","fetch","spec","operationId","pathName","method","parameters","securities"]),u=t||n||P.default;o&&a&&!r&&(r=(0,U.legacyIdFromPathMethod)(o,a));var d=X.buildRequest((0,h.default)({spec:i,operationId:r,parameters:s,securities:l,http:u},c));return d.body&&((0,_.default)(d.body)||(0,E.default)(d.body))&&(d.body=(0,f.default)(d.body)),u(d)}function o(e){var t=e.spec,n=e.operationId,i=(e.securities,e.requestContentType,e.responseContentType),r=e.scheme,o=e.requestInterceptor,s=e.responseInterceptor,l=e.contextUrl,c=e.userFetch,u=(e.requestBody,e.server),d=e.serverVariables,f=e.http,p=e.parameters,v=e.parameterBuilders,g=(0,U.isOAS3)(t);v||(v=g?j.default:F.default);var m=f&&f.withCredentials?"include":"same-origin",y={url:"",credentials:m,headers:{},cookies:{}};o&&(y.requestInterceptor=o),s&&(y.responseInterceptor=s),c&&(y.userFetch=c);var x=(0,U.getOperationRaw)(t,n);if(!x)throw new W("Operation "+n+" not found");var S=x.operation,w=void 0===S?{}:S,q=x.method,C=x.pathName;if(y.url+=a({spec:t,scheme:r,contextUrl:l,server:u,serverVariables:d,pathName:C,method:q}),!n)return delete y.cookies,y;y.url+=C,y.method=(""+q).toUpperCase(),p=p||{};var _=t.paths[C]||{};i&&(y.headers.accept=i);var I=Y([].concat(G(w.parameters)).concat(G(_.parameters)));I.forEach(function(e){var n=v[e.in],i=void 0;if("body"===e.in&&e.schema&&e.schema.properties&&(i=p),i=e&&e.name&&p[e.name],void 0===i?i=e&&e.name&&p[e.in+"."+e.name]:K(e.name,I).length>1&&console.warn("Parameter '"+e.name+"' is ambiguous because the defined spec has more than one parameter with the name: '"+e.name+"' and the passed-in parameter values did not define an 'in' value."),null!==i){if(void 0!==e.default&&void 0===i&&(i=e.default),void 0===i&&e.required&&!e.allowEmptyValue)throw new Error("Required parameter "+e.name+" is not provided");if(g&&e.schema&&"object"===e.schema.type&&"string"==typeof i)try{i=JSON.parse(i)}catch(e){throw new Error("Could not parse object parameter value string as JSON")}n&&n({req:y,parameter:e,value:i,operation:w,spec:t})}});var E=(0,h.default)({},e,{operation:w});if(y=g?(0,V.default)(E,y):(0,z.default)(E,y),y.cookies&&(0,b.default)(y.cookies).length){var D=(0,b.default)(y.cookies).reduce(function(e,t){var n=y.cookies[t];return e+(e?"&":"")+k.default.serialize(t,n)},"");y.headers.Cookie=D}return y.cookies&&delete y.cookies,(0,L.mergeInQueryOrForm)(y),y}function a(e){return(0,U.isOAS3)(e.spec)?s(e):u(e)}function s(e){var t=e.spec,n=e.pathName,i=e.method,r=e.server,o=e.contextUrl,a=e.serverVariables,s=void 0===a?{}:a,u=(0,q.default)(t,["paths",n,(i||"").toLowerCase(),"servers"])||(0,q.default)(t,["paths",n,"servers"])||(0,q.default)(t,["servers"]),d="",f=null;if(r&&u&&u.length){var p=u.map(function(e){return e.url});p.indexOf(r)>-1&&(d=r,f=u[p.indexOf(r)])}(!d&&u&&u.length&&(d=u[0].url,f=u[0]),d.indexOf("{")>-1)&&c(d).forEach(function(e){if(f.variables&&f.variables[e]){var t=f.variables[e],n=s[e]||t.default,i=new RegExp("{"+e+"}","g");d=d.replace(i,n)}});return l(d,o)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=T.default.parse(e),i=T.default.parse(t),r=Q(n.protocol)||Q(i.protocol)||"",o=n.host||i.host,a=n.pathname||"",s=void 0;return s=r&&o?r+"://"+(o+a):a,"/"===s[s.length-1]?s.slice(0,-1):s}function c(e){for(var t=[],n=/{([^}]+)}/g,i=void 0;i=n.exec(e);)t.push(i[1]);return t}function u(e){var t=e.spec,n=e.scheme,i=e.contextUrl,r=void 0===i?"":i,o=T.default.parse(r),a=Array.isArray(t.schemes)?t.schemes[0]:null,s=n||a||Q(o.protocol)||"http",l=t.host||o.host||"",c=t.basePath||"",u=void 0;return u=s&&l?s+"://"+(l+c):c,"/"===u[u.length-1]?u.slice(0,-1):u}Object.defineProperty(t,"__esModule",{value:!0}),t.self=void 0;var d=n(62),f=i(d),p=n(28),h=i(p),v=n(389),g=i(v),m=n(11),b=i(m),y=n(14),x=i(y);t.execute=r,t.buildRequest=o,t.baseUrl=a;var S=n(59),w=(i(S),n(66)),q=i(w),C=n(390),_=i(C),I=n(6),E=i(I),D=n(111),A=(i(D),n(92)),T=i(A),O=n(391),k=i(O),L=n(61),P=i(L),M=n(164),N=i(M),R=n(392),F=i(R),$=n(393),j=i($),H=n(398),V=i(H),B=n(399),z=i(B),U=n(45),G=function(e){return Array.isArray(e)?e:[]},W=(0,N.default)("OperationNotFoundError",function(e,t,n){this.originalError=n,(0,x.default)(this,t||{})}),K=function(e,t){return t.filter(function(t){return t.name===e})},Y=function(e){var t={};e.forEach(function(e){t[e.in]||(t[e.in]={}),t[e.in][e.name]=e});var n=[];return(0,b.default)(t).forEach(function(e){(0,b.default)(t[e]).forEach(function(i){n.push(t[e][i])})}),n},X=t.self={buildRequest:o},Q=function(e){return e?e.replace(/\W/g,""):null}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}},function(e,t,n){function i(e){if(!a(e)||r(e)!=s)return!1;var t=o(e);if(null===t)return!0;var n=d.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==f}var r=n(21),o=n(89),a=n(13),s="[object Object]",l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,f=u.call(Object);e.exports=i},function(e,t,n){"use strict";function i(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},i=t||{},r=e.split(l),s=i.decode||a,c=0;c<r.length;c++){var u=r[c],d=u.indexOf("=");if(!(d<0)){var f=u.substr(0,d).trim(),p=u.substr(++d,u.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),void 0==n[f]&&(n[f]=o(p,s))}}return n}function r(e,t,n){var i=n||{},r=i.encode||s;if("function"!=typeof r)throw new TypeError("option encode is invalid");if(!c.test(e))throw new TypeError("argument name is invalid");var o=r(t);if(o&&!c.test(o))throw new TypeError("argument val is invalid");var a=e+"="+o;if(null!=i.maxAge){var l=i.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");a+="; Max-Age="+Math.floor(l)}if(i.domain){if(!c.test(i.domain))throw new TypeError("option domain is invalid");a+="; Domain="+i.domain}if(i.path){if(!c.test(i.path))throw new TypeError("option path is invalid");a+="; Path="+i.path}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(a+="; HttpOnly"),i.secure&&(a+="; Secure"),i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}return a}function o(e,t){try{return t(e)}catch(t){return e}}t.parse=i,t.serialize=r;var a=decodeURIComponent,s=encodeURIComponent,l=/; */,c=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},function(e,t,n){"use strict";function i(e){var t=e.req,n=e.value;t.body=n}function r(e){var t=e.req,n=e.value,i=e.parameter;(n||i.allowEmptyValue)&&(t.form=t.form||{},t.form[i.name]={value:n,allowEmptyValue:i.allowEmptyValue,collectionFormat:i.collectionFormat})}function o(e){var t=e.req,n=e.parameter,i=e.value;t.headers=t.headers||{},void 0!==i&&(t.headers[n.name]=i)}function a(e){var t=e.req,n=e.value,i=e.parameter;t.url=t.url.replace("{"+i.name+"}",encodeURIComponent(n))}function s(e){var t=e.req,n=e.value,i=e.parameter;if(t.query=t.query||{},!1===n&&"boolean"===i.type&&(n="false"),0===n&&["number","integer"].indexOf(i.type)>-1&&(n="0"),n)t.query[i.name]={collectionFormat:i.collectionFormat,value:n};else if(i.allowEmptyValue&&void 0!==n){var r=i.name;t.query[r]=t.query[r]||{},t.query[r].allowEmptyValue=!0}}Object.defineProperty(t,"__esModule",{value:!0}),t.default={body:i,header:o,query:s,path:a,formData:r},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.req,n=e.value,i=e.parameter,r=i.name,o=i.style,a=i.explode,s=(0,p.default)({key:i.name,value:n,style:o||"simple",explode:a||!1,escape:!0});t.url=t.url.replace("{"+r+"}",s)}function o(e){var t=e.req,n=e.value,i=e.parameter;if(t.query=t.query||{},!1===n&&(n="false"),0===n&&(n="0"),n){var r=void 0===n?"undefined":(0,d.default)(n);if("deepObject"===i.style)(0,c.default)(n).forEach(function(e){var r=n[e];t.query[i.name+"["+e+"]"]={value:(0,p.default)({key:e,value:r,style:"deepObject",escape:i.allowReserved?"unsafe":"reserved"}),skipEncoding:!0}});else if("object"!==r||Array.isArray(n)||"form"!==i.style&&i.style||!i.explode&&void 0!==i.explode)t.query[i.name]={value:(0,p.default)({key:i.name,value:n,style:i.style||"form",explode:void 0===i.explode||i.explode,escape:i.allowReserved?"unsafe":"reserved"}),skipEncoding:!0};else{var o=(0,c.default)(n);o.forEach(function(e){var r=n[e];t.query[e]={value:(0,p.default)({key:e,value:r,style:i.style||"form",escape:i.allowReserved?"unsafe":"reserved"}),skipEncoding:!0}})}}else if(i.allowEmptyValue&&void 0!==n){var a=i.name;t.query[a]=t.query[a]||{},t.query[a].allowEmptyValue=!0}}function a(e){var t=e.req,n=e.parameter,i=e.value;t.headers=t.headers||{},h.indexOf(n.name.toLowerCase())>-1||void 0!==i&&(t.headers[n.name]=(0,p.default)({key:n.name,value:i,style:n.style||"simple",explode:void 0!==n.explode&&n.explode,escape:!1}))}function s(e){var t=e.req,n=e.parameter,i=e.value;t.headers=t.headers||{};var r=void 0===i?"undefined":(0,d.default)(i);if("undefined"!==r){var o="object"===r&&!Array.isArray(i)&&n.explode?"":n.name+"=";t.headers.Cookie=o+(0,p.default)({key:n.name,value:i,escape:!1,style:n.style||"form",explode:void 0!==n.explode&&n.explode})}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(11),c=i(l),u=n(18),d=i(u),f=n(394),p=i(f);t.default={path:r,query:o,header:a,cookie:s};var h=["accept","authorization","content-type"];e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.escape,i=arguments[2];return"number"==typeof e&&(e=e.toString()),"string"==typeof e&&e.length&&n?i?JSON.parse(e):(0,v.stringToCharArray)(e).map(function(e){return m(e)?e:g(e)&&"unsafe"===n?e:((0,h.default)(e)||[]).map(function(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}).map(function(e){return"%"+e}).join("")}).join(""):e}function o(e){var t=e.key,n=e.value,i=e.style,o=e.explode,a=e.escape,s=function(e){return r(e,{escape:a})};if("simple"===i)return n.map(function(e){return s(e)}).join(",");if("label"===i)return"."+n.map(function(e){return s(e)}).join(".");if("matrix"===i)return n.map(function(e){return s(e)}).reduce(function(e,n){return!e||o?(e||"")+";"+t+"="+n:e+","+n},"");if("form"===i){var l=o?"&"+t+"=":",";return n.map(function(e){return s(e)}).join(l)}if("spaceDelimited"===i){var c=o?t+"=":"";return n.map(function(e){return s(e)}).join(" "+c)}if("pipeDelimited"===i){var u=o?t+"=":"";return n.map(function(e){return s(e)}).join("|"+u)}}function a(e){var t=e.key,n=e.value,i=e.style,o=e.explode,a=e.escape,s=function(e){return r(e,{escape:a})},l=(0,c.default)(n);return"simple"===i?l.reduce(function(e,t){var i=s(n[t]),r=o?"=":",";return(e?e+",":"")+t+r+i},""):"label"===i?l.reduce(function(e,t){var i=s(n[t]),r=o?"=":".";return(e?e+".":".")+t+r+i},""):"matrix"===i&&o?l.reduce(function(e,t){var i=s(n[t]);return(e?e+";":";")+t+"="+i},""):"matrix"===i?l.reduce(function(e,i){var r=s(n[i]);return(e?e+",":";"+t+"=")+i+","+r},""):"form"===i?l.reduce(function(e,t){var i=s(n[t]);return(e?e+(o?"&":","):"")+t+(o?"=":",")+i},""):void 0}function s(e){var t=e.key,n=e.value,i=e.style,o=e.escape,a=function(e){return r(e,{escape:o})};return"simple"===i?a(n):"label"===i?"."+a(n):"matrix"===i?";"+t+"="+a(n):"form"===i?a(n):"deepObject"===i?a(n):void 0}Object.defineProperty(t,"__esModule",{value:!0});var l=n(11),c=i(l),u=n(18),d=i(u);t.encodeDisallowedCharacters=r,t.default=function(e){var t=e.value;return Array.isArray(t)?o(e):"object"===(void 0===t?"undefined":(0,d.default)(t))?a(e):s(e)};var f=n(395),p=(i(f),n(396)),h=i(p),v=n(397),g=function(e){return":/?#[]@!$&'()*+,;=".indexOf(e)>-1},m=function(e){return/^[a-z0-9\-._~]+$/i.test(e)}},function(e,t,n){"use strict";var i=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})};e.exports=i},function(e,t){e.exports=function(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i>=55296&&i<=56319&&n+1<e.length){var r=e.charCodeAt(n+1);if(r>=56320&&r<=57343){var o=1024*(i-55296)+r-56320+65536;t.push(240+Math.floor(o/64/64/64),128+Math.floor(o/64/64)%64,128+Math.floor(o/64)%64,128+o%64),n+=1;continue}}i>=2048?t.push(224+Math.floor(i/64/64),128+Math.floor(i/64)%64,128+i%64):i>=128?t.push(192+Math.floor(i/64),128+i%64):t.push(i)}return t}},function(e,t){!function(){function e(e,t){function n(e,t){return i(e,new RegExp(a.source,"g"),t)}function i(e,t,n){if(!r(e))return n;var i=0,o=0;do{var a=t.exec(e);if(null===a)break;if(!(o<n))break;i+=a[0].length,o++}while(null!==a);return i>=e.length?-1:i}function r(e){return s.test(e)}function o(e,n){void 0==e&&(e=["[^]"]),void 0==n&&(n="g");var i=[];return t.forEach(function(e){i.push(e.source)}),i.push(a.source),i=i.concat(e),new RegExp(i.join("|"),n)}e.findCharIndex=function(e,t){if(t>=e.length)return-1;if(!r(e))return t;for(var n=o(),i=0;null!==n.exec(e)&&!(n.lastIndex>t);)i++;return i},e.findByteIndex=function(e,t){return t>=this.length(e)?-1:i(e,o(),t)},e.charAt=function(e,t){var n=this.findByteIndex(e,t);if(n<0||n>=e.length)return"";var i=e.slice(n,n+8),r=s.exec(i);return null===r?i[0]:r[0]},e.charCodeAt=function(e,t){var i=n(e,t);if(i<0)return NaN;var r=e.charCodeAt(i);if(55296<=r&&r<=56319)return 1024*(r-55296)+(e.charCodeAt(i+1)-56320)+65536;return r},e.fromCharCode=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):String.fromCharCode(e)},e.indexOf=function(e,t,n){void 0!==n&&null!==n||(n=0);var i=this.findByteIndex(e,n),r=e.indexOf(t,i);return r<0?-1:this.findCharIndex(e,r)},e.lastIndexOf=function(e,t,n){var i;if(void 0===n||null===n)i=e.lastIndexOf(t);else{var r=this.findByteIndex(e,n);i=e.lastIndexOf(t,r)}return i<0?-1:this.findCharIndex(e,i)},e.slice=function(e,t,n){var i,r=this.findByteIndex(e,t);return r<0&&(r=e.length),void 0===n||null===n?i=e.length:(i=this.findByteIndex(e,n))<0&&(i=e.length),e.slice(r,i)},e.substr=function(e,t,n){return t<0&&(t=this.length(e)+t),void 0===n||null===n?this.slice(e,t):this.slice(e,t,t+n)},e.substring=e.slice,e.length=function(e){return this.findCharIndex(e,e.length-1)+1},e.stringToCodePoints=function(e){for(var t=[],n=0;n<e.length&&(codePoint=this.charCodeAt(e,n),codePoint);n++)t.push(codePoint);return t},e.codePointsToString=function(e){for(var t=[],n=0;n<e.length;n++)t.push(this.fromCharCode(e[n]));return t.join("")},e.stringToBytes=function(e){for(var t=[],n=0;n<e.length;n++){for(var i=e.charCodeAt(n),r=[];i>0;)r.push(255&i),i>>=8;1==r.length&&r.push(0),t=t.concat(r.reverse())}return t},e.bytesToString=function(e){for(var t=[],n=0;n<e.length;n+=2){var i=e[n],r=e[n+1],o=i<<8|r;t.push(String.fromCharCode(o))}return t.join("")},e.stringToCharArray=function(e){var t=[],n=o();do{var i=n.exec(e);if(null===i)break;t.push(i[0])}while(null!==i);return t};var a=/[\uD800-\uDBFF][\uDC00-\uDFFF]/,s=o([],"")}var n;void 0!==t&&null!==t?n=t:"undefined"!=typeof window&&null!==window&&(void 0!==window.UtfString&&null!==window.UtfString||(window.UtfString={}),n=window.UtfString);var i=/\uD83C[\uDDE6-\uDDFF]\uD83C[\uDDE6-\uDDFF]/;n.visual={},e(n,[]),e(n.visual,[i])}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.request,n=e.securities,i=void 0===n?{}:n,r=e.operation,o=void 0===r?{}:r,a=e.spec,s=(0,f.default)({},t),l=i.authorized,c=void 0===l?{}:l,d=o.security||a.security||[],p=c&&!!(0,u.default)(c).length,v=(0,h.default)(a,["components","securitySchemes"])||{};return s.headers=s.headers||{},s.query=s.query||{},(0,u.default)(i).length&&p&&d&&(!Array.isArray(o.security)||o.security.length)?(d.forEach(function(e,t){for(var n in e){var i=c[n],r=v[n];if(i){var o=i.value||i,a=r.type;if(i)if("apiKey"===a)"query"===r.in&&(s.query[r.name]=o),"header"===r.in&&(s.headers[r.name]=o),"cookie"===r.in&&(s.cookies[r.name]=o);else if("http"===a){if("basic"===r.scheme){var l=o.username,u=o.password,d=(0,g.default)(l+":"+u);s.headers.Authorization="Basic "+d}"bearer"===r.scheme&&(s.headers.Authorization="Bearer "+o)}else if("oauth2"===a){var f=i.token||{},p=f.access_token,h=f.token_type;h&&"bearer"!==h.toLowerCase()||(h="Bearer"),s.headers.Authorization=h+" "+p}}}}),s):t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(62),a=i(o),s=n(18),l=i(s),c=n(11),u=i(c);t.default=function(e,t){var n=e.operation,i=e.requestBody,o=e.securities,s=e.spec,c=e.attachContentTypeForEmptyPayload,d=e.requestContentType;t=r({request:t,securities:o,operation:n,spec:s});var f=n.requestBody||{},p=(0,u.default)(f.content||{}),h=d&&p.indexOf(d)>-1;if(i||c){if(d&&h)t.headers["Content-Type"]=d;else if(!d){var v=p[0];v&&(t.headers["Content-Type"]=v,d=v)}}else d&&h&&(t.headers["Content-Type"]=d);return i&&(d?p.indexOf(d)>-1&&("application/x-www-form-urlencoded"===d||0===d.indexOf("multipart/")?"object"===(void 0===i?"undefined":(0,l.default)(i))?(t.form={},(0,u.default)(i).forEach(function(e){var n=i[e],r=void 0,o=void 0;"undefined"!=typeof File&&(o=n instanceof File),"undefined"!=typeof Blob&&(o=o||n instanceof Blob),void 0!==m.Buffer&&(o=o||m.Buffer.isBuffer(n)),r="object"!==(void 0===n?"undefined":(0,l.default)(n))||o?n:Array.isArray(n)?n.toString():(0,a.default)(n),t.form[e]={value:r}})):t.form=i:t.body=i):t.body=i),t},t.applySecurities=r;var d=n(59),f=i(d),p=n(66),h=i(p),v=n(111),g=i(v),m=n(43)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.request,n=e.securities,i=void 0===n?{}:n,r=e.operation,o=void 0===r?{}:r,s=e.spec,c=(0,u.default)({},t),d=i.authorized,f=void 0===d?{}:d,p=i.specSecurity,h=void 0===p?[]:p,v=o.security||h,g=f&&!!(0,a.default)(f).length,m=s.securityDefinitions;return c.headers=c.headers||{},c.query=c.query||{},(0,a.default)(i).length&&g&&v&&(!Array.isArray(o.security)||o.security.length)?(v.forEach(function(e,t){for(var n in e){var i=f[n];if(i){var r=i.token,o=i.value||i,a=m[n],s=a.type,u=a["x-tokenName"]||"access_token",d=r&&r[u],p=r&&r.token_type;if(i)if("apiKey"===s){var h="query"===a.in?"query":"headers";c[h]=c[h]||{},c[h][a.name]=o}else"basic"===s?o.header?c.headers.authorization=o.header:(o.base64=(0,l.default)(o.username+":"+o.password),c.headers.authorization="Basic "+o.base64):"oauth2"===s&&d&&(p=p&&"bearer"!==p.toLowerCase()?p:"Bearer",c.headers.authorization=p+" "+d)}}}),c):t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),a=i(o);t.default=function(e,t){var n=e.spec,i=e.operation,o=e.securities,a=e.requestContentType,s=e.attachContentTypeForEmptyPayload;if(t=r({request:t,securities:o,operation:i,spec:n}),t.body||t.form||s)a?t.headers["Content-Type"]=a:Array.isArray(i.consumes)?t.headers["Content-Type"]=i.consumes[0]:Array.isArray(n.consumes)?t.headers["Content-Type"]=n.consumes[0]:i.parameters&&i.parameters.filter(function(e){return"file"===e.type}).length?t.headers["Content-Type"]="multipart/form-data":i.parameters&&i.parameters.filter(function(e){return"formData"===e.in}).length&&(t.headers["Content-Type"]="application/x-www-form-urlencoded");else if(a){var l=i.parameters&&i.parameters.filter(function(e){return"body"===e.in}).length>0,c=i.parameters&&i.parameters.filter(function(e){return"formData"===e.in}).length>0;(l||c)&&(t.headers["Content-Type"]=a)}return t},t.applySecurities=r;var s=n(111),l=i(s),c=n(59),u=i(c),d=n(61);i(d)}])})},function(e,t,n){"use strict";var i,r;!(i=[n(92)],r=function(e){var t,n=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],i=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],r=["January","February","March","April","May","June","July","August","September","October","November","December"],o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function a(e,t){for(var n=e.length;n<t;n++)e="0"+e;return e}function s(e,t){var n=e.getHours(),i=e.getDay()-1;if(t){n%=12;n||(n=12)}i<0&&(i=6);return{year:e.getFullYear(),month:e.getMonth(),day:i,date:e.getDate(),h:n,m:e.getMinutes(),s:e.getSeconds(),f:e.getMilliseconds(),t:e.getHours()>=12?"pm":"am"}}function l(e){var t=e.toString().split(".");if(!t[1])return 0;t=Number("0."+t[1]);return t}function c(e){var t=e,n=24*l(t),i=60*l(n),r=60*l(i),o=1e3*l(r);return{d:Math.floor(t),h:Math.floor(n),m:Math.floor(i),s:Math.floor(r),f:Math.round(o)}}function u(e,t){var n=c(e),i=n.d,r=n.h,o=n.m,a=n.s,s=n.f,l=0,u;if(/w+|t+/gi.test(t)){u=new Date(1899,11,30+Math.floor(e),0,0,86400*(e-Math.floor(e)));Number.isNaN(+u.getTime())&&(u=null)}/D+/gi.test(t)||(r+=24*i);/h+/gi.test(t)||(o+=60*r);/m+/gi.test(t)||(a+=60*o);if(/w+/gi.test(t)){l=u?u.getDay()-1:0;l<0&&(l=6)}return{year:0,month:0,day:l,date:i,h:r,m:o,s:a,f:s,t:u?u.getHours()>=12?"pm":"am":""}}function d(e,t){return{"Y+|y+":{Y:Number((t.year+"").slice(-2))+"",YY:a((t.year+"").slice(-2),2),YYY:a((t.year+"").slice(-3),3),def:function e(n){return a(t.year+"",n.length)}},"M+":{M:t.month+1,MM:a(t.month+1+"",2),MMM:e.locale_months_abbr[t.month],def:e.locale_months[t.month]},"W+|w+":{W:t.day,WW:a(t.day+"",2),WWW:e.locale_days_abbr[t.day],def:e.locale_days[t.day]},"D+|d+":{D:t.date,def:function e(n){return a(t.date+"",n.length)}},"h+|H+":{h:t.h,def:function e(n){return a(t.h+"",n.length)}},"m+":{m:t.m,def:function e(n){return a(t.m+"",n.length)}},"s+|S+":{s:t.s,def:function e(n){return a(t.s+"",n.length)}},"f+|F+":{def:function e(n){var i=t.f+"",r=n.length-i.length;if(r>0)for(var o=0;o<r;o++)i+="0";else r<0&&(i=i.slice(0,n.length));return i}},"t{1,2}|T{1,2}":{def:function e(n){var i=t.t;n[0].toUpperCase()===n[0]&&(i=i.toUpperCase());i=i.slice(0,n.length);return i}}}}t=e.extend({init:function e(t,a){var s=t||{};s.qCalendarStrings||(s.qCalendarStrings={qLongDayNames:n,qDayNames:i,qLongMonthNames:r,qMonthNames:o});this.localeInfo=s;this.locale_days=s.qCalendarStrings.qLongDayNames.slice();this.locale_days_abbr=s.qCalendarStrings.qDayNames.slice();this.locale_months=s.qCalendarStrings.qLongMonthNames.slice();this.locale_months_abbr=s.qCalendarStrings.qMonthNames.slice();this.pattern=a},clone:function e(){var n=new t(this.localeInfo,this.pattern);n.subtype=this.subtype;return n},format:function e(t,n){n||(n=this.pattern?this.pattern:"YYYY-MM-DD hh:mm:ss");n=n.replace(/\[.+\]|\[|\]/g,"");var i=/t+/gi.test(n);var r;if(t instanceof Date)r=s(t,i);else{if(t<0){t=-t;n="-"+n}r=u(t,n)}var o=d(this,r);var a=[];for(var l in o)a.push(l);var c=new RegExp(a.join("|"),"g");var f=n.replace(c,function(e){var t;var n;for(n in o){t=new RegExp(n);if(t.test(e))break}if(!t)return"";var i;for(var r in o[n])if(r===e||r.toLowerCase()===e){i=o[n][r];"undefined"===typeof i&&(i=o[n][r.toLowerCase()]);break}"undefined"===typeof i&&(i=o[n].def);"function"===typeof i&&(i=i(e));return i});return f}});t.parseInterval=c;return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(109)],r=function(e,t){function n(e,t,i,r,o){var a=l(t,i,r);if("."===a.charAt(0)){t.shift();return e.apply(null,[n(e,t,i,r,o)].concat(o))}return a}function i(e,t,i,r,o,a){var l=s(""===t?null:t.split("."),o);return n(e,l,i,r,a)}var r={shift:function e(n,i){var r=new t(n);var o=r.isDark()?parseInt(i):-parseInt(i);return new t(r.shiftLuminance(o)).toHex()},fontSize:function e(t,n){var e=parseInt(t);e*=parseInt(n)/100;return Math.ceil(e)+"px"},inherit:function e(t){return t},alpha:function e(n,i){var r="transparent"===n.toLowerCase()?new t("rgba(0,0,0,0)"):new t(n);r.setAlpha(i/100);return r.toRGBA()}};function o(e,t){var n=e;for(var i=0;i<t.length;i++){if(!n[t[i]])return null;n=n[t[i]]}return n}function a(e,t,n){var o=e.substring(1).split("(")[0];var a=/\(\s*([^)]+?)\s*\)/.exec(e);a=a&&a[1]?a[1].split(/\s*,\s*/):[];try{return i(r[o],t,n,this._theme,this._basePathSteps,a)}catch(e){console.warn("Cound not execute function: "+o+", function might not be implemented or arguments are incorrect.")}}function s(e,t){var n=[];var i,r;if(e){var o=e.length;while(o>=0){i=t.slice();r=i.length;while(r>=0){n.push(i.concat(e));i.pop();r--}e.pop();o--}}else{i=t.slice();r=i.length;while(r>=0){n.push(i.concat());i.pop();r--}}return n}function l(e,t,n){for(var i=0;i<e.length;i++){var r=o(n,e[i]);if(null!==r&&r[t])return r[t]}}function c(e,t,n){var i;if(""===e)i=s(null,n);else{var r=e.split(".");i=s(r,n)}return l(i,t,this._theme)}var u=e.extend("ThemeStyleResolver",{init:function e(t,n,i){this._basePath=t;this._basePathSteps=t.split(".");this._theme=i;this._id=n;this.layoutMap={1:"spark",3:"xsmall",7:"small",15:"medium",31:"full",m:"mobile"}},setTheme:function e(t,n){this._theme=n;this._id=t},setBasePath:function e(t){this._basePath=t;this._basePathSteps=t.split(".")},getStyle:function e(t,n,i){var r=void 0===i||i;var o=p(d(this._id,this._basePath,t,n));if(r&&void 0!==o)return o;var s=this._basePathSteps.concat();var l=c.call(this,t,n,s);l&&l.charAt&&"."===l.charAt(0)&&(l=a.call(this,l,t,n));r&&l&&f(d(this._id,this._basePath,t,n),l);return l},scaleFontSize:function e(t,n,i){if("string"===typeof n)switch(n){case"large":n=31;break;case"medium":n=15;break;case"small":n=7;break;case"tiny":n=1;break;default:n=15}var r={spark:1,xsmall:.9,small:.95,full:".discrete"===i?1:1.2};return r[this.layoutMap[n]]?Math.floor(parseInt(t)*r[this.layoutMap[n]])+"px":parseInt(t)+"px"}});function d(){var e="";for(var t=0;t<arguments.length;t++)arguments[t]&&arguments[t].length&&(e+=(""!==e?".":"")+arguments[t]);return e}u._cache={};function f(e,t){u._cache[e]=t}function p(e){return u._cache[e]}u.clearCache=function(){u._cache={}};return u}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(215),n(93),n(120),n(91),n(107),n(90),n(194),n(89),n(228)],r=function(e,t,n,i,r,o,a,s,l){var c={};function u(e,t){return e.getList().then(function(n){return n.getLayout().then(function(n){var i=[],s=false;n.forEach(function(e){if(!e.qMeta.published){i.push(e.qData.title);e.qData.title===t.title&&(s=true)}});var l=a.nextIndex(i,t.title);(1!==l||s)&&(t.title=t.title+" ("+l+")");t.title=o.crop(t.title,r.name);return e.create(t)})})}c.addSheet=function(e){return u(n,{title:i.get("SheetItem.myNewSheet"),rank:e})};c.addStory=function(t){return u(e,{title:i.get("Storytelling.CreateNew"),rank:t})};function d(e,t){var n=s();if(l.duplicatingItem)return n.reject();l.setDuplicatingItem(true);e.clone().then(function(e){e.getProperties().then(function(i){var s={},c=0,u=i.qMetaDef.title;t.getList().then(function(t){t.getLayout().then(function(t){var d=[],f=[];t.forEach(function(e){if(!e.qMeta.published){d.push(e);f.push(e.qData.title)}});d.forEach(function(e){e.qData.rank>c&&(c=e.qData.rank)});var p=a.generateUniqueName(f,u);p=o.crop(p,r.name);l.newRank=c+1;s=o.extend(true,i,{qMetaDef:{title:p},rank:l.newRank});l.setDuplicatingItem(false);e.setProperties(s).then(function(){n.resolve(e)})})})})});return n.promise}function f(e,n){return t.getApp().then(function(t){return e.draft(t).then(function(e){return e.getProperties().then(function(t){var i={},r=0;return n.getList().then(function(n){return n.getLayout().then(function(n){var a=n.filter(function(e){return!e.qMeta.published});a.forEach(function(e){e.qData.rank>r&&(r=e.qData.rank)});i=o.extend(true,t,{rank:r+1});return e.setProperties(i).then(function(){return e.id})})})})})})}c.duplicateSheet=function(e){return d(e,n)};c.duplicateStory=function(t){return d(t,e)};c.draftSheet=function(e){return f(e,n)};return c}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(91),n(90),n(93),n(49)],r=function(e,t,n,i){var r={"":e.get("AlternateState.InheritedState"),$:e.get("AlternateState.DefaultState")};function o(e){return{value:e,translation:""===e||"$"?r[e]:e}}function a(e){var n=e.slice();for(var i=0;i<n.length;i++){var r=n[i];n[i]=t.ellipseText(r,80)}return n}var s=function t(n,i){return n.localeCompare(i,e.language)};function l(){return n.getApp().then(function(e){return e.getAppLayout().then(function(e){var t=a(e.qStateNames.sort(s));return["","$"].concat(t).map(o)})})}var c=false;function u(e){return"masterobject"===e.qInfo.qType}return{type:"items",translation:"Common.AlternateStates",items:{alternateState:{ref:"qStateName",type:"string",translation:"AlternateState.SelectState",component:"dropdown",defaultValue:"",options:function e(t){return l().then(function(e){c=e.length>1&&i.getFlag("ALT_STATE_ONE")&&!u(t);return e})},readOnly:function e(){return!c}},allowShowDisclaimner:{component:"text",translation:"AlternateState.MasterItem.Disclaimer",style:"hint",show:function e(t){var n=t.qInfo.qType;return!("masterobject"===n||"sheet"===n)}}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(92),n(102),n(90)],r=function(e,t,n,i){var r,o={enabled:true,delay:50};r=t.extend("Throttle",{init:function e(){this.options={};this.ongoingRequests=[];this.queuedRequests=[];this.recentRequests=[];this.resolvedRequests=[];this._debounceTimer=null;this._latestResolvedRequestedAt=-1;n.mixin(this);this.notification("Send");this.notification("Cancel");this.setOptions({})},destroy:function e(){this.clear();this.recentRequests=[];this.resolvedRequests=[];n.release(this)},setOptions:function e(t){this.options=i.extend(true,{},o,this.options,t);this.enabled=this.options.enabled||false;this.delay=this.options.delay||-1},clear:function e(){clearTimeout(this._debounceTimer);var t;while(this.queuedRequests.length){t=this.queuedRequests.pop();t.dfd.reject()}while(this.ongoingRequests.length){t=this.ongoingRequests.pop();t.dfd.reject()}},queue:function t(n){var i=this.enabled?this.delay:-1,r=Date.now(),o={data:n,dfd:e(),wrapper:e(),requestedAt:r},s=Math.max(this._getAvgResolutionTime(),i),l=i<1,c=this.recentRequests.length<1,u=c||r-this.recentRequests.slice(-1)[0].requestedAt>s,d=r>this._latestResolvedRequestedAt+i;l||c||u||d?a.apply(this,[o,0]):a.apply(this,[o,Math.min(i,1e3)]);this.recentRequests.push(o);this.recentRequests.length>10&&(this.recentRequests=this.recentRequests.slice(-10));return o.dfd.promise},updateResolutionTime:function e(){this._latestResolvedRequestedAt=Date.now()},_getAvgResolutionTime:function e(){var t;if(this.resolvedRequests.length){t=0;this.resolvedRequests.forEach(function(e){t+=e.respondedAt-e.sentAt});t/=this.resolvedRequests.length}return t}});function a(e,t){var n=this;this.queuedRequests.push(e);clearTimeout(this._debounceTimer);t>=10?this._debounceTimer=setTimeout(function(){s.call(n)},t):s.call(n)}function s(){if(this.ongoingRequests.length){this.waitingForResponse=true;return}var e=this.queuedRequests.pop();e&&l.call(this,e);while(this.queuedRequests.length){e=this.queuedRequests.shift();e.dfd.reject()}}function l(e){this.waitingForResponse=false;this.ongoingRequests.push(e);var t=this,n=e.wrapper;e.sentAt=Date.now();n.promise.then(function(){t.ongoingRequests.splice(t.ongoingRequests.indexOf(e),1);e.respondedAt=Date.now();t.resolvedRequests.push({sentAt:e.sentAt,respondedAt:e.respondedAt,requestedAt:e.requestedAt});t.resolvedRequests.length>10&&(t.resolvedRequests=t.resolvedRequests.slice(-10));e.requestedAt>t._latestResolvedRequestedAt?e.dfd.resolve.apply(e.dfd,[].slice.call(arguments)):e.dfd.reject();t._latestResolvedRequestedAt=e.requestedAt},function(){t.ongoingRequests.splice(t.ongoingRequests.indexOf(e),1);e.respondedAt=Date.now();e.dfd.reject.apply(e.dfd,[].slice.call(arguments))}).finally(function(){t.waitingForResponse&&s.call(t)});this.Send.emit(e.data,n)}return r}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(265),n(104)],r=function(e,t){var n;function i(e,t){var n,i={};for(n in e)"qSubNodes"!==n&&e.hasOwnProperty(n)&&(i[n]=e[n]);t.push(i);return i}function r(e,t,o){var a,s,l,c=[],u=[],d=0,f=0;if(o.length){d=o[0].qUp||0;f=o[o.length-1].qDown||0}for(a=0;a<o.length;++a){s=o[a];s.qSubNodes.length>0&&(u=r(e,t,s.qSubNodes));l=null;if(0===s.qSubNodes.length&&n>=e&&n<=e+t||u.length>0){l=i(s,c);void 0!==l.qUp&&1===c.length&&(l.qUp=d+a);l.qSubNodes=u}0===s.qSubNodes.length&&n++;if(n===e+t){l&&void 0!==l.qDown&&(l.qDown=f+(o.length-1-a));break}}return c}function o(e,t,i){n=0;return r(e,t,i)}var a,s=new t(0,0,0,0),l=new t(0,0,0,0);a=e.extend("PivotCubeSlicer",{init:function e(){this._super();this.requestedAreas=[]},getPage:function e(n){var i,r,o=[],a;for(r=0;r<this.pages.length;r++){i=this.pages[r].qArea;s.set(n.qLeft,n.qTop,n.qWidth,n.qHeight);l.set(i.qLeft,i.qTop,i.qWidth,i.qHeight);a=l.intersection(s,true);o.push({coverage:a?a.clone():new t(0,0,0,0),idx:r});if(i.qLeft<=n.qLeft&&i.qLeft+i.qWidth>=n.qLeft+n.qWidth&&i.qTop<=n.qTop&&i.qTop+i.qHeight>=n.qTop+n.qHeight)return this._extract(n,this.pages[r])}o.sort(function(e,t){return t.coverage.width*t.coverage.height-e.coverage.width*e.coverage.height});if(o[0].coverage.height>0&&o[0].coverage.width>0)return this._extract(n,this.pages[o[0].idx]);return{qLeft:[],qTop:[],qData:[],qArea:{qTop:n.qTop,qLeft:n.qLeft,qWidth:0,qHeight:0}}},_extract:function e(t,n){var i,r;s.set(t.qLeft,t.qTop,t.qWidth,t.qHeight);l.set(n.qArea.qLeft,n.qArea.qTop,n.qArea.qWidth,n.qArea.qHeight);var a=s.intersection(l,true),c,u,d;if(!a)return{qLeft:[],qTop:[],qData:[],qArea:{qTop:t.qTop,qLeft:t.qLeft,qWidth:0,qHeight:0}};d=Math.max(0,t.qTop-n.qArea.qTop);u=Math.max(0,t.qLeft-n.qArea.qLeft);c=n.qData.slice(d,d+a.height).map(function(e){return e.slice(u,u+a.width)});i=o(d,a.height,n.qLeft);r=o(u,a.width,n.qTop);return{qLeft:i,qTop:r,qData:c,qArea:{qTop:a.y,qLeft:a.x,qWidth:a.width,qHeight:a.height}}}});return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90),n(49)],r=function(e,t){var n={};function i(e){e&&delete n[e]}function r(t,i){if(!t)throw new Error("Missing type: "+t);var r={translationKey:"",icon:"",iconChar:"e",isLibraryItem:true,visible:true};n[t]=e.extend(r,i)}function o(t,n){if(!n.icon)throw new Error("Missing icon for type: "+t);if(!n.iconChar)throw new Error("Missing iconChar for type: "+t);if(!n.iconPath)throw new Error("Missing iconPath for type: "+t);if(false!==n.isLibraryItem&&!n.descriptionKey)throw new Error("Missing descriptionKey for type: "+t);var i={name:t,template:t,author:"Qlik",isThirdParty:false};r(t,e.extend(i,n))}function a(t,n){var i={name:t,description:n.description||"",template:t,icon:"puzzle",iconChar:"puzzle",iconPath:"M14.5,9 L13,9 L13,3.3 C13,3.1 12.9,3 12.7,3 L8,3 L8,1.5 C8,0.7 7.3,0 6.5,0 C5.7,0 5,0.7 5,1.5 L5,3 L0.3,3 C0.1,3 0,3.1 0,3.3 L0,9 L1.5,9 C2.3,9 3,9.7 3,10.5 C3,11.3 2.3,12 1.5,12 L0,12 L0,15.7 C0,15.9 0.1,16 0.3,16 L5,16 L5,14.5 C5,13.7 5.7,13 6.5,13 C7.3,13 8,13.7 8,14.5 L8,16 L12.7,16 C12.9,16 13,15.9 13,15.7 L13,12 L14.5,12 C15.3,12 16,11.3 16,10.5 C16,9.7 15.3,9 14.5,9 Z",isThirdParty:true};var o=e.extend(i,n);"bar-chart-vertical"===o.icon&&(o.icon="bar-chart");r(t,o)}t.getFlag("DISABLE_AUTO_CHART")||o("auto-chart",{descriptionKey:"Template.preview.description.auto-chart",translationKey:"Object.AutoChart",icon:"effects",iconChar:"effects",iconPath:"M-3.26849658e-13,12.4318748 L11.4318748,1 L14.0699997,3.63812494 L2.63812494,15.0699997 L-3.26849658e-13,12.4318748 Z M2.63812494,14.1026872 L4.3968749,12.4318748 L2.63812494,10.6731248 L0.967312479,12.4318748 L2.63812494,14.1026872 Z M11.4318748,5.3968749 L13.1906247,3.63812494 L11.4318748,1.87937498 L9.67312479,3.63812494 L11.4318748,5.3968749 Z M5.62799988,2.93462496 L4.7486249,2.67081246 L5.54006238,2.14318748 L5.54006238,1.175875 L6.24356236,1.70349998 L7.12293735,1.43968749 L6.85912485,2.31906247 L7.38674984,3.11049995 L6.41943736,3.11049995 L5.89181237,3.81399994 L5.62799988,2.93462496 Z M15.5649372,5.13306241 L16.0046247,5.7486249 L15.3011247,5.7486249 L14.8614372,6.36418738 L14.6855622,5.6606874 L13.9820622,5.3968749 L14.5976247,4.95718741 L14.5976247,4.25368743 L15.2131872,4.69337492 L15.9166872,4.42956243 L15.5649372,5.13306241 Z M12.5750622,9.26612482 L12.2233122,10.4093123 L12.9268122,11.3766248 L11.7836247,11.3766248 L11.0801248,12.3439373 L10.7283748,11.2007498 L9.58518729,10.8489998 L10.5524998,10.1454998 L10.5524998,8.91437483 L11.5198123,9.61787481 L12.5750622,9.26612482 Z",visible:false});o("barchart",{descriptionKey:"Template.preview.description.barchart",translationKey:"Object.BarChart",icon:"bar-chart",iconChar:"bar_chart",iconPath:"M1,4 L3,4 C3.55228475,4 4,4.44771525 4,5 L4,15 C4,15.5522847 3.55228475,16 3,16 L1,16 C0.44771525,16 6.76353751e-17,15.5522847 0,15 L0,5 C-6.76353751e-17,4.44771525 0.44771525,4 1,4 Z M7,8 L9,8 C9.55228475,8 10,8.44771525 10,9 L10,15 C10,15.5522847 9.55228475,16 9,16 L7,16 C6.44771525,16 6,15.5522847 6,15 L6,9 C6,8.44771525 6.44771525,8 7,8 Z M13,0 L15,0 C15.5522847,-1.01453063e-16 16,0.44771525 16,1 L16,15 C16,15.5522847 15.5522847,16 15,16 L13,16 C12.4477153,16 12,15.5522847 12,15 L12,1 C12,0.44771525 12.4477153,1.01453063e-16 13,0 Z"});o("combochart",{descriptionKey:"Template.preview.description.combochart",translationKey:"Object.ComboChart",icon:"combo-chart",iconChar:"combo_chart",iconPath:"M3,10 L4,9 L4,16 L1,16 L1,12 L3,10 Z M8,11 L9,10 L9,16 L6,16 L6,9 L8,11 Z M11,8 L14,5 L14,16 L11,16 L11,8 Z M7.85226383,7.10149824 L13.8077922,1.14512991 C14.0012715,0.951623362 14.3149633,0.951623362 14.5084426,1.14512991 L14.8587678,1.49550452 C15.0522471,1.68901107 15.0522471,2.00274718 14.8587678,2.19625374 L7.85226383,9.20374588 L5.04966223,6.40074902 L1.19608505,10.2548697 C1.00260578,10.4483763 0.688913912,10.4483763 0.495434648,10.2548697 L0.145109449,9.9044951 C-0.0483698162,9.71098854 -0.0483698162,9.39725243 0.145109449,9.20374588 L5.04966223,4.29850138 L7.85226383,7.10149824 Z"});t.getFlag("CONTAINER_OBJECT")&&o("container",{descriptionKey:"Template.preview.description.container",translationKey:"Object.Container",icon:"box",iconChar:"box",iconPath:"M16,6 L15,6 L15,5 L1,5 L1,6 L-1.77635684e-15,6 L-1.77635684e-15,2 C-1.84399221e-15,1.44771525 0.44771525,1 1,1 L15,1 C15.5522847,1 16,1.44771525 16,2 L16,6 Z M11,2 L11,4 L15,4 L15,2.4 C15,2.1790861 14.8209139,2 14.6,2 L11,2 Z M6,2 L6,4 L10,4 L10,2 L6,2 Z M1.4,2 C1.1790861,2 1,2.1790861 1,2.4 L1,4 L5,4 L5,2 L1.4,2 Z M16,8 L16,11 L15,11 L15,8 L16,8 Z M16,13 L16,14 C16,14.5522847 15.5522847,15 15,15 L14,15 L14,14 L14.6,14 C14.8209139,14 15,13.8209139 15,13.6 L15,13 L16,13 Z M12,15 L9,15 L9,14 L12,14 L12,15 Z M7,15 L4,15 L4,14 L7,14 L7,15 Z M2,15 L1,15 C0.44771525,15 -6.53651803e-16,14.5522847 -1.70234197e-15,14 L-1.77635684e-15,13 L1,13 L1,13.6 C1,13.8209139 1.1790861,14 1.4,14 L2,14 L2,15 Z M-1.77635684e-15,11 L-1.77635684e-15,8 L1,8 L1,11 L-1.77635684e-15,11 Z"});o("distributionplot",{descriptionKey:"Template.preview.description.distributionplot",translationKey:"Object.DistributionPlot",icon:"distributionplot",iconChar:"distributionplot",iconPath:"M5,5 C3.9,5 3,4.1 3,3 C3,1.9 3.9,1 5,1 L14,1 C15.1,1 16,1.9 16,3 C16,4.1 15.1,5 14,5 L5,5 Z M14,8 C14,9.1 13.1,10 12,10 L2,10 C0.9,10 0,9.1 0,8 C0,6.9 0.9,6 2,6 L12,6 C13.1,6 14,6.9 14,8 Z M14,11 C15.1,11 16,11.9 16,13 C16,14.1 15.1,15 14,15 L6,15 C4.9,15 4,14.1 4,13 C4,11.9 4.9,11 6,11 L14,11 Z M12,2 C11.5,2 11,2.4 11,3 C11,3.6 11.4,4 12,4 C12.6,4 13,3.6 13,3 C13,2.4 12.6,2 12,2 Z M8,2 C7.5,2 7,2.4 7,3 C7,3.6 7.4,4 8,4 C8.6,4 9,3.6 9,3 C9,2.4 8.6,2 8,2 Z M4,9 C4.6,9 5,8.6 5,8 C5,7.4 4.6,7 4,7 C3.4,7 3,7.4 3,8 C3,8.6 3.5,9 4,9 Z M10,9 C10.6,9 11,8.6 11,8 C11,7.4 10.6,7 10,7 C9.4,7 9,7.4 9,8 C9,8.6 9.5,9 10,9 Z M10,14 C10.6,14 11,13.6 11,13 C11,12.4 10.6,12 10,12 C9.4,12 9,12.4 9,13 C9,13.6 9.4,14 10,14 Z"});o("boxplot",{descriptionKey:"Template.preview.description.boxplot",translationKey:"Object.BoxPlot",icon:"boxplot",iconChar:"boxplot",iconPath:"M15,9 L13,9 L13,13 C13,13.5522847 12.5522847,14 12,14 L4,14 C3.44771525,14 3,13.5522847 3,13 L3,9 L1.0625,9 L1.0625,10.46875 C1.0625,10.7621513 0.824651273,11 0.53125,11 C0.237848727,11 9.24109713e-16,10.7621513 8.8817842e-16,10.46875 L8.8817842e-16,5.53125 C8.52247127e-16,5.23784873 0.237848727,5 0.53125,5 C0.824651273,5 1.0625,5.23784873 1.0625,5.53125 L1.0625,7 L3,7 L3,3 C3,2.44771525 3.44771525,2 4,2 L12,2 C12.5522847,2 13,2.44771525 13,3 L13,7 L15,7 L15,5.53125 C15,5.23784873 15.2378487,5 15.53125,5 C15.8246513,5 16.0625,5.23784873 16.0625,5.53125 L16.0625,10.46875 C16.0625,10.7621513 15.8246513,11 15.53125,11 C15.2378487,11 15,10.7621513 15,10.46875 L15,9 Z M12,13 L12,3 L8,3 L8,13 L12,13 Z M7,13 L7,3 L4,3 L4,13 L7,13 Z"});o("filterpane",{descriptionKey:"Template.preview.description.filterpane",translationKey:"Object.FilterPane",icon:"filterpane",iconChar:"filterpane",iconPath:"M11,12.4863156 L8.07008534,8.35945066 C8.01004078,8.27487625 7.97778427,8.17372182 7.97778427,8.07000017 C7.97778427,7.7938578 8.20164189,7.57000017 8.47778427,7.57000017 L15.5221738,7.57000017 C15.6258954,7.57000017 15.7270499,7.60225668 15.8116243,7.66230124 C16.0367902,7.82216033 16.0897318,8.13428476 15.9298727,8.35945066 L13,12.4862565 L13,14.2491542 C13,14.3319207 12.9683969,14.4105936 12.9134166,14.4646953 L11.4134166,15.9407239 C11.3089266,16.0435439 11.1510567,16.030395 11.0608043,15.911355 C11.0215816,15.8596216 11,15.7935423 11,15.7251827 L11,12.4863156 Z M13,6 L12,6 L12,1.5 C12,1.22385763 11.7761424,1 11.5,1 L1.5,1 C1.22385763,1 1,1.22385763 1,1.5 L1,14.5 C1,14.7761424 1.22385763,15 1.5,15 L9,15 L9,16 L1,16 C0.44771525,16 6.76353751e-17,15.5522847 0,15 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 L12,0 C12.5522847,-1.01453063e-16 13,0.44771525 13,1 L13,6 Z"});o("gauge",{descriptionKey:"Template.preview.description.gauge",translationKey:"Object.Gauge",icon:"gauge-chart",iconChar:"gauge_chart",iconPath:"M2.63604397,14.9354012 C1.01716423,13.4714713 0,11.3545214 0,9 C0,4.581722 3.581722,1 8,1 C12.418278,1 16,4.581722 16,9 C16,11.3545214 14.9828358,13.4714713 13.363956,14.9354012 C12.9974483,14.298577 12.6309407,13.7270222 12.264433,13.2207366 C13.3374059,12.1367251 14,10.6457411 14,9 C14,5.6862915 11.3137085,3 8,3 C4.6862915,3 2,5.6862915 2,9 C2,10.6457411 2.66259413,12.1367251 3.73556701,13.2207366 C3.36905933,13.7270222 3.00255165,14.298577 2.63604397,14.9354012 Z M8.6785878,7.14391341 L12.0475946,5 L9.90368118,8.36900679 C10.1480944,9.07321165 9.9868748,9.88914692 9.42129812,10.4547236 C8.63472595,11.2412958 7.36391823,11.2457735 6.58286965,10.4647249 C5.80182106,9.68367637 5.80629882,8.41286865 6.592871,7.62629647 C7.15844768,7.06071979 7.97438295,6.89950016 8.6785878,7.14391341 Z"});o("histogram",{descriptionKey:"Template.preview.description.histogram",translationKey:"Object.Histogram",icon:"histogram",iconChar:"histogram",iconPath:"M14,11 L14,8.5 C14,8.22385763 14.2238576,8 14.5,8 L15.5,8 C15.7761424,8 16,8.22385763 16,8.5 L16,15 L14,15 L12,15 L10,15 L8,15 L6,15 L4,15 L2,15 L0,15 L0,6.5 C-3.38176876e-17,6.22385763 0.223857625,6 0.5,6 L2,6 L2,3.5 C2,3.22385763 2.22385763,3 2.5,3 L3.5,3 C3.77614237,3 4,3.22385763 4,3.5 L4,10 L6,10 L6,7.5 C6,7.22385763 6.22385763,7 6.5,7 L8,7 L8,1.5 C8,1.22385763 8.22385763,1 8.5,1 L9.5,1 C9.77614237,1 10,1.22385763 10,1.5 L10,3 L11.5,3 C11.7761424,3 12,3.22385763 12,3.5 L12,11 L14,11 Z"});o("kpi",{descriptionKey:"Template.preview.description.kpi",translationKey:"Object.Kpi",icon:"kpi",iconChar:"kpi",iconPath:"M16,2 L16,14 L14,14 L14,6 L12,6 L12,4 C13.7,4 14,3.2 14,2 L16,2 Z M7.9,5 L10,5 L10,6.5 L7.7,6.5 L7.3,9.5 L9,9.5 L9,11 L7.1,11 L6.7,14 L5.2,14 L5.6,11 L3.4,11 L3,14 L1.5,14 L1.9,11 L0,11 L0,9.5 L2.1,9.5 L2.5,6.5 L1,6.5 L1,5 L2.6,5 L3,2 L4.5,2 L4.1,5 L6.4,5 L6.8,2 L8.3,2 L7.9,5 Z M6.2,6.5 L3.9,6.5 L3.5,9.5 L5.7,9.5 L6.2,6.5 Z"});o("linechart",{descriptionKey:"Template.preview.description.linechart",translationKey:"Object.LineChart",icon:"line-chart",iconChar:"line_chart",iconPath:"M16,15 L16,16 L1.3,16 L0,16 L0,14.7 L0,0 L1,0 L1,13 L5.4,5.7 L9.4,8 L13.2,1.4 C13.5,0.9 14.4,0.8 14.9,1 C15.4,1.3 15.7,2.1 15.4,2.6 L10.4,11.4 L6.4,9.1 L3,15 L16,15 Z"});o("listbox",{descriptionKey:"Template.preview.description.listbox",translationKey:"Object.Listbox",icon:"list",iconChar:"list",iconPath:"M0,1 L16,1 L16,3 L0,3 L0,1 Z M0,7 L0,5 L16,5 L16,7 L0,7 Z M0,11 L0,9 L16,9 L16,11 L0,11 Z M0,15 L0,13 L16,13 L16,15 L0,15 Z",isLibraryItem:false});o("piechart",{descriptionKey:"Template.preview.description.piechart",translationKey:"Object.PieChart",icon:"pie-chart",iconChar:"pie_chart",iconPath:"M7,1 L7,8 L14,8 C14,11.8659932 10.8659932,15 7,15 C3.13400675,15 0,11.8659932 0,8 C0,4.13400675 3.13400675,1 7,1 Z M8,1.15888847e-31 C11.8659932,6.95889291e-16 15,3.13400675 15,7 L8,7 L8,-8.8817842e-16 Z"});o("pivot-table",{descriptionKey:"Template.preview.description.pivot-table",translationKey:"Object.PivotTable",icon:"pivot-table",iconChar:"pivot_table",iconPath:"M1,1 L15,1 C15.5522847,1 16,1.44771525 16,2 L16,14 C16,14.5522847 15.5522847,15 15,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,2 C-6.76353751e-17,1.44771525 0.44771525,1 1,1 Z M3,4 L3,14 L15,14 L15,4 L3,4 Z M1,2 L1,4 L3,4 L3,2 L1,2 Z M4,5 L8,5 L8,7 L4,7 L4,5 Z M9,5 L14,5 L14,7 L9,7 L9,5 Z M4,8 L8,8 L8,10 L4,10 L4,8 Z M9,8 L14,8 L14,10 L9,10 L9,8 Z M4,11 L8,11 L8,13 L4,13 L4,11 Z M9,11 L14,11 L14,13 L9,13 L9,11 Z"});o("map",{descriptionKey:"Template.preview.description.map",translationKey:"Object.Map",icon:"map",iconChar:"map",iconPath:"M2.714544,3.424368 L4.799632,3.010608 L5.381168,2.691824 L6.035584,2.880368 L7.08112,2.822496 L7.439328,2.259456 L7.96168,2.345392 L9.23016,2.226432 L9.579776,1.84112 L10.072688,1.511888 L10.77008,1.616816 L10.837536,1.606624 L13.796464,4.080256 L12.5564,4.215376 L12.236688,4.726016 L12.00464,4.652272 L11.10384,3.840016 L10.798096,2.967216 L10.231872,2.459344 L9.563904,2.328672 L9.548576,2.634384 L10.202944,3.272944 L10.177808,3.630192 L9.870128,3.751888 L9.430976,3.56872 L9.44592,3.214592 L8.86976,2.977664 L8.67848,3.810176 L8.097792,3.941824 L8.155216,4.40624 L8.911808,4.551872 L9.042496,3.809744 L9.667056,3.902032 L9.957392,4.072016 L10.423216,4.072016 L10.742,4.710624 L11.58728,5.568048 L11.525264,5.90136 L10.84376,5.814512 L9.666144,6.409232 L8.818176,7.42632 L8.70784,7.876704 L8.403504,7.876704 L7.836368,7.61536 L7.28552,7.876704 L7.422608,8.457872 L7.662304,8.181504 L8.083744,8.168448 L8.054384,8.690304 L8.403504,8.792528 L8.752144,9.184128 L9.321536,9.024032 L11.30464,9.397632 L11.743728,10.099904 L12.978864,10.624992 L12.179696,12.350704 L11.337168,12.742368 L10.836592,13.734576 L9.798224,14.427856 L9.700144,14.782464 L8.883424,14.937984 L8.818176,14.18096 L9.144224,12.859488 L8.300368,10.752992 L8.679168,9.963632 L7.767216,9.086 L6.585936,8.820976 L6.193856,8.000672 L6.193856,8.487728 L6.02112,8.487728 L5.00312,7.107472 L5.00312,5.973696 L4.091824,4.92544 L2.273872,4.971552 L1.872256,4.708368 L2.38464,4.30224 L2.015568,4.387504 L2.714544,3.424368 Z M9.492,1.472096 L8.81776,1.985408 L8.173776,2.050096 L7.883856,1.861936 L9.026256,1.203056 L9.492,1.472096 Z M7.120064,2.056384 L6.152224,2.310608 L5.686896,2.03832 L6.152224,1.660704 L6.472416,1.794112 L6.891664,1.660704 L7.120064,2.056384 Z M8,0 C3.581728,0 0,3.581712 0,8 C0,12.418272 3.581728,16 8,16 C12.418288,16 16,12.418272 16,8 C16,3.581712 12.418288,0 8,0 Z"});o("scatterplot",{descriptionKey:"Template.preview.description.scatterplot",translationKey:"Object.ScatterPlot",icon:"scatter-chart",iconChar:"scatter_chart",iconPath:"M4,0 C6.2,0 8,1.8 8,4 C8,6.2 6.2,8 4,8 C1.8,8 0,6.2 0,4 C0,1.8 1.8,0 4,0 Z M12.5,5 C14.4,5 16,6.6 16,8.5 C16,10.4 14.4,12 12.5,12 C10.6,12 9,10.4 9,8.5 C9,6.6 10.6,5 12.5,5 Z M5.5,11 C6.9,11 8,12.1 8,13.5 C8,14.9 6.9,16 5.5,16 C4.1,16 3,14.9 3,13.5 C3,12.1 4.1,11 5.5,11 Z"});o("table",{descriptionKey:"Template.preview.description.table",translationKey:"Object.Table",icon:"table",iconChar:"table",iconPath:"M1,1 L15,1 C15.5522847,1 16,1.44771525 16,2 L16,14 C16,14.5522847 15.5522847,15 15,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,2 C-6.76353751e-17,1.44771525 0.44771525,1 1,1 Z M1,4 L1,14 L15,14 L15,4 L1,4 Z M7,5 L10,5 L10,7 L7,7 L7,5 Z M11,5 L14,5 L14,7 L11,7 L11,5 Z M2,5 L6,5 L6,7 L2,7 L2,5 Z M7,8 L10,8 L10,10 L7,10 L7,8 Z M11,8 L14,8 L14,10 L11,10 L11,8 Z M2,8 L6,8 L6,10 L2,10 L2,8 Z M7,11 L10,11 L10,13 L7,13 L7,11 Z M11,11 L14,11 L14,13 L11,13 L11,11 Z M2,11 L6,11 L6,13 L2,13 L2,11 Z"});o("text-image",{descriptionKey:"Template.preview.description.text-image",translationKey:"Object.TextImage",icon:"text",iconChar:"text",iconPath:"M5.52083333,11.9375 L4.5,15 L1,15 L6.425,1 L9.6625,1 L15,15 L11.5,15 L10.4791667,11.9375 L5.52083333,11.9375 Z M6.25,9.75 L9.75,9.75 L8,4.5 L6.25,9.75 Z"});o("treemap",{descriptionKey:"Template.preview.description.treemap",translationKey:"Object.Treemap",icon:"treemap",iconChar:"treemap",iconPath:"M9.3,5 C9.1,5 9,4.9 9,4.7 L9,0.3 C9,0.1 9.1,0 9.3,0 L15.7,0 C15.8,0 16,0.1 16,0.3 L16,4.7 C16,4.9 15.8,5 15.7,5 L9.3,5 Z M11.7,12 C11.9,12 12,12.1 12,12.3 L12,15.7 C12,15.9 11.9,16 11.7,16 L9.3,16 C9.1,16 9,15.9 9,15.7 L9,12.3 C9,12.2 9.1,12 9.3,12 L11.7,12 Z M6.7,0 C6.9,0 7,0.1 7,0.3 L7,7.7 C7,7.9 6.9,8 6.7,8 L0.3,8 C0.1,8 0,7.9 0,7.7 L0,0.3 C0,0.1 0.1,0 0.3,0 L6.7,0 Z M6.7,10 C6.9,10 7,10.1 7,10.3 L7,15.7 C7,15.9 6.9,16 6.7,16 L0.3,16 C0.1,16 0,15.9 0,15.7 L0,10.3 C0,10.1 0.1,10 0.3,10 L6.7,10 Z M15.7,12 C15.9,12 16,12.1 16,12.3 L16,15.7 C16,15.9 15.9,16 15.7,16 L14.3,16 C14.1,16 14,15.9 14,15.7 L14,12.3 C14,12.1 14.1,12 14.3,12 L15.7,12 Z M15.7,7 C15.9,7 16,7.2 16,7.3 L16,9.7 C16,9.9 15.9,10 15.7,10 L9.3,10 C9.1,10 9,9.9 9,9.7 L9,7.3 C9,7.2 9.1,7 9.3,7 L15.7,7 Z"});o("waterfallchart",{descriptionKey:"Template.preview.description.waterfallchart",translationKey:"Object.WaterfallChart",icon:"waterfallchart",iconChar:"waterfallchart",iconPath:"M0.5,1 L2.5,1 C2.77614237,1 3,1.22385763 3,1.5 L3,14.5 C3,14.7761424 2.77614237,15 2.5,15 L0.5,15 C0.223857625,15 3.38176876e-17,14.7761424 0,14.5 L0,1.5 C-3.38176876e-17,1.22385763 0.223857625,1 0.5,1 Z M5,1 L7,1 C7.27614237,1 7.5,1.22385763 7.5,1.5 L7.5,4.5 C7.5,4.77614237 7.27614237,5 7,5 L5,5 C4.72385763,5 4.5,4.77614237 4.5,4.5 L4.5,1.5 C4.5,1.22385763 4.72385763,1 5,1 Z M9,5 L11,5 C11.2761424,5 11.5,5.22385763 11.5,5.5 L11.5,8.5 C11.5,8.77614237 11.2761424,9 11,9 L9,9 C8.72385763,9 8.5,8.77614237 8.5,8.5 L8.5,5.5 C8.5,5.22385763 8.72385763,5 9,5 Z M13.5,9 L15.5,9 C15.7761424,9 16,9.22385763 16,9.5 L16,14.5 C16,14.7761424 15.7761424,15 15.5,15 L13.5,15 C13.2238576,15 13,14.7761424 13,14.5 L13,9.5 C13,9.22385763 13.2238576,9 13.5,9 Z"});o("widget",{translationKey:"Object.Widget",icon:"widget",iconChar:"widget",iconPath:"M1,12.1 L7,16 L7,11.2 L1,7.3 L1,12.1 Z M9,12.1 L9,16 L15,12.1 L15,7.3 L9,11.2 L9,12.1 Z M8,2.1 C9,2.1 9.8,1.6 9.8,1 C9.8,0.5 9,0 8,0 C7,0 6.2,0.5 6.2,1.1 C6.2,1.7 7,2.1 8,2.1 Z M13.5,3.9 L13.5,4.5 C13.5,5.1 12.7,5.6 11.7,5.6 C10.7,5.6 9.9,5.1 9.9,4.5 L9.9,3.4 C10,3.9 10.8,4.4 11.7,4.4 C12.7,4.4 13.5,3.9 13.5,3.3 C13.5,2.7 12.7,2.2 11.7,2.2 C11.4,2.2 11.2,2.2 10.9,2.3 L9.8,1.6 L9.8,2.3 C9.8,2.9 9,3.4 8,3.4 C7,3.4 6.2,2.9 6.2,2.3 L6.2,1.6 L5.1,2.3 C4.8,2.2 4.6,2.2 4.3,2.2 C3.3,2.2 2.5,2.7 2.5,3.3 C2.5,3.9 3.3,4.4 4.3,4.4 C5.3,4.4 6,4 6.1,3.4 L6.1,4.5 C6.1,5.1 5.3,5.6 4.3,5.6 C3.3,5.6 2.5,5.1 2.5,4.5 L2.5,3.9 L1,4.7 L8,9.2 L15,4.7 L13.5,3.9 Z M9.8,6.9 C9.8,7.5 9,7.9 8,7.9 C7,7.9 6.2,7.5 6.2,6.9 L6.2,5.8 L6.2,5.6 C6.2,6.2 7,6.7 8,6.7 C9,6.7 9.8,6.2 9.8,5.6 L9.8,5.8 L9.8,6.9 Z",name:"Widget",description:"Qlik Sense Widget",isLibraryItem:false});return{registerThirdPartyLibraryInfo:a,remove:i,getLibraryInfo:function t(i){return e.extend({},n[i])}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(100),n(327)],r=function(e,t){function n(e,t){this.id=e;Object.defineProperties(this,{id:{value:e},properties:{value:t}})}n.prototype.getStyle=function(e,n,i){var r=new t(e,this.id,this.properties);return r.getStyle(n,i,false)};n.prototype.apply=function(){return e.applyTheme(this.id).then(function(e){return e})};return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(140),n(110),n(254),n(158)],r=function(e,t,n,i,r){var o=n.NxLocalizedErrorCode;var a,s;function l(e,t,n,i){return e.session.rpc({method:t,handle:-1,params:n||[]}).then(function(e){i&&i(e.result);return e.result})}function c(n,i,r){e.$apply(e.$rootScope,function(){t.getList(n).then(function(e){r&&n.close();i(e)},function(){a&&a({code:o.LOCERR_GENERIC_CONNECTION_LOST,message:"ErrorCode."+o.LOCERR_GENERIC_CONNECTION_LOST})})})}function u(e){r.initClient();if(e instanceof i){this.session=e;this.qEvent=e.options.qEvent}else if(e.app&&e.rpc){var t=i.getIfCached(e.app.id,e.sessionConfig);this.session=t||i.get(e.app.id,e.sessionConfig);this.session.open()}else{this.session=i.get("?transient=",e);this.session.open();this.qEvent=e.qEvent}}u.setErrorCallback=function(e,t){a=e;s=t};u.get=function(e){e=e||{};this._qEvent&&(e._qEvent=this._qEvent);var t=r.makeConfig(e);t.onError=a?function(e){e=e||{};e.code!==o.LOCERR_GENERIC_CONNECTION_LOST&&a(e||{code:o.LOCERR_GENERIC_CONNECTION_LOST,message:"Connection lost"})}:a;return new u(t)};u.getAppList=function(e,t){var n=r.makeConfig(t);n.onError=a?function(e){e=e||{};e.code!==o.LOCERR_GENERIC_CONNECTION_LOST&&a(e||{code:o.LOCERR_GENERIC_CONNECTION_LOST,message:"Connection lost"})}:a;s&&(n.onWarning=s);var l=i.get("?transient=",n);l.open();c(l,e,true)};u.prototype.getAppList=function(e){c(this.session,e,false)};u.prototype.getAuthenticatedUser=function(e){return l(this,"GetAuthenticatedUser",[],e)};u.prototype.isPersonalMode=function(e){return l(this,"IsPersonalMode",[],e)};u.prototype.getQTProduct=function(e){return l(this,"QTProduct",[],e)};u.prototype.getProductVersion=function(e){return l(this,"ProductVersion",[],e)};u.prototype.cancelReload=function(){return l(this,"CancelReload")};u.prototype.getProgress=function(e,t){return l(this,"GetProgress",[e],t)};u.prototype.GetProgress=function(e,t){return this.getProgress(e,t)};u.prototype.on=function(e,t){this.qEvent.register({scope:"QGlobal",name:e,callback:t})};u.prototype.off=function(e){this.qEvent.clear(e)};return u}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){this.handlers=e||[]}e.prototype.register=function(e){this.handlers[e.name]||(this.handlers[e.name]=[]);this.handlers[e.name].push({scope:e.scope,callback:e.callback})};e.prototype.emit=function(e,t){if(this.handlers[e]){var n=this.handlers[e].filter(function(e){return"root"!==e.scope}).length>0;for(var i in this.handlers[e])(n&&"root"!==this.handlers[e][i].scope||!n)&&this.handlers[e][i].callback(t)}};e.prototype.hasHandlers=function(e){return!!this.handlers[e]};e.prototype.clear=function(e){e?delete this.handlers[e]:this.handlers=[]};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(102),n(231),n(158)],r=function(e,t,n){function i(e,n,i){Object.defineProperties(this,{qFallbackTitle:{value:e.qFallbackTitle},qSortIndicator:{value:e.qSortIndicator},qReverseSort:{value:e.qReverseSort||false},col:{value:n},isOrderedBy:{value:n===i.qHyperCube.qEffectiveInterColumnSortOrder[0]},isDimension:{value:n<i.qHyperCube.qDimensionInfo.length},selections:{value:[]},parent:{value:i}});this.isDimension?Object.defineProperties(this,{qCardinal:{value:e.qCardinal},qStateCounts:{value:e.qStateCounts},qDimensionInfo:{value:e}}):Object.defineProperties(this,{qMax:{value:e.qMax},qMin:{value:e.qMin},qMeasureInfo:{value:e}});e.qGroupFieldDefs&&e.qGroupFieldDefs.length>0&&Object.defineProperties(this,{field:{value:i.app.field(e.qGroupFieldDefs[e.qGroupPos])}});e.qError&&Object.defineProperties(this,{errorCode:{value:e.qError.qErrorCode},errorMessage:{value:this.isDimension?t.getDimensionError(e.qError.qErrorCode):t.getMeasureError(e.qError.qErrorCode)}})}i.prototype.orderBy=function(){var e=[this.col];this.parent.qHyperCube.qEffectiveInterColumnSortOrder.forEach(function(t){t!==e[0]&&e.push(t)});var t=[{qPath:"/"+this.parent.defPath+"/qInterColumnSortOrder",qOp:"replace",qValue:"["+e.join(",")+"]"}];return this.parent.model.applyPatches(t,true)};i.prototype.reverseOrder=function(){var e=this.col<this.parent.qHyperCube.qDimensionInfo.length;var t=[{qPath:"/"+this.parent.defPath+(e?"/qDimensions/"+this.col:"/qMeasures/"+(this.col-this.parent.qHyperCube.qDimensionInfo.length))+"/qDef/qReverseSort",qOp:"replace",qValue:(!this.qReverseSort).toString()}];return this.parent.model.applyPatches(t,true)};i.prototype.isSelected=function(e){return this.selections.indexOf(e)>-1};i.prototype.toggleSelect=function(e){var t=this.selections.indexOf(e);t<0?this.selections.push(e):this.selections.splice(t,1)};i.prototype.selectRange=function(e,t,n,i){var r={qMeasureIx:this.col-this.parent.qHyperCube.qDimensionInfo.length,qRange:{qMin:e,qMax:t,qMinInclEq:n,qMaxInclEq:i}};return this.parent.model.rangeSelectHyperCubeValues("/"+this.parent.defPath,[r],[],false)};function r(e,t,n,i){Object.defineProperties(this,{qDimensionInfo:{value:t},qText:{value:e.qIsOtherCell?t.othersLabel:e.qText},qElemNumber:{value:e.qElemNumber},qState:{value:e.qState},col:{value:n},selected:{get:function e(){return this.header.isSelected(this.qElemNumber)}},header:{get:function e(){return this.parent.headers[this.col]}},parent:{value:i}});Number.isNaN(+e.qNum)||Object.defineProperties(this,{qNum:{value:e.qNum}})}r.prototype.select=function(){this.header.toggleSelect(this.qElemNumber);return this.parent.view&&this.parent.view.selectValues?this.parent.view.selectValues(this.col,[this.qElemNumber],true):this.parent.model.selectHyperCubeValues("/"+this.parent.defPath,this.col,[this.qElemNumber],true)};function o(e,t,n){Object.defineProperties(this,{qMeasureInfo:{value:t},qGrandTotal:{value:n},qText:{value:e.qText}});Number.isNaN(+e.qNum)||Object.defineProperties(this,{qNum:{value:e.qNum}})}o.prototype.getPercentOfMax=function(){return Math.round(100*this.qNum/this.qMeasureInfo.qMax*100)/100};o.prototype.getPercent=function(){return Math.round(100*this.qNum/this.qGrandTotal.qNum*100)/100};function a(e,t,n){var i=[],a=[],s=[],l=t.qDimensionInfo.length,c=t.columnOrder;e.forEach(function(e,s){s<l?i.push(new r(e,t.qDimensionInfo[s],s,n)):a.push(new o(e,t.qMeasureInfo[s-l],t.qGrandTotalRow[s-l]))});c?c.forEach(function(e){s.push(e<l?i[e]:a[e-l])}):s=i.concat(a);Object.defineProperties(this,{dimensions:{value:i},measures:{value:a},cells:{value:s}})}function s(t,n,i){e.create(this,"OnData");Object.defineProperties(this,{app:{value:t},path:{value:i||"qHyperCube"},defPath:{get:function e(){return this.path+"Def"}},rows:{value:[]},headers:{value:[]},totals:{value:[]},rowCount:{get:function e(){if(this.qHyperCube&&this.qHyperCube.qSize)return this.qHyperCube.qSize.qcy}},colCount:{get:function e(){if(this.qHyperCube&&this.qHyperCube.qSize)return this.qHyperCube.qSize.qcx}}});if("function"===typeof n.then){var r=this;n.then(function(e){l(r,e)})}else{var o=n.backendApi?n.backendApi.model:n;l(this,o,n.backendApi?n:void 0)}}function l(e,t,n){Object.defineProperties(e,{model:{value:t},view:{value:n}});c(e);if(e.model&&e.model.Validated){e._OnModelValid=function(){c(e)};e.model.Validated.bind(e._OnModelValid)}}function c(e){!e.qHyperCube&&e.model.layout&&(e.qHyperCube=e.model.layout[e.path]);if(e.model&&e.model.layout&&e.model.layout.qSelectionInfo&&e.model.layout.qSelectionInfo.qInSelections)return;e.headers.length=0;e.totals.length=0;e.rows.length=0;if(e.qHyperCube){var t=e.qHyperCube.qDimensionInfo?e.qHyperCube.qDimensionInfo.length:0,n=e.qHyperCube.columnOrder;e.qHyperCube.qDimensionInfo&&e.qHyperCube.qDimensionInfo.forEach(function(t,r){if(n){var o=n.indexOf(r);e.headers[o]=new i(t,r,e)}else e.headers.push(new i(t,r,e))});e.qHyperCube.qMeasureInfo&&e.qHyperCube.qMeasureInfo.forEach(function(r,o){if(n){var a=n.indexOf(o+t);e.headers[a]=new i(r,o+t,e)}else e.headers.push(new i(r,o+t,e))});e.qHyperCube.qGrandTotalRow&&e.qHyperCube.qGrandTotalRow.forEach(function(t,n){e.totals.push(new o(t,e.qHyperCube.qMeasureInfo[n]))});u(e,e.qHyperCube.qDataPages)}e.OnData.emit()}function u(e,t){t&&t.forEach(function(t){t.qMatrix.forEach(function(t){e.rows.push(new a(t,e.qHyperCube,e))})})}s.prototype.getMoreData=function(){if(this.requestActive)return;if(this.rowCount<=this.rows.length)return;this.requestActive=true;var e=this,t={qTop:this.rows.length,qLeft:0,qWidth:this.colCount,qHeight:50};return e.view?e.view.backendApi.getData([t]).then(function(t){u(e,t);e.requestActive=false;e.OnData.emit()}):e.qHyperCube?e.model.getHyperCubeData("/qHyperCubeDef",[t]).then(function(t){u(e,t);e.requestActive=false;e.OnData.emit()}):null};s.prototype.getColByName=function(e){if(!e)return;var t=e.toUpperCase(),n;this.headers.forEach(function(e,i){e.qFallbackTitle.toUpperCase()===t&&(n=i)});return n};s.prototype.exportData=function(e,t){e=e||{};return this.model.exportData(e.format||"OOXML","/"+this.defPath,e.filename,e.state||"P").then(function(i){var r=this.app.global;var o=r&&r.session.options;o=n.makeConfig(o);var a=o.prefix+i.qUrl.substring(1);e.download&&window.open(a);t&&t(a);return a}.bind(this))};s.prototype.destroy=function(){if(this.model&&this.model.Validated&&this._OnModelValid){this.model.Validated.unbind(this._OnModelValid);delete this._OnModelValid}};return s}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(89),n(247),n(636),n(90)],r=function(e,t,n,i,r,o){var a={template:r,scope:{id:"@",app:"=",object:"=",onDone:"=",size:"=",area:"="},controller:["$scope","$element",function(e,t){var n=l(e.id,e.object,e.area,e.app),i={width:e.size.width,height:e.size.height},r=n.snap;e.data=n.data;e.style={width:i.width+"px",height:i.height+"px"};r.then(function(t){e.onDone(t)});e.$on("$destroy",function(){n.cancel()});t.on("$destroy",function(){e.$destroy()})}]};var s=[];function l(e,r,a,s){var l=t.getService("$timeout"),c=n();var u=false;function f(){u=true;c.reject()}var p={object:{}},h=n.all({model:r&&r.model||s.getObject(e),viewState:r&&r.getViewState?r.getViewState():void 0}).then(function(e){if(u)return{};p.model=e.model;p.options={viewState:e.viewState,components:{scrollArea:{show:true}},onRendered:function e(t){c.resolve({doSnap:!t})}};return l(function(){return p.object.loaded?p.object.loaded.then(function(){var e=p.object;if(!e.supportExport()&&"auto-chart"!==o.getValue(e,"ext.type"))return;return c.promise.then(function(t){if(false===t.doSnap||"auto-chart"===o.getValue(e,"ext.type")&&!e.supportExport())return;var n=d(a,p.object.layout,p.object);return i.prepSnapshotData(p.object.layout,p.object,true,{ignoreReducedData:false},false).then(function(e){return p.object.model.app.getLayout().then(function(t){n.snapshotData=i.formatSnapshotForRendering(e,t.qLocaleInfo);return n})})})}):{}},0,false)});return{data:p,snap:h,cancel:f}}function c(t){var n=s.indexOf(t);n>=0&&s.splice(n,1);var i=e(t).children("div");if(i.scope&&i.scope()){i.scope().$destroy();i.scope().destroyComponent()}e(t).remove()}function u(){var e;while(e=s.pop())c(e)}function d(e,t,n){var i=n.ext&&n.ext.libraryInfo&&n.ext.libraryInfo.isThirdParty;var r={id:t.qInfo.qId,type:t.qInfo.qType,snapshotData:null,area:e,children:[],isExtension:i,title:t.title||""};return r}return{snapshot:function t(r,o,l,u,f,p){var h=n();var v={type:"object",size:o,snapshotData:{}};if(l&&l.loaded&&(l.ext&&l.ext.libraryInfo.isThirdParty||o.width===u.width&&o.height===u.height))return l.loaded.then(function(){v=d(f,l.layout,l);if(!l.supportExport())return v;return i.prepSnapshotData(l.layout,l,true,{ignoreReducedData:false},false).then(function(e){return l.model.app.getLayout().then(function(t){v.snapshotData=i.formatSnapshotForRendering(e,t.qLocaleInfo);return v})})});var g=document.createElement("div");g.className="qv-snapshotter";s.push(g);document.body.appendChild(g);e(g).showComponent(a,{id:r,object:l,size:o,area:f,app:p,onDone:function e(t){h.resolve(t);c(g)}});return h.promise},loadObject:l,cancel:function e(){u()}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(89),n(120),n(128),n(337),n(637)],r=function(e,t,n,i,r,o){var a={template:o,scope:{sheetId:"@",sheet:"@",size:"@",onDone:"@",sheetLayout:"@"},controller:["$scope","$timeout","$element",function(e,o,a){var s={area:{left:0,top:0,width:1,height:1}};var l=1e5,c=t(),d,f={},p=e.sheet===i.getModel(),h={width:e.size.width,height:e.size.height},v=e.sheetLayout===u.FULL,g=function t(n){if(false===n)e.onDone(false);else{s.size=h;s.children=n?n.filter(function(e){return e}):[];e.onDone(s)}};e.cells=[];e.style={width:h.width+"px",height:h.height+"px"};e.$on("$destroy",function(){c.reject();o.cancel(d)});a.on("$destroy",function(){e.$destroy()});if(p){var m=i.getGrid()&&i.getGrid().cells||[];m.forEach(function(e){f[e.id]=e.object})}n.get(e.sheetId).then(function(n){n.getLayout().then(function(i){var a=i.columns,u=i.rows,p=[];s.id=i.qInfo.qId;s.type=i.qInfo.qType;s.title=i.labelExpression||i.qMeta.title||"";i.cells.forEach(function(t){var i,o,s,l={left:t.col/a,top:t.row/u,width:t.colspan/a,height:t.rowspan/u};if(f[t.name]&&!f[t.name].ext)return;if(f[t.name]&&f[t.name].ext.libraryInfo.isThirdParty)s=r.snapshot(t.name,{width:h.width*(v?1:l.width),height:h.height*(v?1:l.height)},f[t.name],{},l,n.enigmaModel.app).then(function(e){return e});else{i=r.loadObject(t.name,f[t.name],l,n.enigmaModel.app);o={style:v?{left:0,top:0,width:"100%",height:"100%"}:{left:100*t.col/a+"%",top:100*t.row/u+"%",width:100*t.colspan/a+"%",height:100*t.rowspan/u+"%"},data:i.data};o.data.area=l;s=i.snap.then(function(e){return e});e.cells.push(o)}p.push(s)});if(p.length){t.all(p).then(function(e){c.resolve();o.cancel(d);g(e);return c.promise});d=o(function(){c.reject();g(false)},l)}else g()})},function(){g()})}]};var s=[];function l(t){var n=s.indexOf(t);n>=0&&s.splice(n,1);var i=e(t).children("div");i.scope&&i.scope()&&i.scope().$destroy();e(t).remove()}function c(){var e;while(e=s.pop())l(e)}var u={FULL:"full",GRID:"grid"};return{snapshot:function n(i,r,o,c){var u=t(),d=document.createElement("div");d.className="qv-snapshotter";s.push(d);document.body.appendChild(d);e(d).showComponent(a,{sheetId:i,sheet:o,size:r||{},sheetLayout:c,onDone:function e(t){false===t?u.reject({timedOut:true}):u.resolve(t);l(d)}});return u.promise},cancel:function e(){c()}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(93),n(340),n(338),n(173),n(48),n(152),n(247),n(423),n(646),n(452)],r=function(e,t,n,i,r,o,a,s,l,c,u){function d(e,t){return e?r.get(e).then(function(e){return e.apply()},function(){}):n.get(t).then(function(e){return e.getSnapshotObject().then(function(e){e.apply()})})}var f=function e(t,n,r,l,f,p){var h=window.location.protocol+"//"+window.location.host;var v={properties:{origin:h},snapshotData:null};var g={image:function e(t){v.properties.qUrl=t.srcPath.qStaticContentUrl.qUrl;v.properties.resourceUrl=h+t.srcPath.qStaticContentUrl.qUrl},text:function e(t){var n=null;var i=t.style.text;var s=o.getService("$sce");"string"===typeof i&&(n=s.getTrustedHtml(a.toHTML(i)));if("title"===t.visualizationType){var d=u.calculatePrintTitleFontSize(n,r.height-10,1.32);n=c.enrichHtml(n,l,true,d+"px")}else{var p=u.calculatePrintParagraphFontSize(f.height);n=c.enrichHtml(n,l,false,p+"px")}v.properties.html=n;v.properties.color=t.style.color;v.properties.text=i},shape:function e(t){v.properties.dataPath=t.dataPath;v.properties.resourceUrl=h+"/"+t.dataPath;v.properties.color=t.style.color},snapshot:function e(t){false!==t.qEmbeddedSnapshot.supportExport?v.snapshotData=s.formatSnapshotForRendering(t.qEmbeddedSnapshot,p.qLocaleInfo):v.invalid=true},sheet:function e(t,n){var r=t.qInfo.qId;var o=t.selectionState?t.selectionState.init:null;v=d(o,r).then(function(){return i.snapshot(t.sheetId,n)})}};g[t]&&g[t](n,r);return v};function p(e,t,i,r,o){return n.get(e.qInfo.qId).then(function(n){return n.getLayout().then(function(n){return f(e.qData.visualization,n,t,i,r,o)})})}function h(e){var t={"z-index":e["z-index"]};["left","top","width","height"].forEach(function(n){t[n]=parseFloat(e[n])/100});return t}function v(e){return"auto"===e.left?l.getPosition("align-right"):"auto"===e.right?l.getPosition("align-left"):e}function g(n,i,r){var o=r.dpi;return t.getApp().then(function(e){return e.getObject(n)}).then(function(t){return e.all([t.app.getLayout(),t.getLayout()]).then(function(t){var n=t[0];var r=t[1];var a=r.qChildList.qItems;if(!a.length)return[];return e.all(a.map(function(e){var t=e.qData.position;"sheet"===e.qData.visualization&&(t=v(e.qData.position));var r=h(t);var a={width:i.width*r.width,height:i.height*r.height};return p(e,a,o,i,n).then(function(t){if(!t.invalid){var n={id:e.qInfo.qId,type:e.qInfo.qType,visualization:e.qData.visualization,visualizationType:e.qData.visualizationType,snapshotData:t.snapshotData,size:t.size,children:t.children,area:r,properties:t.properties,title:t.title||""};return n}})}))})})}return{snapshot:function e(t,n,i,r){return g(t,n||{},r).then(function(e){return{id:t,type:"slide",area:null,snapshotData:null,children:e.filter(function(e){return!!e})}})}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90),n(89),n(93)],r=function(e,t,n){function i(e){return e?t.resolve(e.enigmaModel):n.getApp()}var r={};r.get=function(e,t){return i(t).then(function(t){return t.getObject(e)})};r.create=function(t,n){var i={qInfo:{qId:e.generateId(),qType:"slideitem"},qEmbeddedSnapshotDef:{},title:"",sheetId:"",ratio:t.ratio,position:t.position,dataPath:t.dataPath,srcPath:t.srcPath,visualization:t.visualization,visualizationType:t.visualizationType,style:t.style};return n.createChild(e.extend(true,i,t),null)};return r}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(333),n(100)],r=function(e,t){function n(){}n.getThemeList=function(){return t.getAvailableThemes().then(function(e){return e.custom?e.default.concat(e.custom):e.default})};n.prototype.apply=function(e){return t.applyTheme(e).then(function(e){return e})};n.prototype.get=function(n){return t.getThemeJSON(n).then(function(t){return new e(n,t)})};return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e,t,n,i,r,o,a){if(e instanceof Array&&!e[0].pointInside&&!e.pointInside)throw new Error('The shape must implement a "pointInside" function');this.setShape(e);this.selected=!!t;this.value=n;this.parent=i;this.index=r;this.objectShapes={};if(o){this.parent=o.parent;this.node=o;this.rowIndex=o.data.rowIndex;this.label=o.data.qText;this.id=o.data.qElemNo}a&&e&&(this.objectShapes[a]=e instanceof Array?e:[e])}e.prototype={getShapes:function e(t){return(t||0===t)&&this.objectShapes&&this.objectShapes[t]?this.objectShapes[t]:this.shapes?this.shapes:[this.shape]},addShape:function e(t,n){this.objectShapes[t]instanceof Array||(this.objectShapes[t]=[]);this.objectShapes[t].push(n);this.shapes.push(n)},setShape:function e(t){this.shape=t instanceof Array?t[0]:t;this.shapes=t?t instanceof Array?t:[t]:[]},addValue:function e(t){void 0===this.value&&(this.value=[]);this.value instanceof Array||(this.value=[this.value]);this.value.push(t)}};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(92),n(146),n(651)],r=function(e,t,n,i){function r(e){var t=this.indexOf(e);if(t>=0)return this.splice(t,1);return null}function o(e,t){return Object.keys(t).filter(function(n){return t[n].filter(function(t){return t===e}).length})[0]}var a=t.extend({init:function t(n,r){this.options=e.extend(true,{},{components:{}},r);this._selectedShapes=[];this._cssTransform={scale:1};this.components=this.options.components;this.shapesFrom=new i(n,r)},setActiveComponent:function e(t){this.activeComponent=t;this.shapesFrom.activeComponent=t},initComponent:function e(){throw new Error("base.js: initComponent has to be implemented in subclass")},setComponent:function e(t,n){var i=Array.isArray(n)?n.concat():[n];i.forEach(function(e){var t=o(e,this.components);t&&this.removeComponent(t,e)},this);switch(t){case"x":case"y":case"dataArea":case"colorLegend":this.components[t]&&this.components[t].forEach(function(e){-1===i.indexOf(e)&&this.deregister(this,e)},this);i.forEach(function(e){this.components[t]&&-1!==this.components[t].indexOf(e)||this.register(this,e)},this);this.components[t]=i;break;default:throw new Error("Key "+t+" not implemented")}},addComponent:function e(t,n){switch(t){case"x":case"y":case"dataArea":case"colorLegend":this.components[t]||(this.components[t]=[]);var i=r.call(this.components[t],n);!i&&this.register(this,n);this.components[t].push(n);break;default:throw new Error('Key " + key + " not implemented')}},removeComponent:function e(t,n){switch(t){case"x":case"y":case"dataArea":case"colorLegend":this.components[t]&&n&&r.call(this.components[t],n);n&&this.components[t]&&this.components[t].length||delete this.components[t];this.deregister(this,n);break;default:throw new Error('Key " + key + " not implemented')}},register:function e(){},deregister:function e(){},getComponent:function e(t,i,r){var o=new n(t-r.x,i-r.y);return Object.keys(this.components).map(function(e){return this.components[e]},this).reduce(function(e,t){return e.concat(t)}).filter(function(e){var t=(e.chartScale||1)*this._cssTransform.scale;return this.getRect(e).pointInside(o.x/t,o.y/t)},this)[0]},getRect:function e(t){return t.rect},getComponentKey:function e(t){return Object.keys(this.components).filter(function(e){return this.components[e].indexOf(t)>=0},this)[0]},getTransformedPoint:function e(t,i,r){var o=this.getRect(this.activeComponent||this.components.dataArea[0]),a=(this.activeComponent||this.components.dataArea[0]).chartScale||1;return new n((t-o.x*a*this._cssTransform.scale-r.x)/this._cssTransform.scale,(i-o.y*a*this._cssTransform.scale-r.y)/this._cssTransform.scale)},getPagePoint:function e(t,i,r,o){var a=this.getRect(r||this.activeComponent||this.components.dataArea[0]),s=(this.activeComponent||this.components.dataArea[0]).chartScale||1;return new n(t+a.x*s+o.x,i+a.y*s+o.y)},release:function e(){this.activeComponent=null;this.shapesFrom&&this.shapesFrom.release();this.components=null;this.options.components=null;this.shapesFrom=null}});return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={getLevel:function e(){if(!this||this.parent===this)return;var t=this.parent,n=0;while(t){n+=1;t=t.parent}return n},each:function t(n){var i=this&&this.children,r;if(!i)return;for(r=0;r<i.length;r+=1){if(n&&false===n(i[r],r,i.length-1))return false;if(false===e.each.call(i[r],n))return false}},getLeaves:function t(){if(!this||!this.children)return[];var n=[],i;for(i=0;i<this.children.length;i+=1)this.children[i]&&this.children[i].children&&this.children[i].children.length?n=n.concat(e.getLeaves.call(this.children[i])):n.push(this.children[i]);return n}};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(261)],r=function(e,t){var n={list:[],extensionListAvailable:false},i=null;n.getList=function(n){function r(e){t.getCloudExtensions().then(function(t){o.extensionListAvailable=true;o.list=[];for(var n in t){var i=t[n];if(i.attributes){if(i.attributes.name&&i.attributes.loadpath&&i.id){i.attributes.cloud=true;i.attributes.id=i.id;o.list.push({id:i.attributes.qext_filename||i.attributes.name,data:i.attributes,path:"extensions/"+i.attributes.qext_filename+"/"+i.attributes.loadpath})}}else if(i.name&&i.loadpath&&i.id){i.cloud=true;o.list.push({id:i.qextFilename||i.name,data:i,path:"extensions/"+i.qextFilename+"/"+i.loadpath})}}e.resolve(o.list)},function(){o.extensionListAvailable=false;o.list=[];e.resolve(o.list)});return e.promise}var o=this;if(null===i){i=new e;return r(i)}if(n)return r(new e);return i.promise};n.areCloudExtensionsAvailable=function(){var e=this;return this.getList().then(function(){return e.extensionListAvailable})};return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e=/[^\s()"',+$*-<>=&/!{};:@`[\]]/;var t=/[\s()"',+$*\-<>=&/!{};:@`[\]]/;return{REGEXP_WORD:e,REGEXP_WORD_SEPARATOR:t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(695),n(441)],r=function(e,t){function n(){this.posFrom=null;this.posTo=null;this.query=null;this.marked=[]}function i(i){var r=new n;var o;function a(t,n,r){return e.getSearchCursor(i,t,n,r)}function s(e){b.validQuery=true;var t=false;try{return t?new RegExp(t[1],-1===t[2].indexOf("i")?"":"i"):e}catch(t){b.validQuery=false;return e}}function l(){i.operation(function(){var e;if(!r.query)return;r.query=null;for(e=0;e<r.marked.length;++e)r.marked[e].clear();r.marked.length=0});d()}function c(e,n,c,u){var d=2e3;var f=0;l();if(e){i.operation(function(){r.query=s(e);var l={line:0,ch:0};!n&&o&&o.from()&&(l=o.from());o=a(r.query,{line:0,ch:0},u);f=t.getMaxNumberOfHits(i.getValue(),e,u);if(i.lineCount()<d)while(o.findNext())r.marked.push(i.markText(o.from(),o.to(),{className:"cm-searching"}));r.posTo=i.getCursor();r.posFrom=r.posTo;o=a(r.query,l,u)});c&&p();b.hits=f;return f}b.hits=0;return 0}var u;function d(){u&&u.clear()}function f(){d();u=i.markText(o.from(),o.to(),{className:"cm-current"});i.setCursor(o.to());r.posFrom=o.from();r.posTo=o.to()}function p(e,t){var n=o.find(e);if(n){f();i.scrollIntoView(o.from(),i.getScrollInfo().clientHeight/2)}else t&&t();return n}function h(e){o=a(r.query,{line:0,ch:0},e);return p(false)}function v(e){var t=i.lastLine();var n=i.getLine(t).length;o=a(r.query,{line:t,ch:n},e);return p(true)}function g(e,t,n,i){var a="string"===typeof r.query?t:o.pos.match[0].replace(r.query,t);o.atOccurrence||h(n);o.replace(a);b.hits--;var s=o.find(e);s?f():i&&i()}function m(e,t,n){if(!e)return;var l=0;e=s(e);i.operation(function(){for(o=a(e,void 0,n);o.findNext();){l++;var i="string"===typeof r.query?t:o.pos.match[0].replace(r.query,t);o.replace(i)}});b.hits=0;return l}var b={doSearch:c,clearMarkedSearch:l,doFindNext:p,doFindFirst:h,doFindLast:v,doReplaceAll:m,doReplace:g,hits:0,validQuery:true};return b}return{createSingleCodeareaSearcher:i}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(720),n(109),n(721),n(723),n(724)],r=function(e,t,n,i){function r(e,t,n){void 0!==e.colors&&(e=e.colors);this._palette=e;this._index=-1;this._shift=n||false;void 0!==t.index&&(this._index=t.index);"none"===t&&(this._index=0);if(""===t){this._index=0;t="none"}if(this._index>=0&&this._index<this._palette.length)this._hex=this._palette[this._index];else if(void 0!==t.color){this._hex=t.color;this._index=e.indexOf(this._hex)}else{if(e[t]){this._hex=e[t];this._index=t}else{this._hex=t;this._index=e.indexOf(this._hex)}"none"===t&&(this._index=0)}this._defaultHSV={h:0,s:100,v:100};this._updateHexToHsv();this._updateHexObj();this._updateWheelStatus()}r.prototype._updateHexObj=function(){this._colorUtil=new n(this._hex);if(this._colorUtil.isInvalid())this._hexObj={value:"-"};else{var e=this._hex.substring(1,7);this._hexObj={value:e}}};r.prototype._updateWheelStatus=function(){this._index>=0&&this._index<this._palette.length+this._shift||0==this._index?this._isWheelUsed=false:this._isWheelUsed=true};r.prototype._updateHexToHsv=function(){this._colorUtil=new n(this._hex);this._colorUtil.isInvalid()?this._hsv=this._defaultHSV:this._hsv=this._colorUtil.toHSVComponents()};r.prototype._updateHsvToHex=function(e){this._colorUtil=new n("hsv("+this._hsv.h+","+this._hsv.s+","+this._hsv.v+")");this._colorUtil.isInvalid()&&e.$disableNone&&(this._colorUtil=new n(e.$defaultColor));if(this._colorUtil.isInvalid())this._hexObj="-";else{this._hexObj={value:this._colorUtil.toHex().substring(1,7)};this._hex="#"+this._hexObj.value}this._index=this._palette.indexOf(this._hex)};r.prototype.updateColor=function(e,t){this._colorUtil=new n(e);if(this._colorUtil.isInvalid()){this._hex="none";this._index=0}else{this._hex=e;this._index=t}this._updateHexToHsv();this._updateHexObj();this._updateWheelStatus()};r.prototype.updatePalette=function(e){void 0!==e.colors&&(e=e.colors);this._palette=e;this._index>=e.length&&(this._index=-1);this._updateHexToHsv();this._updateHexObj();this._updateWheelStatus()};r.prototype.updateHex=function(e){this._hex=e;this._index=this._palette.indexOf(this._hex);this._updateHexToHsv();this._updateHexObj();this._updateWheelStatus()};r.prototype.updateHexUntrusted=function(e){var t="#"+e.replace(/[^0-9A-Fa-f]+/g,"").substring(0,6);this.updateHex(t)};r.prototype.getHsv=function(){return this._hsv};r.prototype.setHsv=function(e){this._hsv=e;this._updateHsvToHex()};r.prototype.syncHsv=function(){this._updateHsvToHex()};r.prototype.getHex=function(){return this._hex};r.prototype.getHexObj=function(){return this._hexObj};r.prototype.isWheelUsed=function(){return this._isWheelUsed};r.prototype.forceWheelUsed=function(e){this._isWheelUsed=e};r.prototype.isDark=function(){return this._colorUtil.isDark()};r.prototype.getIndex=function(){return this._index};r.prototype.clone=function(){return e.extend(true,{},this)};var o={template:t,controller:["$scope","$element","$timeout",function(e,t,o){var a=e.$inputViewValue;e.currentPalette=e.$palette;e.extended=e.$extended;var s=new r(e.currentPalette,a,e.$disableNone);e.$useGlyph&&(e.glyphIcon=e.$inputViewValue.icon);var l=null;var c;var u=false;Object.defineProperty(e,"hsv",{get:function e(){return s.getHsv()},set:function e(t){s.setHsv(t)}});Object.defineProperty(e,"foreColor",{get:function e(){return s.getHex()}});Object.defineProperty(e,"hex",{get:function e(){return s.getHexObj()},set:function e(){return s.setHexObj()}});Object.defineProperty(e,"isDark",{get:function e(){return s.isDark()}});Object.defineProperty(e,"customColor",{get:function t(){return s.isWheelUsed()&&e.extended},set:function e(t){s.forceWheelUsed(t)}});e.recentColors=i.getPersistentRecentColors();e.setGlyph=function(t,n,i){e.glyphIcon=i.icon;p()};e.onHexChange=h(f);e.colorClicked=h(function(t,n,i){e.$disableNone&&(n+=1);s.updateColor(i,n);p();u=true});e.recentColorClicked=h(function(t,n){if(!e.$disableNone||"none"!==n){s.updateHex(n);p();u=true}});e.onFoldoutClick=function(t){t.preventDefault();e.customColor=!e.customColor};e.onKeyPress=function(t){var n=t.which;13===n&&e.close()};e.getBackgroundStyle=function(e){if("none"!==e)return{"background-color":e}};function d(){return e.recentColors.length>0&&e.extended}e.showRecent=d();function f(e){if(6===e.length){var t="#"+e.replace(/[^0-9A-Fa-f]+/g,"").substring(0,6);this._colorUtil=new n(t);if(!this._colorUtil.isInvalid()){s.updateHexUntrusted(e);p();u=true}}}function p(){e.onColorChange(e.$useGlyph,s.getIndex(),e.foreColor,e.currentPalette,e.glyphIcon);e.extended&&i.stage(s.getHex())}function h(e){return function(){var t=this,n=arguments;l||(l=o(function(){e.apply(t,n);l=null},100))}}e.hueSatValueChanged=h(function(){s.syncHsv();u=true;c&&o.cancel(c);c=o(function(){p();c=null},300)});e.applyColor=function(){e.extended&&i.commit()};e.$on("$destroy",function(){u&&e.applyColor();t.find(".qv-cp-hex-input").off()})}]};return{popupComponent:o}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(736),n(737),n(109),n(100),n(302),n(96)],r=function(e,t,n,i,r,o){function a(e,t){var n=[];var i=[];for(var o=0;o<e.length;o++){i=[];0!==o&&t[o-1]?i.push(r.toHex(r.blend(e[o-1],e[o],.5))):i.push(e[o]);0!==o&&o!==e.length-1&&i.push(e[o]);o!==e.length-1&&t[o]?i.push(r.toHex(r.blend(e[o],e[o+1],.5))):i.push(e[o]);n.push(i)}return n}function s(e,t){return e.top>t/2?{x:e.left+e.width/2,y:e.top,dock:"top"}:{x:e.left+e.width/2,y:e.top+e.height,dock:"bottom"}}function l(e,t,n){n=n||100;if(e&&e.length===t-1)return e.map(function(e){return e*n});var i=[];for(var r=1;r<t;r++)i.push(r/t*n);return i}function c(e,t){if(!e||!e.length){e=[];for(var n=0;n<t-1;n++)e.push(0)}return e}function u(e,t,n){var i={};if(0===e){i.width=1===t.length?"100%":100*n[0]+"%";i.left="0%";i.background="linear-gradient(to right, "+t[e][0]+" 0%, "+t[e][1]+" 100%)"}else if(e===n.length){i.width=100*(1-n[e-1])+"%";i.left=100*n[e-1]+"%";i.background="linear-gradient(to right, "+t[e][0]+" 0%, "+t[e][1]+" 100%)"}else{i.width=100*(n[e]-n[e-1])+"%";i.left=100*n[e-1]+"%";i.background="linear-gradient(to right, "+t[e][0]+" 0%, "+t[e][1]+" 50%, "+t[e][2]+" 100%)"}return i}t.directive("qvColorSchemeDisplay",["$timeout",function(t){return{require:"?colors",template:n,replace:true,scope:{colors:"=",limits:"=",types:"=",allowChange:"=",animateChange:"=?"},link:function n(r){var d=-1;Object.defineProperty(r,"value",{get:function e(){return r.colors[d]},set:function e(t){r.colors[d]=t}});r.getLimitPos=function(e){return"calc("+100*e+"% - 1px)"};r.segmentStyles=[];var f;function p(){f||(f=t(function(){r.typs=c(r.types,r.colors.length);r.lims=l(r.limits,r.colors.length,1);r.cols=a(r.colors,r.typs);r.segmentStyles=r.colors.map(function(e,t){return u(t,r.cols,r.lims)});f=null}))}r.$watchCollection("limits",function(){p()});r.$watchCollection("colors",function(){p()});r.$watchCollection("types",function(){p()});r.getSegmentSize=function(e){return 0===e?100*r.lims[1]+"%":100*(r.lims[e]-r.lims[e-1])+"%"};r.onClick=function(t,n){var a=t.target.getBoundingClientRect();d=n;var l=s(a,e(window).outerHeight());0===n&&r.typs[0]?l.x=a.left:n===r.colors.length-1&&r.typs[n-1]&&(l.x=a.left+a.width);i.openColorPicker(l.x,l.y,{palette:o.currentPalette,dock:l.dock,disableNone:true},r)}}}}]);return{getBestPos:s,getLimits:l,getSegmentColors:a,getSegmentStyle:u}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){e.service("qvRecentGradientsService",[function(){var e=3,t=[];var n={pushTemplate:function n(i){if(!i.name||!i.colors||!i.limits||!i.types||void 0===!i.percentage)throw new Error("invalid template format");t.push(i);t.length>e&&t.splice(0,1)},getTemplates:function e(){return t.slice()},convertAbsLimits:function e(t){var n,i,r;if(0===t.length)return[];if(1===t.length&&0===t[0]){n=-10;i=10}else if(1===t.length||t.every(function(e){return e===t[0]})){n=.9*t[0];i=1.1*t[0]}else{n=null;i=null;t.forEach(function(e){i=null!==i?Math.max(i,e):e;n=null!==n?Math.min(n,e):e});r=i-n;n-=.3*r;i+=.3*r}r=i-n;return t.map(function(e){return(e-n)/r})}};return n}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(140),n(120),n(747),n(133)],r=function(e,t,n,i,r){function o(e){var t={retentionTimeValue:"",retentionTimeUnit:""};if("unlimited"===e){t.retentionTimeValue="";t.retentionTimeUnit="unlimited"}else{var n=i(e);if(n.hours()){t.retentionTimeValue=n.asHours()+"";t.retentionTimeUnit="h"}else{t.retentionTimeValue=n.asDays()+"";t.retentionTimeUnit="d"}}return t}function a(e){var t="P";var n=Math.floor(e/8760);if(n){t=t+n+"Y";e%=8760}if(e){var i=Math.floor(e/24);t=t+i+"D";e%=24}e&&(t=t+"T"+e+"H");return t}e.service("odagLinkDialogService",function(){var e;function i(){return r.getTemplateApps(t)}function s(e){return t.get(e,{},true,function(e){e.isHandled=true}).then(function(e){return n.getList(e,true).then(function(t){return t.getLayout().then(function(t){e.close();return t.map(function(e){return{id:e.qInfo.qId,name:e.qData.labelExpression||e.qData.title}})})})}).catch(function(e){e.isHandled=true;return[]})}function l(){return t.get().then(function(e){return e.getPublishableStreams()})}function c(e,t){var n="P";"unlimited"===t?n=t:"d"===t?n=a(24*Number(e)):"h"===t&&(n=a(Number(e)));return n}e={getTemplateApps:i,getSheetsForApp:s,getPublishableStreams:l,getRetentionTimeServerValue:c,getRetentionTimeDisplayValue:o};return e});return{getRetentionTimeDisplayValue:o,hoursToISO8601Format:a}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(102),n(48)],r=function(e,t,n){n.componentDirective("qvaAssetsTab",{tab:"=qvaAssetsTab"});return e.extend({init:function e(n){this.component=n.component;this.id=n.id;this.name=n.name;this.longname=n.longname;this.hasTableFilter=n.hasTableFilter;this.haveManageDataButtons=n.haveManageDataButtons;this.button=n.button;t.create(this,"Resize")},resize:function e(t){this.Resize.emit(t)},openSection:function e(){return false}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(764),n(170),n(248),n(279)],r=function(e,t,n,i){var r,o,a;function s(e){void 0===e&&(e=n.isInternalTableView());return i.getTablesAndKeys(e).then(function(e){r=e})}function l(e){if(void 0===e)return;var t=100*Number(e);return t%1===0?t:Number(String(t).substring(0,4))}function c(e){var n,i,r,o,a,s,c,u,d,f,p={};for(n in e.qtr){c=0;u=[];o=e.qtr[n];d=o.qName;o.qName=t.encodeTableName(o.qName);s=[];for(i=0;i<o.qFields.length;i++){a=o.qFields[i];f=[];-1!==a.qTags.indexOf("$key")&&c++;for(r=0;r<a.qTags.length;r++){-1===u.indexOf(a.qTags[r])&&u.push(a.qTags[r]);-1===f.indexOf(a.qTags[r])&&f.push(a.qTags[r])}var h=[];for(var v in a.qOriginalFields){var g=a.qOriginalFields[v];h.push({name:g})}s.push({name:a.qName,originalFields:h,meta:{isPerfectKey:"PERFECT_KEY"===a.qKeyType,density:l(a.qInformationDensity),subsetRatio:l(a.qSubsetRatio),tags:f,hasDuplicates:a.qHasDuplicates,nbrOfTotalDistinctValues:a.qnTotalDistinctValues,nbrOfPresentDistinctValues:a.qnPresentDistinctValues,nbrOfNonNulls:a.qnNonNulls,isKey:-1!==a.qTags.indexOf("$key"),isSynthetic:-1!==a.qTags.indexOf("$synthetic"),comment:a.qComment},derivedFields:a.qDerivedFields})}p[o.qName]={realName:d,top:o.qPos.qy,left:o.qPos.qx,height:0,width:0,autoLayoutX:o.qPos.qx,autoLayoutY:o.qPos.qy,meta:{nbrOfRows:o.qNoOfRows,nbrOfFields:Object.keys(s).length,nbrOfKeys:c,tags:u},fields:s,isDirectDiscovery:!!o.qIsDirectDiscovery,isSynthetic:!!o.qIsSynthetic}}return p}function u(){try{o=c(r);return Promise.resolve(o)}catch(e){return Promise.reject(e)}}function d(){var t=n.isInternalTableView();a=e.convertRawDataToIdealConnectionData(r,t,o)}function f(){if(!o)throw new Error("Cached ideal table data is undefined. Need to reload from engine first.");return o}function p(){if(!a)throw new Error("Cached ideal connection data is undefined. Need to reload from engine first.");return a}function h(e){i.clearAllCaches();r=void 0;o=void 0;a=void 0;return s(e).then(function(){return u()})}function v(e,t){for(var n in a){var i=a[n];if(i.fieldName===t&&-1!==i.tables.indexOf(e))return true}return false}return{getDataModel:f,getConnectionData:p,forceReload:h,doesTableFieldHaveConnection:v,recreateCachedIdealConnectionData:d,formatToPercentageNumber:l}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={};Object.defineProperties(e,{single:{value:"N",writable:false},drilldown:{value:"H",writable:false}});return{dimensionTypes:e}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(99),n(356)],r=function(e){var t=["$scope","$element","qvScrollAreaService",function(t,n,i){var r,a,s=[],l=[],c=[],u,d,f={};t.interactiveX=false;t.interactiveY=false;t.virtualSize={width:0,height:0};t.virtualViewport={width:0,height:0};t.scrollbarX=i.createScrollbar();t.scrollbarY=i.createScrollbar();t.viewportRect={top:0,left:0,width:0,height:0};t.hover=false;t.isMouse=true;Object.defineProperties(f,{PIXEL:{value:0},LINE:{value:1},PAGE:{value:2},AREA:{value:10}});Object.defineProperty(this,"DELTA_MODE",{value:f});t.$on("$destroy",function(){clearTimeout(u);clearTimeout(d)});this.setMouse=function(e){t.isMouse=e};this.getScrollAreaRect=function(){var e=n[0].getBoundingClientRect();return{top:0,left:0,width:Math.ceil(e.width),height:Math.ceil(e.height)}};this.addScrollbarXCtrl=function(e){r=e};this.addScrollbarYCtrl=function(e){a=e};this.allowFade=function(){return(void 0===r||r.allowFade())&&(void 0===a||a.allowFade())};this.fadeScrollbarsWithoutDelay=function(){r&&r.fadeOut();a&&a.fadeOut()};this.toggleFadeScrollbars=function(e){clearTimeout(d);clearTimeout(u);if(!e&&!this.allowFade())return;u=setTimeout(function(){var t=e?"fadeIn":"fadeOut";r&&r[t]();a&&a[t]()},e?0:800)};this.fadeInScrollbars=function(){this.toggleFadeScrollbars(true)};this.fadeOutScrollbars=function(){if(e.treatAsDesktop()&&t.hover)return;this.toggleFadeScrollbars(false)};this.fadeOutScrollbarsDelayed=function(){clearTimeout(d);d=setTimeout(function(){this.toggleFadeScrollbars(false)}.bind(this),1e3)};this.setNonMouseTrackSize=function(){if("object"!==o(t.nonMouseViewportScrolling))return;n.addClass(t.nonMouseViewportScrolling.className);this.setTrackSize(t.nonMouseViewportScrolling.scrollbarSize)};this.setMouseTrackSize=function(){"object"===o(t.nonMouseViewportScrolling)&&n.removeClass(t.nonMouseViewportScrolling.className);this.setTrackSize(t.scrollbarSize)};this.setTrackSize=function(e){var n=this.getVirtualPosition();this.setVirtualSize(t.virtualSize,t.virtualViewport,t.viewportRect,e);this.setVirtualScrollPos(n.vPosX,n.vPosY)};this.setupScrollbars=function(e){e=e||8;i.setScrollbarData(t.scrollbarY,"vertical",e,t.virtualSize.height,t.virtualViewport.height,t.viewportRect,t.direction);i.setScrollbarData(t.scrollbarX,"horizontal",e,t.virtualSize.width,t.virtualViewport.width,t.viewportRect,t.direction);if(t.scrollbarX.enabled&&t.scrollbarY.enabled){t.scrollbarX.length-=e;t.scrollbarX.scaleFactor=t.scrollbarX.length/t.virtualSize.width;t.scrollbarX.style.width=t.viewportRect.width-e-2*t.scrollbarX.uiOffset+"px";"rtl"===t.direction&&(t.scrollbarX.style.left=t.viewportRect.left+t.scrollbarX.uiOffset+e+"px");t.scrollbarY.length-=e;t.scrollbarY.scaleFactor=t.scrollbarY.length/t.virtualSize.height;t.scrollbarY.style.height=t.viewportRect.height-e-2*t.scrollbarY.uiOffset+"px"}};this.setVirtualSize=function(e,n,i,r){t.viewportRect=i;t.virtualSize.width=e.width;t.virtualSize.height=e.height;t.virtualViewport.width=n.width;t.virtualViewport.height=n.height;this.setupScrollbars(r)};this.setViewport=function(e){t.viewportRect=e};this.setVirtualViewport=function(e){var n=this.getVirtualPosition();t.virtualViewport.width=e.width;t.virtualViewport.height=e.height;t.scrollbarX.vViewportLength=e.width;t.scrollbarY.vViewportLength=e.height;this.setupScrollbars(t.isMouse?t.scrollbarSize:t.nonMouseViewportScrolling.scrollbarSize);this.setVirtualScrollPos(n.vPosX,n.vPosY)};this.getVirtualSize=function(){return{width:t.virtualSize.width,height:t.virtualSize.height}};this.getVirtualPosition=function(){var e=0,n=this.getMaxPosition();return{vPosX:Math.max(e,Math.min(n.vPosX,t.scrollbarX.vPos)),vPosY:Math.max(e,Math.min(n.vPosY,t.scrollbarY.vPos))}};this.getMaxPosition=function(){var e=0,n=Math.max(e,t.scrollbarX.vLength-t.scrollbarX.vViewportLength),i=Math.max(e,t.scrollbarY.vLength-t.scrollbarY.vViewportLength);return{vPosX:n,vPosY:i}};this.isMouseOver=function(){return t.hover};this.resetScroll=function(){if(void 0===t.scrollbarX.vPos||void 0===t.scrollbarY.vPos)return;0===t.scrollbarX.vPos&&0===t.scrollbarY.vPos||this.scroll(-t.scrollbarX.vPos,-t.scrollbarY.vPos,true,false)};this.setVirtualScrollPos=function(e,n,r){i.setVirtualScrollPos(e,t.scrollbarX,r);i.setVirtualScrollPos(n,t.scrollbarY,r)};this.scroll=function(e,n,r,o){var a,l;a=i.setVirtualScrollPos(e,t.scrollbarX,o);l=i.setVirtualScrollPos(n,t.scrollbarY,o);(0!==a||0!==l||r)&&s.forEach(function(e){e(a,l)})};this.getScrollAmount=function(e,t,n){switch(n){default:return{deltaX:e,deltaY:t}}};this.scrollStart=function(){l.forEach(function(e){e()})};this.scrollEnd=function(){c.forEach(function(e){e()})};this.onScroll=function(e){s.push(e)};this.onScrollStart=function(e){l.push(e)};this.onScrollEnd=function(e){c.push(e)};this.on=function(){if(!(t.interactiveX||t.interactiveY)){t.off=t.on();t.interactiveX=true;t.interactiveY=true}};this.off=function(){if(t.off){t.off();t.interactiveX=false;t.interactiveY=false}};this.setHorizontalScrollInteractive=function(e){t.interactiveX=e};this.setVerticalScrollInteractive=function(e){t.interactiveY=e};this.isVerticalScrollEnabled=function(){return t.scrollbarY.enabled};this.digest=function(){t.$parent.$digest()}}];return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){e.service("qvScrollAreaService",function(){function e(e){if("rtl"===e.textDirection&&"horizontal"===e.direction){var t=e.showMinAffordance;e.showMinAffordance=e.showMaxAffordance;e.showMaxAffordance=t}}return{createScrollbar:function e(){return{vLength:0,vViewportLength:0,vPos:0,vPage:0,thumb:{},style:{},classList:[],enabled:false,getScrollDelta:function e(t){var n=0,i=0;if(!this.enabled)return[0,0];switch(this.direction){case"vertical":i=t.swipe.curDeltaY*(1/this.scaleFactor);break;case"horizontal":n=("rtl"===this.textDirection?-1:1)*t.swipe.curDeltaX*(1/this.scaleFactor);break;default:throw new Error("not implemented")}return[n,i]},active:false}},setScrollbarData:function t(n,i,r,o,a,s,l){var c=3,u;switch(i){case"vertical":u=s.height;break;case"horizontal":u=s.width;break;default:throw new Error("not implemented")}n.enabled=a<o&&u>0;if(!n.enabled)return;u-=2*c;n.uiOffset=c;n.direction=i;n.vLength=o;n.vViewportLength=a;n.vPos=0;n.vPage=u;n.length=u;n.trackSize=r;n.scaleFactor=u/o;n.thumb.pos=0;n.thumb.size=0;n.thumb.vPos=0;n.showMinAffordance=false;n.showMaxAffordance=true;n.textDirection=l;switch(n.direction){case"vertical":n.style.top=s.top+n.uiOffset+"px";n.style.width=r+"px";n.style.left="rtl"===l?n.uiOffset+"px":s.left+s.width-r-n.uiOffset+"px";n.style.height=s.height-2*n.uiOffset+"px";break;case"horizontal":n.style.height=r+"px";n.style.top=s.top+s.height-r-n.uiOffset+"px";n.style.left=s.left+n.uiOffset+"px";n.style.width=s.width-2*n.uiOffset+"px";break;default:throw new Error("not implemented")}e(n)},setVirtualScrollPos:function t(n,i,r){var o=0,a=i.vLength-i.vViewportLength,s=0,l=i.thumb.vPos;if(!i.enabled)return 0;i.vPos+=n;i.showMinAffordance=false;i.showMaxAffordance=false;if(i.vPos<o){l=o;i.vPos=r?i.vPos:o;i.showMaxAffordance=true}else if(i.vPos>a){l=a;i.vPos=r?i.vPos:a;i.showMinAffordance=true}else{i.vPos!==o&&(i.showMinAffordance=true);i.vPos!==a&&(i.showMaxAffordance=true);l=i.vPos}s=l-i.thumb.vPos;i.thumb.vPos=l;e(i);return s},setThumbStyle:function e(t,n){var i=n.thumb;var r=12;var o=n.scaleFactor;var a=Math.floor(i.vPos*o);var s=Math.floor(n.vViewportLength*o);if(s<r){a-=Math.floor((r-s)/2);s=r}a=Math.max(a,0);a+s>n.length&&(a=n.length-s);i.size=s;i.pos=a;switch(n.direction){case"vertical":t.top=a+"px";t.height=s+"px";break;case"horizontal":if("rtl"===n.textDirection){delete t.left;t.right=a+"px"}else{delete t.right;t.left=a+"px"}t.width=s+"px";break;default:throw new Error("not implemented")}},setTrackHitAreaStyle:function e(t,n,i){if("vertical"===n.direction){t.right=-n.uiOffset+"px";t.width=i+n.uiOffset+"px"}else{t.bottom=-n.uiOffset+"px";t.height=i+n.uiOffset+"px"}}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(153),n(49),n(157),n(134)],r=function(e,t,n,i){function r(e){var t={};t.permissions=e.permissions;t.name=e.qData.title;t.secondaryName=e.qData.labelExpression||"";t.type=e.qInfo.qType;t.id=e.qInfo.qId;t.getDropOption=a.bind(null,t);t.tags=e.qData.tags;t.info=e.qData.info;"H"===e.qData.grouping&&(t.icon="drill-down");return t}function o(t){return i.get(t.id).then(function(n){return n.getProperties().then(function(n){var i=e.createLibraryDimension(t.id);e.autoSortDimension(i,t.info);var r=t.name;n.qDim.qLabelExpression&&(r={qStringExpression:{qExpr:n.qDim.qLabelExpression}});return{id:"newObject",args:{template:"filterpane",children:[e.createDefaultListBox(i,r)],init:{}}}})})}function a(e,i,r){if(t.getFlag("DISABLE_AUTO_CHART")||n.isVariableDefined("DISABLE_AUTO_CHART"))return o(e);if(r&&r.shiftKey)return o(e);return{id:"newObject",args:{template:"auto-chart",init:{qHyperCubeDef:{qDimensions:[{qLibraryId:e.id}],qInterColumnSortOrder:[0]},showTitles:false}}}}var s={create:function e(t){return t.map(function(e){return r(e)})}};return s}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(801),n(100),n(802),n(174)],r=function(e,t,n,i){function r(r){var o={template:t,controller:["$scope",function(t){t.input=r;t.valueColors=[];r.baseColor&&r.baseColor.color&&(t.color=n.resolveColor(r.baseColor));t.showLabelExpression=!!t.input.labelExpression;t.showLabelExpressionDef=!!t.input.labelExpressionDef;var o=e.getService("qvColorMapService");var a=o.getTemplate();o.getColorMap(t.input.qId).then(function(e){if(e){a=e;t.valueColors=i.getColors(a);t.previewColorViewWidth=i.getPreviewColorViewWidth(t.valueColors)}})}],dock:"right",alignTo:r.alignTo[0]};return e.getService("luiPopover").show(o)}return{show:r}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(48),n(210),n(193)],r=function(e,t,n){var i={},r,o=[];return{saveTemplate:y,getTemplate:S,deleteTemplate:w,addTemplate:C,getWidgetList:l,getWidgetListFromLibrary:c,loadWidget:q,getLibForId:s,loadFile:u,getLibrary:v,saveLibrary:p,deleteLibrary:h,reloadCachedLibraries:b};function a(e){return(e.libid?e.libid:e.id)+"/"+e.id}function s(e){var t=o.filter(function(t){return t.data.widgets&&t.data.widgets.indexOf(e)>-1});t.length>1&&console.log("Duplicate libraries for widget:"+e,t);return t[0]}function l(t){if(!r||t){r=new e;var i=[];n.getList(t).then(function(e){o.length=0;e.forEach(function(e){if("widget-library"===e.data.type){o.push(e);e.data.widgets&&e.data.widgets.forEach(function(t){i.push({libid:e.id,id:t})})}});r.resolve(i)})}return r.promise}function c(t){var i=[];var r=new e;n.getList(false).then(function(e){o.length=0;e.forEach(function(e){if("widget-library"===e.data.type&&e.id===t){o.push(e);e.data.widgets&&e.data.widgets.forEach(function(t){i.push({libid:e.id,id:t})})}});r.resolve(i)});return r.promise}function u(e,n){return t.getService("$contentApi").request({method:"GET",url:"/extensions/"+e+(n?"?"+(new Date).getTime():""),cache:false})}function d(n,i,r){var o=new e;if(r){u(n).then(function(e){var t=e.headers;t("last-modified")!==r?o.reject("File modified by another user"):d(n,i).then(function(){o.resolve()}).catch(function(e){o.reject(e)})});return o.promise}var a=n.split("/");t.getService("$contentApi").request({method:"POST",url:"/qrs/extension/"+a[0]+"/uploadfile?externalpath="+a[1]+"&overwrite=true",data:i}).then(function(){o.resolve()}).catch(function(e){o.reject(e)});return o.promise}function f(n){var i=new e;var r=n.split("/");t.getService("$contentApi").request({method:"DELETE",url:"/qrs/extension/"+r[0]+"/deletecontent?externalpath="+r[1]}).then(function(){i.resolve()}).catch(function(e){i.reject(e)});return i.promise}function p(t){var n=new e;d(a(t)+".qext",JSON.stringify(t.data,null,2)).then(function(){n.resolve()},function(e){n.reject(e)});return n.promise}function h(e){return f(a(e)+".qext")}function v(e){return u(e+"/"+e+".qext",true).then(function(e){return e.data})}function g(t,n){var i=new e;v(t).then(function(e){e.widgets||(e.widgets=[]);e.widgets.push(n);p({id:t,data:e}).then(function(){i.resolve()},function(e){i.reject(e)})});return i.promise}function m(t,n){var i=new e;v(t).then(function(e){if(e.widgets){e.widgets=e.widgets.filter(function(e){return e!==n});p({id:t,data:e}).then(function(){i.resolve()},function(e){i.reject(e)})}else i.reject()});return i.promise}function b(){var t=new e;n.getList(true).then(function(e){o.length=0;e.forEach(function(e){"widget-library"===e.data.type&&o.push(e)});t.resolve()}).catch(function(e){t.reject(e)});return t.promise}function y(t){var n=new e,i=a(t);d(i+".json",JSON.stringify({name:t.name,description:t.description,author:t.author,library:t.libid,meta:t.meta,properties:t.properties,dependencies:t.dependencies},null,2),t.lastModified).then(function(){var e="<style>"+t.css+"</style>\n<div>"+t.html+"</div>";d(i+".html",e).then(function(){t.lastModified?u(i+".json",true).then(function(e){var n=e.headers;t.lastModified=n("last-modified")}).then(function(){n.resolve()}):g(t.libid,t.id).then(function(){u(i+".json",true).then(function(e){var n=e.headers;t.lastModified=n("last-modified")}).then(function(){n.resolve()})})},function(e){n.reject(e)})},function(e){n.reject(e)});return n.promise}function x(t){var n=new e;u(t+".json",true).then(function(e){var t=e.data;var i=e.headers;t.lastModified=i("last-modified");n.resolve(t)}).catch(function(e){n.reject(e)});return n.promise}function S(e,t){var n=e+"/"+t;i[n]||(i[n]=x(n));return i[n]}function w(t){var n=new e,r=a(t);f(r+".json").then(function(){m(t.libid,t.id).then(function(){f(r+".html").then(function(){delete i[r];n.resolve()},function(e){n.reject(e)})},function(e){n.reject(e)})},function(){n.reject()});return n.promise}function q(t){var n=new e,i=a(t);u(i+".html",true).then(function(e){var i=e.data;var r=document.createElement("div");r.innerHTML=i;var o=r.getElementsByTagName("script");var a=o.length;while(a--)o[a].parentNode.removeChild(o[a]);var s=r.getElementsByTagName("style");if(1===s.length){t.css=s[0].innerHTML;var l=r.getElementsByTagName("div");t.html=l[0].innerHTML;n.resolve()}else n.reject("Widget.InvalidTemplate")}).catch(function(){n.reject()});return n.promise}function C(t){var n=a(t);if(!i[n]){var r=new e;i[n]=r.promise;r.resolve(t)}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(96)],r=function(e,t){function n(t,n,i){return e.Event(t,{pageX:i.pagePoints[0].x,pageY:i.pagePoints[0].y,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,originalEvent:n,gestureData:i})}var i;t(document.body).tap({options:{preventDefault:false},start:function t(n){i=e(n.target)}});t(document.body).swipe({options:{preventDefault:false,radiusThreshold:8},start:function e(t,r){var o=n("qv-swipestart",t,r);i.trigger(o)},update:function e(t,r){var o=n("qv-swipeupdate",t,r);i.trigger(o)},cancel:function t(){var n=e.Event("qv-swipecancel");i.trigger(n)},end:function e(o,a){t.utils.isMouse(o)||r();var s=n("qv-swipe",o,a);i.trigger(s)}});function r(){var e;function t(){document.removeEventListener("mousedown",n,true);document.removeEventListener("mousemove",i,true);document.removeEventListener("mouseup",r,true)}function n(e){e.preventDefault();e.stopPropagation()}function i(e){e.preventDefault();e.stopPropagation()}function r(n){n.preventDefault();n.stopPropagation();t();clearTimeout(e)}document.addEventListener("mousedown",n,true);document.addEventListener("mousemove",i,true);document.addEventListener("mouseup",r,true);e=setTimeout(t,350)}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(96)],r=function(e,t){var n=t.Gesture.augment(function(n){var i=false;this.defaults={radiusThreshold:10,timeThreshold:510,touches:1,precedence:4,preventDefault:false,which:1,interval:10};this.on=function(e){this.count=0;t(e).longtap({id:this.id,options:{precedence:this.options.precedence,preventDefault:this.options.preventDefault,touches:this.options.touches,which:this.options.which,areaThreshold:this.options.areaThreshold,timeThreshold:this.options.timeThreshold,interval:this.options.interval},start:this.longtapStart.bind(this),update:this.longtapUpdate.bind(this),cancel:this.longtapCancel.bind(this),end:this.longtapEnd.bind(this)}).swipe({id:this.id,options:{precedence:this.options.precedence+1,preventDefault:this.options.preventDefault,radiusThreshold:this.options.radiusThreshold,touches:this.options.touches},start:this.swipeStart.bind(this),update:this.swipeUpdate.bind(this),end:this.swipeEnd.bind(this),cancel:this.swipeCancel.bind(this)})};this.off=function(e){t(e).off("longtap",this.id);t(e).off("swipe",this.id)};this.longtapStart=function(){i=false};this.longtapUpdate=function(e,t){100===t.percentage&&(i=true)};this.longtapEnd=function(){this.binder.cancel()};this.longtapCancel=function(){i||this.binder.cancel()};this.swipeStart=function(t,n){var r=e(t.target).is("input, textarea");i&&!r?this.binder.start(t,n):i&&r&&(i=false)};this.swipeUpdate=function(e,t){i&&this.binder.update(e,t)};this.swipeEnd=function(e,t){if(i){o();this.binder.end(e,t);i=false}};this.swipeCancel=function(){i=false;this.binder.cancel()};function r(){n.apply(this,arguments)}function o(){var e;function t(){document.removeEventListener("mousedown",n,true);document.removeEventListener("mousemove",i,true);document.removeEventListener("mouseup",r,true)}function n(e){e.preventDefault();e.stopPropagation()}function i(e){e.preventDefault();e.stopPropagation()}function r(n){n.preventDefault();n.stopPropagation();t();clearTimeout(e)}document.addEventListener("mousedown",n,true);document.addEventListener("mousemove",i,true);document.addEventListener("mouseup",r,true);e=setTimeout(t,350)}return r});t.gestures.add("longtapswipe",n)}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(95),n(93),n(122),n(94),n(120),n(215),n(301),n(143)],r=function(e,t,n,i,r,o,a,s,l,c){var u=false;var d=false;var f={userId:void 0,userDirectory:void 0};function p(e){var n=t.getService("qvAppViewService");n.blockScrollIntoView=true;n.activeId=e.qInfo.qId;n.lastActiveId=e.qInfo.qId;n=null}function h(e){u=e}var v={update:function e(){return s.getList().then(function(e){return e.getLayout().then(function(e){v.all.approvedStories=e.filter(l.filterApproved).sort(l.sortByRank);v.all.publishedStories=e.filter(l.filterMyPublishedCommunity(f)).sort(l.sortPublishedTime);v.all.privateStories=e.filter(l.filterPrivate).sort(l.sortByRank);v.all.communityStories=e.filter(l.filterCommunity(f)).sort(l.sortCommunity(1));v.all.mashed=[];if(v.current)for(var t=0;t<Object.keys(v.all).length;t++){var i=v.all[Object.keys(v.all)[t]];for(var r=0;r<i.length;r++)v.all.mashed.push(i[r])}n.publish("/data/story-list-layout-changed")})})},all:{mashed:[],approvedStories:[],publishedStories:[],privateStories:[],communityStories:[]},privateStories:[],current:{},currentIndex:function e(){for(var t=0;t<v.all.mashed.length;t++)if(v.current.id===v.all.mashed[t].qInfo.qId)return t;return 0},hasPrevious:function e(){return v.currentIndex()>0},hasNext:function e(){return v.currentIndex()<v.all.mashed.length-1},getPrevious:function e(){if(v.hasPrevious())return v.all.mashed[v.currentIndex()-1];return null},getNext:function e(){if(v.hasNext())return v.all.mashed[v.currentIndex()+1];return null},getFirst:function e(){return v.all.mashed[v.currentIndex()]},getLast:function e(){return v.all.mashed[v.all.mashed.length-1]},navigate:function t(){if(u)return;var n=v.all.mashed.length-v.all.communityStories.length-1;var i=v.current===v.getFirst()?v.getNext():v.currentIndex()<n?v.getNext():v.currentIndex()===n?v.getPrevious():null;var a=o.view===o.Views.story;if(i){if(a){p(i);s.get(i.qInfo.qId).then(function(e){r.goToStory(e.id,Object.keys(o.States)[o.state])})}}else{var l=e(".qv-pop-appview").scope();l&&l.closeView();l=null;a&&r.goToOverview()}},communitySort:function e(t,n){var i=v.all.communitySheets.sort(l.sortCommunity(t));n&&i.reverse();v.all.communitySheets=i}};var g={update:function e(){return a.getList().then(function(e){return e.getLayout().then(function(e){g.all.approvedSheets=e.filter(l.filterApproved).sort(l.sortByRank);g.all.publishedSheets=e.filter(l.filterMyPublishedCommunity(f)).sort(l.sortPublishedTime);g.all.privateSheets=e.filter(l.filterPrivate).sort(l.sortByRank);g.all.communitySheets=e.filter(l.filterCommunity(f)).sort(l.sortCommunity(1));g.all.mashed=[];if(g.current)for(var t=0;t<Object.keys(g.all).length;t++){var i=g.all[Object.keys(g.all)[t]];for(var r=0;r<i.length;r++)g.all.mashed.push(i[r])}n.publish("/data/sheet-list-layout-changed",g.all.mashed)})})},all:{mashed:[],approvedSheets:[],publishedSheets:[],privateSheets:[],communitySheets:[]},privateSheets:[],current:{},getNumberOfSheets:function e(){return g.all.mashed.length},currentIndex:function e(){for(var t=0;t<g.all.mashed.length;t++)if(g.current.id===g.all.mashed[t].qInfo.qId)return t;return 0},hasPrevious:function e(){return g.currentIndex()>0},hasNext:function e(){return g.currentIndex()<g.all.mashed.length-1},getPrevious:function e(){if(g.hasPrevious())return g.all.mashed[g.currentIndex()-1];return null},getNext:function e(){if(g.hasNext())return g.all.mashed[g.currentIndex()+1];return null},getFirst:function e(){return g.all.mashed[0]},getLast:function e(){return g.all.mashed[g.all.mashed.length-1]},getById:function e(t){for(var n=0;n<g.all.mashed.length;n++)if(g.all.mashed[n].qInfo.qId===t)return g.all.mashed[n];return null},navigate:function t(){if(u)return;var n=g.all.mashed.length-g.all.communitySheets.length-1;var i=g.current===g.getFirst()?g.getNext():g.currentIndex()<n?g.getNext():g.currentIndex()===n?g.getPrevious():null;var s=o.view===o.Views.sheet||o.view===o.Views.object||o.view===o.Views.masterObject;if(i){if(s){p(i);a.get(i.qInfo.qId).then(function(e){r.goToSheet(e.id,Object.keys(o.States)[o.state])})}}else{var l=e(".qv-pop-appview").scope();l&&l.closeView();l=null;s&&r.goToOverview()}},navigateToSheet:function e(t){if(t){p(t);a.get(t.qInfo.qId).then(function(e){r.goToSheet(e.id,Object.keys(o.States)[o.state])})}},communitySort:function e(t,n){var i=g.all.communitySheets.sort(l.sortCommunity(t));n&&(i=i.reverse());g.all.communitySheets=i}};function m(){if(d)return Promise.resolve();o.SheetChanged.bind(function(e){g.current=e});o.StoryChanged.bind(function(e){v.current=e});c.onDataReceived.then(function(e){if("NONE"!==e.userDirectory){f.userId=e.userId;f.userDirectory=e.userDirectory}});return i.getApp().then(function(){return Promise.all([g.update(),v.update()]).then(function(){return Promise.all([a.getList(),s.getList()]).then(function(e){var t=e[0];t.Invalidated.bind(g.update);var n=e[1];n.Invalidated.bind(v.update);d=true;return d})})})}var b={isInitialized:function e(){return d},init:m,Sheets:g,Stories:v,suspendNavigation:h};t.service("$navigationService",function(){return b});return b}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(91),n(273),n(90),n(11)],r=function(e,t,n,i){return{activatePopover:r,createPlaceHolder:a,getMultiPopoverItems:s,openMultiStatePopover:l,getAllStatesFromSelections:c,getAllSelectionsInStates:u,groupSelectionsByField:d,openListboxPopover:f,getIndexByKey:p,getDisplayStateName:o};function r(e,t,n,i,r,o){return e.showField(t,i.model.app.enigmaModel,n,{qStateName:o},function(){i.activeFieldName="";r(function(){i.closeTooltip()},100)})}function o(n){return n===t.DEFAULT_STATE_NAME?e.get(t.DEFAULT_STATE_TRANSLATION):n}function a(e,t,n){e.isPlaceHolder=true;e.active=false;e.qLocked=false;e.feedbackActive=false;e.translation="";e.qTotal=0;e.qStateCounts=0;t&&(e.qField=t);n&&(e.name=n);return e}function s(e,t){e=e||[];var n=e.filter(function(e){return e.qField===t})[0];var i=[];n&&n.states&&(i=n.states.map(function(e){e.isSingleState=true;e.displayStateName=o(e.stateName);return e}));return i}function l(e,t,n,i,r){var o=e.show({alignToElement:n,clear:r.clear,click:r.click,onClose:r.onClose,openTooltip:r.openTooltip,closeTooltip:r.closeTooltip,handleKeyDown:r.handleKeyDown,getItems:t,brightCurSel:i});return o}function c(e,t){t=t||null;var i=[];t&&(e=e.filter(function(e){return e.qField===t}));e.forEach(function(e){e.states?e.states.forEach(function(e){i.push(e.stateName)}):i.push(e.stateName)});i=n.getUnique(i);return i}function u(e){var t=[];(e.selectionsInStates||[]).forEach(function(e){e.qSelectionObject.qSelections.forEach(function(t){t.stateName=e.stateName});t=t.concat(e.qSelectionObject.qSelections)});return t}function d(e){var t={};e.forEach(function(e){var n=t[e.qField];n=n||{states:[],qField:e.qField};n.states.push(e);t[e.qField]=n});var n=Object.keys(t).map(function(e){var n=t[e];var i=n.states;if(1===i.length){n=n.states[0];n.isSingleState=true;n.isDefaultState="$"===i[0].stateName}else n.name=i[0].name;return n});return n}function f(e,t,n,r,o,a,s){if(n)return e(s.listboxPopoverServiceMobile,o,a,t,s.$timeout,r).catch(function(e){false});return e(s.listboxPopoverService,o,a,t,s.$timeout,r).then(function(e){var n;e.closing.then(function(e){e&&!i(e.target).closest(".current-selections-item").length>0&&(t.activeFieldName="");n=e}).catch(function(e){false});e.closed.then(function(){if(t.onCloseFocusSelector){i(t.onCloseFocusSelector).focus();t.onCloseFocusSelector=null}else t.activeFieldName&&i('.item[data-csid="'+t.activeFieldName+'"]').focus();e=null;n||(t.activeFieldName="")}).catch(function(e){false});e.opened.catch(function(e){false})}).catch(function(e){false})}function p(e,t,n){if([void 0,null].contains(t)||[void 0,null].contains(n))throw new Error("unaccepted key or val ( key: "+t+", val: "+n+")");var i=e.map(function(e){return e[t]});return i.indexOf(n)}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(97)],r=function(e,t){var n={template:null,controller:["$scope","$element","$timeout",function(n,i,r){var o=this;n.input.selectionsActivated=function(){};n.input.selectionsDeactivated=function(){};o.close=function(){a()};function a(){r(function(){n.destroyComponent();i.remove()});t.off("start.listbox-popover-error",a)}function s(){return r(function(){return i.find(".toolbar-wrapper").outerWidth()})}var l=n.input.onPopoverClose;var c=null;n.closingDeferred.promise.then(function(e){c&&c();l(e);a()});e.all({object:n.input.getVisualization(),width:s()}).then(function(e){var i=e.object,r=e.width;i.getSelectionToolbar().then(function(e){n.toolbar=e;n.toolbar.showLock=n.input.options.showLock;n.toolbar.position={width:r};i.activateSelections()});i.loaded.then(function(){i.ext.hasError(i)&&t.on("start.listbox-popover-error",a)});i.selectionsApi.watchActivated(function(){n.input.selectionsActivated()});i.selectionsApi.watchDeactivated(function(){n.input.selectionsDeactivated();a()});c=function e(){i.selectionsApi.confirm()}})}]};return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover\n\t\tclass="qv-listbox-popover"\n\t\tstyle="min-width: 200px;width: 234px;height: 332px"\n\t\ton-close-view="closeView(event)"\n\t\tqva-outside-ignore-for="{{input.qvaOutsideIgnoreFor}}"\n\t\tqva-mouse-wheel-outside="close()">\n\t<lui-popover-body style="height: 332px" class="lui-nopad">\n\t\t<qv-spinner show="!input.model" spinner-height="100px" spinner-width="100px" show-Delay="300" center-in-parent="true"></qv-spinner>\n\t\t<div class="toolbar-wrapper"\n\t\t\t qva-include-selection-toolbar\n\t\t\t component="input.selectionToolbarComponent"\n\t\t\t toolbar="toolbar"\n\t\t\t options="input.options"></div>\n\t\t<div class="listbox-wrapper">\n\t\t\t<qv-object object="object" model="input.model" options="input.options"></qv-object>\n\t\t</div>\n\t</lui-popover-body>\n</lui-popover>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(95)],r=function(e,t){e.service("qvCaoSelectionService",[function(){var e={sendSelectedChartChangeEvent:function e(){t.publish("cao/insight/selectedChartChanged",this.selectedChart)},getSelectedChart:function e(){return this.selectedChart},selectChart:function e(t){this.selectedChart=t;this.sendSelectedChartChangeEvent()},clearSelection:function e(){if(this.selectedChart){this.selectedChart=void 0;this.sendSelectedChartChangeEvent()}}};return e}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(89),n(875)],r=function(e,t,n){function i(e,t,n){this.visualization=e;this.searchReport=t;this.options=e.options;this.type="generated";this.analysisPrecedentId=e.matchRecord.analysisPrecedentId;this.appearsOnSheets=[];this.properties=n}i.prototype.getTitle=function(){var e=this.visualization.analysis.titleTemplate;var i=this.visualization.matchRecord.matches;return t.resolve(n.findTitleForChart(e,i))};i.prototype.getMatchDetails=function(){var e=[];if(this.searchReport.search){var t=this.searchReport.search.fieldLibItemFinder.searchHits;this.visualization.matchRecord.matches.forEach(function(n){var i=n.field;n.libId&&(i=n.libId+"- "+n.libIdLabel);var r=t[i];r&&e.push({matchedOn:r.matchingTypes[0],matchedField:n.field||n.libIdLabel})})}return e};i.prototype.getChartType=function(){return t.resolve(this.properties.visualization)};i.prototype.loadChart=function(n){var i=new t;var r=e.getService("qvCaoChartService");var o=this;o.getTitle().then(function(e){r.buildInsightChart(e,n,o.properties).then(function(e){i.resolve(e)})});return i.promise};return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(369)],r=function(e,t){e.service("qvCaoComplexityEstimatorService",[function(){var e;var n=[];var i=/aggr|rangeSum|FirstSortedValue/gi;function r(e){e.getFieldList().then(function(e){n=e})}function o(e){var t=n.filter(function(t){return t.qName===e});return t[0]&&t[0].qCardinal?t[0].qCardinal:0}function a(e){var n=t.classify(e);var r=0;var o=false;n.results.forEach(function(e){(-1!=e.content.search(i)||e.remainder&&-1!=e.remainder.content.search(i))&&(o=true);(e.function&&""!=e.function.content||e.isOperator)&&r++});return r*(o?3:1)}function s(e){var t=a(e.expr);var n=o(e.field,e)*t;return n*(t+1)}var l=function e(t){var n=0;t.analysis.dims&&t.analysis.dims.forEach(function(e){n+=s(e)});t.analysis.msrs&&t.analysis.msrs.forEach(function(e){n+=s(e)});return n};e={init:r,estimateComplexity:l};return e}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(54),n(407),n(187),n(178),n(408)],r=function(e,t,n,i,r){var o={};var a={classify:s};return a;function s(n){if(!e.isString(n))throw new Error("Expression-classifier: Expression must be a string");var i=n;if(o[i])return o[i];var a={content:n,count:0,result:{},results:[]};if(""===n){o[i]=a;return a}"="===n.charAt(0)&&(n=n.substr(1));var s=r.stripComments(n);var c=t.tokenize(s);a.count=c.length;c.forEach(function(e,t){var n;if(e.isOperator)a.results.push(e);else{n=l(e.content);a.results.push(n)}0===t&&(a.result=n)});o[i]=a;return a}function l(e){var t={content:e,function:{content:"",isCommon:false},remainder:{content:"",isFunction:false,isCommonFunction:false,isCommaSeparated:false,isFieldlike:false,isString:false,isNumber:false,isQualifier:false,qualified:{qualifier:"",content:"",isFieldlike:false}}};var n=c(e);if(n.hasAggregation){t.function.content=u(e,n);t.function.isCommon=g(t.function.content);t.remainder.content=d(e,n);var i=c(t.remainder.content);t.remainder.isFunction=b(i);t.remainder.isCommonFunction=y(t.remainder.content,i);t.remainder.isQualifier=p(t.remainder.content);t.remainder.isCommaSeparated=m(t.remainder.content);if(t.remainder.isQualifier){var r=h(t.remainder.content),o=v(t.remainder.content,r),a=c(o);t.remainder.qualified={qualifier:r,content:o,isFieldlike:x(a)}}n=i}else t.remainder.content=t.content;t.remainder.isFieldlike=x(n);t.remainder.isString=S(t.remainder.content);t.remainder.isNumber=w(t.remainder.content);return t}function c(e){var t={};t.expression=e;t.hasPrefix="="===e.charAt(0);t.leftSymbolIndex=e.indexOf(n.SYMBOLS.FUNCTION.LEFT);t.hasAggregation=t.leftSymbolIndex>0;t.isRightSymbolLast=e.substring(e.length-1)===n.SYMBOLS.FUNCTION.RIGHT;t.isEncapsulated=t.hasAggregation&&t.isRightSymbolLast;t.hasOperator=f(e);return t}function u(e,t){var n=t.hasPrefix?1:0,i=t.hasPrefix?t.leftSymbolIndex+1:t.leftSymbolIndex;return e.substr(n,i).trim()}function d(e,t){var n=e.substr(t.leftSymbolIndex),i=n.substr(1,n.length-2);return i.trim()}function f(e){var t=n.OPERATORS,i=t.SINGLES,r=t.MULTIPLES,o=t.WORDS;var a=i.some(function(t){return e.indexOf(t)>-1});if(a)return true;var s=r.some(function(t){return e.indexOf(t)>-1});if(s)return true;var l=o.some(function(t){return e.indexOf(" "+t+" ")>-1});return l}function p(e){return n.QUALIFIERS.some(function(t){return 0===e.toLowerCase().indexOf(t)})}function h(e){var t=n.QUALIFIERS.filter(function(t){return 0===e.toLowerCase().indexOf(t)}).shift();return t}function v(e,t){return e.slice(t.length).trim()}function g(e){return n.COMMON_FUNCTIONS.some(function(t){return e.toLowerCase()===t})}function m(e){var t=i.getCharacterIndexes(e,",");return t.some(function(t){return!I(e,t)})}function b(e){return e.isEncapsulated&&!e.isBleedingOperator}function y(e,t){if(!t.isEncapsulated)return false;var n=e.substr(0,t.leftSymbolIndex);return g(n)}function x(e){var t=e.expression;if(S(e.expression))return false;var r=q(t,n.SYMBOLS.FIELD.LEFT),o=C(t,n.SYMBOLS.FIELD.RIGHT),a=i.getCharacterCount(t,n.SYMBOLS.FIELD.LEFT),s=i.getCharacterCount(t,n.SYMBOLS.FIELD.RIGHT);if(r&&o&&1===a&&1===s)return true;return _(e)}function S(e){var t=q(e,n.SYMBOLS.STRING.LEFT),r=C(e,n.SYMBOLS.STRING.RIGHT),o=n.SYMBOLS.STRING.LEFT===n.SYMBOLS.STRING.RIGHT,a=i.getCharacterCount(e,n.SYMBOLS.STRING.LEFT),s;if(o)s=2===a;else{var l=i.getCharacterCount(e,n.SYMBOLS.STRING.RIGHT);s=1===a&&1===l}return t&&r&&s}function w(e){return!Number.isNaN(+e)}function q(e,t){return e.charAt(0)===t}function C(e,t){return e.charAt(e.length-1)===t}function _(e){if(e.hasAggregation)return false;var t=e.expression,i=t.indexOf(" ")>-1;if(i)return false;var r=n.OPERATORS.SINGLES.concat(n.OPERATORS.MULTIPLES).some(function(e){return t.indexOf(e)>-1});return!r}function I(e,t){return Object.keys(n.SYMBOLS).some(function(r){var o=n.SYMBOLS[r];return i.getIsCharacterEncapsulated(e,t,o.LEFT,o.RIGHT)})}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(894),n(169)],r=function(e,t){e.directive("qvGlobalSearchHighlights",function(){return{restrict:"E",template:t,replace:true,scope:{qText:"=",qRanges:"="},link:function t(n){var i=e.getService("qvGlobalSearchDataService").getMaxColorsNum();n.slices=null;n.$watch("qRanges",function(e){if(e){var t=0,o=[],a=e.sort(function(e,t){return e.qCharPos-t.qCharPos});for(var s=0;s<a.length;s++){var l=a[s];l.qCharPos>t&&o.push({qTerm:-1,qSliceText:n.qText.slice(t,l.qCharPos),highlight:false,iStart:t,iEnd:l.qCharPos});t=l.qCharPos+l.qCharCount;var c={qTerm:l.qTerm%i,highlight:true,qSliceText:n.qText.slice(l.qCharPos,t),iStart:l.qCharPos,iEnd:t};r(o,c);s===e.length-1&&t<n.qText.length&&o.push({qTerm:-1,qSliceText:n.qText.slice(t,n.qText.length),highlight:false,iStart:t,iEnd:n.qText.length})}n.slices=o}});function r(e,t){var n=null;for(var i=0;i<e.length;i++)if(e[i].iStart===t.iStart){n=e.splice(i,1,t);break}n||e.push(t)}}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(99),n(96)],r=function(e,t,n){e.directive("qvaSmartSearchSwipeHorizontal",["$parse",function(e){var i={up:false,down:false,right:true,left:true};return{restrict:"A",link:function r(o,a,s){var l=e(s.qvaSmartSearchSwipeHorizontal);function c(e,t){if(i[t.swipe.direction]){var r=t.swipe.curDeltaX>0?-1:0===t.swipe.curDeltaX?0:1;l(o,{delta:r});n.preventGestures(this.gestureHandler)}}t.treatAsDesktop()||n(a[0]).swipe({options:{radiusThreshold:50,preventDefault:false,useMomentum:true},start:c});o.$on("$destroy",function(){n(a[0]).off()})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(2)],r=function(e){var t=function e(){};t.parseQuery=function(t,n){var i={text:t,appId:n};var r={method:"POST",url:"/api/v1/sentences",data:i};return e.request(r).then(function(e){var t=e.data;return t}).catch(function(e){throw e})};t.getQueries=function(t,n){var i="?limit="+t+"&appId="+n;var r={method:"GET",url:"/api/v1/sentences"+i};return e.request(r).then(function(e){var t=e.data.data;return t}).catch(function(e){throw e})};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(91)],r=function(e,t){e.service("qvCaoLearningConfidenceService",[function(){var e;var n={HIGH:{value:10,text:"high"},MEDIUM:{value:5,text:"medium"},LOW:{value:2,text:"low"},EMPTY:{value:0,text:"empty"}};function i(e){var t=e.getRelevance();var i=e.getMatchRecord();var r=n.EMPTY;if(e.isModified()){r=n.EMPTY;return r.text}1===t?r=n.HIGH:t>=.5?r=n.HIGH:t>0&&(r=n.HIGH);i.precedentStats&&(i.precedentStats.matchedFields===i.matches.length?r=n.HIGH:i.precedentStats.matchedFields>0&&r.value<n.MEDIUM.value&&(r=n.HIGH));return r.text}function r(e,n,i,r){var o={search:[],learned:[]};var a=e.field||e.libIdLabel;var s="";var l=i.filter(function(e){return e.matchedField===a})[0];var c=!!e.libIdLabel;var u=c?e.libId:null;if(l){switch(l.matchedOn){case"absoluteExactMatchCaseSensitive":s=t.get("cao.search.generated.absoluteExactMatchCaseSensitive");break;case"absoluteExactMatch":s=t.get("cao.search.generated.absoluteExactMatch");break;case"exactMatch":s=t.get("cao.search.generated.exactMatch");break;case"literalMatch":s=t.get("cao.search.generated.literalMatch");break;case"headMatch":s=t.get("cao.search.generated.headMatch");break;case"headSynonymMatch":s=t.get("cao.search.generated.headSynonymMatch");break;case"headStemMatch":s=t.get("cao.search.generated.headStemMatch");break;case"headStemSynonymMatch":s=t.get("cao.search.generated.headStemSynonymMatch");break;case"partialTokenMatch":s=t.get("cao.search.generated.partialTokenMatch");break;case"substrPartialMatch":s=t.get("cao.search.generated.substrPartialMatch");break;case"semanticMatch":s=t.get("cao.search.generated.semanticMatch");break;case"valueMatch":s=t.get("cao.search.generated.valueMatch");break;default:break}if(s){s=s.replace(/\{1\}/g,function(e){return"<b>"+e+"</b>"});var d=t.get(s,[n.search.searchPhrase.text,l.matchedField]);o.search.push({text:d,field:l.matchedField,priority:1,type:e.slotRole,isLibItem:c,libItemId:u,searchMatch:true})}}if(e.appPrecedent&&e.appPrecedent.appPrecedent){var f=false;if(e.appPrecedent.userDefined&&e.appPrecedent.userDefined.isUserDefined&&e.appPrecedent.userDefined.relations.indexOf("define")>-1){f=true;s=e.aggr||"measure"===e.slotRole?t.get("cao.confidence.reason.defined_measure"):t.get("cao.confidence.reason.defined_dimension")}else s=e.aggr||"measure"===e.slotRole?t.get("cao.confidence.reason.learned_measure"):t.get("cao.confidence.reason.learned_dimension");s=s.replace(/\{0\}/g,function(e){return"<b>"+e+"</b>"});o.learned.push({text:t.get(s,a),field:a,priority:1,type:e.slotRole,isLibItem:c,libItemId:u,userMatch:f})}if(0===o.learned.length&&r){s=e.aggr||"measure"===e.slotRole?t.get("cao.confidence.reason.assumed_measure"):t.get("cao.confidence.reason.assumed_dimension");s=s.replace(/\{0\}/g,function(e){return"<b>"+e+"</b>"});o.learned.push({text:t.get(s,a),field:a,priority:0,type:e.slotRole,isLibItem:c,libItemId:u})}return o}e={getReasonForSelectingField:r,determineConfidence:i,confidenceLevels:n};return e}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(95),n(936),n(103)],r=function(e,t,n,i){e.nativeComponent("qvCaoRefreshIndicator",{bindings:{},controller:[function(){this.refresh=function(){i.trackEvent(i.customEvents.INSIGHTS_REFRESH_CLICKED);t.publish("cao/insight/refresh")}}],template:n})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(89),n(971)],r=function(e,t,n){var i=null;var r=null;function o(o){var a={id:o.id,type:o.type,canCopy:function e(){return false},canCut:function e(){return false},canRemove:function e(){return true},remove:function e(){o.model.removeObject()},getAllPropertyPanelContent:function a(){if(!i){i=e.getService("$cacheFactory");r=i("pp-navPoint")}return t.all({properties:o.model.getProperties(),layout:o.model.getLayout()}).then(function(e){var t={definition:n,iconClass:"lui-icon lui-icon--sign-post",titleRef:"qMeta.title",properties:e.properties,layout:e.layout,model:o.model,cache:r,type:o.invalid?"invalid":"odagNavPoint"};return t})}};return a}return{createSelectedObjFromNavPoint:o}}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[],r=function(){return{isSnapshotData:e};function e(e){return e&&!!e.sourceObjectId}}.apply(t,i),void 0!==r&&(e.exports=r))},function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var ERROR="input is invalid type";var WINDOW="object"===typeof window;var root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=false);var WEB_WORKER=!WINDOW&&"object"===typeof self;var NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"===typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&"object"===typeof module&&module.exports;var AMD=(true,__webpack_require__(593));var ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer;var HEX_CHARS="0123456789abcdef".split("");var EXTRA=[-2147483648,8388608,32768,128];var SHIFT=[24,16,8,0];var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var OUTPUT_TYPES=["hex","array","digest","arrayBuffer"];var blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e,t){return function(n){return new Sha256(t,true).update(n)[e]()}};var createMethod=function(e){var t=createOutputMethod("hex",e);NODE_JS&&(t=nodeWrap(t,e));t.create=function(){return new Sha256(e)};t.update=function(e){return t.create().update(e)};for(var n=0;n<OUTPUT_TYPES.length;++n){var i=OUTPUT_TYPES[n];t[i]=createOutputMethod(i,e)}return t};var nodeWrap=function(method,is224){var crypto=eval("require('crypto')");var Buffer=eval("require('buffer').Buffer");var algorithm=is224?"sha224":"sha256";var nodeMethod=function(e){if("string"===typeof e)return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(null===e||void 0===e)throw new Error(ERROR);e.constructor===ArrayBuffer&&(e=new Uint8Array(e));return Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};var createHmacOutputMethod=function(e,t){return function(n,i){return new HmacSha256(n,t,true).update(i)[e]()}};var createHmacMethod=function(e){var t=createHmacOutputMethod("hex",e);t.create=function(t){return new HmacSha256(t,e)};t.update=function(e,n){return t.create(e).update(n)};for(var n=0;n<OUTPUT_TYPES.length;++n){var i=OUTPUT_TYPES[n];t[i]=createHmacOutputMethod(i,e)}return t};function Sha256(e,t){if(t){blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0;this.blocks=blocks}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];if(e){this.h0=3238371032;this.h1=914150663;this.h2=812702999;this.h3=4144912697;this.h4=4290775857;this.h5=1750603025;this.h6=1694076839;this.h7=3204075428}else{this.h0=1779033703;this.h1=3144134277;this.h2=1013904242;this.h3=2773480762;this.h4=1359893119;this.h5=2600822924;this.h6=528734635;this.h7=1541459225}this.block=this.start=this.bytes=this.hBytes=0;this.finalized=this.hashed=false;this.first=true;this.is224=e}Sha256.prototype.update=function(e){if(this.finalized)return;var t,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw new Error(ERROR);t=true}var i,r=0,o,a=e.length,s=this.blocks;while(r<a){if(this.hashed){this.hashed=false;s[0]=this.block;s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0}if(t)for(o=this.start;r<a&&o<64;++r)s[o>>2]|=e[r]<<SHIFT[3&o++];else for(o=this.start;r<a&&o<64;++r){i=e.charCodeAt(r);if(i<128)s[o>>2]|=i<<SHIFT[3&o++];else if(i<2048){s[o>>2]|=(192|i>>6)<<SHIFT[3&o++];s[o>>2]|=(128|63&i)<<SHIFT[3&o++]}else if(i<55296||i>=57344){s[o>>2]|=(224|i>>12)<<SHIFT[3&o++];s[o>>2]|=(128|i>>6&63)<<SHIFT[3&o++];s[o>>2]|=(128|63&i)<<SHIFT[3&o++]}else{i=65536+((1023&i)<<10|1023&e.charCodeAt(++r));s[o>>2]|=(240|i>>18)<<SHIFT[3&o++];s[o>>2]|=(128|i>>12&63)<<SHIFT[3&o++];s[o>>2]|=(128|i>>6&63)<<SHIFT[3&o++];s[o>>2]|=(128|63&i)<<SHIFT[3&o++]}}this.lastByteIndex=o;this.bytes+=o-this.start;if(o>=64){this.block=s[16];this.start=o-64;this.hash();this.hashed=true}else this.start=o}if(this.bytes>4294967295){this.hBytes+=this.bytes/4294967296<<0;this.bytes=this.bytes%4294967296}return this};Sha256.prototype.finalize=function(){if(this.finalized)return;this.finalized=true;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block;e[t>>2]|=EXTRA[3&t];this.block=e[16];if(t>=56){this.hashed||this.hash();e[0]=this.block;e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0}e[14]=this.hBytes<<3|this.bytes>>>29;e[15]=this.bytes<<3;this.hash()};Sha256.prototype.hash=function(){var e=this.h0,t=this.h1,n=this.h2,i=this.h3,r=this.h4,o=this.h5,a=this.h6,s=this.h7,l=this.blocks,c,u,d,f,p,h,v,g,m,b,y;for(c=16;c<64;++c){p=l[c-15];u=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;p=l[c-2];d=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10;l[c]=l[c-16]+u+l[c-7]+d<<0}y=t&n;for(c=0;c<64;c+=4){if(this.first){if(this.is224){g=300032;p=l[0]-1413257819;s=p-150054599<<0;i=p+24177077<<0}else{g=704751109;p=l[0]-210244248;s=p-1521486534<<0;i=p+143694565<<0}this.first=false}else{u=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10);d=(r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7);g=e&t;f=g^e&n^y;v=r&o^~r&a;p=s+d+v+K[c]+l[c];h=u+f;s=i+p<<0;i=p+h<<0}u=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10);d=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7);m=i&e;f=m^i&t^g;v=s&r^~s&o;p=a+d+v+K[c+1]+l[c+1];h=u+f;a=n+p<<0;n=p+h<<0;u=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10);d=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7);b=n&i;f=b^n&e^m;v=a&s^~a&r;p=o+d+v+K[c+2]+l[c+2];h=u+f;o=t+p<<0;t=p+h<<0;u=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10);d=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7);y=t&n;f=y^t&i^b;v=o&a^~o&s;p=r+d+v+K[c+3]+l[c+3];h=u+f;r=e+p<<0;e=p+h<<0}this.h0=this.h0+e<<0;this.h1=this.h1+t<<0;this.h2=this.h2+n<<0;this.h3=this.h3+i<<0;this.h4=this.h4+r<<0;this.h5=this.h5+o<<0;this.h6=this.h6+a<<0;this.h7=this.h7+s<<0};Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3,r=this.h4,o=this.h5,a=this.h6,s=this.h7;var l=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a];this.is224||(l+=HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]);return l};Sha256.prototype.toString=Sha256.prototype.hex;Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3,r=this.h4,o=this.h5,a=this.h6,s=this.h7;var l=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i,r>>24&255,r>>16&255,r>>8&255,255&r,o>>24&255,o>>16&255,o>>8&255,255&o,a>>24&255,a>>16&255,a>>8&255,255&a];this.is224||l.push(s>>24&255,s>>16&255,s>>8&255,255&s);return l};Sha256.prototype.array=Sha256.prototype.digest;Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32);var t=new DataView(e);t.setUint32(0,this.h0);t.setUint32(4,this.h1);t.setUint32(8,this.h2);t.setUint32(12,this.h3);t.setUint32(16,this.h4);t.setUint32(20,this.h5);t.setUint32(24,this.h6);this.is224||t.setUint32(28,this.h7);return e};function HmacSha256(e,t,n){var i,r=typeof e;if("string"===r){var o=[],a=e.length,s=0,l;for(i=0;i<a;++i){l=e.charCodeAt(i);if(l<128)o[s++]=l;else if(l<2048){o[s++]=192|l>>6;o[s++]=128|63&l}else if(l<55296||l>=57344){o[s++]=224|l>>12;o[s++]=128|l>>6&63;o[s++]=128|63&l}else{l=65536+((1023&l)<<10|1023&e.charCodeAt(++i));o[s++]=240|l>>18;o[s++]=128|l>>12&63;o[s++]=128|l>>6&63;o[s++]=128|63&l}}e=o}else{if("object"!==r)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw new Error(ERROR)}e.length>64&&(e=new Sha256(t,true).update(e).array());var c=[],u=[];for(i=0;i<64;++i){var d=e[i]||0;c[i]=92^d;u[i]=54^d}Sha256.call(this,t,n);this.update(u);this.oKeyPad=c;this.inner=true;this.sharedMemory=n}HmacSha256.prototype=new Sha256;HmacSha256.prototype.finalize=function(){Sha256.prototype.finalize.call(this);if(this.inner){this.inner=false;var e=this.array();Sha256.call(this,this.is224,this.sharedMemory);this.update(this.oKeyPad);this.update(e);Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports;exports.sha224=createMethod(true);exports.sha256.hmac=createHmacMethod();exports.sha224.hmac=createHmacMethod(true);if(COMMON_JS)module.exports=exports;else{root.sha256=exports.sha256;root.sha224=exports.sha224;AMD&&!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}})()}).call(this,__webpack_require__(4),__webpack_require__(15))},function(e,t,n){"use strict";var i,r;!(i=[n(95),n(92),n(117),n(254),n(89),n(108),n(90),n(91),n(11),n(155),n(105),n(182)],r=function(e,t,n,i,r,o,a,s,l,c,u,d){var f={};var p=t.extend("DataPrepService",{init:function e(t,n){t=t||a.getParameterByName("app");n=n||p.connectOptions;n.route="app/"+encodeURIComponent(t).toLowerCase();n.responseInterceptors=[{onRejected:function e(t,n,i){i.isHandled=true;return r.reject(i)}}];this.session=i.get(null,n);var o=this;this._callbacks=l.Callbacks();this.waitForOpen=new r;this.waitForResume=new r;this.waitForResume.resolve(o);this.restService=new c;document.addEventListener("onAppStateChanged",function(e){if(e.detail&&e.detail.inForegroundNow)o.session.resume(false).then(function(){o.waitForResume.resolve(o)});else if(e.detail&&!e.detail.inForegroundNow){o.session.suspend();o.waitForResume=new r}});function u(e){e=e||{};e.isHandled=true;e.message=s.get("DataPrep.Recommendations.ConnectionLostToDPS");o.waitForOpen.reject(e)}function d(){o.waitForOpen.resolve(o)}function f(e){var t=e.error;if(t){t.isHandled=true;-32e3!==t.code&&(t.dpsError=true)}}this.session.Error.bind(f);this.session.Close.bind(u);this.session.Open.bind(d);o.waitForResume.promise.then(function(){if(n.serverNodeId){var e=[];e.push(n.serverNodeId);o.rpc("setServerNodeId",e)}});this.session.enigmaPromise.then(d).catch(u)},rpc:function t(n,i){var r={method:n,params:i||[]};var o=this;return o.waitForResume.promise.then(function(){return o.session.rpc(r).then(function(t){if(t.result&&t.result.notification&&1005===t.result.notification.data.code){e.publish(u.Events.PubSub.StartSpin,{method:n});var r=i.length&&i.length>1&&i[1].forceReload;true===r&&(i[1].forceReload=false);return o.executeAfterReload(n,i).finally(function(){e.publish(u.Events.PubSub.StopSpin,{method:n})})}return t})})},rpcWithPolling:function t(n,i,r){r&&e.publish(u.Events.PubSub.StartSpin,{method:n});var o=true;var a=void 0;var s=function t(){r&&e.publish(u.Events.PubSub.StopSpin,{method:n})};a=setInterval(function(){o&&this.getProgress().then(function(){})}.bind(this),15e3);var l=function e(){o=false;void 0!==a&&clearInterval(a);a=void 0};return this.rpc(n,i).then(function(e){l();s();return e},function(e){l();s();throw e})},executeAfterReload:function e(t,n){var i=new r;this.waitForReload(i);return i.promise.then(function(){return this.rpc(t,n)}.bind(this))},_checkProgress:function e(t){var n=false;t.engine&&t.engine.qProgressData&&t.engine.qProgressData.qFinished&&true===t.dps.dataLoad.complete&&true===t.dps.profiling.complete&&(n=true);return n},waitForReload:function e(t){this.getProgress().then(function(e){this._checkProgress(e.result)?t.resolve(true):setTimeout(function(){this.waitForReload(t)}.bind(this),1e3)}.bind(this),function(e){t.reject(e)})},augmentOptions:function e(t){t["throwOnReload"]=true;return t},getProgress:function e(){return this.rpc("getProgress",[0])},getModel:function e(t){return this.rpc("getModel",[t||{}])},setModel:function e(t,n){return this.rpc("setModel",[t,n||{}])},initModel:function e(t,n){return this.rpc("initModel",[t,n||{}])},analyzeModel:function e(t,n){return this.rpc("analyzeModel",[t,n||{}])},getTargetTables:function e(t,n){return this.rpc("getTargetTables",[t,this.augmentOptions(n)||{}])},warmUpDPS:function e(t,n){return this.rpc("getTargetTables",[t,this.augmentOptions(n)||{}]).catch(function(e){e.error.dpsHandled=true;console.log("Warming up DPS ignored this error: ");console.log(e);throw e})},getTablePreview:function e(t,n,i){return this.rpc("getTablePreview",[t,n,this.augmentOptions(i)||{}])},getTableFields:function e(t,n,i){return this.rpc("getTableFields",[t,n,this.augmentOptions(i)||{}])},getLoadScript:function e(t,n){return this.rpc("getLoadScript",[t,n||{}])},getClassifications:function e(t){return this.rpc("getClassifications",[t])},getRestService:function e(){return this.restService},getVisRecommendations:function e(t,n){return this.rpc("getVisRecommendations",[t,n])},adaptVisualization:function e(t,n){return this.rpc("adaptVisualization",[t,n])},syncLoadModel:function e(t){return this.rpc("syncLoadModel",[t])},getRecommendations:function e(t,n){return this.rpcWithPolling("getRecommendations",[t,this.augmentOptions(n)||{}],true)},getDataPreview:function e(t){return this.rpc("getDataPreview",[t])},updateSources:function e(t,n,i){return this.rpcWithPolling("updateSources",[t,n,i||{}])}});p.getConnectOptions=function(){if(p.connectOptions){var e=new r;e.resolve(p.connectOptions);return e.promise}return n.global.getConfiguration().then(function(){p.connectOptions={host:a.hostname,isSecure:a.isSecure,prefix:a.basePath,port:a.port,subpath:"dataprepservice",reloadURI:a.reloadURI,serverNodeId:d.getServerNodeId()};return p.connectOptions})};p.isRunning=function(){var e=new c;return e.isRunning()};p.get=function(e,t){return p.getConnectOptions(t).then(function(t){e=e||a.getParameterByName("app");e=v(e);var n=f[e.toLowerCase()]||new p(e,t);f[e.toLowerCase()]=n;return n.waitForOpen.promise})};var h=".qvw";function v(e){if(o.isPersonalModeSync()&&-1!==e.indexOf(h,e.length-h.length))return e.substr(0,e.length-1)+"f";return e}return p}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(91)],r=function(e){function t(e){return"MessageCode."+(e||0)}function n(n){var i=e.get(t(n.qMessageCode),n.qMessageParameters);return i}function i(e){var t="";if(e)for(var i in e){t+=n(e[i]);i<e.length-1&&(t+="\n")}return t}function r(e){e=Math.floor(e);return e>9?""+e:"0"+e}function o(e){var t,n;var i=[];var r=[];for(t in e){n=e[t];!n.qErrorString||!n.qLine||(r[n.qLine]=true)}for(t in e){n=e[t];!n.qErrorString&&r[n.qLine]||i.push(n)}return i}return{translateMessage:n,translateMessageArray:i,formatNum:r,filterOutDuplicates:o}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;!(i=[],r=function(){var e={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(t){if(null==t)return"";var n="";var i,r,o,a,s,l,c;var u=0;t=e.compress(t);while(u<2*t.length){if(u%2==0){i=t.charCodeAt(u/2)>>8;r=255&t.charCodeAt(u/2);o=u/2+1<t.length?t.charCodeAt(u/2+1)>>8:NaN}else{i=255&t.charCodeAt((u-1)/2);if((u+1)/2<t.length){r=t.charCodeAt((u+1)/2)>>8;o=255&t.charCodeAt((u+1)/2)}else r=o=NaN}u+=3;a=i>>2;s=(3&i)<<4|r>>4;l=(15&r)<<2|o>>6;c=63&o;isNaN(r)?l=c=64:isNaN(o)&&(c=64);n=n+e._keyStr.charAt(a)+e._keyStr.charAt(s)+e._keyStr.charAt(l)+e._keyStr.charAt(c)}return n},decompressFromBase64:function(t){if(null==t)return"";var n="",i=0,r,o,a,s,l,c,u,d,f=0,p=e._f;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<t.length){l=e._keyStr.indexOf(t.charAt(f++));c=e._keyStr.indexOf(t.charAt(f++));u=e._keyStr.indexOf(t.charAt(f++));d=e._keyStr.indexOf(t.charAt(f++));o=l<<2|c>>4;a=(15&c)<<4|u>>2;s=(3&u)<<6|d;if(i%2==0){r=o<<8;64!=u&&(n+=p(r|a));64!=d&&(r=s<<8)}else{n+=p(r|o);64!=u&&(r=a<<8);64!=d&&(n+=p(r|s))}i+=3}return e.decompress(n)},compressToUTF16:function(t){if(null==t)return"";var n="",i,r,o,a=0,s=e._f;t=e.compress(t);for(i=0;i<t.length;i++){r=t.charCodeAt(i);switch(a++){case 0:n+=s(32+(r>>1));o=(1&r)<<14;break;case 1:n+=s(o+(r>>2)+32);o=(3&r)<<13;break;case 2:n+=s(o+(r>>3)+32);o=(7&r)<<12;break;case 3:n+=s(o+(r>>4)+32);o=(15&r)<<11;break;case 4:n+=s(o+(r>>5)+32);o=(31&r)<<10;break;case 5:n+=s(o+(r>>6)+32);o=(63&r)<<9;break;case 6:n+=s(o+(r>>7)+32);o=(127&r)<<8;break;case 7:n+=s(o+(r>>8)+32);o=(255&r)<<7;break;case 8:n+=s(o+(r>>9)+32);o=(511&r)<<6;break;case 9:n+=s(o+(r>>10)+32);o=(1023&r)<<5;break;case 10:n+=s(o+(r>>11)+32);o=(2047&r)<<4;break;case 11:n+=s(o+(r>>12)+32);o=(4095&r)<<3;break;case 12:n+=s(o+(r>>13)+32);o=(8191&r)<<2;break;case 13:n+=s(o+(r>>14)+32);o=(16383&r)<<1;break;case 14:n+=s(o+(r>>15)+32,32+(32767&r));a=0;break}}return n+s(o+32)},decompressFromUTF16:function(t){if(null==t)return"";var n="",i,r,o=0,a=0,s=e._f;while(a<t.length){r=t.charCodeAt(a)-32;switch(o++){case 0:i=r<<1;break;case 1:n+=s(i|r>>14);i=(16383&r)<<2;break;case 2:n+=s(i|r>>13);i=(8191&r)<<3;break;case 3:n+=s(i|r>>12);i=(4095&r)<<4;break;case 4:n+=s(i|r>>11);i=(2047&r)<<5;break;case 5:n+=s(i|r>>10);i=(1023&r)<<6;break;case 6:n+=s(i|r>>9);i=(511&r)<<7;break;case 7:n+=s(i|r>>8);i=(255&r)<<8;break;case 8:n+=s(i|r>>7);i=(127&r)<<9;break;case 9:n+=s(i|r>>6);i=(63&r)<<10;break;case 10:n+=s(i|r>>5);i=(31&r)<<11;break;case 11:n+=s(i|r>>4);i=(15&r)<<12;break;case 12:n+=s(i|r>>3);i=(7&r)<<13;break;case 13:n+=s(i|r>>2);i=(3&r)<<14;break;case 14:n+=s(i|r>>1);i=(1&r)<<15;break;case 15:n+=s(i|r);o=0;break}a++}return e.decompress(n)},compress:function(t){if(null==t)return"";var n,i,r={},o={},a="",s="",l="",c=2,u=3,d=2,f="",p=0,h=0,v,g=e._f;for(v=0;v<t.length;v+=1){a=t.charAt(v);if(!Object.prototype.hasOwnProperty.call(r,a)){r[a]=u++;o[a]=true}s=l+a;if(Object.prototype.hasOwnProperty.call(r,s))l=s;else{if(Object.prototype.hasOwnProperty.call(o,l)){if(l.charCodeAt(0)<256){for(n=0;n<d;n++){p<<=1;if(15==h){h=0;f+=g(p);p=0}else h++}i=l.charCodeAt(0);for(n=0;n<8;n++){p=p<<1|1&i;if(15==h){h=0;f+=g(p);p=0}else h++;i>>=1}}else{i=1;for(n=0;n<d;n++){p=p<<1|i;if(15==h){h=0;f+=g(p);p=0}else h++;i=0}i=l.charCodeAt(0);for(n=0;n<16;n++){p=p<<1|1&i;if(15==h){h=0;f+=g(p);p=0}else h++;i>>=1}}c--;if(0==c){c=Math.pow(2,d);d++}delete o[l]}else{i=r[l];for(n=0;n<d;n++){p=p<<1|1&i;if(15==h){h=0;f+=g(p);p=0}else h++;i>>=1}}c--;if(0==c){c=Math.pow(2,d);d++}r[s]=u++;l=String(a)}}if(""!==l){if(Object.prototype.hasOwnProperty.call(o,l)){if(l.charCodeAt(0)<256){for(n=0;n<d;n++){p<<=1;if(15==h){h=0;f+=g(p);p=0}else h++}i=l.charCodeAt(0);for(n=0;n<8;n++){p=p<<1|1&i;if(15==h){h=0;f+=g(p);p=0}else h++;i>>=1}}else{i=1;for(n=0;n<d;n++){p=p<<1|i;if(15==h){h=0;f+=g(p);p=0}else h++;i=0}i=l.charCodeAt(0);for(n=0;n<16;n++){p=p<<1|1&i;if(15==h){h=0;f+=g(p);p=0}else h++;i>>=1}}c--;if(0==c){c=Math.pow(2,d);d++}delete o[l]}else{i=r[l];for(n=0;n<d;n++){p=p<<1|1&i;if(15==h){h=0;f+=g(p);p=0}else h++;i>>=1}}c--;if(0==c){c=Math.pow(2,d);d++}}i=2;for(n=0;n<d;n++){p=p<<1|1&i;if(15==h){h=0;f+=g(p);p=0}else h++;i>>=1}while(true){p<<=1;if(15==h){f+=g(p);break}h++}return f},decompress:function(t){if(null==t)return"";if(""==t)return null;var n=[],i,r=4,o=4,a=3,s="",l="",c,u,d,f,p,h,v,g=e._f,m={string:t,val:t.charCodeAt(0),position:32768,index:1};for(c=0;c<3;c+=1)n[c]=c;d=0;p=Math.pow(2,2);h=1;while(h!=p){f=m.val&m.position;m.position>>=1;if(0==m.position){m.position=32768;m.val=m.string.charCodeAt(m.index++)}d|=(f>0?1:0)*h;h<<=1}switch(i=d){case 0:d=0;p=Math.pow(2,8);h=1;while(h!=p){f=m.val&m.position;m.position>>=1;if(0==m.position){m.position=32768;m.val=m.string.charCodeAt(m.index++)}d|=(f>0?1:0)*h;h<<=1}v=g(d);break;case 1:d=0;p=Math.pow(2,16);h=1;while(h!=p){f=m.val&m.position;m.position>>=1;if(0==m.position){m.position=32768;m.val=m.string.charCodeAt(m.index++)}d|=(f>0?1:0)*h;h<<=1}v=g(d);break;case 2:return""}n[3]=v;u=l=v;while(true){if(m.index>m.string.length)return"";d=0;p=Math.pow(2,a);h=1;while(h!=p){f=m.val&m.position;m.position>>=1;if(0==m.position){m.position=32768;m.val=m.string.charCodeAt(m.index++)}d|=(f>0?1:0)*h;h<<=1}switch(v=d){case 0:d=0;p=Math.pow(2,8);h=1;while(h!=p){f=m.val&m.position;m.position>>=1;if(0==m.position){m.position=32768;m.val=m.string.charCodeAt(m.index++)}d|=(f>0?1:0)*h;h<<=1}n[o++]=g(d);v=o-1;r--;break;case 1:d=0;p=Math.pow(2,16);h=1;while(h!=p){f=m.val&m.position;m.position>>=1;if(0==m.position){m.position=32768;m.val=m.string.charCodeAt(m.index++)}d|=(f>0?1:0)*h;h<<=1}n[o++]=g(d);v=o-1;r--;break;case 2:return l}if(0==r){r=Math.pow(2,a);a++}if(n[v])s=n[v];else{if(v!==o)return null;s=u+u.charAt(0)}l+=s;n[o++]=u+s.charAt(0);r--;u=s;if(0==r){r=Math.pow(2,a);a++}}}};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(236),n(96)],r=function(e,t,n){function i(i,r,o){var a=false;var s=null;var l=o.cond||function(){return true};var c=o.onStart||function e(){};var u=o.onStop||function e(){};var d=o.isEnabled||function(){return true};function f(t){return"string"===typeof o.elem?e(o.elem)[0]:"function"===typeof o.elem?o.elem(t):o.elem}function p(t){return"function"===typeof o.info?o.info(e(t.target).scope(),t):o.info}function h(t){e(t.target).off("remove",h);a.cancel();u(t,true)}i.on("qv-press",r,function(e){a=null;var t=p(e);if(!d(t,e)){a=false;return}o.allowScroll||n.utils.touch||e.preventDefault()});i.on("qv-swipe",r,function(t){if(false===a)return;if(true===a){clearTimeout(s);s=null}else if(a){e(t.target).off("remove",h);a.update(t);a.end(t);u(t,false)}a=false});i.on("qv-swipecancel",r,function(t){if(false===a)return;if(true===a){clearTimeout(s);s=null}else if(a){e(t.target).off("remove",h);a.cancel();u(t,true)}a=false});i.on("qv-swipestart qv-swipeupdate",r,function(i){if(false===a)return;if(!a){var r=l(i.gestureData.swipe);if(r){a=true;n.WebkitHack.prevent();s=setTimeout(function(){s=null;e(i.target).on("remove",h);c(i,e(i.target).scope());var n=f(i);var r=p(i);a=t.startDrag(n,r);a&&a.update(i)},0)}else false===r&&(a=false)}if(a){i.preventDefault();true!==a&&a.update(i)}})}return{addDrag:i}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(101),n(108),n(618),n(619),n(620),n(329),n(444),n(91),n(100),n(107),n(90),n(185),n(49)],r=function(e,t,n,i,r,a,s,l,c,u,d,f,p){var h={sorting:n,axis:i,styling:r};var v=f.getLogicFor("hard","default");function g(t,n){return e.getValue(t,"qDef.qNumFormat.qFmt")===s.getDefaultNumericFormat(t.qDef.qNumFormat,n?n.localeInfo:"")}function m(t){void 0===e.getValue(t,"color.useMeasureGradient")&&e.setValue(t,"color.useMeasureGradient",false);var n=e.getValue(t,"color.auto"),i=e.getValue(t,"color.mode");return!n&&"byMeasure"===i&&"libraryItem"===e.getValue(t,"color.byMeasureDef.type")}h.general={type:"items",translation:"properties.general",grouped:true,items:{showTitles:{translation:"properties.showTitles",type:"boolean",ref:"showTitles",component:"switch",defaultValue:true,options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}],snapshot:{tid:"property-showTitles"}},titles:{type:"items",show:function e(t){return false!==t.showTitles},items:{title:{translation:"Common.Title",component:"string",expression:"optional",ref:"title",defaultValue:""},subtitle:{translation:"properties.subtitle",type:"string",expression:"optional",ref:"subtitle",defaultValue:""},footnote:{translation:"properties.footnote",type:"string",expression:"optional",ref:"footnote",defaultValue:""}}},details:{type:"items",show:true,items:{showDetails:{translation:"properties.showDetails",type:"boolean",ref:"showDetails",component:"switch",defaultValue:false,options:[{value:true,translation:"Common.Show"},{value:false,translation:"properties.hide"}]},allowShowDetailsMessage:{component:"text",translation:"properties.allowShowDetails",style:"hint"}}}}};h.metadata={type:"items",translation:"properties.metadata",schemaIgnore:true,show:function e(t){return"masterobject"===t.qInfo.qType},grouped:true,items:{name:{translation:"Common.Name",type:"string",ref:"qMetaDef.title",minlength:1,rollbackInvalid:true,show:function e(t){return t.qMetaDef}},labelExpression:{translation:"metadata.labelExpression",type:"string",component:"expression",expressionType:"StringExpression",expression:"always",change:function e(t){var n=d.getValue(t,"labelExpression.qStringExpression.qExpr");n||(t.labelExpression=void 0)},ref:"labelExpression",show:function e(t){return!!t.qMetaDef}},description:{translation:"Common.Description",type:"string",component:"textarea",expression:"optional",change:function e(t,n,i){if("object"===o(i.qMetaDef.description)){i.descriptionExpression=i.qMetaDef.description;i.qMetaDef.description=""}else if("string"===typeof i.descriptionExpression&&i.descriptionExpression){i.qMetaDef.description=i.descriptionExpression;i.descriptionExpression=void 0}},refFn:function e(t){var n="object"===o(t.descriptionExpression);return n?"descriptionExpression":"qMetaDef.description"},maxlength:u.description,show:function e(t){return t.qMetaDef}},tags:{translation:"Common.Tags",component:"tags",type:"array",ref:"qMetaDef.tags",show:function e(t){return t.qMetaDef}}}};h.settings={type:"items",component:"expandable-items",translation:"Common.Appearance",items:{metadata:h.metadata,general:h.general}};p.getFlag("ALT_STATE_ONE")&&t.inClient()&&(h.settings.items.selections=a);h.addons={type:"items",component:"expandable-items",translation:"properties.addons",items:{}};h.dimensions={type:"array",component:"dimensions",translation:"Common.Dimensions",alternativeTranslation:"properties.alternative.dimensions",ref:"qHyperCubeDef.qDimensions",disabledRef:"qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qDimensions",min:1,allowAdd:true,allowRemove:true,allowMove:true,addTranslation:"properties.dimensions.add",grouped:true,items:{libraryId:{type:"string",component:"library-item",libraryItemType:"dimension",ref:"qLibraryId",translation:"Common.Dimension",show:function e(t){return t.qLibraryId}},inlineDimension:{component:"inline-dimension",show:function e(t){return!t.qLibraryId}},autoSort:{ref:"qDef.autoSort",type:"boolean",defaultValue:true,show:false},cId:{ref:"qDef.cId",type:"string",show:false},nullSuppression:{type:"boolean",ref:"qNullSuppression",defaultValue:false,translation:"properties.dimensions.showNull",inverted:true},dimensionLimits:{type:"items",items:{otherMode:{type:"string",component:"dropdown",ref:"qOtherTotalSpec.qOtherMode",translation:"properties.dimensionLimits.limitation",options:[{value:"OTHER_OFF",translation:"properties.dimensionLimits.none"},{value:"OTHER_COUNTED",translation:"properties.dimensionLimits.fixedNumber"},{value:"OTHER_ABS_LIMITED",translation:"properties.dimensionLimits.exactValue"},{value:"OTHER_REL_LIMITED",translation:"properties.dimensionLimits.relativeValue"}],defaultValue:"OTHER_OFF",readOnly:function e(t,n){return 0===n.getMeasures().length},change:function t(n){var i=e.getValue(n,"qOtherTotalSpec.qOtherMode"),r;if("OTHER_REL_LIMITED"===i){r=e.getValue(n,"qOtherTotalSpec.qOtherLimit.qv","0");if(r.length&&"%"!==r[r.length-1]&&d.isNumeric(r)){n.qOtherTotalSpec.qOtherLimit||e.setValue(n,"qOtherTotalSpec.qOtherLimit",{qv:"0"});n.qOtherTotalSpec.qOtherLimit.qv=r+"%"}}else if("OTHER_ABS_LIMITED"===i){r=e.getValue(n,"qOtherTotalSpec.qOtherLimit.qv","0");if(r.length&&"%"===r[r.length-1]){n.qOtherTotalSpec.qOtherLimit||e.setValue(n,"qOtherTotalSpec.qOtherLimit",{qv:"0"});n.qOtherTotalSpec.qOtherLimit.qv=r.substr(0,r.length-1)}}}},otherSortMode:{type:"string",component:"buttongroup",ref:"qOtherTotalSpec.qOtherSortMode",options:[{value:"OTHER_SORT_DESCENDING",translation:"properties.dimensionLimits.fixedNumber.sortDescendingLabel"},{value:"OTHER_SORT_ASCENDING",translation:"properties.dimensionLimits.fixedNumber.sortAscendingLabel"}],defaultValue:"OTHER_SORT_DESCENDING",show:function t(n,i){return"OTHER_COUNTED"===e.getValue(n,"qOtherTotalSpec.qOtherMode")&&i.getMeasures().length>0}},otherCounted:{component:"expression",expressionType:"ValueExpr",ref:"qOtherTotalSpec.qOtherCounted",defaultValue:{qv:"10"},show:function t(n,i){return"OTHER_COUNTED"===e.getValue(n,"qOtherTotalSpec.qOtherMode")&&i.getMeasures().length>0}},otherLimitMode:{type:"string",component:"buttongroup",ref:"qOtherTotalSpec.qOtherLimitMode",options:[{value:"OTHER_GE_LIMIT",label:">=",tooltipTranslation:"properties.greaterOrEqualTo"},{value:"OTHER_GT_LIMIT",label:">",tooltipTranslation:"properties.greaterThan"},{value:"OTHER_LT_LIMIT",label:"<",tooltipTranslation:"properties.lessThan"},{value:"OTHER_LE_LIMIT",label:"<=",tooltipTranslation:"properties.lessOrEqualTo"}],defaultValue:"OTHER_GE_LIMIT",icon:true,smallIconFont:true,show:function t(n,i){var r=e.getValue(n,"qOtherTotalSpec.qOtherMode");return("OTHER_ABS_LIMITED"===r||"OTHER_REL_LIMITED"===r)&&i.getMeasures().length>0}},otherLimit:{component:"expression",expressionType:"ValueExpr",ref:"qOtherTotalSpec.qOtherLimit",defaultValue:{qv:"0"},show:function t(n,i){var r=e.getValue(n,"qOtherTotalSpec.qOtherMode");return("OTHER_ABS_LIMITED"===r||"OTHER_REL_LIMITED"===r)&&i.getMeasures().length>0}},calculatedAgainstMessage:{component:"text",label:function e(t,n){var i=n.getMeasureLayouts()[0];return i?l.get("Properties.DimensionLimits.CalculatedAgainst",i.qFallbackTitle):l.get("Properties.DimensionLimits.NoMeasure")},show:function t(n){var i=e.getValue(n,"qOtherTotalSpec.qOtherMode");return"OTHER_OFF"!==i}}}},others:{type:"items",items:{suppressOther:{type:"boolean",ref:"qOtherTotalSpec.qSuppressOther",translation:"properties.dimensionLimits.showOthers",inverted:true,defaultValue:false,show:function t(n,i){return"OTHER_OFF"!==e.getValue(n,"qOtherTotalSpec.qOtherMode")&&i.getMeasures().length>0}},othersLabel:{type:"string",expression:"optional",ref:"qDef.othersLabel",translation:"properties.dimensionLimits.othersLabel",defaultValue:function e(){return l.get("properties.dimensionLimits.others")},change:function e(t){if(t.qDef){var n=t.qDef.othersLabel||"";if("object"===o(n)){n=n.qStringExpression&&n.qStringExpression.qExpr||"";t.qOtherLabel={qv:0===n.indexOf("=")?n:"="+n}}else t.qOtherLabel={qv:n}}},show:function t(n,i){return!e.getValue(n,"qOtherTotalSpec.qSuppressOther")&&"OTHER_OFF"!==e.getValue(n,"qOtherTotalSpec.qOtherMode")&&i.getMeasures().length>0}},othersLabel2:{type:"string",component:"expression",expressionType:"StringExpr",ref:"qOtherLabel",translation:"properties.dimensionLimits.othersLabel",defaultValue:function e(){return l.get("properties.dimensionLimits.others")},show:false}}}}};h.measures={type:"array",component:"measures",translation:"Common.Measures",ref:"qHyperCubeDef.qMeasures",disabledRef:"qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures",min:1,allowAdd:true,allowRemove:true,allowMove:true,addTranslation:"properties.measures.add",grouped:true,items:{libraryId:{type:"string",component:"library-item",libraryItemType:"measure",ref:"qLibraryId",translation:"Common.Measure",show:function e(t){return t.qLibraryId}},inlineMeasure:{component:"inline-measure",show:function e(t){return!t.qLibraryId}},autoSort:{ref:"qDef.autoSort",type:"boolean",defaultValue:true,show:false},cId:{ref:"qDef.cId",type:"string",show:false},numberFormatting:{type:"items",items:{numberFormattingType:{type:"string",component:"custom-formatter-dropdown",ref:"qDef.qNumFormat.qType",translation:"properties.numberFormatting",defaultValue:"U",schemaIgnore:true,options:[{value:"U",translation:"Common.Auto"},{value:"F",translation:"properties.numberFormatting.types.number"},{value:"M",translation:"properties.numberFormatting.types.money"},{value:"D",translation:"properties.numberFormatting.types.date"},{value:"IV",translation:"properties.numberFormatting.types.duration"},{value:"R",translation:"Common.Custom"},{value:"OFF",translation:"properties.numberFormatting.types.customFormatting"}],change:function e(t,n,i,r){s.setNumFmtPattern("qType",t.qDef.qNumFormat,r.localeInfo)}},numberFormattingMode:{type:"boolean",component:"switch",ref:"qDef.numFormatFromTemplate",translation:"properties.numberFormatting.formatting",defaultValue:true,options:[{value:true,translation:"properties.numberFormatting.simple"},{value:false,translation:"Common.Custom"}],show:function t(n){return["F","D","TS","T"].contains(e.getValue(n,"qDef.qNumFormat.qType"))}},numberFormattingTemplates:{type:"string",component:"number-formatter-dropdown",ref:"qDef.qNumFormat.qFmt",defaultValue:"#,##0",schemaIgnore:true,show:function t(n){var i=e.getValue(n,"qDef.qNumFormat.qType");return["F","D","TS","T"].contains(i)&&true===e.getValue(n,"qDef.numFormatFromTemplate",true)}},numDecimals:{type:"integer",ref:"qDef.qNumFormat.qnDec",translation:"properties.numberFormatting.nDec",defaultValue:2,schemaIgnore:true,min:0,max:14,show:false},numPrecisionDigits:{type:"integer",ref:"qDef.qNumFormat.qnDec",translation:"properties.numberFormatting.significantFigures",defaultValue:10,schemaIgnore:true,min:1,max:14,show:false},decimalSep:{type:"string",ref:"qDef.qNumFormat.qDec",translation:"properties.numberFormatting.dec",defaultValue:".",schemaIgnore:true,show:function t(n){var i=e.getValue(n,"qDef.qNumFormat.qType");return"R"===i},change:function e(t,n,i,r){s.setNumFmtPattern("qDec",t.qDef.qNumFormat,r.localeInfo)},invalid:function t(n){return e.getValue(n,"qDef.qNumFormat.qDec")===e.getValue(n,"qDef.qNumFormat.qThou")},readOnly:function e(t,n,i,r){return!g(t,r)}},thousandSep:{type:"string",ref:"qDef.qNumFormat.qThou",translation:"properties.numberFormatting.thousandSeparator",defaultValue:"",schemaIgnore:true,show:function t(n){var i=e.getValue(n,"qDef.qNumFormat.qType");return"R"===i},change:function e(t,n,i,r){s.setNumFmtPattern("qThou",t.qDef.qNumFormat,r.localeInfo)},invalid:function t(n){var i=e.getValue(n,"qDef.qNumFormat.qType");if("I"===i)return false;return e.getValue(n,"qDef.qNumFormat.qDec")===e.getValue(n,"qDef.qNumFormat.qThou")},readOnly:function e(t,n,i,r){return!g(t,r)}},format:{type:"string",component:"number-formatter",ref:"qDef.qNumFormat.qFmt",resetTranslation:"properties.numberFormatting.resetPattern",translation:"properties.numberFormatting.formatPattern",defaultValue:"",schemaIgnore:true,show:function e(t){return b(t)},change:function e(t){t.qDef.qNumFormat.qFmt=s.getNormalizedFormat(t.qDef.qNumFormat,t.qDef.qNumFormat.qFmt)},invalid:function e(t,n,i){if(["D","T","TS","IV"].contains(t.qDef.qNumFormat.qType))return false;var r="R"===t.qDef.qNumFormat.qType?t.qDef.qNumFormat.qDec:i.localeInfo["q"+("M"===t.qDef.qNumFormat.qType?"Money":"")+"DecimalSep"],o=new RegExp("(0|#)"+d.escapeRegExp(r)+"0*#*"),a=(t.qDef.qNumFormat.qFmt||"").split(";"),s=a[0].match(o),l=s&&s[0]?s[0].length-2:0,c=a[1]?a[1].match(o):null,u=c&&c[0]?c[0].length-2:0;return l>15||u>15}}}}}};function b(t){var n=e.getValue(t,"qDef.qNumFormat.qType");return["R","M","IV"].contains(n)||"U"!==n&&false===e.getValue(t,"qDef.numFormatFromTemplate",true)}h.reflines={type:"array",ref:"refLine.refLines",translation:"properties.referenceLines",itemTitleRef:"label",allowAdd:true,allowRemove:true,allowMove:true,add:function e(t,n){var i=c.initializeService("object."+c.getMatch(n.visualization||n.qInfo.qType));var r=i.getStyle("referenceLine.label.name","color");var o=c.currentPalette.indexOf(r);t.paletteColor={index:o,color:r}},addTranslation:"properties.referenceLines.add",items:{show:{ref:"show",translation:"Common.Show",type:"boolean",defaultValue:true},label:{ref:"label",translation:"Common.Label",type:"string"},paletteColor:{ref:"paletteColor",translation:"properties.color",type:"object",component:"color-picker",dualOutput:true,show:function t(n){if(!e.getValue(n,"paletteColor")){var i=c.resolveColor(e.getValue(n,"color"));var r={index:-1,color:i};e.setValue(n,"paletteColor",r)}return true}},expressionValue:{ref:"refLineExpr.value",translation:"properties.referenceLines.expression",type:"number",expression:"optional",expressionType:"ValueExpression",defaultValue:0,change:function e(t){var n=t.refLineExpr;"object"===o(n.value)?n.label={qStringExpression:{qExpr:n.value.qValueExpression.qExpr}}:n.label=""+n.value}},expressionLabel:{ref:"refLineExpr.label",translation:"properties.referenceLines.expression",type:"string",expression:"optional",expressionType:"StringExpression",defaultValue:"0",show:false}}};h.staticCalcCond={type:"items",items:{expr:{ref:"qHyperCubeDef.qCalcCond",type:"string",component:"expression",expressionType:"ValueExpr",translation:"properties.hyperCube.calcCond"},customErrorMessage:{ref:"qHyperCubeDef.customErrorMessage.calcCond",component:"textarea",defaultValue:"",type:"string",placeholderTranslation:"Object.ErrorMessage.CalculationCondition",translation:"properties.hyperCube.calcCondMessage",show:function t(n){var i=e.getValue(n,"qHyperCubeDef.qCalcCond");return i.qv&&""!==i.qv}}}};h.dataHandling={type:"items",translation:"properties.dataHandling",grouped:true,items:{suppressZero:{ref:"qHyperCubeDef.qSuppressZero",defaultValue:false,translation:"properties.hyperCube.showZero",type:"boolean",inverted:true},calcCond:{uses:"staticCalcCond"}}};h.calcCond={component:"calc-cond",ref:"qHyperCubeDef",schemaIgnore:true};h.colorsAndLegend={type:"items",translation:"properties.colorsAndLegend",grouped:true,items:{colors:{type:"items",items:{autoColor:{ref:"color.auto",type:"boolean",translation:"properties.colors",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}]},colorMode:{ref:"color.mode",type:"string",component:"dropdown",options:v.color.colorMode.options,defaultValue:"primary",show:v.color.colorMode.show,globalChange:function e(t,n){v.color.colorBy.globalChange(t,n,"qHyperCubeDef.")}},colorByDimension:{ref:"color.byDimDef",schemaIgnore:true,translation:"properties.colorBy.selectDimension",type:"object",defaultValue:{},component:"color-by-dropdown",libraryItemType:"dimension",show:v.color.colorBy.dimension.show,change:v.color.colorBy.dimension.change},colorByMeasure:{ref:"color.byMeasureDef",schemaIgnore:true,translation:"properties.colorBy.selectMeasure",type:"object",defaultValue:{},component:"color-by-dropdown",libraryItemType:"measure",show:v.color.colorBy.measure.show,change:v.color.colorBy.measure.change},colorByLabel:{type:"string",ref:"color.altLabel",schemaIgnore:true,translation:"Common.Label",expression:"optional",show:v.color.colorBy.label.show,change:v.color.colorBy.label.change},baseColors:{type:"items",items:{useBaseColor:{ref:"color.useBaseColors",type:"string",translation:"properties.useLibraryColors",component:"dropdown",show:v.color.baseColor.show,globalChange:function t(n){"byMultiple"===e.getValue(n,"color.mode","")&&"dimension"===e.getValue(n,"color.useBaseColors","")&&e.setValue(n,"color.useBaseColors","measure")},defaultValue:"off",options:function e(t,n){var i=[{value:"off",translation:"Common.None"}];v.color.baseColor.hasMeasureColor(n)&&v.color.baseColor.isSupported(t.visualization)&&i.push({value:"measure",translation:"Common.Measure"});v.color.baseColor.hasDimensionColor(n)&&"byMultiple"!==t.color.mode&&i.push({value:"dimension",translation:"Common.Dimension"});return i}},measureColor:{translation:"properties.libraryColors",component:"measure-color",show:v.color.baseColor.showColors}}},paletteColor:{ref:"color.paletteColor",translation:"properties.color",type:"object",component:"color-picker",readOnly:v.color.paletteColor.readOnly,dualOutput:true,show:v.color.paletteColor.show,defaultValue:v.color.paletteColor.defaultValue},useDimColVal:{ref:"color.useDimColVal",translation:"properties.libraryColors",type:"boolean",component:"switch",defaultValue:true,options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}],show:v.color.useDimColVal.show},useMeasureGradient:{ref:"color.useMeasureGradient",translation:"properties.libraryColors",type:"boolean",component:"switch",defaultValue:true,options:[{value:true,translation:"properties.on"},{value:false,translation:"properties.off"}],show:function e(t){return m(t)}},persistentColors:{ref:"color.persistent",translation:"properties.colorPersistence",type:"boolean",defaultValue:false,show:v.color.persistentColors.show,readOnly:v.color.persistentColors.readOnly},attributeExpression:{type:"string",component:"expression",expressionType:"measure",schemaIgnore:true,ref:"qHyperCubeDef.qMeasures.0.qAttributeExpressions.0.qExpression",change:v.color.attributeExpression.change,globalChange:v.color.attributeExpression.globalChange,translation:"Common.Expression",show:v.color.attributeExpression.show},expressionIsColor:{ref:"color.expressionIsColor",translation:"properties.expressionIsColor",type:"boolean",defaultValue:true,show:v.color.expressionIsColor.show},expressionLabel:{type:"string",ref:"color.expressionLabel",translation:"Common.Label",change:v.color.expressionLabel.change,show:v.color.expressionLabel.show},colorSchemeMeasure:{ref:"color.measureScheme",type:"string",translation:"properties.colorScheme",component:"item-selection-list",defaultValue:e.getValue(c,"scales.0.propertyValue","sg"),items:v.helpers.getMeasureSchemeOptions,show:function t(n){return v.color.colorSchemeMeasure.show(n)&&(!m(n)||!e.getValue(n,"color.useMeasureGradient"))}},reverseScheme:{ref:"color.reverseScheme",translation:"properties.reverseColorScheme",type:"boolean",defaultValue:false,show:v.color.reverseScheme.show},colorSchemeDimension:{ref:"color.dimensionScheme",type:"string",translation:"properties.colorScheme",component:"item-selection-list",defaultValue:e.getValue(c,"dataPalettes.0.propertyValue","12"),items:v.helpers.getDimensionSchemeOptions,show:v.color.colorSchemeDimension.show},customRange:{type:"items",items:{autoMinMax:{ref:"color.autoMinMax",type:"boolean",translation:"properties.axis.range",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],show:v.color.customRange.autoMinMax.show},min:{ref:"color.measureMin",translation:"properties.axis.min",expression:"optional",type:"number",show:v.color.customRange.min.show,invalid:v.color.customRange.min.invalid},max:{ref:"color.measureMax",translation:"Common.Max",expression:"optional",type:"number",defaultValue:10,show:v.color.customRange.max.show,invalid:v.color.customRange.max.invalid}},show:v.color.customRange.show}}},legend:{show:v.legend.show,type:"items",items:{show:{ref:"legend.show",type:"boolean",translation:"properties.legend.show",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}]},dock:{type:"string",component:"dropdown",ref:"legend.dock",translation:"properties.legend.position",options:[{value:"auto",translation:"Common.Auto"},{value:"right",translation:"properties.dock.right"},{value:"bottom",translation:"Common.Bottom"},{value:"left",translation:"properties.dock.left"},{value:"top",translation:"Common.Top"}],defaultValue:"auto",show:v.legend.dock.show},showTitle:{ref:"legend.showTitle",translation:"properties.legend.showTitle",type:"boolean",defaultValue:true,show:v.legend.showTitle.show}}}}};h.data={type:"items",component:"hypercube-data",translation:"Common.Data",addTranslation:"Properties.AddData",allowAdd:true,items:{dimensions:h.dimensions,measures:h.measures}};h.layers={component:"layers"};return h}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={hasTimeTag:function e(t){return t&&t.qTags&&t.qTags.some(function(e){return["$date","$timestamp","$time"].indexOf(e)>=0})},isTimeDimension:function e(t,n){if(!n||!t)return false;var i=this.hasTimeTag(n);return!!i||n.qNumFormat&&["D","TS","T"].contains(n.qNumFormat.qType)},maxNumberOfLines:12,maxNumberOfDataPoints:2e3};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e,t,n){var i={},r,o,a;switch(e){case"dimension":if(n.qLibraryId){i.type="dimension";i.name=n.qLibraryId;i.id=n.qLibraryId}else{i.type="field";if(t){i.name=n.label||n.qDef;i.id=n.qDef}else{r=n.qDef,o=!!r.qLabelExpression,a=r.qFieldLabels&&r.qFieldLabels[0];i.name=r.qFieldDefs[0];i.label=o?r.qLabelExpression:a?r.qFieldLabels[0]:r.qFieldDefs[0]}}break;case"measure":if(n.qLibraryId){i.type="measure";i.name=n.qLibraryId;i.id=n.qLibraryId}else{i.type="expression";if(t){i.name=n.label||n.qExpression;i.id=n.qExpression}else{r=n.qDef,o=!!r.qLabelExpression,a=!!r.qLabel;i.name=r.qDef;i.label=o?r.qLabelExpression:a?r.qLabel:r.qDef}}break;default:throw new Error("Default-property-logic.js: getColorByDefinition: Illegal input")}return i}return{getColorByDefinition:e}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(205),n(90),n(89),n(650),n(657),n(142),n(424),n(225),n(103),n(658)],r=function(e,t,n,i,r,o,a,s,l){var c;function u(e,t,i,r){a.begin();return e.updateData(i.layout).then(function(){if(!t.isDestroyed&&r.visible){var o=e.$element;i.ext.hasDefaultTemplate()&&(o=o.children().first());return e.paint(o,i.layout)}return n.resolve()}).finally(a.end).catch(function(e){l.trackEvent(l.customEvents.EXTENSION_PAINT_ERROR,{message:"string"===typeof e?e:e.message,stack:e.stack,extension:i.object&&i.object.type?i.object.type.type:"undefined",isThirdParty:i.object&&i.object.type&&i.object.type.libraryInfo.isThirdParty})})}c=e.extend({$scope:null,$element:null,api:null,view:null,_create:function e(n,i,o,a,s,l,c,u){a.navigation=false!==a.navigation;var d=this._createView(n,i,o,a,l,c,u);var f=new r;if(s.selections){var p=t.extend(true,{},s.selections,a.selections||{});false!==a.selections&&true!==a._disableSelections&&this._createSelections(d,n,i,p,f)}s.tooltips&&false!==a.tooltips&&this._createTooltip(d,n,i,t.extend(true,{},s.tooltips,a.tooltips||{}),f,a.cssTransform,u);return d},_createView:function e(t,n,i,r,o,a,s){return new i(t,n,r,o,a,s)},_createSelections:function e(t,n,i,r,o){var a=this.selectionService.createSelections(n,i,r,o);t.setSelections(a);return a},_createTooltip:function e(t,n,r,o,a,s,l){var c=new i(r,o,a);c.setCssTransform(s);l.cancel=function(){c.cancel()};t.setTooltips(c)},init:function e(t,n,i){this.$scope=t;this.$element=n;this.selectionService=i;var r=this;var o=this._create(t,n,t.ext.View,t.options,t.ext.options,t.backendApi,t.selectionsApi,t.tooltipApi);this.view=o;o.initialize();this._handleSpecialCaseForSyntaxSugarInExtension(o);o.mounted(n);t.$on("$destroy",function(){if(o){o.beforeDestroy();o.destroy(o);t.options=null;r.view=null;r.isDestroyed=true;o=null}})},_handleSpecialCaseForSyntaxSugarInExtension:function e(t){var n=this.$scope.object.ext,i=["View","constructor","options","init"],r;for(r in n){if(-1!==i.indexOf(r))continue;t[r]&&(t[r]=n[r])}},onPaint:function e(t,i){var r=this.view;var a=this.$scope;var s=this;var l=a.object&&a.object.model;if(!r||r.suppressOnPaint(a.layout)||!l)return n.resolve();o.isModalSelectionModel(l)&&r.selectionsApi&&r.selectionsApi.confirm();r.refreshSelections();r.prePaint(a.layout);return a.ext.options&&a.ext.options.usingDerivedProperties&&!a.backendApi.isSnapshot?l.getEffectiveProperties().then(function(e){return r.updateDerivedProperties(e,a.layout).then(function(e){return e?n.resolve(false):u.call(this,r,s,a,i)})}).catch(function(e){false}):u.call(this,r,s,a,i)},onResize:function e(t,i){var r=this.view;var o=this.$scope;r.refreshSelections();return n.resolve().then(function(){var e=r.$element;o.ext.hasDefaultTemplate()&&(e=e.children().first());return r.resize(e,t,i)}).catch(function(e){false})},setInteractionState:function e(t){this.view&&this.view.setInteractionState(t)},setFreeResize:function e(t){this.view&&this.view.setFreeResize(t)},setDirection:function e(t){this.view&&this.view.setDirection(t)},setBackendApi:function e(t){this.view.setBackendApi(t)},setSnapshotData:function e(t,n){return this.view.setSnapshotData(t,n)},getContextMenu:function e(t,n,i){return this.view.getContextMenu(t,n,i)},getSelectionToolbar:function e(){var t=this.view.getSelectionToolbar();if(Array.isArray(t))return new s(this.$scope.backendApi,this.$scope.selectionsApi,false,false,t,[]);return t},getViewState:function e(){return this.view.getViewState()},getPreferredSize:function e(){return this.view.getPreferredSize()}});c.$inject=["$scope","$element","qvDefaultViewSelectionService"];return c}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(48),n(91),n(89),n(314),n(217),n(751),n(388),n(126),n(262),n(90)],r=function(e,t,n,i,r,a,s,l,c,u){function d(e,t){return e.getProperties().then(function(n){return e.destroyAllChildren({qInfo:n.qInfo,qExtendsId:t})})}function f(){s.load().then(function(e){e.openSection(l.sectionIDs.visualization)})}function p(e,t){return e.getProperties().then(function(n){n.qMetaDef={title:t.name,description:t.description,tags:t.tags};"object"===o(t.descriptionExpression)&&(n.descriptionExpression=t.descriptionExpression);t.labelExpression&&(n.labelExpression=t.labelExpression);n.masterVersion=.96;return e.setProperties(n)})}function h(e,t){var n={qInfo:{qType:"masterobject"}};return i.create(n).then(function(n){return n.copyFrom(e.qInfo.qId).then(function(){return p(n,t)}).then(function(){return n})})}function v(t){t.getVisualization().then(function(t){var i=t.model;return n.all({props:i.getProperties(),layout:i.getLayout()}).then(function(t){var n=t.props;var o=t.layout;r.addMetadata({qMetaDef:{title:o.title,description:"",tags:[]},onSave:function t(r){h(n,r).then(function(t){d(i,t.id).then(function(){e.$rootScope.$emit("clearUndo")})});f()}})})})}function g(){c.show({title:t.get("Object.Linked.NoEditDialog.Title"),message:t.get("Object.Linked.NoEditDialog.Message")})}function m(n){var i=t.get("Object.Linked.BreakLinkDialog.Text");var r="<div class='link-object-dialog-content'><div class='link'><span class='link-icon  lui-icon  lui-icon--link'></span></div><div class='text'>"+i+"</div></div>";var o=e.getService("qvConfirmDialog").show({message:r});o.closed.then(function(e){e&&a.breakLink(n)})}function b(e){return"auto-chart"!==e}function y(e){var t=u.getValue(e,"model.properties.qStateName");return null===t||void 0===t||""===t}function x(e,t){var i=!e.object.isInvalid&&"auto-chart"!==e.object.ext.type&&t.permissionToCreate("visualization")&&!e.object.isLink&&b(e.object.type.type);if(!i)return n.resolve(i);if(Object.keys(e.model.properties).length)return n.resolve(y(e));return e.model.getProperties().then(function(){return y(e)})}return{typeSupportsMasterVisualizations:b,canAddToMasterItems:x,addObjectInCellToLibrary:v,showNotEditableDialog:g,showBreakLinkDialog:m}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(108),n(89),n(752),n(753),n(133),n(192),n(93),n(112),n(157),n(124),n(824),n(318),n(826)],r=function(e,t,n,i,r,o,a,s,l,c,u,d){var f=false;function p(e,t,n){var r=i.createTemplateTab(e);var o=i.createFieldTab(e);var a=i.createMasterItemsTab(e);var s=i.createWidgetTab(e,t,c.load());var l=[o,a,r,s];if(f){var u=i.createODAGTab(e,n);l.push(u)}return l}function h(e,t,n){var r=i.createTemplateTab(e);var o=i.createMasterItemsTab(e);var a=i.createWidgetTab(e,t,c.load());if(f){var s=i.createODAGTab(e,n);return[o,r,a,s]}return[o,r,a]}function v(){var e=[];var n=new t;u.getList().then(function(i){i.forEach(function(t){t.widgetPromises=[];t.data.widgets&&(t.widgetPromises=t.data.widgets.map(function(e){return d.get(e,false,t.id)}));e.push(t)});t.all(i.map(function(e){return b(e,e.widgetPromises)})).then(function(){n.resolve(e)})});return n.promise}function g(e){return r.isODAGAvailable().then(function(t){return t?r.canCreateLink(e):{canCreateLinks:false}})}function m(e){return r.isODAGAvailable().then(function(t){return!!t&&r.canCreateLink(e).then(function(e){return!!e.canCreateLinks||o.getList().then(function(e){return e.getLayout().then(function(e){return e.length>0})})})})}function b(e,n){return t.all(n).then(function(t){e.resolvedWidgets=t})}function y(e){return l.load(e).then(function(){l.isVariableDefined("DISABLE_AUTO_CHART")&&c.removeExtension("auto-chart")})}var x;function S(){return a.getApp().then(function(i){return t.all({loadAppVariables:y(i),appLayout:i.getLayout(),odagLinkPermissions:g(i),canShowODAGAssetsTab:m(i),types:c.load(true)}).then(function(t){var r=t.appLayout;var o=(e.isPersonalModeSync()||!r.published)&&r.permissions.update;f=t.canShowODAGAssetsTab;var a={createOdagLink:t.odagLinkPermissions.canCreateLinks&&r.permissions.update};s.init(r.permissions,a);var l=new n;l.fullMode=o;l.permissionToCreate=s.permissionToCreate;l.widgetLibraries=t.widgetLibraries;var c;c=o?p(l,v(),i):h(l,v(),i);l.setTabs(c);return l})})}function w(){x||(x=S());return x}return{load:w,loadAppVariables:y}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(285)],r=function(e){var t="dmv-zoom-level";var n=.1;var i=2;var r=.2;var o=1;var a=o;function s(e){if("number"!==typeof e)throw new Error('"'+e+'" is not a number.');return Math.floor(10*e)/10}function l(){return s(a)}function c(){a+=n;a>i&&(a=i);v()}function u(){a-=n;a<r&&(a=r);v()}function d(){return a<i}function f(){return a>r}function p(e){a=e;a<r&&(a=r);a>i&&(a=i);v()}function h(n){e.addObserver(t,n)}function v(){e.notifyAll(t,l())}function g(){return l()!==o}return{getCurrentZoomLevel:l,zoomIn:c,zoomOut:u,canZoomOutMore:f,canZoomInMore:d,onZoomLevelChanged:h,setZoomLevel:p,roundToOneDecimal:s,canBeRestored:g,MAX_ZOOM_LEVEL:i,MIN_ZOOM_LEVEL:r,RESTORED_ZOOM_LEVEL:o,INCREMENTAL_STEP:n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(846),n(97)],r=function(e,t){return{template:e,controller:["$scope",function(e){function n(){e.onClose()}e.$on("$destroy",function(){t.off("start",n)});t.on("start",n)}]}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(96),n(91),n(506),n(390),n(847)],r=function(e,t,n,i,r,o){return{type:"invalid",template:o,definition:{type:"items",items:{}},support:{exportData:false},getContextMenu:function e(){},hasError:function e(){return false},showRequirements:function e(){return false},getCreatePropertyHandler:function e(t){return new i({app:t})},getDropFieldOptions:function e(){},getDropDimensionOptions:function e(){},getDropMeasureOptions:function e(){},controller:["$scope","luiPopover",function(i,o){var a=i.object.error,s=n.get(a.title),l;l=Array.isArray(a.message)?n.get(a.message[0],a.message.slice(1)):n.get(a.message);i.error={title:s,message:l};i.showButton=i.options&&"function"===typeof i.options.removeIt;i.remove=function(e){i.options.removeIt();e.stopPropagation()};i.showMore=function(n){o.show({template:r.template,controller:r.controller,alignTo:e(n.target)[0],input:{error:i.error,onClose:function e(){t.preventGestures()}}})}}]}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(409)],r=function(e,t){e.directive("qvStateCountBar",function(){return{restrict:"E",template:t,replace:true,scope:{stateCounts:"=",options:"="},link:function e(t){t.percents=[];t.$watchCollection("stateCounts",function(){n()});function n(){var e=t.stateCounts,n;if(!e)return;n=r(e);t.percents=o(n)}function i(e){return Object.keys(e).reduce(function(t,n){return t+e[n]},0)}function r(e){var t=i(e),n={};["qSelected","qLocked","qOption","qAlternative"].forEach(function(i){var r=e[i]||0,o=Math.round(r/t*100);r>0&&0===o&&(o=1);n[i]=o});return n}function o(e){var t={},n,i,r=0;for(n in e){t[n]=e[n];(!i||e[n]>e[i])&&(i=n);r+=e[n]}r>100&&(t[i]=e[i]-(r-100));return t}}}})}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(10)],r=function(e){var t=e.module("qv.directives.qva-focus",[]);t.directive("qvaFocus",["$timeout",function(e){return{restrict:"A",link:function t(n,i,r){n.$watch(r.qvaFocus,function(t){true===t&&e(function(){i[0].focus()})},true)}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(252)],r=function(e,t){var n,i=Math.max,r=Math.min,o=t.retriveColor(13816530);function a(e,t,n){var o;e=r(i(e,1e-12),.999999999999);if(n){var a=0;while(a<n.length&&n[a]<=e)a++;o=n.length-(a+(e-n[a-1])/(n[a]-n[a-1]))}else o=t-e*t;return o}function s(e){e=e||this._startLevel;return r(e,this._colorParts.length-1)}function l(e){e.forEach(function(e){e.forEach(function(e){e.reverse()});e.reverse()})}n=e.extend({init:function e(){this._colorParts=[];this._startLevel=0;this._reverse=false;this._max=1;this._min=0;this._span=1;this._invalidSpan=false},addColorPart:function e(n,r,o){o=o||0;this._startLevel=i(o,this._startLevel);this._colorParts[o]||(this._colorParts[o]=[]);this._colorParts[o].push([t.retriveColor(n),t.retriveColor(r)])},setLimits:function e(t){if(!t){this._limits=null;this._expandedLimits=null;return}this._limits=t;this._expandedLimits=[0].concat(t,[1])},setMaxMinValues:function e(t,n){if(!(t>=n)||Number.isNaN(+t)||Number.isNaN(+n))throw new Error("Incorrect arguments to color-scale->setMaxMinValues");this._max=t;this._min=n;this._span=t-n},setReverse:function e(t){if(this._reverse!==t){this._reverse=t;l(this._colorParts)}},getColor:function e(n,i){var r,l,c,u,d,f,p;var h=0===this._span?.5:(n-this._min)/this._span;if(Number.isNaN(+n)||Number.isNaN(+h))return o;i=s.apply(this,[i]);r=a(h,this._colorParts[i].length,this._expandedLimits);l=Math.floor(r);l=l===r?l-1:l;u=this._colorParts[i][l];d=u[0];f=u[1];if(n===this._min)return f;if(n===this._max)return d;c=r-l;p=t.retriveBlend(d,f,c);return p},getColors:function e(t){var n=[],i;for(i=0;i<t.length;i++)n.push(this.getColor(t[i]));return n},getSegmentIndex:function e(t){var n=s.call(this);var i=a(t,this._colorParts[n].length,this._expandedLimits);var r=Math.floor(i);r=r===i?r-1:r;return r},getLegendParts:function e(t){var n=[],i,r,o;t=s.apply(this,[t]);r=this._colorParts[t].length;for(i=0;i<r;++i){o=this._colorParts[t][i];var a={grad:o,color:o[0],solid:o[0]===o[1],index:i};this._expandedLimits&&(a.limits=[this._expandedLimits[r-i-1],this._expandedLimits[r-i]]);n.push(a)}return n}});n._limitFunction=a;return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(414)],r=function(e){var t=function e(){this.globalDefaults={enableQVDCaching:true}};t.prototype.get=function(){var t=this;return e.getService("qvDataManagerAppStorageService").get("globalDefaults").then(function(e){return e||t.set().then(function(){return t.globalDefaults})})};t.prototype.set=function(t){return e.getService("qvDataManagerAppStorageService").set("globalDefaults",t||this.globalDefaults)};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="lui-dialog error-dialog" on-close-view="closeView( $event )" qv-escape="handleEscButton( $event )" ng-style="modalStyle" tid="errorDialog">\n\t<div class="lui-dialog__header">\n\t\t<div class="lui-dialog__title" ng-if="title" q-translation="{{title}}"></div>\n\t</div>\n\t<div class="lui-dialog__body dm-main">\n\n\t\t<main ng-if="!html">{{content | translate}}</main>\n\t\t<main ng-if="html" class="qv-appname"></main>\n\n\t</div>\n\n\t<div class="lui-dialog__footer">\n\t\t<lui-button qv-delayed-dialog-button ng-if="!buttons.length && showDefaultButton" ng-click="closeModal( $event, true );" qva-focus="true"\n\t\t\t\t\tq-translation="Common.OK" tid="confirm"></lui-button>\n\t\t<lui-button qv-delayed-dialog-button ng-repeat="button in buttons" qva-focus="button.defaultButton" ng-click="closeModal( $event );" ng-disabled="button.expression === false"\n\t\t\t\t\tq-translation="{{button.name}}" tid="{{button.tid}}"></lui-button>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e=function e(t){return window.setTimeout(t,1e3/60)},t=function e(t){return window.clearTimeout(t)},n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||e,i=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.msCancelAnimationFrame||t;return{request:n===e?e:n.bind(window),cancel:i===t?t:i.bind(window)}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(54),n(89),n(446),n(178),n(187)],r=function(e,t,n,i,r){var o={getAggregationForExpression:a,getAggregationForFieldItem:s};return o;function a(t,r,o){if(!t||!e.isString(t))throw new Error("Aggregation-retriever: Expression must be a string");if(!r)throw new Error("Aggregation-retriever: App is required");if(!o||!e.isFunction(o))throw new Error("Aggregation-retriever: FindFieldFn is required");var a=i.getNormalizedExpression(t);if(n.has(a))return l(a);var s=r.getFieldList().then(function(e){var t=o(a,e),n=t?c(t):u();return d(n)});return s}function s(e){if(!e)throw new Error("Aggregation-retriever: FieldItem is required");if(!e.value&&!e.name&&!e.qName)throw new Error("Aggregation-retriever: Either FieldItem.value, FieldItem.name or FieldItem.qName is required");var r=e.value||e.name||e.qName,o=i.getNormalizedExpression(r);if(n.has(o))return l(o);var a=c(e);return t.when(d(a))}function l(e){var i=n.get(e);return t.when(d(i))}function c(e){if(e.defaultAggregation)return e.defaultAggregation;var t=e.qTags||[];return t.indexOf("$numeric")>-1?"Sum":"Count"}function u(){return r.FALLBACK_FUNCTION}function d(e){return i.getFormattedAggregation(e)}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(101),n(185),n(216)],r=function(e,t,n){var i=t.getLogicFor("explore","default");var r,o,a,s,l;l={translation:"properties.data",type:"items",component:"hypercube-data",icon:"database",items:{dimensions:{ref:"qHyperCubeDef.qDimensions",alternativeRef:"qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qDimensions",translation:"Common.Dimensions",type:"items"},measures:{ref:"qHyperCubeDef.qMeasures",alternativeRef:"qHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures",translation:"Common.Measures",type:"items"}}};r={translation:"properties.sorting",type:"items",component:"sort",sortIndexRef:"qHyperCubeDef.qInterColumnSortOrder",icon:"ascending",items:{dimensions:{ref:"qHyperCubeDef.qDimensions",type:"items",items:{sortOptions:{component:"radio-list",type:"number",diffs:["qDef.qSortCriterias.0.qSortByExpression","qDef.qSortCriterias.0.qSortByNumeric","qDef.qSortCriterias.0.qSortByAscii"],options:function e(){return[{value:1,translation:"properties.sorting.ascending"},{value:-1,translation:"properties.sorting.descending"}]},setPropertyValue:function t(n,i){e.setValue(n,"qDef.autoSort",false);e.setValue(n,"qDef.qSortCriterias.0.qSortByExpression",0);e.setValue(n,"qDef.qSortCriterias.0.qSortByNumeric",0);e.setValue(n,"qDef.qSortCriterias.0.qSortByAscii",i)},getValue:function t(n){return 0===e.getValue(n,"qDef.qSortCriterias.0.qSortByExpression",0)&&0===e.getValue(n,"qDef.qSortCriterias.0.qSortByNumeric",0)?e.getValue(n,"qDef.qSortCriterias.0.qSortByAscii",0):0}}}},measures:{ref:"qHyperCubeDef.qMeasures",type:"items",items:{sortOptions:{component:"radio-list",type:"number",ref:"qSortBy.qSortByNumeric",options:function e(){return[{value:1,translation:"properties.sorting.ascending"},{value:-1,translation:"properties.sorting.descending"}]}}}}}};o={component:"items",translation:"properties.colorsAndLegend",icon:"palette",grouped:true,items:{mode:{component:"radio-list",type:"string",options:i.color.colorMode.options,diffs:["color.mode","color.auto"],setPropertyValue:function e(t,n){if("auto"===n)t.color.auto=true;else{t.color.auto=false;t.color.mode=n}i.color.colorBy.globalChange(t,null,"qHyperCubeDef.")},getValue:function e(t){return t.color.auto?"auto":t.color.mode}},dimension:{type:"items",show:function e(t){return!t.color.auto&&"byDimension"===t.color.mode},items:{colorScheme:{translation:"properties.colorScheme",type:"string",component:"item-selection-list",horizontal:true,showLabels:false,ref:"color.dimensionScheme",items:i.helpers.getDimensionSchemeOptions,show:function e(t,r){if(t.color&&"byDimension"===t.color.mode&&t.color.useDimColVal&&i.color.useDimColVal.show(t))return false;if(1===n.getNumDimensions(t)&&n.getNumMeasures(t)<=1){var o=n.getDimensionLayouts(r)[0];return!(o&&o.qCardinal<=12)}return n.getNumMeasures(t)<=1||n.getNumMeasures(t)>12}},persistentColors:{ref:"color.persistent",translation:"properties.colorPersistence",type:"boolean",show:function e(t){return n.getNumMeasures(t)<=1&&n.getNumDimensions(t)<=1&&!(t.color&&"byDimension"===t.color.mode&&t.color.useDimColVal&&i.color.useDimColVal.show(t))},readOnly:i.color.persistentColors.readOnly}}},measure:{type:"items",show:function e(t){return!t.color.auto&&"byMeasure"===t.color.mode},items:{sequential:{component:"item-selection-list",translation:"properties.colorScheme",horizontal:true,showLabels:false,show:function e(t){return true!==t.color.useMeasureGradient},type:"string",ref:"color.measureScheme",items:i.helpers.getMeasureSchemeOptions}}},legend:{ref:"legend.show",type:"boolean",translation:"properties.legend.show",component:"switch",options:[{value:true,translation:"Common.Auto"},{value:false,translation:"properties.off"}],show:function e(t,n){return!t.color.auto&&i.legend.show(t,n)}}}};s={translation:"properties.presentation",type:"items",icon:"view",grouped:true,items:{}};return{data:l,sort:r,color:o,colorsAndLegend:a,presentation:s}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(104),n(226)],r=function(e,t){function n(t){var n=Number.MAX_VALUE,i=-Number.MAX_VALUE,r=Number.MAX_VALUE,o=-Number.MAX_VALUE,a=t?t.length:0,s,l;if(!a)return null;for(l=0;l<a;l++){s=t[l];i=s.x>i?s.x:i;n=s.x<n?s.x:n;o=s.y>o?s.y:o;r=s.y<r?s.y:r}return new e(n,r,i-n,o-r)}function i(){this._numPoints=this.points?this.points.length:0;this._closedPolygon=this._numPoints>1&&this.points[0].x===this.points[this._numPoints-1].x&&this.points[0].y===this.points[this._numPoints-1].y;this._closedPolygon?this._numLines=this._numPoints-1:this._numLines=this._numPoints;this._pointsChanged=true}function r(e){0===arguments.length?this.set([]):this.set(e);this._pointsChanged=true}r.prototype={clone:function e(){var t=this.points.map(function(e){return e.clone()});return new r(t)},set:function e(t){this.points=t;i.call(this)},getPoints:function e(){return this.points},getNumPoints:function e(){return this.points?this.points.length:0},addPoint:function e(t){this.points.push(t);i.call(this)},pointInside:function e(t,n){this.calculateBounds();if(!this._bounds)return false;if(t<this._bounds.x||t>this._bounds.x+this._bounds.width||n<this._bounds.y||n>this._bounds.y+this._bounds.height)return false;var i,r,o,a,s;for(i=false,a=-1,r=this.points.length,o=r-1;++a<r;o=a){if(this.points[a].x===t&&this.points[a].y===n)return true;if(this.points[a].y===this.points[o].y&&this.points[a].y===n&&(t-this.points[a].x)*(t-this.points[o].x)<=0)return true;if(this.points[a].y<n&&n<=this.points[o].y||this.points[o].y<n&&n<=this.points[a].y){s=(this.points[o].x-this.points[a].x)*(n-this.points[a].y)/(this.points[o].y-this.points[a].y)+this.points[a].x;if(t===s)return true;t<s&&(i=!i)}}return i},intersectsLine:function e(n){if(!n)return false;if(this.pointInside(n.x1,n.y1)||this.pointInside(n.x2,n.y2))return true;var i,r;if(0===this._numPoints)return false;if(1===this._numPoints){if(n.intersectsLine(new t(this.points[0].x,this.points[0].y,this.points[0].x,this.points[0].y)))return true;return false}r=this._numPoints-1;for(i=0;i<r;i++)if(n.intersectsLine(new t(this.points[i].x,this.points[i].y,this.points[i+1].x,this.points[i+1].y)))return true;if(!this._closedPolygon&&n.intersectsLine(new t(this.points[r].x,this.points[r].y,this.points[0].x,this.points[0].y)))return true;return false},intersectsLines:function e(t){var n,i=t?t.length:0;for(n=0;n<i;n++)if(this.intersectsLine(t[n]))return true;return false},intersectsRect:function e(n){if(!n)return false;this.calculateBounds();if(!this._bounds)return false;if(n.rectInside(this._bounds))return true;if(!this._bounds.intersectsWith(n))return false;var i,r,o,a,s;i=n.x;r=n.getRight();o=n.y;a=n.getBottom();if(this.pointInside(i,o)||this.pointInside(r,o)||this.pointInside(r,a)||this.pointInside(i,a))return true;s=[new t(i,o,r,o),new t(i,a,r,a),new t(i,o,i,a),new t(r,o,r,a)];return this.intersectsLines(s)},calculateBounds:function e(){if(this._pointsChanged){this._bounds=n(this.points);this._pointsChanged=false}return this._bounds},getBoundingRect:function e(){return this.calculateBounds()},translate:function e(t,n){if(!t&&!n)return;for(var i=0;i<this._numPoints;i++){this.points[i].x+=t;this.points[i].y+=n}this._pointsChanged=true},toString:function e(){var t,n="",i=this._numPoints-1;for(t=0;t<i;t++)n+=this.points[t].toString()+",";n+=this.points[i].toString();return n}};return r}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(139),n(90),n(125),n(99),n(130),n(1016),n(148),n(161),n(91),n(218)],r=function(e,t,n,i,r,o,a,s,l,c){var u=100;function d(e,n){if(""===n)return e;return e.filter(function(e){if("undefined"===typeof e.value)return false;return t.string(e.value.toLowerCase()).indexOf(t.string(n.toLowerCase()))>-1})}var f={template:a,controller:["$scope",function(t){t.search={term:""};t.isDirectDiscoveryField=s.isDirectDiscoveryField;t.getDirectDiscoveryTypeTranslationKey=s.getTypeTranslationKey;t.autoFocus=r.treatAsDesktop();t.position||(t.position="right");t.onEscape=function(e){if(""!==t.search.term){e.stopPropagation();t.search.term=""}else t.close()};t.onEnter=function(e){if(""!==t.search.term){e.stopPropagation();t.addExpressionMeasure({value:t.search.term})}else t.close()};t.showFromField=function(e){t.currentField=e;t.step2=true};t.goBack=function(e){e.preventDefault();t.currentField=null;t.step2=false};t.$watch("currentField",function(e){t.fieldSuggestions=e?["Sum","Count","Avg","Min","Max"].map(function(e){var i=n.escapeField(t.currentField.value);return{aggregation:e,field:i}}):[]});t.addFromField=function(e){var n=e.aggregation+"("+e.field+")";t.addExpressionMeasure({value:n})};t.getFieldDisplayName=function(e){return""===t.search.term?e.label:l.trimAutoCalendarName(e.value)};var a=null;t.$watch("search.term",function(n){function r(){var e=d(a.measures,n);var r=d(a.fields,n);var o=d(a.activeMeasures,n);if(e.length+o.length>u){e=i.limit(e,Math.max(u-o.length,0));r=[]}else e.length+o.length+r.length>u&&(r=i.limit(r,Math.max(u-e.length-o.length,0)));t.fields=r;t.measures=e;t.activeMeasures=o}a?r():e.all({fields:o.getSortedFields(t.app),measures:o.getSortedMeasures(t.app),activeMeasures:t.activeMeasures}).then(function(e){var t=e.fields.map(function(e){var t=e.isDerived&&""===n?e.qName.substring(e.qName.lastIndexOf(".")+1,e.qName.length):e.qName;return{toolTip:e.qName,value:e.qName,trimmedValue:e.displayName,label:t,field:e.qName,qTags:e.qTags,isDerived:e.isDerived,isDateField:e.isDateField,isGeoField:e.isGeoField,activeMeasureIndex:-1}});var i=e.measures.map(function(e){return{value:e.qData.title,label:e.qData.title,libraryId:e.qInfo.qId,activeMeasureIndex:-1}});var o=[];e.activeMeasures&&e.activeMeasures.length&&(o=e.activeMeasures.map(function(e,n){var r={};e.qLibraryId?i.forEach(function(t){if(t.libraryId===e.qLibraryId){r.value=t.value;r.label=t.label}r.libraryId=e.libraryId}):t.forEach(function(t){if(t.value===e.qDef.qDef){r.label=t.label;r.value=t.value}});r.translatedTitle=c.get("properties.colorBy.currentMeasure",n+1);r.activeMeasureIndex=n;return r}));a={fields:t,measures:i,activeMeasures:o};r()})})}],scope:{alignTo:"=",app:"=",addExpressionMeasure:"=",addLibraryMeasure:"=",addActiveMeasure:"=",close:"=",qvaOutsideIgnoreFor:"=",position:"=",allowExpressionEditor:"@"}};return f}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(1017)],r=function(e){var t={create:n};return t;function n(){return new e}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={barchart:{static:"faded_bar.svg",animation:"sweep_bar.json"},boxplot:{static:"faded_box_plot.svg",animation:"sweep_box_plot.json"},combochart:{static:"faded_combo.svg",animation:"sweep_combo.json"},default:{static:"faded_default.svg",animation:"sweep_default.json"},distributionplot:{static:"faded_distribution.svg",animation:"sweep_distribution.json"},filterpane:{static:"faded_filter_pane.svg",animation:"sweep_filter_pane.json"},gauge:{static:"faded_gauge.svg",animation:"sweep_gauge.json"},histogram:{static:"faded_histogram.svg",animation:"sweep_histogram.json"},kpi:{static:"faded_kpi.svg",animation:"sweep_kpi.json"},linechart:{static:"faded_line.svg",animation:"sweep_line.json"},map:{static:"faded_map.svg",animation:"sweep_map.json"},piechart:{static:"faded_pie.svg",animation:"sweep_pie.json"},"pivot-table":{static:"faded_pivot_table.svg",animation:"sweep_pivot_table.json"},scatterplot:{static:"faded_scatter.svg",animation:"sweep_scatter.json"},table:{static:"faded_table.svg",animation:"sweep_table.json"},"text-image":{static:"faded_text_image.svg",animation:"sweep_text_image.json"},treemap:{static:"faded_tree_map.svg",animation:"sweep_tree_map.json"},waterfallchart:{static:"faded_waterfall.svg",animation:"sweep_waterfall.json"}};function t(t){var i=e[t]?e[t].static:e["default"].static;return n.p+"assets/images/charts/"+i}function i(t){var i=e[t]?e[t].animation:e["default"].animation;return n.p+"assets/images/charts/animations/"+i}return{getImageNameFromChartType:t,getLoadingImageAnimationUrlFromChartType:i}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){var i;!(i=function(){return function(e,t){if(!e||isNaN(+t))return t;var t="-"==e.charAt(0)?-t:+t;var n=t<0?t=-t:0;var i=e.match(/[^\d\-\+#]/g);var r=i&&i[i.length-1]||".";var o=i&&i[1]&&i[0]||",";var e=e.split(r);t=t.toFixed(e[1]&&e[1].length);t=+t+"";var a=e[1]&&e[1].lastIndexOf("0");var s=t.split(".");(!s[1]||s[1]&&s[1].length<=a)&&(t=(+t).toFixed(a+1));var l=e[0].split(o);e[0]=l.join("");var c=e[0]&&e[0].indexOf("0");if(c>-1)while(s[0].length<e[0].length-c)s[0]="0"+s[0];else 0==+s[0]&&(s[0]="");t=t.split(".");t[0]=s[0];var u=l[1]&&l[l.length-1].length;if(u){var d=t[0];var f="";var p=d.length%u;for(var h=0,v=d.length;h<v;h++){f+=d.charAt(h);!((h-p+1)%u)&&h<v-u&&(f+=o)}t[0]=f}t[1]=e[1]&&t[1]?r+t[1]:"";return(n?"-":"")+t[0]+t[1]}}.call(t,n,t,e),void 0!==i&&(e.exports=i))},function(e,t,n){"use strict";var i,r;!(i=[n(282),n(89)],r=function(e,t){return{createInitialChart:r,createChart:i,convertChart:o,getPropertyTreeForConvertedChart:a,createConvertedChart:s};function n(e){var t=e.qHyperCubeDef;if(t&&t.qMeasures&&t.qDimensions){var n=t.qDimensions.concat(t.qMeasures);n.forEach(function(e){e.qAttributeExpressions&&e.qAttributeExpressions.forEach(function(e){e.qAttribute=true})})}}function i(e,t,i){var r=l(t,i).bind(t);n(e);return r(e)}function r(t,n,r){c(t,n,r);return e.getInitialProperties(t).then(function(e){return i(e,n,r)})}function o(e,t,n){if(!e)throw new Error("No extension provided");var i=n||e.model;return a(e,t,n).then(function(e){return n.setFullPropertyTree(e).then(function(){return i})})}function a(n,i,r){if(!n)throw new Error("No extension provided");var o=r||n.model;return t.all([e.getExtensionType(i),e.getInitialProperties(i),o.getFullPropertyTree()]).then(function(e){var t=e[0];var i=e[1];var r=e[2];var o;delete r.qProperty.qInfo.qId;if(n.exportProperties&&t.importProperties){var a;"boxplot"===n.type&&(a="boxplotDef");o=t.importProperties(n.exportProperties(r,a),i,t)}else o={qProperty:i,qChildren:[]};return o})}function s(e,t,n,i){c(t,n,i);return(e.model.properties,n,i).then(function(n){return o(e,t,n)})}function l(e,t){return t?e.createObject:e.createSessionObject}function c(e,t,n){if(!t||!e)throw new Error("Invalid inparameters: type or app missing");if(n)throw new Error("Persisted objects not implemented yet")}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(54),n(187)],r=function(e,t){var n=o();var i={tokenize:r};return i;function r(t){if(!e.isString(t))throw new Error("Expression-tokenizer: Expression must be a string");t=t.trim();"="===t.charAt(0)&&(t=t.substr(1));var n=[],i=0,r=a(t);r.forEach(function(e){var r=t.substr(i,e.start-i).trim();r&&n.push({content:r,isOperator:false});n.push({content:e.content,isOperator:true});i=e.end});var o=t.substr(i,t.length);n.push({content:o.trim(),isOperator:false});return n}function o(){var e={};for(var n in t.SYMBOLS)if(t.SYMBOLS.hasOwnProperty(n)){var i=t.SYMBOLS[n];e[i.LEFT]=i.RIGHT}return e}function a(e){var t=[];for(var n=0;n<e.length;n++){var i=e.charAt(n);if(s(i)){n=l(e,i,n);continue}var r=[],o=false,a=c(i);r=u(i);if(r.length){var f=e.substr(n).toLowerCase();for(var p=0;p<r.length;p++){var h=r[p],v=d(f,h);if(v){t.push({content:h,start:n,end:n+h.length});o=true;n+=h.length-1;break}}}!o&&a&&t.push({content:i,start:n,end:n+1})}return t}function s(e){return n.hasOwnProperty(e)}function l(e,i,r){var o=i,a=n[o],s=e.substring(r).split(""),l=0,c=false;for(var u=0;u<s.length;u++){var d=s[u];d===t.SYMBOLS.STRING.LEFT&&(c=!c);if(c)continue;d===o&&l++;d===a&&l--;if(!l)return u+r}return r}function c(e){return t.OPERATORS.SINGLES.indexOf(e.toLowerCase())>-1}function u(e){var n=[];var i=t.OPERATORS.MULTIPLES.concat(t.OPERATORS.WORDS).filter(function(e){return e.length>1}).map(function(e){return e.toLowerCase()});i.forEach(function(t){0===t.indexOf(e.toLowerCase())&&n.push(t)});return n}function d(e,n){var i=0===e.indexOf(n+" "),r=t.OPERATORS.SINGLES.some(function(t){return 0===e.indexOf(n+t)});return i||r}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={stripComments:t};return e;function t(e){if(!e)return"";e=n(e);e=i(e);return e.trim()}function n(e){return e.replace(/\/\/(.*)$/gm,"")}function i(e){return e.replace(/\/\*[^]*?\*\//g,"")}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-state-count-bar" tid="stateCount" qva-direction x-dir-setting="{{options.direction}}">\n\t<div class="state selected" ng-style="{\'width\': percents.qSelected + \'%\'}"></div>\n\t<div class="state locked" ng-style="{\'width\': percents.qLocked + \'%\'}"></div>\n\t<div class="state optional" ng-style="{\'width\':  percents.qOption + \'%\'}"></div>\n\t<div class="state alternative" ng-style="{\'width\':  percents.qAlternative + \'%\'}"></div>\n</div>'},,,,function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e,t=1e-12;e={checkPointsCoincident:function e(t,n){if(t.x===n.x&&t.y===n.y)return true;return false},checkPointOnLineSegment2:function n(i,r,o){var a,s,l,c;a=o.x-r.x;s=o.y-r.y;if(0===a){if(0===s)return e.checkPointsCoincident(i,r);if(i.x!==r.x)return false;l=(i.y-r.y)/s;if(l>=0&&l<=1)return true;return false}if(0===s){if(i.y!==r.y)return false;l=(i.x-r.x)/a;if(l>=0&&l<=1)return true;return false}l=(i.x-r.x)/a;c=(i.y-r.y)/s;if(l>=0&&l<=1&&Math.abs(l-c)<t)return true;return false},checkPointOnLineSegment:function t(n,i){return e.checkPointOnLineSegment2(n,i[0],i[1])},checkLineSegmentIntersectingLineSegment2:function t(n,i,r,o){var a,s,l,c,u,d,f,p,h,v,g,m,b;a=i.x-n.x;s=i.y-n.y;l=o.x-r.x;c=o.y-r.y;u=n.x-r.x;d=n.y-r.y;h=c*a-l*s;f=l*d-c*u;p=a*d-s*u;if(0===h){if(0===f&&0===p){if(0===a){if(0===s)return e.checkPointOnLineSegment2(n,r,o);m=(r.y-n.y)/s;b=(o.y-n.y)/s}else{m=(r.x-n.x)/a;b=(o.x-n.x)/a}if(m<0&&b<0||m>1&&b>1)return false;return true}return false}v=f/h;g=p/h;if(v>=0&&v<=1&&g>=0&&g<=1)return true;return false},checkLineSegmentIntersectingLineSegment:function t(n,i){return e.checkLineSegmentIntersectingLineSegment2(n[0],n[1],i[0],i[1])},checkPointInsideRectDefinedByMaxMin:function e(t,n){return t.x>n.minX&&t.x<n.maxX&&t.y>n.minY&&t.y<n.maxY},checkPointInsideOrOnBoundaryOfRectDefinedByMaxMin:function e(t,n){return t.x>=n.minX&&t.x<=n.maxX&&t.y>=n.minY&&t.y<=n.maxY},checkLineSegmentIntersectingRectDefinedByMaxMin:function t(n,i){if(e.checkPointInsideOrOnBoundaryOfRectDefinedByMaxMin(n[0],i)||e.checkPointInsideOrOnBoundaryOfRectDefinedByMaxMin(n[0],i))return true;if(e.checkLineSegmentIntersectingLineSegment(n,[{x:i.minX,y:i.minY},{x:i.minX,y:i.maxY}]))return true;if(e.checkLineSegmentIntersectingLineSegment(n,[{x:i.maxX,y:i.minY},{x:i.maxX,y:i.maxY}]))return true;if(e.checkLineSegmentIntersectingLineSegment(n,[{x:i.minX,y:i.minY},{x:i.maxX,y:i.minY}]))return true;if(e.checkLineSegmentIntersectingLineSegment(n,[{x:i.minX,y:i.maxY},{x:i.maxX,y:i.maxY}]))return true;return false},checkPolylineIntersectingRectDefinedByMaxMin:function t(n,i){var r,o,a,s,l,c,u,d=0,f=1,p=1,h=n?n.length:0;if(0===h)return false;var v=function e(){return a<h};if(n[0].x>n[h-1].x){d=h-1;f=h-2;p=-1;v=function e(){return a>-1}}o=n[d];if(o.x>i.maxX)return false;if(o.x>=i.minX&&o.y>=i.minY&&o.y<=i.maxY)return true;r=o;for(a=f;v();a+=p){o=n[a];if(o.x>=i.minX&&o.x<=i.maxX&&o.y>=i.minY&&o.y<=i.maxY)return true;s=Math.min(r.x,o.x);if(s>i.maxX)return false;l=Math.max(r.x,o.x);if(l<i.minX){r=o;continue}c=Math.min(r.y,o.y);if(c>i.maxY){r=o;continue}u=Math.max(r.y,o.y);if(u<i.minY){r=o;continue}if(e.checkLineSegmentIntersectingRectDefinedByMaxMin([r,o],i))return true;r=o}return false},checkPolylinesIntersectingRectDefinedByMaxMin:function t(n,i){var r,o=n?n.length:0;for(r=0;r<o;r++)if(e.checkPolylineIntersectingRectDefinedByMaxMin(n[r],i))return true;return false},calculateBounds:function e(t){var n=Number.MAX_VALUE,i=-Number.MAX_VALUE,r=Number.MAX_VALUE,o=-Number.MAX_VALUE,a=t?t.length:0,s,l,c,u,d;if(0===a)return null;for(c=0;c<a;c++){s=t[c];l=s?s.calculateBounds():void 0;if(!l||Infinity===l.x)continue;u=l.getRight();d=l.getBottom();u>i&&(i=u);l.x<n&&(n=l.x);d>o&&(o=d);l.y<r&&(r=l.y)}return{x:n,y:r,width:i-n,height:o-r}},getLongitudeAdjustment:function e(t){return 360*Math.ceil(-t/360)},getColumnMaxValue:function e(t,n){var i=-Number.MAX_VALUE;t.forEach(function(e){e.forEach(function(e){i=Math.max(i,e[n])})});return i},getColumnMaxMinValues:function e(t,n){var i=-Number.MAX_VALUE,r=Number.MAX_VALUE;t.forEach(function(e){e.forEach(function(e){i=Math.max(i,e[n]);r=Math.min(r,e[n])})});return{min:r,max:i}},isDimensionInsideRange:function t(n,i,r,o){var a=e.getColumnMaxMinValues(n,i);return a.min>r&&a.max<o},getLongitudeAdjustmentForGeoArea:function t(n,i,r,o){var a=n.length;var s,l=[],c=[],u=-Number.MAX_VALUE;for(s=0;s<a;s++){c[s]=e.getColumnMaxValue(n[s],0);u=Math.max(u,c[s])}if(u<179)return false;for(s=0;s<a;s++)l[s]=c[s]<o&&e.isDimensionInsideRange(n[s],1,i,r)?e.getLongitudeAdjustment(c[s]):0;return l}};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(93),n(440)],r=function(e,t){function n(e){return t.getApp().then(function(t){return t.id+"."+e})}function i(e){this.localStorageService=e}i.prototype.get=function(e){var t=this;return n(e).then(function(e){return t.localStorageService.get(e)})};i.prototype.set=function(e,t){var i=this;return n(e).then(function(e){i.localStorageService.set(e,t)})};i.prototype.remove=function(e){var t=this;return n(e).then(function(e){t.localStorageService.remove(e)})};e.service("qvDataManagerAppStorageService",["qvDataManagerLocalStorageService",function(e){return new i(e)}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(93),n(89),n(108),n(50)],r=function(e,t,n,i,r){e.service("qvAppDetailsService",["$q",function(e){var r;return{get:function a(){if(!r){r=e.defer();t.getApp().then(function(e){e.global.allowCreateApp().then(function(t){var a;e.getScriptEx().then(function(e){a=e.qMeta.privileges}).catch(function(e){a=false;e.isHandled=true}).then(function(){n.all([e.getLayout()]).then(function(n){var s=n[0];var l={app:{id:e.id,appTitle:s.qTitle,readOnly:s.qReadOnly,hasData:!!s.qHasData,hasScript:!!s.qHasScript,published:s.published},permissions:{createSheet:!s.qReadOnly&&s.permissions.createSheet,createApp:t,update:s.permissions.update,createBookmark:s.permissions.createBookmark,updateScript:i.isPersonalModeSync()&&!a||a&&-1!==a.indexOf("update")}};r.resolve(new o(l))})})})})}return r.promise}}}]);function o(e){this.model=e;this.events={onModelChanged:[]};var n=this;t.getApp().then(function(e){e.Invalidated.bind(function(){e.getLayout().then(function(e){n.model.app.appTitle=e.qTitle;n.model.app.readOnly=e.qReadOnly;n.model.app.hasData=e.qHasData;n.model.app.published=e.published;n.model.permissions.createSheet=!e.qReadOnly&&e.permissions.createSheet;n.model.permissions.update=e.permissions.update;n.events.onModelChanged.forEach(function(t){t&&t(n.model,e)})}).catch(function(e){var t=11e3;e.code===t&&(e.isHandled=true)})})})}o.prototype.appHasData=function(){return this.model.app.hasData};o.prototype.isDataManagerHidden=function(){return r.isSmallDevice||!this.model.permissions.createSheet||!this.model.permissions.update||!this.model.permissions.createApp||!this.model.permissions.updateScript};o.prototype.isScriptEditorHidden=function(){return r.isSmallDevice||!this.model.permissions.createSheet||!this.model.permissions.update||!this.model.permissions.updateScript};o.prototype.isDataModelViewerHidden=function(){return r.isSmallDevice||!this.model.permissions.createSheet||!this.model.permissions.update};o.prototype.isQDLEnabled=function(){return this.model.permissions.update&&this.model.permissions.updateScript&&!r.isSmallDevice&&this.model.permissions.createApp};o.prototype.bindOnModelChanged=function(e){this.events.onModelChanged.push(e)};o.prototype.unbindOnModelChanged=function(e){var t=this.events.onModelChanged.indexOf(e);t>=0&&this.events.onModelChanged.splice(t,1)}}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(91),n(237),n(101)],r=function(e,t,n){var i="qHyperCubeDef";function r(e){if(!e||!e.orientation||t.isContinuousChart(e))return true;return"vertical"===e.orientation}function o(e,t){return t?t.getDimensionLayouts():e&&e.qHyperCubeDef?e.qHyperCubeDef.qDimensions.map(function(e){return e.qDef}):[]}function a(e,t){return t?t.getMeasureLayouts():e.qHyperCubeDef.qMeasures.map(function(e){return e.qDef})}function s(t,n){var i,a="y",s=o(t,n).map(function(e){return e&&e.qFallbackTitle?e.qFallbackTitle:""}).join(", ");r(n&&n.layout)&&(a="x");i=s?e.get("properties."+a+"AxisWithInfo",[s]):e.get("properties."+a+"Axis");return i}var l={left:"properties.dock.left",right:"properties.dock.right",bottom:"Common.Bottom",top:"Common.Top"};function c(e,t){return{ref:e+".dock",translation:"Common.Position",type:"string",component:"dropdown",defaultValue:"near",options:function e(n,i,o){var a,s;var c;if(t&&t.direction)c=t.direction;else{var u=r(o.layout);c=u&&t&&!t.major||!u&&t&&t.major?"y":"x"}if("x"===c){a=l.bottom;s=l.top}else{a=o.yMirrorMode?l.right:l.left;s=o.yMirrorMode?l.left:l.right}return[{value:"near",translation:a},{value:"far",translation:s}]},show:function t(n){return n[e]&&"none"!==n[e].show}}}function u(e,t,r){r=r||i;return n.getValue(t.properties,r+".qDimensions",[])[0]===e}return{isVertical:r,getDimensions:o,getMeasures:a,dimensionAxisLabelFn:s,getAxisDockProperties:c,dockStringMap:l,isFirstDimension:u}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(104)],r=function(e,t){var n,i=new t(0,0,0,0),r=new t(0,0,0,0);n=e.extend("StackedCubeSlicer",{init:function e(){this.pages=[]},get:function e(t){return t.map(function(e){return this.getPage(e)}.bind(this))},getPage:function e(n){var o,a,s=[],l;for(a=0;a<this.pages.length;a++){o=this.pages[a].qArea;i.set(n.qLeft,n.qTop,n.qWidth,n.qHeight);r.set(o.qLeft,o.qTop,o.qWidth,o.qHeight);l=r.intersection(i,true);s.push({coverage:l?l.clone():new t(0,0,0,0),idx:a});if(o.qLeft<=n.qLeft&&o.qLeft+o.qWidth>=n.qLeft+n.qWidth&&o.qTop<=n.qTop&&o.qTop+o.qHeight>=n.qTop+n.qHeight)return this._extract(n,this.pages[a])}s.sort(function(e,t){return t.coverage.width*t.coverage.height-e.coverage.width*e.coverage.height});if(s[0].coverage.height>0&&s[0].coverage.width>0)return this._extract(n,this.pages[s[0].idx]);return{qArea:{qTop:n.qTop,qLeft:n.qLeft,qWidth:0,qHeight:0},qData:[]}},destroy:function e(){this.clear()},isEmpty:function e(){return!this.pages||!this.pages[0]||!this.pages[0].qArea.qHeight||!this.pages[0].qArea.qWidth},clear:function e(){this.pages=[]},store:function e(t){this.pages=t},containsArea:function e(t){var n;for(var i=0;i<this.pages.length;i++){n=this.pages[i].qArea;if(n.qLeft<=t.qLeft&&n.qLeft+n.qWidth>=t.qLeft+t.qWidth&&n.qTop<=t.qTop&&n.qTop+n.qHeight>=t.qTop+t.qHeight)return true}return false},contains:function e(t){if(!this.pages||!this.pages.length)return false;return 0===t.filter(function(e){return!this.containsArea(e)}.bind(this)).length},_extract:function e(t,n){i.set(t.qLeft,t.qTop,t.qWidth,t.qHeight);r.set(n.qArea.qLeft,n.qArea.qTop,n.qArea.qWidth,n.qArea.qHeight);var o=i.intersection(r,true),a,s;if(!o)return{qArea:{qTop:t.qTop,qLeft:t.qLeft,qWidth:0,qHeight:0},qData:[]};s=Math.max(0,t.qTop-n.qArea.qTop);var l=n.qData[0];var c=l.qSubNodes;a={};for(var u in l)l.hasOwnProperty(u)&&(a[u]="qSubNodes"===u?c.slice(s,s+o.height):l[u]);a.qUp+=s;a.qDown+=n.qArea.qHeight-o.height-s;return{qArea:{qTop:o.y,qLeft:o.x,qWidth:o.width,qHeight:o.height},qData:[a]}}});return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(238),n(153),n(130),n(90)],r=function(e,t,n,i,r){var o=t.extend({init:function e(t){this._super(t)},minDimensions:function e(){return 1},maxDimensions:function e(){return 1},minMeasures:function e(){return 0},maxMeasures:function e(){return 0},autoSortDimension:function e(t){return n.autoSortDimension(t)},getDimensions:function e(){var t=this.properties.qListObjectDef.qDef;if((!t||!t.qFieldDefs||!t.qFieldDefs.length)&&!this.properties.qListObjectDef.qLibraryId)return[];return[this.properties.qListObjectDef]},addDimension:function e(t){var o=this;function a(){o.properties.qListObjectDef=r.extend(true,o.properties.qListObjectDef,t);"function"===typeof o.dimensionDefinition.add&&o.dimensionDefinition.add.call(null,t,o.properties,o)}return t.qLibraryId?this.app.getDimensionList().then(function(e){var r=i.findLibraryDimension(t.qLibraryId,e);r&&n.autoSortDimension(t,r.qData.info);a();return t}):this.app.getFieldList().then(function(e){var r=i.findField(t.qDef.qFieldDefs[0],e);r&&n.autoSortDimension(t,[r]);a();return t})},replaceDimension:function t(i,o){var a=this,s=r.extend(true,this.properties.qListObjectDef,o);n.autoSortDimension(o);if(o.qLibraryId){delete s.qDef.qFieldDefs;delete s.qDef.qFieldLabels}else delete s.qLibraryId;a.properties.qListObjectDef=s;return e.resolve(o)},removeDimension:void 0,getDimensionLayouts:function e(){return[this.getDimensionLayout()]},getDimensionLayout:function e(){return this.layout&&this.layout.qListObject&&this.layout.qListObject.qDimensionInfo?this.layout.qListObject.qDimensionInfo:""},getMeasures:function e(){return this.properties.qListObjectDef.qExpressions},getMeasureLayout:function e(){return this.layout&&this.layout.qListObject&&this.layout.qListObject.qExpressions&&this.layout.qListObject.qExpressions[0]?this.layout.qListObject.qExpressions[0].qExpr:""}});return o}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(421),n(89),n(48),n(104),n(342),n(225),n(123),n(101)],r=function(e,t,n,i,r,o,a,s){var l;function c(e){var t=s.getValue(e,"layout.qHyperCube.qDimensionInfo",[]);var n=t.length-1;var i=t[n]||{};var r=i.qIsOneAndOnlyOne||false;n>0&&r&&s.getValue(i,"qCardinalities.qHypercubeCardinal")>1&&(r=false);return r}l=e.extend("DefaultView",{$scope:null,$element:null,containerRect:null,options:null,selections:null,backendApi:null,activeDimensions:[0],selectedShapes:[],init:function e(t,n,i,r){this._super(t,n,i,r);t.selectValues=this.selectValues.bind(this)},on:function e(){this.selections&&this.selections.on();this.tooltips&&this.tooltips.on();this.options&&false===this.options.selections?this.selectionsEnabled=false:this.selectionsEnabled=true;this._on=true},off:function e(){this.selections&&this.selections.off();this.tooltips&&this.tooltips.off();this.selectionsEnabled=false;this._on=false},isOn:function e(){return this._on},suppressOnPaint:function e(t){if(this.$scope.object._forcePaint){this.$scope.object._forcePaint=false;return false}return t.qSelectionInfo&&t.qSelectionInfo.qInSelections},paint:function e(){return t.resolve()},destroy:function e(){this.$scope.selectValues=null;this._super()},initialize:function e(){this.selections&&this.initSelections();if(this.options){Number.isNaN(+this.options.interactionState)||null===this.options.interactionState||this.setInteractionState(this.options.interactionState);this.options.direction&&this.setDirection(this.options.direction)}this.tooltips&&this.initTooltips()},setSelections:function e(t){this.selections=t},initSelections:function e(){if(this.selections){this.selections._disableSelections=this.options._disableSelections;this.selections.types.dataArea.setComponent("dataArea",{rect:new i(0,0,this.$element.width(),this.$element.height())});if(!this.options._disableSelections){this.selections.Select.bind(function(e,t){this.onSelect(e,t)}.bind(this));this.selections.ToggleShape.bind(function(e){var t=this.selectedShapes.indexOf(e);-1!==t?this.selectedShapes.splice(t,1):this.selectedShapes.push(e);this.onToggleShape(e)}.bind(this));this.selections.Deactivated.bind(function(){this.selectedShapes=[]}.bind(this));this.selections.Clear.bind(function(){this.selectedShapes=[]}.bind(this))}}},setTooltips:function e(t){this.tooltips=t},initTooltips:function e(){},refreshSelections:function e(){if(!this.selections)return;this.containerRect=this.$element[0].getBoundingClientRect();this.selections.cache.clear()},onToggleShape:function e(t){t.$element[this.isSelected(t.value)?"addClass":"removeClass"]("selected")},onSelect:function e(t,n){if(!t.length)return;var i=this.selectedShapes.map(function(e){return e.value});i.length>0&&this.activeDimensions.length>0?this.backendApi.select(i,this.activeDimensions,n):1!==t.length||t[0].selected||this.backendApi.clearSelections()},onRangeSelect:function e(){},addToSelectionCache:function e(t,n){if(!this.selections)return;var o=this.containerRect,a=t[0].getBoundingClientRect(),s=new r(new i(a.left-o.left,a.top-o.top,a.right-a.left,a.bottom-a.top),false,n);s.$element=t;this.selections.cache.add(s)},isSelected:function e(t){return this.selectedShapes.filter(function(e){return e.value===t}).length},setSnapshotData:function e(){},getSelectionToolbar:function e(){var t=this;var n=[];if(!c(this.$scope)){n.push({name:"Tooltip.ToggleOnLassoSelection",tid:"selection-toolbar.toggleLasso",isIcon:true,buttonClass:"sel-toolbar-icon-toggle",iconClass:"lui-icon lui-icon--lasso",action:function e(){t.toggleLasso=!t.toggleLasso},isActive:function e(){this.name=t.toggleLasso?"Tooltip.ToggleOffLassoSelection":"Tooltip.ToggleOnLassoSelection";return t.toggleLasso},isDisabled:function e(){if(t.isLassoDisabled&&t.isLassoDisabled())return true;return false}});n.push({name:"Tooltip.clearSelection",tid:"selection-toolbar.clear",isIcon:true,buttonClass:"clear",iconClass:"lui-icon lui-icon--clear-selections",action:function e(){this.selectionsApi.clear()},isDisabled:function e(){return!this.selectionsApi.selectionsMade}})}return new o(this.$scope.backendApi,this.$scope.selectionsApi,false,false,n,[])},selectValues:function e(t,n,i){if(!this.selectionsEnabled)return;var r=this.$scope;if(!r.selectionsApi.active){var a=this;r.selectionsApi.confirm=function(){r.backendApi.endSelections(true);r.selectionsApi.deactivated()};r.selectionsApi.cancel=function(){r.backendApi.endSelections(false);r.selectionsApi.deactivated()};r.selectionsApi.deactivate=function(){this.deactivated()};r.selectionsApi.clear=function(){a.clearSelectedValues(a.$element);r.backendApi.clearSelections();r.selectionsApi.selectionsMade=false;a.selectedArrays={}};this.getSelectionToolbar=function(){var e=[];c(r)||e.push({name:"Tooltip.clearSelection",tid:"selection-toolbar.clear",isIcon:true,buttonClass:"clear",iconClass:"lui-icon lui-icon--clear-selections",action:function e(){this.selectionsApi.clear()},isDisabled:function e(){return!this.selectionsApi.selectionsMade}});return new o(this.$scope.backendApi,this.$scope.selectionsApi,false,false,e,[])};r.selectionsApi.activated();this.selectedArrays={}}this.$scope.selectionsApi.selectionsMade=true;this.selectedArrays[t]||(this.selectedArrays[t]=[]);if(i)for(var s=0;s<n.length;s++){var l=this.selectedArrays[t].indexOf(n[s]);-1===l?this.selectedArrays[t].push(n[s]):this.selectedArrays[t].splice(l,1)}else this.selectedArrays[t]=this.selectedArrays[t].concat(n);this.backendApi.selectValues(t,this.selectedArrays[t],false)},clearSelectedValues:function e(t){t.find(".selected").removeClass("selected")},setInteractionState:function e(t){this._interactionState=t;this._inEditState=t===a.EDIT;this._inAnalysisState=t===a.ANALYSIS;this._inAnalysisState&&!this._on?this.on():!this._inAnalysisState&&this._on&&this.off()},setDirection:function e(t){this.$scope.options.direction=t;this.options.direction=t;if(this.selections&&this.selections.options&&this.selections.options.range){this.selections.options.range.rtl="rtl"===t;this.selections.types.range.setDirection(t)}},inAnalysisState:function e(){return this._inAnalysisState},inEditState:function e(){return this._inEditState},getPreferredSize:function e(){}});Object.defineProperties(l.prototype,{toggleLasso:{set:function e(t){if(this.selections){this.selections.lassoEnabled=t;n.$apply(n.$rootScope,function(){this.options.lassoEnabled=t}.bind(this))}},get:function e(){return this.selections&&this.selections.lassoEnabled}}});return l}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(627),n(313),n(89)],r=function(e,t,n){var i=e.extend({init:function e(t,n,i,r){this.$scope=t;this.$element=n;this.options=i;this.backendApi=r},prePaint:function e(){},setFreeResize:function e(t){this.options.freeResize=t},setBackendApi:function e(t){this._dataView=void 0;this.backendApi=t},updateDerivedProperties:function e(){return n.resolve(false)},setInteractionState:function e(t){this.options.interactionState=t},setDirection:function e(t){this.options.direction=t},getContextMenu:function e(t,n,i){if(this._dataView&&this._dataView.toggled){var r=this._dataView.getObject();if(r)return r.getContextMenu(n,i)}},getViewState:function e(){return{}},getPreferredSize:function e(){},getDataViewObject:function e(){if(this._dataView)return this._dataView.getObject()},initDataView:function e(n){var i=this.backendApi.model;this._dataView||(this._dataView=new t(i.app,i,n))},toggleDataView:function e(){return this._dataView.toggle()},destroy:function e(){this._destroyed=true},cancel:function e(){},retry:function e(){}});return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(198),n(89),n(265),n(331),n(101)],r=function(e,t,n,i,r){var o;function a(e,t,n,i){if(!e)return;t.snapshotData.object.origDataPages||(t.snapshotData.object.origDataPages=t.qHyperCube[i]);for(var r=0;r<n.length;r++){n[r].qHeight=Math.min(t.qHyperCube.qSize.qcy,n[r].qHeight);n[r].qTop=t.snapshotData.object.origDataPages[r].qArea.qTop}t.qHyperCube[i]=e.get(n)}function s(e){if("pivot-table"===e.visualization){this.responseProperty="qPivotDataPages";this.slicer=new i}else{if("table"!==e.visualization)return;this.slicer=new n}var t=e.snapshotData.object.origDataPages;t||(t=e.qHyperCube[this.responseProperty]);this.slicer.store(t.filter(function(e){return e}))}o=e.extend("SnapshotAPI",{init:function e(t){this.responseProperty="qDataPages";s.call(this,t.layout);this._super(t,t.layout.qListObject?"/qListObjectDef":"/qHyperCubeDef")},getData:function e(n){var i=t();if("map"===this.model.layout.visualization){var o=this.dataPath.split("/")[1],s=this.dataPath.split("/"),l=s[s.length-1];"polygon"===this.model.layout.layers[o].type&&"3"===this.model.layout.layers[o].version?i.resolve(this.model.layout.layers[o].geodata.qHyperCube[this.responseProperty]):i.resolve(this.model.layout.layers[o][l][this.responseProperty])}else{a(this.slicer,this.model.layout,n,this.responseProperty);var c=r.getValue(this.model.layout,(this.dataPath+"/"+this.responseProperty).replace(new RegExp("/","g"),"."));i.resolve(c)}return i.promise},getHyperCubeBinnedData:function e(){return t.resolve(this.model.layout.dataPages)},getHyperCubeContinousData:function e(){return t.resolve({qDataPages:this.model.layout.qHyperCube.qDataPages,qAxisData:this.model.layout.qHyperCube.qAxisData})},getSize:function e(){return r.getValue(this.model.layout,this.dataPath.replace(new RegExp("/","g"),".")).qSize},beginSelections:function e(){},endSelections:function e(){},clearSelections:function e(){},isSnapshot:true});return o}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(120),n(143),n(301),n(638)],r=function(e,t,n,i){function r(t,i){e.getList().then(function(e){e.getLayout().then(function(e){var r={approvedSheets:[],myPublishedSheets:[],privateSheets:[],communitySheets:[]};r=o(r,e);r.approvedSheets.sort(n.sortByRank);r.privateSheets.sort(n.sortByRank);n.sortByPublishedDate(r.myPublishedSheets,"publishTime");a(t,r,i)})})}function o(e,i){var r={userId:t.userId,userDirectory:t.userDirectory};i.forEach(function(t){n.filterApproved(t)?e.approvedSheets.push(t):n.filterMyPublishedCommunity(r)(t)?e.myPublishedSheets.push(t):n.filterPrivate(t)?e.privateSheets.push(t):n.filterCommunity(r)(t)&&e.communitySheets.push(t)});return e}function a(e,t,n){Object.keys(t).forEach(function(n){t[n].forEach(function(t){e.sheetId===t.qInfo.qId?t.isActive=true:t.isActive=false})});i.show({title:"SheetDialog.Sheet.SelectSheet",sheets:t,selectSheet:function t(n){e.$emit("sheetSelected",n)},sheetInformation:n?n.sheetInformation:""})}function s(e){var t={width:"94%",height:"98%",left:"1.5%",right:"1.5%",top:"0%","z-index":4};switch(e){case"align-left":t.width="75.5%";t.right="23%";break;case"align-center":t.width="94%";t.right="4,5%";break;case"align-right":t.width="75.5%";t.left="23%";break;default:break}return t}return{onSelectSheet:r,getPosition:s}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){var t=7500,n,i={pending:0,resetTime:void 0};var r={begin:o,end:a,hasPending:s};return r;function o(){n=n||e.getService("$timeout");i.pending++;i.resetTime&&n.cancel(i.resetTime);i.resetTime=n(l,t)}function a(){if(!i.pending)return;i.pending--}function s(){return i.pending>0}function l(){i.pending=0}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(190),n(1092),n(690),n(691),n(692),n(347),n(696),n(697),n(698),n(699),n(700),n(701),n(702),n(703),n(705),n(706),n(707),n(708),n(709)],r=function(){}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(462),n(464),n(467),n(472),n(475)],r=function(){}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";"undefined"===typeof Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{enumerable:false,get:function e(){var t=this.toString().match(/^function( (.*?))?\(/);return t&&t.length>=3?t[2]:"anonymous function"}});Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function e(){},r=function r(){return n.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};i.prototype=this.prototype;r.prototype=new i;return r});Array.prototype.contains||Object.defineProperty(Array.prototype,"contains",{enumerable:false,value:function e(t){return-1!==this.indexOf(t)}});"scrollX"in window.constructor.prototype||Object.defineProperties(window.constructor.prototype,{scrollX:{get:function e(){return this.pageXOffset}},scrollY:{get:function e(){return this.pageYOffset}}})},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(224)],r=function(e,t){function n(n){function i(e){n.imageCustomSize=e}function r(e){n.selectedSize=e}function o(e){if(!e||!e.orientation)return;n.selectedLayout=e;n.sizes.forEach(function(t){t.setLabel(e.orientation)})}function a(e){n.export=e;n.print.format=e.format}function s(e){var t=l();if(e.isCustom){n.print.width=Math.round(t.width);n.print.height=Math.round(t.height);return}var i=e.toPixels(t.width);n.print.width=i.w;n.print.height=i.h}function l(){return{width:e("#qv-story-play").is(":visible")?e("#qv-story-play").find(".qv-story-play-slide").first().width():n.input.currentWidth,height:e("#qv-story-play").is(":visible")?e("#qv-story-play").find(".qv-story-play-slide").first().height():n.input.currentHeight,dpi:n.input.currentDpi}}function c(e){if(n.obj&&n.input.object){var i,r,o,a,s;n.print.width<8&&(n.print.width=8);n.print.height<8&&(n.print.height=8);n.print.dpi<n.minDpi&&(n.print.dpi=n.minDpi);n.print.dpi>n.maxDpi&&(n.print.dpi=n.maxDpi);var c=Math.round(n.print.width),f=Math.round(n.print.height);var p=l();s={width:Math.round(p.width),height:Math.round(p.height),dpi:p.dpi};var h=n.imageCustomSize?{width:n.print.width,height:n.print.height,dpi:n.print.dpi}:{width:n.input.currentWidth,height:n.input.currentHeight,dpi:n.input.currentDpi};r={width:Math.round(h.width*(n.input.currentDpi/h.dpi)),height:Math.round(h.height*(n.input.currentDpi/h.dpi))};"image"===e&&(i={imageType:n.print.format,captureSize:h});if("pdf"===e){o=n.selectedSize.toMillimeters();a={right:10,left:10,top:10,bottom:10};i={width:o["portrait"===n.selectedLayout.orientation?"w":"h"],height:o["portrait"===n.selectedLayout.orientation?"h":"w"],dpi:n.print.dpi,fitCriteria:n.print.fitCriteria,margin:a,sourceSize:s}}"ppt"===e&&(i={width:c,height:f,dpi:n.print.dpi,sourceSize:s});n.state=n.states.PENDING;return t.printTree(n.input.object,s,r,i,e).then(function(t){u(t,e)},d)}n.destroyComponent()}function u(e,t){n.printUrl=e.qUrl;n.printFileName=e.fileName;var i=t.charAt(0).toUpperCase()+t.slice(1);n.printUrlTranslationKey="Print."+i+".CompletedLink";n.state=n.states.COMPLETED}function d(e){n.statusCode=e.httpStatusCode;var t=e&&e.status;switch(t){case n.states.CANCELED:case n.states.TIMEOUT:n.state=t;break;default:n.state=n.states.FAILED;break}}return{onImageCustomSize:i,onSizeChange:r,onPrintLayout:o,onFormatChange:a,confirm:c,onPptFormatChange:s}}return{create:n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(91)],r=function(e){var t="landscape";var n={w:33.1,h:46.8};var i=function e(t,n,i){this.name=t;this.unit=i||"in";this.dimensions=n};i.prototype={toPixels:function e(t){var n,i,r=0;switch(this.unit){case"in":r=t;break;case"pi":r=1;break;case"cm":r=.393701*t;break}n=this.dimensions.w*r;i=this.dimensions.h*r;return{w:Math.round(n),h:Math.round(i)}},toMillimeters:function e(){var t,n,i=0;switch(this.unit){case"in":i=1/.0393701;break;case"cm":i=10;break}t=this.dimensions.w*i;n=this.dimensions.h*i;return{w:Math.floor(t),h:Math.floor(n)}},setLabel:function t(n){var i=this;var r;var o=e.localeDetected&&"en"===e.localeDetected.substring(0,2);var a=o?i.dimensions:i.toMillimeters();var s=a["portrait"===n?"w":"h"],l=a["portrait"===n?"h":"w"];"Print.PaperSize.Letter"===i.name&&(i.name=e.get(i.name));r=o?" ("+s+'" x '+l+'")':" ("+s+" mm x "+l+" mm)";i.label=i.name+r}};function r(e,t){var n,i;if(e<t){n=e;i=t/2}else{n=e/2;i=t}return{w:n>i?i:n,h:i>n?i:n}}var o=[new i("A0",{w:n.w,h:n.h})];for(var a=1;a<8;a++)o.push(new i("A"+a,r(o[a-1].dimensions.w,o[a-1].dimensions.h)));o.push(new i("Print.PaperSize.Letter",{w:8.5,h:11}));for(var s=0;s<3;s++)o.shift();o.forEach(function(e){e.setLabel(t)});var l=[{orientation:"portrait",translationKey:"Print.Portrait"},{orientation:"landscape",translationKey:"Print.Landscape"}];l.forEach(function(t){e.ready.then(function(){t.label=e.get(t.translationKey)})});var c=[{type:"pdf",format:"pdf",label:"PDF"},{type:"image",format:"png",label:"PNG"},{type:"image",format:"jpeg",label:"JPEG"}];return{sizes:o,layouts:l,outputs:c}}.apply(t,i),void 0!==r&&(e.exports=r))},,,function(e,t,n){"use strict";(function(e){var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(10),n(91),n(520)],r=function(e,t,n){var i=e.module("qv.alert-dialog",["leonardo-ui.dialog"]);i.service("qvAlertDialog",["luiDialog",function(e){var i={};i.show=function(i){if("object"!==o(i))throw new Error("options must be an object");return e.show({controller:["$scope",function(e){e.closeLabel=e.input.closeLabel||t.get("Common.Close")}],template:n,input:{message:i.message,title:i.title,closeLabel:i.closeLabel,keepOpen:i.keepOpen},variant:i.variant,closeOnEscape:i.closeOnEscape})};return i}])}.apply(t,i),void 0!==r&&(e.exports=r))}).call(this,n(55)(e))},function(e,t,n){"use strict";var i,r;!(i=[n(2),n(13)],r=function(e,t){var n;var i=function i(){n=e({method:"GET",url:t.apiPath+"v0/features"}).then(function(e){return e.data});return n};return{get:function e(){if(!n)return i();return n}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";(function(e){var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(10),n(91),n(521)],r=function(e,t,n){var i=e.module("qv.confirm-dialog",["leonardo-ui.dialog"]);i.service("qvConfirmDialog",["luiDialog",function(e){var i={};i.show=function(i){if("object"!==o(i))throw new Error("options must be an object");return e.show({controller:["$scope",function(e){e.okLabel=e.input.okLabel||t.get("Common.OK");e.cancelLabel=e.input.cancelLabel||t.get("Common.Cancel")}],template:n,input:{message:i.message,title:i.title,icon:i.icon,okLabel:i.okLabel,cancelLabel:i.cancelLabel,hideCancelButton:i.hideCancelButton},variant:i.variant,closeOnEscape:i.closeOnEscape})};return i}])}.apply(t,i),void 0!==r&&(e.exports=r))}).call(this,n(55)(e))},function(e,t,n){"use strict";var i,r;!(i=[n(11)],r=function(e){function t(e,t,n,i){switch(t){case"BottomLeft":n-=e.outerWidth();break;case"Bottom":n-=e.outerWidth()/2;break;case"BottomRight":break;case"Left":n-=e.outerWidth();i-=e.outerHeight()/2;break;case"Center":n-=e.outerWidth()/2;i-=e.outerHeight()/2;break;case"Right":i-=e.outerHeight()/2;break;case"Top":i-=e.outerHeight();n-=e.outerWidth()/2;break;case"TopRight":default:i-=e.outerHeight()/2;break}return{left:n,top:i}}function n(t,n){var i=e(window);var r=10;var o=r;var a=i.outerWidth()-t.outerWidth()-r;var s=Math.max(o,Math.min(a,n.left));var l=r;var c=i.outerHeight()-t.outerHeight()-r;var u=Math.max(l,Math.min(c,n.top));return{left:s,top:u}}function i(e,i,r){var o=t(e,i,r.x,r.y);o=n(e,o);e.offset(o);return o}function r(e,t){t=n(e,t);e.offset(t);return t}return{dock:t,limit:n,position:i,reposition:r}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(108),n(143),n(49),n(193)],r=function(e,t,n,i){var r=["HubSection_Home"],o=null,a;n.onDataReceived.then(function(e){a=e.userDirectory});e.service("clientSections",["$contentApi",function(e){var n={};function s(){var e={};for(var t in r)e[r[t]]=true;n=e;return e}return{getSync:function e(){return Object.assign({},n)},get:function l(c){var u=!!c;c=c||function e(){};if(!t.sessionPromise)return c(s());function d(e){var t={};if(!e.data&&!Array.isArray(e.data))return;for(var i in r)e.data.indexOf(r[i])>-1&&(t[r[i]]=true);n=t;return c(t)}function f(){return(o||(o=e.request({method:"POST",url:"/qrs/systemrule/security/evaluatetransientresources",data:r,cache:true}))).then(d).catch(d)}function p(){return"NONE"!==a?f():c(s())}return t.sessionPromise.then(function(){var e=i.getFlag("HAS_QRS");if(e)return u?p():c(s());c(s())}).catch(function(){return c(s())})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},,,function(e,t,n){"use strict";var i,r;!(i=[n(48),n(54),n(113)],r=function(e,t,n){var i="DataManager";var r=1;var o=2592e6;function a(e){if(!n["DISABLE_DM_LOCAL_STORAGE"]&&c()){var t=new s(localStorage,true);this.storage=t;e(function(){u(t)})}else this.storage=new s({},false)}a.prototype.get=function(e){var t=this.storage.get(l(e));var n=f(t);return n?n.value:void 0};a.prototype.set=function(e,t){var n=(new Date).getTime();var i={created:n,version:r,value:t};var o=d(i);this.storage.set(l(e),o)};a.prototype.remove=function(e){this.storage.remove(l(e))};function s(e,t){this.storage=e;this.supportsLocalStorage=t}s.prototype.get=function(e){var t=this.supportsLocalStorage?this.storage.getItem(e):this.storage[e];return t};s.prototype.set=function(e,t){this.supportsLocalStorage?this.storage.setItem(e,t):this.storage[e]=t};s.prototype.remove=function(e){this.supportsLocalStorage?this.storage.removeItem(e):delete this.storage[e]};s.prototype.keys=function(){var e=[];var t;if(this.supportsLocalStorage)for(var n=0;n<this.storage.length;n++){t=this.storage.key(n);e.push(t)}else for(t in this.storage)e.push(t);return e};function l(e){return i+"."+e}function c(){try{localStorage.setItem(i,i);localStorage.removeItem(i);return true}catch(e){return false}}function u(e){var n=i+".";var r=(new Date).getTime();e.keys().forEach(function(i){if(0===i.lastIndexOf(n,0)){var a=e.get(i);var s=f(a);s&&s.created&&t.isNumber(s.created)&&r-s.created>o&&e.remove(i)}})}function d(e){return JSON.stringify(e)}function f(e){if(!e)return;try{return JSON.parse(e)}catch(e){return}}e.service("qvDataManagerLocalStorageService",["$timeout",function(e){return new a(e)}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(118)],r=function(e){var t=2e3;function n(n,i,r){var o=e.occurrencesRE(n,i,r);var a=o>=t?t:o;return a}return{MAX_NBR_OF_HITS:t,getMaxNumberOfHits:n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(614),n(50)],r=function(e,t,n){var i=null;function r(){i=null;n.ViewChanged.unbind(o)}function o(){e.getService("cardService").close()}var a={show:function a(s){n.ViewChanged.bind(o);var l={component:t,input:{object:s}},c=[l],u={cardSteps:c,onClose:r};i=s.id;e.getService("cardService").show(u)},isShowing:function e(){return i}};e.service("objectInfoCard",[function(){return a}]);return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(152),n(114),n(616),n(617)],r=function(e,t,n,i,r){function o(e){var t=/(https?:\/\/[^\s<]+)/g;if(e.indexOf("javascript:")>-1)return e;return e.replace(t,'<a href="$1" target="_blank">$1</a>')}return{template:i,scope:{close:"&"},controller:["$scope",function(i){var a=e.getService("$sce");i.direction=n.direction;i.getTrustedHtml=function(e){return e?a.getTrustedHtml(o(t.toHTML(e))):null};r.createObjectInfo(i.input.object).then(function(e){i.object=e})}]}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){var t;function n(e,t,n,i,r){void 0===n&&(n=r.qDecimalSep);void 0===i&&(i=r.qThousandSep);var o="",a,s,l,c;if("F"===e)if(0===t)o="#"+i+"##0";else{o="#"+i+"##0"+n;for(l=0;l<t;++l)o+="0"}else{for(l=0;l<t;++l)o+="#";if(t>3){c=o.length;a=o.substring(0,c-3);s=o.substr(c-3);o=a+i+s}}return o}return{setNumFmtPattern:function e(n,i,r){var o={type:i.qType||"U",nDec:"qType"===n?("F"===i.qType,2):"R"===i.qType?i.qnDec||10:"number"===typeof i.qnDec?Math.max(0,i.qnDec):2,thousandSep:i.qThou,decimalSep:i.qDec},a;a=this._getSeparators(n,"M"===i.qType,o.decimalSep,o.thousandSep,r);a.decimal!==t&&(o.decimalSep=a.decimal);a.thousand!==t&&(o.thousandSep=a.thousand);i.qType=o.type;i.qnDec=o.nDec;i.qDec=o.decimalSep;i.qThou=o.thousandSep;i.qFmt=this._getPattern(o.type,o.nDec,o.decimalSep,o.thousandSep,r);if(["D","T","TS","IV"].indexOf(o.type)>=0){i.qDec="";i.qThou=""}},_getSeparators:function e(t,n,i,r,o){var a=i,s=r,l="q"+(n?"Money":"");if("qType"===t){s=o[l+"ThousandSep"]||"";a=o[l+"DecimalSep"]||"."}else if("qThou"===t&&void 0===r){s=o[l+"ThousandSep"]||"";a=i||"."}else if("qDec"===t&&(void 0===i||""===i)){a=o[l+"DecimalSep"]||".";s=r||""}return{decimal:a||".",thousand:s||""}},_getPattern:function t(n,i,r,o,a){var s;switch(n){case"U":return"";case"I":return"#"+o+"##0";case"R":case"F":return this.getNDecPattern("F",i,r,o,a);case"M":s=a.qMoneyFmt;a.qMoneyDecimalSep&&(s=s.replace(new RegExp(e.escapeRegExp(a.qMoneyDecimalSep),"g"),r));a.qMoneyThousandSep&&(s=s.replace(new RegExp(e.escapeRegExp(a.qMoneyThousandSep),"g"),o));return s;case"D":return a.qDateFmt;case"T":return a.qTimeFmt;case"TS":return a.qTimestampFmt;case"IV":return"h:mm:ss";default:return""}},getDefaultNumericFormat:function e(t,i){return n("F",2,t.qDec,t.qThou||"",i)},getNDecPattern:n,getNormalizedFormat:function e(t,n){var i=t.qDec+t.qThou;if(/\u00a0/.test(i)&&!/\u0020/.test(i))return n.replace(/\u0020/g,"");return n}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(90),n(89),n(281),n(621),n(156),n(204),n(419),n(623),n(115),n(130),n(189),n(400),n(110)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p){function h(e,t){var n=i.getHyperCube(e,t);if(n)return n.qDimensionInfo||[];if(e.qChildList){var r=e.qChildList.qItems||[];return r.map(function(){return{}})}var o=!e.qListObject||!e.qListObject.qDimensionInfo||e.qListObject.qDimensionInfo.qError;return o?[]:[e.qListObject.qDimensionInfo]}function v(e,t){var n=i.getHyperCube(e,t);return n&&n.qMeasureInfo||[]}function g(e,t,n){var i,r,o,a,s,l;for(i=0;i<e.data.length;++i){for(r=0;r<e.data[i].dimensions.length;++r){o=e.data[i].dimensions[r];if(o.qLibraryId){s=u.findLibraryDimension(o.qLibraryId,t);s&&(o.title=s.qData.title)}}for(r=0;r<e.data[i].measures.length;++r){a=e.data[i].measures[r];if(a.qLibraryId){l=u.findLibraryMeasure(a.qLibraryId,n);l&&(a.title=l.qData.title)}}for(r=0;r<e.data[i].excludedDimensions.length;++r){o=e.data[i].excludedDimensions[r];if(o.qLibraryId){s=u.findLibraryDimension(o.qLibraryId,t);s&&(o.title=s.qData.title)}}for(r=0;r<e.data[i].excludedMeasures.length;++r){a=e.data[i].excludedMeasures[r];if(a.qLibraryId){l=u.findLibraryMeasure(a.qLibraryId,n);l&&(a.title=l.qData.title)}}}}return{BackendApi:r,template:l,hasDefaultTemplate:function e(){return this.template===l},mapProperties:function e(){this.mappedDefinition=o.mapDefinition(this.definition,this.type);this.globalChangeListeners=o.findGlobalListeners(this.mappedDefinition);var t=this.data&&this.data.dimensions;if(t){t.min="undefined"!==typeof t.min?t.min:1;t.max="undefined"!==typeof t.max?t.max:1e3}else if(!this.data){t=o.findDefinition(this.mappedDefinition,"qHyperCubeDef.qDimensions",true);t||(t=o.findDefinition(this.mappedDefinition,"qListObjectDef",true));t&&(t.obsolete=true)}this.dimensionDefinition=t;var n=this.data&&this.data.measures;if(n){n.min="undefined"!==typeof n.min?n.min:1;n.max="undefined"!==typeof n.max?n.max:1}else if(!this.data){n=o.findDefinition(this.mappedDefinition,"qHyperCubeDef.qMeasures",true);n&&(n.obsolete=true)}this.measureDefinition=n},getDefaultDimensionProperties:function e(){if(this.dimensionDefinition&&this.dimensionDefinition.obsolete)return o.mapProperties(this.dimensionDefinition);if(this.dimensionDefinition)return o.mapProperties(this.mappedDefinition.items.data.items.dimensions)},getDefaultMeasureProperties:function e(){if(this.measureDefinition&&this.measureDefinition.obsolete)return o.mapProperties(this.measureDefinition);if(this.measureDefinition)return o.mapProperties(this.mappedDefinition.items.data.items.measures)},getCreatePropertyHandler:function e(t){var n=this.globalChangeListeners,i,r;if(this.model&&this.model.layout&&this.model.layout.qListObject){i=o.mapProperties(this.dimensionDefinition);return new s({app:t,dimensionDefinition:this.dimensionDefinition,dimensionProperties:i})}i=this.getDefaultDimensionProperties();r=this.getDefaultMeasureProperties();return new a({app:t,dimensionDefinition:this.dimensionDefinition,measureDefinition:this.measureDefinition,dimensionProperties:i,measureProperties:r,globalChangeListeners:n})},mapSoftProperties:function e(){if(!this.softDefinition)return;var t=o.mapDefinition(this.softDefinition,null,f);function n(e){var t=[{diffs:e.ref||e.sortIndexRef?[e.ref||e.sortIndexRef]:e.diffs||[]}];e.items&&Object.keys(e.items).forEach(function(i){t.push({diffs:n(e.items[i])})});e._diffs=t;return t}n(t);this.mappedSoftDefinition=t},hasError:function e(t){var n=t.layout,i=t.ext&&t.ext.options.hyperCubePath?n[t.ext.options.hyperCubePath].qHyperCube:n.qHyperCube;if(i)return!!i.qError;if(n.qListObject)return!!n.qListObject.qError;return false},showRequirements:function e(t){var n=t.ext.dimensionDefinition?t.ext.dimensionDefinition.min:0,i=t.ext.measureDefinition?t.ext.measureDefinition.min:0,r=h(t.layout,t.ext.options.hyperCubePath),o=v(t.layout,t.ext.options.hyperCubePath),a;function s(e){return e.qError&&e.qError.qErrorCode===p.NxLocalizedErrorCode.LOCERR_CALC_EVAL_CONDITION_FAILED}function l(e){return e&&e.qErrorCode!==p.NxLocalizedErrorCode.LOCERR_CALC_EVAL_CONDITION_FAILED}function c(e){return e.filter(function(e){return!s(e)}).length}var u=c(r),d=c(o);"function"===typeof n&&(n=n.call(null,d));"function"===typeof i&&(i=i.call(null,u));if(n>0&&u<n)return true;for(a=0;a<r.length;++a)if(l(r[a].qError))return true;if(i>0&&d<i)return true;for(a=0;a<o.length;++a)if(l(o[a].qError))return true;return false},addFieldDimension:function t(n,i){return i.model.getProperties().then(function(t){var r=i.getCreatePropertyHandler();r.setProperties(t);return r.addFieldDimension(n.value,n.trimmedValue).then(function(n){r.updateGlobalChangeListeners();e.$rootScope.$broadcast("pp-open-path","data."+n.qDef.cId);return i.model.setProperties(t)})})},addLibraryDimension:function t(n,i){return i.model.getProperties().then(function(t){var r=i.getCreatePropertyHandler();r.setProperties(t);return r.addLibraryDimension(n.libraryId).then(function(n){r.updateGlobalChangeListeners();e.$rootScope.$broadcast("pp-open-path","data."+n.qDef.cId);return i.model.setProperties(t)})})},addLibraryMeasure:function t(n,i){return i.model.getProperties().then(function(t){var r=i.getCreatePropertyHandler();r.setProperties(t);return r.addLibraryMeasure(n.libraryId).then(function(n){r.updateGlobalChangeListeners();e.$rootScope.$broadcast("pp-open-path","data."+n.qDef.cId);i.model.setProperties(t)})})},addExpressionMeasure:function t(n,i){return i.model.getProperties().then(function(t){var r=i.getCreatePropertyHandler();r.setProperties(t);return r.addExpressionMeasure(n.value,n.trimmedValue).then(function(n){r.updateGlobalChangeListeners();e.$rootScope.$broadcast("pp-open-path","data."+n.qDef.cId);return i.model.setProperties(t)})})},getDropFieldOptions:function e(t,n,i,r,o){t.Add(i,n,o);t.ReplaceDimensions(i,n,o);t.AddFieldAsMeasure(i,n,o);t.ColorBy(i,n,o);r()},getDropDimensionOptions:function t(n,i,r,o,a){if(i.getDimensions().length<i.minDimensions())i.addLibraryDimension(n.item.id).then(function(t){r.setProperties(i.properties);e.$rootScope.$broadcast("pp-open-path","data."+t.qDef.cId)});else{n.Add(r,i,a);n.ReplaceDimensions(r,i,a);n.ColorBy(r,i,a);o()}},getDropMeasureOptions:function t(n,i,r,o,a){var s=i.getMeasures().length;if(s<i.minMeasures()||0===s&&s<i.maxMeasures())"expression"===n.item.type?i.addExpressionMeasure(n.item.name,"").then(function(t){r.setProperties(i.properties);e.$rootScope.$broadcast("pp-open-path","data."+t.qDef.cId)}):i.addLibraryMeasure(n.item.id).then(function(t){r.setProperties(i.properties);e.$rootScope.$broadcast("pp-open-path","data."+t.qDef.cId)});else{n.Add(r,i,a);n.ReplaceMeasures(r,i,a);n.ColorBy(r,i,a);o()}},getDropStateOptions:function e(t,n,i,r){t.ApplyAlternateState(i,n,t.item.id,"contextMenu.applyState");r()},getDropTemplateOptions:function e(t,n,i,r,o){var a=this,s=c.getType(t.item.template),l=["contextMenu.convertTo",t.item.name];a.type!==s.type?s.getExtensionType().then(function(e){!o.isReadonly&&!i.layout.qHasSoftPatches&&a.exportProperties&&e.importProperties&&t.menu.addItem({translation:l,tid:"convert",select:function n(){a._convert(s,e,t.item)}});r()},function(){r()}):r()},getDropOptions:function e(n,i,r){var o=n.model,a=this,s,l,c;l={field:"getDropFieldOptions",dimension:"getDropDimensionOptions",measure:"getDropMeasureOptions",template:"getDropTemplateOptions",expression:"getDropMeasureOptions",state:"getDropStateOptions"};s=i.item.type;c=l[s];if(c)return o.getProperties().then(function(e){var s=n.getCreatePropertyHandler();var l=t.extend(true,{},e);s.setProperties(l);s.setLayout(n.model&&n.model.layout);return a[c](i,s,o,r,n)});r()},_convert:function e(t,i,r){var o,a,s=this;n.all({initialProperties:t.getInitialProperties(r.init),propertyTree:s.model.getFullPropertyTree()}).then(function(e){try{o=s.exportProperties(e.propertyTree,s.options?s.options.hyperCubePath:void 0);n.all({dimensionList:s.model.app.getDimensionList(),measureList:s.model.app.getMeasureList()}).then(function(t){g(o,t.dimensionList,t.measureList);a=i.importProperties(o,e.initialProperties,i,i.options?i.options.hyperCubePath:void 0);s.model.getLayout().then(function(e){if(e.qHasSoftPatches){s.model.markAsCancelled();s.model.clearSoftPatches().then(function(){s.model.setFullPropertyTree(a).then(function(){s.model.markAsInvalid()})})}else s.model.setFullPropertyTree(a)})})}catch(e){}})},exportProperties:function e(t){if(t.qProperty.qHyperCubeDef)return d.hypercube.exportProperties(t);if(t.qProperty.qListObjectDef)return d.listbox.exportProperties(t);return d.other.exportProperties(t)},importProperties:function e(t,n,i){if(n.qHyperCubeDef)return d.hypercube.importProperties(t,n,i);if(n.qListObjectDef)return d.listbox.importProperties(t,n,i);return d.other.importProperties(t,n,i)},support:{cssScaling:false,sharing:false,colorBy:false,snapshot:false,export:false,exportData:true,viewData:false},options:{},hasNewType:function e(t,n){return t.type!==n}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(54),n(178)],r=function(e,t){var n={},i="";var r={put:o,has:a,get:s};return r;function o(i,r){if(!i||!r||!e.isString(i)||!e.isString(r))return;var o=t.getNormalizedExpression(i),a=r;n[o]=a}function a(i){if(!i||!e.isString(i))return false;var r=t.getNormalizedExpression(i),o=n[r];return!!o}function s(r){if(!r||!e.isString(r))return i;var o=t.getNormalizedExpression(r),a=n[o];return a||i}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){e=void 0!==e?e:1;this.data=[];for(var t=0;t<e;++t)this.data.push({dimensions:[],measures:[],excludedDimensions:[],excludedMeasures:[],interColumnSortOrder:[]});this.properties={}}return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){var i;(function(r,o,a,s){"use strict";var l=["","webkit","Moz","MS","ms","o"];var c=o.createElement("div");var u="function";var d=Math.round;var f=Math.abs;var p=Date.now;function h(e,t,n){return setTimeout(w(e,n),t)}function v(e,t,n){if(Array.isArray(e)){g(e,n[t],n);return true}return false}function g(e,t,n){var i;if(!e)return;if(e.forEach)e.forEach(t,n);else if(e.length!==s){i=0;while(i<e.length){t.call(n,e[i],i,e);i++}}else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function m(e,t,n){var i="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace");var n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace";var o=r.console&&(r.console.warn||r.console.log);o&&o.call(r.console,i,n);return e.apply(this,arguments)}}var b;b="function"!==typeof Object.assign?function e(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");var n=Object(t);for(var i=1;i<arguments.length;i++){var r=arguments[i];if(r!==s&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])}return n}:Object.assign;var y=m(function e(t,n,i){var r=Object.keys(n);var o=0;while(o<r.length){(!i||i&&t[r[o]]===s)&&(t[r[o]]=n[r[o]]);o++}return t},"extend","Use `assign`.");var x=m(function e(t,n){return y(t,n,true)},"merge","Use `assign`.");function S(e,t,n){var i=t.prototype,r;r=e.prototype=Object.create(i);r.constructor=e;r._super=i;n&&b(r,n)}function w(e,t){return function n(){return e.apply(t,arguments)}}function q(e,t){if(typeof e==u)return e.apply(t&&t[0]||s,t);return e}function C(e,t){return e===s?t:e}function _(e,t,n){g(A(t),function(t){e.addEventListener(t,n,false)})}function I(e,t,n){g(A(t),function(t){e.removeEventListener(t,n,false)})}function E(e,t){while(e){if(e==t)return true;e=e.parentNode}return false}function D(e,t){return e.indexOf(t)>-1}function A(e){return e.trim().split(/\s+/g)}function T(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);var i=0;while(i<e.length){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function O(e){return Array.prototype.slice.call(e,0)}function k(e,t,n){var i=[];var r=[];var o=0;while(o<e.length){var a=t?e[o][t]:e[o];T(r,a)<0&&i.push(e[o]);r[o]=a;o++}n&&(i=t?i.sort(function e(n,i){return n[t]>i[t]}):i.sort());return i}function L(e,t){var n,i;var r=t[0].toUpperCase()+t.slice(1);var o=0;while(o<l.length){n=l[o];i=n?n+r:t;if(i in e)return i;o++}return s}var P=1;function M(){return P++}function N(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||r}var R=/mobile|tablet|ip(ad|hone|od)|android/i;var F="ontouchstart"in r;var $=L(r,"PointerEvent")!==s;var j=F&&R.test(navigator.userAgent);var H="touch";var V="pen";var B="mouse";var z="kinect";var U=25;var G=1;var W=2;var K=4;var Y=8;var X=1;var Q=2;var J=4;var Z=8;var ee=16;var te=Q|J;var ne=Z|ee;var ie=te|ne;var re=["x","y"];var oe=["clientX","clientY"];function ae(e,t){var n=this;this.manager=e;this.callback=t;this.element=e.element;this.target=e.options.inputTarget;this.domHandler=function(t){q(e.options.enable,[e])&&n.handler(t)};this.init()}ae.prototype={handler:function(){},init:function(){this.evEl&&_(this.element,this.evEl,this.domHandler);this.evTarget&&_(this.target,this.evTarget,this.domHandler);this.evWin&&_(N(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&I(this.element,this.evEl,this.domHandler);this.evTarget&&I(this.target,this.evTarget,this.domHandler);this.evWin&&I(N(this.element),this.evWin,this.domHandler)}};function se(e){var t;var n=e.options.inputClass;t=n||($?De:j?Ne:F?je:qe);return new t(e,le)}function le(e,t,n){var i=n.pointers.length;var r=n.changedPointers.length;var o=t&G&&i-r===0;var a=t&(K|Y)&&i-r===0;n.isFirst=!!o;n.isFinal=!!a;o&&(e.session={});n.eventType=t;ce(e,n);e.emit("hammer.input",n);e.recognize(n);e.session.prevInput=n}function ce(e,t){var n=e.session;var i=t.pointers;var r=i.length;n.firstInput||(n.firstInput=fe(t));r>1&&!n.firstMultiple?n.firstMultiple=fe(t):1===r&&(n.firstMultiple=false);var o=n.firstInput;var a=n.firstMultiple;var s=a?a.center:o.center;var l=t.center=pe(i);t.timeStamp=p();t.deltaTime=t.timeStamp-o.timeStamp;t.angle=me(s,l);t.distance=ge(s,l);ue(n,t);t.offsetDirection=ve(t.deltaX,t.deltaY);var c=he(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x;t.overallVelocityY=c.y;t.overallVelocity=f(c.x)>f(c.y)?c.x:c.y;t.scale=a?ye(a.pointers,i):1;t.rotation=a?be(a.pointers,i):0;t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length;de(n,t);var u=e.element;E(t.srcEvent.target,u)&&(u=t.srcEvent.target);t.target=u}function ue(e,t){var n=t.center;var i=e.offsetDelta||{};var r=e.prevDelta||{};var o=e.prevInput||{};if(t.eventType===G||o.eventType===K){r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0};i=e.offsetDelta={x:n.x,y:n.y}}t.deltaX=r.x+(n.x-i.x);t.deltaY=r.y+(n.y-i.y)}function de(e,t){var n=e.lastInterval||t,i=t.timeStamp-n.timeStamp,r,o,a,l;if(t.eventType!=Y&&(i>U||n.velocity===s)){var c=t.deltaX-n.deltaX;var u=t.deltaY-n.deltaY;var d=he(i,c,u);o=d.x;a=d.y;r=f(d.x)>f(d.y)?d.x:d.y;l=ve(c,u);e.lastInterval=t}else{r=n.velocity;o=n.velocityX;a=n.velocityY;l=n.direction}t.velocity=r;t.velocityX=o;t.velocityY=a;t.direction=l}function fe(e){var t=[];var n=0;while(n<e.pointers.length){t[n]={clientX:d(e.pointers[n].clientX),clientY:d(e.pointers[n].clientY)};n++}return{timeStamp:p(),pointers:t,center:pe(t),deltaX:e.deltaX,deltaY:e.deltaY}}function pe(e){var t=e.length;if(1===t)return{x:d(e[0].clientX),y:d(e[0].clientY)};var n=0,i=0,r=0;while(r<t){n+=e[r].clientX;i+=e[r].clientY;r++}return{x:d(n/t),y:d(i/t)}}function he(e,t,n){return{x:t/e||0,y:n/e||0}}function ve(e,t){if(e===t)return X;if(f(e)>=f(t))return e<0?Q:J;return t<0?Z:ee}function ge(e,t,n){n||(n=re);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function me(e,t,n){n||(n=re);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}function be(e,t){return me(t[1],t[0],oe)+me(e[1],e[0],oe)}function ye(e,t){return ge(t[0],t[1],oe)/ge(e[0],e[1],oe)}var xe={mousedown:G,mousemove:W,mouseup:K};var Se="mousedown";var we="mousemove mouseup";function qe(){this.evEl=Se;this.evWin=we;this.pressed=false;ae.apply(this,arguments)}S(qe,ae,{handler:function e(t){var n=xe[t.type];n&G&&0===t.button&&(this.pressed=true);n&W&&1!==t.which&&(n=K);if(!this.pressed)return;n&K&&(this.pressed=false);this.callback(this.manager,n,{pointers:[t],changedPointers:[t],pointerType:B,srcEvent:t})}});var Ce={pointerdown:G,pointermove:W,pointerup:K,pointercancel:Y,pointerout:Y};var _e={2:H,3:V,4:B,5:z};var Ie="pointerdown";var Ee="pointermove pointerup pointercancel";if(r.MSPointerEvent&&!r.PointerEvent){Ie="MSPointerDown";Ee="MSPointerMove MSPointerUp MSPointerCancel"}function De(){this.evEl=Ie;this.evWin=Ee;ae.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}S(De,ae,{handler:function e(t){var n=this.store;var i=false;var r=t.type.toLowerCase().replace("ms","");var o=Ce[r];var a=_e[t.pointerType]||t.pointerType;var s=a==H;var l=T(n,t.pointerId,"pointerId");if(o&G&&(0===t.button||s)){if(l<0){n.push(t);l=n.length-1}}else o&(K|Y)&&(i=true);if(l<0)return;n[l]=t;this.callback(this.manager,o,{pointers:n,changedPointers:[t],pointerType:a,srcEvent:t});i&&n.splice(l,1)}});var Ae={touchstart:G,touchmove:W,touchend:K,touchcancel:Y};var Te="touchstart";var Oe="touchstart touchmove touchend touchcancel";function ke(){this.evTarget=Te;this.evWin=Oe;this.started=false;ae.apply(this,arguments)}S(ke,ae,{handler:function e(t){var n=Ae[t.type];n===G&&(this.started=true);if(!this.started)return;var i=Le.call(this,t,n);n&(K|Y)&&i[0].length-i[1].length===0&&(this.started=false);this.callback(this.manager,n,{pointers:i[0],changedPointers:i[1],pointerType:H,srcEvent:t})}});function Le(e,t){var n=O(e.touches);var i=O(e.changedTouches);t&(K|Y)&&(n=k(n.concat(i),"identifier",true));return[n,i]}var Pe={touchstart:G,touchmove:W,touchend:K,touchcancel:Y};var Me="touchstart touchmove touchend touchcancel";function Ne(){this.evTarget=Me;this.targetIds={};ae.apply(this,arguments)}S(Ne,ae,{handler:function e(t){var n=Pe[t.type];var i=Re.call(this,t,n);if(!i)return;this.callback(this.manager,n,{pointers:i[0],changedPointers:i[1],pointerType:H,srcEvent:t})}});function Re(e,t){var n=O(e.touches);var i=this.targetIds;if(t&(G|W)&&1===n.length){i[n[0].identifier]=true;return[n,n]}var r,o,a=O(e.changedTouches),s=[],l=this.target;o=n.filter(function(e){return E(e.target,l)});if(t===G){r=0;while(r<o.length){i[o[r].identifier]=true;r++}}r=0;while(r<a.length){i[a[r].identifier]&&s.push(a[r]);t&(K|Y)&&delete i[a[r].identifier];r++}if(!s.length)return;return[k(o.concat(s),"identifier",true),s]}var Fe=2500;var $e=25;function je(){ae.apply(this,arguments);var e=w(this.handler,this);this.touch=new Ne(this.manager,e);this.mouse=new qe(this.manager,e);this.primaryTouch=null;this.lastTouches=[]}S(je,ae,{handler:function e(t,n,i){var r=i.pointerType==H,o=i.pointerType==B;if(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)return;if(r)He.call(this,n,i);else if(o&&Be.call(this,i))return;this.callback(t,n,i)},destroy:function e(){this.touch.destroy();this.mouse.destroy()}});function He(e,t){if(e&G){this.primaryTouch=t.changedPointers[0].identifier;Ve.call(this,t)}else e&(K|Y)&&Ve.call(this,t)}function Ve(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches;var r=function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)};setTimeout(r,Fe)}}function Be(e){var t=e.srcEvent.clientX,n=e.srcEvent.clientY;for(var i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i];var o=Math.abs(t-r.x),a=Math.abs(n-r.y);if(o<=$e&&a<=$e)return true}return false}var ze=L(c.style,"touchAction");var Ue=ze!==s;var Ge="compute";var We="auto";var Ke="manipulation";var Ye="none";var Xe="pan-x";var Qe="pan-y";var Je=tt();function Ze(e,t){this.manager=e;this.set(t)}Ze.prototype={set:function(e){e==Ge&&(e=this.compute());Ue&&this.manager.element.style&&Je[e]&&(this.manager.element.style[ze]=e);this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];g(this.manager.recognizers,function(t){q(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))});return et(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent;var n=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var i=this.actions;var r=D(i,Ye)&&!Je[Ye];var o=D(i,Qe)&&!Je[Qe];var a=D(i,Xe)&&!Je[Xe];if(r){var s=1===e.pointers.length;var l=e.distance<2;var c=e.deltaTime<250;if(s&&l&&c)return}if(a&&o)return;if(r||o&&n&te||a&&n&ne)return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=true;e.preventDefault()}};function et(e){if(D(e,Ye))return Ye;var t=D(e,Xe);var n=D(e,Qe);if(t&&n)return Ye;if(t||n)return t?Xe:Qe;if(D(e,Ke))return Ke;return We}function tt(){if(!Ue)return false;var e={};var t=r.CSS&&r.CSS.supports;["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||r.CSS.supports("touch-action",n)});return e}var nt=1;var it=2;var rt=4;var ot=8;var at=ot;var st=16;var lt=32;function ct(e){this.options=b({},this.defaults,e||{});this.id=M();this.manager=null;this.options.enable=C(this.options.enable,true);this.state=nt;this.simultaneous={};this.requireFail=[]}ct.prototype={defaults:{},set:function(e){b(this.options,e);this.manager&&this.manager.touchAction.update();return this},recognizeWith:function(e){if(v(e,"recognizeWith",this))return this;var t=this.simultaneous;e=ft(e,this);if(!t[e.id]){t[e.id]=e;e.recognizeWith(this)}return this},dropRecognizeWith:function(e){if(v(e,"dropRecognizeWith",this))return this;e=ft(e,this);delete this.simultaneous[e.id];return this},requireFailure:function(e){if(v(e,"requireFailure",this))return this;var t=this.requireFail;e=ft(e,this);if(-1===T(t,e)){t.push(e);e.requireFailure(this)}return this},dropRequireFailure:function(e){if(v(e,"dropRequireFailure",this))return this;e=ft(e,this);var t=T(this.requireFail,e);t>-1&&this.requireFail.splice(t,1);return this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this;var n=this.state;function i(n){t.manager.emit(n,e)}n<ot&&i(t.options.event+ut(n));i(t.options.event);e.additionalEvent&&i(e.additionalEvent);n>=ot&&i(t.options.event+ut(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=lt},canEmit:function(){var e=0;while(e<this.requireFail.length){if(!(this.requireFail[e].state&(lt|nt)))return false;e++}return true},recognize:function(e){var t=b({},e);if(!q(this.options.enable,[this,t])){this.reset();this.state=lt;return}this.state&(at|st|lt)&&(this.state=nt);this.state=this.process(t);this.state&(it|rt|ot|st)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}};function ut(e){if(e&st)return"cancel";if(e&ot)return"end";if(e&rt)return"move";if(e&it)return"start";return""}function dt(e){if(e==ee)return"down";if(e==Z)return"up";if(e==Q)return"left";if(e==J)return"right";return""}function ft(e,t){var n=t.manager;if(n)return n.get(e);return e}function pt(){ct.apply(this,arguments)}S(pt,ct,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state;var n=e.eventType;var i=t&(it|rt);var r=this.attrTest(e);if(i&&(n&Y||!r))return t|st;if(i||r){if(n&K)return t|ot;if(!(t&it))return it;return t|rt}return lt}});function ht(){pt.apply(this,arguments);this.pX=null;this.pY=null}S(ht,pt,{defaults:{event:"pan",threshold:10,pointers:1,direction:ie},getTouchAction:function(){var e=this.options.direction;var t=[];e&te&&t.push(Qe);e&ne&&t.push(Xe);return t},directionTest:function(e){var t=this.options;var n=true;var i=e.distance;var r=e.direction;var o=e.deltaX;var a=e.deltaY;if(!(r&t.direction))if(t.direction&te){r=0===o?X:o<0?Q:J;n=o!=this.pX;i=Math.abs(e.deltaX)}else{r=0===a?X:a<0?Z:ee;n=a!=this.pY;i=Math.abs(e.deltaY)}e.direction=r;return n&&i>t.threshold&&r&t.direction},attrTest:function(e){return pt.prototype.attrTest.call(this,e)&&(this.state&it||!(this.state&it)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX;this.pY=e.deltaY;var t=dt(e.direction);t&&(e.additionalEvent=this.options.event+t);this._super.emit.call(this,e)}});function vt(){pt.apply(this,arguments)}S(vt,pt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ye]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&it)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function gt(){ct.apply(this,arguments);this._timer=null;this._input=null}S(gt,ct,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[We]},process:function(e){var t=this.options;var n=e.pointers.length===t.pointers;var i=e.distance<t.threshold;var r=e.deltaTime>t.time;this._input=e;if(!i||!n||e.eventType&(K|Y)&&!r)this.reset();else if(e.eventType&G){this.reset();this._timer=h(function(){this.state=at;this.tryEmit()},t.time,this)}else if(e.eventType&K)return at;return lt},reset:function(){clearTimeout(this._timer)},emit:function(e){if(this.state!==at)return;if(e&&e.eventType&K)this.manager.emit(this.options.event+"up",e);else{this._input.timeStamp=p();this.manager.emit(this.options.event,this._input)}}});function mt(){pt.apply(this,arguments)}S(mt,pt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ye]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&it)}});function bt(){pt.apply(this,arguments)}S(bt,pt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:te|ne,pointers:1},getTouchAction:function(){return ht.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction;var n;t&(te|ne)?n=e.overallVelocity:t&te?n=e.overallVelocityX:t&ne&&(n=e.overallVelocityY);return this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&f(n)>this.options.velocity&&e.eventType&K},emit:function(e){var t=dt(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e);this.manager.emit(this.options.event,e)}});function yt(){ct.apply(this,arguments);this.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0}S(yt,ct,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ke]},process:function(e){var t=this.options;var n=e.pointers.length===t.pointers;var i=e.distance<t.threshold;var r=e.deltaTime<t.time;this.reset();if(e.eventType&G&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=K)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval;var a=!this.pCenter||ge(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp;this.pCenter=e.center;a&&o?this.count+=1:this.count=1;this._input=e;var s=this.count%t.taps;if(0===s){if(this.hasRequireFailures()){this._timer=h(function(){this.state=at;this.tryEmit()},t.interval,this);return it}return at}}return lt},failTimeout:function(){this._timer=h(function(){this.state=lt},this.options.interval,this);return lt},reset:function(){clearTimeout(this._timer)},emit:function(){if(this.state==at){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input)}}});function xt(e,t){t=t||{};t.recognizers=C(t.recognizers,xt.defaults.preset);return new qt(e,t)}xt.VERSION="2.0.7";xt.defaults={domEvents:false,touchAction:Ge,enable:true,inputTarget:null,inputClass:null,preset:[[mt,{enable:false}],[vt,{enable:false},["rotate"]],[bt,{direction:te}],[ht,{direction:te},["swipe"]],[yt],[yt,{event:"doubletap",taps:2},["tap"]],[gt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var St=1;var wt=2;function qt(e,t){this.options=b({},xt.defaults,t||{});this.options.inputTarget=this.options.inputTarget||e;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=e;this.input=se(this);this.touchAction=new Ze(this,this.options.touchAction);Ct(this,true);g(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]);e[3]&&t.requireFailure(e[3])},this)}qt.prototype={set:function(e){b(this.options,e);e.touchAction&&this.touchAction.update();if(e.inputTarget){this.input.destroy();this.input.target=e.inputTarget;this.input.init()}return this},stop:function(e){this.session.stopped=e?wt:St},recognize:function(e){var t=this.session;if(t.stopped)return;this.touchAction.preventDefaults(e);var n;var i=this.recognizers;var r=t.curRecognizer;(!r||r&&r.state&at)&&(r=t.curRecognizer=null);var o=0;while(o<i.length){n=i[o];t.stopped===wt||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e);!r&&n.state&(it|rt|ot)&&(r=t.curRecognizer=n);o++}},get:function(e){if(e instanceof ct)return e;var t=this.recognizers;for(var n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(v(e,"add",this))return this;var t=this.get(e.options.event);t&&this.remove(t);this.recognizers.push(e);e.manager=this;this.touchAction.update();return e},remove:function(e){if(v(e,"remove",this))return this;e=this.get(e);if(e){var t=this.recognizers;var n=T(t,e);if(-1!==n){t.splice(n,1);this.touchAction.update()}}return this},on:function(e,t){if(e===s)return;if(t===s)return;var n=this.handlers;g(A(e),function(e){n[e]=n[e]||[];n[e].push(t)});return this},off:function(e,t){if(e===s)return;var n=this.handlers;g(A(e),function(e){t?n[e]&&n[e].splice(T(n[e],t),1):delete n[e]});return this},emit:function(e,t){this.options.domEvents&&_t(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(!n||!n.length)return;t.type=e;t.preventDefault=function(){t.srcEvent.preventDefault()};var i=0;while(i<n.length){n[i](t);i++}},destroy:function(){this.element&&Ct(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null}};function Ct(e,t){var n=e.element;if(!n.style)return;var i;g(e.options.cssProps,function(r,o){i=L(n.style,o);if(t){e.oldCssProps[i]=n.style[i];n.style[i]=r}else n.style[i]=e.oldCssProps[i]||""});t||(e.oldCssProps={})}function _t(e,t){var n=o.createEvent("Event");n.initEvent(e,true,true);n.gesture=t;t.target.dispatchEvent(n)}b(xt,{INPUT_START:G,INPUT_MOVE:W,INPUT_END:K,INPUT_CANCEL:Y,STATE_POSSIBLE:nt,STATE_BEGAN:it,STATE_CHANGED:rt,STATE_ENDED:ot,STATE_RECOGNIZED:at,STATE_CANCELLED:st,STATE_FAILED:lt,DIRECTION_NONE:X,DIRECTION_LEFT:Q,DIRECTION_RIGHT:J,DIRECTION_UP:Z,DIRECTION_DOWN:ee,DIRECTION_HORIZONTAL:te,DIRECTION_VERTICAL:ne,DIRECTION_ALL:ie,Manager:qt,Input:ae,TouchAction:Ze,TouchInput:Ne,MouseInput:qe,PointerEventInput:De,TouchMouseInput:je,SingleTouchInput:ke,Recognizer:ct,AttrRecognizer:pt,Tap:yt,Pan:ht,Swipe:bt,Pinch:vt,Rotate:mt,Press:gt,on:_,off:I,each:g,merge:x,extend:y,assign:b,inherit:S,bindFn:w,prefixed:L});var It="undefined"!==typeof r?r:"undefined"!==typeof self?self:{};It.Hammer=xt;true;!(i=function(){return xt}.call(t,n,t,e),i!==s&&(e.exports=i))})(window,document,"Hammer")},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(159),n(114)],r=function(e,t,n){e.directive("qvaDirection",function(){return{restrict:"A",link:function e(i,r,o){function a(){var e,i=o["dirSetting"]?o["dirSetting"]:n.direction,a=o["dirText"];e=a?t.detectTextDirection(a):i;r.attr("dir",e);"rtl"===e?r.addClass("qv-rtl-text"):r.removeClass("qv-rtl-text");"rtl"===i?r.addClass("qv-rtl-layout"):r.removeClass("qv-rtl-layout")}a();o.$observe("dirText",a);o.$observe("dirSetting",a)}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(336),n(158),n(89),n(313),n(224),n(10)],r=function(e,t,n,i,r,a){function s(t,i,r){if(i instanceof s)return i;Object.defineProperties(this,{id:{value:i.id},qapp:{value:t},model:{value:i},rendered:{value:new n},support:{value:r,writable:true},_isToggled:{value:false,writable:true}});i.layout.qHyperCube&&Object.defineProperties(this,{table:{value:new e(this.qapp,i),configurable:true}})}s.prototype.setOptions=function(e){var n=[];t.addPatches("/",e,n);return this.model.applyPatches(n,true)};s.prototype.show=function(e,n){n=n||{};var i=this;var r=n.onRendered;n.onRendered=function(e){r&&r(e);i.rendered.resolve(e)};return t.showVisualization(e,this.model.enigmaModel,n,this.model.enigmaModel.app).then(function(t){i._scopes=i._scopes||[];i._scopes.push(t);i._elements=i._elements||[];i._elements.push(e);return t})};s.prototype.close=function(){if(this._scopes){this._scopes.forEach(function(e){e.$destroy()});delete this._scopes}if(this._elements){this._elements.forEach(function(e){t.clearElement(e)});delete this._elements}if(this.table){this.table.destroy();delete this.table}this.model&&this.model._expendable&&this.model.close();return t.Promise.resolve()};s.prototype.resize=function(){t.resize(this.id)};s.prototype.toggleDataView=function(){var e=this;return e.rendered.promise.then(function(){return t.getExtensionSupport(e.model).then(function(n){if(n.viewData){e.dataView||(e.dataView=e._elements.map(function(t){return new i(e.qapp.model,e.model,t,e._scopes[0].options)}));return t.Promise.all(e.dataView.map(function(e){return e.toggle()})).then(function(t){return e._isToggled=t.every(function(e){return e})}).catch(function(){return t.Promise.reject("toggleDataView was not successful")})}return t.Promise.reject("toggleDataView is not supported for this visualization type")})})};function l(e){var t,n,i,r,o,a;if(e&&e.session&&e.session.options||e&&e.enigmaModel&&e.enigmaModel.session&&e.enigmaModel.session.sessionConfig){t=e.session.options||e.enigmaModel.session.sessionConfig;a=void 0!==t.secure?t.secure:t.isSecure;n=a?"https://":"http://";i=t.host||"localhost";r=t.port?":"+t.port:"";o=t.prefix?t.prefix:"/";"/"!==o[o.length-1]&&(o+="/");return{baseUrl:n+i+r,prefix:o}}return{baseUrl:"",prefix:""}}function c(e,t){return-1!==e.indexOf("/printing/export/")?e:t.baseUrl+t.prefix+e.replace("../","")}s.prototype.exportImg=function(e){if(!e||!e.height||!e.width)throw new Error("Image dimensions missing in settings argument.");var t=this;var n="image";var i=l(t.qapp.model);var o="png";e&&e.format&&("jpeg"===e.format.toLowerCase()||"jpg"===e.format.toLowerCase())&&(o="jpeg");var a={imageType:o,captureSize:{dpi:96,height:e.height,width:e.width}};return r.printObject(t.qapp.model,{model:t.model},i.baseUrl,void 0,a.captureSize,a,n).then(function(e){return c(e.qUrl,i)})};function u(e,t){var n=void 0!==t&&t;var i={a3:{height:420,width:297},a4:{height:297,width:210},a5:{height:210,width:148},a6:{height:148,width:105},a7:{height:105,width:74},letter:{height:279.4,width:215.9}};if("object"===o(e)&&e.width&&e.height)return e;if(!i.hasOwnProperty(e.toLowerCase()))return{};return n?{height:i[e.toLowerCase()].width,width:i[e.toLowerCase()].height}:i[e.toLowerCase()]}s.prototype.exportPdf=function(e){var t=this;var n="pdf";var i=l(t.qapp.model);var o=!(!e||!e.orientation||"landscape"!==e.orientation.toLowerCase());var a=e&&e.documentSize?e.documentSize:"a4";var s=u(a,o);var d=e&&-1!==[0,2].indexOf(e.aspectRatio)?e.aspectRatio:2;var f=0!==d?{height:1,width:1}:e.objectSize;var p={dpi:200,fitCriteria:d,height:s.height,width:s.width,sourceSize:{dpi:96,width:f.width,height:f.height}};return r.printObject(t.qapp.model,{model:t.model},i.baseUrl,void 0,void 0,p,n).then(function(e){return c(e.qUrl,i)})};s.prototype.exportData=function(e){var t=this;var n=l(t.qapp.model);var i=e?a.copy(e):{};i.download=false;i.filename&&delete i.filename;return this.table.exportData(i).then(function(e){return n.baseUrl+e})};return s}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(337),n(338),n(339),n(647)],r=function(e,t,n,i,r){var o={OBJECT:"object",SHEET:"sheet",SLIDE:"slide",STORY:"story"};function a(e,n){var i={left:0,top:0,width:1,height:1};return t.snapshot(e,n.size||{width:600,height:400},n.source,n.sourceSize||{},i)}function s(e,t){return n.snapshot(e,t.size||{width:600,height:400},t.source,t.sheetLayout)}function l(e,t){return i.snapshot(e,t.size||{width:600,height:400},t.source,t.sourceSize)}function c(e,t){return r.snapshot(e,t.size||{width:600,height:400},t.source,t.sourceSize)}return{snapshot:function e(t,n,i){switch(n){case o.SHEET:return s(t,i||{});case o.STORY:return c(t,i||{});case o.SLIDE:return l(t,i||{});case o.OBJECT:return a(t,i||{})}},cancel:function t(){var n=Array.prototype.slice.call(document.querySelectorAll(".qv-snapshotter")),i;while(i=n.pop()){i=e(i).children("div");i.slice().each(function(t,n){n=e(n);n.scope&&n.scope()&&n.scope().$destroy();n.remove()})}},type:o}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11)],r=function(e){function t(e,t,i,r,a){"title"===e?n(t,i,1.32,false):"paragraph"===e&&o(t,i,r,a)}function n(e,t,n,i){var o,a,s,l,c=0,u=t.parents(".qv-story-grid-object"),d=t.find(".story-text-static"),f;f=e.split("<div").length>=e.split("<br").length?r(e,"<div"):r(e,"<br");o=t.height()/n/f;a=t.height()/f;s=t.height()/8/f;t.css({"line-height":Math.floor(a)+"px","font-size":Math.floor(o)});while(Math.ceil(u.outerWidth())<d.outerWidth()&&!i&&"!?}^"!==e&&c<250){l=o--;t.css({"line-height":Math.floor(a)+"px","font-size":Math.floor(l)});c++}t.css({"line-height":Math.floor(a)+"px","font-size":Math.floor(o)});t.find(".qv-media-tool-html").css({"padding-right":s});t.find(".qv-media-tool-editor").css({"padding-right":s})}function i(e,t,n){var i;i=e.split("<div").length>=e.split("<br").length?r(e,"<div"):r(e,"<br");return t/n/i}function r(e,t){var n=0,i=e.split(t),r=e.match(/<br/g),o=e.match(/<div/g);if(r&&"<br"===t){n+=r.length;i&&i[i.length-1].match(/.*?>(?:<\/\w+>)*([^<]+)/g)&&n++}o&&"<div"===t&&(n+=o.length);e.split("<div").length>n&&(n=e.split("<div").length);i.forEach(function(e,t){""===e&&0===t&&(n-=1)});n<1&&(n=1);return n}function o(t,n,i,r){var o,s,l;i.length<1&&(i=e(r?".qv-story-play-slide.qv-story-slide-active":"#selectable"));o=i.height();s=o<200?8e3/o:40;l=o/s;l=parseFloat(l.toFixed(2));l=l<2?2:l;a(n,l)}function a(e,t){e.css({"font-size":t})}function s(e){var t,n;t=e<200?8e3/e:40;n=e/t;n=parseFloat(n.toFixed(2));n=n<2?2:n;return n}return{getRows:r,calculateFontsize:t,calculateFontsizeOnTitle:n,calculateFontsizeOnParagraph:o,calculatePrintTitleFontSize:i,calculatePrintParagraphFontSize:s}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){return{getDuration:e};function e(e){var t=3e3,n=7e3,i=3e4,r=e*t;return Math.max(n,Math.min(r,i))}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92)],r=function(e){function t(e){var t=e.getBoundingRect();return Number.isNaN(+t.x+t.y+t.width+t.height)}var n=e.extend({init:function e(t,n,i,r,o,a,s){if(!(!t||t instanceof Array)||!(!n||n instanceof Array)||!(!i||n instanceof Array)||!(!r||i instanceof Array))throw new Error("The dimensions, measures and values input must be undefined or arrays");this.selected=false;this.highlighted=false;this.values=i||[];this.labels=r||[];this.row=o;this.col=a;this.id=s;this.parent=void 0;this.children=[];this._dimensions=t||[];this._measures=n||[];this._attrDims=[];this._attrDimTypes=[];this._objectShapes={};this._shapes=[];this._tooltipShape=void 0;this._tooltipShapeComponent=void 0},get siblings(){return this._parent?this._parent.children:[]},clearShapes:function e(t){t&&this._objectShapes[t]&&(this._objectShapes[t]=[]);this._shapes=[];for(var n in this._objectShapes)this._shapes=this._shapes.concat(this._objectShapes[n])},getShapes:function e(t){return t?this._objectShapes[t]||(this._objectShapes[t]=[]):this._shapes},getShapeBounds:function e(n,i){if(this._calculateTooltipPosition&&n){var r=this.getShapes(n);var o=r.map(function(e){var t=e.getBoundingRect();if(!e.clearModelView){t=t.clone();t.set(t.x*i,t.y*i,t.width*i,t.height*i)}return t});o=o.filter(function(e){return!t(e)});if(o.length){var a=o.reduce(function(e,t){return e.combineWith(t)},o[0]);return a}return null}return null},addShape:function e(t,n,i){if(n instanceof Array&&(!n[0].pointInside||!n[0].getBoundingRect)||!n.pointInside||!n.getBoundingRect)throw new Error("The shape must implement a `pointInside` function");this._objectShapes[t]instanceof Array||(this._objectShapes[t]=[]);this._objectShapes[t].push(n);this._shapes.push(n);if(i){this._tooltipShape=n;this._tooltipShapeComponent=t}},addMeasure:function e(t,n,i){this.values.push(n);this.labels.push(i);this._measures.push(t)},getMeasures:function e(){return this._measures},getMeasuresIndecies:function e(){return this._measures.map(function(e,t){return t})},addDimension:function e(t){this._dimensions.push(t)},getDimensions:function e(){return this._dimensions},addAttributeDimension:function e(t,n,i){this._attrDims.push({value:t,label:n,name:i})},getAttributeDimensions:function e(t){if(this._attrDims.length)return Number.isNaN(+t)?this._attrDims.map(function(e){return e.value}):[this._attrDims[t].value];return null},getValue:function e(t){t=t||0;return this.values[t]},getPreformattedLabel:function e(t){t=t||0;return this.labels[t]},getCombinedElementID:function e(){var t=this,n=[t.id];while(t.parent){t=t.parent;n.push(t.id)}n.reverse();return n.join(",")}});n.prototype.isCacheItem=true;Object.defineProperties(n.prototype,{tooltipShape:{get:function e(){return this._tooltipShape}},calculateTooltipPosition:{set:function e(t){this._calculateTooltipPosition=t},get:function e(){return this._calculateTooltipPosition}},interactPosition:{set:function e(t){this._interactPosition=t},get:function e(){return this._interactPosition}},tooltipShapeComponent:{get:function e(){return this._tooltipShapeComponent}},label:{get:function e(){throw new Error("CacheItem: label: Removed functionality")}},shape:{get:function e(){throw new Error("CacheItem: shape: Removed functionality")}},value:{get:function e(){throw new Error("CacheItem: value: Removed functionality")}}});return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(684)],r=function(e){return{scope:{offset:"=",content:"="},template:e,controller:[function(){}]}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(97),n(750),n(91)],r=function(e,t,n,i,r){var o={template:i,controller:["$scope","$timeout",function(t,i){t.popupClosing=false;t.input.buttonText=t.input.buttonText?t.input.buttonText:r.get("Common.OK");t.input.title=t.input.title?t.input.title:"";t.input.message=t.input.message?t.input.message:"";function o(e){if(e){t.popupClosing=true;i(function(){t.destroyComponent()},500)}else t.destroyComponent()}t.input.closeAfter&&i(function(){o(true)},t.input.closeAfter);t.onOutsidePopover=function(t){event.stopPropagation();event.preventDefault();e(t.target).closest(".qui-popover-ok-button").length||o()};t.onCloseClicked=function(){o(true)};t.$on("$destroy",function(){n.off("start",a)});function a(){t.destroyComponent()}n.on("start",a)}]};t.service("qvGuidancePopover",["luiPopover",function(e){return{show:function t(n){return e.show({controller:o.controller,template:o.template,alignTo:n.alignTo,input:{input:n,class:n.class?n.class:""}})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(458),n(214)],r=function(e,t,n){var i=false;var r=false;var o;function a(){return n.saveApp().then(function(){if(r){r=false;return a()}})}function s(){var s=e.getService("$timeout");if(!n.isAutoSaveOn()){n.notifyThatNewChangeIsDoneAndSaveIsRequired();return}if(i){r=true;return}s.cancel(o);n.setSaveOngoing(true);o=s(function(){i=true;t.save();a().finally(function(){i=false})},1e3)}return{save:s}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(248),n(251),n(353),n(170)],r=function(e,t,n,i){var r={};var o;function a(t){o=t;e.hasTableSizeData()&&u()}function s(e){return t.sha256(o+e)}function l(e,t,n){if(!o)throw new Error("Application ID is undefined.");var i=s(e);r[i]={height:t,width:n}}function c(){var t=n.getDataModel();for(var o in t){var a=i.getTableElement(o);var s=a.height();var c=a.width();l(o,s,c)}e.setTableSizeData(r)}function u(){r=e.getTableSizeData()}function d(e){var t=s(e);var n=r[t];return n}function f(){return e.hasTableSizeData()}return{setAppID:a,save:c,getWidthAndHeightForTable:d,hasLocalStorageData:f}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i;!(i=function(){function e(e,t){return e*(1/t)}function t(e,t){return e/t}return{getDimensionBasedOnZoom:e,getZoomLevelBasedOnDimension:t}}.call(t,n,t,e),void 0!==i&&(e.exports=i))},function(e,t,n){"use strict";var i,r;!(i=[n(115),n(89)],r=function(e,t){var i={width:144,height:96},r=2;function o(e){var t={};t.width=e.width-e.numCols*e.spacing;t.height=e.height-e.numRows*e.spacing;t.columnWidth=t.width/e.numCols;t.rowHeight=t.height/e.numRows;t.cols=e.numCols;t.rows=e.numRows;t.spacing=e.spacing;return t}function a(t,n,i,r){var o=i.colspan/n.cols*n.width+(i.colspan-2)*n.spacing,a=i.rowspan/n.rows*n.height+(i.rowspan-2)*n.spacing,s=n.spacing+n.columnWidth*i.col+n.spacing*i.col,l=n.spacing+n.rowHeight*i.row+n.spacing*i.row,c=e.getIconPath(i.type),u=o>=a?a:o;t.fillStyle="rgb(242, 242, 242)";t.fillRect(s,l,o,a);u=Math.max(8,Math.min(u,24))/16;t.fillStyle=r?"rgba(0, 152, 69,.6)":"rgba(89, 89, 89,0.6)";t.text="center";t.textAlign="center";t.textBaseline="middle";t.save();t.translate(Math.round(s+o/2-8*u),Math.round(l+a/2-8*u));t.scale(u,u);t.fill(new Path2D(c));t.restore()}var s={staticSrc:function e(){return{staticPublishedSheet:function e(){return n.p+"img/core/static/Default-sheet-published.png"},staticUnPublishedSheet:function e(){return n.p+"img/core/static/Default-sheet-unpublished.png"},staticPublishedStory:function e(){return n.p+"img/core/static/Default-story-published.png"},staticUnPublishedStory:function e(){return n.p+"img/core/static/Default-story-unpublished.png"},staticApp:function e(){return n.p+"img/core/static/Default_thumbnail_app.png"},brokenImage:function e(){return n.p+"img/core/static/Ic_BrokenBig@2x.png"}}},dimensions:{original:i,width:i.width-2,height:i.height-2,spacing:2},getSrc:function e(t,n){var i=n?"Sheet":"Story",r=t?"staticPublished":"staticUnPublished";return s.staticSrc()[r+i]()},generateImageForStory:function e(n,i){var r=new t;i.get(n.item.qInfo.qId).then(function(e){e.getLayout().then(function(t){if(t.qChildList&&t.qChildList.qItems.length){n.slide=t.qChildList.qItems.slice().sort(function(e,t){if(e.qData.rank===t.qData.rank)return 0;return e.qData.rank<t.qData.rank?-1:1})[0];n.slide?e.app.getObject(n.slide.qInfo.qId).then(function(e){e.getLayout().then(function(e){e.qChildList.qItems.length>0?r.resolve():r.reject()},r.reject)}):r.reject()}else r.reject()})});return r.promise},paintCanvas:function e(t){var n=document.createElement("canvas"),i,l,c;i=o({width:s.dimensions.width*r,height:s.dimensions.height*r,spacing:s.dimensions.spacing,numRows:t.qData.rows,numCols:t.qData.columns});n.width=s.dimensions.width*r;n.height=s.dimensions.height*r;l=n.getContext("2d");function u(e){e.forEach(function(e){var n=t.qMeta.published;a(l,i,e,n)})}l.clearRect(0,0,n.width,n.height);u(t.qData.cells);c=n.toDataURL();l=null;i=null;n.remove&&n.remove();n=null;return c}};return s}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){return{getLayoutMsg:t,getPropCondition:n,setPropCondition:i,getPropMessage:r,setPropMessage:o};function t(e){return e.customErrorMessage&&e.customErrorMessage.calcCond||e.qCalcCondMsg}function n(t,n){return e.getValue(t,n||"qCalcCond.qv")||e.getValue(t,"qCalcCondition.qCond.qv")||""}function i(t,n,i){e.setValue(t,i||"qCalcCond.qv",n);e.setValue(t,"qCalcCondition.qCond.qv",n)}function r(t){var n=e.getValue(t,"customErrorMessage.calcCond");var i=e.getValue(t,"qCalcCondition.qMsg.qv");return n||i||""}function o(t,n){e.setValue(t,"customErrorMessage.calcCond","="!==n[0]?n:"");e.setValue(t,"qCalcCondition.qMsg.qv",n)}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(463)],r=function(e,t){e.component("quiFloat",{transclude:true,template:t,scope:{quiOffset:"=",quiResizeOnChange:"="},controller:["$scope","$element","$timeout",function(e,t,n){function i(){if(!e.quiOffset||!e.reportedSize||!e.reportedWindowSize)e.visible=false;else{e.quiOffset.left+e.reportedSize.width<e.reportedWindowSize.width?e.left=e.quiOffset.left:e.left=e.reportedWindowSize.width-e.reportedSize.width;e.quiOffset.top+e.reportedSize.height<e.reportedWindowSize.height?e.top=e.quiOffset.top:e.top=e.reportedWindowSize.height-e.reportedSize.height;e.visible=true}}function r(){n(function(){e.reportedSize={width:t.outerWidth(),height:t.outerHeight()}})}e.$watch("quiResizeOnChange",r,true);e.$watch("[quiOffset, reportedSize, reportedWindowSize]",i,true)}]})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qui-float" ng-style="{top:top, left:left}" ng-show="visible" qva-reported-window-size="reportedWindowSize">\n\t<div ng-transclude></div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(465),n(466)],r=function(e,t,n){e.component("quiInputNumber",{template:n,scope:{quiModel:"=",quiDisabled:"=",quiTitle:"@",quiMin:"@",quiMax:"@",quiClass:"@",quiSelectTextOnFocus:"@",quiWithButtons:"@",quiTid:"@"},controller:["$scope","$element",function(e,n){if(e.quiSelectTextOnFocus){e.selected=false;n.click(function(){if(false===e.selected){n.select();e.selected=true}});n.blur(function(){e.selected=false})}e.onChange=function(i){var r=parseInt(i)||0;e.quiModel=t.getNumerical(parseInt(n.find(".lui-input").val())+r,e.quiMin,e.quiMax)}}]})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){return Number(String(e).replace(/[^-\d]/g,""))}return{getNumerical:function t(n,i,r){n=e(n);i=Number(i);r=Number(r);if(n<i)return i;if(0!==r&&n>r)return r;return n}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<span class="qui-input-number lui-input-group">\n\t<button class="lui-input-group__item  lui-input-group__button  lui-button" qva-activate="onChange(-1)" ng-disabled="quiDisabled" ng-if="quiWithButtons">\n\t\t<span class="lui-button__icon">-</span>\n\t</button>\n\t<input type="tel" class="lui-input-group__item  lui-input-group__input  lui-input {{quiClass}}" tid="{{quiTid}}" title="{{quiTitle}}" ng-model="quiModel" ng-model-options="{ updateOn: \'blur\' }" ng-change="onChange()" ng-disabled="quiDisabled"/>\n\t<button class="lui-input-group__item  lui-input-group__button  lui-button" qva-activate="onChange(1)" ng-disabled="quiDisabled" ng-if="quiWithButtons">\n\t\t<span class="lui-button__icon">+</span>\n\t</button>\n</span>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(119),n(468),n(469),n(470)],r=function(e,t,n,i){var r={TAB:9};function o(e){return e.parents(".popover-container").length?e.parents(".popover-container")[0]:null}function a(t,n,i){return t.which===r.TAB&&t.target!==n.alignTo&&e(t.target).closest(".lui-popover-container")[0]!==i[0]}var s={template:i,scope:{quiModel:"=",shared:"=",close:"="},controller:["$scope","$element","$document",function(e,t,n){e.menuClasses=e.quiModel.menuOptions.content.menuClasses?e.quiModel.menuOptions.content.menuClasses:"qui-textlist";e.quiModel.menuOptions.content.createMenuItems().then(function(t){e.menuItems=t});e.selectMenuItem=function(t,n,i){n&&n.preventDefault&&n.preventDefault();if(!t.disable){e.close&&e.close();t.selected(n,i)}};n.on("keyup.qv-popover",function(n){o(t)&&a(n,e,t)&&e.close&&e.close()});e.$on("$destroy",function(){n.off("keyup.qv-popover")})}]};t.directive("qvPopoverButton",function(){return{template:n,transclude:true,replace:true,restrict:"E",scope:{quiModel:"=",quiPopoverContainer:"=?"},controller:["$scope","$element","luiPopover","qvMobileMenu",function(e,t,n,i){var r;e.shared={pressed:false};e.onClick=function(){if(e.shared.pressed&&r){r.close();return}e.shared.pressed=!e.shared.pressed;var a=e.quiModel.menuOptions||{};r=a.smallview?i.show({controller:s.controller,template:s.template,autoFocus:false,closeOnResize:true,outsideIgnore:e.quiModel.tid,input:{quiModel:e.quiModel,shared:e.shared,close:function e(){r.close()}}}):n.show({controller:s.controller,template:s.template,dock:"bottom",alignTo:t[0],autoFocus:false,closeOnResize:true,outsideIgnore:e.quiModel.tid,container:o(t),input:{quiModel:e.quiModel,shared:e.shared,close:function e(){r.close()}}});r.closed.then(function(){e.shared.pressed=false})};e.$watch("shared.pressed",function(t){e.currentTitle=t&&e.quiModel.tooltipActive?e.quiModel.tooltipActive:e.quiModel.tooltipInactive})}]}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<button\n\t\ttid="{{quiModel.tid}}"\n\t\tng-disabled="quiModel.isDisabled()"\n\t\tng-class="[quiModel.buttonClass, quiModel.buttonVariant, {\'lui-active\': shared.pressed }]"\n\t\tq-title-translation="{{currentTitle}}"\n\t\tqva-outside-ignore-for="{{quiModel.tid}}"\n\t\tng-click="onClick()">\n\t<span class="{{quiModel.buttonClass}}__icon lui-icon  lui-icon--{{quiModel.icon}}  {{quiModel.menuOptions.smallview ? \'lui-icon--large\' : \'\'}}"></span>\n\t<span class="{{quiModel.buttonClass}}__text" ng-if="quiModel.buttonText">\n\t\t{{quiModel.buttonText}}\n\t</span>\n\t<span ng-if="!quiModel.hideCaret" class="{{quiModel.buttonClass}}__caret  lui-caret"></span>\n</button>\n'},function(e,t){e.exports='<lui-popover ng-style="{ width: quiModel.menuOptions.width }">\n\t<ul ng-class="menuClasses" tid="{{quiModel.menuOptions.content.tid}}">\n\t\t<li class="lui-list__item"\n\t\t\tng-repeat="menuItem in menuItems"\n\t\t\tng-class="{\'open-in-new-tab-always\': menuItem.openInNewTab == \'always\', \'lui-disabled\': menuItem.disable, \'header-item\': menuItem.headerItem, \'last-menu-item\' : menuItem.last}"\n\t\t\tng-hide="menuItem.hide">\n\n\t\t\t<qv-menu-switch tid="{{menuItem.tid}}" x-model="menuItem" callback="selectMenuItem(menuItem, $event)" ng-if="menuItem.showSwitch"/>\n\n\t\t\t<button tid="{{menuItem.tid}}"\n\t\t\t\t class="action-item"\n\t\t\t\t ng-class="[quiModel.buttonClass, quiModel.buttonVariant]"\n\t\t\t\t ng-click="selectMenuItem(menuItem, $event)"\n\t\t\t\t q-title-translation="{{ menuItem.title || menuItem.text}}"\n\t\t\t\t ng-disabled="menuItem.disable"\n\t\t\t\t ng-if="!menuItem.showSwitch">\n\t\t\t\t<span ng-if="menuItem.icon"\tclass="lui-list__aside">\n\t\t\t\t\t<span class="lui-icon  lui-icon--{{menuItem.icon}}" ng-disabled="menuItem.disable"></span>\n\t\t\t\t</span>\n\t\t\t\t<span class="lui-list__text menu-item-text"\n\t\t\t\t\t  q-translation="{{menuItem.text}}"\n\t\t\t\t\t  ng-class="{\'open-in-new-tab-text-optional\': menuItem.openInNewTab == \'optional\', \'open-in-new-tab-always\': menuItem.openInNewTab == \'always\'}" aria-hidden="true">\n\t\t\t\t</span>\n\t\t\t</button>\n\t\t\t<div class="list-divider" ng-if="menuItem.openInNewTab === \'optional\'"></div>\n\t\t\t<button ng-if="menuItem.openInNewTab" class="lui-fade-button"\n\t\t\t\t\tng-class="[quiModel.buttonClass, quiModel.buttonVariant]"\n\t\t\t\t\tq-title-translation="{{ menuItem.title || \'Tooltip.OpenInNewTab\'}}"\n\t\t\t\t\tng-click="selectMenuItem(menuItem, $event, \'true\')"\n\t\t\t\t\tng-disabled="menuItem.disable" tabindex="-1">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--new-tab"></span>\n\t\t\t</button>\n\t\t</li>\n\t</ul>\n</lui-popover>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(471)],r=function(e,t){e.directive("qvMenuSwitch",function(){return{template:t,scope:{model:"=",callback:"&"},link:function e(t){t.switchValue=t.model.value;t.$watch("switchValue",function(e,n){void 0!==e&&e!==n&&t.callback()})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="menu-switch-component" tcl="switch" q-title-translation="{{ model.text }}">\n    <span ng-if="model.icon" class="lui-list__aside switch_icon">\n        <span class="lui-icon  lui-icon--{{model.icon}}" ng-disabled="model.disable"></span>\n    </span>\n    <span class="label" ng-disabled="readOnly">\n        <div class="title" q-translation="{{ model.text }}"></div>\n        <div class="value" q-translation="{{ model.label() }}"></div>\n    </span>\n    <lui-switch x-model="switchValue"/>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(119),n(11),n(473),n(474),n(51),n(97)],r=function(e,t,n,i,r,o){var a={template:i,scope:{quiModel:"=",alignTo:"=",shared:"="},controller:["$scope",function(e){e.shared.destroyComponent=e.destroyComponent;e.menuClasses=e.quiModel.menuOptions.content.menuClasses?e.quiModel.menuOptions.content.menuClasses:"qui-textlist";e.quiModel.menuOptions.content.createMenuItems().then(function(t){e.menuItems=t});e.selectMenuItem=function(t,n,i){n&&n.preventDefault&&n.preventDefault();if(!t.disable){e.onClose&&e.onClose(n);t.selected(n,i)}};e.onClose=function(n){if(!t(n.target).hasClass("qui-popover-button")||e.quiModel.tid!==t(n.target).attr("tid")){e.destroyComponent();e.shared.pressed=false}};e.closeFromContent=function(){e.destroyComponent();e.shared.pressed=false};e.$on("$destroy",function(){o.off("start",e.onClose)});o.on("start",e.onClose)}]};e.directive("quiPopoverButton",function(){return{template:n,transclude:true,replace:true,restrict:"E",scope:{quiModel:"=",quiPopoverContainer:"=?"},controller:["$scope","$element",function(e,t){var n={ENTER:13,SPACE:32};e.shared={};e.shared.pressed=false;e.$watch("shared.pressed",function(t){e.currentTitle=t&&e.quiModel.tooltipActive?e.quiModel.tooltipActive:e.quiModel.tooltipInactive});t.on("keypress",function(t){t.keyCode!==n.ENTER&&t.keyCode!==n.SPACE||e.onClick()});e.onClick=function(){if(e.shared.pressed){if(e.shared.destroyComponent){e.shared.destroyComponent();e.shared.pressed=false}}else{e.shared.pressed=true;r.show(e.quiPopoverContainer||a,{quiModel:e.quiModel,alignTo:t,shared:e.shared})}};e.quiModel&&(e.quiModel.forceClick=e.onClick)}]}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<button\n\t\ttid="{{quiModel.tid}}"\n\t\tng-disabled="quiModel.isDisabled()"\n\t\tng-class="[quiModel.buttonClass, quiModel.buttonVariant, {\'lui-active\': shared.pressed }]"\n\t\tq-title-translation="{{currentTitle}}"\n\t\tqva-outside-ignore-for="{{quiModel.tid}}"\n\t\tng-click="onClick()">\n\t<span ng-if="!quiModel.hideIcon" class="{{quiModel.buttonClass}}__icon lui-icon  lui-icon--{{quiModel.icon}}  {{quiModel.menuOptions.smallview ? \'lui-icon--large\' : \'\'}}"></span>\n\t<span class="{{quiModel.buttonClass}}__text" ng-if="quiModel.buttonText">\n\t\t{{quiModel.buttonText}}\n\t</span>\n\t<span ng-if="!quiModel.hideCaret" class="{{quiModel.buttonClass}}__caret  lui-caret"></span>\n</button>\n'},function(e,t){e.exports='<immidiate-contextual align-to="alignTo"\n\t\t\t\t\t  smallview="quiModel.menuOptions.smallview"\n\t\t\t\t\t  position="quiModel.menuOptions.position"\n\t\t\t\t\t  width="quiModel.menuOptions.width"\n\t\t\t\t\t  top="quiModel.menuOptions.top"\n\t\t\t\t\t  lui-style="true"\n\t\t\t\t\t  no-padding="true"\n\t\t\t\t\t  hidepointer="quiModel.menuOptions.hidepointer"\n\t\t\t\t\t\tqva-outside-ignore-for="{{quiModel.tid}}"\n\t\t\t\t\t  on-close-view="onClose(event)">\n\t<ul ng-class="menuClasses" tid="{{quiModel.menuOptions.content.tid}}">\n\t\t<li class="lui-list__item" ng-repeat="menuItem in menuItems" ng-disabled="menuItem.disable" qui-click=\'menuItem.fn()\'\n\t\t\tng-class="{\'open-in-new-tab-always\': menuItem.openInNewTab == \'always\'}" ng-hide="menuItem.hide">\n\t\t\t<span ng-if="menuItem.icon" class="lui-list__aside">\n\t\t\t\t<span class="lui-icon  lui-icon--{{menuItem.icon}}"></span>\n\t\t\t</span>\n\t\t\t<span class="lui-list__text menu-item-text"\n\t\t\t\t  tid="{{menuItem.tid}}"\n\t\t\t\t  q-title-translation="{{ menuItem.title || menuItem.text}}"\n\t\t\t\t  ng-class="{\'open-in-new-tab-text-optional\': menuItem.openInNewTab == \'optional\', \'open-in-new-tab-always\': menuItem.openInNewTab == \'always\'}"\n\t\t\t\t  qva-activate="selectMenuItem(menuItem, $event)" q-translation="{{menuItem.text}}" ng-disabled="menuItem.disable">\n\t\t\t</span>\n\t\t\t<div class="list-divider" ng-if="menuItem.openInNewTab === \'optional\'"></div>\n\t\t\t<button ng-if="menuItem.openInNewTab" class="lui-fade-button  open-in-new-tab" ng-class="{\'open-in-new-tab-always\': menuItem.openInNewTab == \'always\'}" q-title-translation="{{ menuItem.title || \'Tooltip.OpenInNewTab\'}}" qva-activate="selectMenuItem(menuItem, $event, \'true\')" ng-disabled="menuItem.disable">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--new-tab"></span>\n\t\t\t</button>\n\t\t</li>\n\t</ul>\n</immidiate-contextual>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(49),n(476),n(477)],r=function(e,t,n,i,r){t.component("quiToolbar",{template:"<div class='qui-toolbar' ng-transclude />"});t.component("quiToolbarLeft",{template:"<div class='qui-buttonset-left' ng-transclude />"});t.component("quiToolbarRight",{template:"<div class='qui-buttonset-right' ng-transclude />"});t.component("quiToolbarButtonGroup",{template:"<div class='lui-buttongroup' ng-transclude />"});t.component("quiToolbarButton",{template:i,scope:{quiModel:"="},controller:["$scope",function(t){t.isMouseDown=false;t.onMouseDown=function(){t.isMouseDown=true};t.clientTabNavigation=n.getFlag("CLIENT_TAB_NAVIGATION");t.onButton=function(n){e.support.touch&&n.target.focus();t.quiModel.isToggleButton&&(t.quiModel.pressed=!t.quiModel.pressed);t.quiModel.isOpenedByClick=t.isMouseDown;t.isMouseDown=false;t.quiModel.onButtonClicked(t.quiModel,n)};function i(){var e=[];var n=t.quiModel;n.pressed?n.activeVariant?e.push(n.activeVariant):e.push("lui-active"):n.variant?e.push(n.variant):t.clientTabNavigation||e.push("lui-button--toolbar");t.classList=e}t.$watch("quiModel.pressed",i);t.$watch("quiModel.variant",i);t.$watch("quiModel.activeVariant",i);i()}]});t.component("quiToolbarMobileButton",{template:r,scope:{quiModel:"="},controller:["$scope",function(t){t.onButton=function(n){e.support.touch&&n.target.focus();t.quiModel.isToggleButton&&(t.quiModel.pressed=!t.quiModel.pressed);t.quiModel.onButtonClicked(t.quiModel,n)}}]})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<button\n\t\ttid="{{quiModel.tid}}"\n\t\tng-click="onButton($event)"\n\t\tng-mousedown="onMouseDown()"\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tq-title-translation="{{(quiModel.pressed && quiModel.tooltipActive ? quiModel.tooltipActive : quiModel.tooltipInactive)}}"\n\t\tng-disabled="quiModel.isDisabled()"\n\t\tng-hide="quiModel.isHidden()"\n\t\tclass="lui-button"\n\t\ttext-inactive="{{quiModel.textInactive ? quiModel.textInactive : \'\'}}"\n\t\tng-class="classList">\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tng-if="quiModel.icon && quiModel.iconToTheLeft"\n\t\tclass="lui-button__icon  lui-icon  lui-icon--{{quiModel.icon}} center"\n\t></span>\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tng-if="!quiModel.dynamicText && quiModel.showText()"\n\t\tclass="lui-button__text  item-title"\n\t\tqva-direction\n\t\tx-dir-text="{{(quiModel.pressed && quiModel.textActive ? quiModel.textActive : quiModel.textInactive) | translate}}"\n\t>\n\t\t{{(quiModel.pressed && quiModel.textActive ? quiModel.textActive : quiModel.textInactive) | translate}}\n\t</span>\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tng-if="quiModel.icon && !quiModel.iconToTheLeft"\n\t\tclass="lui-button__icon  lui-icon  lui-icon--{{quiModel.icon}} center"\n\t></span>\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tng-if="!quiModel.dynamicText && !quiModel.textOnly && quiModel.isDropdownButton"\n\t\tclass="lui-button__caret  lui-caret"\n\t></span>\n\t<span class="lui-button__text" qva-outside-ignore-for="{{quiModel.name}}" ng-if="quiModel.dynamicText">\n\t\t{{ quiModel.dynamicText() }}\n\t</span>\n</button>\n'},function(e,t){e.exports='<button\n\t\ttid="{{quiModel.tid}}"\n\t\tng-click="onButton($event)"\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tq-title-translation="{{(quiModel.pressed && quiModel.tooltipActive ? quiModel.tooltipActive : quiModel.tooltipInactive)}}"\n\t\tng-disabled="quiModel.isDisabled()"\n\t\tng-hide="quiModel.isHidden()"\n\t\tclass="lui-fade-button lui-fade-button--large lui-fade-button--inverse"\n\t\tng-class="{ \'lui-active\': quiModel.pressed }">\n\t<span qva-outside-ignore-for="{{quiModel.name}}" ng-if="!quiModel.dynamicText && quiModel.showText()"\n\t\tclass="lui-fade-button__text  item-title"\n\t\tqva-direction\n\t\tx-dir-text="{{(quiModel.pressed && quiModel.textActive ? quiModel.textActive : quiModel.textInactive) | translate}}">\n\t\t{{(quiModel.pressed && quiModel.textActive ? quiModel.textActive : quiModel.textInactive) | translate}}\n\t</span>\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tng-if="!quiModel.dynamicText && !quiModel.textOnly"\n\t\tclass="lui-fade-button__icon  lui-icon  lui-icon--large  lui-icon--{{quiModel.icon}}"></span>\n\t<span\n\t\tqva-outside-ignore-for="{{quiModel.name}}"\n\t\tclass="lui-fade-button__text"\n\t\tng-if="quiModel.dynamicText">{{ quiModel.dynamicText() }}</span>\n</button>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(91)],r=function(e){var t=[],n=[{tid:"Print.Ppt.Format.Standard",w:4,h:3},{tid:"Print.Ppt.Format.Widescreen",w:16,h:9},{tid:"Print.Ppt.Format.Widescreen",w:16,h:10},{tid:"Print.Ppt.Format.Custom"}];var i=function e(t,n){this.ratio=t||{};this.isCustom=n||false};i.prototype={toPixels:function e(t){var n=parseInt(t)||960;var i=n/this.ratio.w*this.ratio.h;return{w:Math.round(n),h:Math.round(i)}},setLabel:function t(){var n=this;e.ready.then(function(){var t=e.get(n.ratio.tid);n.label=t;n.ratio.w&&n.ratio.h&&(n.label+=" "+n.ratio.w+":"+n.ratio.h)})}};var r=n.length;for(var o=0;o<r;o++){var a=new i(n[o]);3===o&&(a.isCustom=true);t.push(a)}t.forEach(function(e){e.setLabel("portrait")});return{formats:t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-dialog id="print-dialog" tcl="print-image-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="lui-buttongroup">\n\t\t\t\t<button class="lui-button" tid="print-current-size" ng-class="{ \'lui-active\': ! imageCustomSize }" q-translation="Print.Image.CurrentSize" ng-click="onImageCustomSize(false)" ng-disabled="state === states.PENDING"></button>\n\t\t\t\t<button class="lui-button" tid="print-custom-size"  ng-class="{ \'lui-active\': imageCustomSize }" q-translation="Common.Custom" ng-click="onImageCustomSize(true)" ng-disabled="state === states.PENDING"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section" ng-show="! imageCustomSize">\n\t\t\t{{input.currentWidth}} x {{input.currentHeight}} px @ 96 dpi</span>\n\t\t</div>\n\n\t\t<div class="section" ng-show="imageCustomSize">\n\t\t\t<div class="section-title" q-translation="Print.Image.Width"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-image-width"\n\t\t\t\t\t\tqui-model="print.width" qui-disabled="state === states.PENDING" qui-min="0" qui-max="2000" qui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section" ng-show="imageCustomSize">\n\t\t\t<div class="section-title" q-translation="Print.Image.Height"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-image-height"\n\t\t\t\t\t\tqui-model="print.height" qui-disabled="state === states.PENDING" qui-min="0" qui-max="2000" qui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section" ng-show="imageCustomSize">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-image-dpi"\n\t\t\t\t\t\tqui-model="print.dpi" qui-disabled="state === states.PENDING" qui-min="0" qui-max="300" qui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Format"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<div class="component-wrapper">\n\t\t\t\t\t<lui-select\n\t\t\t\t\t\t\tx-model="print.format"\n\t\t\t\t\t\t\tx-options="f as f for f in availableFormats"\n\t\t\t\t\t\t\tx-disabled="state === states.PENDING"\n\t\t\t\t\t\t\ttid="print-image-selected-format"></lui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-if="!usingReportingService" ng-href="{{printUrl}}" target="_blank" q-translation="Print.Image.CompletedLink"></a>\n\t\t\t\t<a ng-if="usingReportingService" ng-href="{{printUrl}}" target="_blank" q-translation="Print.Image.CompletedLink" download="{{printFileName}}"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING" tid="print-export"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(e,t){e.exports='<lui-dialog id="print-dialog" tcl="print-pdf-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.PaperSize"></div>\n\t\t\t<div class="component-wrapper">\n\t\t\t\t<lui-select\n\t\t\t\t\t\ttid="print-paper-size"\n\t\t\t\t\t\tx-model="selectedSize"\n\t\t\t\t\t\tx-disabled="state === states.PENDING"\n\t\t\t\t\t\tx-options="size.label for size in sizes"\n\t\t\t\t\t\tx-change="onSizeChange(selectedSize)"\n\t\t\t\t\t\tx-disabled="state === states.PENDING">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-pdf-dpi"\n\t\t\t\t\t\tqui-model="print.dpi"\n\t\t\t\t\t\tqui-disabled="state === states.PENDING"\n\t\t\t\t\t\tqui-min="{{minDpi}}"\n\t\t\t\t\t\tqui-max="{{maxDpi}}"\n\t\t\t\t\t\tqui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout"></div>\n\t\t\t<div class="lui-buttongroup">\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\ttid="print-orientation-portrait"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'portrait\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Portrait"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[0])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\tid="print-orientation-landscape"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'landscape\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Landscape"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[1])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout.Aspect"></div>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-current-size"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="0"\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.CurrentSize\' | translate }}</lui-radiobutton>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-fit-page"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="2"\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.BestFitNoPreserveAspectRatio\' | translate }}</lui-radiobutton>\n\t\t</div>\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-href="{{printUrl}}" target="_blank" q-translation="Print.Pdf.CompletedLink"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING" tid="print-export"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(e,t){e.exports='<lui-dialog id="print-dialog" tcl="print-ppt-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Ppt.Format"></div>\n\t\t\t<div class="component-wrapper">\n\t\t\t\t<lui-select\n\t\t\t\t\ttid="print-ppt-selected-size"\n\t\t\t\t\tx-model="selectedFormat"\n\t\t\t\t\tx-options="f.label for f in formats"\n\t\t\t\t\tx-change="onPptFormatChange(selectedFormat)">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section" ng-show="selectedFormat.isCustom">\n\t\t\t<div class="section-title" q-translation="Print.Image.Width"></div>\n\t\t\t<qui-input-number\n\t\t\t\tqui-tid="print-ppt-width"\n\t\t\t\tqui-model="print.width" qui-min="0" qui-max="4000" qui-with-buttons="true"></qui-input-number>\n\t\t</div>\n\n\n\t\t<div class="section" ng-show="selectedFormat.isCustom">\n\t\t\t<div class="section-title" q-translation="Print.Image.Height"></div>\n\t\t\t<qui-input-number\n\t\t\t\tqui-tid="print-ppt-height"\n\t\t\t\tqui-model="print.height" qui-min="0" qui-max="4000" qui-with-buttons="true"></qui-input-number>\n\t\t</div>\n\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-ppt-dpi">\n\t\t\t\t<div class="component-wrapper">\n\t\t\t\t\t<lui-select\n\t\t\t\t\t\ttid="print-ppt-dpi"\n\t\t\t\t\t\tx-model="print.dpi"\n\t\t\t\t\t\tx-options="d as d for d in availablePptDpi">\n\t\t\t\t\t</lui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="section">\n\t\t\t{{print.width}} x {{print.height}} px @ {{print.dpi}} dpi\n\t\t</div>\n\t\t\x3c!--\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Ppt.CurrentSlideSize"></div>\n\t\t\t<p>\n\t\t\t{{print.currentWidth}} x {{print.currentHeight}} px @ {{print.currentDpi}} dpi\n\t\t\t</p>\n\t\t</div>\n\t\t--\x3e\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-href="{{printUrl}}" target="_blank" q-translation="Print.Ppt.CompletedLink"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(e,t){e.exports='<lui-dialog id="print-dialog" tcl="print-pdf-settings">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title q-translation="{{input.title}}"></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="print-dialog">\n\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.PaperSize"></div>\n\t\t\t<div class="component-wrapper">\n\t\t\t\t<lui-select\n\t\t\t\t\t\ttid="print-paper-size"\n\t\t\t\t\t\tx-model="selectedSize"\n\t\t\t\t\t\tx-disabled="state === states.PENDING"\n\t\t\t\t\t\tx-options="size.label for size in sizes"\n\t\t\t\t\t\tx-change="onSizeChange(selectedSize)"\n\t\t\t\t\t\tx-disabled="state === states.PENDING">\n\t\t\t\t</lui-select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Image.Dpi"></div>\n\t\t\t<div class="print-image">\n\t\t\t\t<qui-input-number\n\t\t\t\t\t\tqui-tid="print-pdf-dpi"\n\t\t\t\t\t\tqui-model="print.dpi"\n\t\t\t\t\t\tqui-disabled="state === states.PENDING"\n\t\t\t\t\t\tqui-min="0"\n\t\t\t\t\t\tqui-max="300"\n\t\t\t\t\t\tqui-with-buttons="true"></qui-input-number>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout"></div>\n\t\t\t<div class="lui-buttongroup">\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\ttid="print-orientation-portrait"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'portrait\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Portrait"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[0])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t\t<button class="lui-button"\n\t\t\t\t\t\tid="print-orientation-landscape"\n\t\t\t\t\t\tng-class="{ \'lui-active\': \'landscape\' === selectedLayout.orientation }"\n\t\t\t\t\t\tq-translation="Print.Landscape"\n\t\t\t\t\t\tng-click="onPrintLayout(layouts[1])"\n\t\t\t\t\t\tng-disabled="state === states.PENDING"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="section">\n\t\t\t<div class="section-title" q-translation="Print.Layout.Aspect"></div>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-current-size"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="0"\n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.CurrentSize\' | translate }}</lui-radiobutton>\n\t\t\t<lui-radiobutton class="print-dialog-radio-single"\n\t\t\t\t\t\t\t tid="print-aspect-fit-page"\n\t\t\t\t\t\t\t x-name="print-aspect"\n\t\t\t\t\t\t\t x-model="print.fitCriteria"\n\t\t\t\t\t\t\t x-value="2"\n\t\t\t\t\t\t\t x-disabled="state === states.PENDING">{{ \'Print.Layout.BestFitNoPreserveAspectRatio\' | translate }}</lui-radiobutton>\n\t\t</div>\n\t\t<div ng-if="state === states.PENDING" class="loading-screen">\n\t\t\t<div class="spinner">\n\t\t\t\t<div class="qv-loader"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.COMPLETED">\n\t\t\t<div class="section">\n\t\t\t\t<a ng-href="{{printUrl}}" target="_blank" q-translation="Print.Pdf.CompletedLink"></a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.TIMEOUT">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.TimeoutMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="state === states.FAILED">\n\t\t\t<div class="section">\n\t\t\t\t<p class="dm-p" q-translation="Print.Failed.GenericMessage"></p>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); close()" name="cancel" q-translation="Common.Cancel" tid="print-cancel"></lui-button>\n\t\t<lui-button ng-click="$event.preventDefault(); confirm(exportType)" name="confirm" autofocus q-translation="Print.Download" ng-disabled="state === states.PENDING" tid="print-export"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(160),n(101),n(385)],r=function(e,t,n){var i=["scatterplot","map"],r=["map"];return{baseColor:{isSupported:function e(t){return t&&t.length&&-1===i.indexOf(t)},isDimSupported:function e(t){return t&&t.length&&-1!==r.indexOf(t)}},colorBy:{},colorByUpdater:function e(t,n,i,r){this.updateColorDef(t,r,i);this.updateHypercubeAttributes(t,n,i)},updateColorDef:function i(r,o,a){var s=t.getValue(a,"mode");var c=t.getValue(a,"auto");var d=t.getValue(r,o+"qDimensions",[]);var f=t.getValue(r,o+"qMeasures",[]);var p,h,v,g;if(!c&&"byDimension"===s&&d.length){p=t.getValue(a,"byDimDef");p&&u(a,p.label);if(p&&p.activeDimensionIndex>-1){p.activeDimensionIndex=Math.min(p.activeDimensionIndex,d.length-1);h=d[p.activeDimensionIndex];g=n.getColorByDefinition("dimension",false,h);g.activeDimensionIndex=p.activeDimensionIndex;l(a,g)}else if(!p||!p.key){h=d[d.length-1];v=e.getById(h.qAttributeDimensions,e.IDMAP.COLOR_BY_ALTERNATIVE);l(a,n.getColorByDefinition("dimension",!!v,v||h))}}else if(!c&&"byMeasure"===s&&d.length){p=t.getValue(a,"byMeasureDef");p&&u(a,p.label);if((!p||!p.key)&&f.length){var m=f[0];h=d[d.length-1];v=e.getById(h.qAttributeExpressions,e.IDMAP.COLOR_BY_ALTERNATIVE);l(a,n.getColorByDefinition("measure",!!v,v||m))}}else"byMultiple"===s&&f.length<2&&t.setValue(a,"mode","primary")},updateHypercubeAttributes:function e(n,i,r){var a=t.getValue(r,"mode");var s=t.getValue(r,"auto");var l=t.getValue(n,i+"qDimensions",[]);var u=t.getValue(n,i+"qMeasures",[]);var d=t.getValue(n,i+"qLayoutExclude.qHyperCubeDef.qDimensions",[]);!s&&"byDimension"===a&&l.length?c(r,true,l,d,u,t.getValue(r,"byDimDef.label")):!s&&"byMeasure"===a&&l.length?c(r,false,l,d,u,t.getValue(r,"byMeasureDef.label")):o(l,d)},setColorByPropertyDef:l,resolveColorByPropertyDef:c,clearColorByItem:o};function o(t,n){t.forEach(function(t){a(t,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeDimensions");a(t,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeExpressions")});n.forEach(function(t){a(t,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeDimensions");a(t,e.IDMAP.COLOR_BY_ALTERNATIVE,"qAttributeExpressions")})}function a(t,n,i){if(t[i]){var r=e.getIndexById(t[i],n);r>=0&&t[i].splice(r,1)}else t[i]=[]}function s(e){return e.split(" ").length>1&&"="!==e[0]&&"["!==e[0]?"["+e+"]":e}function l(e,t,n,i){var r=n?"expression":t.type,o=e.mode,a=t.label||t.name||"";u(e,a);switch(r){case"field":o="byDimension";e.byDimDef={label:t.label||s(t.name),key:s(t.name),type:"expression",activeDimensionIndex:t.activeDimensionIndex};break;case"expression":o="byMeasure";e.byMeasureDef={label:n||t.label||t.name,key:n||t.name,type:"expression"};break;case"dimension":o="byDimension";e.byDimDef={label:t.name,key:t.id,type:"libraryItem",activeDimensionIndex:t.activeDimensionIndex};break;case"measure":o="byMeasure";e.byMeasureDef={label:t.name,key:t.id,type:"libraryItem"};break}if(!i){e.auto=false;e.mode=o}}function c(n,i,r,a,s,l){o(r,a);var c=r[r.length-1];if(c){var u=i?t.getValue(n,"byDimDef"):t.getValue(n,"byMeasureDef");if(u){var d=e.create(e.IDMAP.COLOR_BY_ALTERNATIVE);switch(u.type){case"expression":d.label=l||u.label;i?d.qDef=u.key:d.qExpression=u.key;break;case"libraryItem":if(!i){var f=-1;s.forEach(function(e,t){u.key===e.qLibraryId&&(f=t)});d.matchMeasure=f}d.qLibraryId=u.key;d.colorMapRef=u.key;break}if(i){d.qSortBy={qSortByAscii:1};c.qAttributeDimensions.push(d)}else c.qAttributeExpressions.push(d)}}}function u(e,t){if(!t)return;var n="="===t.charAt(0);e.altLabel=n?{qStringExpression:{qExpr:t.substr(1)}}:t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(138),n(485),n(105),n(91)],r=function(e,t,n,i,r){e.directive("circleChart",function(){return{scope:{model:"="},restrict:"E",replace:true,template:n,controller:["$scope","$element","$timeout",function(e,n,o){var a=n.find(".circular-bar");e.radius=50;e.arcValue="M50 0 A 50 50, 0, 0, 1, 0 0, L 50 50 z";function s(){if(f()){var t=a.height();var n=a.width();if(t<n){e.radius=t/2;e.svgPos={height:t,width:t,top:0,left:n/2-t/2}}else{e.radius=n/2;e.svgPos={height:n,width:n,top:t/2-n/2,left:0}}}d()}function l(e,t,n,i){var r=(i-90)*Math.PI/180;return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}function c(e,t,n,i,r){var o=l(e,t,n,r);var a=l(e,t,n,i);var s=r-i<=180?"0":"1";var c=["M",o.x,o.y,"A",n,n,0,s,0,a.x,a.y].join(" ");return c}function u(e){return 3.6*e}function d(){var n=0;if(e.model.chartValue)n=e.model.chartValue;else if(e.model.numerator&&e.model.denominator){n=0===e.model.denominator?0:e.model.numerator/e.model.denominator;n*=100}if(n>0&&n<1){var i=t.format.number(0,{style:"percent"});e.chartPercentageValue=r.get("CircleChart.ChartPercentageValue.LessThanOne",i)}else e.chartPercentageValue=t.format.number(Math.round(n)/100,{style:"percent"});var o=e.radius;var a=8;var s=0;if(e.model.chartValueSubText){a=-3;s=17}e.percentagePos={x:o,y:o+a};e.subtextPos={x:o,y:o+s};var l=100===n?99.99:n,d=l;d||(d=0);e.arcValue=c(o,o,o-5,0,u(d))}function f(){return a.height()>0||a.width()>0}e.$on(i.Events.EditorDetailsPane.ResizeChart,function(){s()});e.$watch("model",function(){d()});f()?s():o(function(){s()})}]}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="ds-visualization-circle-chart">\n\t<div class="chart-heading">{{ model.header }}</div>\n\n\t<div class="circular-bar">\n\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" ng-style="svgPos">\n\t\t\t<g class="arcs">\n\t\t\t\t<circle ng-attr-cx="{{radius}}" ng-attr-cy="{{radius}}" ng-attr-r="{{radius}}" class="outer-circle" />\n\t\t\t\t <path ng-attr-d="{{arcValue}}" class="outer-arc" tid="circle-chart-arc1" /> \n\t\t\t\t<circle ng-attr-cx="{{radius}}" ng-attr-cy="{{radius}}" ng-attr-r="{{radius - 10}}" class="inner-circle"  />\n\t\t\t</g>\n\t\t\t<text ng-attr-x="{{percentagePos.x}}" ng-attr-y="{{percentagePos.y}}" class="percentage-label">{{ chartPercentageValue }}</text>\n\t\t\t<text ng-attr-x="{{subtextPos.x}}" ng-attr-y="{{subtextPos.y}}" class="percentage-subtext-label">{{ model.chartValueSubText }}</text>\n\t\t</svg>\n\t</div>\n\n\t<div class="chart-footer">{{ model.footer }}</div>\n</div>\n\n'},,,,,function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(91),n(110),n(213)],r=function(e,t,n,i,r){var o=false;var a=i.LocalizedWarningCode;var s=[];var l={code:a.LOCWARN_PERSONAL_VERSION_EXPIRES_SOON,id:"ExpireWarningShown",shown:Date.now()<parseInt(localStorage.ExpireWarningShown,10),interval:864e5};var c={code:a.LOCWARN_PERSONAL_RELOAD_REQUIRED,id:"HiddenScriptWarningShown",shown:sessionStorage.HiddenScriptWarningShown};function u(e,t){var n=-1;for(var i=0;i<e.length;i++)if(e[i].code===t){n=i;break}return n}function d(e,t){if(t.shown){var n=u(e,t.code);-1!==n&&e.splice(n,1)}else if(-1!==u(e,t.code)){t.shown=true;t.interval?localStorage.setItem(t.id,Date.now()+t.interval):sessionStorage.setItem(t.id,true)}}function f(){o=true}function p(){o=!!s.length;s.length&&v()}function h(e,n){var i='<h2 class="inline-title">'+e+"</h2><span>"+n+"</span>";var r=t.getService("qvAlertDialog").show({message:i,closeOnEscape:true});r.opened.then(f);r.closing.then(p)}function v(){var e;var t;var i=s.shift();if("undefined"!==typeof i.code&&i.code===a.LOCWARN_PERSONAL_VERSION_EXPIRES_SOON){t=n.get("Info.QlikSenseDesktop.Upgrade.Expiring",["<a href='"+r.personalUpgradeUrl+"' target='_blank'>"+r.personalUpgradeBase+"</a>"]);e=n.get("Info.QlikSenseDesktop.Upgrade.Expiring.Title")}else{e=n.get("WarningDialog.Title");t="undefined"!==typeof i.code?n.get("WarningCode."+i.code):n.get(i.message)}h(e,t)}function g(t){var i=e.extend(true,[],t);d(i,l);d(i,c);if(i.length>0){s.push.apply(s,i);o||n.ready.then(function(){v()})}}return{showDialog:g}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(99)],r=function(e,t){return{configureTouchSupport:function n(){e(document.body.parentElement).addClass("touch-"+(t.treatAsDesktop()?"off":"on"))}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;!(i=[n,t],r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isMeasure=function(e){return this.gMeasures.indexOf(e)>=0},e.isDimension=function(t){return this.gDimensions.indexOf(t)>=0||e.isTemporal(t)||e.isGeographical(t)||this.gIntervals.indexOf(t)>=0||e.gOrdinals.indexOf(t)>=0},e.isTemporal=function(t){return this.gTemporals.indexOf(t)>=0||e.gDays.indexOf(t)>=0},e.isGeographical=function(e){return this.gGeographical.indexOf(e)>=0},e.getGeoClassification=function(t){for(var n=void 0,i=0;i<t.length;i++)if(e.gGeographical.indexOf(t[i])){n=t[i];break}return n},e}();n.gMeasures=["measure","monetary","percentage"],n.gDimensions=["dimension","boolean"],n.gOrdinals=["ordinal","interval"],n.gIntervals=["interval","longitude","latitude","temporal"],n.gTemporals=["date","time","timestamp","year","quarter","month","week","minute","second","hour"],n.gDays=["day","weekDay","monthDay","yearDay"],n.gGeographical=["geographical","postalCode","city","stateProvince","country","geopoint"],t.ClassificationHelper=n}.apply(t,i),void 0!==r&&(e.exports=r))},,,,,function(e,t,n){"use strict";var i,r;!(i=[n(92),n(90),n(89),n(330),n(265),n(418),n(331)],r=function(e,t,n,i,r,o,a){var s,l={mode:"S",enabled:true,debouncing:{enabled:true,delay:50},height:250,width:250,maxTotalArea:1e4};s=e.extend("CacheCube",{init:function e(t,n,s,l){this.model=t;this.responseProperty=n;this.options={};this.cubeHeight=0;this.cubeWidth=0;this.setOptions(l||{});this.setPath(s);"K"===this.options.mode?this.cube=new o:"P"===this.options.mode?this.cube=new a:this.cube=new r;this.throttle=new i;var c=this;this.throttle.Send.bind(function(e,t){var n=c._getDirections(c.throttle.recentRequests.map(function(e){return{top:e.data[0].qTop,left:e.data[0].qLeft}}));var i=c._getAreasToCache(e,n.vertical,n.horizontal);c.cacheData(i,e).then(function(e){c.cube?t.resolve(e):t.reject()},function(){t.reject()})});this._modelBinding=function(){c.clear()};this.model.Invalidated.bind(this._modelBinding)},destroy:function e(){this.cube.destroy();this.throttle.destroy();this.model&&this.model.Invalidated&&this.model.Invalidated.unbind(this._modelBinding);this._modelBinding=null;delete this.model;delete this.throttle;delete this.cube},setMethodName:function e(t){this.method=t},setPath:function e(t){this.path=t},setCubeSize:function e(t){this.cubeHeight=t.qcy;this.cubeWidth=t.qcx},setOptions:function e(n){if(!n)return;this.options=t.extend(true,{},l,this.options,n);this.cacheHeight=this.options.height;this.cacheWidth=this.options.width;this.enabled=this.options.enabled||false;this.debouncing={enabled:this.options.debouncing.enabled||false,delay:this.options.debouncing.delay||-1}},clear:function e(){this.cube&&this.cube.clear();this.throttle&&this.throttle.clear()},set:function e(t){this.clear();if(!t||!t.length)return;this.cube.store(t)},cacheData:function e(t,n){var i=function e(t){if(this.cube){this.cube.store(t);return this.cube.get(n)}return t};return"getHyperCubeStackData"===this.method&&this.options.maxStackedValues?this.model[this.method](this.path,t,this.options.maxStackedValues).then(i.bind(this)):this.model[this.method](this.path,t).then(i.bind(this))},getData:function e(t){if(!this.model)return n.reject();if(!this.enabled||!this.cubeHeight||!this.cubeWidth)return this.model[this.method](this.path,t);var i,r,o=[];for(i=0;i<t.length;++i){r=t[i];o.push({qTop:Math.max(Math.floor(r.qTop),0),qLeft:Math.max(r.qLeft,0),qHeight:Math.min(r.qHeight,this.cubeHeight-Math.floor(r.qTop)),qWidth:Math.min(r.qWidth,this.cubeWidth-r.qLeft)})}if(this.cube.contains(o)){this.throttle.updateResolutionTime();return n.resolve(this.cube.get(o))}if(0===o[0].qTop&&this.cube.isEmpty()&&this.throttle.ongoingRequests.length+this.throttle.queuedRequests.length===0){this.throttle.updateResolutionTime();return this.cacheData(o,o)}return this.throttle.queue(o)},_getDirections:function e(t){if(!t||t.length<2)return{vertical:0,horizontal:0};var n=t.slice(-2),i=n[1].top-n[0].top,r=n[1].left-n[0].left;return{vertical:i<0?-1:i>0?1:0,horizontal:r<0?-1:r>0?1:0}},_getAreasToCache:function e(t,n,i){var r,o,a,s,l,c,u,d,f,p=[],h=this.cacheHeight;"undefined"===typeof n&&(n=0);"undefined"===typeof i&&(i=0);this.cacheHeight*this.cacheWidth*t.length>this.options.maxTotalArea&&(h=Math.floor(this.options.maxTotalArea/(t.length*this.cacheWidth)));for(r=0;r<t.length;++r){o=0!==n?Math.floor(.5*Math.max(0,h-t[r].qHeight)):0;a=0!==i?Math.floor(.5*Math.max(0,this.cacheWidth-t[r].qWidth)):0;s=o*n-o;l=a*i-a;c=0!==n?Math.max(0,Math.min(Math.max(t[r].qHeight,h),this.cubeHeight)):t[r].qHeight;u=0!==i?Math.max(0,Math.min(Math.max(t[r].qWidth,this.cacheWidth),this.cubeWidth)):t[r].qWidth;d=Math.max(0,Math.min(t[r].qTop+s,this.cubeHeight-c));f=Math.max(0,Math.min(t[r].qLeft+l,this.cubeWidth-u));p.push({qTop:d,qHeight:c,qLeft:f,qWidth:u})}return p}});return s}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.loadExtension=m;var i=u(n(49));var r=u(n(58));var o=u(n(625));var a=u(n(626));var s=n(59);var l=u(n(103));var c=u(n(13));function u(e){return e&&e.__esModule?e:{default:e}}var d={};function f(e){switch(e){case"auto-chart":return Promise.all([n.e(5),n.e(13),n.e(38)]).then(n.t.bind(null,1163,7));case"barchart":if(i.default.getFlag("BARCHART"))return(0,o.default)(Promise.all([n.e(4),n.e(19),n.e(72)]).then(n.t.bind(null,1164,7)));return Promise.all([n.e(0),n.e(2),n.e(7),n.e(9),n.e(39)]).then(n.t.bind(null,1165,7));case"boxplot":return Promise.all([n.e(4),n.e(0),n.e(14),n.e(17),n.e(40)]).then(n.t.bind(null,1173,7));case"combochart":return Promise.all([n.e(0),n.e(2),n.e(7),n.e(9),n.e(41)]).then(n.t.bind(null,1175,7));case"container":return Promise.all([n.e(6),n.e(5),n.e(8),n.e(13),n.e(36)]).then(n.t.bind(null,1178,7));case"distributionplot":return Promise.all([n.e(4),n.e(0),n.e(14),n.e(17),n.e(42)]).then(n.t.bind(null,1181,7));case"filterpane":return Promise.all([n.e(8),n.e(43)]).then(n.t.bind(null,1053,7));case"gauge":return Promise.all([n.e(0),n.e(2),n.e(7),n.e(9),n.e(44)]).then(n.t.bind(null,1054,7));case"histogram":return Promise.all([n.e(4),n.e(0),n.e(14),n.e(45)]).then(n.t.bind(null,1182,7));case"kpi":return n.e(47).then(n.t.bind(null,1055,7));case"linechart":return Promise.all([n.e(0),n.e(2),n.e(7),n.e(9),n.e(48)]).then(n.t.bind(null,1183,7));case"listbox":return n.e(49).then(n.t.bind(null,1184,7));case"map":case"map-chart":return b().then(function(){return Promise.all([n.e(4),n.e(6),n.e(5),n.e(74),n.e(50)]).then(n.t.bind(null,1185,7))});case"piechart":return(0,o.default)(Promise.all([n.e(4),n.e(19),n.e(75)]).then(n.t.bind(null,1188,7)));case"pivot-table":return Promise.all([n.e(8),n.e(15),n.e(18),n.e(51)]).then(n.t.bind(null,1057,7));case"scatterplot":return Promise.all([n.e(0),n.e(2),n.e(7),n.e(9),n.e(52)]).then(n.t.bind(null,1189,7));case"table":return Promise.all([n.e(8),n.e(15),n.e(18),n.e(53)]).then(n.t.bind(null,1059,7));case"text-image":return Promise.all([n.e(76),n.e(54)]).then(n.t.bind(null,1060,7));case"treemap":return Promise.all([n.e(0),n.e(2),n.e(7),n.e(55)]).then(n.t.bind(null,1190,7));case"waterfallchart":return Promise.all([n.e(4),n.e(0),n.e(14),n.e(56)]).then(n.t.bind(null,1191,7));case"widget":return Promise.all([n.e(6),n.e(5),n.e(8),n.e(13),n.e(57)]).then(n.t.bind(null,1192,7));default:return n.e(46).then(n.t.bind(null,391,7))}}function p(e,t){t.forEach(function(t){"js/qlik-require-plugin!"===t?console.error("Error in extension '".concat(e,"': Can not use 'js/qlik' in extensions - use 'qlik' instead.")):(0,a.default)(t)&&console.error("Error in extension '".concat(e,"': Can not use internal module '").concat(t,"'."))})}var h=null;function v(e){h||(h=(0,r.default)().then(function(){return(0,s.loadExtensionAMD)()}).then(function(){window.requirejs.config.call(null,{paths:{extensions:"".concat(c.default.rootPath,"extensions"),mapchart:"".concat(n.p,"extensions/qliktech/mapchart"),"_dashboard-bundle":"".concat(n.p,"_dashboard-bundle"),"_visualization-bundle":"".concat(n.p,"_visualization-bundle")}})},function(e){l.default.trackEvent(l.default.customEvents.EXTENSION_LOAD_ERROR,{type:"amd-code-split",message:e&&e.message});throw e}));return h.then(function(){return new Promise(function(t,n){if(d[e]){n(d[e]);return}window.requirejs([e],function(e){e=e.__esModule&&e.default?e.default:e;t(e)},function(t){p(e,t.requireModules);console.error(t);d[e]=t;l.default.trackEvent(l.default.customEvents.EXTENSION_LOAD_ERROR,{type:"3rd-party-requirejs",message:t&&t.message||t});n(t)})})})}function g(e){return v(e).then(function(e){return(0,o.default)(Promise.resolve(e))})}function m(e){return new Promise(function(t,n){var i=e.path;if(e.libraryInfo.isThirdParty&&e.libraryInfo.__next)return g(i).then(t,function(e){l.default.trackEvent(l.default.customEvents.EXTENSION_LOAD_ERROR,{type:"la-vie-code-split",message:e&&e.message||e});n(e)});if(e.libraryInfo.isThirdParty)return v(i).then(t,n);var r=e.typePath||e.type;return f(r).then(function(e){e=e.__esModule&&e.default?e.default:e;t(e)},function(e){l.default.trackEvent(l.default.customEvents.EXTENSION_LOAD_ERROR,{type:"qlik-extension-code-split",message:e&&e.message});n(e)})})}var b=function e(){return v("mapchart/WebMap5")}},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(90),n(282),n(89)],r=function(e,t,n,i){return{createProperties:s,convertProperties:l};function r(e){if("string"===typeof e)e={qDef:{qDef:e}};else if(e.qType){e.qDef=e.qDef||{};e.qDef.cId=t.generateId()}return e}function o(e){if("string"===typeof e)e={qDef:{qFieldDefs:[e]}};else if(e.qType){e.qDef=e.qDef||{};e.qDef.cId=t.generateId()}return e}function a(e){if("string"===typeof e)return 0===e.indexOf("=");if(e.qType)return"measure"===e.qType;return!!(e.qDef&&e.qDef.qDef||e.qSortBy||e.qAttributeExpressions)}function s(s,l,c,u){return i.all([n.getExtensionType(l),n.getInitialProperties(l)]).then(function(n){var l=new i;var d=n[0];var f=n[1];d.mapProperties();var p=d.getCreatePropertyHandler.call(d,s);p.setProperties(f);if(c){var h=c.slice(0);if(f.qListObjectDef){h.forEach(function(e,t){if(0===t){f.qListObjectDef.qDef||(f.qListObjectDef.qDef={});f.qListObjectDef.qDef.qFieldDefs=[e]}else{f.qListObjectDef.qExpressions||(f.qListObjectDef.qExpressions=[]);f.qListObjectDef.qExpressions.push({qDef:{qDef:e}})}});l.resolve(f)}else if(f.qHyperCubeDef||f.boxplotDef){var v=function t(n){var i;var s;var c;var u=true;if(n.length<=0)return l.resolve(f);i=n.shift();if(a(i)){s=r(i);c=e.extend(u,{},s);p.addMeasure(c,void 0,void 0,true).then(function(i){e.extend(u,i,s);t(n)})}else{s=o(i);c=e.extend(u,{},s);p.addDimension(c).then(function(i){e.extend(u,i,s);t(n)})}};v(h)}else l.resolve(f)}else l.resolve(f);return l.promise.then(function(e){u&&t.extend(true,e,u);var n=d.exportProperties&&d.importProperties;if(n){var i=d.importProperties(d.exportProperties({qProperty:e},d.options.hyperCubePath),e,d,d.options.hyperCubePath).qProperty;return i}return e})})}function l(e,r,o,a){var s=e.getEffectiveProperties();var l=n.getExtensionType(r);var c=n.getExtensionType(o);var u=n.getInitialProperties(r);return i.all([s,c,l,u]).then(function(e){var n={qProperty:e[0]};a&&t.extend(true,n.qProperty,a);var i=e[1];var o=e[2];var s=e[3];var l="table"===r&&"function"===typeof i.exportTableProperties?i.exportTableProperties:i.exportProperties;var c=o.importProperties(l(n),s,o).qProperty;c.qInfo&&c.qInfo.qId&&delete c.qInfo.qId;return c})}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(93),n(89)],r=function(e,t){function n(n){return n?t.resolve(n.enigmaModel):e.getApp()}var i={};i.getCurrentSelections=function(e,t){return n(e).then(function(e){return e.engineApp.getSetAnalysis(t).catch(function(e){e.isHandled=true})})};i.getSelectionsFromBookmarkId=function(e,t,i){return n(e).then(function(e){return e.engineApp.getSetAnalysis(i,t).catch(function(e){e.isHandled=true})})};return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(738),n(100),n(739),n(48),n(11),n(349),n(315)],r=function(e,t,n,i,r){var o=t.resolveColor(3),a=t.resolveColor(4),s=["$scope",function(e){e.activeIndex=-1;e.colorSchemeLimits=[];e.animate=false;e.inputFocus=false}];i.directive("qvPaletteCreator",["$timeout",function(l){return{template:n,controller:s,replace:true,scope:{colors:"=",percentage:"=",limits:"=",types:"=",maxColors:"=?"},link:function n(s,c){var u=false,d=c.find(".paletteSlider"),f={min:null,max:null},p={colors:null,types:null,limits:null};if("[object Array]"!==Object.prototype.toString.call(s.colors)||"[object Array]"!==Object.prototype.toString.call(s.limits)||"[object Array]"!==Object.prototype.toString.call(s.types)||0===s.colors.length)throw new Error("Invalid array parameters set for Palette Creator component");s.maxColors=s.maxColors||100;function h(){if(s.limits.some(function(e){return e>=1||e<=0})){var e=1/s.colors.length,t=s.colors.length<10?.1:0;s.limits.forEach(function(n,i){s.limits[i]=t+i*e})}}s.onGradient=function(){l(function(){u=true;e.updateSegments(s,c,f,d);l(function(){u=false})})};s.onEnter=function(t,n){var i=parseFloat(s.segments[t].limit);if(Number.isNaN(+i)){s.segments[t].limit=s.limits[t];return}u=true;s.inputFocus=false;s.animate=true;s.percentage&&(i=Math.max(0,Math.min(i,1)));s.segments[t].limit=i;f=e.updateRange(s,l,c,f,d);e.updateSegments(s,c,f,d);l(function(){u=false});l(function(){s.animate=false},200);n.target.blur()};s.onInputFocus=function(){s.inputFocus=true};s.addLimit=function(n){var i,r;if(s.segments.length+1>=s.maxColors)return;u=true;r=s.colors[s.colors.length-1]===o?a:o;if(0===s.segments.length)i=(f.max-f.min)/2;else if(1===s.segments.length)i=s.segments[0].limit-(s.segments[0].limit-f.min)/2;else{var p=s.segments[s.segments.length-1].limit;var h=s.segments[s.segments.length-2].limit;i=p-(p-h)/2}s.segments.push(new e.SegmentLimit(s,parseFloat(i.toFixed(2)),false));s.colors.push(t.resolveColor(r));f=e.updateRange(s,l,c,f,d);e.updateActiveIndex(s,c,d);e.updateSegments(s,c,f,d);n.preventDefault();l(function(){u=false;g()})};s.removeLimit=function(t){u=true;s.segments.splice(t,1);s.colors.splice(t+1,1);e.updateActiveIndex(s,c,d);f=e.updateRange(s,l,c,f,d);e.updateSegments(s,c,f,d);l(function(){u=false;g()})};s.addDisabled=function(){return!s.segments||s.segments.length+1>=s.maxColors};s.$watch("percentage",function(e,t){if(e!==t){e&&h();g(true)}});s.$watch("colors",function(){g()},true);s.$watch("types",function(){g()},true);s.$watch("limits",function(){g()},true);function v(){var t,n,o;u=true;s.segments=s.limits.map(function(t,n){return new e.SegmentLimit(s,t,s.types[n])});f=e.getRange(s);var a={min:f.min,max:f.max,step:e.getSliderStep(f.max,f.min),values:s.segments.map(function(e){return e.limit}),create:function t(){e.updateSelectedHandle(-1,s.activeIndex,d)},stop:function n(){i.$apply(s,function(){var n,i=s.segments.length;for(n=0;n<i;n++)if(s.activeIndex===n&&s.slide){s.segments[n].limit=s.sliderOptions.values[n];s.slide=false;f=e.updateRange(s,l,c,f,d);break}e.updateOutDataArrays(s,f);t=false;l(function(){u=false})})},slide:function r(a,l){o+=l.values[s.activeIndex]-n;if(t&&Math.abs(n-o)<.05*(f.max-f.min))return false;s.slide=true;i.$apply(s,function(){s.segments[s.activeIndex].limit=s.sliderValues[s.activeIndex];e.updateOutDataArrays(s,f);e.updateArrow(s,c,f.max,f.min)})},change:function e(){return false},start:function a(l,p){u=true;i.$apply(s,function(){var i=0,a=p.handle;if(!a||!r(a).hasClass("ui-slider-handle"))return;while(null!=(a=a.previousSibling))i++;if(i!==s.activeIndex){e.updateActiveIndex(s,c,d,i);t=true;n=s.sliderOptions.values[i];o=n}e.updateArrow(s,c,f.max,f.min)})}};e.updateSliderOptions(s,a);e.updateActiveIndex(s,c,d);e.updateSegments(s,c,f,d);p.colors=s.colors.slice();p.types=s.types.slice();p.limits=s.limits.slice();u=false}function g(e){var t=false;if(u)return;if(!e){t||s.segments.length==s.limits.length||(t=true);t||p.colors.length===s.colors.length&&!p.colors.some(function(e,t){return e!==s.colors[t]})||(t=true);t||p.types.length===s.types.length&&!p.types.some(function(e,t){return e!==s.types[t]})||(t=true);t||p.limits.length===s.limits.length&&!p.limits.some(function(e,t){return e!==s.limits[t]})||(t=true)}(t||e)&&v(false)}v(true)}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(93),n(457),n(269),n(217)],r=function(e,t,n,i){function r(i,r){r=r||function(){};e.getApp().then(function(){var e=new n;e.add(i,function(){t.save();r()})})}function o(n,r){r=r||function(){};e.getApp().then(function(e){i.addMeasure(n,e,function(){t.save();r()})})}return{showAddDimensionDialog:r,showAddMeasureDialog:o}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(781)],r=function(e,t,n){t.directive("qvAssetsSearchPanel",function(){return{restrict:"E",replace:true,scope:{query:"=",clearWhen:"=",look:"@"},template:n,link:function t(n,i){n.$watch("rawQuery",function(t){0===e.trim(t).length?""!==n.query&&(n.query=""):n.query=t});n.$watch("clearWhen",function(e){e&&n.onClear()});n.onClear=function(){n.rawQuery=""};var r=i.find("input");r.on("keydown",function(e){if(27===e.which){n.onClear();n.$apply();e.stopPropagation()}else if(13===e.which){e.stopPropagation();r.blur()}})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){var t=["showtitles","title","subtitle","footnote"],n="header",i="data",r="sorting",o="settings",a="settings.";var s={};function l(e){if(e&&0===e.indexOf(a))return e.substring(9);return e}function c(e){if(e&&0!==e.indexOf(a))return a+e;return e}function u(e,t){var n=t.length;var i=0;var r=false;if(e){e.forEach(function(e){if(e.ref&&0===e.ref.indexOf(t)){var o=parseInt(e.ref.substring(n));o>i&&(i=o);s[t]&&o===s[t]+1&&(r=true)}});s[t]&&!r||(s[t]=i)}else s[t]=0;s[t]+=1;return t+s[t]}function d(e,t){e&&e.forEach(function(n,i){n["ref"]===t&&e.splice(i,1)})}function f(e,t){var n=-1;e&&e.some(function(e,i){if(e["ref"]===t){n=i;return true}});return n}function p(e){if(e.settings)return e.settings.sort(function(e,t){if(e.order===t.order)return 0;if(!e.order||e.order<t.order)return-1;return 1});return[]}function h(e,t){if(e.settings)return e.settings.filter(function(e){return(e.parent||o)===t}).sort(function(e,t){if(e.order===t.order)return 0;if(!e.order||e.order<t.order)return-1;return 1});return[]}function v(t){var n=e.extend(true,{},t);n.type=n.type||"string";n.label=n.label||n.ref;n.defaultValue=n.defaultValue||"boolean"!==n.type&&"";"string"!==n.type||n.component||(n.expression=n.expression||"optional");"text"===t.component?delete n.ref:n.ref=c(n.ref);return n}function g(e,t){var n={},i=h(e,t);i.forEach(function(e){n[e.ref]=v(e)});return n}function m(e){S(e,n,{ref:o})}function b(e,t){if(t===n)return true;if(t===i)return!y(e)&&!x(e);if(t===r)return(y(e)||x(e))&&true!==e.sorting;return false}function y(e){return void 0!==e.measures&&(e.measures.max>0||void 0===e.measures.max)}function x(e){return void 0!==e.dimensions&&(e.dimensions.max>0||void 0===e.dimensions.max)}function S(e,t,o){switch(t){case i:e.measures={min:1,max:1};break;case n:e.sections=e.sections||[];var a=o||{};a.type=t;a.ref=a.ref||u(e.sections,t);a.label=a.label||"Settings";e.sections.push(a);break;case r:e.sorting=true;break}}function w(e,t,n){if(t===i){delete e.measures;delete e.dimensions;delete e.sorting;return}if(t===r){delete e.sorting;return}"section-header"===t&&h(e,n).forEach(function(t){I(e,t)});d(e.sections,n)}function q(e,n){if(!n||"q"===n.substr(0,1).toLowerCase())return false;if(t.indexOf(n.toLowerCase())>-1)return false;var i=true;e.settings&&e.settings.forEach(function(e){e.ref===n&&(i=false)});return i}function C(e,t,n){t=t.item||t;e.settings||(e.settings=[]);e.sections||m(e);t.parent&&"general"!==t.parent||(t.parent=o);t.ref=t.ref||u(e.settings,"property");t.label=t.label||t.ref.substr(0,1).toUpperCase()+t.ref.substring(1);n||E(e,t);e.settings.push(t)}function _(e,t,n,i,r){t=t.item||t;t.ref=l(t.ref);var o=t.parent===n;"undefined"===typeof t.order&&(t.order=f(e.settings,t.ref));var a=t.order;t.parent=n;I(e,t,o,r);t.order=i-(t.order<i&&o?1:0);o&&E(e,t,false,a);C(e,t,o)}function I(e,t,n,i){t=t.item||t;d(e.settings,l(t.ref));n||E(e,t,true,null,i)}function E(e,t,n,i,r){var o=h(e,r||t.parent);Number.isNaN(+t.order)||t.order>o.length||t.order<0?t.order=o.length:n||"undefined"===typeof i?n?o.forEach(function(e){e.order>t.order&&e.order--}):o.forEach(function(e){e.order>=t.order&&e.order++}):i<t.order?o.forEach(function(e){e.order>i&&e.order<=t.order&&e.order--}):o.forEach(function(e){e.order>=t.order&&e.order<i&&e.order++})}function D(e){var t={};if(e&&e.properties){x(e.properties)&&(t.dimensions=e.properties.dimensions);y(e.properties)&&(t.measures=e.properties.measures)}return t}function A(e){var t={type:"items",component:"accordion",items:{}};if(e&&e.properties){var n=e.properties;if(y(n)||x(n)){t.items.data={uses:i,items:{measures:{disabledRef:""},dimensions:{disabledRef:""}}};n.sorting&&(t.items.sorting={uses:r})}t.items.settings={uses:"settings",items:{}};(!n.sections||n.sections.length<1)&&n.settings&&n.settings.length>0&&m(n);n.sections&&n.sections.length>0&&n.sections.forEach(function(e){t.items.settings.items[e.ref]={ref:e.ref,type:"items",label:e.label,items:g(n,e.ref)}})}return t}return{addScope:c,stripScope:l,canAddSection:b,addSection:S,removeSection:w,addItem:C,removeItem:I,moveItem:_,getData:D,getDefinition:A,isValidRef:q,getSectionItemsArr:h,getSectionsItemsArr:p}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90),n(10),n(11),n(825),n(48)],r=function(e,t,n,i){var r=["js","css","html","json"];var o=["break","do","instanceof","typeof","case","else","new","var","catch","finally","return","void","continue","for","switch","while","debugger","function","this","with","default","if","throw","delete","in","try","class","enum","extends","super","const","export","import","implements","let","private","public","yield","interface","package","protected","static","null","true","false"];function a(e,t){return(new RegExp(t+"=(.+?)(&|$)").exec(e)||[null,null])[1]}function s(e,t){var n=new RegExp(t+"=(.+?)(&|$)","g"),i=[],r;while(r=n.exec(e))i.push(decodeURIComponent(r[1]));return i}function l(e){document.title=e+" | Dev Hub"}function c(e){var n=[];t.forEach(e,function(e,i){t.isObject(e)&&(e.key=i);n.push(e)});return n}function u(e){if(location.hash){var t=new RegExp(e+"{(.*)}","");var n=location.hash.match(t);return!!(n&&n.length>1)&&decodeURIComponent(n[1])}return false}function d(){return window.location.pathname.substr(0,window.location.pathname.toLowerCase().lastIndexOf("/dev-hub")+1)}function f(e){if(e){var t=window.location.href,n=t.indexOf("#");n>0&&(window.location.hash="")}window.location.reload()}function p(e){return g(e)&&e.indexOf(".")<0}function h(e,t,n){var i=v(t,e);i||(i=n.some(function(t){return v(t.items,e)}));return i}function v(e,t){return e.filter(function(e){return e.id.toLowerCase()===t.toLowerCase()}).length>0}function g(e){return!!(e&&e.length&&e.length>0)&&(/^[.0-9a-zA-Z_-]+$/.test(e)&&!/^\./.test(e))}function m(e){var t=/^[$A-Z_][0-9A-Z_$]*$/i;return t.test(e)&&-1===o.indexOf(e)}function b(e){var t=/^[$A-Z_][0-9A-Z_$]*$/i;return t.test(e)}function y(e){return-1!==o.indexOf(e)}function x(t,n,i){return i?e.isInteger(t)&&e.isInteger(n)&&t>=0&&n>=0&&n>=t:e.isInteger(t)&&e.isInteger(n)&&n>=t}function S(e){if(!e)return false;var t=e.lastIndexOf(".");if(t<0)return false;return r.indexOf(e.substr(e.lastIndexOf(".")+1).toLowerCase())>-1}function w(e){var t=/^[a-z]+[a-zA-Z0-9]*\b/g;return t.test(e)}function q(e){var t=/[^A-Z0-9]/i;return t.test(e)}function C(e){return e.substr(e.lastIndexOf(".")+1).toLowerCase()}function _(e){return e.substr(0,e.lastIndexOf("."))}function I(e){return e.replace(/[^a-z0-9]/gi,"-").toLowerCase()}function E(e){var t="";for(var n=0;n<e.length-1;n++)t+="."+e[n]+", ";t+="."+e[e.length-1];return t}var D,A;function T(){if(!A){A=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;n.fn.mutation=function(e,t,n){if(A){t=t||{subtree:false,attributes:true};D=new A(function(t){t.forEach(function(t){n?n(t,e):e(t.target,t.attributeName,t)})});return this.each(function(){D.observe(this,t)})}}}}function O(){var e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return("x"===t?n:3&n|8).toString(16)})}function k(e,t,n){function i(e){e.debounceTimer&&clearTimeout(e.debounceTimer);e.debounceTimer=null}return function(){var r=this,o=arguments,a;i(n);a=setTimeout(function(){e.apply(r,o)},t);n.debounceTimer=a}}return{getURLParameter:a,getURLParameters:s,setBrowserTitle:l,getHashParameter:u,getPrefix:d,reload:f,isInteger:function t(n){return e.isInteger(n)},extend:function e(){return t.extend.apply(null,arguments)},deepCopy:function e(){return t.copy.apply(null,arguments)},isValidExtensionName:p,isExistingExtensionName:h,isValidName:g,isValidFunctionName:m,isJsReservedWord:y,isValidSyntax:b,isValidInterval:x,isValidCamelCase:w,hasInvalidCharacters:q,sanitizeFileName:I,hasValidFileExtension:S,getFileExtension:C,getFileName:_,fileExtensionArrayToString:E,objectToArray:c,addMutationObserver:T,generateId:O,debounce:k,conversions:i,__onlytest__:{_isIdInList:v}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(238),n(90)],r=function(e){var t=e.extend({getDimensions:function e(){return[]},getMeasures:function e(){return[]}});return t}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(91),n(94),n(969),n(207),n(99),n(97),n(133),n(236),n(509),n(192),n(287),n(510),n(274)],r=function(e,t,n,i,r,o,a,s,l,c,u,d){function f(e){return{odagLinkItem:function t(n){var r=n.item.getDropOption();var o={insertBeforeItem:e,title:r.args.init.linkRef.name,odagLinkRefID:r.args.init.linkRef.id};var a=i.model;l.addODAGNavPoint(a,o)}}}function p(t,n){function i(e,t,n){var i=f(t);var r={targetRect:n,drawRect:n,drop:i,dropShadePercentage:10};e.registerDropRect(r)}var r;var o={accept:{odagLinkItem:function e(){return true}},end:function e(){n.removeClass(r);t.dragging=false},start:function o(a){t.dragging=true;var s;try{s=n[0].getBoundingClientRect()}catch(e){return}var l={left:s.left+2,right:s.right-2,top:s.top+2,bottom:s.bottom-2};r="odagLinkItem"===a.info.type?"dragging library-dragging":"dragging";n.addClass(r);var c=n.find(".dropArea");for(var u=0;u<c.length;u++){var d=e(c[u]);var f=d[0].getBoundingClientRect();var p={left:f.left+2,right:f.right-2,top:f.top+2,bottom:f.bottom-2};var h=null;var v=t.odagNavPoints;u<v.items.length&&(h=v.items[u]);i(a,h,p)}var g=n.find(".odag-nav-point-cell:last");var m={left:0,right:0,top:0,bottom:0};var b=l.left;if(g.length){m=g[0].getBoundingClientRect();b=m.right}var y={left:b,top:l.top,right:l.right,bottom:l.bottom};i(a,null,y)}};c.registerDropTarget(o);t.$on("$destroy",function(){c.unregisterDropTarget(o)})}var h={template:r,restrict:"E",scope:{model:"=",inEditMode:"=",standAlone:"="},link:function e(t,n){p(t,n)},controller:["$scope","$timeout","$element","qvSheetService",function(e,t,r,c){e.sortableNavPoints=null;var f=e.standAlone?null:c;e.odagToolbarService=new u(f);e.dragging=false;e.waterMarkText="";var p=null;l.isODAGAvailable(e.model.app).then(function(t){t&&d.getList().then(function(t){t.layout&&t.layout.qAppObjectList&&t.layout.qAppObjectList.qItems.length>0&&l.getODAGLinks(e.model.app)})});e.sortableNavPoints=o.create({options:{direction:"horizontal",listKey:"list",listSelector:".list",itemKey:"item",itemSelector:".drag-odag-navpoint",itemDragSelector:".drag-odag-navpoint",gesture:{name:"swipe",options:{radiusThreshold:a.treatAsDesktop()?4:0,preventDefault:false}}},allowDrag:function t(){var t=this._super.apply(this,arguments);return t&&e.inEditMode},addPlaceholder:function e(){this._super.apply(this,arguments)},onBegin:function e(t){this._super.apply(this,arguments);p=t;p.classList=["reordering"];var n=r.find(".list");n.css("height",n.innerHeight())},removePlaceholder:function e(){this._super.apply(this,arguments);var t=r.find(".list");t.css("height","");p.classList=""},onMove:function t(){this._super.apply(this,arguments);var n=e.odagNavPoints.get().map(function(e){return e.data});var r=i.model;l.reorderNavPoints(r,n)}});e.odagNavPoints=e.sortableNavPoints.createList(1,{tid:"odagNavPoints"});e.$watchCollection("odagToolbarService.getOdagNavPoints()",function(n){e.odagNavPoints.reset();for(var i=0;i<n.length;i++)e.odagNavPoints.addSortableItem(n[i]);t(function(){e.$broadcast("refreshPager")})});e.$watch("model.sheetId",function(t){e.odagToolbarService.sheetChanged(t)});e.$watch("dragging",function(t){e.waterMarkText=t?n.get("odag.toolbar.help.dragging"):n.get("odag.toolbar.help.watermark")});e.odagToolbarService.init(e.model.app,e.model.openAppCallback).then(function(){e.waterMarkText=n.get("odag.toolbar.help.watermark")});s.on("end",function(){e.refreshPager(false)});e.$on("$destroy",function(){e.odagToolbarService.destroy()})}]};t.directive("qvOdagToolbar",function(){return h});return h}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(49),n(970),n(131),n(120),n(375),n(133),n(192),n(219)],r=function(e,t,n,i,r,o,a,s,l){function c(e){this.qvSheetService=e;this.currentApp=null;this.currentSheet=null;this.odagNavPoints=null;this.appLinkModelList=null;this.openAppCallback=null}c.prototype.init=function(e,t){var n=this;this.odagNavPoints=[];this.currentApp=e;this.openAppCallback=t;return s.getList(e).then(function(e){n.appLinkModelList=e;return e.getLayout().then(function(){n.updateNavPoints();e.Invalidated.bind(n.updateNavPoints.bind(n))})})};c.prototype.sheetChanged=function(e){var t=this;this.currentSheet&&this.currentSheet.Invalidated.unbind(this.updateNavPoints);e&&r.get(e,this.currentApp).then(function(e){t.currentSheet=e;if(t.currentSheet){t.updateNavPoints();t.currentSheet.Invalidated.bind(t.updateNavPoints.bind(t))}})};c.prototype.getODAGLinkInfo=function(n){var i=new e;if(n._cachedLinkProps)i.resolve(n._cachedLinkProps);else if(n.data.odagLinkRefID)l.getList(n.model.parent.app).then(function(e){if(e.filter(function(e){return e.properties.data.id===n.data.odagLinkRefID}).length>0)a.loadODAGLink(n.model.parent.app,n.data.odagLinkRefID).then(function(e){var r=t.getFlag("ODAG_SAAS_ENABLED")?e:e.objectDef;if(!e||"decommissioned"!==r){n.invalid=false;n.maxNumberOfApps=r.properties.genAppLimit[0].limit;n.maxRowExpressionCount=r.properties.rowEstRange[0].highBound;n._cachedLinkProps=r;return i.resolve(r)}n.invalid=true;i.resolve(null)},function e(){n.invalid=true;i.resolve(null)});else{n.invalid=true;i.resolve(null)}});else{n.invalid=true;i.resolve(null)}return i.promise};c.prototype.createODAGNavPointsList=function(t){var r=i.selectedObject?i.selectedObject:null;var s=null;var l=this;if(void 0!==t){this.odagNavPoints.splice(0,this.odagNavPoints.length);t.forEach(function(t){var c={id:t.info.id,type:"ODAGNavPoint",object:{isInvalid:true},data:t,openAppCallback:l.openAppCallback,model:null,maxRowExpressionCount:null,maxNumberOfApps:null,_cachedLinkProps:null,invalid:false,initialized:null};var u={parent:l.currentSheet,properties:t};c.model=new n(u);c.getLoadedLinkInfo=l.getODAGLinkInfo;c.getCurrentCountSessionObjectForLink=function(){return this.getLoadedLinkInfo(c).then(function(t){return t?a.getOrCreateSessionObjectsForLink(l.currentApp,t).then(function(e){return e}):e.resolve(null)})};l.odagNavPoints.push(c);if(r&&r.id===t.info.id&&!a.addingNewNavPointID[l.currentSheet.id]){s=c;i.setSelectedObject(o.createSelectedObjFromNavPoint(c))}});if(a.addingNewNavPointID[this.currentSheet.id]){var c=this.odagNavPoints.filter(function(e){return e.data.info.id===a.addingNewNavPointID[l.currentSheet.id]});if(c.length){i.setSelectedObject(o.createSelectedObjFromNavPoint(c[0]));s=c[0]}a.addingNewNavPointID[this.currentSheet.id]=null}this.qvSheetService&&r&&"ODAGNavPoint"===r.type&&!s&&this.qvSheetService.setSheetAsSelectedObj()}};c.prototype.updateNavPoints=function(){var e=this;if(this.currentApp&&this.currentSheet)return a.clearCachedSessionObjects(this.currentApp).then(function(){e.currentSheet.getNavPoints().then(function(t){e.createODAGNavPointsList(t)})})};c.prototype.hasODAGNavPoints=function(){return this.odagNavPoints.length>0};c.prototype.destroy=function(){this.odagNavPoints=[];this.appLinkModelList.Invalidated.unbind(this.updateNavPoints);this.currentSheet.Invalidated.unbind(this.updateNavPoints)};c.prototype.getOdagNavPoints=function(){return this.odagNavPoints};return c}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(89),n(131),n(135),n(972),n(97),n(973),n(90),n(375),n(274),n(980)],r=function(e,t,n,i,r,o,a,s,l){var c={template:r,restrict:"E",replace:true,scope:{inEditMode:"=",inMobileMode:"=",item:"="},controller:["$scope","$timeout","$element","luiPopover",function(e,r,c,u){e.popover=null;e.stageState=n;e.$watch("stageState.selectedObject",function(t){e.selObject=t});var d=null;e.rowCountPercentage=0;function f(){if(e.popover){e.popover.close();return}var t={item:e.item};if(t.item.openAppCallback){var n=t.item.openAppCallback;t.item.openAppCallback=function(t,i){e.popover.close();n(t,i)}}var i=a;var r={input:t,dock:"top",alignTo:c[0],closeOnResize:true};i=s.extend(true,r,i);e.popover=u.show(i);e.popover.closed.then(function(){e.popover=null})}function p(){e.popover&&e.popover.close();return}function h(){var n=new t;if(d){var o=e.item;d.getLayout().then(function(t){o.actualRowEst=t.MaxRowCountExpression;i.isSuffixInUse("noData")&&(o.actualRowEst="NaN");var n=o.maxRowExpressionCount;var a=100*Math.min(n/o.actualRowEst,1);if(a>=100)if(100!==e.rowCountPercentage){e.rowCountPercentage=99;r(function(){e.rowCountPercentage=100;o.rowCountPercentage=100;o.rowCountPercentageNumber=100},300)}else o.rowCountPercentage=100;else{o.rowCountPercentage=a;e.rowCountPercentage=a}"number"===typeof o.rowCountPercentage&&Number.isNaN(+o.rowCountPercentage)?o.rowCountPercentageNumber=-1:o.rowCountPercentageNumber=o.rowCountPercentage}).finally(function(){n.resolve()})}else n.reject();return n.promise}function v(){e.item.getCurrentCountSessionObjectForLink().then(function(t){d=t;d&&d.Invalidated.bind(h);h().finally(function(){e.item.initialized.resolve()})})}e.$watchCollection("item",function(e,n){if(null!==n&&null===e.initialized){e.initialized=new t;v()}});o.on("end",p);e.onODAGNavPointClicked=function(t){if(e.inMobileMode)return;e.inEditMode?n.setSelectedObject(l.createSelectedObjFromNavPoint(t)):e.item.invalid||f(t)};e.deleteInvalidNavPoint=function(e,t){t.model.removeObject()};r(function(){e.$broadcast("refreshPager")});e.$on("$destroy",function(){d&&d.Invalidated.unbind(h)})}]};e.directive("qvOdagToolbarNavpoint",function(){return c});return c}.apply(t,i),void 0!==r&&(e.exports=r))},,,,function(e,t,n){var i=n(10);(function(e,t){"use strict";var n=-1!=navigator.appVersion.indexOf("Mac"),i="undefined"!==typeof e.onwheel?"wheel":"undefined"!==typeof e.onmousewheel?"mousewheel":"DOMMouseScroll",r=document.documentElement,o=r.matches?"matches":r.matchesSelector?"matchesSelector":r.webkitMatches?"webkitMatches":r.webkitMatchesSelector?"webkitMatchesSelector":r.msMatches?"msMatches":r.msMatchesSelector?"msMatchesSelector":r.mozMatches?"mozMatches":r.mozMatchesSelector?"mozMatchesSelector":null;var a=t.element.prototype.closest||function(e){var n=this[0].parentNode;while(n!==document.documentElement&&null!=n&&!n[o](e))n=n.parentNode;return n&&n[o](e)?t.element(n):t.element()};t.module("vs-repeat",[]).directive("vsRepeat",["$compile",function(r){return{restrict:"A",scope:true,require:"?^vsRepeat",controller:["$scope",function(e){this.$scrollParent=e.$scrollParent;this.$fillElement=e.$fillElement}],compile:function(o,s){var l=o.children().eq(0),c=l.attr("ng-repeat"),u=l[0].outerHTML,d=/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(c),f=d[1],p=d[2],h=d[3],v="$vs_collection",g={vsRepeat:"elementSize",vsOffsetBefore:"offsetBefore",vsOffsetAfter:"offsetAfter",vsExcess:"excess"};o.empty();e.getComputedStyle&&"absolute"===e.getComputedStyle(o[0]).position||o.css("position","relative");return{pre:function(o,s,l,c){var d=t.element(u),m=[],b,y="undefined"!==typeof l.vsHorizontal,x,S,w=!l.vsRepeat,q=!!l.vsSizeProperty,C=l.vsScrollParent?a.call(s,l.vsScrollParent):s,_=y?"translateX":"translateY",I=y?"left":"top",E=y?"clientWidth":"clientHeight",D=y?"offsetWidth":"offsetHeight",A=y?"scrollLeft":"scrollTop";if(0===C.length)throw"Specified scroll parent selector did not match any element";o.$scrollParent=C;q&&(o.sizesCumulative=[]);o.elementSize=C[0][E]||50;o.offsetBefore=0;o.offsetAfter=0;o.excess=2;Object.keys(g).forEach(function(e){l[e]&&l.$observe(e,function(t){o[g[e]]=+t;R()})});o.$watchCollection(p,function(e){m=e||[];if(!m||m.length<1){o[v]=[];b=0;F(0);o.sizesCumulative=[0];return}b=m.length;if(q){o.sizes=m.map(function(e){return e[l.vsSizeProperty]});var t=0;o.sizesCumulative=o.sizes.map(function(e){var n=t;t+=e;return n});o.sizesCumulative.push(t)}T();R()});function T(){w&&o.$$postDigest(function(){if(s[0].offsetHeight||s[0].offsetWidth){var e=s.children(),t=0;while(t<e.length){if(null!=e[t].attributes["ng-repeat"]){if(e[t][D]){o.elementSize=e[t][D];R();w=false;o.$root&&!o.$root.$$phase&&o.$apply()}break}t++}}else var n=o.$watch(function(){if(s[0].offsetHeight||s[0].offsetWidth){n();T()}})})}d.attr("ng-repeat",f+" in "+v+(h?" "+h:"")).addClass("vs-repeat-repeated-element");var O=q?"(sizesCumulative[$index + startIndex] + offsetBefore)":"(($index + startIndex) * elementSize + offsetBefore)";"undefined"!==typeof document.documentElement.style.transform?d.attr("ng-style",'{ "transform": "'+_+'(" + '+O+' + "px)"}'):"undefined"!==typeof document.documentElement.style.webkitTransform?d.attr("ng-style",'{ "-webkit-transform": "'+_+'(" + '+O+' + "px)"}'):d.attr("ng-style","{"+I+": "+O+' + "px"}');r(d)(o);s.append(d);S=t.element('<div class="vs-repeat-fill-element"></div>').css({position:"relative","min-height":"100%","min-width":"100%"});s.append(S);r(S)(o);o.$fillElement=S;var k={};if(n){x=t.element('<div class="vs-repeat-wheel-helper"></div>').on(i,function(e){e.preventDefault();e.stopPropagation();e.originalEvent&&(e=e.originalEvent);C[0].scrollLeft+=e.deltaX||-e.wheelDeltaX;C[0].scrollTop+=e.deltaY||-e.wheelDeltaY}).on("mousemove",function(e){k.x===e.clientX&&k.y===e.clientY||t.element(this).css("display","none");k={x:e.clientX,y:e.clientY}}).css("display","none");S.append(x)}o.startIndex=0;o.endIndex=0;C.on("scroll",function e(t){H()&&o.$apply()});n&&C.on(i,L);function L(e){var t=e.currentTarget;(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)&&x.css("display","block")}function P(){if("undefined"!==typeof l.vsAutoresize){w=true;T();o.$root&&!o.$root.$$phase&&o.$apply()}H()&&o.$apply()}t.element(e).on("resize",P);o.$on("$destroy",function(){t.element(e).off("resize",P)});o.$on("vsRepeatTrigger",R);o.$on("vsRepeatResize",function(){w=true;T()});var M,N;function R(){M=void 0;N=void 0;H();F(q?o.sizesCumulative[b]:o.elementSize*b);o.$emit("vsRepeatReinitialized")}function F(e){if(y){S.css({width:o.offsetBefore+e+o.offsetAfter+"px",height:"100%"});if(c&&c.$fillElement){var t=c.$fillElement[0].parentNode.querySelector("[ng-repeat]");t&&c.$fillElement.css({width:t.scrollWidth+"px"})}}else{S.css({height:o.offsetBefore+e+o.offsetAfter+"px",width:"100%"});if(c&&c.$fillElement){t=c.$fillElement[0].parentNode.querySelector("[ng-repeat]");t&&c.$fillElement.css({height:t.scrollHeight+"px"})}}}var $;function j(){var e=C[0][E];if(e!==$){R();o.$root&&!o.$root.$$phase&&o.$apply()}$=e}o.$watch(function(){"function"===typeof e.requestAnimationFrame?e.requestAnimationFrame(j):j()});function H(){if(q){o.startIndex=0;while(o.sizesCumulative[o.startIndex]<C[0][A]-o.offsetBefore)o.startIndex++;o.startIndex>0&&o.startIndex--;o.endIndex=o.startIndex;while(o.sizesCumulative[o.endIndex]<C[0][A]-o.offsetBefore+C[0][E])o.endIndex++}else{o.startIndex=Math.max(Math.floor((C[0][A]-o.offsetBefore)/o.elementSize+o.excess/2)-o.excess,0);o.endIndex=Math.min(o.startIndex+Math.ceil(C[0][E]/o.elementSize)+o.excess,b)}var e=o.startIndex!==M||o.endIndex!==N;e&&(o[v]=m.slice(o.startIndex,o.endIndex));M=o.startIndex;N=o.endIndex;return e}}}}}}]);t.element(document.head).append(["<style>.vs-repeat-wheel-helper{position: absolute;top: 0;bottom: 0;left: 0;right: 0;z-index: 99999;background: rgba(0, 0, 0, 0);}.vs-repeat-repeated-element{position: absolute;z-index: 1;}</style>"].join(""))})(window,window.angular)},function(e,t,n){"use strict";(function(e){var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(10),n(516)],r=function(e,t){var n=e.module("qv.mobile-menu",["leonardo-ui.overlay"]);var i=100;var r={opening:0,open:1,closing:2,closed:3};var a={template:t,scope:{variant:"=",removeOverlay:"=",openedDeferred:"=",closedDeferred:"=",id:"=",template:"=",controller:"=",input:"="},controller:["$scope","$timeout",function(e,t){var n=r.opening;var o;var a;var s;var l;e.fade=true;function c(s){if(n===r.closing||n===r.closed)return;n=r.closing;e.fade=true;a=t(function(){o=s;e.removeOverlay()},i)}e.exposedApi.close=c;e.close=c;function u(e){e.stopPropagation();e.preventDefault()}e.onOutside=function(t){u(t);e.close()};e.onInside=function(t){if(t.target.hasAttribute("mm-content-inside-click")){u(t);e.close()}};s=t(function(){e.fade=false;l=t(function(){if(n===r.opening){e.openedDeferred.resolve();n=r.open}else e.openedDeferred.reject()},i)});e.$on("$destroy",function(){n=r.closed;e.closedDeferred.resolve(o);t.cancel(a);t.cancel(s);t.cancel(l)})}]};n.service("qvMobileMenu",["$q","luiOverlay",function(e,t){var n=0;var i={};i.show=function(i){if("object"!==o(i))throw new Error("options must be an object");var r="mobile-menu-"+n++;var s="undefined"===typeof i.closeOnEscape||i.closeOnEscape;var l=e.defer();var c=e.defer();var u=t.show(a,{controller:i.controller||function(){},template:i.template,variant:i.variant,input:i.input,closeOnEscape:s,openedDeferred:l,closedDeferred:c,id:r});return{close:u.close,opened:l.promise,closed:c.promise}};return i}])}.apply(t,i),void 0!==r&&(e.exports=r))}).call(this,n(55)(e))},function(e,t){e.exports='<div id="{{id}}" class="qv-mobile-menu-container" ng-class="{ \'lui-fade\': fade }" tabindex="-1" qva-focus="true"\n\t\t lui-component mm-content-inside-click x-template="template" x-controller="controller" x-close="close" x-variant="variant" x-input="input" qva-outside="onOutside($event)" ng-click="onInside($event)"></div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(518)],r=function(e){function t(n){if(!(this instanceof t))throw new Error("Url needs to be called with the new keyword");if(!n)throw new Error("Url needs a string to operate on");var r=i(n);Object.defineProperties(this,{authorityAndPath:{value:r.authorityAndPath},search:{value:r.search},hash:{value:r.hash},searchParams:{get:function t(){return e.fromSearchString(r.search)}}})}t.encodeAuthorityAndPath=function(e){return encodeURI(e).replace(/%5B/gi,"[").replace(/%5D/gi,"]")};t.encodeSearchParams=function(e){var t="";var i;for(var r=0;r<e.length;r++){i=e[r];t+=0===r?"?":"&";t+=n(i[0]);t+=i[1]?"="+n(i[1]):""}return t};function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";")}return t;function i(e){var t={authorityAndPath:"",search:"",hash:""};var n=e.indexOf("#");if(-1!==n){t.hash=e.substr(n);e=e.substr(0,n)}n=e.indexOf("?");if(-1!==n){t.search=e.substr(n);e=e.substr(0,n)}t.authorityAndPath=e;return t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={fromSearchString:t};return e;function t(e){if(!e)return[];"?"===e[0]&&(e=e.substr(1));var t=[];e.split("&").map(function(e){if(!e)return;var i=e.indexOf("=");var r;var o="";if(-1===i)r=e;else{r=e.slice(0,i);o=e.slice(i+1)}t.push(n(r,o))});return t}function n(e,t){return[i(e),i(t)]}function i(e){try{return decodeURIComponent(e)}catch(t){return e}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(2)],r=function(e){return{load:function t(i,r){var o="".concat(n.p,"translate/").concat(i,"/").concat(r,".json");return e.get(o,{responseType:"json"}).then(function(e){return e.data})}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-dialog x-variant="{{::variant}}" class="qv-alert-dialog">\n\t<lui-dialog-header ng-if="input.title">\n\t\t<lui-dialog-title>{{input.title}}</lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body ng-bind-html="input.message"></lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<lui-button x-variant="{{::variant}}" tid="alert-dialog-close" ng-click="close(true);" qva-focus="true">{{::closeLabel}}</lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(e,t){e.exports='<lui-dialog x-variant="{{::variant}}" class="qv-confirm-dialog">\n\t<lui-dialog-header ng-if="input.title">\n\t\t<lui-dialog-title>{{input.title}}</lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body ng-if="input.icon">\n\t\t<div class="message">\n\t\t\t<span ng-if="input.icon" class="message-icon lui-icon lui-icon--{{input.icon}}"></span>\n\t\t\t<div class="body-message">{{input.message}}</div>\n\t\t</div>\n\t</lui-dialog-body>\n\t<lui-dialog-body ng-if="!input.icon" ng-bind-html="input.message"></lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<lui-button x-variant="{{::variant}}" ng-if="!input.hideCancelButton" tid="confirm-dialog-cancel" ng-click="close(false);">{{::cancelLabel}}</lui-button>\n\t\t<lui-button x-variant="{{::variant}}" tid="confirm-dialog-ok" ng-click="close(true);" qva-focus="true">{{::okLabel}}</lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(300),n(97),n(436),n(524)],r=function(e,t,n,i){var r={template:i,scope:{menu:"=",options:"=",closingFn:"="},controller:["$scope","$element",function(i,r){var o=null;var a={DOWN:40,UP:38,RIGHT:39,LEFT:37,TAB:9,ESC:27,ENTER:13};function s(e,t){e.$$postDigest(function(){e.$$postDigest(t)})}function l(t){s(i,function(){if(i.options.alignTo)e.align(f(),i.options.alignTo,{collision:i.options.collision||"flip",position:i.options.docking||"top"});else{t=t||o;o=t?n.reposition(f(),t):n.position(f(),i.options.docking,i.options.position)}})}i.focusedItem=0;i.keyDown=function(e){e.preventDefault();e.stopPropagation();var t=e.target.parentElement.getElementsByTagName("li");e.keyCode===a.ESC&&i.close();if(e.keyCode===a.ENTER)if(i.levels.length)0===i.focusedItem?u(true):i.selectItem(e,i.currentItems[i.focusedItem-1],i.options.onCloseFn);else if(i.currentItems[i.focusedItem].items.length>0){d(i.currentItems[i.focusedItem],true);i.focusedItem=0}else i.selectItem(e,i.currentItems[i.focusedItem],i.options.onCloseFn);if(e.keyCode===a.UP&&-1!==i.focusedItem){if(i.focusedItem>0){c(t,i.focusedItem,"-1");i.focusedItem--}c(t,i.focusedItem,"0")}if(e.keyCode===a.DOWN)if(null===i.focusedItem){c(t,0,"-1");i.focusedItem=0}else{if(i.focusedItem<t.length-1){c(t,i.focusedItem,"-1");i.focusedItem++}c(t,i.focusedItem,"0")}if(e.keyCode===a.RIGHT){e.preventDefault();e.stopPropagation();for(var n=0;n<t.length;n++)t[n].setAttribute("tabindex","-1");if(i.currentItems[i.focusedItem].items.length>0){d(i.currentItems[i.focusedItem],true);i.focusedItem=0}}if(e.keyCode===a.LEFT){e.preventDefault();e.stopPropagation();if(i.levels.length){i.focusedItem=0;u(true)}}};function c(e,t,n){e[t].setAttribute("tabindex",n);e[t].focus()}i.levels=[];i.currentItems=i.menu.items;i.options.goBackTitle=i.options.goBackTitle||"Common.Back";function u(e){if(i.levels.length){var t=i.levels.pop();t.items[0].autoFocus=e;i.currentItems=t.items;l(t.offset)}}function d(e,t){var n=e.items;i.levels.focus=t;i.levels.push({items:i.currentItems,offset:o});i.currentItems=n;l()}function f(){return r.children().first()}i.goBack=function(){u()};i.selectItem=function(e,t,n){e.preventDefault();e.stopPropagation();if(t.hasSubmenu())d(t);else{t.select(n);i.close(!!t.suppressOnCloseCall)}};i.close=function(e){"function"===typeof i.menu.onClosing&&i.menu.onClosing.call(null);i.options.onCloseFn&&!e&&i.options.onCloseFn();i.$destroy()};i.exposedApi.close=i.close;t.on("start",i.close);l();"function"===typeof i.menu.onOpen&&i.menu.onOpen.call(null);i.$on("$destroy",function(){t.off("start",i.close);"function"===typeof i.destroyComponent?i.destroyComponent():r.off("*").html("").remove()})}]};return r}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e,t,n){this.lastHeight=null;this.document=n||document;this.window=t||window;this.viewport=e||this.document.querySelector("meta[name=viewport]");this.viewportContent=this.viewport.getAttribute("content");this.updateHeight()}e.prototype.clearHeight=function(){this.viewport.setAttribute("content",this.viewportContent)};e.prototype.setHeight=function(e){this.viewport.setAttribute("content",this.viewportContent+", height="+e)};e.prototype.updateHeight=function(){var e=this.window.innerHeight;if(this.lastHeight!==e){this.lastHeight=e;this.setHeight(e);return true}return false};e.prototype.rotate=function(e){var t=function t(){this.updateHeight()&&e()}.bind(this);this.document.activeElement&&this.document.activeElement.blur();this.clearHeight();this.window.setTimeout(t,500);this.window.setTimeout(t,1e3);this.window.setTimeout(t,1500)};e.isNeeded=function(){var e=navigator.userAgent.toLowerCase().indexOf("android")>-1;return e};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-contextmenu" tid="context-menu" qva-outside="close($event)" ng-keydown="keyDown( $event )">\n\t<lui-popover>\n\t\t<ul class="lui-list">\n\t\t\t<li tabindex="0" ng-if="levels.length" class="lui-list__item lui-list__action back-item" qva-focus="levels.focus" qva-activate="goBack();" tcl="context-menu-item">\n\t\t\t\t<i class="lui-list__aside back-icon lui-icon  lui-icon--triangle-left"></i>\n\t\t\t\t<span class="lui-list__text" q-translation="{{options.goBackTitle}}" tid="context-menu-back"></span>\n\t\t\t</li>\n\t\t\t<li ng-repeat="item in currentItems"\n\t\t\t\t\tng-attr-tabindex="{{item.tabIndex}}"\n\t\t\t\tclass="lui-list__item lui-list__action"\n\t\t\t\tng-class="{ \'lui-disabled\': item.disabled, \'qv-contextmenu-has-submenu\': item.hasSubmenu(), \'has-icon\': item.hasIcon(), \'context-divider\': item.divider }"\n\t\t\t\tqva-focus="item.autoFocus"\n\t\t\t\tqva-activate="item.disabled || selectItem($event,item)"\n\t\t\t\ttcl="context-menu-item">\n\n\t\t\t\t<i class="lui-list__aside  item-icon  lui-icon  lui-icon--{{item.icon}}" ng-if="item.hasIcon()"></i>\n\t\t\t\t<span class="lui-list__text" title="{{item.getLabel()}}" tid="{{item.tid}}">{{item.getLabel()}}</span>\n\t\t\t\t<i ng-show="item.hasSubmenu()" class="next-icon lui-list__aside lui-icon lui-icon--triangle-right"></i>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(91)],r=function(e){var t=function e(t){var n=this;Object.keys(t||{}).forEach(function(e){n[e]=t[e]});this.items=this.items||[]};t.prototype.addItem=function(e,n){var i=new t(e);i.tabIndex=0===this.items.length?0:-1;"undefined"===typeof n?this.items.push(i):this.items.splice(n,0,i);return i};t.prototype.hasSubmenu=function(){return this.items.length>0};t.prototype.hasIcon=function(){return!!this.icon};t.prototype.getLabel=function(){function t(t){return Array.isArray(t)?e.get(t[0],t.slice(1).join(",")):e.get(t)}return"function"===typeof this.translation?t(this.translation()):this.translation?t(this.translation):"function"===typeof this.label?this.label():this.label?this.label:"Missing translation/label"};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(527),n(528),n(529),n(530),n(531),n(532),n(394),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547)],r=function(e){e.module("qv.directives",["qv.directives.qva-activate","qv.directives.qva-blur","qv.directives.qva-context-menu","qv.directives.qva-dblclick","qv.directives.qva-delegated-activate","qv.directives.qva-delegated-click","qv.directives.qva-focus","qv.directives.qva-indeterminate","qv.directives.qva-model-onblur","qv.directives.qva-model-onkeyup","qv.directives.qva-mouse-wheel-outside","qv.directives.qva-outside","qv.directives.qva-press","qv.directives.qva-prevent-drag","qv.directives.qva-radial-context-menu","qv.directives.qva-reported-window-size","qv.directives.qva-scroll-into-view","qv.directives.qva-select","qv.directives.qva-select-watch","qv.directives.qva-swipe","qv.directives.qve-highlight","qv.directives.keyboard"])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(11)],r=function(e,t){var n=e.module("qv.directives.qva-activate",[]);n.directive("qvaActivate",["$parse",function(e){return function(n,i,r){var o=e(r.qvaActivate);i.on("qv-activate keypress",function(e){var i="keypress"===e.type&&32===e.which;("keypress"!==e.type||i&&t(e.target).is(":input"))&&n.$apply(function(){o(n,{$event:e})})})}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(258)],r=function(e,t){var n=e.module("qv.directives.qva-blur",[]);n.directive("qvaBlur",["$parse",function(e){return function(n,i,r){var o=e(r.qvaBlur);i.bind("blur",function(e){t(n,function(){o(n,{$event:e})})})}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10)],r=function(e){var t=e.module("qv.directives.qva-context-menu",[]);t.directive("qvaContextMenu",["$parse",function(e){return function(t,n,i){var r=e(i.qvaContextMenu);n.bind("qv-contextmenu",function(e){t.$apply(function(){r(t,{$event:e})})})}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(96)],r=function(e,t){var n=e.module("qv.directives.qva-dblclick",[]);n.directive("qvaDblclick",["$parse",function(e){return function(n,i,r){var o=e(r.qvaDblclick);var a="qva-dblclick"+n.$id;t(i[0]).doubletap({id:a,options:{timeThreshold:250,preventDefault:false},end:function e(){n.$apply(o)}});n.$on("$destroy",function(){t(i[0]).off("doubletap",a)})}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10)],r=function(e){var t=e.module("qv.directives.qva-delegated-activate",[]);t.directive("qvaDelegatedActivate",["$parse",function(e){return function(t,n,i){var r=i["qvaDelegatedActivate"].split(";");for(var o=0;o<r.length;o++){var a=r[o].trim().split("#"),s=a[0],l=e(a[1]);(function(e,i){n.on("qv-activate",s,function(e){t.$apply(function(){i(t,{$event:e})})})})(s,l)}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10)],r=function(e){var t=e.module("qv.directives.qva-delegated-click",[]);t.directive("qvaDelegatedClick",["$parse",function(e){return function(t,n,i){var r=i["qvaDelegatedClick"].split(";");for(var o=0;o<r.length;o++){var a=r[o].trim().split("#"),s=a[0],l=e(a[1]);(function(e,i){n.on("click",s,function(e){t.$apply(function(){i(t,{$event:e})})})})(s,l)}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10)],r=function(e){var t=e.module("qv.directives.qva-indeterminate",[]);t.directive("qvaIndeterminate",[function(){return function e(t,n,i){var r=i.qvaIndeterminate;n.prop("indeterminate",true===r||"true"===r);t.$watch(i.qvaIndeterminate,function(e){n.prop("indeterminate",true===e||"true"===e)})}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10)],r=function(e){var t=e.module("qv.directives.qva-model-onblur",[]);t.directive("qvaModelOnblur",function(){return{restrict:"A",require:"ngModel",priority:1,link:function e(t,n,i,r){if("radio"===i.type||"checkbox"===i.type)return;n.unbind("input keydown change compositionend");n.bind("blur",function(){t.$apply(function(){"undefined"!==typeof i.qvaCancelEditingOnEmpty&&""===n.val().trim()?n.val(r.$modelValue):r.$setViewValue(n.val())})});n.bind("keydown",function(e){if(27===e.which){e.stopPropagation();n.val(r.$modelValue);n.closest("*[tabindex]").focus()}else if(13===e.which){e.stopPropagation();n.closest("*[tabindex]").focus()}})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10)],r=function(e){var t=e.module("qv.directives.qva-model-onkeyup",[]);t.directive("qvaModelOnkeyup",function(){return{require:"ngModel",link:function e(t,n,i,r){n.bind("keyup",function(e){if(27===e.which){e.stopPropagation();r.$rollbackViewValue();n.trigger("blur")}else 13===e.which&&n.trigger("blur");"function"===typeof t.onkeyup&&t.onkeyup(n)})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(99)],r=function(e,t){var n=e.module("qv.directives.qva-mouse-wheel-outside",[]);n.directive("qvaMouseWheelOutside",["$parse","$document",function(e,n){return{restrict:"A",link:function i(r,o,a){var s=e(a.qvaMouseWheelOutside),l=t.getMouseWheelEventName(),c;c=function e(t){var n=false,i=t.target;while(i){if(i===o[0]){n=true;break}i=i.parentElement}n?t.preventDefault():r.$apply(function(){s(r,{$event:t})})};n[0].addEventListener(l,c,true);r.$on("$destroy",function(){n[0].removeEventListener(l,c,true)})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(11)],r=function(e,t){var n=e.module("qv.directives.qva-outside",[]);n.directive("qvaOutside",["$parse",function(e){return function(n,i,r){var o=e(r.qvaOutside),a=false,s=false;function l(e){a="allOutside"===t(e.target).attr("qva-outside-ignore-for")||t(e.target).closest('[qva-outside-ignore-for="allOutside"]').length;s=t(e.target).data("overrideignore");if(a&&!s)return;r.qvaOutsideIgnoreFor&&r.qvaOutsideIgnoreFor===t(e.target).closest("[qva-outside-ignore-for]").attr("qva-outside-ignore-for")||n.$apply(function(){o(n,{$event:e})})}i.bind("qv-outside",l);n.$on("$destroy",function(){i.unbind("qv-outside",l)})}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10)],r=function(e){var t=e.module("qv.directives.qva-press",[]);t.directive("qvaPress",["$parse",function(e){return function(t,n,i){var r=e(i.qvaPress);n.on("qv-press",function(e){t.$apply(function(){r(t,{$event:e})})})}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(96)],r=function(e,t){var n=e.module("qv.directives.qva-prevent-drag",[]);n.directive("qvaPreventDrag",function(){return{restrict:"A",link:function e(n,i){i.on("qv-press",function(e){e.preventDefault();t.WebkitHack.prevent()})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10)],r=function(e){var t=e.module("qv.directives.qva-radial-context-menu",[]);t.directive("qvaRadialContextMenu",["$parse",function(e){return function(t,n,i){var r=e(i.qvaRadialContextMenu);n.bind("qv-radial-contextmenu",function(e){t.$apply(function(){r(t,{$event:e})})})}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(258),n(11)],r=function(e,t,n){var i=e.module("qv.directives.qva-reported-window-size",[]);i.directive("qvaReportedWindowSize",function(){return{restrict:"A",link:function e(i,r,o){function a(){t(i.$root,function(){i[o.qvaReportedWindowSize]={width:n(window).width(),height:n(window).height()}})}a();n(window).bind("resize",a);i.$on("$destroy",function(){n(window).unbind("resize",a)})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(99)],r=function(e,t){var n=e.module("qv.directives.qva-select",[]);n.directive("qvaSelect",["$timeout",function(e){return{restrict:"A",link:function n(i,r,o){0!==o.qvaSelect.length&&"true"!==o.qvaSelect||t.treatAsDesktop()&&e(function(){r[0].select()},100)}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(99)],r=function(e,t){var n=e.module("qv.directives.qva-select-watch",[]);n.directive("qvaSelectWatch",["$timeout",function(e){return{restrict:"A",link:function n(i,r,o){i.$watch(o.qvaSelectWatch,function(n){(""===o.qvaSelectWatch||""!==o.qvaSelectWatch&&true===n)&&t.treatAsDesktop()&&e(function(){r[0].select()})},true)}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(127)],r=function(e,t){var n=e.module("qv.directives.qva-scroll-into-view",[]);n.directive("qvaScrollIntoView",["$timeout",function(e){return{restrict:"A",link:function n(i,r,o){i.$watch(o.qvaScrollIntoView,function(n){n.scrollSelector&&n.scroll&&e(function(){t.scrollElmentIntoView(r,n.scrollSelector)})},true)}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10)],r=function(e){var t=e.module("qv.directives.qva-swipe",[]);t.directive("qvaSwipe",["$parse",function(e){return function(t,n,i){var r=e(i.qvaSwipe);n.bind("qv-swipe",function(e){t.$apply(function(){r(t,{$event:e,$element:n})})})}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(139),n(90),n(208)],r=function(e,t,n,i){var r=e.module("qv.directives.qve-highlight",[]);function o(){return{scope:{text:"@",query:"="},restrict:"EA",replace:true,link:function e(n,i){n.$watchCollection("[text, query]",function(){var e=t.string(n.query);if(!e){i.text(n.text);return}var r=o.highlightMatches(t.string(n.text),e,"lui-texthighlight",n.text);i.html(r)})}}}o.highlightMatches=function(e,t,n,r){return o.markMatches(e,t,r).map(function(e){return e.match?"<span "+i.encodeForAttr("class",n)+">"+i.encodeForHTML(e.text)+"</span>":i.encodeForHTML(e.text)}).join("")};o.markMatches=function(e,t,i){i=e;var r=[];var o=0;var a=new RegExp(n.escapeRegExp(t),"gi");var s=false;while(!s){var l=a.exec(e);if(!l){o<e.length&&r.push({text:i.substring(o),match:false});s=true;continue}l.index>o&&r.push({text:i.substring(o,l.index),match:false});r.push({text:i.substring(l.index,a.lastIndex),match:true});o=a.lastIndex}return r};r.directive("qveHighlight",o);return o}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(10)],r=function(e,t){var n=t.module("qv.directives.keyboard",[]);function i(t,n,i){return["$parse",function(r){return{restrict:"A",link:function o(a,s,l){var c=r(l[t]),u=function e(t){n&&n!==t.which||setTimeout(function(){t.preventDefault();a.$apply(function(){c(a,{$event:t})})})};e(i||s).bind("keydown",u);a.$on("$destroy",function(){e(i||s).unbind("keydown",u)})}}}]}n.directive("qvGlobalKeydown",i("qvGlobalKeydown",void 0,e("body")));n.directive("qvGlobalEscape",i("qvGlobalEscape",27,e("body")));n.directive("qvGlobalEnter",i("qvGlobalEnter",13,e("body")));n.directive("qvKeydown",i("qvKeydown",void 0));n.directive("qvEscape",i("qvEscape",27));n.directive("qvEnter",i("qvEnter",13))}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(549),n(550)],r=function(e){e.module("qv.filters",["qv.filters.qv-array-slice","qv.filters.qv-to-array"])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10)],r=function(e){var t=e.module("qv.filters.qv-array-slice",[]);t.filter("qvArraySlice",function(){return function(e,t,n){return(e||[]).slice(t,n)}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10)],r=function(e){var t=e.module("qv.filters.qv-to-array",[]);t.filter("qvToArray",function(){return function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(91)],r=function(e,t){var n=e.module("qv.locale",[]);n.directive("qPlaceholder",function(){return{restrict:"A",link:function e(n,i,r){var o=false;function a(){i.attr("placeholder",o?"":t.get(r.qPlaceholder))}if(r.ngDisabled){o=true;n.$watch(r.ngDisabled,function(e){o=e;a()})}r.$observe("qPlaceholder",function(){a()})}}});n.directive("qSimpleTranslation",function(){return{restrict:"A",link:function e(n,i,r){function o(e){i.text(t.get(e))}t.ready.then(function(){r.$observe("qTranslation",o)})}}});n.directive("qTranslation",function(){return{restrict:"A",link:function e(n,i,r){function o(e){var n=e.split(","),o,a,s,l=JSON.parse(r.qHtmlTranslationIndexes||"null"),c=l?"html":"text",u=n[0].indexOf("|");a=u>=0&&n.length>=2?"1"===n[1]?n[0].substring(0,u).trim():n[0].substring(u+1).trim():n[0];o=t.get(a);l&&n.push.apply(n,l);for(s=1;s<n.length;s++)o=o.replace("{"+(s-1)+"}",n[s]);i[c](o)}t.ready.then(function(){r.$observe("qTranslation",o);o(r.qTranslation)})}}});n.directive("translate",function(){return function e(n,i,r){function o(e){if(e)if("string"===typeof e){i.attr("data-translation",e);i.removeAttr("data-text")}else{i.attr("data-translation",e.id);i.data("text",{value:e.value})}else{i.removeAttr("data-translation");i.removeAttr("data-text")}t.apply(i[0])}n.$watch(r.translate,o)}});n.directive("qTitleTranslation",function(){return{restrict:"A",link:function e(n,i,r){function o(e){e?i.attr("title",t.get(e)):i.removeAttr("title")}t.ready.then(function(){r.$observe("qTitleTranslation",o);o(r.qTitleTranslation)})}}});n.filter("translate",function(){return function(e){return t.get(e)}});n.filter("translatetoupper",function(){return function(e){return t.get(e).toUpperCase()}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=l(n(10));var r=l(n(553));var o=l(n(554));var a=l(n(555));var s=l(n(91));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;"value"in i&&(i.writable=true);Object.defineProperty(e,i.key,i)}}function d(e,t,n){t&&u(e.prototype,t);n&&u(e,n);return e}var f=function(){function e(t,n){c(this,e);this.factory=t;this.data=t.getOptions();this.aboutService=this.data.aboutService;this.sections=this.data.sections;this.activeView=this.sections[0];this.doc=n[0]}d(e,[{key:"scrollToLicence",value:function e(t){"undefined"!==typeof t?this.doc.getElementsByClassName("about-dialog-licences-entry")[t].scrollIntoView(true):this.doc.getElementById("about-dialog-section__licences").scrollTop=0}},{key:"translate",value:function e(t){return s.default.get(t)}},{key:"close",value:function e(){this.factory.close()}},{key:"copy",value:function e(){if(document.execCommand)try{var t=this.get("featuresList").join(", ");var n=this.doc.getElementById("qs-about-copy-input");n.value=t;n.select();document.execCommand("copy")}catch(e){}}},{key:"get",value:function e(t){return this.data[t]}},{key:"getSystemInfo",value:function e(t){return this.get("systemInfo")[t]}},{key:"getText",value:function e(t){return this.get("text")[t]||t}},{key:"getIconClass",value:function e(){return{"lui-icon--arrow-down":this.showVersion,"lui-icon--arrow-right":!this.showVersion}}},{key:"goTo",value:function e(t){this.activeView=t}},{key:"isActive",value:function e(t){return{"lui-active":t===this.activeView}}}]);return e}();f.$inject=["qvAboutFactory","$document"];var p=i.default.module("qv.about-dialog",[o.default,a.default]).component("qvAboutDialog",{template:r.default,bindings:{},controllerAs:"AD",controller:f}).name;t.default=p;e.exports=t.default},function(e,t){e.exports='<lui-dialog qv-id="about-dialog" id="about-dialog">\n  <div class="lui-dialog__header lui-dialog__header--about"></div>\n  <div class="lui-dialog__body lui-dialog__body--about">\n    <div class="about-dialog__viewpanel">\n      <ul class="lui-list about-dialog-sections--normal" data-tid="about-ul-list">\n        <li ng-class="AD.isActive(item)" ng-repeat="item in AD.sections" ng-click="AD.activeView = item" title="{{ ::AD.getText(item) }}"\n          data-tid="qsad-li-{{ ::AD.getText(item) }}" class="lui-list__item lui-list__item--about-dialog">\n          <span class="lui-list__text lui-list__text--about-dialog">{{ ::AD.getText(item) }}</span>\n        </li>\n      </ul>\n\n      <lui-select class="about-dialog-sections about-dialog-sections--small" x-model="AD.activeView">\n        <option ng-repeat="item in AD.sections" value="{{ ::item }}">{{ ::AD.getText(item) }}</option>\n      </lui-select>\n    </div>\n    <div class="about-dialog__contentpanel" ng-switch="AD.activeView">\n      \x3c!-- ABOUT --\x3e\n      <div ng-switch-when="about" data-tid="qsad-section-about" id="about-dialog-section__about">\n        <div class="about-dialog-section__header">\n          <div class="about-dialog-section__about-cont">\n            <img class="about-dialog-logo" ng-src="{{::AD.get(\'logo\')}}" draggable="false"></img>\n            <div class="about-dialog-divider"></div>\n            <div class="about-dialog-product-version" ng-click="AD.showVersion=!AD.showVersion">\n              <p class="about-dialog-product-name" data-tid="about-product-name">\n                {{::AD.getSystemInfo("productName")}} {{::AD.getSystemInfo("releaseLabel")}}\n                <span class="about-dialog-product-toggle-icon lui-icon" ng-class="AD.getIconClass()"></span>\n              </p>\n              <p class="about-dialog-product-id" data-tid="about-product-id">{{::AD.getSystemInfo("senseId")}}</p>\n              <div ng-if="AD.showVersion">\n                <ul class="about-dialog-version">\n                  <li class="about-dialog-version-entry" ng-repeat="info in ::AD.get(\'componentsList\') track by info.component">{{info.component}}\n                    {{info.version}}</li>\n                </ul>\n              </div>\n            </div>\n            <div class="about-dialog-header-licence">{{ ::AD.getText(\'licenceAgreement\') }}</div>\n            <a target="_blank" ng-href="{{ ::AD.get(\'licenceAgreementLink\') }}" class="lui-button lui-button--download">\n              <span>{{ ::AD.getText(\'downloadPdf\') }}</span>\n            </a>\n            <div class="about-dialog__space"></div>\n          </div>\n        </div>\n        <div class="about-dialog-section__footer">\n          <div class="about-copyright">{{ ::AD.getText(\'copyright\') }}</div>\n          <a class="about-link" target="_blank" ng-href="{{::AD.get(\'webPageUrl\')}}">{{::AD.get(\'webPageUrl\')}}</a>\n        </div>\n      </div>\n      \x3c!-- THIRDPARTY --\x3e\n      <div ng-switch-when="thirdParty" data-tid="qsad-section-thirdParty" id="about-dialog-section__licences">\n        <div class="about-dialog-licences__wrapper">\n          <h2 class="about-dialog-licences-h2">{{ ::AD.getText(\'thirdParty\') }}</h2>\n\n          <p class="about-dialog-licences-p">{{ ::AD.getText(\'thirdPartyIntro\') }}</p>\n          <ul class="about-dialog-licences-ul">\n            <li class="about-dialog-licences__link" ng-repeat="licence in ::AD.get(\'thirdPartyList\')" ng-show="::licence.name">\n              <a class="about-dialog-licences__a-style" ng-click="AD.scrollToLicence($index)">{{licence.name}}\n                {{licence.version}}</a>\n            </li>\n          </ul>\n\n          <div class="about-dialog-licences-entry" ng-repeat="licence in ::AD.get(\'thirdPartyList\')" ng-show="::licence.name">\n            <h3 class="about-dialog-licences-entry__h3">{{licence.name}} {{licence.version}}\n              <button class="lui-button lui-button__about-dialog-licence" ng-click="AD.scrollToLicence()">\n                <i class="lui-button__icon  lui-icon  lui-icon--triangle-top"></i>\n              </button>\n            </h3>\n            <a class="about-dialog-licences-entry__a" ng-href="{{licence.url}}" target="_blank">{{licence.licence}}</a>\n            <div class="about-dialog-licences-text"><code class="about-dialog-licences__code">{{licence.text}}</code></div>\n          </div>\n        </div>\n      </div>\n      \x3c!-- FEATURES --\x3e\n      <div ng-switch-when="features" data-tid="qsad-section-features" id="qs-ads-features">\n        <h2 class="qs-ads-features-h2">{{ ::AD.translate(\'About.Features.Title\') }}</h2>\n        <div clasS="qs-ads-features-header">\n          <span ng-if="AD.aboutService">{{ ::AD.translate(\'About.Features.Description\') }}</span>\n          <div ng-if="!AD.aboutService">\n            <div><span>{{ ::AD.translate(\'About.Features.InfoHub.Description\') }}</span></div>\n            <a target="_blank" class="about-link" href="https://infohub.qlikdev.com/dashboard">https://infohub.qlikdev.com/dashboard</a>\n          </div>\n        </div>\n        <ul class="lui-list qs-ads-features-ul" style="cursor: default;" aria-disabled="true" ng-click="AD.copy()">\n          <li class="lui-list__item" ng-repeat="feature in ::AD.get(\'featuresList\')">\n            <span class="lui-list__text">{{feature}}</span>\n          </li>\n        </ul>\n        <div style="position: absolute; top: -100000px">\n            <input id="qs-about-copy-input" value="">\n        </div>\n      </div>\n    </div>\n\n  </div>\n  <div class="lui-dialog__footer lui-dialog__footer--about">\n    <button class="lui-button" data-tid="about-close" qv-focus ng-click="AD.close()">{{ ::AD.getText(\'close\') }}</button>\n  </div>\n</lui-dialog>\n'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=r(n(10));function r(e){return e&&e.__esModule?e:{default:e}}var o=i.default.module("qv.about-dialog.factory",["leonardo-ui"]).factory("qvAboutFactory",["luiDialog","$q","qvAboutRestConnect",function(e,t,n){var i={};var r;var o;var a=function t(){r=e.show({template:"<qv-about-dialog></qv-about-dialog>",closeOnEscape:true});r.closed.then(function(){r=null});return r};i.getOptions=function(){return o||{}};i.show=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r)return;var i=e.text,s=e.logo;var l=function e(){return t.all({thirdPartyList:n.thirdParty(),systemInfo:n.systemInfo(),componentsList:n.components(),licenceAgreementLink:n.licenceAgreementLink(),externalUrls:n.externalUrls()}).then(function(e){var t=e.systemInfo,r=e.componentsList,l=e.thirdPartyList,c=e.licenceAgreementLink,u=e.externalUrls;var d=u.qlikWebPageUrl;o={systemInfo:t,componentsList:r,thirdPartyList:l,licenceAgreementLink:c,featuresList:n.featuresSync(),webPageUrl:d,text:i,logo:s,sections:["about","thirdParty","features"],aboutService:true};return a()})};var c=function e(){o={systemInfo:{},componentsList:{},thirdPartyList:{},licenceAgreementLink:{},featuresList:n.featuresSync(),webPageUrl:"",text:i,logo:s,sections:["features"],aboutService:false};return a()};return n.hasAbout().then(l).catch(c)};i.showSync=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r)return;o=t;r=e.show({template:"<qv-about-dialog></qv-about-dialog>",closeOnEscape:true});r.closed.then(function(){r=null});return r};i.close=function(){if(!r)return;r.close()};return i}]).name;t.default=o;e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=a(n(10));var r=a(n(49));var o=a(n(13));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return u(e)||c(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function u(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var d=i.default.module("qv.about-dialog.rest-factory",[]).factory("qvAboutRestConnect",["$http",function(e){var t=function e(t){return t.data};var n=function t(n){n.headers=n.headers?n.headers:{};n.headers["x-qlik-capabilities"]="about";n.method="GET";n.cache=true;return e(n)};var i;var a=function e(){if(i)return i;i=n({url:"".concat(o.default.apiPath,"about/v1/language")});return i};var l={hasAbout:a,featuresSync:function e(){var t=r.default.get();return Object.keys(t).reduce(function(e,n){if(t[n])return[].concat(s(e),[n]);return e},[]).sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase(),"en")})},components:function e(){return n({url:"".concat(o.default.apiPath,"about/v1/components")}).then(t)},externalUrls:function e(){return n({url:"".concat(o.default.apiPath,"about/v1/externalUrls")}).then(t)},systemInfo:function e(){return n({url:"".concat(o.default.apiPath,"about/v1/systemInfo")}).then(t)},thirdParty:function e(){return n({url:"".concat(o.default.apiPath,"about/v1/thirdParty")}).then(function(e){return t(e).sort(function(e,t){var n=e&&e.name||"";var i=t&&t.name||"";return n.toLocaleUpperCase().localeCompare(i.toLocaleUpperCase())})})},licenceAgreementLink:function e(){return"".concat(o.default.apiPath,"about/v1/licenses/QlikSense.pdf")}};return l}]).name;t.default=d;e.exports=t.default},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(557)],r=function(e,t){var n=false;e.module("qv.loader",[]).factory("qvLoader",["$compile","$rootScope","$document","$timeout","$q",function(i,r,o,a,s){var l=r.$new(),c=o.find("body"),u,d,f={},p,h;function v(){l.template=t;l.hugeLoader=true;l.bigLoader=false;l.mediumLoader=false;l.normalLoader=false;l.smallLoader=false;l.tinyLoader=false}function g(){for(var e in f){l[e]=null;delete l[e]}v();l.ngClasses&&(l.ngClasses["qv-fade-in"]=false);u&&u.off().remove();u=null;d=null;if(p){p.remove();p=null}}v();p=c.find("#qv-init-ui-blocker");return{show:function t(r){n=true;var o;l.fadeOut=false;a.cancel(h);f=r||{};for(var s in r)l[s]=r[s];l.messageObj=l.messageObj||{};l.messageObj.task||(l.messageObj.task="");l.ngClasses={"qv-loader-huge":l.hugeLoader,"qv-loader-big":l.bigLoader,"qv-loader-medium":l.mediumLoader,"qv-loader-normal":l.normalLoader,"qv-loader-small":l.smallLoader,"qv-loader-tiny":l.tinyLoader,"qv-fade-in":false};o=l.appendTo?l.appendTo:c;d=e.element(l.template);u=i(d)(l).appendTo(o);l.appendTo=null;delete l.appendTo;h=a(function(){l.ngClasses["qv-fade-in"]=true});p&&p.length>0&&p.fadeOut(800,function(){p=null})},setMessageObj:function e(t){l.messageObj.task=t||""},isOpen:function e(){return n},close:function e(t){var i=s.defer();var r=750;a.cancel(h);if(t){l.fadeOut=true;g();n=false;i.resolve()}else a(function(){l.fadeOut=true;h=a(function(){g();n=false;return i.resolve()},r+200)},r);return i.promise}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qs-pong qv-block-ui" ng-class="{\'qv-fade-out\': fadeOut, \'qv-transparent-background\': transparentBackground}" tid="3e1f54">\n\t<div class="qv-animate qv-loader-container qs-pong-loader-logo"  ng-class="ngClasses">\n\t\t<svg enable-background="new 0 0 431.2 126.5" viewBox="0 0 431.2 126.5" xmlns="http://www.w3.org/2000/svg"><path d="m251.8 66.9c-1.9-3.1.6-5.7.6-5.7l22-22.7c2.5-2.6-1.1-2.6-1.1-2.6h-20.5c-3.6 0-6.1 2.6-6.1 2.6l-20.4 21.6c-2.5 2.6-2.5-1-2.5-1v-47.1c0-3.6-3.6-3.6-3.6-3.6h-15.5c-3.5 0-3.5 3.5-3.5 3.5v98.7c0 3.6 3.6 3.6 3.6 3.6h15.4c3.5 0 3.5-3.5 3.5-3.5v-17.4c0-3.6 2.6-6.1 2.6-6.1l7.3-6.8 18.2 30.6c1.8 3.1 5.4 3.1 5.4 3.1h19.5c3.6 0 1.7-3.1 1.7-3.1zm-66.8 43.6v-71.1c0-3.6-3.6-3.6-3.6-3.6h-15.6c-3.6 0-3.6 3.6-3.6 3.6v71.1c0 3.6 3.6 3.6 3.6 3.6h15.6c3.6 0 3.6-3.6 3.6-3.6zm-.6-88.5v-10.2s0-3.5-3.5-3.5h-15.2s-3.5 0-3.5 3.5v10.2s0 3.5 3.5 3.5h15.3s3.4 0 3.4-3.5zm-38.9 88.5v-98.5c0-3.6-3.6-3.6-3.6-3.6h-15.9c-3.6 0-3.6 3.6-3.6 3.6v98.5c0 3.6 3.6 3.6 3.6 3.6h15.9c3.6 0 3.6-3.6 3.6-3.6zm-35.7-4.2s2-2.3-.3-4.3l-12.7-11.1c5.7-8.5 9.1-18.6 9.1-29.6 0-29.2-23.7-52.9-52.9-52.9-29.3-.1-53 23.6-53 52.9 0 29.2 23.7 52.9 52.9 52.9 10.7 0 20.6-3.2 29-8.7l14 12.1s2.3 2 4.3-.3zm-26.3-45c0 16.9-13.7 30.6-30.6 30.6s-30.6-13.7-30.6-30.6 13.7-30.6 30.6-30.6 30.6 13.7 30.6 30.6z" fill="#54565b"/><path d="m428.3 107.4-17-14.3c5.9-9.4 9.4-20.5 9.4-32.4 0-33.5-27.2-60.7-60.7-60.7s-60.7 27.2-60.7 60.7 27.2 60.7 60.7 60.7c13 0 25.1-4.1 35-11.1l18.1 15.2s2.7 2.3 5-.4l10.8-12.8c-.2.1 2.1-2.6-.6-4.9zm-31.1-46.7c0 20.6-16.7 37.3-37.3 37.3s-37.3-16.7-37.3-37.3 16.7-37.3 37.3-37.3 37.3 16.7 37.3 37.3z" fill="#059848"/><g fill="#54565b"><path d="m336 60.7c0-13.2 10.7-23.9 23.9-23.9s23.9 10.7 23.9 23.9-10.7 23.9-23.9 23.9c-13.2.1-23.9-10.6-23.9-23.9z"/><path d="m418 17.9c0-3.7 3-6.6 6.6-6.6 3.7 0 6.6 3 6.6 6.6s-3 6.6-6.6 6.6-6.6-3-6.6-6.6zm6.6-5.7c-3.1 0-5.6 2.5-5.6 5.7s2.4 5.7 5.6 5.7 5.6-2.5 5.6-5.7-2.4-5.7-5.6-5.7zm-1.5 9.7h-.9v-8.1h2.9c1.4 0 2.5.7 2.5 2.2 0 1.3-.7 2.1-1.9 2.2l2.3 3.6h-1.1l-2.1-3.6h-1.6v3.7zm0-4.3h1.8c1.1 0 1.8-.2 1.8-1.5 0-1-.8-1.4-1.8-1.4h-1.8z"/></g></svg>\n\t\t<div class="qv-ping-pong-progress-bar"></div>\n\t</div>\n\t<div class="qv-loader-text" ng-class="ngClasses">\n\t\t<div q-translation="{{messageObj.task}}">&#8203;</div>\n\t\t<div ng-show="messageObj.message" q-translation="{{messageObj.message}}"></div>\n\t</div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(559)],r=function(e){e.module("qv.dragoman",["qv.dragoman-date"])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(91),n(50),n(489)],r=function(e,t,n,i){var r="1753-01-01T00:00:00.000Z",o=n.isSmallDevice,a={restrict:"E",replace:true,scope:{date:"=",dateFormat:"@",timeFormat:"@",dateTimeFormat:"@",skeleton:"@",customLangCode:"@",defaultString:"@"},template:'<span class="qv-moment">{{dateToShow}}</span>',link:function e(n){var a=void 0!==n.defaultString?t.get(n.defaultString):"";var s={};var l="undefined"!==typeof n.dateFormat;var c="undefined"!==typeof n.timeFormat;var u="undefined"!==typeof n.dateTimeFormat;var d="undefined"!==typeof n.skeleton;l?s.date=n.dateFormat:c?s.time=n.timeFormat:u?s.datetime=n.dateTimeFormat:d&&(s.skeleton=n.skeleton);l||c||u||d||(s.skeleton=o?"yMd":"yMMMdjm");n.customLangCode&&(s.locale=n.customLangCode);n.dateToShow=n.date===r||"undefined"===typeof n.date?a:i.format.date(n.date,s);n.$watch("date",function(){n.dateToShow=n.date===r||"undefined"===typeof n.date?a:i.format.date(n.date,s)})}};e.module("qv.dragoman-date",[]).directive("drmFormatDate",function(){return a}).filter("drmFormatDateFilter",function(){return i.format.date});return{directive:a}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(91),n(110),n(561),n(213)],r=function(e,t,n,i){var r=Object.assign({},t.NxLocalizedErrorCode,n.NxLocalizedErrorCode);function o(){window.__private__notifyRefresh__?window.parent.postMessage("refresh","*"):setTimeout(function(){location.reload(true)})}function a(e){var t=false;switch(e.code){case r.LOCERR_SERVER_OUT_OF_SESSION_AND_USER_CALS:case r.LOCERR_SERVER_OUT_OF_SESSION_CALS:case r.LOCERR_SERVER_OUT_OF_USAGE_CALS:case r.LOCERR_SERVER_OUT_OF_CALS:case r.LOCERR_SERVER_OUT_OF_NAMED_CALS:case r.LOCERR_SERVER_LICENSE_EXPIRED:t=true;break;default:break}return t}function s(t){return t.code?e.get("ErrorCode."+t.code,t.parameter):e.get(t.message)}function l(e){return e.code===r.LOCERR_PERSONAL_VERSION_EXPIRED}function c(e){return"ProxyError.OnSessionTimedOut"===e.message}function u(t){var n=t.error;var o=t.blockingDialog;var u="closeDialog";var d=e.get(s(n));var f=e.get("ErrorDialog.Title");if(a(n,r))u="refreshCloseDialog";else if(l(n)){f=e.get("ErrorCode.12001.Sense.Desktop.Expired");d=e.get("Info.QlikView.Personal.Upgrade",["<a href='"+i.personalUpgradeUrl+"' target='_blank'>"+i.personalUpgradeBase+"</a>"]);u="refreshDialog"}else if(c(n)){f=e.get("TimeoutDialog.Title");u="refreshDialog"}return{type:o?"refreshDialog":u,title:f,message:d}}function d(e){var t=e.error;var n={type:null,title:null,message:null,code:t.code,error:t};return Object.assign({},n,u(e))}var f={getMessageObject:d,getErrorDescription:s,isLocErr:a,refreshPage:o,errors:r};return f}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){return{NxLocalizedErrorCode:{LOCERR_JSON_RPC_ENTITY_NOT_FOUND:-32001,LOCERR_JSON_RPC_ACCESS_DENIED:-32002,LOCERR_JSON_RPC_APP_DUPLICATION_FAILED:-32003}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){(function(t,n){e.exports=n()})(this,function(){"use strict";var e={};e.isObject=function e(t){return"object"===typeof t&&null!==t};e.isNumber=function e(t){return"number"===typeof t};e.isUndefined=function e(t){return void 0===t};e.isFunction=function e(t){return"function"===typeof t};function t(){t.init.call(this)}var n=t;t.EventEmitter=t;t.prototype._events=void 0;t.prototype._maxListeners=void 0;t.defaultMaxListeners=10;t.init=function(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0};t.prototype.setMaxListeners=function(t){if(!e.isNumber(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");this._maxListeners=t;return this};t.prototype.emit=function(t){var n,i,r,o,a,s;this._events||(this._events={});if("error"===t&&!this._events.error){n=arguments[1];throw n instanceof Error?n:Error('Uncaught, unspecified "error" event.')}i=this._events[t];if(e.isUndefined(i))return false;if(e.isFunction(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:r=arguments.length;o=new Array(r-1);for(a=1;a<r;a++)o[a-1]=arguments[a];i.apply(this,o)}else if(e.isObject(i)){r=arguments.length;o=new Array(r-1);for(a=1;a<r;a++)o[a-1]=arguments[a];s=i.slice();r=s.length;for(a=0;a<r;a++)s[a].apply(this,o)}return true};t.prototype.addListener=function(n,i){var r;if(!e.isFunction(i))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",n,e.isFunction(i.listener)?i.listener:i);this._events[n]?e.isObject(this._events[n])?this._events[n].push(i):this._events[n]=[this._events[n],i]:this._events[n]=i;if(e.isObject(this._events[n])&&!this._events[n].warned){var r;r=e.isUndefined(this._maxListeners)?t.defaultMaxListeners:this._maxListeners;if(r&&r>0&&this._events[n].length>r){this._events[n].warned=true;e.isFunction(console.error)&&console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[n].length);e.isFunction(console.trace)&&console.trace()}}return this};t.prototype.on=t.prototype.addListener;t.prototype.once=function(t,n){if(!e.isFunction(n))throw TypeError("listener must be a function");var i=false;function r(){this.removeListener(t,r);if(!i){i=true;n.apply(this,arguments)}}r.listener=n;this.on(t,r);return this};t.prototype.removeListener=function(t,n){var i,r,o,a;if(!e.isFunction(n))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;i=this._events[t];o=i.length;r=-1;if(i===n||e.isFunction(i.listener)&&i.listener===n){delete this._events[t];this._events.removeListener&&this.emit("removeListener",t,n)}else if(e.isObject(i)){for(a=o;a-- >0;)if(i[a]===n||i[a].listener&&i[a].listener===n){r=a;break}if(r<0)return this;if(1===i.length){i.length=0;delete this._events[t]}else i.splice(r,1);this._events.removeListener&&this.emit("removeListener",t,n)}return this};t.prototype.removeAllListeners=function(t){var n,i;if(!this._events)return this;if(!this._events.removeListener){0===arguments.length?this._events={}:this._events[t]&&delete this._events[t];return this}if(0===arguments.length){for(n in this._events){if("removeListener"===n)continue;this.removeAllListeners(n)}this.removeAllListeners("removeListener");this._events={};return this}i=this._events[t];if(e.isFunction(i))this.removeListener(t,i);else if(Array.isArray(i))while(i.length)this.removeListener(t,i[i.length-1]);delete this._events[t];return this};t.prototype.listeners=function(t){var n;n=this._events&&this._events[t]?e.isFunction(this._events[t])?[this._events[t]]:this._events[t].slice():[];return n};t.listenerCount=function(t,n){var i;i=t._events&&t._events[n]?e.isFunction(t._events[n])?1:t._events[n].length:0;return i};var i={mixin:function e(t){Object.keys(n.prototype).forEach(function(e){t[e]=n.prototype[e]});n.init(t)}};var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;"value"in i&&(i.writable=true);Object.defineProperty(e,i.key,i)}}return function(t,n,i){n&&e(t.prototype,n);i&&e(t,i);return t}}();var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};var l=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0===a)return;return a.call(i)};var c=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)};var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t};var d=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};var f=1e3;var p=4e3;var h=0;var v=function(){function e(t){o(this,e);var n=this;s(n,t);this.Promise=this.config.Promise;this.definition=this.config.definition;i.mixin(n);h+=1;n.id=h;n.rpc.on("socket-error",n.onRpcError.bind(n));n.rpc.on("closed",n.onRpcClosed.bind(n));n.rpc.on("message",n.onRpcMessage.bind(n));n.rpc.on("notification",n.onRpcNotification.bind(n));n.rpc.on("traffic",n.onRpcTraffic.bind(n));n.on("closed",function(){return n.onSessionClosed()})}a(e,[{key:"onRpcError",value:function e(t){if(this.suspendResume.isSuspended)return;this.emit("socket-error",t)}},{key:"onRpcClosed",value:function e(t){var n=this;if(this.suspendResume.isSuspended)return;if(t.code===f||t.code===p)return;this.config.suspendOnClose?this.suspendResume.suspend().then(function(){return n.emit("suspended",{initiator:"network"})}):this.emit("closed",t)}},{key:"onRpcMessage",value:function e(t){var n=this;if(this.suspendResume.isSuspended)return;t.change&&t.change.forEach(function(e){return n.emitHandleChanged(e)});t.close&&t.close.forEach(function(e){return n.emitHandleClosed(e)})}},{key:"onRpcNotification",value:function e(t){this.emit("notification:*",t.method,t.params);this.emit("notification:"+t.method,t.params)}},{key:"onRpcTraffic",value:function e(t,n){this.emit("traffic:*",t,n);this.emit("traffic:"+t,n)}},{key:"onSessionClosed",value:function e(){this.apis.getApis().forEach(function(e){e.api.emit("closed");e.api.removeAllListeners()});this.apis.clear()}},{key:"getObjectApi",value:function e(t){var n=t.handle,i=t.id,r=t.type,o=t.genericType;var a=this.apis.getApi(n);if(a)return a;var s=this.definition.generate(r);a=s(this,n,i,o);this.apis.add(n,a);return a}},{key:"open",value:function e(){var t=this;if(!this.globalPromise){var n={handle:-1,id:"Global",type:"Global",genericType:"Global"};this.globalPromise=this.rpc.open().then(function(){return t.getObjectApi(n)}).then(function(e){t.emit("opened");return e})}return this.globalPromise}},{key:"send",value:function t(n){var i=this;if(this.suspendResume.isSuspended)return this.Promise.reject(new Error("Session suspended"));n.id=this.rpc.createRequestId();var r=this.intercept.executeRequests(this,this.Promise.resolve(n)).then(function(e){var t=s({},i.config.protocol,e);delete t.outKey;var r=i.rpc.send(t);e.retry=function(){return i.send(n)};return i.intercept.executeResponses(i,r,e)});e.addToPromiseChain(r,"requestId",n.id);return r}},{key:"suspend",value:function e(){var t=this;return this.suspendResume.suspend().then(function(){return t.emit("suspended",{initiator:"manual"})})}},{key:"resume",value:function e(t){var n=this;return this.suspendResume.resume(t).then(function(e){n.emit("resumed");return e})}},{key:"close",value:function e(){var t=this;this.globalPromise=void 0;return this.rpc.close().then(function(e){return t.emit("closed",e)})}},{key:"emitHandleChanged",value:function e(t){var n=this.apis.getApi(t);n&&n.emit("changed")}},{key:"emitHandleClosed",value:function e(t){var n=this.apis.getApi(t);if(n){n.emit("closed");n.removeAllListeners()}}}],[{key:"addToPromiseChain",value:function t(n,i,r){n[i]=r;var o=n.then;n.then=function t(){for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];var l=o.apply(this,a);e.addToPromiseChain(l,i,r);return l}}}]);return e}();var g=function(){function e(){o(this,e);this.entries={}}a(e,[{key:"add",value:function e(t,n){t+="";if("undefined"!==typeof this.entries[t])throw new Error("Entry already defined with key "+t);this.entries[t]=n}},{key:"set",value:function e(t,n){t+="";this.entries[t]=n}},{key:"remove",value:function e(t){delete this.entries[t]}},{key:"get",value:function e(t){return this.entries[t]}},{key:"getAll",value:function e(){var t=this;return Object.keys(this.entries).map(function(e){return{key:e,value:t.entries[e]}})}},{key:"getKey",value:function e(t){var n=this;return Object.keys(this.entries).filter(function(e){return n.entries[e]===t})[0]}},{key:"clear",value:function e(){this.entries={}}}]);return e}();var m=Object.prototype.hasOwnProperty;function b(e){return e.substring(0,1).toLowerCase()+e.substring(1)}function y(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];if(1===i.length&&"object"===r(i[0])&&!Array.isArray(i[0])){var a=Object.keys(i[0]).every(function(e){return m.call(t,e)});a&&(i=Object.keys(t).map(function(e){return i[0][e]||t[e]}))}return e.apply(this,i)}var x=function(){function e(t){o(this,e);this.config=t;this.Promise=t.Promise;this.schema=t.schema;this.mixins=new g;this.types=new g}a(e,[{key:"registerMixin",value:function e(t){var n=this;var i=t.types,r=t.type,o=t.extend,a=t.override,s=t.init;Array.isArray(i)||(i=[i]);r&&i.push(r);var l={extend:o,override:a,init:s};i.forEach(function(e){var t=n.mixins.get(e);t?t.push(l):n.mixins.add(e,[l])})}},{key:"generate",value:function e(t){var n=this.types.get(t);if(n)return n;if(!this.schema.structs[t])throw new Error(t+" not found");var i=this.generateApi(t,this.schema.structs[t]);this.types.add(t,i);return i}},{key:"generateApi",value:function e(t,n){var r=Object.create({});this.generateDefaultApi(r,n);this.mixinType(t,r);this.mixinNamedParamFacade(r,n);return function e(n,o,a,s){var l=this;var c=Object.create(r);i.mixin(c);Object.defineProperties(c,{session:{enumerable:true,value:n},handle:{enumerable:true,value:o,writable:true},id:{enumerable:true,value:a},type:{enumerable:true,value:t},genericType:{enumerable:true,value:s}});var u=this.mixins.get(t)||[];if(s!==t){this.mixinType(s,c);u=u.concat(this.mixins.get(s)||[])}u.forEach(function(e){"function"===typeof e.init&&e.init({config:l.config,api:c})});return c}.bind(this)}},{key:"generateDefaultApi",value:function e(t,n){Object.keys(n).forEach(function(e){var i=n[e].Out;var r=1===i.length?i[0].Name:-1;var o=b(e);t[o]=function t(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return this.session.send({handle:this.handle,method:e,params:i,outKey:r})}})}},{key:"mixinType",value:function e(t,n){var i=this.mixins.get(t);i&&i.forEach(function(e){var i=e.extend,r=void 0===i?{}:i,o=e.override,a=void 0===o?{}:o;Object.keys(a).forEach(function(e){if("function"!==typeof n[e]||"function"!==typeof a[e])throw new Error("No function to override. Type: "+t+" function: "+e);var i=n[e];n[e]=function t(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return a[e].apply(this,[i.bind(this)].concat(r))}});Object.keys(r).forEach(function(e){if("function"===typeof n[e]&&"function"===typeof r[e])throw new Error("Extend is not allowed for this mixin. Type: "+t+" function: "+e);n[e]=r[e]})})}},{key:"mixinNamedParamFacade",value:function e(t,n){Object.keys(n).forEach(function(e){var i=b(e);var r=t[i];var o=n[e].In.reduce(function(e,t){e[t.Name]=t.DefaultValue;return e},{});t[i]=function e(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return y.apply(this,[r,o].concat(n))}})}}]);return e}();var S=function(){function e(t,n,r){o(this,e);i.mixin(this);this.id=t;this.resolve=n;this.reject=r}a(e,[{key:"resolveWith",value:function e(t){this.resolve(t);this.emit("resolved",this.id)}},{key:"rejectWith",value:function e(t){this.reject(t);this.emit("rejected",this.id)}}]);return e}();var w=function(){function e(t){o(this,e);s(this,t);i.mixin(this);this.resolvers={};this.requestId=0;this.openedPromise=void 0}a(e,[{key:"open",value:function e(){var t=this;var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!n&&this.openedPromise)return this.openedPromise;try{this.socket=this.createSocket(this.url)}catch(e){return this.Promise.reject(e)}this.socket.onopen=this.onOpen.bind(this);this.socket.onclose=this.onClose.bind(this);this.socket.onerror=this.onError.bind(this);this.socket.onmessage=this.onMessage.bind(this);this.openedPromise=new this.Promise(function(e,n){return t.registerResolver("opened",e,n)});this.closedPromise=new this.Promise(function(e,n){return t.registerResolver("closed",e,n)});return this.openedPromise}},{key:"onOpen",value:function e(){var t=this;this.resolvers.opened.resolveWith(function(){return t.closedPromise})}},{key:"onClose",value:function e(t){this.emit("closed",t);this.resolvers.closed.resolveWith(t);this.rejectAllOutstandingResolvers({code:-1,message:"Socket closed"})}},{key:"close",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.socket){this.socket.close(t,n);this.socket=null}return this.closedPromise}},{key:"onError",value:function e(t){this.resolvers.opened?this.resolvers.opened.rejectWith(t):this.emit("socket-error",t);this.rejectAllOutstandingResolvers({code:-1,message:"Socket error"})}},{key:"onMessage",value:function e(t){var n=JSON.parse(t.data);this.emit("traffic","received",n);if("undefined"!==typeof n.id){this.emit("message",n);this.resolvers[n.id].resolveWith(n)}else this.emit(n.params?"notification":"message",n)}},{key:"rejectAllOutstandingResolvers",value:function e(t){var n=this;Object.keys(this.resolvers).forEach(function(e){if("opened"===e||"closed"===e)return;var i=n.resolvers[e];i.rejectWith(t)})}},{key:"unregisterResolver",value:function e(t){var n=this.resolvers[t];n.removeAllListeners();delete this.resolvers[t]}},{key:"registerResolver",value:function e(t,n,i){var r=this;var o=new S(t,n,i);this.resolvers[t]=o;o.on("resolved",function(e){return r.unregisterResolver(e)});o.on("rejected",function(e){return r.unregisterResolver(e)})}},{key:"send",value:function e(t){var n=this;if(!this.socket||this.socket.readyState!==this.socket.OPEN)return this.Promise.reject(new Error("Not connected"));t.id||(t.id=this.createRequestId());t.jsonrpc="2.0";return new this.Promise(function(e,i){n.socket.send(JSON.stringify(t));n.emit("traffic","sent",t);return n.registerResolver(t.id,e,i)})}},{key:"createRequestId",value:function e(){this.requestId+=1;return this.requestId}}]);return e}();var q=5e3;var C=4e3;var _=function(){function e(t){var n=this;o(this,e);s(this,t);this.isSuspended=false;this.rpc.on("traffic",function(e,t){"sent"===e&&"OpenDoc"===t.method&&(n.openDocParams=t.params)})}a(e,[{key:"restoreRpcConnection",value:function e(t){var n=this;return this.reopen(q).then(function(e){if("SESSION_CREATED"===e&&t)return n.Promise.reject(new Error("Not attached"));return n.Promise.resolve()})}},{key:"restoreGlobal",value:function e(t){var n=this.apis.getApisByType("Global").pop();t.push(n.api);return this.Promise.resolve()}},{key:"restoreDoc",value:function e(t,n){var i=this;var r=this.apis.getApisByType("Doc").pop();if(!r)return this.Promise.resolve();return this.rpc.send({method:"GetActiveDoc",handle:-1,params:[]}).then(function(e){if(e.error&&i.openDocParams)return i.rpc.send({method:"OpenDoc",handle:-1,params:i.openDocParams});return e}).then(function(e){if(e.error){t.push(r.api);return i.Promise.resolve()}var o=e.result.qReturn.qHandle;r.api.handle=o;n.push(r.api);return i.Promise.resolve(r.api)})}},{key:"restoreDocObjects",value:function t(n,i,r){var o=this;var a=[];var s=this.apis.getApis().map(function(e){return e.api}).filter(function(e){return"Global"!==e.type&&"Doc"!==e.type});if(!n){s.forEach(function(e){return i.push(e)});return this.Promise.resolve()}s.forEach(function(t){var s=e.buildGetMethodName(t.type);if(s){var l=o.rpc.send({method:s,handle:n.handle,params:[t.id]}).then(function(e){if(e.error||!e.result.qReturn.qHandle)i.push(t);else{t.handle=e.result.qReturn.qHandle;r.push(t)}});a.push(l)}else i.push(t)});return this.Promise.all(a)}},{key:"suspend",value:function e(){this.isSuspended=true;return this.rpc.close(C)}},{key:"resume",value:function e(t){var n=this;var i=[];var r=[];return this.restoreRpcConnection(t).then(function(){return n.restoreGlobal(i)}).then(function(){return n.restoreDoc(r,i)}).then(function(e){return n.restoreDocObjects(e,r,i)}).then(function(){n.isSuspended=false;n.apis.clear();r.forEach(function(e){e.emit("closed");e.removeAllListeners()});i.forEach(function(e){n.apis.add(e.handle,e);"Global"!==e.type&&e.emit("changed")})}).catch(function(e){return n.rpc.close().then(function(){return n.Promise.reject(e)})})}},{key:"reopen",value:function e(t){var n=this;var i=void 0;var r=void 0;var o=false;var a=new this.Promise(function(e){r=e});var s=function e(){o||(i=setTimeout(function(){return r("SESSION_CREATED")},t));return a};var l=function e(t){if("OnConnected"!==t.method)return;clearTimeout(i);r(t.params.qSessionState);o=true};this.rpc.on("notification",l);return this.rpc.open(true).then(s).then(function(e){n.rpc.removeListener("notification",l);return e}).catch(function(e){n.rpc.removeListener("notification",l);return n.Promise.reject(e)})}}],[{key:"buildGetMethodName",value:function e(t){if("Field"===t||"Variable"===t)return null;if("GenericVariable"===t)return"GetVariableById";return t.replace("Generic","Get")}}]);return e}();var I="qSuccess";function E(e,t){var n=e.config.protocol.delta&&-1!==t.outKey&&t.outKey!==I;n&&(t.delta=n);return t}function D(e,t,n){if(n.qHandle&&n.qType)return e.getObjectApi({handle:n.qHandle,type:n.qType,id:n.qGenericId,genericType:n.qGenericType});if(null===n.qHandle&&null===n.qType)return e.config.Promise.reject(new Error("Object not found"));return n}var A=Object.prototype.hasOwnProperty;var T=Object.prototype.toString;var O=function e(t){if("function"===typeof Array.isArray)return Array.isArray(t);return"[object Array]"===T.call(t)};var k=function e(t){if(!t||"[object Object]"!==T.call(t))return false;var n=A.call(t,"constructor");var i=t.constructor&&t.constructor.prototype&&A.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!i)return false;var r;for(r in t);return"undefined"===typeof r||A.call(t,r)};var L=function e(){var t,n,i,r,o,a;var s=arguments[0];var l=1;var c=arguments.length;var u=false;if("boolean"===typeof s){u=s;s=arguments[1]||{};l=2}(null==s||"object"!==typeof s&&"function"!==typeof s)&&(s={});for(;l<c;++l){t=arguments[l];if(null!=t)for(n in t){i=s[n];r=t[n];if(s!==r)if(u&&r&&(k(r)||(o=O(r)))){if(o){o=false;a=i&&O(i)?i:[]}else a=i&&k(i)?i:{};s[n]=e(u,a,r)}else"undefined"!==typeof r&&(s[n]=r)}}return s};var P=L.bind(null,true);var M={};var N=Array.isArray;function R(e){return null!=e&&!Array.isArray(e)&&"object"===("undefined"===typeof e?"undefined":r(e))}function F(e){return"undefined"===typeof e}function $(e){return"function"===typeof e}function j(e){if(e)return P({},{val:e}).val;return e}function H(e,t){return $(e[t])||"$$"===t.substring(0,2)||"_"===t.substring(0,1)}function V(e,t){var n="/";var i=t.substring(1).split(n).slice(0,-1);var r=void 0;i.forEach(function(t,n){if(n===i.length)return;r=+t;var o=isNaN(r)?{}:[];e[r||t]=F(e[r||t])?o:e[t];e=e[r||t]});return e}function B(e){Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);n.configurable&&!H(e,t)&&delete e[t]})}function z(e,t){var n=true;if(R(e)&&R(t)){if(Object.keys(e).length!==Object.keys(t).length)return false;Object.keys(e).forEach(function(i){z(e[i],t[i])||(n=false)});return n}if(N(e)&&N(t)){if(e.length!==t.length)return false;for(var i=0,r=e.length;i<r;i+=1)if(!z(e[i],t[i]))return false;return true}return e===t}function U(e,t,n){var i=[];var r=e.slice();var o=-1;function a(e,t,n){if(e[n]&&F(e[n].qInfo))return null;if(e[n]&&e[n].qInfo.qId===t)return n;for(var i=0,r=e.length;i<r;i+=1)if(e[i]&&e[i].qInfo.qId===t)return i;return-1}if(z(t,r))return i;if(!F(t[0])&&F(t[0].qInfo)){i.push({op:"replace",path:n,value:t});return i}for(var s=r.length-1;s>=0;s-=1){o=a(t,r[s].qInfo&&r[s].qInfo.qId,s);if(-1===o){i.push({op:"remove",path:n+"/"+s});r.splice(s,1)}else i=i.concat(M.generate(r[s],t[o],n+"/"+s))}for(var l=0,c=t.length;l<c;l+=1){o=a(r,t[l].qInfo&&t[l].qInfo.qId);if(-1===o){i.push({op:"add",path:n+"/"+l,value:t[l]});r.splice(l,0,t[l])}else if(o!==l){i.push({op:"move",path:n+"/"+l,from:n+"/"+o});r.splice(l,0,r.splice(o,1)[0])}}return i}M.generate=function e(t,n,i){i=i||"";var r=[];Object.keys(n).forEach(function(e){var o=j(n[e]);var a=t[e];var s=i+"/"+e;if(z(o,a)||H(n,e))return;F(a)?r.push({op:"add",path:s,value:o}):R(o)&&R(a)?r=r.concat(M.generate(a,o,s)):N(o)&&N(a)?r=r.concat(U(a,o,s)):r.push({op:"replace",path:i+"/"+e,value:o})});Object.keys(t).forEach(function(e){F(n[e])&&!H(t,e)&&r.push({op:"remove",path:i+"/"+e})});return r};M.apply=function e(t,n){n.forEach(function(e){var n=V(t,e.path);var i=e.path.split("/").splice(-1)[0];var r=i&&isNaN(+i)?n[i]:n[+i]||n;var o=e.from?e.from.split("/").splice(-1)[0]:null;if("/"===e.path){n=null;r=t}if("add"===e.op||"replace"===e.op)if(N(n)){"-"===i&&(i=n.length);n.splice(+i,"add"===e.op?0:1,e.value)}else if(N(r)&&N(e.value)){var a;var s=e.value.slice();r.length=0;(a=r).push.apply(a,d(s))}else if(R(r)&&R(e.value)){B(r);P(r,e.value)}else{if(!n)throw new Error("Patchee is not an object we can patch");n[i]=e.value}else if("move"===e.op){var l=V(t,e.from);if(N(n))n.splice(+i,0,l.splice(+o,1)[0]);else{n[i]=l[o];delete l[o]}}else"remove"===e.op&&(N(n)?n.splice(+i,1):delete n[i])})};M.clone=function e(t){return P({},t)};M.createPatch=function e(t,n,i){var r={op:t.toLowerCase(),path:i};"move"===r.op?r.from=n:"undefined"!==typeof n&&(r.value=n);return r};M.updateObject=function e(t,n){if(!Object.keys(t).length){P(t,n);return}M.apply(t,M.generate(t,n))};var G={};var W=function e(t){if(!G[t.id]){var n={};G[t.id]=n;t.on("traffic:received",function(e){return e.close&&e.close.forEach(function(e){return delete n[e]})});t.on("closed",function(){return delete G[t.id]})}};var K=function e(t,n){W(t);var i=G[t.id];i[n]||(i[n]=new g);return i[n]};var Y=function e(t,n,i,o){var a=K(t,n);var s=a.get(i);"undefined"===typeof s&&(s=Array.isArray(o[0].value)?[]:{});if(o.length){"/"===o[0].path&&"object"!==r(o[0].value)?s=o[0].value:M.apply(s,o);a.set(i,s)}return s};function X(e,t,n){var i=n.delta,r=n.result;if(i){Object.keys(r).forEach(function(n){if(!Array.isArray(r[n]))throw new Error("Unexpected RPC response, expected array of patches");r[n]=Y(e,t.handle,t.method+"-"+n,r[n])});return JSON.parse(JSON.stringify(n))}return n}X.sessions=G;function Q(e,t,n){if("undefined"!==typeof n.error){var i=n.error;var r=new Error(i.message);r.code=i.code;r.parameter=i.parameter;return e.config.Promise.reject(r)}return n}var J="qReturn";function Z(e,t,n){"CreateSessionApp"===t.method||"CreateSessionAppFromApp"===t.method?n[J].qGenericId=n[J].qGenericId||n.qSessionAppId:"GetInteract"===t.method&&delete n[J];if(hasOwnProperty.call(n,J))return n[J];if(-1!==t.outKey)return n[t.outKey];return n}function ee(e,t,n){return n.result}var te=function(){function e(t){o(this,e);s(this,t);this.request=[{onFulfilled:E}].concat(d(this.request||[]));this.response=[{onFulfilled:Q},{onFulfilled:X},{onFulfilled:ee},{onFulfilled:Z}].concat(d(this.response||[]),[{onFulfilled:D}])}a(e,[{key:"executeRequests",value:function e(t,n){var i=this;return this.request.reduce(function(e,n){var r=n.onFulfilled&&n.onFulfilled.bind(i,t);return e.then(r)},n)}},{key:"executeResponses",value:function e(t,n,i){var r=this;return this.response.reduce(function(e,n){return e.then(n.onFulfilled&&n.onFulfilled.bind(r,t,i),n.onRejected&&n.onRejected.bind(r,t,i))},n)}}]);return e}();var ne=function(e){c(t,e);function t(){o(this,t);return u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}a(t,[{key:"add",value:function e(n,i){var r=this;var o={api:i};l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,n.toString(),o);i.on("closed",function(){return r.remove(n)});return o}},{key:"getApi",value:function e(t){var n="undefined"!==typeof t?this.get(t.toString()):void 0;return n&&n.api}},{key:"getApis",value:function e(){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getAll",this).call(this).map(function(e){return{handle:e.key,api:e.value.api}})}},{key:"getApisByType",value:function e(t){return this.getApis().filter(function(e){return e.api.type===t})}}]);return t}(g);var ie=function(){function e(){o(this,e)}a(e,null,[{key:"getSession",value:function e(t){var n=t.createSocket,i=t.Promise,r=t.requestInterceptors,o=t.responseInterceptors,a=t.url;var s=new ne;var l=new te({apis:s,Promise:i,request:r,response:o});var c=new w({createSocket:n,Promise:i,url:a});var u=new _({apis:s,Promise:i,rpc:c});var d=new v({apis:s,config:t,intercept:l,rpc:c,suspendResume:u});return d}},{key:"create",value:function t(n){e.configureDefaults(n);n.mixins.forEach(function(e){n.definition.registerMixin(e)});return e.getSession(n)}},{key:"configureDefaults",value:function e(t){if(!t)throw new Error("You need to supply a configuration.");if(!t.Promise&&"undefined"===typeof Promise)throw new Error("Your environment has no Promise implementation. You must provide a Promise implementation in the config.");"function"!==typeof t.createSocket&&"function"===typeof WebSocket&&(t.createSocket=function(e){return new WebSocket(e)});"undefined"===typeof t.suspendOnClose&&(t.suspendOnClose=false);t.protocol=t.protocol||{};t.protocol.delta="undefined"===typeof t.protocol.delta||t.protocol.delta;t.Promise=t.Promise||Promise;t.mixins=t.mixins||[];t.definition=t.definition||new x(t)}}]);return e}();return ie})},function(e,t,n){"use strict";var i,r;!(i=[n(564),n(565),n(566),n(567),n(568),n(569),n(570),n(571),n(572),n(573),n(574),n(575),n(576),n(577),n(578),n(579),n(580),n(581),n(582),n(583),n(584),n(585),n(587),n(588),n(589),n(590),n(591),n(592),n(594),n(595),n(596)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v,g,m,b,y,x,S,w,q,C,_,I,E,D,A,T){return[e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v,g,m,b,y,x,S,w,q,C,_,I,E,D,A,T]}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){return{types:["Doc","GenericObject","GenericDimension","GenericMeasure","GenericBookmark","GenericVariable","Field"],init:function e(t){var n=t.api;n.getAppLayout&&(n.session.app=n);n.app=n.session.app;n.enigmaModel=t.api;n.Promise=t.config.Promise}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){return{types:"Doc",extend:{getProperties:function e(){return this.getAppProperties()},setProperties:function e(t){return this.setAppProperties(t)},getLayout:function e(){return this.getAppLayout()},getPublishableStreams:function e(){return this.Promise.all([this.getLayout(),this.global.getStreamList()]).then(function(e){return e[1].filter(function(t){return e[0].stream?t.qId===e[0].stream.id&&-1!==t.privileges.indexOf("publish"):-1!==t.privileges.indexOf("publish")})})}},init:function e(t){this.Promise=t.config.Promise;var n=t.api;n.waitForOpen=this.Promise.defer();n.waitForOpen.resolve()}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89)],r=function(e){return{types:"Doc",extend:{abortModalSelection:function e(t){t=void 0===t||t;this.setModalSelection(null);return this.abortModal(t)},switchModalSelection:function t(n,i,r){var o;n=n||null;i=i||"";r=void 0===r||r;o=Array.isArray(i)?i:[i];this.isInModalSelection()&&this.modalSelectionObject.endSelections(r);if(n&&!n.isClosed){this.setModalSelection(n);return n.beginSelections(o)}this.setModalSelection(null);return e.resolve()},setModalSelection:function e(t){this.modalSelectionObject=t},isInModalSelection:function e(){return this.modalSelectionObject&&!this.modalSelectionObject.isClosed}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(110)],r=function(e,t){function n(n){return function i(){var r=[].slice.call(arguments);var o=this._getCache;var a=r.splice(0,1)[0];var s=n+r.join("");if(o[s])return o[s];var l=a.apply(this,r).then(function(e){e.on("closed",function(){delete o[s]});return e}).catch(function(){delete o[s];return e.reject({error:{code:t.NxLocalizedErrorCode.LOCERR_GENERIC_NOT_FOUND}})});o[s]=l;return l}}var i=n("generic-get-");var r=n("variable-get-");var o=n("field-get-");var a={types:"Doc",override:{},init:function e(t){t.api._getCache={}}};["getObject","getBookmark","getDimension","getMeasure","getVariableById"].forEach(function(e){a.override[e]=i});["getVariable","getVariableByName"].forEach(function(e){a.override[e]=r});a.override.getField=o;return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(324)],r=function(e){return{types:"Doc",override:{getContentLibraries:function e(t){return t().then(function(e){return e.qItems})},getLibraryContent:function e(t,n){return t(n).then(function(e){return e.qItems})}},extend:{getOrCreateSessionObject:function e(t){var n=this;var i=t.qInfo.qId;n._listCache[i]||(n._listCache[i]=n.createSessionObject(t));return n._listCache[i]},getListData:function e(t){return this.getListObject(t).then(function(e){return e.getLayout()})},getListObject:function t(n){var i=this;var r=Object.keys(n).filter(function(e){return-1!==e.indexOf("ListDef")})[0];if(!r)throw new Error("Invalid list definition");r&&(r=r.replace(/Def$/g,""));var a=n.qInfo.qId;i._listCache[a]||i.getOrCreateSessionObject(n).then(function(t){var n=t.getLayout.bind(t);t.getLayout=function(){return n().then(function(t){var n=t[r].qItems;n.forEach(function(t){"object"===o(t)&&e.mapToLayout(t)});return t[r].qItems})};return t});return i._listCache[a]}},init:function e(t){t.api._listCache={}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={qInfo:{qId:"BookmarkList",qType:"BookmarkList"},qBookmarkListDef:{qType:"bookmark",qData:{title:"/qMetaDef/title",description:"/qMetaDef/description",sheetId:"/sheetId",selectionFields:"/selectionFields",creationDate:"/creationDate"}}};var t={types:"Doc",extend:{getBookmarkList:function t(){return this.getListData(e)},getBookmarkListObject:function t(){return this.getListObject(e)}}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={qInfo:{qId:"CurrentSelection",qType:"CurrentSelection"},qSelectionObjectDef:{}};var t={types:["Doc"],extend:{getCurrentSelectionObject:function t(){return this.getOrCreateSessionObject(e)}}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e,t,n,i){return e.getField(t,i).then(function(e){return e[n]()})}var t={types:["CurrentSelection"],extend:{clearField:function t(n,i){return e(this.app,n,"clear",i)},lockField:function t(n){return e(this.app,n,"lock")},unlockField:function t(n){return e(this.app,n,"unlock")},clearAll:function e(){return this.app.clearAll()},back:function e(){return this.app.back()},forward:function e(){return this.app.forward()}}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={qInfo:{qId:"DimensionList",qType:"DimensionList"},qDimensionListDef:{qType:"dimension",qData:{title:"/qMetaDef/title",tags:"/qMetaDef/tags",grouping:"/qDim/qGrouping",info:"/qDimInfos",labelExpression:"/qDim/qLabelExpression"}}};var t={types:"Doc",extend:{getDimensionList:function t(){return this.getListData(e)},getDimensionListObject:function t(){return this.getListObject(e)}}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={qInfo:{qId:"FieldList",qType:"FieldList"},qFieldListDef:{qShowSystem:false,qShowHidden:false,qShowSrcTables:true,qShowSemantic:true,qShowDerivedFields:true}};var t={qInfo:{qId:"FieldOnTheFlyList",qType:"FieldOnTheFlyList"},qFieldListDef:{qShowSystem:false,qShowHidden:false,qShowSrcTables:true,qShowSemantic:true,qShowDerivedFields:true,qShowDefinitionOnly:true}};var n={qInfo:{qId:"FieldOnTheFlyWithHiddenList",qType:"FieldOnTheFlyWithHiddenList"},qFieldListDef:{qShowSystem:false,qShowHidden:true,qShowSrcTables:true,qShowSemantic:true,qShowDerivedFields:true,qShowDefinitionOnly:true}};var i={types:"Doc",extend:{getFieldList:function t(){return this.getListData(e)},getFieldListObject:function t(){return this.getListObject(e)},getOnTheFlyListObject:function e(){return this.getListObject(t)},getOnTheFlyWithHiddenListObject:function e(){return this.getListObject(n)}}};return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={types:["FieldList"],extend:{expand:function e(){return this.getLayout().then(function(e){var t=[];for(var n=0;n<e.length;++n){var i=e[n];t.push(i);if(i.qDerivedFieldData)for(var r=0;r<i.qDerivedFieldData.qDerivedFieldLists.length;++r){var o=i.qDerivedFieldData.qDerivedFieldLists[r];for(var a=0;a<o.qFieldDefs.length;++a){var s=o.qFieldDefs[a];t.push({qName:s.qName,qSrcTables:i.qSrcTables,qTags:s.qTags,isDerived:true,sourceField:i.qName,derivedDefinitionName:o.qDerivedDefinitionName})}}}return t})}}};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={qInfo:{qId:"MasterObjectList",qType:"MasterObjectList"},qAppObjectListDef:{qType:"masterobject",qData:{name:"/qMetaDef/title",labelExpression:"/labelExpression",visualization:"/visualization",tags:"/qMetaDef/tags"}}};var t={types:"Doc",extend:{getMasterObjectList:function t(){return this.getListData(e)},getMasterObjectListObject:function t(){return this.getListObject(e)}}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={qInfo:{qId:"MeasureList",qType:"MeasureList"},qMeasureListDef:{qType:"measure",qData:{title:"/qMetaDef/title",tags:"/qMetaDef/tags",labelExpression:"/qMeasure/qLabelExpression"}}};var t={types:"Doc",extend:{getMeasureList:function t(){return this.getListData(e)},getMeasureListObject:function t(){return this.getListObject(e)}}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={qInfo:{qId:"ODAGAppLinkList",qType:"ODAGAppLinkList"},qAppObjectListDef:{qType:"odagapplink",qData:{odagLinkRef:"/qMetaDef/odagLinkRef",timestamp:"/qMetaDef/timestamp"}}};var t={types:"Doc",extend:{getODAGAppLinkList:function t(){return this.getListData(e)},getODAGAppLinkObject:function t(){return this.getListObject(e)}}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={qInfo:{qId:"SheetList",qType:"SheetList"},qAppObjectListDef:{qType:"sheet",qData:{title:"/qMetaDef/title",labelExpression:"/labelExpression",description:"/qMetaDef/description",descriptionExpression:"/descriptionExpression",thumbnail:"/thumbnail",cells:"/cells",rank:"/rank",columns:"/columns",rows:"/rows"}}};var t={types:"Doc",extend:{getSheetList:function t(){return this.getListData(e)},getSheetListObject:function t(){return this.getListObject(e)}}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={qInfo:{qId:"SnapshotList",qType:"SnapshotList"},qBookmarkListDef:{qType:"snapshot",qData:{title:"/title",libraryTitle:"/qMetaDef/title",description:"/qMetaDef/description",sourceObjectId:"/sourceObjectId",visualizationType:"/visualizationType",timestamp:"/timestamp",snapshotData:"/snapshotData",isClone:"/isClone"}}};var t={types:"Doc",extend:{getSnapshotListObject:function t(){return this.getListObject(e)},getSnapshotList:function t(){return this.getListData(e)}}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={qInfo:{qId:"StoryList",qType:"StoryList"},qAppObjectListDef:{qType:"story",qData:{title:"/qMetaDef/title",description:"/qMetaDef/description",thumbnail:"/thumbnail",rank:"/rank"}}};var t={types:"Doc",extend:{getStoryList:function t(){return this.getListData(e)},getStoryListObject:function t(){return this.getListObject(e)}}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={qInfo:{qId:"UndoInfo",qType:"UndoInfo"},qUndoInfoDef:{},markers:[]};var t={types:["Doc"],extend:{getUndoInfoObject:function t(){return this.getOrCreateSessionObject(e)}}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89)],r=function(e){var t=true,n=[],i=null,r=false;function o(t){var i=n[n.length-1],r;r=t(i||e.resolve());n.push(r);return r}function a(e){if(r){e.markers.length=0;r=false}}return{types:["UndoInfo"],extend:{undo:function i(){var a=this;function s(i){return i.then(function(){return a.getLayout().then(function(i){if(i.qUndoInfo.qUndoCount>0)return a.app.undo().then(function(){return a.getLayout().then(function(i){t=i.markers.length%2===0;if(!t)return s(e.resolve());n.splice(0,1)})});t=i.markers.length%2===0;t||(r=true);n.splice(0,1)})})}return o(s)},redo:function i(){var a=this;function s(i){return i.then(function(){return a.getLayout().then(function(i){if(i.qUndoInfo.qRedoCount>0){r=false;return a.app.redo().then(function(){return a.getLayout().then(function(){t=i.markers.length%2===0;if(!t)return s(e.resolve());n.splice(0,1)})})}n.splice(0,1)})})}return o(s)},reset:function e(){var t=this;return t.getLayout().then(function(e){if(!e.qUndoInfo.qUndoCount&&!e.qUndoInfo.qRedoCount)return;if(e.markers.length)return t.getProperties().then(function(e){e.markers.length=0;return t.setProperties(e).then(function(){return t.app.clearUndoBuffer()})});return t.app.clearUndoBuffer()})},startGroup:function n(){var o=this;return o.getLayout().then(function(n){return o.getProperties().then(function(s){t=s.markers.length%2===0;if(t||r){i=Date.now();a(s);s.markers.push(n.qUndoInfo.qUndoCount+1);return o.setProperties(s).then(function(){return e.resolve(i)})}return e.resolve(i)})})},endGroup:function n(r){if(!r)throw new Error("Must provide groupId to stop group.");var o=this;return o.getLayout().then(function(n){return o.getProperties().then(function(a){t=a.markers.length%2===0;if(t||r!==i)return e.resolve();i=null;a.markers.push(n.qUndoInfo.qUndoCount+1);return o.setProperties(a)})})}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={qInfo:{qId:"VariableList",qType:"VariableList"},qVariableListDef:{qType:"variable",qShowReserved:true,qShowConfig:true,qData:{tags:"/tags"}}};var t={types:"Doc",extend:{getVariableList:function t(){return this.getListData(e)},getVariableListObject:function t(){return this.getListObject(e)}}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={types:"GenericObject",override:{exportData:function e(t,n,i,r,o){n=n||"OOXML";i=i||"";r=r||"";o=o||"P";return t(n,i,r,o)}}};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(102),n(188),n(586),n(324)],r=function(e,t,n,i){return{types:["Doc","GenericObject","GenericDimension","GenericMeasure","GenericBookmark","GenericVariable"],extend:{setState:function e(t){var i=this.state;this.state=t;if(i===this.state)return;t===n.INVALID?this.Invalidated.emit():t===n.VALID?this.Validated.emit():t===n.VALIDATING?this.Validating.emit():t===n.CLOSED?this.Closed.emit():t===n.CLOSING?this.Closing.emit():t===n.CANCELLED&&this.Cancelled.emit()},markAsInvalid:function e(){this.state=-99;this.setState(n.INVALID)},markAsCancelled:function e(){this.setState(n.CANCELLED)},clearPending:function e(){var t=this;for(var n in t.ongoingRequests)delete t.ongoingRequests[n]}},override:{getLayout:function e(i,r){var o="GetLayout"+this.delta;var a=11e3;var s=this;var l=true===r;if(s.isValid&&s.layout)return s.Promise.resolve(l?s.pureLayout:s.layout);s.isValidating||s.setState(n.VALIDATING);if(s.ongoingRequests[o]){var c=s.ongoingRequests[o];if(r)return c.then(function(){s.getAppLayout&&!s.pureLayout.permissions&&(s.pureLayout.permissions=s.layout.permissions);return s.pureLayout});return c}var u=i().then(function(e){s.isValid||t.updateObject(s.layout,e);if(s.ongoingRequests[o]===u){s.setState(n.VALID);delete s.ongoingRequests[o]}s.pureLayout=e;s.getAppLayout&&(s.pureLayout.permissions=s.layout.permissions);return l?s.pureLayout:s.layout}).catch(function(e){delete s.ongoingRequests[o];e.code===a&&(e.isHandled=true);return s.Promise.reject(e)});s.ongoingRequests[o]=u;return u},getProperties:function e(n){var i="GetPropertiesfalse";var r=this;if(r.isValid&&!r.needCacheProperties)return r.Promise.resolve(r.properties);if(r.ongoingRequests[i])return r.ongoingRequests[i];var o=n().then(function(e){var n=t.generate(r._properties,e);r._properties=e;t.apply(r.properties,n);r.isValid&&(r.needCacheProperties=false);return r.properties});r.ongoingRequests[i]=o;o.catch(function(){}).finally(function(){delete r.ongoingRequests[i]});return o},setProperties:function e(n,i){var r=this;return n(i).then(function(){t.updateObject(r._properties,r.properties)})}},init:function t(r){var o=r.api;e.mixin(o);o.notification("Validated");o.notification("Invalidated");o.notification("Validating");o.notification("Closed");o.notification("Closing");o.notification("Cancelled");o.setState(n.INVALID);o.layout={};o.pureLayout=null;o.properties={};o._properties={};o.needCacheProperties=true;o.ongoingRequests={};i.mapToLayout(o.layout,!!o.getAppLayout);o.on("changed",function(){o.clearPending();o.needCacheProperties=true;o.setState(n.INVALID)});o.on("closed",function(){for(var e in o.ongoingRequests)o.ongoingRequests[e].then&&o.ongoingRequests[e].then(null,function(e){e.isHandled=true});o.setState(n.CLOSED)});o.Cancelled.bind(function(){o.clearPending()});Object.defineProperties(o,{isValid:{get:function e(){return this.state===n.VALID}},isValidating:{get:function e(){return this.state===n.VALIDATING}},isInvalid:{get:function e(){return this.state===n.INVALID}},isClosed:{get:function e(){return this.state===n.CLOSED}},isClosing:{get:function e(){return this.state===n.CLOSING}},isCancelled:{get:function e(){return this.state===n.CANCELLED}}})}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){return{VALID:1,INVALID:2,VALIDATING:3,CLOSED:5,CLOSING:6,CANCELLED:7}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(377)],r=function(e){function t(t,n){var i=e.isSnapshotData(n)?t.migrate.snapshot:t.migrate.properties;if("function"!==typeof i)throw new Error("migration function not a function: expected function, got "+o(i));return i(n)}return{types:["Doc","GenericObject","GenericDimension","GenericMeasure","GenericBookmark","GenericVariable"],extend:{migrate:{properties:function e(t){return t},snapshot:function e(t){return t}}},override:{getProperties:function e(n){var i=this;return n().then(function(e){return t(i,e)})},setProperties:function e(n,i){return n(t(this,i))}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){this.getLayout=function(e){this.requestPromise=e.getLayout().then(function(t){this.requestPromise=null;if(e.isCancelled)return;this.fn(t)}.bind(this)).catch(function(e){false})}.bind(this,e);this.onInvalidated=function(){this.getLayout()}.bind(this);this.api=e;this.fn=null}e.prototype.subscribe=function(e){if("function"!==typeof e)throw new Error("Observer must be a function");if("function"===typeof this.fn)return;this.fn=e;this.api.Invalidated.bind(this.onInvalidated);this.getLayout()};e.prototype.dispose=function(){this.api.Invalidated.unbind(this.onInvalidated)};e.prototype.cancel=function(){if(this.requestPromise){this.api.app.global.cancelRequest(this.requestPromise.requestId);this.api.markAsCancelled();this.requestPromise=null;return true}return false};e.prototype.retry=function(){this.api.isCancelled&&this.getLayout()};return{types:["Doc","GenericObject","GenericDimension","GenericMeasure","GenericBookmark","GenericVariable"],extend:{layoutSubscribe:function t(n){var i=new e(this);i.subscribe(n);return i}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(188)],r=function(e){function t(e){var t=e.qHyperCubeDef;if(t&&t.qMeasures&&t.qDimensions){var n=t.qDimensions.concat(t.qMeasures);n.forEach(function(e){e.qAttributeExpressions&&e.qAttributeExpressions.forEach(function(e){e.qAttribute=true})})}}return{types:["GenericObject"],override:{setProperties:function e(n,i){t(i);return n(i)},getEffectiveProperties:function t(n){var i=this;return n().then(function(t){i.effectiveProperties=i.effectiveProperties||t;e.updateObject(i.effectiveProperties,t);return i.effectiveProperties})}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(90)],r=function(e){return{types:"Doc",override:{createBookmark:function t(n,i){return n(e.extend(true,{},{qInfo:{qType:"bookmark"},qMetaDef:{title:"",description:""},creationDate:(new Date).toISOString()},i))}},extend:{createSheet:function e(t){return this.createObject({qInfo:{qType:"sheet"},qMetaDef:{title:t.title||"",description:t.description||""},rank:void 0!==o(t.rank)?t.rank:-1,thumbnail:{qStaticContentUrlDef:t.thumbnail||null},columns:24,rows:12,cells:[],qChildListDef:{qData:{title:"/title"}}})},createStory:function e(t){return this.createObject({qInfo:{qType:"story"},qMetaDef:{title:t.title||"",description:""},rank:void 0!==o(t.rank)?t.rank:-1,thumbnail:{qStaticContentUrlDef:t.thumbnail||null},qChildListDef:{qData:{title:"/title",rank:"/rank"}}})},createMasterObject:function e(t){t=t||{};return this.createObject({qInfo:{qType:"masterobject"},qMetaDef:{title:t.title||"",description:t.description||"",tags:t.tags||""}})}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(143),n(89)],r=function(e,t){var n,i;e.onDataReceived.then(function(e){if("NONE"!==e.userDirectory){n=e.userId;i=e.userDirectory}});return{types:["GenericObject"],override:{publish:function e(n){return this.getLayout().then(function(e){return e.permissions.publish?n():t.reject("Permission denied")})},unPublish:function e(r){return this.getLayout().then(function(e){var o=e.qMeta;var a=o.published&&!o.approved;var s=o.owner.userId===n&&o.owner.userDirectory===i;return a&&s?r():t.reject("Permission denied")})}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90),n(309),n(89),n(115),n(181),n(103)],r=function(e,t,n,i,r,o){return{types:"sheet",extend:{edit:function e(t){var n=this;return n.getProperties().then(function(e){t(e);return n.setProperties(e)})},getObject:function e(n,i){return this.getLayout().then(function(e){return t.getObject(e,n,i)})},moveObject:function e(i,r){return this.edit(function(e){var o=t.getObject(e,i);if(r.split){r=t.splitCell(e,r.pos,r.split);if(!r)return n.reject()}t.moveObject(o,r,e)})},swapObjects:function e(n,i){return this.edit(function(e){t.swapObjects(e,n,i)})},addObject:function r(a){var s=this,l=a.template,c=a.cell.pos,u=i.getType(l),d=a.init,f=a.children||[];var p;p=d.qExtendsId?n.resolve(e.extend({qInfo:{qType:l}},d)):u.getInitialProperties(d);return n.all({initProps:p,props:s.getFullPropertyTree()}).then(function(i){var r=i.initProps,a=i.props;if(c.split){c=t.splitCell(a.qProperty,c.pos,c.split);if(!c)return n.reject()}r.qInfo.qId=e.generateId();o.trackEvent(o.customEvents.CHART_CREATED,{chart_type:u.type,chart_id:r.qInfo.qId,chart_isThirdParty:u.libraryInfo?u.libraryInfo.isThirdParty:void 0});var l=t.setObject(a.qProperty,c,r.qInfo.qId,r.qInfo.qType);var d=false;if(l)for(var p=0;p<a.qChildren.length;p++)if(a.qChildren[p].qProperty.qInfo.qId===l){a.qChildren[p].qProperty=r;a.qChildren[p].qChildren=[];t.addChildrenToObject(a.qChildren[p],f);d=true;break}if(!d){var h=a.qChildren.push({qChildren:[],qProperty:r});t.addChildrenToObject(a.qChildren[h-1],f)}return s.setFullPropertyTree(a)})},getObjectById:function e(t){var n,i,r=this.layout.cells;for(n=0;n<r.length;++n){i=r[n];if(t===i.name)return i}return null},removeObject:function e(n){var i=this;return i.getFullPropertyTree().then(function(e){var r=t.objIndex(e.qProperty,n),a=e.qProperty.cells[r].name;if(-1===r)throw new Error("invalid pos");e.qProperty.cells.splice(r,1);for(var s=0;s<e.qChildren.length;s++)if(e.qChildren[s].qProperty.qInfo.qId===a){o.trackEvent(o.customEvents.CHART_DELETED,{chart_type:e.qChildren[s].qProperty.qInfo.qType,chart_id:a,chart_isThirdParty:!!e.qChildren[s].qProperty.extensionMeta});e.qChildren.splice(s,1);break}return i.setFullPropertyTree(e)})},setCloneChildrenInfos:function e(i){var r=this;return n.all([r.getChildInfos(),i.getChildInfos(),i.getProperties()]).then(function(e){var n=e[0];var r=e[1];var o=e[2];n.forEach(function(e,n){var i=t.findCellForId(e.qId,o.cells);i&&(i.name=r[n].qId)});return i.setProperties(o).then(function(){return i})})},clone:function e(){var t=this;return t.app.cloneObject(this.id).then(function(e){return t.app.getObject(e)}).then(function(e){return t.setCloneChildrenInfos(e)})},extendSheet:function e(t){var n=this;return this.getProperties().then(function(e){var i=e.rows;var o=r.calculateExtendedRowsAndHeight(e,t);e.height=o.height;e.rows=o.rows;for(var a=0;a<e.cells.length;a++)e.cells[a].bounds=r.recalculateBounds(e.cells[a],e.columns,i,e.columns,e.rows);return n.setProperties(e).then(function(){return[i,e.rows,e.columns]})})},isCustomSize:function e(){return this.layout&&this.layout.layoutOptions&&"CUSTOM"===this.layout.layoutOptions.sheetMode}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";var i,r;!(i=[n(90),n(194),n(107)],r=function(e,t,n){return{types:"sheet",extend:{removeNavPoint:function e(t){var n=this;return this.getProperties().then(function(e){if(!e.navPoints)return;for(var i=0;i<e.navPoints.length;i++){var r=e.navPoints[i];if(r.info.id===t){e.navPoints.splice(i,1);break}}return n.setProperties(e)})},addNavPoint:function i(r){var o={info:{type:"odagNavPoint"},title:"",odagLinkRefID:""};o=e.extend(o,r.data);o.info.id||(o.info.id=e.generateId());var a=this;return this.getProperties().then(function(i){i.navPoints||(i.navPoints=[]);var s=i.navPoints.map(function(e){return e.title});if(s.indexOf(o.title)>-1){var l=t.generateUniqueName(s,o.title);l=e.crop(l,n.name);o.title=l}var c=false;if(r.insertBeforeNavPointID)for(var u=0;u<i.navPoints.length;u++){var d=i.navPoints[u];if(d.info.id===r.insertBeforeNavPointID){i.navPoints.splice(u,0,o);c=true;break}}c||i.navPoints.push(o);return a.setProperties(i)})},getNavPoints:function e(){return this.getProperties().then(function(e){return e.navPoints?e.navPoints:[]})},reorderNavPoints:function e(t){var n=this;return this.getProperties().then(function(e){e.navPoints=t;return n.setProperties(e)})},moveNavPoint:function e(t,n){var i=this;return this.getProperties().then(function(e){if(!t)return;var r=null;var o=null;n||(o=e.navPoints.length-1);for(var a=0;a<e.navPoints.length;a++){var s=e.navPoints[a];s.info.id===t?r=a:n&&s.info.id===n&&(o=a);if(null!==r&&null!==o)break}r<o&&n&&o--;null!==r&&null!==o&&e.navPoints.splice(o,0,e.navPoints.splice(r,1)[0]);return i.setProperties(e)})},removeRefToLinkIDFromNavPoints:function e(t){var n=this;return this.getProperties().then(function(e){var i=e.navPoints?e.navPoints:[];for(var r=0;r<i.length;r++){var o=e.navPoints[r];o.odagLinkRefID===t&&(o.odagLinkRefID="")}return n.setProperties(e)})}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){function t(e,t){if(e.qData.rank<t.qData.rank)return-1;if(e.qData.rank>t.qData.rank)return 1;return 0}if(Array.isArray(e)&&e.length>0)return e.sort(t);return e}return{types:"slide",extend:{duplicate:function t(n){var i,r=this;return n.getLayout().then(function(t){var o=e(t.qChildList.qItems.slice());for(var a=0;a<o.length;a++){var s=o[a];if(s.qInfo.qId===r.id){var l=o[a],c=o[a+1];(c||l)&&(i=c&&!l?c.qData.rank-1:!c&&l?l.qData.rank+1:(l.qData.rank+c.qData.rank)/2)}}return n.createSlide({rank:i}).then(function(e){return e.copyFrom(r.id).then(function(){return e.getProperties().then(function(t){t.rank=i;return e.setProperties(t)})})})})}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){return{types:"story",extend:{clone:function e(){var t=this;return t.app.cloneObject(this.id).then(function(e){return t.app.getObject(e)})},createSlide:function t(n){return this.createChild(e.extend(true,{qInfo:{qId:e.generateId(),qType:"slide"},rank:-1,qChildListDef:{qData:{title:"/title",sheetId:"/sheetId",ratio:"/ratio",position:"/position",dataPath:"/dataPath",srcPath:"/srcPath",visualization:"/visualization",visualizationType:"/visualizationType",style:"/style"}}},n))}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(259)],r=function(e){return e.structs}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90),n(89),n(93),n(49)],r=function(e,t,n,i){var r={};var o={};var a={qInfo:{qType:"appprops"},sheetTitleBgColor:"",sheetTitleGradientColor:"",sheetTitleColor:"",sheetLogoThumbnail:{qStaticContentUrlDef:null},sheetLogoPosition:"",rtl:false,theme:"sense"};var s={qInfo:{qId:"AppPropsList",qType:"AppPropsList"},qAppObjectListDef:{qType:"appprops",qData:{sheetTitleBgColor:"/sheetTitleBgColor",sheetTitleGradientColor:"/sheetTitleGradientColor",sheetTitleColor:"/sheetTitleColor",sheetLogoThumbnail:"/sheetLogoThumbnail",sheetLogoPosition:"/sheetLogoPosition",rtl:"/rtl",theme:"/theme"}}};function l(e){return e.getProperties().then(function(t){return e.global.engineVersion().then(function(e){return t.qSavedInProductVersion===e.qComponentVersion&&!t.qLastReloadTime})})}function c(e){return e?t.resolve(e):n.getApp()}o.create=function(t,n){return c(n).then(function(n){if(i.getFlag("THEME_CARDS"))return l(n).then(function(i){var r=i?{theme:"card"}:{};var o=e.extend(true,{},a,r,t);return n.createObject(o)});var r=e.extend(true,{},a,t);return n.createObject(r)})};o.get=function(e,t){return c(t).then(function(t){return t.getObject(e)})};o.getList=function(e){return c(e).then(function(e){return r[e.id]=r[e.id]||e.getListObject(s)})};return o}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(89),n(91),n(600),n(601),n(602)],r=function(e,t,n,i,r,o){var a;var s=20;var l="Invalid theme id";var c={DEFAULT:"default",QRS:"qrs",RLS:"rls"};var u=e.extend("ThemeLoader",{init:function e(t){this._cachedThemes=null;this.config=t;this.providers={default:i,qrs:r,rls:o};this.THEME_TYPE=c;this.ERROR_THEME_ID=l},getAvailableThemes:function e(){var n=this,i=new t,r=[],o=Object.keys(this.providers),a={default:[],custom:[]};if(this._cachedThemes)return t.resolve(this._cachedThemes);if(!this.config||!this.config.providers)return t.resolve(a);o.forEach(function(e){n.config.providers[e]&&r.push(n.providers[e].getThemeLists())});t.all(r).then(function(e){e.forEach(function(e){a.default=a.default.concat(e.default);a.custom=a.custom.concat(e.custom)});n._sortAlphabetically(a.custom);n._cachedThemes=a;i.resolve(a)});return i.promise},getCustomThemesPage:function e(n){var i,r=this,o;if(a&&a<n)return t.resolve([]);i=new t;this.getAvailableThemes().then(function(e){o=r._getPageFromList(n,e.custom,s);i.resolve(o)});return i.promise},getType:function e(n){var i=this,r=new t;this.getAvailableThemes().then(function(e){var t=Object.keys(e),o,a,s,c=null;while(!c){for(a=0;a<t.length;a++){o=t[a];s=i._getThemeTypeInList(e[o],n);if(s){c=s;break}}break}c?r.resolve(c):r.reject(l)});return r.promise},getRawJson:function e(n){var i=this;if(!n)return t.reject(l);return this.getType(n).then(function(e){return i.providers[e].loadJson(n)}).catch(function(e){return t.reject(e)})},getThemePath:function e(n){var i=this;if(!n)return t.reject(l);return this.getType(n).then(function(e){return i.providers[e].getResourcePath(n)})},getResourceUrlParams:function e(n){var i=this;if(!n)return t.reject(l);return this.getType(n).then(function(e){return i.providers[e].getResourceUrlParams()})},getPagesTotal:function e(){var n=this,i=new t;if(a)return t.resolve(a);this.getAvailableThemes().then(function(e){a=n._calculateNbrOfPages(e.custom,s);i.resolve(a)});return i.promise},_sortAlphabetically:function e(t){return t.sort(function e(t,i){var r="pseudo"===n.language?"en-US":n.language;return t.name.localeCompare(i.name,r)})},_getThemeTypeInList:function e(t,n){var i=null;if(t)for(var r=0;r<t.length;r++)if(t[r].id===n){i=t[r].type;break}return i},_getPageFromList:function e(t,n,i){var r=t||t>0?t:0;var o=r*i;var a=(r+1)*i;n.length<a&&(a=n.length);return n.slice(o,a)},_calculateNbrOfPages:function e(t,n){return Math.ceil(t.length/n)}});return u}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(91),n(89),n(260)],r=function(e,t,i){var r={};var o=n.p+"assets/external/sense-themes-default/default-themes.json";var a=n.p+"assets/external/sense-themes-default/";function s(){return i.getJson(o).then(function(e){return r._resolveDefaultConfiguration(e)})}function l(e){return c(e).then(function(e){var t=r._getJsonPath(e);return i.getJson(t)})}function c(e){return t.resolve(a+encodeURIComponent(e))}function u(){return""}r._resolveDefaultConfiguration=function(e){var n=new t;r._waitForTranslator().then(function(){var t={default:e.default,custom:[]};r._translateNames(t.default);r._setType(t.default);n.resolve(t)});return n.promise};r._waitForTranslator=function(){return e.ready};r._getJsonPath=function(e){return e+"/theme.json"};r._translateNames=function(t){t.forEach(function(t){t.name=e.get(t.name)})};r._setType=function(e){e.forEach(function(e){e.type="default"})};r.getThemeLists=s;r.loadJson=l;r.getResourcePath=c;r.getResourceUrlParams=u;return r}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(13),n(89),n(260)],r=function(e,t,n,i){var r={};function o(){var e=new n;var t={default:[],custom:[]};r._getExtensionsFromQrs().then(function(n){for(var i in n)r._isThemeExtension(n,i)&&t.custom.push({id:i,name:n[i]["name"],type:"qrs"});e.resolve(t)},function(){e.resolve(t)});return e.promise}function a(e){return s(e).then(function(e){var t=r._getJsonPath(e);return i.getJson(t)})}function s(e){var i=t.rootPath+"extensions/"+encodeURIComponent(e);return n.resolve(i)}function l(){return""}r._getExtensionsFromQrs=function(){return e.getService("$contentApi").getExtensions()};r._isThemeExtension=function(e,t){return e.hasOwnProperty(t)&&e[t]["type"]&&"theme"===e[t]["type"]};r._getJsonPath=function(e){return e+"/theme.json"};r.getThemeLists=o;r.loadJson=a;r.getResourcePath=s;r.getResourceUrlParams=l;return r}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(261),n(89),n(260)],r=function(e,t,n){var i={};function r(){var e=this,n=new t,r,o={default:[],custom:[]};i._getThemesFromRls().then(function(t){for(var i in t){var a=t[i];if(a.attributes){if(a.attributes.qext_filename&&a.attributes.name&&a.id){r=o[e._getListForSupplier(a.attributes.supplier)];r.push({id:a.attributes.qext_filename,name:a.attributes.name,rlsId:a.id,type:"rls"})}}else if(a.qextFilename&&a.name&&a.id){r=o[e._getListForSupplier(a.supplier)];r.push({id:a.qextFilename,name:a.name,rlsId:a.id,type:"rls"})}}n.resolve(o)},function(){n.resolve(o)});return n.promise}function o(e){return a(e).then(function(e){var t=i._getJsonPath(e);return n.getJson(t)})}function a(e){var n=new t;i.getThemeLists().then(function(t){var r=i._getResourcePathForList(t.default,e);if(r){n.resolve(r);return}r=i._getResourcePathForList(t.custom,e);if(r){n.resolve(r);return}n.resolve(null)});return n.promise}function s(){return e.getTenantIdUrlParameter()}i._getResourcePathForList=function(e,t){var n;e.forEach(function(e){e.id===t&&(n="/api/v1/themes/"+e.rlsId+"/file")});return n};i._getJsonPath=function(e){return e+"/theme.json"+s()};i._getThemesFromRls=function(){return e.getCloudThemes()};i._getListForSupplier=function(e){return e&&"qlik"===e.toLowerCase()?"default":"custom"};i.getThemeLists=r;i.loadJson=o;i.getResourcePath=a;i.getResourceUrlParams=s;return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(11),n(90),n(604)],r=function(e,t,n){var i=["palette","colorSchemes.qualitativeScales","colorSchemes.ordinalScales","scales","palettes.data","palettes.ui"];function r(e,t){for(var n in e)"object"===o(e[n])&&null!==e[n]?r(e[n],t):"string"===typeof e[n]&&"@"===e[n].charAt(0)&&(e[n]=t[e[n]])}function a(e){n.generateScales(e)}function s(e,t){var i;if(e){i=n.validatePalettesOrScales(e);i&&i.length&&i.forEach(function(e){console.warn("Theme parsing error, scale declaration: "+e)})}if(t){i=n.validatePalettesOrScales(t,true);i&&i.length&&i.forEach(function(e){console.warn("Theme parsing error, scale declaration: "+e)})}}function l(e){e.forEach(function(e){if(e.colors)for(var t=0;t<e.colors.length;t++)e.colors[t]&&(e.colors[t]=e.colors[t].toLowerCase())})}var c={};c.injectStyleNode=function(e,t,n){var i=document.createElement("link");var r=n||"";i.setAttribute("rel","stylesheet");i.setAttribute("href",e+"/"+t+r);document.head.appendChild(i);return i};c.injectExtraStyleNodes=function(e,t,n){var i=[];e.customStyles&&e.customStyles.length&&e.customStyles.forEach(function(e){if(e.cssRef&&e.cssRef.length&&"css"===e.cssRef.split(".").pop()){i.push({node:c.injectStyleNode(t,e.cssRef,n),cssClass:e.classRef});e.classRef&&e.classRef.length&&c.toggleCssClass(e.classRef,true)}});return i};c.toggleCssClass=function(t,n){t&&t.length&&e("body").toggleClass(t,n)};c.parseTheme=function(e,n,o){var u={};r(e,e._variables);r(n,n._variables);false===e._inherit?t.extend(true,u,e):t.extend(true,u,n,e);o&&i.forEach(function(n){var i=t.getValue(e,n);void 0!==i&&t.setValue(u,n,i)});u.scales&&a(u.scales);u.palettes&&u.palettes.ui&&l(u.palettes.ui);s(u.scales,u.palettes?u.palettes.data:null);c.toggleCssClass("qv-card",true===e._cards);return u};return c}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(395),n(109)],r=function(e,t){function n(e,t,n){var i=.25+(t+1)/n*.25;var r=.5-i;var o=.5+i;var a=o-r;return r+e/1*a}function i(t,n){var i=[],r=new e;i.push(t[0]);n||i.push(t[0]);var o=1;for(;o<t.length-1;o++){i.push(t[o]);i.push(t[o])}i.push(t[o]);n||i.push(t[o]);for(var a=0;a<i.length;a+=2)r.addColorPart(i[a],i[a+1]);return r}function r(e,i,r){var o=[];for(var a=0;a<i+1;a++){var s;switch(i){case 0:s=e.getColor(.5);break;default:var l=n(1/i*a,i,r);s=e.getColor(l);break}o.push(new t(s).toHex())}return o}function o(e,t,n){var o=i(e,true);var a=r(o,t-1,t);var s=i(a,n);var l=[null];for(var c=0;c<t;c++)l.push(r(s,c,t));return l}function a(e){e.forEach(function(e){if("class"===e.type){var t=o(e.scale,Math.max(e.scale.length,7),false);e.scale=t;e.type="class-pyramid"}})}function s(e,t){var n={};var i=[];e.forEach(function(e,r){t?-1===["pyramid","row"].indexOf(e.type)&&i.push("Improper type for data palette: "+e.name):-1===["class","class-pyramid","gradient"].indexOf(e.type)&&i.push("Improper type for data scale: "+e.name);-1!==["pyramid","class-pyramid"].indexOf(e.type)?Array.isArray(e.scale)&&Array.isArray(e.scale[e.scale.length-1])&&"string"===typeof e.scale[e.scale.length-1][0]||i.push("Improper scale structure for: "+e.name):Array.isArray(e.scale)&&"string"===typeof e.scale[0]||i.push("Improper scale structure for: "+e.name);e.propertyValue||(e.propertyValue="scale"+r);n[e.propertyValue]?i.push("Duplicate property values for: "+e.name):n[e.propertyValue]=true});return i}return{createPyramidFromColors:o,generateScales:a,validatePalettesOrScales:s}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},aqua:{r:0,g:255,b:255},aquamarine:{r:127,g:255,b:212},azure:{r:240,g:255,b:255},beige:{r:245,g:245,b:220},bisque:{r:255,g:228,b:196},black:{r:0,g:0,b:0},blanchedalmond:{r:255,g:235,b:205},blue:{r:0,g:0,b:255},blueviolet:{r:138,g:43,b:226},brown:{r:165,g:42,b:42},burlywood:{r:222,g:184,b:135},cadetblue:{r:95,g:158,b:160},chartreuse:{r:127,g:255,b:0},chocolate:{r:210,g:105,b:30},coral:{r:255,g:127,b:80},cornflowerblue:{r:100,g:149,b:237},cornsilk:{r:255,g:248,b:220},crimson:{r:220,g:20,b:60},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgoldenrod:{r:184,g:134,b:11},darkgray:{r:169,g:169,b:169},darkgreen:{r:0,g:100,b:0},darkgrey:{r:169,g:169,b:169},darkkhaki:{r:189,g:183,b:107},darkmagenta:{r:139,g:0,b:139},darkolivegreen:{r:85,g:107,b:47},darkorange:{r:255,g:140,b:0},darkorchid:{r:153,g:50,b:204},darkred:{r:139,g:0,b:0},darksalmon:{r:233,g:150,b:122},darkseagreen:{r:143,g:188,b:143},darkslateblue:{r:72,g:61,b:139},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},darkturquoise:{r:0,g:206,b:209},darkviolet:{r:148,g:0,b:211},deeppink:{r:255,g:20,b:147},deepskyblue:{r:0,g:191,b:255},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},dodgerblue:{r:30,g:144,b:255},firebrick:{r:178,g:34,b:34},floralwhite:{r:255,g:250,b:240},forestgreen:{r:34,g:139,b:34},fuchsia:{r:255,g:0,b:255},gainsboro:{r:220,g:220,b:220},ghostwhite:{r:248,g:248,b:255},gold:{r:255,g:215,b:0},goldenrod:{r:218,g:165,b:32},gray:{r:128,g:128,b:128},green:{r:0,g:128,b:0},greenyellow:{r:173,g:255,b:47},grey:{r:128,g:128,b:128},honeydew:{r:240,g:255,b:240},hotpink:{r:255,g:105,b:180},indianred:{r:205,g:92,b:92},indigo:{r:75,g:0,b:130},ivory:{r:255,g:255,b:240},khaki:{r:240,g:230,b:140},lavender:{r:230,g:230,b:250},lavenderblush:{r:255,g:240,b:245},lawngreen:{r:124,g:252,b:0},lemonchiffon:{r:255,g:250,b:205},lightblue:{r:173,g:216,b:230},lightcoral:{r:240,g:128,b:128},lightcyan:{r:224,g:255,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},lightgray:{r:211,g:211,b:211},lightgreen:{r:144,g:238,b:144},lightgrey:{r:211,g:211,b:211},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightseagreen:{r:32,g:178,b:170},lightskyblue:{r:135,g:206,b:250},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},lightsteelblue:{r:176,g:196,b:222},lightyellow:{r:255,g:255,b:224},lime:{r:0,g:255,b:0},limegreen:{r:50,g:205,b:50},linen:{r:250,g:240,b:230},magenta:{r:255,g:0,b:255},maroon:{r:128,g:0,b:0},mediumaquamarine:{r:102,g:205,b:170},mediumblue:{r:0,g:0,b:205},mediumorchid:{r:186,g:85,b:211},mediumpurple:{r:147,g:112,b:219},mediumseagreen:{r:60,g:179,b:113},mediumslateblue:{r:123,g:104,b:238},mediumspringgreen:{r:0,g:250,b:154},mediumturquoise:{r:72,g:209,b:204},mediumvioletred:{r:199,g:21,b:133},midnightblue:{r:25,g:25,b:112},mintcream:{r:245,g:255,b:250},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},navy:{r:0,g:0,b:128},oldlace:{r:253,g:245,b:230},olive:{r:128,g:128,b:0},olivedrab:{r:107,g:142,b:35},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},orchid:{r:218,g:112,b:214},palegoldenrod:{r:238,g:232,b:170},palegreen:{r:152,g:251,b:152},paleturquoise:{r:175,g:238,b:238},palevioletred:{r:219,g:112,b:147},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},peru:{r:205,g:133,b:63},pink:{r:255,g:192,b:203},plum:{r:221,g:160,b:221},powderblue:{r:176,g:224,b:230},purple:{r:128,g:0,b:128},red:{r:255,g:0,b:0},rosybrown:{r:188,g:143,b:143},royalblue:{r:65,g:105,b:225},saddlebrown:{r:139,g:69,b:19},salmon:{r:250,g:128,b:114},sandybrown:{r:244,g:164,b:96},seagreen:{r:46,g:139,b:87},seashell:{r:255,g:245,b:238},sienna:{r:160,g:82,b:45},silver:{r:192,g:192,b:192},skyblue:{r:135,g:206,b:235},slateblue:{r:106,g:90,b:205},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},snow:{r:255,g:250,b:250},springgreen:{r:0,g:255,b:127},steelblue:{r:70,g:130,b:180},tan:{r:210,g:180,b:140},teal:{r:0,g:128,b:128},thistle:{r:216,g:191,b:216},tomato:{r:255,g:99,b:71},transparent:{r:255,g:255,b:255,a:0},turquoise:{r:64,g:224,b:208},violet:{r:238,g:130,b:238},wheat:{r:245,g:222,b:179},white:{r:255,g:255,b:255},whitesmoke:{r:245,g:245,b:245},yellow:{r:255,g:255,b:0},yellowgreen:{r:154,g:205,b:50}};return e}.apply(t,i),void 0!==r&&(e.exports=r))},,,function(e,t){e.exports='<div ng-show="internalShow" class="qv-animate spinner ng-hide" ng-class="{\'center-in-parent\': centerInParent}" ng-style="{\'width\': spinnerWidth, \'height\': spinnerHeight }">\n\t<div class="qv-loader"></div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(102),n(92),n(188),n(610),n(110)],r=function(e,t,n,i,r,o){var a=o.NxLocalizedErrorCode;var s=["GetLayout","GetAppLayout","AbortModal","DoSave"];function l(e,t){Array.isArray(t)?i.apply(e,t):i.updateObject(e,t)}var c=n.extend("RPCBase",{init:function e(n){var i=this;t.mixin(i);i.notification("Validated");i.notification("Invalidated");i.notification("Validating");i.notification("Closed");i.notification("Closing");i.notification("Cancelled");i.modelType="RPCBase",i.id=n.id;i.session=n.session;i.handle=n.handle;i.checkCreate=n.checkCreate;i._properties={};i.properties={};i.propertyTree={};i.ongoingRequests={};i.needCacheProperties=true;i._effectiveProperties={};i.effectiveProperties={};i.needCacheEffectiveProperties=true;i.enigmaModel=n.enigmaModel;i.setState(c.States.INVALID);"App"!==i.constructor.name&&i.bindToRPC()},bindToRPC:function e(){var t=this;t.layout=t.enigmaModel.layout;t.session.onChange(t.handle,t.changeHandler.bind(t));t.Cancelled.bind(t.clearPending.bind(t))},changeHandler:function e(){var t=this;t.clearPending();t.needCacheProperties=true;t.needCacheEffectiveProperties=true;t.isCancelled||t.setState(c.States.INVALID)},clearPending:function e(){for(var t in this.ongoingRequests)delete this.ongoingRequests[t]},setState:function e(t){var n=this;var i=n.state;delete this.__layoutRPCId;n.state=t;if(i===n.state)return;t===c.States.INVALID?n.Invalidated.emit():t===c.States.VALID?n.Validated.emit():t===c.States.VALIDATING?n.Validating.emit():t===c.States.CLOSED?n.Closed.emit():t===c.States.CLOSING?n.Closing.emit():t===c.States.CANCELLED&&n.Cancelled.emit()},getLayout:function t(){var n=this;var i="GetLayout";if(n.isValid||n.isCancelled)return e.resolve(n.layout);n.isValidating||n.setState(c.States.VALIDATING);if(n.ongoingRequests[i])return n.ongoingRequests[i];function r(){n.setState(c.States.VALID);return n.layout}var o=n.enigmaModel.getLayout();var a=o.then(r);n.__layoutRPCId=o.reqId;n.ongoingRequests[i]=a;return a},getProperties:function t(n){var r=this,o=false;n=n||"GetProperties";if(r.isValid&&!r.needCacheProperties)return e.resolve(r.properties);if(r.ongoingRequests[n+o])return r.ongoingRequests[n+o];var a=r.rpc(n,"qProp",[],{delta:o}).then(function(e){var t=i.generate(r._properties,e);r._properties=e;i.apply(r.properties,t);r.isValid&&(r.needCacheProperties=false);return r.properties}).catch(function(){});r.ongoingRequests[n+o]=a;return a},getEffectiveProperties:function t(){var n=this,r=false;var o="GetEffectiveProperties";if(n.isValid&&!n.needCacheEffectiveProperties)return e.resolve(n.effectiveProperties);if(n.ongoingRequests[o+r])return n.ongoingRequests[o+r];var a=n.rpc(o,"qProp",[],{delta:r}).then(function(e){var t=i.generate(n._effectiveProperties,e);n._effectiveProperties=e;i.apply(n.effectiveProperties,t);n.isValid&&(n.needCacheEffectiveProperties=false);return n.effectiveProperties});n.ongoingRequests[o+r]=a;return a},hasChanges:function e(){var t=i.generate(this._properties,this.properties);return t.length>0},markAsInvalid:function e(){this.state=-99;this.setState(c.States.INVALID)},markAsCancelled:function e(){this.setState(c.States.CANCELLED)},getFullPropertyTree:function e(t){var n=this,i=false;t=t||"GetFullPropertyTree";return n.rpc(t,"qPropEntry",[],i).then(function(e){n._propertyTree=e;l(n.propertyTree,e);return n.propertyTree})},setProperties:function e(t,n,r){var o=this;n=n||"SetProperties";Array.isArray(t)||(t=[t]);return this.rpc(n,null,t,r).then(function(){i.updateObject(o._properties,o.properties)})},setFullPropertyTree:function e(t,n,i){n=n||"SetFullPropertyTree";Array.isArray(t)||(t=[t]);return this.rpc(n,null,t,i)},save:function t(){return this.hasChanges()?this.setProperties(this.properties):e.resolve()},saveTree:function e(){return this.setFullPropertyTree(this.propertyTree)},getChildInfos:function e(){return this.rpc("GetChildInfos","qInfos",[])},close:function t(n){var i=this;n||(i.rpcOptions.onClose=i.rpcOptions.onClose?i.rpcOptions.onClose:function(){});i.setState(c.States.CLOSING);var o=e.resolve();delete i.session.changeHandlers[i.handle];delete i.session.modelCache[i.id];for(var a in i.ongoingRequests)i.ongoingRequests[a].then&&i.ongoingRequests[a].then(null,function(e){e.error.isHandled=true});return o.then(function(){i.setState(c.States.CLOSED);r.addToQueue(i)})},rpc:function t(n,i,r,o){o=o||{delta:false,raw:false};var l=this;var c=[].slice.call(arguments);if(!l.handle&&"App"===l.constructor.name)return l.waitForOpen.promise.then(function(){return l.rpc.apply(l,c)});var u={method:n,handle:this.handle,params:r||[]};o.delta&&(u.delta=true);if(!l.session||l.isClosing||l.isClosed)return e.reject();var d=l.session.rpc(u).then(function(e){return i?e.result[i]:o.raw?e:e.result}).catch(function(t){if(t.error.code===a.LOCERR_HC_MODAL_OBJECT_ERROR){t.error.isHandled=true;return l.session.currentApp.abortModal().then(function(){return l.rpc.apply(l,c)})}return e.reject(t)});if(s.indexOf(n)>-1){l.ongoingRequests[n+o.delta]=d;d.finally(function(){delete l.ongoingRequests[n+o.delta]})}d.rpcId=u.id;return d}});c.getModel=function(t,n,i){var r=n.modelCache[t],o=this;function a(i){delete n.modelCache[t];return e.reject({error:{code:i&&i.error&&i.error.code,message:"No object with Id "+t+" found",parameter:t}})}if(!t)return e.reject("No ID given to RPCBase#getModel");if(r)return r;r=i().then(function(e){return new o({id:e.id,session:n,handle:e.handle,enigmaModel:e})},a);n.modelCache[t]=r;return r};c.getLayout=function(e,t){return this.get(e,t).then(function(e){return e.getLayout().then(function(e){return e})})};c.getProperties=function(e,t){return this.get(e,t).then(function(e){return e.getProperties().then(function(){return e})})};c.extend=function(e,t){var i=n.extend.call(this,e,t);i.getLayout=c.getLayout;i.getProperties=c.getProperties;i.getModel=c.getModel;return i};Object.defineProperties(c.prototype,{isValid:{get:function e(){return this.state===c.States.VALID}},isValidating:{get:function e(){return this.state===c.States.VALIDATING}},isInvalid:{get:function e(){return this.state===c.States.INVALID}},isClosed:{get:function e(){return this.state===c.States.CLOSED}},isClosing:{get:function e(){return this.state===c.States.CLOSING}},isCancelled:{get:function e(){return this.state===c.States.CANCELLED}}});c.States={VALID:1,INVALID:2,VALIDATING:3,CLOSED:5,CLOSING:6,CANCELLED:7};return c}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(102),n(199)],r=function(e,t){var n=[];function i(e){return e.Invalidated&&e.Invalidated.observers&&0===e.Invalidated.observers.length}function r(){var e=n.length,r;while(e--){r=n[e];t.RELEASEMODELS&&window.console.info("[DBGFLG:RELEASEMODEL] Checking model (id, handle, model):",r.id,r.handle,r);if(i(r)){o(r);n.splice(e,1)}}}function o(n){t.RELEASEMODELS&&window.console.info("[DBGFLG:RELEASEMODEL] Releasing model (id):",n.id);e.release(n);for(var i in n)delete n[i]}function a(e){n.push(e)}setInterval(r,1e4);return{addToQueue:a}}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t){e.exports='<lui-tooltip ng-style="style">\n\t{{item}}\n</lui-tooltip>'},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(10),n(48),n(89),n(94),n(181),n(50),n(99),n(131),n(95),n(123),n(114),n(311),n(382),n(49),n(309),n(442),n(267),n(287)],r=function(e,t,i,r,o,a,s,l,c,u,d,f,p,h,v,g){var m=t.injector(["ng"]);var b=m.get("$cacheFactory");var y=b("pp-object");var x=2;function S(e,t){var n={id:t.id,type:"gridCell",customObject:t,canCopy:function e(){return!t.object.isInvalid},copy:function e(){u.publish("/activeSheet/copyObject",t)},canCut:function e(){return!t.object.isInvalid},cut:function e(){u.publish("/activeSheet/cutObject",t)},paste:function e(){u.publish("/activeSheet/pasteObject",t)},canRemove:function e(){return true},remove:function n(){e.gridService.removeCell(t)},getAllPropertyPanelContent:function e(){var n=null;return t.getVisualization().then(function(e){n=e.model.id;return e.getPropertyPanelContent().then(function(t){var i=t.type;var o=t.app;return r.all({appLayout:o.getLayout(),properties:e.model.getProperties(),layout:e.model.getLayout()}).then(function(a){if(n!==a.properties.qInfo.qId)return r.resolve(null);return{definition:t.definition,globalChangeListeners:t.globalChangeListeners,type:i.type,ext:t.ext,handler:t.handler,iconName:t.iconName,titleRef:t.titleRef,properties:a.properties,layout:a.layout,localeInfo:a.appLayout.qLocaleInfo,app:o,model:e.model,cache:y}})})})}};return n}function w(e,t){var n=t?1:x;return{width:"calc( "+e.width+"% - "+2*n+"px )",height:"calc( "+e.height+"% - "+2*n+"px )",left:"calc( "+e.x+"% + "+n+"px )",top:"calc( "+e.y+"% + "+n+"px )"}}function q(e){e.getVisualization().then(function(t){t.getPreferredSize().then(function(t){t&&s.isSmallDevice&&(e.style={width:t.w+"px",height:t.h+"px"})})})}function C(e,t,n){var i=100;var r=100;var o=i/t;var a=r/n;e.rectFor=function e(t){if(t.bounds)return{left:t.bounds.x,top:t.bounds.y,width:t.bounds.width,height:t.bounds.height,margin:x};var n=t.colspan*o;var i=t.rowspan*a;var r=t.col*o;var s=t.row*a;return{left:r,top:s,width:n,height:i,margin:x}};var s=[];var l=[];var c;for(c=0;c<t-1;++c){var u=(c+1)*o;l.push({left:u+"%"})}for(c=0;c<n-1;++c){var d=(c+1)*a;s.push({top:d+"%"})}e.cols=t;e.rows=n;e.horizontalLines=s;e.verticalLines=l}function _(t,n){var i=n.layoutOptions||{};t.sheetSize={};g.updatePermissionStyle(t);t.zoomCell||s.isSmallDevice&&!t.mobileGrid||(i.sheetMode&&"RESPONSIVE"!==i.sheetMode||!n.height?"CUSTOM"===i.sheetMode&&(t.sheetSize=g.getCustomSheetSize(n,e("#grid-wrap").height())):t.sheetSize=g.getExtendedSheetSize(n,o.isInEditMode()))}function I(e,t){var n=t.qInfo.qId!==e.lastSheetId;var i=!n&&o.isInEditMode()&&!e.zoomCell&&t.permissions.update;e.lastSheetId=t.qInfo.qId;e.hasUpdatePermission=t.permissions.update;e.isSheet=true;e.isMaster=false;e.sheetTitle=t.labelExpression||t.qMeta&&t.qMeta.title||"";e.sheetId=t.qInfo&&t.qInfo.qId||"";e.isDraft=t.qMeta&&t.qMeta.sourceObject&&t.qMeta.sourceObject.length;e.isDraftOwner=t.qMeta&&t.qMeta.draftObject&&t.qMeta.draftObject.length;var r=e.layout.layoutOptions;e.extend=e.hasUpdatePermission&&r&&r.extendable&&"CUSTOM"!==r.sheetMode;var a=r&&r.mobileLayout;e.mobileGrid=v.getFlag("MOBILE_GRID")&&"GRID"===a&&!(r&&"CUSTOM"===r.sheetMode);var s,l;s=e.cols;l=e.rows;_(e,t);!n&&e.hasUpdatePermission||e.clearActiveCell();n&&(e.cells=[]);C(e,s,l);D(e,t.cells.slice(),i)}function E(t,r,a){return{active:false,visible:false,items:[{translation:"contextMenu.showDetails",tid:"nav-menu-info",cssClasses:"lui-icon lui-icon--info",dynamicCssClasses:function e(){var t=[];r.zoomCell?t.push("big"):t.push("border","white");return t.join(" ")},isVisible:function e(){return a.object&&(l.treatAsDesktop()||r.zoomCell)&&!o.isInEditMode()&&!a.object.isInvalid&&a.object.supportObjectInfo()},action:function e(){i.getService("objectInfoCard").show(a.object)}},{translation:"Visualization.Unlink",tid:"nav-menu-link",cssClasses:"lui-icon lui-icon--link",dynamicCssClasses:function e(){var t=[];r.zoomCell?t.push("big"):t.push("border","white");return t.join(" ")},isVisible:function e(){return a.object&&(l.treatAsDesktop()||r.zoomCell)&&a.object.isLink&&o.isInEditMode()},action:function e(){a.getVisualization().then(function(e){var t=n(387);t.showBreakLinkDialog(e.model)})}},{translation:"Tooltip.EditObject",tid:"nav-menu-edit",cssClasses:"lui-icon lui-icon--edit",dynamicCssClasses:function e(){var t=[];r.zoomCell?t.push("big"):t.push("border","white");return t.join(" ")},isVisible:function e(){if(!v.getFlag("SSA_IN_EDIT"))return false;var t=r.activeCell&&r.activeCell.id===a.id;return a.object&&(l.treatAsDesktop()||r.zoomCell)&&o.isInEditMode()&&!t},action:function e(t){r.toggleActive(a);t&&t.stopPropagation()}},{translation:"Tooltip.StopEdit",tid:"nav-menu-stop-edit",cssClasses:"lui-icon lui-icon--tick green",dynamicCssClasses:function e(){var t=[];r.zoomCell?t.push("big"):t.push("border","white");return t.join(" ")},isVisible:function e(){if(!v.getFlag("SSA_IN_EDIT"))return false;var t=r.activeCell&&r.activeCell.id===a.id;return t&&o.isInEditMode()},action:function e(t){r.toggleActive(null);c.resetPropertyPanelToggle();t&&t.stopPropagation()}},{translation:"contextMenu.takeSnapshot",tid:"nav-menu-snapshot",cssClasses:"lui-icon lui-icon--camera",dynamicCssClasses:function e(){var t=[];r.zoomCell?t.push("big"):t.push("border","white");a.snapshot.dialogOpen&&t.push("blue");return t.join(" ")},isVisible:function e(){return a.object&&(l.treatAsDesktop()||r.zoomCell)&&!a.object.isInvalid&&!r.zooming&&!o.isInEditMode()&&a.object.supportSnapshot()&&t.permissions.createSnapshot||a.snapshot.isAnnotating},action:function e(){if(a.snapshot.snapshotTimer)return;a.snapshot.snapshotTimer=setTimeout(function(){a.snapshot.snapshotTimer=null},1e3);var t=true;if(a.snapshot.isAnnotating)return;if(r.zoomCell&&a.showExploreMenu){a.toggleExploreMenu();a.object.resize();a.snapshot.take(t)}else r.zoomCell?a.snapshot.take(t,true):a.snapshot.take(t)}},{translation:"Tooltip.ExplorationMenu",tid:"nav-menu-explore",cssClasses:"lui-icon lui-icon--control",dynamicCssClasses:function e(){var t=[];a.object&&a.showExploreMenu&&t.push("active");r.zoomCell?t.push("big"):t.push("border","white");return t.join(" ")},isVisible:function e(){return a.object&&(l.treatAsDesktop()||r.zoomCell)&&a.object.canShowExploreMenu()&&!o.isInEditMode()&&!r.zooming},action:function e(){if(r.zoomCell){a.toggleExploreMenu();a.object.resize()}else{r.zoom(a);a.toggleExploreMenu(true)}}},{translation:"Tooltip.ZoomOut",tid:"nav-menu-zoom-out",cssClasses:"lui-icon lui-icon--remove big",isVisible:function e(){return r.isSheet&&r.zoomCell===a&&!r.zooming},action:function t(){a.navMenu.visible=false;a.showExploreMenu&&a.toggleExploreMenu(false);e(".embedded-sheet-toolbar").length>0&&e(".embedded-sheet-toolbar").css("display","block");r.zoom(null);r.gridService.restoreSheetScrollState()}},{translation:"Tooltip.ZoomIn",tid:"nav-menu-zoom-in",cssClasses:"lui-icon lui-icon--expand white border",isVisible:function e(){return a.object&&l.treatAsDesktop()&&!r.zoomCell&&!a.object.isInvalid&&!r.zooming},action:function e(t){r.zoom(a);if(o.isInEditMode()&&!a.options.isActive){r.toggleActive(null);c.resetPropertyPanelToggle()}t&&t.stopPropagation()}},{translation:"Common.Move",tid:"nav-menu-move",cssClasses:"lui-icon lui-icon--draggable",dynamicCssClasses:function e(){var t=[];r.zoomCell?t.push("big"):t.push("border","white");return t.join(" ")},isVisible:function e(){if(!v.getFlag("SSA_IN_EDIT"))return false;return o.isInEditMode()&&!r.zoomCell&&(l.treatAsDesktop()||r.activeCell===a)},mounted:function e(t){h.addDrag(t,"",{isEnabled:function e(){var t=r.gridService.isBlocked();var n=a.object&&a.object.preventDrag;return!n&&!t},info:function e(){return{type:"gridcell",cell:a}},onStart:function e(){},elem:"<div class='qv-gridmove-icon'></div>"})}}]}}function D(e,t,n){var i=e.layout||{};var a=i.layoutOptions&&"CUSTOM"===i.layoutOptions.sheetMode;var s=e.placementService.updateGridCells(e.cols,e.rows,e.cells,t,p.getResolutionFor(i.gridResolution),a);e.cells=s;var l;l=v.getFlag("SSA_IN_EDIT")?d.ANALYSIS:o.state===o.States.edit?d.EDIT:d.ANALYSIS;s.forEach(function(t){if(!t.isEmpty){v.getFlag("SSA_IN_EDIT")&&o.isInEditMode()&&(t.resize=k(t,e));if(!t.model){var i=r();t.options.setController=i.resolve;t.options.interactionState=l;t.options.direction=f.direction;t.options._softCancelOnRemove=true;t.options.removeIt=function(){e.gridService.removeCell(t)};if(e.app){e.app.getLayout().then(function(n){t.navMenu=E(n,e,t)});e.app.getObject(t.id).then(function(i){t.model=i;n&&e.toggleActive(t)})}t.getVisualization=function(){return i.promise}}t.options.canSaveSoftProperties=A(e)}});!e.hasUpdatePermission&&e.zoomCell&&o.state===o.States.edit&&e.zoom(null);e.cells=s;e.updateCellsSize()}function A(e){return e.hasUpdatePermission&&!s.isSmallDevice}function T(e,t){this.gridService=e;this.placementService=i.getService("qvObjectPlacementService");this.blocked=false;this.app=t}function O(e,t){return t>=0&&e>t?t:e}function k(e,t){var n=[];var i=["top","right","bottom","left","top-left","top-right","bottom-right","bottom-left"];var r=e.pos.bounds?a.getAligmentToGrid(e.pos.bounds,t.cols,t.rows):e.pos;var o=r.col;var s=o+r.colspan;var l=r.row;var c=l+r.rowspan;var u={left:o,right:t.cols-s,top:l,bottom:t.rows-c};for(var d=0;d<t.cells.length;++d){if(t.cells[d]===e||t.cells[d].isEmpty)continue;var f=t.cells[d].pos.col;var p=f+t.cells[d].pos.colspan;var h=t.cells[d].pos.row;var v=h+t.cells[d].pos.rowspan;if(h<c&&v>l){u.left=O(u.left,o-p);u.right=O(u.right,f-s)}if(f<s&&p>o){u.top=O(u.top,l-v);u.bottom=O(u.bottom,h-c)}}i.forEach(function(e){var t={top:true,bottom:true}[e]||false;var i={left:true,right:true}[e]||false;var o={X:0,Y:0};var a=false;if(i){o.X=u[e];a=r.colspan<=1}else if(t){o.Y=u[e];a=r.rowspan<=1}else{var s=e.split("-");o.Y=u[s[0]];o.X=u[s[1]];a=r.rowspan<=1&&r.colspan<=1}if(0===o.Y&&0===o.X&&a)return;var l={X:r.colspan-1,Y:r.rowspan-1};if(l.X<0&&o.X<=0||l.Y<0&&o.Y<=0)return;l.Y=Math.max(l.Y,0);l.X=Math.max(l.X,0);n.push({dir:e,expand:o,contract:l})});return n}T.prototype.autoCollapse=function(){var e=this;var t=o.getModel();if(t&&t.layout&&t.layout.permissions.update&&t.layout.height&&t.layout.height>100&&t.layout.cells){var n=a.calculateCollapseHeight(t.layout,t.layout.cells);if(n>0)return t.extendSheet(-n).then(function(){e.updateCellsSize()})}return r.resolve()};T.prototype.updateCellsSize=function(){var e=this;_(e,e.layout);for(var t=0;t<e.cells.length;t++)e.setCellSize(e.cells[t],e.cells[t].pos)};T.prototype.setCellSize=function(e,t){if(!this.mobileGrid&&s.isSmallDevice&&e.getVisualization)e.style=q(e);else{t.bounds=this.placementService.getCellAlignment(t,this.cols,this.rows);e.style=w(t.bounds,this.mobileGrid&&s.isSmallDevice)}e.options&&(e.options.canSaveSoftProperties=A(this));e.pos=t};T.prototype.block=function(){this.blocked=true;this.removeResizeHandles()};T.prototype.unblock=function(){this.blocked=false;this.updateActiveCell()};T.prototype.isBlocked=function(){return this.blocked};T.prototype.updateResize=function(e){e.resize=k(e,this)};T.prototype.updateActiveCell=function(){var e=this;if(!e.activeCell)return;if(!o.isInEditMode())return;if(this.blocked)return;var t=e.activeCell.pos.bounds?a.getAligmentToGrid(e.activeCell.pos.bounds,e.cols,e.rows):e.activeCell.pos;var n=t.col;var i=n+t.colspan;var r=t.row;var s=r+t.rowspan;var l={left:n,right:e.cols-i,top:r,bottom:e.rows-s};function c(e,t){t>=0&&l[e]>t&&(l[e]=t)}for(var u=0;u<e.cells.length;++u){if(e.cells[u]===e.activeCell||e.cells[u].isEmpty)continue;var d=e.cells[u].pos.col;var f=d+e.cells[u].pos.colspan;var p=e.cells[u].pos.row;var h=p+e.cells[u].pos.rowspan;if(p<s&&h>r){c("left",n-f);c("right",d-i)}if(d<i&&f>n){c("top",r-h);c("bottom",p-s)}}e.activeCell.updating=false;v.getFlag("SSA_IN_EDIT")||(e.activeCell.resize=k(e.activeCell,e))};T.prototype.removeResizeHandles=function(){this.cells.forEach(function(e){e.resize=null})};T.prototype.clearActiveCell=function(){var e=this;!v.getFlag("SSA_IN_EDIT")&&this.cells&&e.removeResizeHandles();e.activeCell=null};T.prototype.setCellSelected=function(e){if(v.getFlag("SSA_IN_EDIT")&&c.selectedObject&&!(e&&e.id===c.selectedObject.id)&&c.selectedObject.customObject&&c.selectedObject.customObject.object){c.selectedObject.customObject.object.setInteractionState(d.ANALYSIS);c.selectedObject.customObject.object.update()}if(e&&!e.isEmpty){if(!c.selectedObject||"gridCell"!==c.selectedObject.type||c.selectedObject.id!==e.id){c.setSelectedObject(S(this,e));if(v.getFlag("SSA_IN_EDIT")&&c.selectedObject.customObject.object){c.selectedObject.customObject.object.setInteractionState(d.EDIT);c.selectedObject.customObject.object.update()}}}else{var t=i.getService("qvSheetService");t.setSheetAsSelectedObj()}};T.prototype.gridToggleActive=function(){v.getFlag("SSA_IN_EDIT")||this.toggleActive(null)};T.prototype.toggleActive=function(e){var t=this;if(!o.isInEditMode())return;if(!e||e.isEmpty)t.clearActiveCell();else{t.clearActiveCell();t.hasUpdatePermission&&(t.activeCell=e);t.updateActiveCell();c.propertiesOpen=true}t.setCellSelected(e)};T.prototype.setEditMaster=function(e,t){var n=this;var i=[{name:e,type:t,col:0,row:0,colspan:1,rowspan:1}];n.lastSheetId=null;n.isSheet=false;n.isMaster=true;C(n,1,1);n.clearActiveCell();D(n,i,false);n.cells[0].options.interactionState=d.EDIT;n.setCellSelected(n.cells[0]);n.zoom(n.cells[0])};T.prototype.update=function(e){if(!e)return;var t=this;t.layout=e;C(t,e.columns||12,e.rows||7);I(t,e);t.activeCell&&-1===t.cells.indexOf(t.activeCell)&&t.setCellSelected(null);if(t.zoomCell&&-1===t.cells.indexOf(t.zoomCell)){t.zoomCell=null;t.setCellSelected(null);_(t,t.layout)}t.updateActiveCell()};function L(e,t){var n=e.activeCell===t;v.getFlag("SSA_IN_EDIT")&&null!==t&&!n&&e.clearActiveCell()}T.prototype.zoom=function(e){var t=this;if(!t.cells)return;t.cells.forEach(function(t){if(t.options){t.options.isVisible=t===e||!e;t.options.isZoomed=t===e&&!!e}});!v.getFlag("SSA_IN_EDIT")&&o.isInEditMode()&&t.clearActiveCell();L(t,e);if(e){t.zoomCell=e;t.gridService.saveScrollState();e.object&&(e.object.expanded=!!e)}else if(t.zoomCell){t.zoomCell.object&&(t.zoomCell.object.expanded=false);!v.getFlag("SSA_IN_EDIT")&&t.hasUpdatePermission&&o.isInEditMode()&&(t.activeCell=t.zoomCell);t.zoomCell=null;t.updateActiveCell();t.gridService.restoreScrollState()}_(t,t.layout)};T.prototype.highlight=function(e){var t=this;if(!t.cells)return;t.cells.forEach(function(t){t.isHighlighted=t===e||!e})};T.prototype.exploreMenu=function(e,t){e&&e.object&&e.object.hasSoftProperties&&e.toggleExploreMenu(t)};T.prototype.getOptimalCell=function(){return i.getService("qvObjectPlacementService").getOptimalCell(this.cells.slice())};return T}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(114),n(443),n(672)],r=function(e,t,n){return{template:n,scope:{close:"&"},controller:["$scope","$element",function(n,i){n.direction=e.direction;i.find(".content").showComponent(t,{input:n.input})}]}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){(function(n){var i,r;(function(){var o=[];var a=o.slice;var s={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);i.push({callback:t,context:n,ctx:n||this});return this},once:function(e,t,i){if(!c(this,"once",e,[t,i])||!t)return this;var r=this;var o=n.once(function(){r.off(e,o);t.apply(this,arguments)});o._callback=t;return this.on(e,o,i)},off:function(e,t,i){var r,o,a,s,l,u,d,f;if(!this._events||!c(this,"off",e,[t,i]))return this;if(!e&&!t&&!i){this._events={};return this}s=e?[e]:n.keys(this._events);for(l=0,u=s.length;l<u;l++){e=s[l];if(a=this._events[e]){this._events[e]=r=[];if(t||i)for(d=0,f=a.length;d<f;d++){o=a[d];(t&&t!==o.callback&&t!==o.callback._callback||i&&i!==o.context)&&r.push(o)}r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e];var i=this._events.all;n&&u(n,t);i&&u(i,arguments);return this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var r=!t&&!n;"object"===typeof t&&(n=this);e&&((i={})[e._listenerId]=e);for(var o in i){i[o].off(t,n,this);r&&delete this._listeners[o]}return this}};var l=/\s+/;var c=function(e,t,n,i){if(!n)return true;if("object"===typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return false}if(l.test(n)){var o=n.split(l);for(var a=0,s=o.length;a<s;a++)e[t].apply(e,[o[a]].concat(i));return false}return true};var u=function(e,t){var n,i=-1,r=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:while(++i<r)(n=e[i]).callback.call(n.ctx);return;case 1:while(++i<r)(n=e[i]).callback.call(n.ctx,o);return;case 2:while(++i<r)(n=e[i]).callback.call(n.ctx,o,a);return;case 3:while(++i<r)(n=e[i]).callback.call(n.ctx,o,a,s);return;default:while(++i<r)(n=e[i]).callback.apply(n.ctx,t)}};var d={listenTo:"on",listenToOnce:"once"};n.each(d,function(e,t){s[t]=function(t,i,r){var o=this._listeners||(this._listeners={});var a=t._listenerId||(t._listenerId=n.uniqueId("l"));o[a]=t;"object"===typeof i&&(r=this);t[e](i,r,this);return this}});s.bind=s.on;s.unbind=s.off;true;!(i=[],r=function(){return s}.apply(t,i),void 0!==r&&(e.exports=r));this.Eventable=s})();e.exports=Eventable}).call(this,n(54))},function(e,t){e.exports='<div class="q-card-content" qva-direction x-dir-setting="{{direction}}">\n\n\t<header ng-if="object.title || object.description">\n\t\t<div class="object-title" ng-if="object.title" qva-direction x-dir-text="{{object.title}}">{{object.title}}</div>\n\t\t<div ng-if="object.description" qva-direction x-dir-text="{{object.description}}" ng-bind-html="getTrustedHtml(object.description)"></div>\n\t</header>\n\n\t<section ng-if="object.dimensions.length">\n\t\t<div class="item-header" qva-direction x-dir-setting="{{direction}}">\n\t\t\t<span q-translation="Common.Dimensions"></span>\n\t\t\t<span class="item-count" dir="ltr">({{ object.dimensions.length }})</span>\n\t\t</div>\n\t\t<div class="item" ng-repeat="dimension in object.dimensions">\n\t\t\t<div class="item-title" qva-direction x-dir-text="{{dimension.title || \'-\'}}"><span class="lui-icon lui-icon--small lui-icon--drill-down" q-title-translation="Tooltip.dimensions.drilldown" ng-if="dimension.isDrilldown"></span>{{ dimension.title || \'-\'}}</div>\n\t\t\t<div class="item-description" ng-if="dimension.description" qva-direction x-dir-text="{{dimension.description}}" ng-bind-html="getTrustedHtml(dimension.description)"></div>\n\t\t</div>\n\t</section>\n\n\t<section ng-if="object.measures.length">\n\t\t<div class="item-header" qva-direction x-dir-setting="{{direction}}">\n\t\t\t<span q-translation="Common.Measures"></span>\n\t\t\t<span class="item-count" dir="ltr">({{ object.measures.length }})</span>\n\t\t</div>\n\t\t<div class="item" ng-repeat="measure in object.measures">\n\t\t\t<div class="item-title" qva-direction x-dir-text="{{measure.title || \'-\'}}">{{ measure.title || \'-\'}}</div>\n\t\t\t<div class="item-description" ng-if="measure.description" qva-direction x-dir-text="{{measure.description}}" ng-bind-html="getTrustedHtml(measure.description)"></div>\n\t\t</div>\n\t</section>\n\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(141),n(90)],r=function(e,t,n){function i(t,n,i){var r="dimension"===n?"getDimension":"getMeasure";var o="dimension"===n?"qDim":"qMeasure";if(!t||!i)return e.resolve();return t.app[r](i).then(function(e){return e.getLayout().then(function(e){return e[o].descriptionExpression||e.qMeta.description})})}function r(e,t,n){return i(e,"dimension",t).then(function(e){var t="H"===n.qGrouping,i=t?n.title:n.qFallbackTitle||n.title;return{title:i,description:e,isDrilldown:t}})}function o(e,t,i){var r=t.layout;var o=n.getValue(r,t.ext.options.hyperCubePath||"",r);var d=n.getValue(i,t.ext.options.hyperCubePath||"",i);return"map"===r.visualization?s(e,r,i):"filterpane"===r.visualization?l(e,r):"table"===r.visualization?c(e,r,i):"pivot-table"===r.visualization?u(e,r,i):o.qHyperCube?a(e,o,d):null}function a(t,n,i){var o,a=[];for(o=0;o<n.qHyperCube.qDimensionInfo.length;o++)a.push(r(t,i.qHyperCubeDef.qDimensions[o].qLibraryId,n.qHyperCube.qDimensionInfo[o]));return e.all(a)}function s(t,n,i){var o,a=[];for(o=0;o<n.layers.length;o++)a.push(r(t,i.layers[o].qHyperCubeDef.qDimensions[0].qLibraryId,n.layers[o].qHyperCube.qDimensionInfo[0]));return e.all(a)}function l(n,i){var o=[];i.qChildList.qItems.forEach(function(i){o.push(t.get(i.qInfo.qId).then(function(t){return e.all({layout:t.getLayout(),properties:t.getProperties()}).then(function(e){return r(n,e.properties.qListObjectDef.qLibraryId,e.layout)})}))});return e.all(o)}function c(t,n,i){var o,a=[],s;for(o=0;o<n.qHyperCube.columnOrder.length;o++){s=n.qHyperCube.columnOrder[o];s<n.qHyperCube.qDimensionInfo.length&&a.push(r(t,i.qHyperCubeDef.qDimensions[s].qLibraryId,n.qHyperCube.qDimensionInfo[s]))}return e.all(a)}function u(t,n,i){var o,a=[],s;for(o=0;o<n.qHyperCube.qEffectiveInterColumnSortOrder.length;o++){s=n.qHyperCube.qEffectiveInterColumnSortOrder[o];s>-1&&a.push(r(t,i.qHyperCubeDef.qDimensions[s].qLibraryId,n.qHyperCube.qDimensionInfo[s]))}return e.all(a)}function d(e,t,n){return i(e,"measure",t).then(function(e){return{title:n,description:e}})}function f(t,i,r){var o=i.layout;var a=n.getValue(o,i.ext.options.hyperCubePath||"",o);var s=n.getValue(r,i.ext.options.hyperCubePath||"",r);return"map"===o.visualization?h(t,o,r):"filterpane"===o.visualization?e.resolve():"table"===o.visualization?v(t,o,r):a.qHyperCube?p(t,a,s):null}function p(t,n,i){var r,o=[];for(r=0;r<n.qHyperCube.qMeasureInfo.length;r++)o.push(d(t,i.qHyperCubeDef.qMeasures[r].qLibraryId,n.qHyperCube.qMeasureInfo[r].qFallbackTitle));return e.all(o)}function h(t,n,i){var r,o,a=[];for(o=0;o<n.layers.length;o++)for(r=0;r<n.layers[o].qHyperCube.qMeasureInfo.length;r++)a.push(d(t,i.layers[r].qHyperCubeDef.qMeasures[0].qLibraryId,n.layers[r].qHyperCube.qMeasureInfo[r].qFallbackTitle));return e.all(a)}function v(t,n,i){var r,o=[],a;for(r=0;r<n.qHyperCube.columnOrder.length;r++){a=n.qHyperCube.columnOrder[r];if(a>=n.qHyperCube.qDimensionInfo.length){a-=n.qHyperCube.qDimensionInfo.length;o.push(d(t,i.qHyperCubeDef.qMeasures[a].qLibraryId,n.qHyperCube.qMeasureInfo[a].qFallbackTitle))}}return e.all(o)}function g(t,n,i){return e.all({title:t.layout.showTitles?t.layout.title:null,description:t.layout.descriptionExpression||i.qMetaDef.description,dimensions:o(n,t,i),measures:f(n,t,i)})}function m(e){return e.layout.qExtendsId?e.model.app.getObject(e.layout.qExtendsId).then(function(t){return t.getProperties().then(function(n){return g(e,t,n)})}):e.model.getEffectiveProperties().then(function(t){return g(e,e.model,t)})}return{createObjectInfo:m}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){return{type:"array",component:"sorting",translation:"properties.sorting",sortIndexRef:"qHyperCubeDef.qInterColumnSortOrder",allowMove:true,schemaIgnore:true,items:{dimensions:{type:"items",component:"expandable-items",ref:"qHyperCubeDef.qDimensions",items:{autoSort:{ref:"qDef.autoSort",type:"boolean",translation:"properties.sorting",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],change:function e(t,n){if(t.qDef.autoSort)return n.autoSortDimension(t).then(function(){})}},dimension:{component:"sorting-dimension",type:"items",ref:"",sortingItems:{expression:true,frequency:false,numeric:true,ascii:true}}}},measures:{type:"items",component:"expandable-items",grouped:true,ref:"qHyperCubeDef.qMeasures",items:{autoSort:{ref:"qDef.autoSort",type:"boolean",translation:"properties.sorting",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}],change:function e(t,n){if(t.qDef.autoSort)return n.autoSortMeasure(t).then(function(){})}},measure:{component:"sorting-measure",ref:"",sortingItems:{numeric:true,ascii:true}}}}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(91),n(237),n(417)],r=function(e,t,n){var i={type:"items",items:{autoMinMax:{ref:"measureAxis.autoMinMax",type:"boolean",translation:"properties.axis.range",component:"switch",defaultValue:true,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}]},minMax:{type:"string",component:"dropdown",ref:"measureAxis.minMax",options:[{translation:"properties.axis.min",value:"min"},{translation:"Common.Max",value:"max"},{translation:"properties.axis.minMax",value:"minMax"}],defaultValue:"min",show:function e(t){return t.measureAxis&&!t.measureAxis.autoMinMax}},min:{ref:"measureAxis.min",translation:"properties.axis.min",expression:"optional",type:"number",show:function e(t){return t.measureAxis&&["min","minMax"].contains(t.measureAxis.minMax)&&!t.measureAxis.autoMinMax},invalid:function e(t){if(t.measureAxis&&"minMax"===t.measureAxis.minMax)return t.measureAxis.min>=t.measureAxis.max;return false}},max:{ref:"measureAxis.max",translation:"Common.Max",expression:"optional",type:"number",defaultValue:10,show:function e(t){return t.measureAxis&&["max","minMax"].contains(t.measureAxis.minMax)&&!t.measureAxis.autoMinMax},invalid:function e(t){if(t.measureAxis&&"minMax"===t.measureAxis.minMax)return t.measureAxis.min>=t.measureAxis.max;return false}}}};var r=[{value:"all",translation:"properties.axis.show.all"},{value:"labels",translation:"properties.axis.show.labels"},{value:"title",translation:"properties.axis.show.title"},{value:"none",translation:"Common.None"}];var o=[{value:2,translation:"properties.gridLine.wide"},{value:1,translation:"properties.gridLine.medium"},{value:.5,translation:"properties.gridLine.narrow"}];var a={type:"items",items:{show:{type:"string",component:"dropdown",ref:"dimensionAxis.show",translation:"properties.axis.labelsAndTitle",options:r,defaultValue:"all",snapshot:{title:function t(n){return e.get("properties."+this.getXYAxis(n)+"Axis")},getXYAxis:function e(t){return n.isVertical(t)?"x":"y"},group:false,tid:function e(t){return"property-"+this.getXYAxis(t)+"Axis"}}},label:{type:"string",component:"dropdown",ref:"dimensionAxis.label",translation:"properties.axis.labelOrientation",options:[{value:"auto",translation:"Common.Auto"},{value:"horizontal",translation:"Common.Horizontal"},{value:"tilted",translation:"properties.labels.tilted"}],defaultValue:"auto",show:function e(i,r,o){return n.isVertical(o.layout)&&i.dimensionAxis&&["all","labels"].contains(i.dimensionAxis.show)&&!t.isContinuousChart(o.layout)}},dock:n.getAxisDockProperties("dimensionAxis",{major:true})}};return{measureAxis:{type:"items",label:e.get("properties.yAxis"),grouped:true,items:{axis:{type:"items",items:{show:{type:"string",component:"dropdown",ref:"measureAxis.show",translation:"properties.axis.labelsAndTitle",options:r,defaultValue:"all"},dock:n.getAxisDockProperties("measureAxis"),spacing:{ref:"measureAxis.spacing",translation:"properties.axis.scale",type:"number",component:"dropdown",defaultValue:1,options:o,show:function e(t){return t.measureAxis&&"none"!==t.measureAxis.show}}}},minMax:i}},flippableMeasureAxis:{uses:"axis.measureAxis",label:function t(i,r){var t,o="x",a=n.getMeasures(i,r).map(function(e){return e.qFallbackTitle}).join(", ");n.isVertical(r.layout)&&(o="y");t=a?e.get("properties."+o+"AxisWithInfo",[a]):e.get("properties."+o+"Axis");return t},items:{axis:{type:"items",items:{show:{snapshot:{title:function t(n){return e.get("properties."+this.getXYAxis(n)+"Axis")},getXYAxis:function e(t){return n.isVertical(t)?"y":"x"},group:false,tid:function e(t){return"property-"+this.getXYAxis(t)+"Axis"}}},dock:{options:function e(t,i,r){var o,a;if(n.isVertical(i.layout)){o=r.yMirrorMode?"properties.dock.right":"properties.dock.left";a=r.yMirrorMode?"properties.dock.left":"properties.dock.right"}else{o="Common.Bottom";a="Common.Top"}return[{value:"near",translation:o},{value:"far",translation:a}]}}}}}},dimensionAxis:{type:"items",label:n.dimensionAxisLabelFn,grouped:true,items:{continuousGroup:{type:"items",items:{auto:{ref:"dimensionAxis.continuousAuto",translation:"properties.axis.continuous",type:"boolean",component:"switch",defaultValue:true,undefinedValue:false,options:[{value:true,translation:"Common.Auto"},{value:false,translation:"Common.Custom"}]},preferContinuous:{type:"boolean",ref:"preferContinuousAxis",translation:"properties.axis.preferContinuous",defaultValue:true,undefinedValue:false,show:function e(t){return!t.dimensionAxis.continuousAuto},readOnly:function e(n,i,r){return!t.canBeContinuousChart(r.layout)}},miniChart:{type:"boolean",ref:"showMiniChartForContinuousAxis",translation:"properties.showMiniChart",defaultValue:true,undefinedValue:true,show:function e(n,i,r){return t.isContinuousChart(r.layout)}}}},othersGroup:a}},picasso:{dimensionAxis:{type:"items",label:n.dimensionAxisLabelFn,items:{othersGroup:a}},measureAxis:{type:"items",uses:"axis.flippableMeasureAxis"}}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={strokeWidth:{show:false,ref:"style.strokeWidth",type:"number",expression:"optional",defaultValue:0,translation:"LayerStyleEditor.style.strokeWidth"},strokeColor:{show:false,ref:"style.strokeColor",translation:"LayerStyleEditor.style.strokeColor",type:"object",component:"color-picker",dualOutput:true,defaultValue:function e(){return{index:-1,color:"#205891"}}},width:{show:false,ref:"style.width",type:"number",expression:"optional",defaultValue:.7,translation:"LayerStyleEditor.style.barWidth"}};return{box:{type:"items",components:"items",items:e}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(198)],r=function(e){var t;function n(e,t){if(t){if(e[t]){if(e[t].qHyperCube)return t+".qHyperCube";if(e[t].qListObject)return t+".qListObject"}if(-1!==t.indexOf("Def",t.length-3))return t.slice(0,t.length-3);return t}return e.qHyperCube?"qHyperCube":"qListObject"}t=e.extend("GenericApi",{init:function e(t,i){var r=n(t.layout,i);this._super(t,"/"+r+"Def");this.isHyperCube=-1!==this.dataPath.indexOf("qHyperCube");this.cacheCube.setMethodName(this.isHyperCube?"getHyperCubeData":"getListObjectData")},getBackendApi:function e(n){return new t(this.model,n)},getProperties:function e(){return this.model.getProperties()},setProperties:function e(t){return this.model.setProperties(t)},applyPatches:function e(t,n){return this.model.applyPatches(t,n)},clearSoftPatches:function e(){return this.model.clearSoftPatches()},save:function e(){return this.model.setProperties(this.model.properties)},clearSelections:function e(){return this.model.resetMadeSelections()},updateCache:function e(t){if(t&&t[this.dataPath]){this.cacheCube.set(t[this.dataPath].qDataPages);this.cacheCube.setCubeSize(t[this.dataPath].qSize)}else this.cacheCube.clear()},getData:function e(t){var n=this.cacheCube.getData(t),i=this;n.then(function(e){i.model.layout[i.dataPath].qDataPages.push(e[0])});return n},getDataRow:function e(t){var n=this.model.layout[this.dataPath];if(n){var i=n.qDataPages.length;for(var r=0;r<i;r++){var o=n.qDataPages[r];if(t>=o.qArea.qTop&&t<o.qArea.qTop+o.qArea.qHeight)return o.qMatrix[t-o.qArea.qTop]}}return null},selectValues:function e(t,n,i){if(this.isHyperCube)return this.model.selectHyperCubeValues(this.path,t,n,i);return this.model.selectListObjectValues(this.path,n,i)},select:function e(t,n,i){return this.selectValues(n,t,i)},getReducedData:function e(t,n,i){if(this.isHyperCube)return this.model.getHyperCubeReducedData(this.path,t,n,i||"D1");return null},selectRange:function e(t,n,i){n=!!n;i=i||[];return this.model.rangeSelectHyperCubeValues(this.path,t,i,n)},search:function e(t){if(this.isHyperCube)return null;return this.model.searchListObjectFor(this.path,t)},abortSearch:function e(){if(this.isHyperCube)return null;return this.model.abortListObjectSearch(this.path)},acceptSearch:function e(t){if(this.isHyperCube)return null;return this.model.acceptListObjectSearch(this.path,t)},getPivotData:function e(t){if(this.isHyperCube)return this.model.getHyperCubePivotData(this.path,t);return null},getStackData:function e(t,n){if(this.isHyperCube)return this.model.getHyperCubeStackData(this.path,t,n||1e3);return null},expandTop:function e(t,n,i){return this.model.expandTop(this.path,t,n,i||false)},expandLeft:function e(t,n,i){return this.model.expandLeft(this.path,t,n,i||false)},collapseTop:function e(t,n,i){return this.model.collapseTop(this.path,t,n,i)},collapseLeft:function e(t,n,i){return this.model.collapseLeft(this.path,t,n,i)}});return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(90),n(330)],r=function(e,t,n){var i,r={enabled:true,debouncing:{enabled:true,delay:50}};i=e.extend({init:function e(t,i,r){this.model=t;this.responseProperty=i;this.options={};this.setOptions({});this.setPath(r);this.throttle=new n;this.throttle.Send.bind(function(e,t){o.model[o.method](o.path,e).then(function(e){t.resolve(e)},function(){t.reject()})});var o=this;this._modelBinding=function(){o.clear()};this.model.Invalidated.bind(this._modelBinding)},setMethodName:function e(t){this.method=t},setPath:function e(t){this.path=t},setOptions:function e(n){this.options=t.extend(true,{},r,this.options,n);this.enabled=this.options.enabled||false;this.debouncing={enabled:this.options.debouncing.enabled||false,delay:this.options.debouncing.delay||-1}},clear:function e(){this.throttle&&this.throttle.clear()},destroy:function e(){this.throttle.destroy();this.model&&this.model.Invalidated&&this.model.Invalidated.unbind(this._modelBinding);this._modelBinding=null;delete this.model;delete this.throttle},set:function e(){this.clear()},getData:function e(t){if(!this.enabled)return this.model[this.method](this.path,t);return this.throttle.queue(t)}});return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div style="height: 100%; position: relative;"></div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){return{quarantine:t,unquarantine:n};function t(t){var n=e.getValue(t,"properties.qHyperCubeDef.qMeasures",[]);var i=e.getValue(t,"properties.qHyperCubeDef.qDimensions",[]);n.forEach(r.bind(null,t,"measures"));i.forEach(r.bind(null,t,"dimensions"))}function n(t){var n=e.getValue(t,"qProperty.qHyperCubeDef.qMeasures",[]);var i=e.getValue(t,"qProperty.qHyperCubeDef.qDimensions",[]);n.forEach(o.bind(null,t,"measures"));i.forEach(o.bind(null,t,"dimensions"))}function i(e){return e&&e.qCond&&e.qCond.qv}function r(t,n,r){var o=e.getValue(r,"qDef.cId");var a="qLayoutExclude.quarantine.conditionalShowHide."+n;if(!i(r.qCalcCondition))return;if(!o){o=e.generateId();e.setValue(r,"qDef.cId",o)}e.setValue(t.properties,a+"."+o,r.qCalcCondition);delete r.qCalcCondition}function o(t,n,r){var o=e.getValue(r,"qDef.cId");var a="qProperty.qLayoutExclude.quarantine.conditionalShowHide."+n;if(!o)return;var s=e.getValue(t,a+"."+o);if(i(s)){r.qCalcCondition=s;e.setValue(t,a+"."+o,void 0)}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;n(448);var i=a(n(49));var r=a(n(100));var o=a(n(333));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){var e;var t;var n=function e(){};return{getCurrentId:function e(){return r.default.getCurrentTheme()},getApplied:function i(){var a=r.default.getCurrentTheme();if(t&&e===a)return t;n();e=a;t=new Promise(function(e,t){n=t;r.default.getThemeJSON(a).then(function(t){e(new o.default(a,t))})});return t}}}();var l=function e(t){return t.then(function(e){var t=e.default||e;if("function"===typeof t)return t({flags:i.default,theme:s});return t})};t.default=l;e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=i;function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var t=["jqueryoutside","jqueryui","jqueryuitouch","eventable","sirtrevor","angular-aria","crossroads","signals","d3","element-queries","resize-sensor","jszip","filesaver","sha256","dropzone","handlebars","angular-vs-repeat","bodymovin","hammerjs","angular-leonardo-ui","enigma-sense-utilities","dragoman","sensei-codearea","qlikmetrics","engine-definition","sense-themes-default","guid","pubsub","xsrfplugin","widget.","general.","core.","client.","objects.","storytelling.","scripteditor.","dev-hub.","cm.","@qlik/codemirror","extensions.qliktech","apis/","assets/","chart/","js/","translate/","md-components/"];return t.some(function(t){return 0===e.indexOf(t)})}e.exports=t.default},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(89)],r=function(e,t){var n=e.extend({mounted:function e(){},paint:function e(){return t.resolve()},resize:function e(t,n){return this.paint(t,n)},updateData:function e(){return t.resolve()},beforeDestroy:function e(){}});return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(102),n(629)],r=function(e,t,n){function i(t,n,i,r,o,a,s){if(!t.waitFor)return e.resolve();return t.waitFor.then(function(){return t.field[n].apply(t.field,[i,r,o,a,s].filter(function(e){return"undefined"!==typeof e}))})}function r(n,i,r){var o=this;o.qapp=n;o.fldname=i;o.statename=r;o.rows=[];if(o.qapp.model.session){t.create(o,"OnData");var a=new e;o.waitFor=a.promise;o.qapp.model.waitForOpen.promise.then(function(){var e=n.model.enigmaModel||n.model;e.getField(i,r||"$").then(function(e){o.field=e;a.resolve()}).catch(function(){})})}}r.prototype.clear=function(){return i(this,"clear")};r.prototype.lock=function(){return i(this,"lock")};r.prototype.unlock=function(){return i(this,"unlock")};r.prototype.clearOther=function(e){return i(this,"clearAllButThis",e||false)};r.prototype.selectAll=function(e){return i(this,"selectAll",e||false)};r.prototype.selectExcluded=function(e){return i(this,"selectExcluded",e||false)};r.prototype.selectAlternative=function(e){return i(this,"selectAlternative",e||false)};r.prototype.selectPossible=function(e){return i(this,"selectPossible",e||false)};r.prototype.toggleSelect=function(e,t){return i(this,"toggleSelect",e,t||false)};r.prototype.selectMatch=function(e,t){return i(this,"select",e,t||false)};r.prototype.select=function(e,t,n){return i(this,"lowLevelSelect",e,t||false,n||false)};r.prototype.selectValues=function(e,t,n){var r=[];e.forEach(function(e){"number"===typeof e?r.push({qIsNumeric:true,qNumber:e}):"string"===typeof e?"undefined"===e?r.push({qText:""}):r.push({qText:e}):r.push(e)});return i(this,"selectValues",r,t||false,n||false)};r.prototype.getData=function(e){if(this.requestActive)return this;this.requestActive=true;var t=this;var i=function i(){t.qapp.createGenericObject({qListObjectDef:{qStateName:t.statename?t.statename:"$",qDef:{qFieldDefs:[t.fldname]},qFrequencyMode:e&&e.freq||"V",qInitialDataFetch:[{qTop:0,qLeft:0,qHeight:e&&e.rows||200,qWidth:1}]}},function(e){t.rows.length=0;e.qListObject.qDataPages.forEach(function(e){e.qMatrix.forEach(function(e){t.rows.push(new n(e[0],t))})});t.rowCount=e.qListObject.qDimensionInfo.qCardinal;t.stateCounts=e.qListObject.qDimensionInfo.qStateCounts;t.requestActive=false;t.genericObject&&t.OnData.emit()}).then(function(e){t.genericObject=e;t.OnData.emit()})};this.genericObject?this.genericObject.close().then(function(){delete t.genericObject;i()}):i();return this};r.prototype.getMoreData=function(){if(this.requestActive)return this;if(this.rowCount<=this.rows.length)return this;this.requestActive=true;var e=this,t={qTop:this.rows.length,qLeft:0,qWidth:1,qHeight:50};e.genericObject?e.genericObject.getListObjectData("/qListObjectDef",[t]).then(function(t){t[0].qMatrix.forEach(function(t){e.rows.push(new n(t[0],e))});e.requestActive=false;e.OnData.emit()}):e.requestActive=false;return this};return r}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e,t){Object.defineProperties(this,{qText:{value:e.qText},qElemNumber:{value:e.qElemNumber},qState:{value:e.qState},field:{value:t}});Number.isNaN(+e.qNum)||Object.defineProperties(this,{qNum:{value:e.qNum}});e.qFrequency&&Object.defineProperties(this,{qFrequency:{value:e.qFrequency}})}e.prototype.select=function(e,t){return this.field.select([this.qElemNumber],e||false,t||false)};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(173),n(132)],r=function(e,t){function n(e){this.app=e}n.prototype.create=function(n,i,r){var o=this;return o.app.waitForOpen.promise.then(function(){return t.get(o.app).then(function(t){return t.getLayout().then(function(){var a=t.layout.qSelectionObject?t.layout.qSelectionObject.qSelections:null;var s,l={currentSelectFields:[],currentSelectCount:0};if(a&&a.length>0){l.currentSelectCount=a.length;for(s=0;s<a.length;s++)l.currentSelectFields.push(a[s].qField)}var c="";for(s=0;s<l.currentSelectCount;s++){s>0&&(c+=", ");c+=l.currentSelectFields[s]}var u={qMetaDef:{title:n,description:i},selectionFields:c};r&&(u.sheetId=r);return e.create(u,o.app)})})})};n.prototype.apply=function(t){var n=this;return n.app.waitForOpen.promise.then(function(){return e.apply(t,n.app)})};n.prototype.remove=function(t){var n=this;return n.app.waitForOpen.promise.then(function(){return e.remove(t,n.app)})};return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){return e.waitForOpen.promise.then(function(){return e.enigmaModel})}function t(e,t){this.app=e;this.qapp=t}function n(e){var t="string"===typeof e?{qName:e}:e;t.qInfo=t.qInfo||{};t.qInfo.qType=t.qInfo.qType||"variable";return t}t.prototype.create=function(t){var i=n(t);return e(this.app).then(function(e){return e.createVariableEx(i)})};t.prototype.createSessionVariable=function(t){var i=n(t);return e(this.app).then(function(e){return e.createSessionVariable(i)})};t.prototype.get=function(t){return e(this.app).then(function(e){return e.getVariableById(t)})};t.prototype.getByName=function(t){return e(this.app).then(function(e){return e.getVariableByName(t)})};t.prototype.setStringValue=function(t,n){return e(this.app).then(function(e){return e.getVariableByName(t)}).then(function(e){return e.setStringValue(n).then(function(){return e.getLayout()})})};t.prototype.setNumValue=function(t,n){return e(this.app).then(function(e){return e.getVariableByName(t)}).then(function(e){return e.setNumValue(n).then(function(){return e.getLayout()})})};t.prototype.setContent=function(e,t){console.warn("qlik.app.variable.setContent() is deprecated since 2.1, use setNumValue method or setStringValue method instead.");return this.setStringValue(e,t+"")};t.prototype.getContent=function(e,t){var n=this.qapp;var i=t?function(e){t(e,n)}:function(){};return this.getByName(e).then(function(e){if(!e)return e;return e.getLayout().then(function(e){var t={qContent:{qString:e.qText,qIsNum:!Number.isNaN(+e.qNum)}};i(t,n);return t})})};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(124),n(450),n(158)],r=function(e,t,n){function i(e){this.qapp=e}i.prototype.get=function(i){var r=this;return e.load().then(function(){return r.qapp.getObject(i).then(function(e){return n.getExtensionSupport(e).then(function(n){return new t(r.qapp,e,n)})})})};i.prototype.create=function(i,r,a){var s=this;return e.load().then(function(){var e=r&&r.layout&&(r.layout.visualization||r.layout.qInfo&&r.layout.qInfo.qType);var l="object"===o(r)&&e?n.convertDefinition(r,i,e,a):n.createDefinition(s.qapp,i,r,a);return l.then(function(e){return s.qapp.createGenericObject(e).then(function(e){return n.getExtensionSupport(e).then(function(n){e._expendable=true;return new t(s.qapp,e,n)})})})})};return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i;!(i=function(){var e={};Object.defineProperty(e,"empty",{value:"00000000-0000-0000-0000-000000000000",writable:false});e.generateId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})};return e}.call(t,n,t,e),void 0!==i&&(e.exports=i))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(635),n(230),n(97)],r=function(e,t,n,i,r){var o=[],a={endAnnotation:null},s=".qv-object-nav .lui-icon--camera";function l(i,o,s,l){v();a.endAnnotation=o;var u=t.getService("luiPopover"),d;var m=u.show({template:n,controller:["$scope","$element",function(t,n){d=t;t.annotation={text:""};t.active=true;t.focused=false;t.isSaveDisabled=l;t.save=function(){f(m.currentAnnotationId,t.annotation.text);t.close()};t.closeDialog=function(){t.annotation.text="";t.focused=false;c();t.close()};i.on("mouseenter.annotations",function(){p(t)});i.on("mouseleave.annotations",function(){h(t)});n.on("mouseenter.dialog",function(){p(t)});n.on("mouseleave.dialog",function(){h(t)});n.on("click.dialog",function(n){var i=e(n.target);i.is(".lui-textarea")&&(t.focused=true)});r.on("start.storytellingAnnotate",t.closeDialog);t.$on("$destroy",function(){r.off("start.storytellingAnnotate",t.closeDialog);e(document).off("keydown.annotations");n.off("mouseenter.dialog");n.off("mouseleave.dialog");n.off("click.dialog")});function o(){e(document).on("keydown.annotations",function(e){a(e)&&h(t,1)})}function a(e){var t=(e.ctrlKey||e.metaKey)&&!e.altKey;return t&&(37===e.which||39===e.which)}o();s&&h(t)}],alignTo:i[0]});m.closed.then(function(){g();f(m.currentAnnotationId,d.annotation.text,d);d.focused=false;d.close()});return m}function c(t){t||(t=e(s));if(t.length&&a){a.endAnnotation();for(var n=o.length;n>=0;n--)clearTimeout(o.pop());t.off("mouseenter.annotations");t.off("mouseleave.annotations");g()}}function u(e){return i.get(e)}function d(e,t){return e.getProperties().then(function(n){n.qMetaDef.annotation=t;e.setProperties(n)})}function f(t,n){var i=e(s);u(t).then(function(e){d(e,n).then(function(){c(i)})});t||c(i)}function p(e){e.active=true;for(var t=o.length;t>=0;t--)clearTimeout(o.pop())}function h(t,n){var i=e.isNumeric(n)?n:4e3;if(false===t.focused){t.active=false;t.focused=false;o.push(setTimeout(function(){t.$apply(function(){t.closeDialog()})},i))}}function v(){e(s).parents("#grid").append("<div class='annotations-blocker'></div>")}function g(){setTimeout(function(){e("#grid").children(".annotations-blocker").remove()})}t.service("annotationsDialog",function(){return{openDialog:l,closeDialog:c}});return{getSnapshotModel:u,saveAnnotationInModel:d}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover tid="snapshot-annotation">\n\t<lui-popover-header >\n\t\t<lui-popover-title q-translation="Storytelling.Snapshot.AnnotationTitle"></lui-popover-title>\n\t</lui-popover-header>\n\t<lui-popover-body>\n\t\t<div class="form">\n\t\t<textarea class="lui-textarea" maxlength="255" rows="3" ng-model="annotation.text"\n\t\t\t\t  q-placeholder="Storytelling.Snapshot.AnnotationHint"></textarea>\n\t\t</div>\n\t</lui-popover-body>\n\t<lui-popover-footer>\n\t\t<button class="lui-button  lui-button"  ng-click="closeDialog();" q-translation="Common.Cancel" tid="cancel-annotation-btn"></button>\n\t\t<button class="lui-button  lui-button" ng-click="save();"  q-translation="Common.Save" ng-disabled="isSaveDisabled()" tid="save-annotation-btn"></button>\n\t</lui-popover-footer>\n</lui-popover>'},function(e,t){e.exports='<div style="position: absolute;top:-99999px;left:-99999px;z-index:500;background: rgba(255, 255, 255, 0.6); visibility:hidden;" ng-style="style">\n <qv-object ng-if="data" object="data.object" model="data.model" options="data.options"></qv-object>\n</div>'},function(e,t){e.exports='<div style="position: absolute;top:-99999px;left:-99999px;z-index:500;background: rgba(255, 255, 255, 0.6);visibility:hidden;" ng-style="style">\n  <div ng-repeat="cell in cells" style="position:absolute;" ng-style="cell.style">\n     <qv-object object="cell.data.object" model="cell.data.model" options="cell.data.options"></qv-object>\n  </div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(639),n(640),n(50),n(127),n(49),n(145)],r=function(e,t,n,i,r,o,a){var s={scope:{title:"=",sheets:"=",isSheet:"=",isGrid:"=",confirmDisabled:"=",sheetInformation:"=",selectSheet:"="},controller:["$scope",function(t){t.sections={approved:{show:!!t.sheets.approvedSheets.length,showHeaderLine:true,expand:true},myPublished:{show:!!t.sheets.myPublishedSheets.length,showHeaderLine:true,expand:true},myPrivate:{show:!!t.sheets.privateSheets.length,showHeaderLine:true,expand:true},community:{show:!!t.sheets.communitySheets.length,showHeaderLine:true,expand:true}};t.getBaseTitle=function(){return a.getFlag("AOSHARE")?"AppOverview.Content.PublicSheets":"AppOverview.Content.ApprovedSheets"};t.cancel=function(){t.destroyComponent()};t.sheetClicked=function(e){t.selectSheet(e);t.destroyComponent()};t.isSmallDeviceListner=function(){t.destroyComponent()};t.noSheets=!(t.sheets.approvedSheets.length||t.sheets.myPublishedSheets.length||t.sheets.privateSheets.length||t.sheets.communitySheets.length);t.toggleCollapse=function(n,i){n&&n.preventDefault&&n.preventDefault();t.sections[i].expand=!t.sections[i].expand;n&&t.sections[i].expand&&setTimeout(function(){o.scrollElmentIntoView(e(n.currentTarget).closest("div:not(.qs-tb)").find("ul li").first(),".av-content-container")})};t.$on("$destroy",function(){r.ViewChanged.unbind(t.isSmallDeviceListner)});r.ViewChanged.bind(t.isSmallDeviceListner)}]};t.directive("embeddedSheetItem",function(){return{restrict:"E",replace:true,template:i}});function l(e){var i={title:e.title,sheets:e.sheets,selectSheet:e.selectSheet,isSheet:true,isGrid:true,confirmDisabled:true,sheetInformation:e.sheetInformation};var r=t.getService("luiDialog");return r.show({template:n,controller:s.controller,input:i})}return{show:l}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-dialog class="qv-appview" id="select-sheet-dialog">\n\t<lui-dialog-header>\n\t\t<lui-popover-title q-translation="SheetDialog.SelectSheet"></lui-popover-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body>\n\t\t<div class="av-container">\n\t\t\t<div class="av-t-c">\n\t\t\t\t<div class="av-content-container">\n\t\t\t\t\t\x3c!-- Show information about sheets if there are any present --\x3e\n\t\t\t\t\t<div ng-if="!noSheets && sheetInformation" class="embedded-info">\n\t\t\t\t\t\t<span class="lui-icon lui-icon--info"></span>\n\t\t\t\t\t\t<span q-translation="{{sheetInformation}}"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t\x3c!-- Show message if no sheets are available --\x3e\n\t\t\t\t\t\t<h2 ng-if="noSheets" class="qv-ao-h2">\n\t\t\t\t\t\t\t<div class="err-text" q-translation="AppOverview.Error.NoSheets"></div>\n\t\t\t\t\t\t</h2>\n\n\t\t\t\t\t\t<div ng-if="sections.approved.show">\n\t\t\t\t\t\t\t\x3c!-- Approved Header --\x3e\n\t\t\t\t\t\t\t<div class="qs-tb">\n\t\t\t\t\t\t\t\t<h1 class="header approved" tid="ApprovedTitle" ng-click="toggleCollapse($event, \'approved\')">\n\t\t\t\t\t\t\t\t\t<span class="{{ sections.approved.expand ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\' }} lui-icon"\n\t\t\t\t\t\t\t\t\t\t  q-title-translation="{{ sections.approved.expand ? \'AppOverview.Collapse\' : \'AppOverview.Expand\' }}"></span>\n\t\t\t\t\t\t\t\t\t<span class="section-title" q-translation="{{getBaseTitle()}}"></span><span tid="nmbInSection" class="qs-font-n"> ({{sheets.approvedSheets.length}})</span>\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!-- Approved Sheets --\x3e\n\t\t\t\t\t\t\t<ul class="qv-approved qv-grid" ng-if="sections.approved.expand">\n\t\t\t\t\t\t\t\t<embedded-sheet-item ng-repeat="item in sheets.approvedSheets track by item.qInfo.qId"></embedded-sheet-item>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div ng-if="sections.myPublished.show">\n\t\t\t\t\t\t\t\x3c!-- My Published Header --\x3e\n\t\t\t\t\t\t\t<div class="section-line my-published" ng-if="sections.myPublished.showHeaderLine"></div>\n\t\t\t\t\t\t\t<div class="qs-tb">\n\t\t\t\t\t\t\t\t<h1 class="header my-published" tid="MyPublishedTitle" ng-click="toggleCollapse($event, \'myPublished\')">\n\t\t\t\t\t\t\t\t\t<span class="{{ sections.myPublished.expand ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\' }} lui-icon"\n\t\t\t\t\t\t\t\t\t\t  q-title-translation="{{ sections.myPublished.expand ? \'AppOverview.Collapse\' : \'AppOverview.Expand\' }}"></span>\n\t\t\t\t\t\t\t\t\t<span class="section-title" q-translation="AppOverview.Content.MyPublishedSheets"></span><span tid="nmbInSection" class="qs-font-n"> ({{sheets.myPublishedSheets.length}})</span>\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!-- My Published Sheets --\x3e\n\t\t\t\t\t\t\t<ul class="qv-my-published qv-grid"\n\t\t\t\t\t\t\t\tng-if="sections.myPublished.expand">\n\t\t\t\t\t\t\t\t<embedded-sheet-item ng-repeat="item in sheets.myPublishedSheets track by item.qInfo.qId"></embedded-sheet-item>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div ng-if="sections.myPrivate.show">\n\t\t\t\t\t\t\t\x3c!-- Private Header --\x3e\n\t\t\t\t\t\t\t<div class="section-line private" ng-if="sections.myPrivate.showHeaderLine "></div>\n\t\t\t\t\t\t\t<div class="qs-tb">\n\t\t\t\t\t\t\t\t<h1 class="header private" tid="PrivateTitle" ng-click="toggleCollapse($event, \'myPrivate\')">\n\t\t\t\t\t\t\t\t\t<span class="{{ sections.myPrivate.expand ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\' }} lui-icon"\n\t\t\t\t\t\t\t\t\tq-title-translation="{{ sections.myPrivate.expand ? \'AppOverview.Collapse\' : \'AppOverview.Expand\' }}"></span>\n\t\t\t\t\t\t\t\t\t<span class="section-title" q-translation="AppOverview.Content.MySheets"></span><span tid="nmbInSection" class="qs-font-n"> ({{sheets.privateSheets.length}})</span>\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!-- Private Sheets --\x3e\n\t\t\t\t\t\t\t<ul class="qv-private qv-grid"\n\t\t\t\t\t\t\t\tng-if="sections.myPrivate.expand">\n\t\t\t\t\t\t\t\t<embedded-sheet-item ng-repeat="item in sheets.privateSheets track by item.qInfo.qId"></embedded-sheet-item>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div ng-if="sections.community.show">\n\t\t\t\t\t\t\t\x3c!-- Community Header --\x3e\n\t\t\t\t\t\t\t<div class="section-line community" ng-if="sections.community.showHeaderLine"></div>\n\t\t\t\t\t\t\t<div class="qs-tb">\n\t\t\t\t\t\t\t\t<h1 class="header community" tid="CommunityTitle" ng-click="toggleCollapse($event, \'community\')">\n\t\t\t\t\t\t\t\t\t<span class="{{ sections.community.expand ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\' }} lui-icon"\n\t\t\t\t\t\t\t\t\t\t  q-title-translation="{{ sections.community.expand ? \'AppOverview.Collapse\' : \'AppOverview.Expand\' }}"></span>\n\t\t\t\t\t\t\t\t\t<span class="section-title" q-translation="AppOverview.Content.CommunitySheets"></span><span tid="nmbInSection" class="qs-font-n"> ({{sheets.communitySheets.length}})</span>\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\x3c!-- Community Sheets --\x3e\n\t\t\t\t\t\t\t<ul class="qv-community qv-grid"\n\t\t\t\t\t\t\t\tng-if="sections.community.expand">\n\t\t\t\t\t\t\t\t<embedded-sheet-item ng-repeat="item in sheets.communitySheets track by item.qInfo.qId"></embedded-sheet-item>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="$event.preventDefault(); cancel()" name="cancel" q-translation="Common.Cancel" tid="2f2a4f"></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(e,t){e.exports='<li class="qv-content-li" ng-class="{\'qv-active-item\': item.isActive}">\n\t<div class="qv-content-item"\n\t\t ng-click="sheetClicked(item)" tid="sheet.private">\n\t\t<div qv-ao-thumb\n\t\t\t item="item"\n\t\t\t class="qv-thumb-wrap"\n\t\t\t issheet="isSheet"\n\t\t\t thumblayout="item.qData.thumbnail"\n\t\t\t editmode="false"></div>\n\n\t\t<div class="qv-details-wrap">\n\t\t\t<div class="qv-details-name">\n\t\t\t\t<div class="q-ellipsis" title="{{item.qData.labelExpression || item.qData.title}}">{{item.qData.labelExpression || item.qData.title}}</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</li>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(642)],r=function(e,t){e.directive("qvModalDialog",function(){return{scope:{id:"@qvId",confirm:"&qvConfirm",cancel:"&qvCancel"},restrict:"E",transclude:true,replace:true,template:t,link:function e(){}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="modal-container qui-modalbackground-centered" qv-tabbable-container>\n\t<div id="{{id}}"\n\t\t class="modal-frame qui-delayedModal"\n\t\t ng-transclude></div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(644),n(645)],r=function(e,t,n){e.directive("qvConfirmCancelFooter",function(){return{scope:{confirmLabel:"@qvConfirmLabel",confirm:"&qvConfirm",confirmDisabled:"=qvConfirmDisabled",cancel:"&qvCancel",cancelDisabled:"=qvCancelDisabled"},restrict:"E",replace:true,template:function e(i,r){var o=r.hasOwnProperty("light");return o?n:t}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<footer class="dm-footer">\n    <lui-button x-variant="inverse" qva-activate="$event.preventDefault(); cancel()" name="cancel" q-translation="Common.Cancel" tid="2f2a4f" ng-disabled="cancelDisabled"></lui-button>\n    <lui-button x-variant="inverse" qva-activate="$event.preventDefault(); confirm()" name="confirm" autofocus q-translation="{{confirmLabel}}" tid="2f2a56" ng-disabled="confirmDisabled" qva-focus="true"></lui-button>\n</footer>\n'},function(e,t){e.exports='<footer class="dm-footer">\n    <lui-button qva-activate="$event.preventDefault(); cancel()" name="cancel" q-translation="Common.Cancel" tid="2f2a4f" ng-disabled="cancelDisabled"></lui-button>\n    <lui-button qva-activate="$event.preventDefault(); confirm()" name="confirm" autofocus q-translation="{{confirmLabel}}" tid="2f2a56" ng-disabled="confirmDisabled" qva-focus="true"></lui-button>\n</footer>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(11)],r=function(e){var t=function t(n,i,r,o){var a,s,l,c,u,d,f,p;if(o){u=o.replace(/[^-\d.]/g,"");c=o.replace(/[-\d.]/g,"")}c=c||"pt";u=u||12;r&&-1==n.indexOf("font")&&(n="<font>"+n+"</font>");var h=e(e.parseHTML(n));var v=h.filter("font").add(h.find("font"));var g=h.filter("div").add(h.find("div"));var m="BR";h.each(function(e,t){t.tagName&&t.tagName.toUpperCase()===m.toUpperCase()&&(h[e]=document.createElement("div"))});p=c;d=1;switch(c){case"px":d=.75;p="pt";break}f=u*d;function b(e,t){var n=e.toFixed(2);return n+t}v.each(function(t,n){a=e(n);l=n.getAttribute("size")||"3";s=1;switch(l){case"1":s=.5;break;case"2":s=.8;break;case"3":s=1;break;case"4":s=1.5;break;case"5":s=2;break;case"6":s=3;break}a.css({"font-size":b(f*s,p)});a.removeAttr("size")});g.each(function(t,n){a=e(n);var i=n.getAttribute("align");if(i){a.css({"text-align":"inherit"===i?"left":i});a.removeAttr("align")}else"inherit"===a.css("text-align")&&a.css({"text-align":"left"})});var y="#545352";var x=b(f,p);n=h.wrapAll('<div style="color:'+y+"; font-size:"+x+';">').parent().wrapAll("<div>").parent().html();return n};return{enrichHtml:t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(93),n(339),n(173),n(132),n(172)],r=function(e,t,n,i,r,o){function a(i,r,a,s){return t.getApp().then(function(e){return e.getObject(i)}).then(function(t){return t.getLayout().then(function(t){var i=o.sortSlidesByRank(t.qChildList.qItems.slice());if(!i.length)return{layout:t};var l=[];return i.map(function(e){return n.snapshot.bind(this,e.qInfo.qId,r,a,s)}).reduce(function(e,t){return e.then(function(e){e&&l.push(e);return t()})},e.resolve()).then(function(e){l.push(e);return{layout:t,slides:l}})})})}return{snapshot:function e(t,n,o,s){return r.get().then(function(e){return e.getLayout().then(function(e){return i.create({title:"",selectionFields:e.qSelectionObject.qSelections}).then(function(e){return a(t,n||{},o,s).then(function(n){i.apply(e.id).then(function(){i.remove(e.id)});return{id:t,type:"story",snapshot:null,area:null,children:n.slides,title:n.layout.qMeta.title||""}})})})})}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(102)],r=function(e){function t(e,t){Object.defineProperties(this,{fieldName:{value:e.qField},field:{get:function e(){return i(this.parent,this.fieldName)}},qSortIndex:{value:e.qSortIndex},locked:{value:e.qLocked||false},isNumeric:{value:e.qIsNum||false},totalCount:{value:e.qTotal},selectedCount:{value:e.qSelectedCount},qStateCounts:{value:e.qStateCounts},qSelected:{value:e.qSelected},selectedValues:{value:e.qSelectedFieldSelectionInfo},notSelectedValues:{value:e.qNotSelectedFieldSelectionInfo},qSelectionThreshold:{value:e.qSelectionThreshold},qTextSearch:{value:e.qTextSearch},qRangeInfo:{value:e.qRangeInfo},parent:{value:t}})}function n(t,n,i){e.create(this,"OnData");Object.defineProperties(this,{qapp:{value:t},selections:{value:[]},stateName:{value:i||"$"}});var o=this;n.then(function(e){r(o,e);e.Validated.bind(function(){r(o,e)})})}n.prototype.clearAll=function(e){return this.qapp.clearAll(e,this.stateName)};n.prototype.lockAll=function(){return this.qapp.lockAll(this.stateName)};n.prototype.unlockAll=function(){return this.qapp.unlockAll(this.stateName)};function i(e,t){return e.qapp.field(t,e.stateName)}function r(e,n){e.selections.length=0;if(n.layout.qSelectionObject){void 0===e.backCount&&Object.defineProperties(e,{backCount:{get:function e(){return n.layout.qSelectionObject.qBackCount||0}},forwardCount:{get:function e(){return n.layout.qSelectionObject.qForwardCount||0}}});n.layout.qSelectionObject.qSelections.forEach(function(n){e.selections.push(new t(n,e))});e.OnData.emit()}}return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(100),n(341),n(162)],r=function(e,t,n){var i=new t;function r(e){this.app=e}r.prototype.save=function(t){var n=this.app;e.isValidTheme(t).then(function(i){if(!i)throw new Error("Invalid theme id");n.waitForOpen.promise.then(function(){n.getLayout().then(function(n){if(!n.permissions.update)throw new Error("permission denied");e.saveTheme(t)})})})};r.prototype.get=function(e){if(!e)return this.app.waitForOpen.promise.then(function(){return n.getProperties().then(function(e){return i.get(e.theme)})});return i.get(e)};r.prototype.getApplied=function(){return i.get(e.getCurrentTheme())};return r}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(99),n(104),n(146),n(343),n(256),n(232),n(453),n(240)],r=function(e,t,n,i,r,o,a,s,l){var c,u,d,f=7,p=250;function h(e,t){return e.components&&e.components.dataArea&&e.components.dataArea.length&&e.components.dataArea[0].chartFormatter&&(null===e.components.dataArea[0].chartFormatter.measureFormatters||null===e.components.dataArea[0].chartFormatter.measureFormatters[t])}function v(e){var t=e.getBoundingRect();return Number.isNaN(+t.x+t.y+t.width+t.height)}function g(e){return e.getDimensions().join(", ")}function m(e){return e.id+(e.parent?"-"+e.parent.id:"")}function b(){if(u){u=null;d=null}c=null}function y(e,t,n,r){if(n){var o=new i(0,0,n.rect.width,n.rect.height);e=e.intersection(o)}return{positions:[t(e.x+e.width/2,e.y,n,r),t(e.x+e.width,e.y+e.height/2,n,r),t(e.x,e.y+e.height/2,n,r),t(e.x+e.width/2,e.y+e.height,n,r)],directions:["top","right","left","bottom"]}}function x(e,t){var n,i,r,o,a=[],s,l,c;var u={positions:null,directions:null,target:null,component:null};if(this._positionAtMouse||1!==this._cssTransform.scale){n=t||e[0].interactPosition;if(n){i=this.getTransformedPoint(n.x,n.y,this.containerRect);o=e[0].getShapes();a=o.filter(function(e){return e.pointInside(i.x,i.y)});u.target=a.length?a[0]:o[0];u.directions=["top","right","left","bottom"];u.positions=[n]}}else{e.forEach(function(e){var n=null;var l=null;o=e.getShapes();if(e.calculateTooltipPosition&&e.tooltipShape){l=this.components[e.tooltipShapeComponent]?this.components[e.tooltipShapeComponent][0]:void 0;r=e.getShapeBounds(e.tooltipShapeComponent,l&&l.chartScale||1);if(r){u.target=a.length?a[0]:o[0];u.component=l}}else{if(e.tooltipShape&&!v(e.tooltipShape)){a=[e.tooltipShape];u.component=this.components[e.tooltipShapeComponent]?this.components[e.tooltipShapeComponent][0]:void 0}else if(t){i=this.getTransformedPoint(t.x,t.y,this.containerRect);a=o.filter(function(e){return e.pointInside(i.x,i.y)})}u.target=a.length?a[0]:o[0];if(u.target)if(u.target.getRelevantPosition)n=u.target.getRelevantPosition();else{r=u.target.getBoundingRect();if(!u.target.clearModelView&&u.component){c=u.component.chartScale||1;r=r.clone();r.set(r.x*c,r.y*c,r.width*c,r.height*c)}}}if(n){u.positions=[this.getPagePoint(n.pos.x,n.pos.y,u.component,this.containerRect)];u.directions=n.direction}else s=s?r.combineWith(s):r},this);if(s){l=y(s,this.getPagePoint.bind(this),u.component,this.containerRect);u.positions=l.positions;u.directions=l.directions}}return u}function S(e,t){var n=[],i,r=0,o,a,s,l,c,u,d=this.measureFormatters||[];if(e.isCacheItem){c=e.getMeasures();u=e.getMeasuresIndecies(t);o=u.length;for(r;r<o;++r){var f=u[r];a=e.getValue(f);s=a;l=e.getPreformattedLabel(f);d[u[r]]?a="U"!==d[f].type&&l?l:d[f].format(a):a&&l&&h(this,f)?a=l:"NaN"===a&&(a="-");c[f]&&void 0!==a&&n.push({label:c[f],value:a+"",num:s})}}else{o=e.node.children.length;for(r;r<o;++r){a=e.node.children[r].children[0].data.qNum||e.node.children[r].children[0].data.qValue;s=a;l=e.node.children[r].children[0].data.qText;d[r]&&(a="U"!==d[r].type&&l?l:d[r].format(a));n.push({label:e.node.children[r].data.qText,value:a+"",num:s})}}if(this.colorMap){i=this.colorMap.getTooltipContent(e,t.rowIndex);i&&n.splice(0,0,i)}var p=[];n.forEach(function(e){p.some(function(t){return t.label===e.label&&(t.value===e.value||t.num===e.num)})||p.push(e)});return p}function w(e,t){var n=[],i=0,r=0;while(i<f&&r<e.length){n.push({header:g(e[r]),rows:S.call(this,e[r],t)});i+=n[r].rows.length+1;r++}e.length>r&&(n.numberInExcess=e.length-r);n.msrCount=n[0]?n.length*n[0].rows.length:0;return n}function q(e,n,i,r){var o=x.call(this,e,n);if(o.positions&&o.directions){var a=this.getPagePoint(0,0,o.component,this.containerRect);var s=w.call(this,e,o.target);var c=r?null:l.getDuration(s.msrCount);t.getService("qvChartTooltipService").open({target:{shape:o.target,targetToPageTranslation:a},position:o.positions,content:s,direction:o.directions,numberInExcess:s.numberInExcess,hideCallback:b.bind(this),dir:this.yMirrorMode?"rtl":"ltr"},c,i);u=e[0];d=e.map(m).join("")}}function C(e){var t=this.getTransformedPoint(e.x,e.y,this.containerRect);return this.shapesFrom.shapesFromPoints([t])}function _(e){var t=C.call(this,e);return t.map(m).join("")}function I(e){var n=this;this.setActiveComponent(this.getComponent(e.x,e.y,this.containerRect));var i=C.call(n,e);if(i&&i.length&&this.activeComponent){n._positionAtMouse="MapArea"===n.activeComponent.className||1!==n._cssTransform.scale;c=t.getService("$timeout")(function(){q.call(n,i,e,null,n._noDuration);c=null},p)}}function E(e,t){var n=this;if(e&&e.length&&this.activeComponent){n._positionAtMouse="MapArea"===n.activeComponent.className||1!==n._cssTransform.scale;q.call(n,e,null,t)}}function D(){t.getService("$timeout").cancel(c);c=null;this.prevPoint=null}function A(){if(u){u=null;d=null;t.getService("qvChartTooltipService").close()}c=null}function T(e,t){var n=t?t.length:0,i,r;for(i=0;i<n;i++){r=t[i];if(r&&r.pointInside&&r.pointInside(e.x,e.y))return true}return false}function O(e){var t=e?e.length:0,n=[],i,r,o;for(i=0;i<t;i++){r=e[i]._shapes;if(!o){o=e[i]._interactPosition;o&&(o=this.getTransformedPoint(o.x,o.y,this.containerRect))}o&&T(o,r)&&(n[n.length]=e[i])}n.length||(n=e);return n}var k=o.extend("ChartTooltip",{init:function e(t,n,r){this._super(r,n);this.cache=r;u=null;c=null;this.container=t;this.containerRect=new i(0,0,0,0);this._positionAtMouse=true;this._enabled=true;this._allowNullSelect=true;this.touchTimeout=Number.isNaN(+n.touchTimeout)?10:n.touchTimeout},refreshContainerRect:function e(){this.offset=this.container.offset();var t=this.offset;var n=this.container.width();var i=this.container.height();this.containerRect.set(t.left,t.top,n,i)},on:function e(){if(this._isListening)return;this._isListening=true;var t=this;this._interactionEvents=a.extend({preventDefault:false,mousemove:function e(n){var i=new r(n.pageX,n.pageY);t.refreshContainerRect();t.move(n,i)},mouseleave:function e(n){t.leave(n)},mousewheel:function e(){t.cancel()},swipe:{start:function e(){t.cancel()},cancel:function e(){t.cancel()}},swipetwo:{start:function e(){t.cancel()},cancel:function e(){t.cancel()}},rotate:{start:function e(){t.cancel()},cancel:function e(){t.cancel()}},active:function e(){return t._enabled&&(u||n.treatAsDesktop())}});this._tapEvents=a.extend({preventDefault:false,tap:{end:function e(n,i){var r=i.pagePoints[0];t.refreshContainerRect();t.setActiveComponent(t.getComponent(r.x,r.y,t.containerRect));var o=C.call(t,r);o.forEach(function(e){e.interactPosition=r});t.updateHighlightedShape(o)}},active:function e(){return t._enabled}});n.treatAsDesktop()&&s.MouseLeave.bind(t._interactionEvents.mouseleave);function i(e){if(n.treatAsDesktop())s.addInteraction(t._interactionEvents,e.container,0,["mousemove","mouseleave","swipe","mousewheel"]);else{s.addInteraction(t._interactionEvents,e.container,0,["swipe","swipetwo","rotate"]);s.addInteraction(t._tapEvents,e.container,0,["tap"])}}this.registerAddedComponent=function(e){i(e)};this.deregisterAddedComponent=function(e){s.removeInteraction(t._interactionEvents,e.container);s.removeInteraction(t._tapEvents,e.container)};Object.keys(this.components).map(function(e){return t.components[e]}).forEach(function(e){e.forEach(function(e){t.registerAddedComponent(e)})})},register:function e(t,n){this.registerAddedComponent&&this.registerAddedComponent(n)},deregister:function e(t,n){this.deregisterAddedComponent&&this.deregisterAddedComponent(n)},off:function e(){this._isListening=false;s.MouseLeave.unbind(this._onMouseLeave);s.removeInteraction(this._interactionEvents);s.removeInteraction(this._tapEvents);this.registerAddedComponent=null;this.deregisterAddedComponent=null},initComponent:function e(t){this.setActiveComponent(this.getComponent(t.x,t.y,this.containerRect))},updateHighlightedShape:function e(t,i){if(t.length>=1){var r,o=true,a=false;r=O.call(this,t);if(!r||!r.length)return;if(!n.treatAsDesktop()){r=r.filter(function(e){return!e.selected});if(r.length)if(u||c){if(r.length>1||r[0]!==u){o=false;a=true}}else{o=false;a=true}if(o){D.call(this);A.call(this)}a&&E.call(this,r,this.touchTimeout)}}else if(!n.treatAsDesktop()&&i){D.call(this);A.call(this)}},getRect:function e(t){if(!t)return new i(0,0,0,0);return t.hasOwnProperty("innerRect")?t.innerRect:t.rect},move:function e(t,i){if(!n.treatAsDesktop()||!this._enabled)return;if(null!==c){if(!this.prevPoint||i.distanceTo(this.prevPoint)>5){D.call(this);I.call(this,i)}}else{this.prevPoint=i;if(u){if(_.call(this,i)!==d){A.call(this);I.call(this,i)}}else I.call(this,i)}},setCssTransform:function e(t){this._cssTransform=t||{scale:1}},leave:function t(n){var i=n.toElement||n.relatedTarget;if(!e(i).hasClass("qvt-chart-tooltip")&&!e(i).parents(".qvt-chart-tooltip").length){D.call(this);A.call(this)}},cancel:function e(){D.call(this);A.call(this)},clearSelection:function e(){D.call(this);A.call(this)},release:function e(){this._super();this.off()}});Object.defineProperties(k.prototype,{enabled:{set:function e(t){this._enabled=t},get:function e(){return this._enabled}}});return k}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(92),n(652),n(344)],r=function(e,t,n,i){function r(e){return e?e.selectionIdentifier:null}function o(e,t){if(t){var n=false;t.contains(0)&&(n=e.parent?-2===e.parent.id:-2===e.id);e.parent&&t.contains(1)&&(n=n||-2===e.id);return n}return-2===e.id||e.parent&&-2===e.parent.id}function a(e,t){return e&&e.length?t.filter(function(t){return e.some(function(e){return t.col===e.col&&t.id===e.id})}):[]}var s=t.extend({init:function t(n,i){this.options=e.extend(true,{},{allowNullSelect:false,activeComponent:null},i);this.cache=n;this.allowNullSelect=this.options.allowNullSelect;this.activeComponent=this.options.activeComponent},shapeFromPoint:function e(t){return this.shapesFromPoints([t])[0]},shapesFromPoints:function e(t){var n,i,a,s=this.cache.data,l=this.cache.data.length,c=t.length,u,d,f,p=(this.activeComponent||this.components&&this.components.dataArea)&&(this.activeComponent||this.components.dataArea[0]).chartScale||1,h,v=r(this.activeComponent),g,m,b,y=[];for(g=0;g<l;++g){h=s[g];if(!o(h)||this.allowNullSelect)for(m=0;m<c;++m){n=t[m];i={x:n.x/p,y:n.y/p};d=h.getShapes(r(this.activeComponent));"dataArea"===v&&h.toggleShapes&&(d=d.concat(h.toggleShapes));u=d.length;for(b=0;b<u;++b){f=d[b];a=f.clearModelView?n:i;if(f.pointInside(a.x,a.y)){y.push(h);break}}}}return y},shapesFromLines:function e(t){var n,i=this.cache.data,a=this.cache.data.length,s=t.length,l,c,u,d,f,p,h,v=[];for(f=0;f<a;++f){d=i[f];if(!o(d)||this.allowNullSelect)for(p=0;p<s;++p){n=t[p];c=d.getShapes(r(this.activeComponent));l=c.length;for(h=0;h<l;++h){u=c[h];if(u.intersectsLine(n)){v.push(d);break}}}}return v},shapesFromPolygon:function e(t){var n,i,a=this.cache.data,s=this.cache.data.length,l,c,u,d,f,p,h,v,g=[];for(f=0;f<s;++f){d=a[f];if(!o(d)||this.allowNullSelect){v=false;u=d.getShapes(r(this.activeComponent));c=u.length;for(h=0;h<c;++h){if(v)break;n=u[h].getPoints();l=n.length;for(p=0;p<l;++p){i=n[p];if(t.pointInside(i.x,i.y)){g.push(d);v=true;break}}}}}return g},shapesFromRect:function e(t,n){if(!t)return[];var i=this.cache.data,a=this.cache.data.length,s,l,c,u,d,f,p=[];for(d=0;d<a;++d){u=i[d];if(!o(u)||this.allowNullSelect){l=u.getShapes(n||r(this.activeComponent));s=l.length;for(f=0;f<s;f++){c=l[f];if(c.intersectsRect){if(c.intersectsRect(t)){p.push(u);break}}else if(t.intersectsWith(c)){p.push(u);break}}}}return p},shapesFromRectForDirection:function e(t,n,i){var a=this.cache.data,s=this.cache.data.length,l,c,u,d,f,p,h,v=[],g=0,m=0,b="";switch(n){case"x":g=t.x;m=t.getRight();b="getRight";break;case"y":g=t.y;m=t.getBottom();b="getBottom";break}for(p=0;p<s;++p){l=a[p];if(!o(l)||this.allowNullSelect){u=l.getShapes(i||r(this.activeComponent));c=u.length;for(h=0;h<c;++h){d=u[h];if("cx"in d){if(d["c"+n]>=g&&d["c"+n]<=m){v.push(l);break}}else{f=d.getBoundingRect();if(f[n]>=g&&f[n]<=m){v.push(l);break}if(f[b]()>=g&&f[b]()<=m){v.push(l);break}if(g>=f[n]&&m<=f[b]()){v.push(l);break}}}}}return v},shapesFromRange:function e(t,n,i,r){var a=Math.min(t,n),s=Math.max(t,n),l=this.cache.data,c=this.cache.data.length,u=this.activeComponent&&"function"===typeof this.activeComponent.getType?this.activeComponent.getType().indices:null,d,f,p,h,v,g=[],m;i=false!==i;r=false!==r;m=i&&r?function e(t){return t>=a&&t<=s}:i?function e(t){return t>=a&&t<s}:r?function e(t){return t>a&&t<=s}:function e(t){return t>a&&t<s};for(h=0;h<c;++h){d=l[h];if(!o(d)||this.allowNullSelect){f=d.values instanceof Array?d.values:d.value instanceof Array?d.value:[d.value];u&&u.length&&(f=f.filter(function(e,t){return u.indexOf(t)>=0}));for(v=0;v<f.length;v++){p=f[v];if(m(p)){g.push(d);break}}}}return g},shapesFromDimensionValue:function e(t){var n=this.cache.data,i=this.cache.data.length,r,a,s,l=[];for(a=0;a<i;++a){r=n[a];if(!o(r)||this.allowNullSelect)for(s=0;s<t.length;s++)if(r.id===t[s]){l.push(r);break}}return l},groupedItemsFromShapes:function e(t){var r,o,s,l,c=[];r=void 0!==this.activeComponent.getSelectionIndices?this.activeComponent.getSelectionIndices():[0];o=r[r.length-1];if(t&&t[0]&&t[0].col===o)return a(t,this.cache.data);t.forEach(function(e){l=e.parent;if(void 0!==l){s=i.getLevel.call(l)-(e.isCacheItem?0:1);s===o&&-1===c.indexOf(l)&&t&&c.push(l)}});if(c.length>0){t=[];c.forEach(function(e){t=t.concat(n.getCacheItems.call(e))})}return t},shapesFromIndex:function e(t,n){var i=Math.min(t,n),r=Math.max(t,n),o,a=this.cache.data,s=this.cache.data.length,l,c=[];for(l=0;l<s;++l){o=a[l];void 0!==o.index&&o.index>=i&&o.index<=r&&c.push(o)}return c},_isNull:o,release:function e(){this.cache=null;this.allowNullSelect=null;this.activeComponent=null}});return s}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(t,n){t.forEach(function(t){if(t.isCacheItem)n.push(t);else if(t.data.cacheItem)n.push(t.data.cacheItem);else if(t.cacheItem){n.push(t.cacheItem);if(t.cacheItem.isCacheItem)throw new Error("Using new cache item before its time")}t.children&&t.children.length>0&&e.apply(this,[t.children,n])});return n}var t={getCacheItems:function t(){if(!this.children||!this.children)return[];return e.apply(this,[this.children,[]])}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(654)],r=function(){var e;e={transclude:true,template:'<div qva-chart-tooltip position="position" content="content" direction="direction" visible="visible" template="template" number-in-excess="numberInExcess" target="target" hide-callback="hideCallback" always-on-top="alwaysOnTop" options="options"></div>',controller:["$scope",function(e){e.visible=false;this.hide=function(){e.visible=false};this.show=function(t){e.content=t.content;e.position=t.position;e.direction=t.direction;e.template=t.template;e.numberInExcess=t.numberInExcess;e.alwaysOnTop=t.alwaysOnTop;e.visible=true;e.hideCallback=t.hideCallback;e.target=t.target;e.options={direction:t.dir}}}]};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(96),n(48),n(655),n(300),n(97),n(656)],r=function(e,t,n,i,r,o,a){var s=5;var l=5;var c=25;n.directive("qvaChartTooltip",function(){return{template:a,replace:true,scope:{content:"=",position:"=",visible:"=",direction:"=",template:"=",numberInExcess:"=",target:"=",hideCallback:"=",alwaysOnTop:"=",options:"="},link:function a(u,d){var f,p,h=false;f=function e(t){var n=t?"block":"none";d.css("display",n)};u.synchronAlign=function(){var t=d.find(".qv-tooltip"),n=d.find(".chart-tooltip-arrow"),o;f(u.visible);var a=u.direction instanceof Array?u.direction:[u.direction];o=r.alignToBestCoordinate(t,u.position,a,u.target,false,s,l);var p=t.offset(),v=r.getScrolledRect(e(window));switch(o.position){case"right":p.left+=9;o.y=v.y+Math.min(v.height-c,Math.max(c,o.y-v.y));break;case"left":p.left-=9;o.y=v.y+Math.min(v.height-c,Math.max(c,o.y-v.y));break;case"bottom":p.top+=9;o.x=v.x+Math.min(v.width-c,Math.max(c,o.x-v.x));break;default:p.top-=9;o.x=v.x+Math.min(v.width+v.x-c,Math.max(c,o.x-v.x));break}t.offset(p);if(n.length){n.removeClass().addClass("chart-tooltip-arrow").addClass(o.position);i.alignToCoordinate(t,o.x,o.y,o.position,n)}h=false};u.align=function(){p=n.getService("$timeout")(u.synchronAlign)};u.$watch("position",function(e){if(e&&(e instanceof Array||e.x&&e.y)){h=true;u.align()}});u.$watch("visible",function(e){h||f(e)});u.$watch("content",function(e){e||(u.visible=false)});u.hideTooltip=function(e){u.visible=false;u.hideCallback&&u.hideCallback();if(e&&e.stopPropagation){e.stopPropagation();e.preventDefault();t.preventGestures()}};u.$on("$destroy",function(){n.getService("$timeout").cancel(p);o.off("end",u.hideTooltip)});o.on("end",u.hideTooltip)}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e=Math.floor;function t(e){var t={left:"right",right:"left",top:"bottom",bottom:"top"};return t[e]}function n(e,n,i,r){var o=t(i),a={left:{width:0,height:.5},right:{width:1,height:.5},top:{width:.5,height:0},bottom:{width:.5,height:1}},s=a[o],l=0,c=0,u=0,d=0,f=n[0].getBoundingClientRect(),p=r.outerWidth();if("left"===o||"right"===o){u=parseInt(n.offset().top+f.height*(1-s.height)-e.offset().top-p*(1-s.height),10);"left"===o?c="auto":l="auto";d="auto"}else{l=parseInt(n.offset().left+f.width*(1-s.width)-e.offset().left-p*(1-s.width),10);"bottom"===o?u="auto":d="auto";c="auto"}r.css({left:l,right:c,top:u,bottom:d})}function i(n,i,r,o,a){var s=t(o),l={left:{width:0,height:.5,size:-1},right:{width:1,height:.5,size:1},top:{width:.5,height:0,size:-1},bottom:{width:.5,height:1,size:1}},c=l[s],u,d,f=n[0].getBoundingClientRect(),p=a[0].getBoundingClientRect();if("left"===s||"right"===s){u=c.width*(f.width-p.width)+p.width*c.size-parseInt(n.css("padding-left"));d=r-n.offset().top-p.width*(1-c.height)}else{u=i-n.offset().left-p.width*(1-c.width);d=c.height*(f.height-p.height)+p.height*c.size}a.css({left:e(u),top:e(d)})}function r(e,n,i){var r=t(n),o={left:{width:0,height:.5},right:{width:1,height:.5},top:{width:.5,height:0},bottom:{width:.5,height:1}},a=o[r],s,l,c=e.outerWidth(),u=e.outerHeight(),d=i.outerWidth(),f=i.outerHeight();if("left"===r||"right"===r){s=a.width*(c-d);l=i.offset().top-f*(1-a.height)}else{s=c*(1-a.width)-d*(1-a.width);l=a.height*(u-f)+f}i.css({left:s,top:l})}return{align:n,alignToParent:r,alignToCoordinate:i}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div>\n\t<div ng-if="template" ng-include src="template"></div>\n\n\t<div ng-if="!template" qva-direction x-dir-setting="{{options.direction}}" class="qv-tooltip qvt-chart-tooltip" qva-press="hideTooltip($event)" tid="qv-chart-tooltip" ng-class="{\'above\':alwaysOnTop}">\n\t\t<div class="chart-tooltip-arrow"></div>\n\t\t<div class="qv-chart-tooltip-inner">\n\t\t\t<div ng-repeat="item in content" class="qv-chart-tooltip-item">\n\t\t\t\t<div class="qv-chart-tooltip-content">\n\t\t\t\t\t<div qva-direction x-dir-text="{{item.header}}" x-dir-setting="{{options.direction}}" class=\'qv-tp-header\' ng-if="item.header !== undefined">\n\t\t\t\t\t\t<strong>{{item.header}}</strong>\n\t\t\t\t\t</div>\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<tr ng-repeat="row in item.rows" class="qv-tp-row">\n\t\t\t\t\t\t\t<td class=\'qv-tp-item\' ng-if="row.hasOwnProperty(\'label\')">\n\t\t\t\t\t\t\t\t<span qva-direction x-dir-text="{{row.label}}" class="qv-tp-rowPart" ng-class="{\'qv-tp-single\' : (content.length + item.rows.length) <= 3}">{{row.label}}</span>\n\t\t\t\t\t\t\t\t<span>:&nbsp;</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td ng-if="!row.template" class=\'qv-tp-value\'>\n\t\t\t\t\t\t\t\t<div class="qv-tp-rowPart" dir="ltr">{{row.value}}</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td ng-if="row.template" class=\'qv-tp-template qv-tp-value\' ng-bind-html="row.template" ng-attr-colspan="{{row.hasOwnProperty(\'label\') && 1 || 2 }}">\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="qv-chart-tooltip-excess" ng-if="numberInExcess > 0" q-translation="Object.ChartTooltip.NMore,{{numberInExcess}}">More</div>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(342),n(454)],r=function(e,t){function n(){this.data=[]}Object.defineProperties(n.prototype,{has:{value:function e(t){return-1!==this.data.indexOf(t)}},add:{value:function n(i){if(!(i instanceof e)&&!(i instanceof t))throw new Error("Invalid cache item!");this.has(i)||this.data.push(i)}},remove:{value:function e(t){var n=this.data.indexOf(t);-1!==n&&this.data.splice(n,1)}},clear:{value:function e(){this.data.length=0}}});return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(659)],r=function(e,t){e.service("qvDefaultViewSelectionService",[function(){return{createSelections:function e(n,i,r,o){var a,s;if(!r||!r.dataArea)return;r.range&&(r.range.rtl="rtl"===n.options.direction);r.isPopover=n.options.isPopover;r.selectionsDisabled=n.options.selectionsDisabled||false;a=new t(i,r,o);a.Activated.bind(function(){n.selectionsApi.activated()});a.Deactivated.bind(function(){n.selectionsApi.deactivateSearch&&n.selectionsApi.deactivateSearch()});a.Cancel.bind(function(){n.selectionsApi.cancel()});a.Select.bind(function(){n.selectionsApi.selectionsMade=true});a.SelectRange.bind(function(){n.selectionsApi.selectionsMade=true});a.SelectAttributeDim.bind(function(){n.selectionsApi.selectionsMade=true});a.Confirm.bind(function(){n.backendApi.endSelections(true);n.selectionsApi.deactivated()});a.ResetSelections.bind(function(){n.backendApi.clearSelections()});n.selectionsApi.confirm=function(){a&&a.confirm()};s=n.selectionsApi.deactivated.bind(n.selectionsApi);n.selectionsApi.deactivated=function(){a&&a.deactivate();s()};n.selectionsApi.deactivate=function(){if(a){a.deactivate();this.deactivated()}};n.selectionsApi.clear=function(){a.clearSelection();n.backendApi.clearSelections();n.tooltipApi.cancel();n.selectionsApi.selectionsMade=false};n.selectionsApi.toggleKeyboardAccelerators=function(e){a.toggleKeyboardAccelerators(e)};n.selectionsApi.getKeyAsToggleSelected=function(e){return a.getKeyAsToggleSelected(e)};n.selectionsApi.toggleSearch=function(){n.options.search.toggle()};n.selectionsApi.activate=function(){a.autoActivate()};n.selectionsApi.on=function(){a.on()};n.selectionsApi.off=function(){a.off()};n.$on("$destroy",function(){if(a){a.release();a=null}});return a}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(92),n(102),n(660),n(662),n(667),n(104),n(256),n(232),n(101)],r=function(e,t,n,i,r,o,a,s,l,c){var u,d,f={dataArea:i,range:r,colorLegend:o};function p(t){Object.keys(t).forEach(function(n){n in f&&(this.types[n]=new f[n](this,e.extend(true,{},f[n].defaultOptions,t[n])))},this)}function h(e,t){var n;for(n=0;n<t.length;n++)if(e.contains(t[n]))return true;for(n=0;n<e.length;n++)if(t.contains(e[n]))return true;return false}function v(e){var t=c.getValue(e,"activeComponent.backendApi",{});var n=t.getDimensionInfos&&t.getDimensionInfos()||[];var i=n.length-1;var r=c.getValue(n,i+".qIsOneAndOnlyOne",false);i>0&&r&&c.getValue(n,i+".qCardinalities.qHypercubeCardinal")>1&&(r=false);return r}u=t.extend({init:function t(i,r,o){n.mixin(this);this.notification("Activated");this.notification("Deactivated");this.notification("ToggleShape");this.notification("ToggleShapes");this.notification("SelectWhileLocked");this.notification("SelectWhileSingleSelect");this.notification("Lasso");this.notification("Confirm");this.notification("Cancel");this.notification("Select");this.notification("SelectRange");this.notification("SelectAttributeDim");this.notification("Clear");this.notification("ResetSelections");this.notification("UpdateRanges");this._active=false;this._autoActivated=false;this._isListening=false;this._isScrolling=false;this._isLocked=false;this._shiftPressed=false;this._lassoEnabled=false;this._allowLasso=true;this._enabled=true;this.container=i;this.options=e.extend(true,{},{toggle:true,toggleRect:true,swipe:true,ctrlKeyAsToggleSelected:false},r);this.cache=o;this.containerRect=new a(0,0,0,0);this.types={};this._keyboard=true;p.call(this,this.options)},setContainer:function e(t){this.off();this.container=t;this.on()},refreshContainerRect:function e(){this.offset=this.container.offset();var t=this.offset;var n=this.container.width();var i=this.container.height();this.containerRect.set(t.left,t.top,n,i)},canTypeBeActivated:function e(t){return!(t&&t.activeComponent&&"function"===typeof t.activeComponent.isSelectionLocked?t.activeComponent.isSelectionLocked():this._isLocked)},on:function e(){if(this._isListening)return;this._isListening=true;var t=this,n=this.options,o;this._reset=function(){o=null};this.getActiveType=function(){return t._activeType};this.getActiveMode=function(){return t._activeType?t._activeType.getActiveMode():null};function a(){if(t._activeType&&t._activeType!==o){var e=t._activeType.getActiveDimensions();if(t._activeType.getActiveMode()!==o.getActiveMode()||!h(e,o.getActiveDimensions())){t._activeType.clearSelection();t.ResetSelections.emit()}t._activeType.cancel()}t._activeType=o}function c(){a();n._disableSelectionActivation||t.activate()}function u(){return t._active}function f(){return o&&n.swipe}this._setTypeOnAutoActivate=function(){o=t.types.dataArea};this._activateType=function(e){o=e;a()};this._mouseUp=function(e){1===e.which&&(!t._shiftPressed&&t._drawingWithShift||t._shiftPressed&&t._drawingWithoutShift)&&t.Lasso.emit(!t.lassoEnabled)};this._shiftToggle=function(e){t._shiftPressed=e;if(!t._allowLasso||!t._keyboard||t._drawingWithShift||t._drawingWithoutShift)return;t._active&&t.Lasso.emit(!t.lassoEnabled)};this._keyPressed=function(e){if(!t._keyboard)return;if(!u())return;27===e?t.cancel():13===e&&(o&&o.getIsEditing&&o.getIsEditing()?o.confirmEdit():t.confirm())};l.ShiftToggle.bind(this._shiftToggle);l.KeyPressed.bind(this._keyPressed);l.MouseUp.bind(this._mouseUp);this.types.range&&this.types.range.on&&this.types.range.on();var p=false,g;function m(e,n){d=n;o=e;t.refreshContainerRect();o&&o.initComponent(n)}this._eventHandlers=s.extend({preventDefault:false,tap:{start:function e(t,n,i){m(i,n.pagePoints[0]);document.activeElement&&document.activeElement.blur()},end:function e(i,r){if(!o||o.internal||!n.toggle)return;if(!t.canTypeBeActivated(o)){t.SelectWhileLocked.emit();return}c();l.preventGestures(this);o.toggle.call(o,i,r.pagePoints[0]);o.getSelectedShapes().length>0&&t.Select.emit(o.getSelectedShapes(),t.getKeyAsToggleSelected(i))}},taptwo:{start:function e(){},end:function e(i,r,a){if(!n.toggleRect)return;m(a,r.pagePoints[0]);if(!o||!n.toggle)return;if(!t.canTypeBeActivated(o)){t.SelectWhileLocked.emit();return}c();o.toggleRect.call(o,i,r.pagePoints[0],r.pagePoints[1])}},exclusive:function e(){return t.lassoEnabled},active:function e(){return t._enabled||t._drawingWithShift||t._drawingWithoutShift}});this._swipeHandlers=s.extend({preventDefault:true,swipe:{start:function e(r){if(!f()&&!n._enablePanning)return;t._shiftPressed&&!t._active&&t.allowLasso&&t.Lasso.emit(!t.lassoEnabled);if(!o||o.internal)return;t._drawingWithShift=t._shiftPressed;t._drawingWithoutShift=!t._shiftPressed;if(!t.lassoEnabled&&o.activeComponent&&o instanceof i){this._isPanning=true;return}if(o.activeComponent){this._isPanning=false;p=true;g=this.options.useMomentum;this.options.useMomentum=false;if(!t.canTypeBeActivated(o)){t.SelectWhileLocked.emit();return}if(v(o)){t.SelectWhileSingleSelect.emit();return}c();o.start.call(o,r,d)}},update:function e(i,r){if(!f()&&!n._enablePanning)return;if(!this._isPanning&&p&&o){if(!t.canTypeBeActivated(o)){t.SelectWhileLocked.emit();return}if(v(o)){t.SelectWhileSingleSelect.emit();return}o.update.call(o,i,r.pagePoints[0])}},end:function e(i,r){if(!f()&&!n._enablePanning)return;t._drawingWithShift=false;t._drawingWithoutShift=false;if(this._isPanning)this._isPanning=false;else if(p&&o){p=false;this.options.useMomentum=g;if(!t.canTypeBeActivated(o)){t.SelectWhileLocked.emit();return}if(v(o)){t.SelectWhileSingleSelect.emit();return}o.end.call(o,i,r)}},cancel:function e(){t._drawingWithShift=false;t._drawingWithoutShift=false;if(!o||!p)return;this.options.useMomentum=g;o.cancel.call(o,true)}},exclusive:function e(){return t.lassoEnabled},active:function e(n){return t._enabled&&(t.lassoEnabled||t._drawingWithShift||t._drawingWithoutShift||n instanceof r)}});function b(e,n){l.addInteraction(t._eventHandlers,e.container,1,["tap","taptwo"],n)}function y(e,n){l.addInteraction(t._swipeHandlers,e.container,1,["swipe"],n)}function x(e){l.removeInteraction(t._swipeHandlers,e.container)}this.registerAddedComponent=function(e,t){if(!e.internal&&!(e instanceof r&&"dataArea"===t.selectionIdentifier)){b(t,e);e instanceof r&&y(t,e)}};this.deregisterAddedComponent=function(e,n){if(!e.internal&&!(e instanceof r&&"dataArea"===n.selectionIdentifier)){l.removeInteraction(t._eventHandlers,n.container);l.removeInteraction(t._swipeHandlers,n.container)}};this.registerLasso=function(){var e=this.types["dataArea"];Object.keys(e.components).map(function(t){return e.components[t]}).forEach(function(t){t.forEach(function(t){y(t,e)})})};this.deregisterLasso=function(){var e=this.types["dataArea"];Object.keys(e.components).map(function(t){return e.components[t]}).forEach(function(e){e.forEach(function(e){x(e)})})};Object.keys(this.types).map(function(e){return this.types[e]},this).forEach(function(e){return Object.keys(e.components).map(function(t){return e.components[t]}).forEach(function(n){n.forEach(function(n){t.registerAddedComponent(e,n)})})})},register:function e(t,n){this.registerAddedComponent&&this.registerAddedComponent(t,n)},deregister:function e(t,n){this.deregisterAddedComponent&&this.deregisterAddedComponent(t,n)},off:function e(){l.ShiftToggle.unbind(this._shiftToggle);l.KeyPressed.unbind(this._keyPressed);l.MouseUp.unbind(this._mouseUp);l.removeInteraction(this._eventHandlers);l.removeInteraction(this._swipeHandlers);this.types.range&&this.types.range.off&&this.types.range.off();this._isListening=false;this.registerAddedComponent=null;this.deregisterAddedComponent=null;this.registerLasso=null;this.deregisterLasso=null},autoActivate:function e(){if(this._autoActivated||!this._isListening)return;this._autoActivated=true;this._setTypeOnAutoActivate();this._activeType=this.types.dataArea;this._activeType.initComponent();this.activate()},activate:function e(t){if(!this._active){this.Activated.emit();this._active=true;this._shiftPressed&&!this.lassoEnabled&&this.Lasso.emit(true)}t&&this._activateType(t)},deactivate:function e(t){if(this._active){this._active=false;this._autoActivated=false;t||this.clearSelection();if(this._activeType){this._activeType.cancel();this._activeType=void 0}this.Deactivated.emit();this._reset()}},confirm:function e(){this._activeType&&this.deactivate(true);this.Confirm.emit()},cancel:function e(){this.deactivate();this.Cancel.emit()},clearSelection:function e(){this._activeType&&this._activeType.clearSelection()},toggleKeyboardAccelerators:function e(t){this._keyboard=t},getKeyAsToggleSelected:function e(t){return!(t.metaKey||t.ctrlKey)},release:function e(){this.off();n.release(this);Object.keys(this.types).forEach(function(e){this.types[e].release()},this)},setLocked:function e(t){this._isLocked=t}});Object.defineProperties(u.prototype,{allowLasso:{set:function e(t){this._allowLasso=t},get:function e(){return this._allowLasso}},lassoEnabled:{set:function e(t){this._lassoEnabled=t&&this.allowLasso;this._lassoEnabled&&this.registerLasso&&this.registerLasso();!this._lassoEnabled&&this.deregisterLasso&&this.deregisterLasso()},get:function e(){return this._lassoEnabled}},enabled:{set:function e(t){this._enabled=t},get:function e(){return this._enabled}}});return u}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(146),n(401),n(104),n(226),n(266),n(661),n(101)],r=function(e,t,n,i,r,o,a,s){var l,c=e("<div />"),u=c[0],d=e("<canvas />"),f=d[0],p=e("<canvas />"),h=p[0],v=e("<canvas />"),g=v[0],m=f.getContext("2d"),b=h.getContext("2d"),y=g.getContext("2d"),x,S=[],w=false,q=false;u.appendChild(f);u.appendChild(h);u.appendChild(g);u.className="selections-data-area-ui";c.hide();function C(){m.beginPath();m.moveTo(x.x,x.y);m.fillStyle="rgba(0, 152, 69, 1)";m.arc(x.x,x.y,10,0,2*Math.PI,true);m.fill()}function _(e,t,n){var i,r;!n||"x"!==n&&"y"!==n||(t[n]=x[n]);i=(e.x+t.x)/2;r=(e.y+t.y)/2;m.beginPath();m.moveTo(e.x,e.y);m.quadraticCurveTo(i,r,t.x,t.y);m.stroke()}function I(e,t,n,i){i=i||[2,4];var r=i.length,o=n.x-t.x,a=n.y-t.y,s=Math.sqrt(o*o+a*a),l=s,c=0,u=true,d,f=t.x,p=t.y;o/=s;a/=s;e.moveTo(f,p);for(c=0;l>=.1&&c<5e3;++c){d=i[c%r];0===d&&(d=.001);d>l&&(d=l);f+=d*o;p+=d*a;e[u?"lineTo":"moveTo"](f,p);l-=d;u=!u}}function E(e,t){b.clearRect(0,0,h.width,h.height);b.beginPath();I(b,e,t);b.stroke()}function D(){c.hide();d.hide();p.hide();c.detach()}function A(e){var t=s.getValue(this,"components.dataArea.0._data.qHyperCube.qDimensionInfo",[]);return s.getValue(t,e+".qIsOneAndOnlyOne",false)}function T(e){if(!e.length)return 0;var t=s.getValue(this,"components.dataArea.0._data.qHyperCube.qDimensionInfo",[]);if(1===t.length)return 0;var n;if(1===e.length){var i=e[0].parent&&e[0].parent.children.length;n=1===i||false}else 2===t.length&&(n=t[1].qIsOneAndOnlyOne&&t[1].qCardinalities.qHypercubeCardinal>1||false);var r=n?0:1;return r}l=o.extend("DataAreaSelection",{init:function e(t,n){this._super(t,n);this.setActiveMode("item");this._startIndex=-1;this._endIndex=-1},initComponent:function e(){this.setActiveComponent(this.components.dataArea[0])},refreshCanvas:function e(){this.rect=this.components.dataArea[0].rect;var t={position:"absolute",left:this.rect.x+"px",top:this.rect.y+"px",width:this.rect.width+"px",height:this.rect.height+"px","z-index":20};m.canvas.width=this.rect.width;m.canvas.height=this.rect.height;m.lineWidth=2;m.lineCap="round";m.lineJoin="round";m.strokeStyle="rgba(102,102,102,1)";m.fillStyle="rgba(102,102,102,1)";d.css(t);b.canvas.width=this.rect.width;b.canvas.height=this.rect.height;b.lineWidth=2;b.lineCap="round";b.lineJoin="round";b.strokeStyle="rgba(102,102,102,1)";p.css(t);y.canvas.width=this.rect.width;y.canvas.height=this.rect.height;v.css(t)},toggle:function e(t,n,r){r=void 0!==r?r:this.handler.getKeyAsToggleSelected(t);var o=this.getTransformedPoint(n.x,n.y),a,s=this.options.toggle.callback||this.toggleSelection,l=this.options.indexSelection,c=this.ToggleFlag.auto|this.ToggleFlag.tooltip;a=l?this.shapesFromRectForDirection(new i(o.x,o.y,0,0),"y"):this.shapesFromPoints([o]);a=this.groupedItemsFromShapes(a);var u=A.call(this,T.call(this,a));u?this.cancel(true):r||this.clearSelection();this.resetSelectedShapes();this.setActiveComponent(this.components.dataArea[0]);a.forEach(function(e){e.selectionMode="dataArea";e.interactPosition=n});s.call(this,a,c);return a&&a.length>0},toggleRect:function t(n,r,o){if(!r||!o)return;var s,l,c,u,d,f,p,h,v,g=e(this.components.dataArea[0].container),m=g.offset(),b=function e(t){return{x:Math.min(Math.max(t.x,m.left),m.left+g.width()),y:Math.min(Math.max(t.y,m.top),m.top+g.height())}},y,x;r=b(r);o=b(o);y=r;x=o;this.resetSelectedShapes();r=this.getTransformedPoint(r.x,r.y);o=this.getTransformedPoint(o.x,o.y);s=Math.min(r.x,o.x);l=Math.min(r.y,o.y);c=Math.max(1,Math.abs(o.x-r.x));u=Math.max(1,Math.abs(o.y-r.y));d=new i(s,l,c,u);p=this.ToggleFlag.select;h=this.options.indexSelection;v=this.toggleSelection;this.setActiveComponent(this.components.dataArea[0]);f=h?this.shapesFromRectForDirection(d,"y"):this.shapesFromRect(d);f=this.groupedItemsFromShapes(f);f.forEach(function(e){e.selectionMode="dataArea"});v.call(this,f,p);this.getSelectedShapes().length>0&&this.handler.Select.emit(this.getSelectedShapes(),true);a.flash(y,x)},start:function e(n,r){this.handler.getKeyAsToggleSelected(n)||this.clearSelection();this.resetSelectedShapes();this.setActiveComponent(this.components.dataArea[0]);var o=this.getTransformedPoint(r.x,r.y),a=this.options.captureInput,s=this.options.indexSelection;if(a){d.show();p.show();c.appendTo(this.handler.container);c.show();this.refreshCanvas()}S.length=0;S.push(o);x=new t(S[0].x,S[0].y);w=false;q=false;if(s){var l=this.shapesFromRectForDirection(new i(x.x,x.y,1,1),"y"),u=l.length&&l[0].index;void 0!==u&&u>=0&&(this._startIndex=u)}a&&C()},update:function e(t,n){var o=this.getTransformedPoint(n.x,n.y),a=this.options,s=a.captureInput,l=a.lassoAutoCloseDistance,c=a.indexSelection,u=t.shiftKey&&a.shiftLockCapture?a.shiftLockAxis:"",d,f=this.ToggleFlag.select,p,v,g,m=-1,y=this.toggleSelection;d=S[S.length-1];S.push(o);s&&_(d,o,u);if(s){w||(w=S.length>2&&x.distanceTo(o)>=l);b.clearRect(0,0,h.width,h.height);if(w)if(x.distanceTo(o)<=l){E(o,x);q=true}else q=false}if(c){g=this.shapesFromRectForDirection(new i(o.x,o.y,1,1),"y");m=g.length?g[0].index:-1;void 0!==m&&m>=0&&(this._endIndex=m);p=this.shapesFromIndex(this._startIndex,this._endIndex);v=this.getSelectedShapes().filter(function(e){return-1===p.indexOf(e)});y.call(this,v,this.ToggleFlag.deselect);y.call(this,p,f)}else{p=this.shapesFromLines([new r(d.x,d.y,o.x,o.y)]);p=this.groupedItemsFromShapes(p);p.forEach(function(e){e.selectionMode="dataArea"});y.call(this,p,f)}},end:function e(t){var i=this.options.captureInput,r=this.options.indexSelection,o,a,s=this.ToggleFlag.select,l=this.toggleSelection;if(r){this._startIndex=-1;this._endIndex=-1}i&&D();if(i&&q){a=new n(S);o=this.shapesFromPolygon(a);o=this.groupedItemsFromShapes(o);o.forEach(function(e){e.selectionMode="dataArea"});l.call(this,o,s)}S.length=0;var c=this.getSelectedShapes();if(c.length>0){var u=A.call(this,T.call(this,c));u&&c.length>1?this.cancel():this.handler.Select.emit(c,this.handler.getKeyAsToggleSelected(t))}},cancel:function e(t){S.length&&D();t&&this.clearSelection();this.setActiveComponent(null)}});l.defaultOptions={captureInput:true,indexSelection:false,shiftLockCapture:false,shiftLockAxis:"x",lassoAutoCloseDistance:50,autoConfirm:false,toggle:{callback:null},interpolation:{pixelPrecision:2}};return l}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(51)],r=function(e,t){var n={template:'<div class ="qv-framer" ng-style="style"></div>',controller:["$scope",function(e){e.style={};e.style.top=e.top;e.style.left=e.left;e.style.height=e.height;e.style.width=e.width;e.closeComponent()}],scope:{top:"=",left:"=",height:"=",width:"=",closeComponent:"="}},i={flash:function i(r,o){var a=e.getService("$timeout"),s=t.show(n,{top:Math.min(r.y,o.y)+"px",left:Math.min(r.x,o.x)+"px",height:Math.max(r.y,o.y)-Math.min(r.y,o.y)+"px",width:Math.max(r.x,o.x)-Math.min(r.x,o.x)+"px",closeComponent:function e(){a(function(){s.destroy();s=null},300)}})}};return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(266),n(146),n(104),n(101),n(663)],r=function(e,t,n,i,r,o){var a,s=false,l=Math.min,c=Math.max,u=e("<div />"),d=u[0],f=e('<div qva-range-selection visible="rangeSelectIsVisible" active-component="activeComponent" v-component="vComponent" h-component="hComponent" v-ranges="vRanges" h-ranges="hRanges" h-options="hOptions" v-options="vOptions"/>'),p={x:[],y:[]},h,v,g=15;function m(e){if(e.isCacheItem){var t=e.getDimensions();return t[t.length-1]}return e.parent&&e.parent.data&&e.parent.data.qText?e.parent.data.qText:e.label}function b(e,t){var n=e.indicators||e.getLevels()[0];var i=e.getPlotMax();var r=e.getPlotMin();var o=Number.MAX_VALUE;var a=-1;var s;for(s=0;s<n.values.length;s++){var l=n.values[s];var c=Math.abs(t-l);if(l<r||l>i)continue;if(!(c<o))break;o=c;a=s}if(-1!==s){var u=a;return{value:n.values[a],label:(n.qualifiedLabels||n.labels)[u]}}return null}function y(e,t,n){var i=e.getLevels();var r;for(r=i.length-1;r>=0;--r){var o=i[r];var a=null;var s=null;for(var l=0;l<o.values.length;++l){o.values[l]===t&&(a=(o.qualifiedLabels||o.labels)[l]);o.values[l]===n&&(s=(o.qualifiedLabels||o.labels)[l])}if(a&&s)return{l1:a,l2:s}}return{l1:null,l2:null}}function x(e,t){var n=e.isDiscrete&&e.isDiscrete();var i=e.isDimension&&!n;if(!i)return null;var r=e.getValueOfPosition(t);var o=b(e,r);if(!o)return null;o.newPoint=e.getPositionOfValue(o.value);var a=Math.abs(o.newPoint-t);if(a>g)return null;return o}function S(e,t){var n=this.getComponentKey(this.activeComponent);var i="x"===n?"width":"height";var r=e.rect[n];var o=e.rect[n]+e.rect[i];var a=this.activeComponent.rect;var s=this.getRect(this.activeComponent);var l=s[n]-a[n];var c=l+s[i];if(r===o&&0===r){o=t[n];r=t[n]}var u=null;var d=null;if(p[n].length>1)for(var f=0;f<p[n].length;++f){var h=p[n][f];if(e===h)continue;var v=h.rect[n];var g=h.rect[n]+h.rect[i];g<=r&&(null===u||g>u)&&(u=g);v>=o&&(null===d||v<d)&&(d=v)}l<=r&&(null===u||l>u)&&(u=l);c>=o&&(null===d||c<d)&&(d=c);return{min:u,max:d}}function w(e,t,n,i,r){var o=this.activeComponent,a=this.components.dataArea[0].rect,s=function e(t,i,a){if(r){if(r.switch){var s=n.startVal;n.startVal=n.updateVal;n.updateVal=s}var l=Math.max(Math.min(r.value,o.getPlotMax()),o.getPlotMin());0===r.index&&"horizontal"===a||1===r.index&&"vertical"===a?n.startVal=l:n.updateVal=l}else{n.startVal=o.getValueOfPosition(t);n.updateVal=o.getValueOfPosition(i);n.maxIncluded=!o.isDimension||o.getDataMax()<=n.updateVal}},u=0,d=0,f=0,p=0,h,v,g,b,y,w=o.isDiscrete&&o.isDiscrete(),q=S.call(this,n,e);switch(o.dock){case"top":case"bottom":u=l(e.x,t.x);f=c(e.x,t.x);d=0;p=a.height;if(null!==q.min&&q.min>u){i&&(f+=q.min-u);u=q.min}else{h=x(o,u);if(h){n.startLabel=h.label;u=null===q.min?h.newPoint:Math.max(q.min,h.newPoint)}else n.startLabel=k(o.getValueOfPosition(u),o)}if(null!==q.max&&q.max<f){i&&(u+=q.max-f);f=q.max}else{v=x(o,f);if(v){n.updateLabel=v.label;f=null===q.max?v.newPoint:Math.min(q.max,v.newPoint)}else n.updateLabel=k(o.getValueOfPosition(f),o)}n.rect.set(u,d,f-u,p-d);if(w){g=this.shapesFromRectForDirection(n.rect,"x","dataArea");if(g.length){b=this.options&&this.options.rtl?g[g.length-1]:g[0];y=this.options&&this.options.rtl?g[0]:g[g.length-1];n.startVal=m(b);n.updateVal=m(y)}else{n.startVal="-";n.updateVal="-"}n.maxIncluded=true}else s.call(this,u,f,"horizontal");break;case"left":case"right":d=l(e.y,t.y);p=c(e.y,t.y);u=0;f=a.width;if(null!==q.min&&q.min>d){i&&(p+=q.min-d);d=q.min}if(null!==q.max&&q.max<p){i&&(d+=q.max-p);p=q.max}h=x(o,d);if(h){n.startLabel=h.label;d=h.newPoint}else n.startLabel=k(o.getValueOfPosition(d),o);v=x(o,p);if(v){n.updateLabel=v.label;p=v.newPoint}else n.updateLabel=k(o.getValueOfPosition(p),o);n.rect.set(u,d,f-u,p-d);if(w){g=this.shapesFromRectForDirection(n.rect,"y","dataArea");if(g.length){b=g[0];y=g[g.length-1];n.startVal=m(b);n.updateVal=m(y)}else{n.startVal="-";n.updateVal="-"}n.maxIncluded=true}else s.call(this,d,p,"vertical");break}}function q(){return this.components.x&&this.components.y&&1===this.components.x.length&&1===this.components.y.length&&!this.components.x[0].isDiscrete()&&!this.components.y[0].isDiscrete()}function C(){h.y=false;h.x=false;if(this._rangeEventWatchers){this._rangeEventWatchers.forEach(function(e){e()});this._rangeEventWatchers=null}u.hide();u.detach();h.rangeSelectIsVisible=false;p={x:[],y:[]}}function _(e,t,n){var i={rect:new r(0,0,0,0),startVal:0,updateVal:0,component:t};n?p[e].push(i):p[e][0]=i;return i}function I(e,t,n){var i=p[e],o="x"===e&&n.yMirrorMode;var a=o?t.end:t.start;var s=o?t.start:t.end;var l=y(n,a,s);var c=l.l1||(o?null:t.label);var u=l.l2||(o?t.label:null);var d=-1;for(var f=0;f<i.length;f++){var h=o?i[f].updateVal<=s&&a<=i[f].startVal:i[f].startVal<=a&&s<=i[f].updateVal;if(h){d=f;break}}if(-1===d)i.push({startVal:a,startLabel:c,updateVal:s,updateLabel:u,component:n,rect:new r(0,0,0,0),maxIncluded:false});else{var v=i[d];i[d]={startVal:v.startVal,startLabel:v.startLabel,updateVal:a,updateLabel:c,component:n,rect:new r(0,0,0,0),maxIncluded:false};i.push({startVal:s,startLabel:u,updateVal:v.updateVal,updateLabel:v.updateLabel,component:n,rect:new r(0,0,0,0),maxIncluded:false})}E(e,n.yMirrorMode)}function E(e,t){var n="x"===e&&t;var i=n?"updateVal":"startVal";var r=n?"startVal":"updateVal";var o=p[e];o.sort(function(e,t){return e[i]<t[i]?-1:e[i]>t[i]?1:0});for(var a=o.length-1;a>=0;--a){if(o[a].startVal===o[a].updateVal){o.splice(a,1);continue}if(a<o.length-1){var s=o[a][r];var l=o[a+1][i];if(s>=l){if(o[a+1][r]>o[a][r]){o[a][r]=o[a+1][r];n?o[a].startLabel=o[a+1].startLabel:o[a].updateLabel=o[a+1].updateLabel}o.splice(a+1,1);a<o.length-1&&++a}}}}function D(e,t,n){e||(e="x");t||(t=0);var i=p[e][t];if(!i){i={rect:new r(0,0,0,0),startVal:0,endVal:0};p[e][t]=i}i.component=n;return i}function A(e,t,n,i){var r=[],o=this._previousShapes?this._previousShapes.slice():[],a,s=this.getActiveMode(),l=p["y"===t?"x":"y"];if("range.discrete"===s){r=this.shapesFromRectForDirection(e.rect,t,"dataArea");r=this.groupedItemsFromShapes(r);r.forEach(function(e){var t=o.indexOf(e);t>=0&&o.splice(t,1);e.selectionMode=s});n.call(this,r,i);this._clearPrev&&n.call(this,o,this.ToggleFlag.deselect);this._shapes=r}else if("range.dimension"===s){if(this.components.dataArea&&this.components.dataArea[0].updateRangeSelection){var c=p[t].map(function(e){return O(e.startVal,e.updateVal,e.maxIncluded)});this.handler.UpdateRanges.emit(c)}}else{if(q.call(this)){a=l.length?e.rect.intersection(l[0].rect):e.rect;this.components.dataArea&&this.components.dataArea[0].updateRangeSelection&&this.components.dataArea[0].getIsReduced()||(r=this.shapesFromRect(a,"dataArea"));this.components.dataArea&&this.components.dataArea[0].updateRangeSelection&&this.components.dataArea[0].updateRangeSelection(a)}else r=this.shapesFromRange(e.startVal,e.updateVal);r.forEach(function(e){e.selectionMode=s});n.call(this,r,i);this._shapes=r}}function T(e,t,n,i){var r=this.getComponentKey(this.activeComponent),o=t,a=this.ToggleFlag.select,s=this.toggleSelection;w.call(this,v,o,e,n,i);var l=this.getActiveMode();"range.measure"===l?this.clearSelection(true):this._shapes&&s.call(this,this._shapes,this.ToggleFlag.deselect);A.call(this,e,r,s,a);this.updateRangeDisplay()}function O(e,t,n){return{min:Math.min(e,t),max:Math.max(e,t),maxIncluded:!!n}}function k(e,t){var n=t.isDiscrete&&t.isDiscrete();return n||!t.isDimension?t.getFormatter().format(e):t.formatValue(e)}function L(e){return o.getValue(e,"qHyperCube.qDimensionInfo.0.qIsOneAndOnlyOne",false)}a=n.extend("RangeSelection",{init:function e(t,n){this._super(t,n);this._shapes=null;this._nrEditing=0;this.setActiveMode("item")},initComponent:function e(t){this.previousComponent=this.activeComponent;this.setActiveComponent(this.getComponent(t.x,t.y));h.activeComponent=this.activeComponent;-1!==this.components.x.indexOf(h.activeComponent)?h.hComponent=h.activeComponent:-1!==this.components.y.indexOf(h.activeComponent)&&(h.vComponent=h.activeComponent)},setDirection:function e(t){this.options.rtl="rtl"===t},refreshContainer:function t(){var n=this.components.dataArea[0].rect,i=e(this.components.dataArea[0].container).position(),o=new r(i.left,i.top,n.width,n.height),a,s=[];["x","y"].forEach(function(e){this.components[e]&&!this.components[e].contains(this.activeComponent)&&(s=s.concat(this.components[e]))}.bind(this));this.activeComponent&&s.push(this.activeComponent);s.forEach(function(t){if(t.isVisible()){a=e(t.container).position();o=o.combineWith(new r(a.left,a.top,t.rect.width,t.rect.height))}},this);this._offset={left:i.left-o.x,top:i.top-o.y};u.css({left:o.x,top:o.y,width:o.width,height:o.height})},resetSelectedShapes:function e(){this._previousSelectedShapes=this._selectedShapes.concat();this._super()},getIsEditing:function e(){return this._editing},confirmEdit:function e(){h.$broadcast("confirmEdit")},getRect:function e(t,n){if(!t)return new r(0,0,0,0);n=n||false;return t.hasOwnProperty("innerRect")&&!n?t.innerRect:t.rect},getExtendedRect:function e(t){if(!t)return new r(0,0,0,0);if(t.hasOwnProperty("extendedRect"))return t.extendedRect;return this.getRect(t)},getTransformedPoint:function e(t,n){var r=this.getRect(this.activeComponent||this.components.dataArea[0],true);return new i(t-r.x-this.handler.containerRect.x,n-r.y-this.handler.containerRect.y)},getComponent:function e(t,n){var r=new i(t-this.handler.containerRect.x,n-this.handler.containerRect.y);return Object.keys(this.components).map(function(e){return this.components[e]},this).reduce(function(e,t){return e.concat(t)}).filter(function(e){return this.getRect(e).pointInside(r.x,r.y)},this)[0]},checkActiveMode:function e(t,n){t.contains(this.handler.getActiveMode())||this.clearSelection(n);this.setActiveMode(t[0])},toggleRect:function e(t,n,i){this.start(t,n);this.update(t,i);this.end(t)},toggle:function e(t,n,i){i=void 0!==i?i:this.handler.getKeyAsToggleSelected(t);var r;i||this.clearSelection();this.resetSelectedShapes();this._editing&&this.confirmEdit();if(this.activeComponent&&"function"===typeof this.activeComponent.isDiscrete&&this.activeComponent.isDiscrete()){this.cancel();r=this.getTransformedPoint(n.x,n.y);var o=this.shapesFromPoints([r]),a=this.options.toggle.callback||this.toggleSelection,s=this.ToggleFlag.auto|this.ToggleFlag.tooltip;s=L(this.activeComponent.backendApi.model.layout)?this.ToggleFlag.replace:s;o=this.groupedItemsFromShapes(o);o.forEach(function(e){e.selectionMode="dataArea"});this.checkActiveMode(["item"]);a.call(this,o,s)}else if(this.activeComponent&&this.activeComponent.isDimension){r=this.getTransformedPoint(n.x,n.y);var l=this.activeComponent.getLabelFromPoint(r);if(l){this.checkActiveMode(["range.dimension"]);this.resetSelectedShapes();var c=this.getComponentKey(this.activeComponent);I(c,l,this.activeComponent);A.call(this,null,c,null,null);this.selectRange();this.refreshContainer();this.initWatchers();this.updateRangeProjection();this.updateRangeDisplay()}}},updateRangeDisplay:function e(){h.hRanges=[];h.vRanges=[];h.vRanges=p.y.map(function(e){var t=new i(e.rect.x,e.rect.y);var n=new i(e.rect.x+e.rect.width,e.rect.y+e.rect.height);var r=e.startLabel||(Number.isNaN(+e.startVal)?e.startVal:k(e.startVal,e.component));var o=e.updateLabel||(Number.isNaN(+e.updateVal)?e.updateVal:k(e.updateVal,e.component));e.maxIncluded||(o="<"+o);return{points:[n,t],values:{start:{text:o,value:e.updateVal},end:{text:r,value:e.startVal}}}});h.hRanges=p.x.map(function(e){var t=new i(e.rect.x,e.rect.y);var n=new i(e.rect.x+e.rect.width,e.rect.y+e.rect.height);var r=e.startLabel||(Number.isNaN(+e.startVal)?e.startVal:k(e.startVal,e.component));var o=e.updateLabel||(Number.isNaN(+e.updateVal)?e.updateVal:k(e.updateVal,e.component));e.maxIncluded||(e.component.yMirrorMode?r="<"+r:o="<"+o);return{points:[t,n],values:{start:{text:r,value:e.startVal},end:{text:o,value:e.updateVal}}}});p.y.length>0&&(h.vOptions={rect:this.getRect(p.y[0].component,true).clone(),offset:this._offset.top,padding:p.y[0].component.getPadding(),dock:p.y[0].component.dock,shouldClip:"range.dimension"===this.getActiveMode()});p.x.length>0&&(h.hOptions={rect:this.getRect(p.x[0].component,true).clone(),offset:this._offset.left,padding:p.x[0].component.getPadding(),dock:p.x[0].component.dock,shouldClip:"range.dimension"===this.getActiveMode()});if(!h.rangeSelectIsVisible){this.handler.container.append(u);u.show();h.rangeSelectIsVisible=true}h.$digest()},initWatchers:function e(){if(!this._rangeEventWatchers){var t=this;this._rangeEventWatchers=[];this._rangeEventWatchers.push(h.$on("rangeStart",function(){t.resetSelectedShapes();t._shapes=t._previousShapes;t._clearPrev=true}));this._rangeEventWatchers.push(h.$on("rangeUpdate",function(e,n,i,r,o,a){v=n[0];t.components[i].indexOf(t.activeComponent)<0&&t.setActiveComponent(t.components[i][0]);var s=p[i][r];T.call(t,s,n[1],o,a);t._clearPrev=false}));this._rangeEventWatchers.push(h.$on("rangeEditChanged",function(e,n){t._nrEditing=n?t._nrEditing+1:t._nrEditing-1;if(t._nrEditing>1){t.confirmEdit();t._nrEditing=1;e.targetScope.onEditBubble()}t._editing=t._nrEditing>0}));this._rangeEventWatchers.push(h.$on("rangeEnd",function(){t.end();t._clearPrev=false}));this._rangeEventWatchers.push(h.$on("rangeToggle",function(e,n,i){t.toggle(n,i)}))}},start:function e(t,n){if(this.handler._disableSelections)return true;this.resetSelectedShapes();this.refreshContainer();this.activeComponent.isDiscrete&&this.activeComponent.isDiscrete()?this.checkActiveMode(["range.discrete","item"]):this.activeComponent.isDimension?this.checkActiveMode(["range.dimension"]):this.checkActiveMode(["range.measure"]);var i=this.getComponentKey(this.activeComponent);if("x"!==i&&"y"!==i)return;this.currentRange=_(i,this.activeComponent,"range.dimension"===this.getActiveMode());this.initWatchers();v=this.getTransformedPoint(n.x,n.y)},update:function e(t,n){if(this.handler._disableSelections)return true;T.call(this,this.currentRange,this.getTransformedPoint(n.x,n.y),false)},updateShapesState:function e(){var t=this.getComponentKey(this.activeComponent),n=D(t,0,this.activeComponent),i=this.getActiveMode(),r=this.ToggleFlag.select,o=[],a=this.toggleSelection;this.clearSelection(true);if(this.activeComponent.isDiscrete&&!this.activeComponent.isDiscrete()){o=this.shapesFromRange(n.startVal,n.updateVal);o.forEach(function(e){e.selectionMode=i});a.call(this,o,r)}this._shapes=o},updateRangeProjection:function e(){var t=this.components.dataArea[0].rect;p.x.forEach(function(e){var n=e.component.getPositionOfValue(e.startVal);var i=e.component.getPositionOfValue(e.updateVal);var r=Math.min(n,i);var o=Math.max(n,i);var a=0;var s=t.height;e.rect.set(r,a,o-r,s-a)});p.y.forEach(function(e){var n=e.component.getPositionOfValue(e.startVal);var i=e.component.getPositionOfValue(e.updateVal);var r=0;var o=t.width;var a=Math.max(n,i);var s=Math.min(n,i);e.rect.set(r,s,o-r,a-s)})},end:function e(){if(this.handler._disableSelections)return true;this.currentRange=null;if("range.dimension"===this.getActiveMode()){var t=this.getComponentKey(this.activeComponent);E(t,this.activeComponent.yMirrorMode);this.updateRangeProjection()}this.updateRangeDisplay();this.selectRange();this._previousShapes=this._shapes;this._shapes=null},cancel:function e(){if(this.handler._disableSelections)return true;this._nrEditing=0;this._editing=false;var t=this.getActiveMode();"range.discrete"===t&&this.setActiveMode("item");this._shapes=null;C.call(this)},clearSelection:function e(t){t=t||false;this._shapes=null;if(t)this._super();else{this._super();C.call(this)}},selectRange:function e(){var t=this.handler.SelectRange,n=[],i=false;if(!this.activeComponent)return;if("range.discrete"===this.getActiveMode()){var r=this._previousSelectedShapes,o=this.getSelectedShapes().concat();r.forEach(function(e){var t=o.indexOf(e);-1===t&&o.push(e)});o.length>0&&this.handler.Select.emit(o);return}p.x.concat(p.y).forEach(function(e){e.component.getType().current.forEach(function(t){n.push({idx:t,type:e.component.getType().type,range:O(e.startVal,e.updateVal,e.maxIncluded)})})});i=!q.call(this);this._editing||t.emit(n,i)},on:function e(){if(!s){var n=t.getService("$compile");var i=t.getService("$rootScope");h=i.$new();d.className="selections-range-ui";u.append(f);u.hide();n(d)(h);s=true;h.rangeSelectIsVisible=false}h.$broadcast("on")},off:function e(){if(!this.activeComponent)return;h.$broadcast("off");this.setActiveComponent(null);C.call(this)}});a.defaultOptions={toggle:{callback:null}};return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(96),n(48),n(146),n(664),n(665)],r=function(e,t,n,i){var r=".rangeselection";function o(e,t,i,r){var o=[];o[t]="y"===i?new n(e[t].x,e[t].y+r):new n(e[t].x+r,e[t].y);o[1^t]=e[1^t];return o}function a(e){e.$emit("rangeStart")}function s(e,t,n,i,r){e.$emit("rangeUpdate",t,n,i,r)}function l(e,t){e.$emit("rangeEnd",t)}function c(e,t,n){return t?e[0][n]>e[1][n]?0:1:e[0][n]<e[1][n]?0:1}function u(t,n,i,u){var d,f,p=i?"x":"y",h;e(n).tap({id:r,options:{preventDefault:true},start:function t(){e.preventGestures(this.gestureHandler)}}).swipe({id:r,options:{radiusThreshold:0},start:function n(){f=c(t.range.points,u,p);d=t.range.points;e.preventGestures(this.gestureHandler);a(t)},update:function e(n,r){t.range.points=o(d,f,p,i?r.swipe.deltaX:r.swipe.deltaY);t.$digest();t.range.far=false;t.range.near=false;h=c(t.range.points,u,p)^!i?"far":"near";t.range[h]=true;s(t,t.range.points,p,t.$index,false)},end:function e(){l(t,t.range.points);t.range.near=false;t.range.far=false}})}function d(t,n){if(t.isOn)return;t.isOn=true;var i="hey";e(t.axisCover).tap({id:r,options:{preventDefault:true},start:function t(){e.preventGestures(this.gestureHandler)},end:function e(t,i){n.$emit("rangeToggle",t,i.pagePoints[0])}}).swipe({id:r,options:{preventDefault:true},start:function t(){i=n.range.points;e.preventGestures(this.gestureHandler);a(n);n.range.cover=true},update:function e(r,o){"y"===t.dir?n.range.points=[{x:i[0].x,y:i[0].y+o.swipe.deltaY},{x:i[1].x,y:i[1].y+o.swipe.deltaY}]:n.range.points=[{x:i[0].x+o.swipe.deltaX,y:i[0].y},{x:i[1].x+o.swipe.deltaX,y:i[1].y}];n.$digest();s(n,n.range.points,t.dir,n.$index,true)},end:function e(){l(n,n.range.points);n.range.cover=false}});if(!e.utils.touch){var o="x"===t.dir;u(n,t.farEdge,o,o);u(n,t.nearEdge,o,!o)}}function f(t){e(t.axisCover).off("*",r);e(t.farEdge).off("*",r);e(t.nearEdge).off("*",r);t.isOn=false}t.directive("qvaRangeSelectionRange",function(){return{scope:false,link:function e(t,n,i){var r={isOn:false,dir:i.qvaRangeSelectionRange,axisCover:n.find(".axis-cover")[0],farEdge:n.find(".far-edge")[0],nearEdge:n.find(".near-edge")[0]};d(r,t);t.$on("on",function(){d(r,t)});t.$on("off",function(){f(r)});t.$on("$destroy",function(){f(r)})}}});t.directive("qvaRangeSelection",function(){return{template:i,replace:true,scope:{vOptions:"=",hOptions:"=",vRanges:"=",hRanges:"=",activeComponent:"=",hComponent:"=",vComponent:"=",visible:"="},link:function e(t){t.vRelevantSize=0;t.hRelevantSize=0;t.activeOptions={y:{far:false,near:false,cover:false},x:{far:false,near:false,cover:false}};t.setRangeStyle=function(e,t,n){if(!t||!n)return;t.forEach(function(t){var n=t.points[0],i=t.points[1];t.style="y"===e?{height:Math.abs(n[e]-i[e]),top:Math.min(n[e],i[e])}:{width:Math.abs(n[e]-i[e]),left:Math.min(n[e],i[e])}})};t.$watchCollection("[vRanges, vOptions]",function(e){t.setRangeStyle("y",e[0],e[1])});t.$watchCollection("[hRanges, hOptions]",function(e){t.setRangeStyle("x",e[0],e[1])});t.$watch("hOptions",function(e){e&&t.setRelevantSize("x",e.rect.height)});t.$watch("vOptions",function(e){e&&t.setRelevantSize("y",e.rect.width)});t.setRelevantSize=function(e,n){if("x"===e){t.hRelevantSize={height:n+"px"};t.hWrappperSize={height:"calc(100% - "+n+"px)"}}else{t.vRelevantSize={width:n+"px"};t.vWrappperSize={width:"calc(100% - "+n+"px)"}}}}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qvt-range-selection">\n\t<div class="range-vertical-clip" ng-style="{ top: vOptions.offset, height: vOptions.rect.height }" ng-class="{ clip: vOptions.shouldClip }">\n\t\t<div class="range-vertical"\n\t\t\t ng-repeat="range in vRanges track by $index"\n\t\t\t qva-range-selection-range="y"\n\t\t\t ng-class="{\'near\': vOptions.dock == \'left\', \'far\' : vOptions.dock == \'right\'}"\n\t\t\t ng-style="range.style">\n\t\t\t<div class="range">\n\t\t\t\t<div class="axis-cover" ng-style="vRelevantSize" tid="range-vertical-cover" ng-class="{\'active\' : range.cover}"></div>\n\t\t\t</div>\n\t\t\t<div class="far-edge" tid="range-vertical-far" ng-class="{\'active\' : range.near}">\n\t\t\t</div>\n\t\t\t<div class="near-edge" tid="range-vertical-near" ng-class="{\'active\' : range.far}">\n\t\t\t</div>\n\t\t\t<div class="outer-bubble-wrapper" ng-style="vWrappperSize">\n\t\t\t\t<qva-range-selection-bubble tid="range-vertical-near-bubble" visible="visible" active-component="vComponent" handle-points="range.points" range-index="$index" horizontal="false" far="false" data="range.values.start" active="range.far"> </qva-range-selection-bubble>\n\t\t\t\t<qva-range-selection-bubble tid="range-vertical-far-bubble" visible="visible" active-component="vComponent" handle-points="range.points" range-index="$index" horizontal="false" far="true" data="range.values.end" active="range.near"> </qva-range-selection-bubble>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="range-horizontal-clip" ng-style="{ left: hOptions.offset, width: hOptions.rect.width }" ng-class="{ clip: hOptions.shouldClip }">\n\t\t<div class="range-horizontal"\n\t\t\t ng-repeat="range in hRanges track by $index"\n\t\t\t qva-range-selection-range="x"\n\t\t\t ng-class="{\'near\': hOptions.dock == \'bottom\', \'far\' : hOptions.dock == \'top\'}"\n\t\t\t ng-style="range.style">\n\t\t\t<div class="range">\n\t\t\t\t<div class="axis-cover" ng-style="hRelevantSize" tid="range-horizontal-cover" ng-class="{\'active\' : range.cover}"></div>\n\t\t\t</div>\n\n\t\t\t<div class="far-edge" tid="range-horizontal-far" ng-class="{\'active\' : range.far}">\n\t\t\t</div>\n\t\t\t<div class="near-edge" tid="range-horizontal-near" ng-class="{\'active\' : range.near}">\n\t\t\t</div>\n\t\t\t<div class="outer-bubble-wrapper" ng-style="hWrappperSize">\n\t\t\t\t<qva-range-selection-bubble tid="range-horizontal-near-bubble" visible="visible" active-component="hComponent" handle-points="range.points" range-index="$index" horizontal="true" far="false" data="range.values.start" active="range.near"> </qva-range-selection-bubble>\n\t\t\t\t<qva-range-selection-bubble tid="range-horizontal-far-bubble" visible="visible" active-component="hComponent" handle-points="range.points" range-index="$index" horizontal="true" far="true" data="range.values.end" active="range.far"> </qva-range-selection-bubble>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(96),n(48),n(666)],r=function(e,t,n,i){var r=".rangeselection";function o(e){e.$emit("rangeStart")}function a(e,t){e.editing=t;e.$emit("rangeEditChanged",t)}function s(e,t,n,i,r){e.$emit("rangeUpdate",t,n,i,false,r)}function l(e,t){e.$emit("rangeEnd",t)}function c(){e(this).css("width",6*e(this).val().length+50+"px")}n.directive("qvaRangeSelectionBubble",["$timeout",function(e){return{template:i,replace:true,restrict:"E",scope:{data:"=",active:"=",far:"=",horizontal:"=",activeComponent:"=",handlePoints:"=",visible:"=",rangeIndex:"="},link:function n(i,u){var d=u.find(".range-input"),f=u.find(".range-bubble"),p={},h=false;i.$watch("activeComponent",function(){i.editable=i.activeComponent&&!i.activeComponent.isDimension&&!i.activeComponent.isDiscrete()&&"function"===typeof i.activeComponent.getPositionOfValue;if(i.editable){d.removeClass("non-editable");f.removeClass("non-editable")}else{d.addClass("non-editable");f.addClass("non-editable")}});i.endEditing=function(){i.invalid=false;if(i.editing){a(i,false);d.blur()}};i.$watch("data.value",function(e){if(Number.isNaN(+e)){i.invalid=true;return}i.editing&&i.endEditing();d.val(e)});i.$watch("visible",function(){i.visible||i.endEditing()});i.$on("off",function(){i.endEditing();t(d[0]).off("*",r);t(f[0]).off("*",r);u.off("keyup"+r,"*");h=false});i.onEditBubble=function(){i.editing=true;d.css("width",f.width());i.$digest();d.focus();d[0].setSelectionRange(0,9999);i.$digest();e(function(){c.call(d)})};function v(){if(h)return;h=true;t(d[0]).tap({id:r,options:{preventDefault:false},start:function e(){t.preventGestures(this.gestureHandler)}});t(f[0]).tap({id:r,start:function e(){t.preventGestures(this.gestureHandler)},end:function e(){if(!i.editable||i.editing)return;a(i,true);i.onEditBubble()}}).swipe({id:r,start:function e(){p=[{x:i.handlePoints[0].x,y:i.handlePoints[0].y},{x:i.handlePoints[1].x,y:i.handlePoints[1].y}];t.preventGestures(this.gestureHandler);o(i)},update:function e(t,n){var r=i.far?1:0,o,a,l,c;if(i.horizontal){o=n.swipe.deltaX;a="x"}else{o=n.swipe.deltaY;a="y"}l=p[1^r][a];c=p[r][a]+o;if(0===r&&(i.horizontal&&c>l||!i.horizontal&&c<l)){r=1;l=p[1][a]}else if(1===r&&(i.horizontal&&c<l||!i.horizontal&&c>l)){r=0;l=p[0][a]}i.handlePoints[r][a]=c;i.handlePoints[1^r][a]=l;i.$digest();s(i,i.handlePoints,a,i.rangeIndex)},end:function e(){l(i,i.handlePoints)}});d.keyup(c);i.onEditConfirmed=function(){if(!i.editing)return;var e=d.val(),t={value:parseFloat(e),index:i.far?1:0,switch:false},n=i.activeComponent.getPositionOfValue(t.value),r,o,a=i.handlePoints;if(Number.isNaN(+t.value))i.invalid=true;else{o=i.horizontal?"x":"y";a[t.index][o]=n;if(i.horizontal&&a[1][o]<a[0][o]||!i.horizontal&&a[1][o]>a[0][o]){r=a[1][o];a[1][o]=a[0][o];a[0][o]=r;t.index=t.index?0:1;t.switch=true}i.endEditing();s(i,i.handlePoints,o,i.rangeIndex,t);l(i,i.handlePoints)}i.$digest()};i.$on("confirmEdit",i.onEditConfirmed)}i.$on("on",v);v()}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="bubble-wrapper" ng-class="{\'far\' : far, \'near\' : !far}">\n\t<div ng-show="!editing" qva-direction x-dir-text="{{data.text}}" class="bubble range-bubble" ng-class="{\'active\' : active}">{{data.text}}</div>\n\t<input ng-show="editing" type="text" ng-class="{\'active\' : active, \'invalid\': invalid}" class="bubble range-input"/>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(668)],r=function(e){var t;t=e.extend({setIsEditing:function e(t,n){this._editing=t;this._scope=n},getIsEditing:function e(){return this._editing},confirmEdit:function e(){this._scope.$broadcast("confirmEdit")},selectWhileLocked:function e(t){this.handler.SelectWhileLocked.emit(t)}});t.defaultOptions={captureInput:true,toggle:{callback:null}};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(266),n(104)],r=function(e,t){var n;function i(e,t){var n,i,r=t[0],o=false;for(n=0;n<e.length;n++){i=e[n];if(i.startVal===r.startVal&&i.updateVal===r.updateVal){e.splice(n,1);n--;o=true}}o||(e=e.concat(t));return e}n=e.extend({init:function e(t,n){this._super(t,n);this.internal=true},release:function e(){},initComponent:function e(t,n){document.activeElement&&document.activeElement.blur();if(n)this.setActiveComponent(n);else{this.handler.refreshContainerRect();this.setActiveComponent(this.getComponent(t.x,t.y,this.handler.containerRect))}},getRect:function e(n){if(!n)return new t(0,0,0,0);return n.hasOwnProperty("innerRect")?n.innerRect:n.rect},setComponent:function e(t,n){this._super(t,n);var i=Array.isArray(n)?n.concat():[n];i.forEach(function(e){e.selections=this;this.handler._isListening&&n.on()},this)},addComponent:function e(t,n){this._super(t,n);n.selections=this;this.handler._isListening&&n.on()},removeComponent:function e(t,n){this._super(t,n);n.selections=null;n.off()},updateFromItems:function e(t,n,i,r){var o=this.handler,a=this;if(!o.canTypeBeActivated(this)){o.SelectWhileLocked.emit(i?this.activeComponent.getAttributeDimensionInfo():void 0);return}this.resetSelectedShapes();this.setActiveMode(i?"item"+this.activeComponent.getColorMap().getColorDataInfo().legendPath.replace(/\//g,"."):"item");o.activate(this);i&&o.SelectAttributeDim.emit(r,o.getKeyAsToggleSelected(t));n=n.filter(function(e){return a._allowNullSelect||!a.shapesFrom._isNull(e,a.activeComponent.getSelectionIndices())});if(n.length){var s=this.options.toggle.callback||this.toggleSelection;s.call(this,n);i||o.Select.emit(this.getSelectedShapes(),o.getKeyAsToggleSelected(t))}},rangeStart:function e(t){var n=this.handler;if(!n.canTypeBeActivated(this)){n.SelectWhileLocked.emit();return}this.setActiveMode("range.measure");n.activate(this);t&&this.resetSelectedShapes()},rangeUpdate:function e(t,n){var r=this.handler;if(!r.canTypeBeActivated(this)){r.SelectWhileLocked.emit();return}var o=this.options.toggle.callback||this.toggleSelection,a=[],s,l=this.ToggleFlag.select;this.clearSelection(true);this._rangeObjects&&n&&(t=i(this._rangeObjects,t));for(s=0;s<t.length;s++){var c=t[s];a=a.concat(this.shapesFromRange(c.startVal,c.updateVal,true,c.isMax))}a.forEach(function(e){e.selectionMode="range.measure"});o.call(this,a,l);this._rangeObjects=t;this._shapes=a},rangeEnd:function e(){this.selectRange();this._shapes=null},toggle:function e(){},cancel:function e(){this._rangeObjects=null;this.activeComponent.cancelSelection()},clearSelection:function e(t){this._super();if(!t){this._rangeObjects=null;this.activeComponent.clearSelection()}},selectRange:function e(){var t=this.handler.SelectRange,n,i,r=[];if(!this._rangeObjects)return;for(n=0;n<this._rangeObjects.length;n++){i=this._rangeObjects[n];r.push({idx:i.idx||0,range:{min:Math.min(i.startVal,i.updateVal),max:Math.max(i.startVal,i.updateVal),maxInclEq:!!i.isMax}})}t.emit(r,true)}});n.defaultOptions={};return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(48),n(10),n(91),n(106),n(101),n(670)],r=function(e,t,n,i,r,a){function s(e){if("object"===o(e)){e=e.qStringExpression.qExpr;"="!==e[0]&&(e="="+e)}return e}function l(e){if(e&&0===e.indexOf("="))return{qStringExpression:{qExpr:e}};return e}e.directive("qvInlineTitleInput",[function(){return{priority:1,require:"ngModel",link:function t(n,i,r,o){i.unbind("input keydown change compositionend");i.bind("blur",function(){e.$apply(n,function(){o.$setViewValue(i.val());n.doEdit()})});n.$on("$destroy",function(){i.trigger("blur")});i.bind("keydown",function(e){e.stopPropagation();if(27===e.which){i.val(o.$viewValue);i.trigger("blur")}else 13===e.which&&"textarea"!==i[0].nodeName.toLowerCase()&&i.trigger("blur")})}}}]);e.directive("qvInlineTitleEdit",["$timeout",function(e){return{template:a,restrict:"A",scope:{model:"=",propertyPath:"@",layoutPath:"@",emptyTranslation:"@",dirSetting:"@"},priority:1,link:function o(a,c){var u=c.children().first(),d=c.children().eq(1),f=c.children().eq(2);a.editing=false;a.titleProperty="";a.titleValue="";a.addTranslation=n.get(a.emptyTranslation);i(a,"model",function(e){a.displayValue=r.getValue(e,a.layoutPath);a.editing=false});a.doEdit=function(){var e=l(a.titleValue);a.editing&&(t.equals(p,e)?a.editing=false:a.model.getProperties().then(function(t){r.setValue(t,a.propertyPath,e);a.model.setProperties(t);p=e}))};var p;u.add(d).on("qv-activate",function(){a.editing||a.model.getProperties().then(function(t){var n=f.get(0);var i=r.getValue(t,a.propertyPath);var o=s(i);var l=o.length;if(o.indexOf("\n")>-1)return;a.editing=true;a.titleProperty=i;a.titleValue=o;p=a.titleProperty;n.scrollLeft=n.scrollWidth;n.selectionStart=l;n.selectionEnd=l;e(function(){n.focus();n.setSelectionRange(l,l)})})})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div ng-show="!editing && displayValue == \'\'" class="qv-inline-edit-button">\n\t<div qva-direction x-dir-setting="{{dirSetting}}" class="add-content" q-title-translation="{{emptyTranslation}}">\n\t\t<span class="lui-icon lui-icon--plus"></span>\n\t\t<span class="add-text" qva-direction x-dir-text="{{addTranslation}}" title="{{addTranslation}}">{{addTranslation}}</span>\n\t</div>\n</div>\n<div qva-direction x-dir-setting="{{dirSetting}}" x-dir-text="{{displayValue}}" ng-show="!editing && displayValue != \'\'" class="qv-inline-edit-value">{{displayValue}}</div>\n<input qva-direction x-dir-setting="{{dirSetting}}" x-dir-text="{{displayValue}}" ng-show="editing" class="qv-inline-edit-input" type="text" ng-model="titleValue" qv-inline-title-input maxlength="255"/>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(1090),n(1091),n(49),n(2)],r=function(e,t,i,r){function o(e){var t=n.p+e;return r.get(t,{responseType:"json"}).then(function(e){if(e.data)return e.data;console.warn("Parsing error for extension: "+t);return{}}).catch(function(e){console.warn("Couldn't get bundled extensions qext: "+t+". Error: "+e);return{}})}var a={};a.getDashBundleList=function(){var t=e.content.map(function(e){if("qlik-share-button"===e.id&&!i.getFlag("SHARE_BUTTON_EXTENSION"))return;return o("_dashboard-bundle/"+e.id+"/"+e.id+".qext").then(function(t){t.folder="_dashboard-bundle";return{id:e.id,data:t,path:"_dashboard-bundle/"+e.id+"/"+e.id}})});return t.filter(function(e){return e})};a.getVisBundleList=function(){var e=t.content.map(function(e){if(!i.getFlag("VIZBUN_QCS_SMARTPIVOT")&&"qlik-smart-pivot"===e.id)return;if(!i.getFlag("VIZBUN_QCS_TRELLIS")&&"qlik-trellis-container"===e.id)return;if(!i.getFlag("VIZBUN_QCS_31")&&("qlik-barplus-chart"===e.id||"qlik-bullet-chart"===e.id))return;return o("_visualization-bundle/"+e.id+"/"+e.id+".qext").then(function(t){t.folder="_visualization-bundle";return{id:e.id,data:t,path:"_visualization-bundle/"+e.id+"/"+e.id}})});return e.filter(function(e){return e})};return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="q-card-header-container" qva-direction x-dir-setting="{{direction}}">\n\t<div class="q-card-header">\n\t\t<span q-translation="ObjectInfo.Dialog.Header"></span>\n\t</div>\n\t<div>\n\t\t<button class="lui-fade-button close-button" q-title-translation="Common.Close" qva-activate="close()">\n\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--close"></span>\n\t\t</button>\n\t</div>\n</div>\n<div class="content"></div>'},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(113),n(311),n(181),n(49),n(329),n(11),n(674)],r=function(e,t,n,i,r,a){function s(e){var t=e.cells;var i=e.rows;var r=e.columns;t.forEach(function(t){if(!t.bounds){var o={};t.bounds=o;o.y=t.row/i*100;o.x=t.col/r*100;o.width=t.colspan/r*100;o.height=t.rowspan/i*100}n.alignToGrid(e,t)})}function l(e){return e.layoutOptions&&e.layoutOptions.sheetMode?e.layoutOptions.sheetMode:"RESPONSIVE"}function c(e){var n=l(e);if(n&&"RESPONSIVE"!==n){if("CUSTOM"===n){e.rows=t.getCustomRows(e);e.columns=t.getCustomCols(e)}}else{e.height?e.rows=Math.ceil(t.getResolutionFor(e.gridResolution)*e.height/100):e.rows=t.getResolutionFor(e.gridResolution);e.columns=2*t.getResolutionFor(e.gridResolution)}s(e)}var u={type:"items",component:"accordion",defaultActiveTabIndex:0,items:{sheetProps:{type:"items",translation:"properties.sheetProperties",items:{title:{type:"string",ref:"qMetaDef.title",translation:"Common.Title",minlength:1,readOnly:function e(t,n,i){var r=i.layout;return r&&(r.permissions&&!r.permissions.update||r.qMeta&&r.qMeta.sourceObject&&r.qMeta.sourceObject.length>0)},rollbackInvalid:true},labelExpression:{type:"string",ref:"labelExpression",translation:"properties.titleExpression",readOnly:function e(t,n,i){var r=i.layout;return r&&(r.permissions&&!r.permissions.update||r.qMeta&&r.qMeta.sourceObject&&r.qMeta.sourceObject.length>0)},rollbackInvalid:true,expression:"optional",show:e.SHEET_NAME_EXPR},description:{type:"string",component:"textarea",expression:"optional",readOnly:function e(t,n,i){var r=i.layout;return r&&r.permissions&&!r.permissions.update},change:function e(t,n,i){if("object"===o(i.qMetaDef.description)){i.descriptionExpression=i.qMetaDef.description;i.qMetaDef.description=""}else if("string"===typeof i.descriptionExpression&&i.descriptionExpression){i.qMetaDef.description=i.descriptionExpression;i.descriptionExpression=void 0}},refFn:function e(t){var n="object"===o(t.descriptionExpression);return n?"descriptionExpression":"qMetaDef.description"},translation:"Common.Description"},items:{type:"items",grouped:true,items:{thumbnail:{translation:"properties.sheetProperties.thumbnail",type:"string",readOnly:function e(t,n,i){var r=i.layout;return r&&r.permissions&&!r.permissions.update},component:"sheet-thumbnail",defaultValue:""},gridSize:{translation:"properties.gridSize",readOnly:function e(t,n,i){var r=i.layout;return r&&r.permissions&&!r.permissions.update},type:"string",component:"dropdown",ref:"gridResolution",defaultValue:t.getPreferredGridSize,options:[{value:"small",translation:"properties.gridSmall"},{value:"medium",translation:"properties.gridMedium"},{value:"large",translation:"properties.gridLarge"}],show:function e(n){n.gridResolution||(n.gridResolution=t.getResolutionFor(n.rows));s(n);return true},change:function e(n){t.setPreferredGridSize(n.gridResolution);c(n);s(n);if(i.getFlag("SSA_IN_EDIT")){var r=a("#grid");r.addClass("reveal-gridguides");r.on("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){a(this).removeClass("reveal-gridguides")})}}},sheetSizeOptions:{type:"items",ref:"grid",items:{layout:{type:"items",items:{LayoutMode:{translation:"properties.layoutMode",readOnly:function e(t,n,i){var r=i.layout;return r&&r.permissions&&!r.permissions.update},type:"string",component:"dropdown",ref:"layoutOptions.sheetMode",defaultValue:"RESPONSIVE",options:[{value:"RESPONSIVE",translation:"properties.responsive"},{value:"CUSTOM",translation:"properties.custom"}],change:function e(t){c(t)}},sheetSize:{type:"items",show:function e(t){return"CUSTOM"===l(t)},readOnly:function e(t,n,i){var r=i.layout;return r&&r.permissions&&!r.permissions.update},items:{width:{readOnly:function e(t,n,i){var r=i.layout;return r&&r.permissions&&!r.permissions.update},defaultValue:1280,ref:"pxWidth",type:"integer",translation:"properties.customWidth",change:function e(n){n.pxWidth=t.checkSheetPixelLimits(n.pxHeight,n.pxWidth).pxWidth;c(n)}},height:{readOnly:function e(t,n,i){var r=i.layout;return r&&r.permissions&&!r.permissions.update},defaultValue:1024,ref:"pxHeight",type:"integer",translation:"properties.customHeight",change:function e(n){n.pxHeight=t.checkSheetPixelLimits(n.pxHeight,n.pxWidth).pxHeight;c(n)}}}}}},mobileLayout:{translation:"properties.mobileLayout",readOnly:function e(t,n,i){var r=i.layout;return r&&r.permissions&&!r.permissions.update},component:"dropdown",type:"string",ref:"layoutOptions.mobileLayout",defaultValue:"LIST",show:function e(t){return i.getFlag("MOBILE_GRID")&&"CUSTOM"!==l(t)},options:[{value:"LIST",translation:"properties.listView"},{value:"GRID",translation:"properties.gridView"}],change:function e(n){t.setPreferredMobileLayout(n.layoutOptions.mobileLayout)}},ExtendSheet:{translation:"properties.extendSheet",readOnly:function e(t,n,i){var r=i.layout;return r&&r.permissions&&!r.permissions.update},show:function e(t){return!("CUSTOM"===l(t))},type:"boolean",component:"switch",ref:"layoutOptions.extendable",defaultValue:"false",options:[{value:false,translation:"properties.off"},{value:true,translation:"properties.on"}],change:function e(t){t.height||(t.height=100);t.layoutOptions.sheetMode||(t.layoutOptions.sheetMode="RESPONSIVE");c(t)}}}}}},expandButton:{translation:"Expand sheet",component:"button",action:function e(n,i,r,o){if(n.height){n.height+=50;n.rows=Math.ceil(t.getResolutionFor(n.gridResolution)*n.height/100)}else{n.height=150;n.rows=1.5*t.getResolutionFor(n.gridResolution)}o.$emit("saveProperties",n)},show:function t(){return e.SCROLL_BUTTON},readOnly:function e(t,n,i){var r=i.layout;return r&&r.permissions&&!r.permissions.update}},CollapseButton:{translation:"Collapse sheet",component:"button",action:function e(n,i,r,o){if(n.height){n.height-=50;n.rows=Math.ceil(t.getResolutionFor(n.gridResolution)*n.height/100)}else{n.height=100;n.rows=t.getResolutionFor(n.gridResolution)}o.$emit("saveProperties",n)},show:function t(){return e.SCROLL_BUTTON},readOnly:function e(t,n,i){var r=i.layout;return r&&r.permissions&&!r.permissions.update}}}}}};i.getFlag("ALT_STATE_ONE")&&(u.items.alternateState=r);return u}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(165),n(121),n(675)],r=function(e,t,n){var i={template:n,controller:["$scope",function(e){var n=function t(){return e.data};t.defineLabel(e,e.definition,n,e.args.handler);t.defineReadOnly(e,e.args.handler);e.item={qData:e.data,qMeta:{published:e.args.model.layout.qMeta.published}};e.save=function(){e.$emit("saveProperties")};e.$on("thumbnailchanged",function(){e.save()});e.$on("layoutchanged",function(t,n){e.thumbLayout={thumbnail:n.thumbnail}});e.thumbLayout={thumbnail:e.args.model.layout.thumbnail}}]};e.addComponent("sheet-thumbnail",i);return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="pp-component pp-media-component pp-sheet-thumbnail-component" tcl="media">\n\t<div class="label" ng-if="label">{{label}}</div>\n\t<div class="value">\n\t\t<div class="placeholder">\n\t\t\t<div qv-ao-thumb item="item" issheet="true" thumbprop="data.thumbnail" thumblayout="thumbLayout.thumbnail" editmode="!readOnly" thumb-width="221" thumb-height="128" emitchanges="true"></div>\n\t\t</div>\n\t</div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(677),n(94),n(107),n(150),n(166),n(11),n(161),n(100),n(91),n(145),n(268),n(211),n(241),n(209),n(296),n(298),n(730),n(740),n(350)],r=function(e,t,n,i,r,o,a,s,l,c){var u;function d(e){var t=o.validateExpr(e.measure,i),n;n=o.validateMetadataName(e.measure,i);var r=e.measure.validity;return n&&t&&r.labelExpression&&r.description}function f(e){return{name:e.measure.name,description:e.measure.description,tags:e.measure.tags,expr:e.measure.expression,baseColor:e.measure.coloring.baseColor,gradient:e.measure.coloring.gradient,labelExpression:e.measure.labelExpression,descriptionExpression:e.measure.descriptionExpression}}var p={scope:{title:"=",confirmLabel:"=",measure:"="},template:t,controller:["$scope","$timeout",function(t,p){t.theme=l;Object.defineProperty(t,"color",{get:function e(){return t.theme.resolveColor(t.measure.coloring.baseColor)},set:function e(n){var i="undefined"!==typeof n.color?n.color:n;var r="undefined"!==typeof n.index?n.index:t.theme.currentPalette.indexOf(n);t.measure.coloring.baseColor={color:i,index:r}}});t.measure.validity={};t.measure.validity.expression=true;t.measure.validity.description=true;t.measure.validity.name=true;t.measure.validity.labelExpression=true;t.measure.name=s.trimAutoCalendarName(t.measure.name);t.stringLimits=i;t.cancel=function(){t.destroyComponent()};t.confirm=function(){t.measure.updateTags();if(d(t)){u.close();var n=f(t);t.callback(n);if(n.gradient){var i=e.getService("qvRecentGradientsService"),r="absolute"!==n.gradient.limitType,o=n.gradient,a,s=i.getTemplates(),l=s.some(function(e){var t=true;o.limits.length!==e.limits.length&&(t=false);t&&o.colors.forEach(function(n,i){n!==e.colors[i]&&(t=false)});t&&o.limits.forEach(function(n,i){n!==e.limits[i]&&(t=false)});t&&o.breakType.forEach(function(n,i){n!==e.types[i]&&(t=false)});r!==e.percentage&&(t=false);return t});if(!l){a=c.get("library.colors.recent",1);s.map(function(e){return parseInt(e.name.replace(/\D/g,""))||0}).sort(function(e,t){return t-e}).every(function(e){a=c.get("library.colors.recent",e+1);return false});i.pushTemplate({name:a,colors:n.gradient.colors.slice(),limits:r?n.gradient.limits.slice():i.convertAbsLimits(n.gradient.limits),types:n.gradient.breakType.slice(),percentage:r})}}}};n.StateChanged.bind(t.cancel);t.openInExpressionDialog=function(e){e.preventDefault();r.show({expr:t.measure.expression,title:t.measure.expression?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title"}).then(function(e){t.measure.expression=e})};t.$watch("measure.expression",function(){t.measure.validity.expression||o.validateExpr(t.measure,i)});t.$watch("measure.name",function(){t.measure.validity.name||o.validateMetadata(t.measure,i)});t.$on("$destroy",function(){n.StateChanged.unbind(t.cancel)});t.simFocus=false;p(function(){a("#measure-dialog-expression-area").on("focus",function(){t.simFocus=true;e.$apply(t)}).on("blur",function(){t.simFocus=false;e.$apply(t)})})}]};function h(t){var n=t.coloring?t.coloring.baseColor:t.baseColor;var i=t.gradient;var r={title:t.title,confirmLabel:t.confirm,measure:{expression:t.expr,name:t.name,labelExpression:t.labelExpression,description:t.description,descriptionExpression:t.descriptionExpression,tags:t.tags,coloring:{baseColor:{color:n&&n.color?n.color:"none",index:n&&n.index?n.index:-1}}},add:t.add,callback:t.callback};i&&(r.measure.coloring.gradient={colors:i.colors.map(function(e){return l.resolveColor(e)}),breakType:i.breakTypes,limitType:i.limitType,limits:i.limits});u=e.getService("luiDialog").show({template:p.template,controller:p.controller,input:r,closeOnOutside:false,showArrow:false});return u}return{show:h}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="lui-modal-background"></div>\n<div class="lui-dialog measure-dialog-wrapper" name="measureDialog">\n\t<lui-tab-view class="measure-tab-view">\n\t\t<div class="lui-dialog__header">\n\t\t\t<lui-tabset fill="true">\n\t\t\t\t<lui-tab q-title-translation="{{title}}" q-translation="{{title}}" ref="tab1" tid="create-tab"></lui-tab>\n\t\t\t\t<lui-tab ng-if="!input.add" q-title-translation="library.colors.segmentColors" q-translation="library.colors.segmentColors" ref="tab2" tid="segment-tab"></lui-tab>\n\t\t\t</lui-tabset>\n\t\t</div>\n\t\t<div class="lui-dialog__body">\n\t\t\t<lui-tab-content ref="tab1">\n\t\t\t\t<qv-edit-measure></qv-edit-measure>\n\t\t\t</lui-tab-content>\n\t\t\t<lui-tab-content ref="tab2">\n\t\t\t\t<qv-segment-colors ng-model="measure.coloring.gradient"></qv-segment-colors>\n\t\t\t</lui-tab-content>\n\t\t</div>\n\t</lui-tab-view>\n\t<div class="lui-dialog__footer">\n\t\t<button class="lui-button close-button" ng-click="cancel()" name="cancelButton" q-translation="Common.Cancel" data-tid="close-btn"></button>\n\t\t<button class="lui-button close-button" ng-click="$event.preventDefault(); confirm()" name="confirmButton" q-translation="{{confirmLabel}}" data-tid="create-btn"></button>\n\t</div>\n</div>'},function(e,t){e.exports='<lui-dialog id="expression-editor-wrapper">\t\n\t<lui-dialog-header class="expression-editor-toolbar">\n\t\t<span class="expression-editor-toolbar-title" q-translation="{{input.title}}"></span>\n\t\t<div class="expression-editor-toolbar-buttons">\t\t\n\t\t\t<button ng-if="isAdvancedPart3" class="lui-fade-button expression-editor-undo-button" \n\t\t\t\t\tdata-name="undo" ng-disabled="undoDisabled || !codearea.contextApi.canUndo" \n\t\t\t\t\tng-click="onUndo()" q-title-translation="Common.Undo" disabled="disabled" title="Undo">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--back"></span>\n\t\t\t</button>\n\t\t\t<button ng-if="isAdvancedPart3" class="lui-fade-button expression-editor-redo-button" \n\t\t\t\t\tdata-name="redo" ng-disabled="redoDisabled || !codearea.contextApi.canRedo" \n\t\t\t\t\tng-click="onRedo()" q-title-translation="Common.Redo" disabled="disabled" title="Redo">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--forward"></span>\n\t\t\t</button>\t\t\t\t\t\n\t\t\t<button\n\t\t\t\tclass="lui-fade-button expression-editor-help-button"\n\t\t\t\tdata-name="help-mode"\n\t\t\t\tng-class="{\'lui-active\': controller.helpmodeActive}"\n\t\t\t\tng-click="onHelpmode()"\n\t\t\t\tq-title-translation="Tooltip.HelpMode.Enter">\n\t\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--help"></span>\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclass="lui-fade-button"\n\t\t\t\tqva-activate="$event.preventDefault(); close()"\n\t\t\t\tdata-name="close">\n\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--close" q-title-translation="Common.Close"></span>\n\t\t\t</button>\t\t\t\t\n\t\t</div>\t\n\t</lui-dialog-header>\t\n\t<lui-dialog-body class="expression-editor-body" qv-cancel="cancel()" qv-confirm="confirm()">\n\t\t<section id="expression-editor-panel" class="qribby-accordion-pp">\n\t\t\t<div class="qv-expandable-list-wrapper" qv-expandable-list></div>\t\t\t\n\t\t</section>\n\t\t<section id="expression-editor-content">\n\t\t\t<main class="dm-main">\n\t\t\t\t<div id="expression-editor-container">\n\t\t\t\t\t<div id="expression-editor-stage" data-help="Panel.Stage" ng-class="{ invalid: !validity.expression }">\n\t\t\t\t\t\t<qv-codearea\n\t\t\t\t\t\t\t\tdata-show-breakpoint-gutter="true"\n\t\t\t\t\t\t\t\tdata-disabled="controller.helpmodeActive"\n\t\t\t\t\t\t\t\tdata-resize-trigger="resizeCounter"\n\t\t\t\t\t\t\t\tdata-mode="qlikviewReloadScriptMode"\n\t\t\t\t\t\t\t\tclass="expression-dialog-code-mirror"\n\t\t\t\t\t\t\t\tqva-outside-ignore-for="allOutside"\n\t\t\t\t\t\t\t\tqv-codearea-code-container="codearea"\n\t\t\t\t\t\t\t\tqv-codearea-exposed-context-api="codearea.contextApi"\n\t\t\t\t\t\t\t\tqv-codearea-function-tip="functionTipOptions"\n\t\t\t\t\t\t\t\tqv-codearea-limit="stringLimits.expression"\n\t\t\t\t\t\t\t\tqv-codearea-autocomplete="autocompleteOptions"\n\t\t\t\t\t\t\t\tqv-codearea-help-mode="controller.helpmodeActive"\n\t\t\t\t\t\t\t\tqv-codearea-help-mode-options="helpModeOptions"\n\t\t\t\t\t\t\t\tqva-activate="closePopoverIfOpen($event)"\n\t\t\t\t\t\t></qv-codearea>\n\t\t\t\t\t\t<div class="ee-information-wrapper">\n\t\t\t\t\t\t\t<div class="row-number-fill"></div>\n\t\t\t\t\t\t\t<div class="ee-information">\n\t\t\t\t\t\t\t\t<qv-information-area x-info="info" x-app="input.app" x-mode="input.mode" x-labels="input.labels"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\t\t\t\n\t\t\t</main>\n\t\t</section>\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<button class="lui-button close button" ng-click="cancel()" name="cancelButton" q-translation="Common.Cancel">Cancel</button>\n\t\t<button class="lui-button confirm button" ng-click="confirm()"  qv-confirm="confirm()" name="confirmButton" q-translation="Common.Apply">Confirm</button>\n\t</lui-dialog-footer>\n</lui-dialog>'},function(e,t){e.exports='<div class="expression-editor-section">\n    \x3c!-- TABLE DROPDOWN --\x3e\n    <div id="expression-editor-toolbar-table">\n        <label q-translation="Assets.FieldsTab.Table"></label>\n        <button\n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)"\n            data-context="tables"\n            tid="table-dropdown"\n            title="{{controller.selectedTable.label}}">\n            <div class="label">\n                {{controller.selectedTable.label}}\n            </div>\n        </button>\n    </div>\n   \x3c!-- FIELD DROPDOWN --\x3e\n    <div id="expression-editor-toolbar-field">\n        <label q-translation="Common.Field"></label>\n        <button\n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)" \n            data-context="fields"\n            tid="field-dropdown"\n            title="{{controller.selectedField.label}}">\n            <div class="label">\n                {{controller.selectedField.label}}\n            </div>\n        </button>\n    </div>\n    \x3c!-- AGGREGATION DROPDOWN --\x3e\n    <div id="expression-editor-toolbar-functions" >\n        <label q-translation="ExpressionEditor.AggregationFunctions"></label>\n        <button\n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)"\n            data-context="commonFunctions"\n            tid="aggregation-dropdown"\n            title="{{controller.selectedCommonFunction.label}}">\n            <div class="label">\n                {{controller.selectedCommonFunction.label}}\n            </div>\n        </button>\n    </div>\n   \x3c!-- SET EXPRESSION CHECKBOX --\x3e\n    <div id="expression-editor-toolbar-current" ng-if="exposeSetExpression">        \n        <label class="lui-checkbox">\n            <input \n                class="lui-checkbox__input"\n                type="checkbox"\n                ng-disabled="controller.readOnly() || controller.noSelectionsInObjectState"\n                ng-model="controller.currentOption" \n            />            \n            <div class="lui-checkbox__check-wrap">\n                <span class="lui-checkbox__check" tid="checkbox-set"></span>\n                <span \n                    class="lui-checkbox__check-text label" \n                    ng-disabled="controller.readOnly() || controller.noSelectionsInObjectState"\n                    q-translation="ExpressionEditor.SetExpression"\n                    q-title-translation="ExpressionEditor.SetExpression">\n                </span>              \n            </div>           \n        </label>  \n        <span ng-if="( !controller.readOnly() && controller.noSelectionsInObjectState )" \n            q-translation="ExpressionEditor.EmptySelections" text="inline style" style="color:grey">\n        </span>      \n    </div>\n    \x3c!-- DISTINCT CHECKBOX --\x3e\n    <div id="expression-editor-toolbar-distinct">\n        <label class="lui-checkbox">\n            <input \n                class="lui-checkbox__input" \n                type="checkbox" \n                ng-disabled="controller.readOnly()" \n                ng-model="controller.distinctOption"\n                ng-true-value="\'distinct\'"\n                ng-false-value="\'\'"\n            />\n            <div class="lui-checkbox__check-wrap">\n                <span class="lui-checkbox__check" tid="checkbox-distinct"></span>\n                <span \n                    class="lui-checkbox__check-text label" \n                    ng-disabled="controller.readOnly()"\n                    q-translation="ExpressionEditor.Distinct"\n                    q-title-translation="ExpressionEditor.Distinct">\n                </span>\n            </div>\n        </label>\n    </div>\n    \x3c!-- TOTAL CHECKBOX --\x3e\n    <div id="expression-editor-toolbar-total">\n        <label class="lui-checkbox">\n            <input \n                class="lui-checkbox__input"\n                type="checkbox"\n                ng-disabled="controller.readOnly()"\n                ng-model="controller.totalOption"\n                ng-true-value="\'total\'"\n                ng-false-value="\'\'" \n            />\n            <div class="lui-checkbox__check-wrap">\n                <span class="lui-checkbox__check" tid="checkbox-total"></span>\n                <span \n                    class="lui-checkbox__check-text label" \n                    ng-disabled="controller.readOnly()"\n                    q-translation="ExpressionEditor.Total"\n                    q-title-translation="ExpressionEditor.Total">\n                </span>\n            </div>\n        </label>\n    </div>\n    \x3c!-- INSERT BUTTON --\x3e\n    <div id="expression-editor-toolbar-insert">\n        <lui-button\n                ng-disabled="!controller.previewText()"\n                type="button"\n                tid="insert-field"\n                ng-click="insertTextHandler($event)"\n                q-title-translation="Tooltip.ExpressionEditor.InsertExpression">\n            <span q-translation="ExpressionEditor.Insert"></span>\n        </lui-button>\n    </div>\n</div>'},function(e,t){e.exports='<div class="expression-editor-section">\n    \n    <label q-translation="ExpressionEditor.FunctionCategory"></label>\n    <button\n        class="lui-button expression-editor-dropdown" \n        ng-click="openPopover($event)"\n        data-context="functionCategories"\n        title="{{controller.selectedFunctionCategory.label}}">\n        <div class="label">\n            {{controller.selectedFunctionCategory.label}}\n        </div>\n    </button>\n    \n    <div class="expression-editor-function-name">\n        <label q-translation="ExpressionEditor.FunctionName"></label>\n        <button\n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)"\n            data-context="functions"\n            tid="functions-dropdown"\n            title="{{controller.selectedFunction.label}}">\n            <div class="label">\n                {{controller.selectedFunction.label}}\n            </div>\n        </button>\n        <textarea disabled class="expression-editor-function-definition lui-textarea lui-disabled">{{controller.selectedFunctionTip}}</textarea>\n    </div>\n    \n    <div id="expression-editor-toolbar-insert">\n        <lui-button\n            type="button"\n            tid="insert-function"\n            ng-disabled="!controller.previewText()"  \n            ng-click="insertFunctionHandler($event)" \n            q-title-translation="Tooltip.ExpressionEditor.InsertFunction">\n            <span q-translation="ExpressionEditor.Insert"></span>\n        </lui-button>\n    </div> \n</div>'},function(e,t){e.exports='<div class="expression-editor-section">\n    <div id="expression-editor-toolbar-variables">\n        <label q-translation="ExpressionEditor.VariableList"></label>\n        <button\n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)"\n            data-context="variables"\n            tid="variables-dropdown"\n            title="{{controller.selectedVariable.label}}">\n            <div class="label">\n                {{controller.selectedVariable.label}}\n            </div>\n        </button>\n\n        <div class="expression-editor-system-variables">\n            <label class="lui-checkbox">\n                <input class="lui-checkbox__input" type="checkbox" ng-model="controller.showSystemVars"></input>\n                <div class="lui-checkbox__check-wrap">\n                    <span class="lui-checkbox__check"></span>\n                    <span class="lui-checkbox__check-text label" ng-disabled="readOnly" q-translation="ExpressionEditor.SystemVariables" q-title-translation="ExpressionEditor.SystemVariables"></span>\n                </div>\n            </label>\n        </div>\n        \n        <div class="expression-editor-variable-definition">\n            <label q-translation="ExpressionEditor.Definition"></label>\n            <textarea disabled class="lui-textarea lui-disabled">{{controller.variableDef}}</textarea>\n        </div>\n        \n        <div class="expression-editor-variable-value">\n            <label q-translation="ExpressionEditor.Value"></label>\n            <textarea disabled class="lui-textarea lui-disabled">{{controller.variableVal}}</textarea>\n        </div>\n        \n        <div id="expression-editor-toolbar-insert">\n            <lui-button \n                type="button" \n                ng-click="insertVariableHandler($event)" \n                q-title-translation="Tooltip.ExpressionEditor.InsertVariable" \n                tid="insert-variable">\n                <span q-translation="ExpressionEditor.Insert"></span>\n            </lui-button>\n        </div>\n    </div>\n</div>'},function(e,t){e.exports='<div class="expression-editor-section">\n\n    <div class="expression-editor-toolbar-set-expressions">        \n        <div class="form-element">\n            <lui-radiobutton \n                x-disabled="controller.noSelections" \n                x-model="controller.setExpressionOption" \n                x-change="changeCurrentSetExpressionOption(\'0\')" \n                x-value="0"\n                >\n                {{ \'ExpressionEditor.SetExpressions.ContentOfCurrentSelection\' | translate }}\n            </lui-radiobutton>\n            <lui-radiobutton \n                x-disabled="!controller.bookmarks.length > 0" \n                x-model="controller.setExpressionOption" \n                x-change="changeCurrentSetExpressionOption(\'1\')" \n                x-value="1"\n                >\n                {{ \'ExpressionEditor.SetExpressions.ContentOfBookmark\' | translate }}\n            </lui-radiobutton>\n        </div>\n    </div>\n    <div id="expression-editor-toolbar-set-expression-bookmark" \n        ng-if="controller.setExpressionOption==1">\n        <label q-translation="ExpressionEditor.SetExpresions.Bookmark"></label>\n        <button \n            class="lui-button expression-editor-dropdown" \n            ng-click="openPopover($event)" \n            data-context="bookmarks" \n            tid="bookmark-dropdown" \n            title="{{controller.selectedBookmark.label}}">\n            <div class="label">\n                {{controller.selectedBookmark.label}}\n            </div>\n        </button>\n\n    </div>\n    <div id="expression-editor-toolbar-set-expression-states" x-disabled="controller.noSelections && !controller.bookmarks.length > 0" ng-if="controller.showAlternateStates">\n        <label q-translation="ExpressionEditor.SetExpresions.AlternateState"></label>\n        <lui-select x-model="controller.selectedAlternateState">\n            <option value="{{state.value}}" ng-if="controller.setExpressionOption==0" ng-repeat="state in controller.currentSelectionsAlternateStates ">{{state.label}}</option>\n            <option value="{{state.value}}" ng-if="controller.setExpressionOption==1" ng-repeat="state in controller.selectedBookmark.alternateStates ">{{state.label}}</option>\n        </lui-select>\n    </div>\n    <div id="expression-editor-toolbar-insert">\n        <lui-button \n            type="button" \n            tid="insert-set-expression" \n            ng-disabled="controller.disableSetExpressionInsertButton()" \n            ng-click="insertSetExpressionHandler($event)" \n            q-title-translation="Tooltip.ExpressionEditor.InsertSetExpression">\n            <span q-translation="ExpressionEditor.Insert"></span>\n        </lui-button>\n    </div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(90),n(132)],r=function(e,t){var n=false;var i=false;var r=false;function o(e){var t=[{label:e,value:""},{label:"Sum",value:"Sum"},{label:"Count",value:"Count"},{label:"Avg",value:"Avg"},{label:"Min",value:"Min"},{label:"Max",value:"Max"},{label:"Median",value:"Median"},{label:"Fractile",value:"Fractile"},{label:"Only",value:"Only"},{label:"Concat",value:"Concat"},{label:"Mode",value:"Mode"},{label:"MinString",value:"MinString"},{label:"MaxString",value:"MaxString"},{label:"FirstSortedValue",value:"FirstSortedValue"}];return t}function a(){var t;t=this.selectedField?this.selectedField.value:"";t=e.escapeField(t);if(this.selectedCommonFunction){if(this.selectedCommonFunction&&""===this.selectedCommonFunction.value)return t;var n=this.distinctOption.length?this.distinctOption+" ":"",i=this.totalOption.length?this.totalOption+" ":"",r=this.currentOption&&""!==this.selections?"{"+this.selections+"} ":"",o=this.selectedCommonFunction.value;return o+"("+r+n+i+t+")"}return t}function s(e){var t=[];e.forEach(function(e){t.push({label:e.qName,value:e.qName})});return t}function l(e,t){var n=t;return e.filter(function(e){t&&(n=t.value);return-1!==e.qSrcTables.indexOf(n)})}function c(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function u(e,t){return e.qName.toLowerCase().localeCompare(t.qName.toLowerCase())}function d(e,t){return e.label.toLowerCase().localeCompare(t.label.toLowerCase())}function f(e){var t=[];e.forEach(function(e){t.push({label:e,value:e})});return t}function p(e){var t,n;var i=[];for(t=0;t<e.length;++t)for(n=0;n<e[t].qSrcTables.length;++n)-1===i.indexOf(e[t].qSrcTables[n])&&i.push(e[t].qSrcTables[n]);i.sort(c);i=f(i);return i}function h(e,t,n){var i=n.value;var r=e.allTablesText.value;i!=r&&(t=l(t,n));e.fieldNames=s(t);S(e)}function v(e,t,n){t=t.value;e.functions=[];if(n.hasOwnProperty(t))t&&(e.functions=n[t]);else for(var i in n)n[i].forEach(function(t){-1===e.functions.indexOf(t)&&(e.functions=e.functions.concat(t))});if(e.functions&&e.functions.length>0){e.functions.sort(c);e.functions=f(e.functions);w(e)}}function g(e,t){var n=e.filter(function(e){return t||!e.qIsReserved&&!e.qIsConfig}).sort(u);n.forEach(function(e){e.label=e.qName;e.value=e.qName});return n}function m(e,t){var n=[];e.forEach(function(e){if(e.qFieldItems.length>0){var i=e.qStateName;n.push({label:"$"===i?t.get("AlternateState.DefaultState"):i,value:i})}});return n}function b(e,t){var n=[],i=true;e=e||[];e.forEach(function(e){if(e.qSelectionObject.qSelections.length>0){var r=e.stateName;i=false;n.push({label:"$"===r?t.get("AlternateState.DefaultState"):r,value:r})}});return{states:n,noSelections:i}}function y(e,t){var n=[];e.forEach(function(e){n.push({label:e.qData.title,value:e.qInfo.qId,alternateStates:r?m(e.qData.qBookmark.qStateData,t):[]})});return n.sort(d)}function x(e,t,n){var i=[];t.forEach(function(e){"EXT"!==e&&i.push({value:e,label:n.get("ExpressionEditor.Functions."+e)})});i.sort(function(e,t){return e.label.toLowerCase().localeCompare(t.label.toLowerCase())});i.unshift({value:e,label:n.get("ExpressionEditor.Functions."+e)});return i}function S(e){var t=false;e.fieldNames.forEach(function(n){var i=e.selectedField.label;var r=n.label;if(i==r){var o=e.selectedField;t=true;e.selectedField=o}});t||(e.selectedField=e.fieldNames[0])}function w(e){var t=false;e.functions.forEach(function(n){var i=e.selectedFunction.label;var r=n.label;if(i==r){var o=e.selectedFunction;t=true;e.selectedFunction=o}});t||(e.selectedFunction=e.functions[0])}function q(e){var t=["$Field","$FieldNo","$Fields","$Info","$Rows","$Table"],n=[],i=e.get("ExpressionEditor.FieldsTab.SystemFields");t.forEach(function(e){var t={qName:e,qSrcTables:[i]};n.push(t)});return n}function C(e,t){0!=t.length||e.showSystemVars||(e.selectedVariable="");e.variables.length>0&&-1===e.variables.indexOf(e.selectedVariable)&&(e.selectedVariable=e.variables[0])}function _(e,t){var n=[];switch(e){case"tables":n=t.tableNames;break;case"fields":n=t.fieldNames;break;case"commonFunctions":n=t.commonFunctions;break;case"functionCategories":n=t.functionCategories;break;case"functions":n=t.functions;break;case"variables":n=t.variables;break;case"bookmarks":n=t.bookmarks;break}return n}function I(e,t,n,i){switch(t){case"tables":n.setTableFilter(e);n.selectedTable=e;break;case"fields":n.selectedField=e;break;case"commonFunctions":n.selectedCommonFunction=e;break;case"functionCategories":n.selectedFunctionCategory=e;break;case"functions":n.selectedFunction=e;break;case"variables":n.selectedVariable=e;break;case"bookmarks":n.selectedBookmark=e;break;default:break}i(t)}function E(e){return t.get(e).then(function(e){return e.getLayout().then(function(){return{selectionsInStates:e.layout.selectionsInStates||[]}})})}function D(e){i=e.isAdvancedPart3;n=e.exposeSetExpression;r=e.isAlternateState;var t=e.translator,l=[];var c=e.fields.slice();c.sort(u);e.published||(c=c.concat(q(t)));var d=t.get("Common.All.Tables"),f=t.get("ExpressionEditor.Functions.ALL"),m=t.get("ExpressionEditor.FieldsTab.SelectAggregationHint");var w=e.sections.fields.state,D=e.sections.functions.state,A=e.sections.variables.state;d={label:d,value:d};""==w.table.label&&(w.table=d);if(""==w.aggregfunc.label){w.aggregfunc.label=m;w.aggregfunc.value=""}""==D.functionCategory.label&&(D.functionCategory.label=f);for(var T in e.functions)l.push(T);var O={getData:function e(t){return _(t,O)},setSelectedItem:I,allTablesText:d,commonFunctions:o(m),selectedCommonFunction:w.aggregfunc,readOnly:function e(){return""===O.selectedCommonFunction.value},setTableFilter:function e(t){h(O,c,t)},selectedTable:w.table,tableNames:[d].concat(p(c)),fieldNames:s(c),previewText:a,selectedField:w.field,distinctOption:w.distinctCheckBox,totalOption:w.totalCheckBox,currentOption:!!n&&w.setExpressionCheckBox,selections:"",noSelections:false,noSelectionsInObjectState:false,functions:[],functionCategories:x("ALL",l,t),selectedFunction:D.funct,selectedFunctionTip:"",selectedFunctionCategory:D.functionCategory,setFunctionCategoryFilter:function t(n){v(O,n,e.functions)},variables:g(e.variables,false),selectedVariable:A.variable,variableDef:"",variableVal:"",showSystemVars:A.sysVarsCheckBox,showVariablesFirstTime:A.showVariablesFirstTime,showVariableInfo:function e(t,n){O.variableDef=t;O.variableVal=n},setSysVarsFilter:function t(){var n=e.variables.filter(function(e){return!e.qIsReserved});if(0==n.length&&O.showVariablesFirstTime){A.sysVarsCheckBox=true;O.showSystemVars=true;A.showVariablesFirstTime=false;O.showVariablesFirstTime=false}O.variables=g(e.variables,O.showSystemVars);C(O,n)},setCurrentSelections:function e(t){O.selections=t},isStateInArray:function e(t,n){var i=false;t.forEach(function(e){e.value===n&&(i=true)});return i},setInitialOptionsForSetExpressionSection:function t(n){O.noSelections=n;if(n&&"0"===O.setExpressionOption)if(O.bookmarks.length>0){O.setExpressionOption="1";if(""===O.selectedBookmark){O.selectedBookmark=O.bookmarks[0];r&&""===O.selectedAlternateState&&O.bookmarks[0].alternateStates.length>0&&(O.selectedAlternateState=O.bookmarks[0].alternateStates[0].value)}}else{O.setExpressionOption="";O.setExpressionInsertDisabled=true}else r&&"0"===O.setExpressionOption&&O.currentSelectionsAlternateStates.length>0&&(O.selectedAlternateState=O.isStateInArray(O.currentSelectionsAlternateStates,e.sections.setExpressions.state.selectedAlternateState)?e.sections.setExpressions.state.selectedAlternateState:O.currentSelectionsAlternateStates[0].value)},disableSetExpressionInsertButton:function e(){return r?!O.selectedAlternateState:O.setExpressionInsertDisabled},isAlternateState:r,showAlternateStates:e.showAlternateStates,setExpressionOption:i?e.sections.setExpressions.state.setExpressionOption:"",bookmarks:y(e.bookmarks,t),currentSelectionsAlternateStates:[],selectedBookmark:i?e.sections.setExpressions.state.selectedBookmark:"",selectedAlternateState:r?e.sections.setExpressions.state.selectedAlternateState:"",setExpressionInsertDisabled:false,stateName:e.stateName};E(e.app).then(function(n){var i=e.stateName||"$";O.noSelectionsInObjectState=true;n.selectionsInStates.forEach(function(e){e.stateName===i&&e.qSelectionObject.qSelections.length>0&&(O.noSelectionsInObjectState=false)});if(r){var o=b(n.selectionsInStates,t);O.currentSelectionsAlternateStates=o.states;O.setInitialOptionsForSetExpressionSection(o.noSelections)}else O.setInitialOptionsForSetExpressionSection(O.noSelectionsInObjectState)});S(O);return O}return{create:D}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<qui-float qui-offset="offset" qui-resize-on-change="content" class="qv-function-tip-container">\n\t<div class=\'qv-function-tip-view\' ng-show=\'content\'>{{content}}</div>\n</qui-float>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(144),n(286),n(90)],r=function(e,t,n,i){var r=["like","not","and","or","xor","follows","precedes","bitnot","bitand","bitor","bitxor","$","$1","$2","$3","$4","$5","$_1","$_2","$_3","$_4","$_5","total","distinct","nodistinct","all","include","must_include"];function o(e,t){if("field"===e)return{text:t,type:e,value:i.escapeField(t)};return{text:t,type:e}}function a(e){var t=e.bnf;var n=s();var i=e.fields;var a=e.variables;var l=r.map(o.bind(null,"keyword"));var c=Object.keys(a).map(o.bind(null,"variable"));var u=Object.keys(i).map(o.bind(null,"field"));var d=t.getAllFunctions().map(o.bind(null,"function"));var f=l.concat(c,u,d);function p(e){return t.isFunction(e)}function h(e){return t.getFunctionTip(e)}function v(e){return!!n[e.toLowerCase()]||p(e)}function g(e){return!!i[e]}function m(e){return!!a[e]}function b(){return f}var y={getAutocompleteList:b,getFunctionTip:h,getFunctionsAndCategories:t.getAllFunctionsAndCategories,isFunction:p,isField:g,isKeyword:v,isVariable:m};return y}function s(){var e={};for(var t=0;t<r.length;++t){var n=r[t];e[n]=true}return e}function l(e){return e.enigmaModel.getFieldList().then(function(e){e=t.expand(e);var n={};for(var i=0;i<e.length;++i){var r=e[i].qName;n[r]=true}return n})}function c(e){return e.enigmaModel.getVariableList().then(function(e){var t={};for(var n=0;n<e.length;++n){var i=e[n].qName;t[i]=true}return t})}function u(t){return e.all({bnf:n.getExpressionBnfModel(t),fields:l(t),variables:c(t)}).then(a)}return{get:u}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90),n(687),n(97),n(99),n(139),n(218)],r=function(e,t,n,i,r){function o(e,t){if(""===t)return e;return e.filter(function(e){if("undefined"===typeof e)return false;return r.string(e.label.toLowerCase()).indexOf(r.string(t.toLowerCase()))>-1})}var a={template:t,scope:{alignTo:"=",close:"=",qvaOutsideIgnoreFor:"=",position:"="},controller:["$scope",function(t){var r=e.extend([],t.items);t.autoFocus=i.treatAsDesktop();t.search={term:""};t.onEscape=function(){t.search.term="";t.closePopover(t.context)};t.clearSearchTerm=function(){t.search.term=""};t.$watch("search.term",function(e){t.items=o(r,e);t.showClearIcon=""!==e});n.on("start",t.closePopover);t.$on("$destroy",function(){n.off("start",t.closePopover)})}]};return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover \n    class="popover-wrapper" \n    style="min-width: 200px;width: 230px;" \n    align-to="alignTo" \n    position="position" \n    collision="\'flipfit\'" \n    on-close-view="closePopover(event)">\n    <object-add-typeahead>\n        <lui-popover-header>\n            <div class="lui-search">\n                <span class="lui-icon  lui-icon--search  lui-search__search-icon"></span>\n                <input class="lui-search__input" maxlength="255" spellcheck="false" type="text" name="new-test" placeholder="{{ \'ExpressionEditor.SearchPopupPlaceholder\' | translate}}" autocomplete="off"\n                    ng-model="search.term" on-escape="onEscape($event)" qva-focus="autoFocus" object-add-typeahead-input/>\n                <button class="lui-search__clear-button" ng-click="clearSearchTerm()">\n                    <span ng-if="showClearIcon" class="lui-icon  lui-icon--small  lui-icon--close"></span>\n                </button>\n            </div>        \n        </lui-popover-header>\n        <div class="content" object-add-typeahead-menu>\n            <ul class="lui-list">\n                <li class="lui-list__item lui-list__action"                    \n                    ng-repeat="item in items" tid="item"\n                    object-add-typeahead-item="item"\n                    on-select="setSelectedItem(item, context, ctrl, closePopover)">\n                    <span qve-highlight text="{{item.label}}" title="{{item.label}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n                </li>\n            </ul>\n        </div>\n    </object-add-typeahead>\n</lui-popover>'},function(e,t){e.exports="<div ng-transclude></div>"},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){this.container=e.container;this.body=e.body;this.alignAgainst=e.alignAgainst}e.prototype.showTranscluded=function(e){e(function(e){this.container.appendTo(this.body).append(e)}.bind(this))};e.prototype.showContent=function(e){this.container.appendTo(this.body).append(e)};e.prototype.update=function(){var e=this.alignAgainst.offset();this.container.css({top:e.top,left:e.left,width:this.alignAgainst.width(),height:this.alignAgainst.height(),zIndex:1021})};e.prototype.hide=function(){this.container.remove()};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(346),n(190)],r=function(e,t){var n=e.REGEXP_WORD;t.defineMode("qlikviewscript",function(e,t){var i=/[+\-*&=<>]/,r=/[\u0022\u0027\u0060\u00b4[]/;function o(e,t,n){t.tokenize=n;return n(e,t)}function a(e,t){var n;while(null!=(n=e.next()))if(n==t)return false;return false}var s,l;function c(e,t,n){s=e;l=n;return t}function u(e,a){if(e.eatSpace()){s="whitespace";return null}s="any";var l=e.next();if(r.test(l))return o(e,a,f("["===l?"]":l));if(/[[\]{}(),;:]/.test(l))return c(l);if("0"==l&&e.eat(/x/i)){e.eatWhile(/[\da-f]/i);return c("number","number")}if(/[.\d]/.test(l)){e.match(/^\d*(?:\.\d*)?(?:[eE][+-]?\d+)?/);if(!e.eol()){l=e.peek();if(/[A-z]/.test(l))return"normaltext"}return"number"}if("/"===l){if(e.eat("*"))return o(e,a,p);if(e.eat("/")){e.skipToEnd();return"comment"}e.eatWhile(i);return"operator"}if(i.test(l)){e.eatWhile(i);return c(l,"operator")}if("$"===l&&e.match(/^\(=/,false,true))return c("$");if("$"===l&&e.match(/^\((MUST_INCLUDE|INCLUDE)=/i,false,true))return c("$");if("$"===l&&e.match(/^\(/,false,true)){a.tokenize=v;return c("$(")}e.eatWhile(n);var u=e.current();var d=u.toLowerCase();if("rem"===d)return o(e,a,h);if(t.service.isFunction(d)&&e.match(/(^\s*\()/,false,true))return c("function","keyword",d);if(t.service.isField(u))return c("field","field");if(t.service.isVariable(u))return c("variable","variable");if(t.service.isKeyword(d))return c("keyword","keyword");return"normaltext"}function d(e){return e.substr(1,e.length-2)}function f(e){return function(n,i){if(!a(n,e)){i.tokenize=u;if("'"!==e){var r=d(n.current(),e);if(t.service.isField(r))return c("field","field");if(t.service.isVariable(r))return c("variable","variable")}}return c("string","string")}}function p(e,t){var n=false,i;while(i=e.next()){if("/"==i&&n){t.tokenize=u;break}n="*"==i}return c("comment","comment")}function h(e,t){var n;while(n=e.next())if(";"==n){t.tokenize=u;break}return c("comment","comment")}function v(e,n){s="any";var i=e.next();")"==i&&(n.tokenize=u);if(/[(),]/.test(i))return c(i);e.eatWhile(/[^(),]/);var r=e.current();if(!/^\d/.test(r)&&t.service.isVariable(r))return c("variable","variable");return"normaltext"}function g(e,t,n,i){this.type=e;this.prev=t;this.info=n;this.pos=i}function m(e,t,n,i,r){var o=e.cc;b.state=e;b.stream=r;b.marked=null;b.cc=o;while(true){var a=o.length?o.pop():_;if(a(n,i)){while(o.length&&o[o.length-1].lex)o.pop()();if(b.marked)return b.marked;return t}}}var b={state:null,column:null,marked:null,cc:null};function y(){for(var e=arguments.length-1;e>=0;e--)b.cc.push(arguments[e])}function x(){y.apply(null,arguments);return true}function S(e,t){var n=function n(){var i=b.state;i.lexical=new g(e,i.lexical,t,b.stream.pos)};n.lex=true;return n}function w(){var e=b.state;e.lexical.prev&&(e.lexical=e.lexical.prev)}w.lex=true;function q(e){return function t(n){return n==e?x():";"==e?y():x(t)}}function C(e,t){return function n(i){return i==t?x():y(e,n)}}function _(e){if("function"==e)return x(S("qvfunction",l),q("("),C(_,")"),w);if("("===e)return x(C(_,")"));if("$("===e)return x(q("("),C(_,")"));return x()}return{startState:function e(){return{tokenize:u,lastType:null,cc:[],lexical:new g("block")}},token:function e(t,n){var i=n.tokenize(t,n);if("comment"==s)return i;n.lastType=s;return m(n,i,s,l,t)},lineComment:"//"}});return{REGEXP_WORD:n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(51)],r=function(e,t){e.directive("qvCodeareaFunctionTip",function(){return{restrict:"A",require:"qvCodearea",link:function n(i,r,o,a){var s;var l;var c=22;var u=i.$watch(o.qvCodeareaFunctionTip,function(n){function r(){var e=a.codemirror.getCursor();var t=a.codemirror.getTokenAt(e,true);if("comment"!==t.type){var n=0,i=t.state.lexical;while(i&&"qvfunction"!==i.type||0===n&&i.info&&t.string.toLowerCase()===i.info.toLowerCase()){i=i.prev;n++}return i}return}function o(e,t){var n=a.codemirror.getCursor();var i={line:n.line,ch:n.ch};var r,o;while(i.line>=0){r=a.codemirror.getLine(i.line).toLowerCase();o=r.substring(e.pos-t.length,e.pos);if(o===t){i.ch=e.pos-t.length;break}i.line-=1}var s=a.codemirror.charCoords(i);s.top-=a.codemirror.defaultTextHeight()+c;return s}function d(){var i=r();var a=i?i.info:void 0;var l=a?n.service.getFunctionTip(a):void 0;e.$apply(e.$rootScope,function(){f();if(l){var e=o(i,a);g();s=t.show(n.view,{content:l,offset:e})}})}function f(){m();if(s){s.destroy();s=void 0}}function p(){clearTimeout(l);l=setTimeout(d,250)}function h(){f()}var v={Esc:function e(){i.$apply(function(){f()})}};function g(){a.codemirror.addKeyMap(v)}function m(){a.codemirror.removeKeyMap(v)}if(n){a.codemirror.on("blur",h);a.codemirror.on("cursorActivity",p);i.$on("$destroy",function(){a.codemirror.off("blur",h);a.codemirror.off("cursorActivity",p);f()});u()}},true)}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(51),n(693),n(97),n(346)],r=function(e,t,n,i,r,o){var a=100;var s=o.REGEXP_WORD_SEPARATOR;function l(e){var t=e.getTokenAt(e.getCursor()).type;return"keyword"===t||"field"===t||"variable"===t}function c(e,t,n){if(e.somethingSelected()||l(e)&&!n||t.disabled)return null;var i=t.getHints(e);var r=i.list;if(0===r.length)return null;r.length>a&&(r=r.slice(0,a));var o=e.cursorCoords(false!==t.alignWithWord?i.from:null);return{from:i.from,to:i.to,hints:r,selectedHint:n?n.selectedHint:0,cursorPos:o}}function u(e,n){this.dialogHandle=null;this.dialogOptions={};this.state=null;this.options=n;this.cm=e;this.currentOptions=null;this.once=null;this.closingOnBlur=null;this.bound={cursorActivity:this.cursorActivity.bind(this),pick:this.pick.bind(this),close:this.close.bind(this),onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),choose:this.choose.bind(this),showHint:this.showHint.bind(this)};function i(){return 8}var r=this;this.ourMap={Up:function e(){r.changeActive(r.state.selectedHint-1);t.$rootScope.$apply()},Down:function e(){r.changeActive(r.state.selectedHint+1);t.$rootScope.$apply()},PageUp:function e(){r.changeActive(r.state.selectedHint-i());t.$rootScope.$apply()},PageDown:function e(){r.changeActive(r.state.selectedHint+i());t.$rootScope.$apply()},Home:function e(){r.changeActive(0);t.$rootScope.$apply()},End:function e(){r.changeActive(r.state.hints.length-1);t.$rootScope.$apply()},Enter:this.bound.pick,Tab:this.bound.pick,Esc:this.bound.close}}u.prototype.cursorActivity=function(){var e=t.getService("$timeout");e.cancel(this.once);this.once=null;var n=this.cm.getCursor();n.line!==this.startLine||this.cm.somethingSelected()?this.close():this.once=e(this.bound.showHint,70)};u.prototype.choose=function(e){this.changeActive(e);this.pick()};u.prototype.pick=function(){this.cm.replaceRange(this.state.hints[this.state.selectedHint].value,this.state.from,this.state.to);this.cm.focus();this.close();t.$apply(t.$rootScope)};u.prototype.onBlur=function(){var e=t.getService("$timeout");this.closingOnBlur=e(this.bound.close,300)};u.prototype.onFocus=function(){var e=t.getService("$timeout");e.cancel(this.closingOnBlur);this.closingOnBlur=null};u.prototype.changeActive=function(e){if(!this.state)return;e=Math.max(0,Math.min(e,this.state.hints.length-1));if(this.state.selectedHint===e)return;this.state.selectedHint=e};u.prototype.close=function(){var e=t.getService("$timeout");e.cancel(this.once);e.cancel(this.startTimeout);if(!this.dialogHandle)return;this.dialogHandle.destroy();this.dialogHandle=null;this.cm.removeKeyMap(this.ourMap);this.cm.off("cursorActivity",this.bound.cursorActivity);this.cm.off("blur",this.bound.onBlur);this.cm.off("focus",this.bound.onFocus);this.cm.off("scroll",this.bound.close);this.state=null;t.$apply(t.$rootScope)};u.prototype.open=function(){this.dialogHandle=n.show(this.options.view,this.dialogOptions);this.startLine=this.cm.getCursor().line;this.cm.addKeyMap(this.ourMap);this.cm.on("cursorActivity",this.bound.cursorActivity);this.cm.on("blur",this.bound.onBlur);this.cm.on("focus",this.bound.onFocus);this.cm.on("scroll",this.bound.close)};u.prototype.showHint=function(){var e=this.state;this.state=c(this.cm,this.options,e);if(!this.state){e&&this.close();return}this.state.choose=this.bound.choose;this.dialogOptions.state=this.state;e||this.open()};u.prototype.start=function(){var e=t.getService("$timeout");if(this.state)return;this.startTimeout&&e.cancel(this.startTimeout);this.startTimeout=e(this.bound.showHint,500)};var d={keyword:{translation:"Common.Keyword",allowQuote:false},variable:{translation:"Common.Variable",allowQuote:true},field:{translation:"Common.Field",allowQuote:true},function:{translation:"Common.Function",allowQuote:false}};function f(e){return"["+e.replace(/\]/g,"]]")+"]"}function p(e,t){var n={};var i=[];var r=e.toLowerCase();var o="["===e[0];function a(e){"string"===typeof e&&(e={text:e});var t=e.text;if(o){if(!d[e.type]||!d[e.type].allowQuote)return;t=f(t)}if(!t||0!==t.toLowerCase().indexOf(r))return;if(!n[t]){n[t]={text:e.text,types:[],value:e.value||t};i.push(n[t])}d[e.type]&&n[t].types.push({id:e.type,key:d[e.type].translation})}function l(e,t){var n=e.text.toLowerCase();var i=t.text.toLowerCase();return n===i?0:n>i?1:-1}if(!o&&s.test(e)||/^\d+$/.test(e))return[];if(""!==e){t.forEach(a);i.sort(l)}1===i.length&&e===i[0].value&&(i=[]);return i}function h(e,t){var n=e.getCursor();var i=e.getTokenAt(n);var r=p(i.string,t);return{list:r,from:{line:n.line,ch:i.start},to:{line:n.line,ch:i.end}}}t.directive("qvCodeareaAutocomplete",function(){return{restrict:"A",require:"qvCodearea",link:function t(n,o,a,s){var l=[37,38,39,40,33,34,27];var c=n.$watch(a.qvCodeareaAutocomplete,function(t){function o(e){return h(e,t.service.getAutocompleteList())}function a(){f.start()}function d(t,n){-1===e.inArray(n.which,l)&&a()}var f;if(t){t.view||(t.view=i);t.getHints||(t.getHints=o);f=new u(s.codemirror,t);var p=f.close.bind(f);s.codemirror.on("focus",a);s.codemirror.on("keyup",d);r.on("end",p);n.$on("$destroy",function(){s.codemirror.off("focus",a);s.codemirror.off("keyup",d);r.off("end",p);f.close()});c()}},true)}}});return{getCompletions:p}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(694),n(11)],r=function(e,t){function n(e,t,n){var i=n.bottom+e.height<=t.height;var r=i?n.bottom:n.top-e.height;var o=Math.max(0,n.left+e.width-t.width);var a=n.left-o;return{top:r,left:a}}function i(e,t){e.$$postDigest(function(){e.$$postDigest(t)})}return{scope:{state:"="},template:e,controller:["$scope","$element",function(e,r){var o=r.find(".qv-autocomplete-container");var a=t(window);function s(){var t={width:a.width(),height:a.height()};var i=o[0].getBoundingClientRect();var r=e.state.cursorPos;var s=n(i,t,r);o.css({left:s.left,top:s.top})}e.$watch("state.hints.length",function(){i(e,s)})}]}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-autocomplete-container">\n\t<ul class="codearea-autocomplete-hints">\n\t\t<li ng-repeat="item in state.hints track by item.text"\n\t\t\tqva-scroll-into-view="{ scroll: state.selectedHint == $index, scrollSelector: \'.codearea-autocomplete-hints\' }"\n\t\t\tclass="codearea-autocomplete-hint"\n\t\t\tng-class="{ \'codearea-autocomplete-hint-active\': state.selectedHint == $index }"\n\t\t\tng-mouseover="state.selectedHint = $index;"\n\t\t\tqva-activate="state.choose( $index )">\n\n\t\t\t<div class="codearea-autocomplete-hint-text">{{item.text}}</div>\n\t\t\t<div ng-repeat="type in item.types track by $index"\n\t\t\t\t class="codearea-autocomplete-hint-type {{type.id}}"\n\t\t\t\t q-translation="{{type.key}}"></div>\n\t\t</li>\n\t</ul>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(190)],r=function(e){var t=e.Pos;function n(e,n,i,r){this.atOccurrence=false;this.cm=e;r||"string"!=typeof n||(r=false);i=i?e.clipPos(i):t(0,0);this.pos={from:i,to:i};n||(n="");if("string"!=typeof n){n.global||(n=new RegExp(n.source,n.ignoreCase?"ig":"g"));this.matches=function(i,r){var o,a,s;if(i){n.lastIndex=0;o=e.getLine(r.line).slice(0,r.ch);a=n.exec(o);s=0;while(a){s+=a.index+1;o=o.slice(s);n.lastIndex=0;var l=n.exec(o);if(!l)break;a=l}s--}else{n.lastIndex=r.ch;o=e.getLine(r.line);a=n.exec(o);s=a&&a.index}if(a&&a[0])return{from:t(r.line,s),to:t(r.line,s+a[0].length),match:a}}}else{r||(n=n.toLowerCase());var o=r?function(e){return e}:function(e){return e.toLowerCase()};var a=n.split("\n");1==a.length?n.length?this.matches=function(i,r){var a=o(e.getLine(r.line)),s=n.length,l;if(i?r.ch>=s&&-1!=(l=a.lastIndexOf(n,r.ch-s)):-1!=(l=a.indexOf(n,r.ch)))return{from:t(r.line,l),to:t(r.line,l+s)}}:this.matches=function(){}:this.matches=function(n,i){var r=i.line,s=n?a.length-1:0,l=a[s],c=o(e.getLine(r));var u=n?c.indexOf(l)+l.length:c.lastIndexOf(l);if(n?u>=i.ch||u!=l.length:u<=i.ch||u!=c.length-l.length)return;for(;;){if(n?!r:r==e.lineCount()-1)return;c=o(e.getLine(r+=n?-1:1));l=a[n?--s:++s];if(s>0&&s<a.length-1){if(c!=l)return;continue}var d=n?c.lastIndexOf(l):c.indexOf(l)+l.length;if(n?d!=c.length-l.length:d!=l.length)return;var f=t(i.line,u),p=t(r,d);return{from:n?p:f,to:n?f:p}}}}}n.prototype={findNext:function e(){return this.find(false)},findPrevious:function e(){return this.find(true)},find:function e(n){var i=this,r=this.cm.clipPos(n?this.pos.from:this.pos.to);function o(e){var n=t(e,0);i.pos={from:n,to:n};i.atOccurrence=false;return false}for(;;){if(this.pos=this.matches(n,r)){this.pos.from&&this.pos.to||window.console.log(this.matches,this.pos);this.atOccurrence=true;return this.pos.match||true}if(n){if(!r.line)return o(0);r=t(r.line-1,this.cm.getLine(r.line-1).length)}else{var a=this.cm.lineCount();if(r.line==a-1)return o(a);r=t(r.line+1,0)}}},from:function e(){if(this.atOccurrence)return this.pos.from},to:function e(){if(this.atOccurrence)return this.pos.to},replace:function n(i){if(!this.atOccurrence)return;var r=e.splitLines(i);this.cm.replaceRange(r,this.pos.from,this.pos.to);this.pos.to=t(this.pos.from.line+r.length-1,r[r.length-1].length+(1==r.length?this.pos.from.ch:0))}};function i(e,t,i,r){return new n(e,t,i,r)}return{getSearchCursor:i}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(190),n(1093)],r=function(e,t){var n="\r\n";e.directive("qvCodeareaExposedContextApi",["$parse","$timeout",function(e,i){return{require:["qvCodearea","qvCodeareaExposedContextApi"],link:function t(n,i,r,o){var a=o[0];var s=o[1];s._connectCodeArea(a);var l=e(r.qvCodeareaExposedContextApi);l.assign(n,s);n.$on("$destroy",function(){l.assign(n,void 0);s._connectCodeArea(void 0)})},controller:function e(){var r;function o(e){r=e}function a(){var e=r.codemirror.getTokenAt(r.codemirror.getCursor());var t=0,n=e.state.lexical;while(n&&"qvfunction"!==n.type||0===t&&n.info&&e.string.toLowerCase()===n.info.toLowerCase()){n=n.prev;t++}return!!n&&n.info}function s(){r.focus()}function l(){r.codemirror.undo()}function c(){r.codemirror.redo()}function u(){t.commands.toggleComment(r.codemirror);s()}function d(){r.codemirror.indentSelection("add");s()}function f(){r.codemirror.indentSelection("subtract");s()}function p(){return r.codemirror.options.readOnly}function h(e){var t=r.codemirror.getDoc().getSelection();var n=e(t);r.codemirror.replaceSelection(n)}function v(e){r.codemirror.setCursor(r.codemirror.getCursor("end"));var t=r.codemirror.getCursor().line,i=r.codemirror.getCursor().ch,o=r.codemirror.getLine(t).length;if(o>0)if(i===o){r.codemirror.setCursor(t,o);r.codemirror.replaceSelection(n)}else{r.codemirror.setCursor(r.codemirror.lineCount(),0);e=n+n+e}r.codemirror.setCursor(r.codemirror.getCursor("end"));r.codemirror.replaceSelection(e);r.focus()}function g(e){r.codemirror.replaceSelection(e,"end");r.focus()}function m(e){i(function(){var t=r.codemirror.lineCount();e<t?r.codemirror.setCursor(e-1,0):r.codemirror.setCursor(t-2,0);r.focus()})}function b(e){return r.codemirror.getCursor(e)}function y(e,t,n){r.codemirror.setCursor(e,t,n)}function x(){return r.codemirror.lineCount()}var S={applyToSelection:h,focus:s,undo:l,redo:c,comment:u,indent:d,outdent:f,insertCode:v,replaceSelection:g,getFunctionNameUnderCursor:a,gotoLine:m,isReadOnly:p,getCursor:b,setCursor:y,lineCount:x,_connectCodeArea:o,codemirror:void 0};Object.defineProperty(S,"canUndo",{get:function e(){return r&&r.codemirror&&r.codemirror.historySize().undo>0},enumerable:true});Object.defineProperty(S,"canRedo",{get:function e(){return r&&r.codemirror&&r.codemirror.historySize().redo>0},enumerable:true});return S}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48)],r=function(e,t){function n(e,t){var n=e.length;var i=t.length;var r;var o=Math.min(e.length,t.length);for(r=0;r<o;r++)if(e.charAt(r)!==t.charAt(r))break;if(r===e.length&&r===t.length)return;var a=r;var s;var l;for(r=0;r<o;r++){s=n-r-1;l=i-r-1;if(s<a||l<a)break;if(e.charAt(n-r-1)!==t.charAt(i-r-1))break}var c=n-r-1;var u=i-r-1;return{start:a,targetRange:{from:a,to:c+1},sourceRange:{from:a,to:u+1}}}t.directive("qvCodeareaExposedTouchApi",["$parse","$timeout",function(t,i){return{require:["qvCodearea","qvCodeareaExposedTouchApi"],link:function e(n,r,o,a){var s=a[0];var l=a[1];l._connectCodeArea(s);var c=t(o.qvCodeareaExposedTouchApi);c.assign(n,l);n.$on("$destroy",function(){c.assign(n,void 0);i(function(){l._connectCodeArea(void 0)})})},controller:["$scope",function(t){var r,o;function a(e){r=e}function s(e,t){r.codemirror.scrollTo(t,e)}function l(e){r.setCustomFocusFn(e)}function c(n){function i(){var t=e(r.codemirror.getScrollerElement());n(t.scrollTop(),t.scrollLeft())}r.codemirror.on("scroll",i);t.$on("$destroy",function(){r.codemirror.off("scroll",i);n=void 0})}function u(e){function n(){var t={anchor:r.codemirror.indexFromPos(r.codemirror.getCursor("anchor")),head:r.codemirror.indexFromPos(r.codemirror.getCursor("head"))};e(r.codemirror.getValue(),t)}function i(){o||n()}n();r.codemirror.on("change",i);t.$on("$destroy",function(){r.codemirror.off("change",i);e=void 0})}function d(n){t.$watch(function(){return String(r.codemirror.lineCount()).length},function(){i(function(){var t=e(r.codemirror.getGutterElement()).outerWidth();var i={top:0,left:t,bottom:0,right:0};n(i)})});t.$on("$destroy",function(){n=void 0})}function f(e,t,n){r&&r.codemirror.setSelection(e,t,n)}function p(e,t){var i=r.codemirror.getValue("\n");var a=n(i,t);if(a){var s=t.substring(a.sourceRange.from,a.sourceRange.to);var l=r.codemirror.posFromIndex(a.targetRange.from);var c=r.codemirror.posFromIndex(a.targetRange.to);o=true;r.codemirror.replaceRange(s,l,c);o=false}}function h(){r.cssClasses["qv-codearea-disable-selection"]=true}function v(){r.cssClasses["qv-codearea-disable-selection"]=false}var g={_connectCodeArea:a,scrollTo:s,onScroll:c,setOverlayFocuser:l,replicateSelection:f,replicateContent:p,onNewContent:u,onResize:d,disableSelections:h,restoreSelections:v};return g}]}}]);return{diff:n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(347)],r=function(e,t){e.directive("qvCodeareaExposedSearchApi",["$parse",function(e){return{require:"qvCodearea",link:function n(i,r,o,a){var s=e(o.qvCodeareaExposedSearchApi);s.assign(i,t.createSingleCodeareaSearcher(a.codemirror));i.$on("$destroy",function(){s.assign(i,void 0)})},controller:function e(){}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){e.directive("qvCodeareaAccelerators",function(){return{require:["qvCodearea","qvCodeareaExposedContextApi"],link:function t(n,i,r,o){var a=o[0];var s=o[1];var l={keyCode:void 0,ctrlKey:void 0,shiftKey:void 0};function c(e,t){return e.keyCode===t.keyCode&&e.ctrlKey===(t.ctrlKey||false)&&e.shiftKey===(t.shiftKey||false)}function u(t,i){var o=n.$eval(r.qvCodeareaAccelerators);for(var a in o){var u=o[a];if(c(i,u)&&(!u.previous||c(l,u.previous))){e.$apply(e.$rootScope,function(){u.fn(s)});l={keyCode:void 0,ctrlKey:void 0,shiftKey:void 0};i.preventDefault();return}}l={keyCode:i.keyCode,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey}}a.codemirror.on("keydown",u);n.$on("$destroy",function(){a.codemirror.off("keydown",u)})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48)],r=function(e,t){function n(t){var n=e("<div class='qv-codearea-breakpoint-marker'><span class='lui-icon lui-icon--minus'></span></div>");n.data("breakpoint",t);return n[0]}function i(t,n){if(n.enabled){e(t).addClass("qv-codearea-breakpoint-marker-enabled");e(t).removeClass("qv-codearea-breakpoint-marker-disabled")}else{e(t).addClass("qv-codearea-breakpoint-marker-disabled");e(t).removeClass("qv-codearea-breakpoint-marker-enabled")}}t.directive("qvCodeareaBreakpoints",function(){return{require:"qvCodearea",link:function r(o,a,s,l){var c;function u(e){if(e){c=e;var t=l.codemirror.getDoc().lineCount();for(var r=0;r<t;r++){var o=r+1;var a=e[o];var s=l.codemirror.lineInfo(r).gutterMarkers;var u=s&&s["qv-codearea-breakpoint"];if(a){if(!u){u=n(a);l.codemirror.setGutterMarker(r,"qv-codearea-breakpoint",u)}i(u,a)}else u&&l.codemirror.setGutterMarker(r,"qv-codearea-breakpoint",null)}}}o.$watch(s.qvCodeareaBreakpoints,u);o.$watch(s.qvCodeareaBreakpoints,u,true);function d(e){var t=l.codemirror.getDoc().lineCount();for(var n=e.from.line;n<t;n++){var i=l.codemirror.lineInfo(n).gutterMarkers;if(i&&i["qv-codearea-breakpoint"])return true}return false}function f(e){return e.text.length!==e.removed.length}function p(n,i){!l.supressChangeEvent&&f(i)&&d(i)&&t.$apply(t.$rootScope,function(){var t=c;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var i=l.codemirror.getDoc().lineCount();for(var r=0;r<i;r++){var o=r+1;var a=l.codemirror.lineInfo(r).gutterMarkers;var s=a&&a["qv-codearea-breakpoint"];if(s){var u=e(s);var d=u.data("breakpoint");d.lineNbr=o;t[o]=d}}})}function h(e,t){l.disabled||o.$apply(function(){var e=t+1;var n=c[e];n?delete c[e]:c[e]={enabled:true,lineNbr:e}})}l.codemirror.on("change",p);l.codemirror.on("gutterClick",h);var v={F9:function e(){h(l.codemirror,l.codemirror.getCursor().line)}};l.codemirror.addKeyMap(v);o.$on("$destroy",function(){l.codemirror.off("change",p);l.codemirror.off("gutterClick",h);l.codemirror.removeKeyMap(v)})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){e.directive("qvCodeareaDebugLocation",function(){return{require:"qvCodearea",link:function e(t,n,i,r){var o;t.$watch(i.qvCodeareaDebugLocation,function(e){if(e){var t=r.codemirror.lastLine()+1;var n=e.lineNbr;n>t&&(n=t);if(o){r.codemirror.removeLineClass(o,"background","qv-codearea-current-debug-line");r.codemirror.removeLineClass(o,"background","qv-codearea-current-debug-line-error")}if(n>0&&n<=t){r.codemirror.addLineClass(n-1,"background","qv-codearea-current-debug-line");e.errorMessage&&r.codemirror.addLineClass(n-1,"background","qv-codearea-current-debug-line-error");r.codemirror.scrollIntoView({line:n-1,ch:0},200);o=r.codemirror.getLineHandle(n-1)}}},true)}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){e.directive("qvCodeareaErrors",function(){return{require:"qvCodearea",link:function e(t,n,i,r){var o=[];t.$watch(i.qvCodeareaErrors+".content",function(e){if(e){var t;for(t=0;t<o.length;t++)o[t].clear();for(t=0;t<e.length;t++){var n=e[t];var i={line:n.qLineInTab,ch:n.qColInLine},a={line:n.qLineInTab,ch:n.qColInLine+n.qErrLen},s=r.codemirror.markText(i,a,{className:"cm-servererror"});o.push(s)}}},true);t.$on("$destroy",function(){o=[]})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(704)],r=function(e,t){e.directive("qvCodeareaLimit",function(){return{require:"qvCodearea",link:function e(n,i,r,o){function a(e,i){var o=n.$eval(r.qvCodeareaLimit);o&&o>0&&t(e,i,o)}o.codemirror.on("beforeChange",a);n.$on("$destroy",function(){o.codemirror.off("beforeChange",a)})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e,t,n){var i=t.text.join("\n");var r=e.getRange(t.from,t.to).length;var o=i.length;var a=o-r;var s=e.getValue().length;if(s>=n&&0===r)t.cancel();else if(s+a>n){o=Math.max(0,n-s+r);i=i.substr(0,o);t.update(null,null,i.split("\n"))}}return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(11),n(163),n(54)],r=function(e,t,n,i){var r,o,a;function s(e,t){var n=[],i,a,s;for(a=0;a<e.length;a++){i=e[a].split(" ");for(s=0;s<i.length;s++)if(i[s].toLowerCase()===t.toLowerCase()){if(!r){r=i.length>1;o=s>0}n.push(e[a])}}return n}function l(e,t,n){if(" "===n.string){var i=e.getTokenAt({ch:n.end+1,line:t.line});if(i.string.length>1)return i}return n}function c(e,t,n,i){var r=i?t.end-(t.string.length+1):t.end+2,o=e.getTokenAt({ch:r,line:n.line});return o}function u(e,t,n,i){var r={left:t.pageX,top:t.pageY};var o=e.coordsChar(r,"window");var a=e.getTokenAt(o);return f(e,a,n,i)}function d(e,t,n,i){var r=e.getTokenAt(e.getCursor());return f(e,r,n,i)}function f(e,t,u,d){r=false;o=false;u=u||"scriptsyntax";var f=n.path+u+".",p=[],h,v,g;if("keyword"!==t.type&&"function"!==t.type)return false;t=l(e,e.getCursor(),t);p=s(i.pluck(d.getAutocompleteList(),"text"),t.string);if(r){v=c(e,t,e.getCursor(),o);g=s(p,v.string);h=g.length>0&&v.string!==t.string?o?v.string+"_"+t.string:t.string+"_"+v.string:t.string}else h=t.string;f+=h;/firefox/.test(window.navigator.userAgent.toLocaleLowerCase())&&a&&a.close();a=window.open(f,"__qlikviewhelp");return true}e.directive("qvCodeareaHelpMode",["$parse",function(e){return{require:"qvCodearea",link:function n(i,r,o,a){var s;var l=i.$watch(o.qvCodeareaHelpModeOptions,function(n){l();function c(t){if(s){t.preventDefault();var r=u(a.codemirror,t,n.syntax,n.service);r&&i.$apply(function(){e(o.qvCodeareaHelpMode).assign(i,false)})}}function f(e,t){if((72===t.keyCode||104===t.keyCode)&&t.ctrlKey){t.preventDefault();d(a.codemirror,t,n.syntax,n.service)}}i.$watch(o.qvCodeareaHelpMode,function(e){s=e;a.cssClasses["qv-codearea-help-mode"]=e});t(r).on("click",c);a.codemirror.on("keydown",f);i.$on("$destroy",function(){t(r).off("click",c);a.codemirror.off("keydown",f)})})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){e.directive("qvCodeareaTouchOverlay",function(){return{restrict:"E",replace:true,scope:{codeareaTouchApi:"=",enabled:"=",helpMode:"="},template:'<div class="qv-codearea-touch-overlay-container" ng-style="containerStyle"><textarea class="qv-codearea-touch-overlay" autocorrect="off" autocapitalize="off" autocomplete="off" spellcheck="false" wrap="off"></textarea></div>',link:function e(t,n){var i=n.find("textarea");var r=false;t.containerStyle={};function o(e){var n=/iPad|iPhone|iPod/.test(navigator.userAgent);n&&i.css("padding-left","1px");e.disableSelections();t.$on("$destroy",function(){e.restoreSelections()});e.onNewContent(function(e,t){i.val(e);if(i[0]!==document.activeElement)return;if(i[0].selectionStart!==t.anchor||i[0].selectionEnd!==t.head){i[0].selectionStart=t.anchor;i[0].selectionEnd=t.head}});e.setOverlayFocuser(function(){});e.onResize(function(e){t.containerStyle.left=e.left});e.onScroll(function(e,t){i.scrollTop(e);i.scrollLeft(t);document.activeElement===i[0]&&(""===i[0].style.textShadow?i[0].style.textShadow="rgba(0,0,0,0) 0 0 0":i[0].style.textShadow="")});i.on("scroll",function(){e.scrollTo(i.scrollTop(),i.scrollLeft())});i.on("input",function(t){var n=i.val();e.replicateContent(t,n)});function o(e,t){var n=e.substring(0,t).split("\n");var i=n.length-1;var r=n[n.length-1].length;return{line:i,ch:r}}function a(){var t=i.val();var n=i[0].selectionStart;var r=i[0].selectionEnd;var a=o(t,n);var s=o(t,r);e.replicateSelection(a,s,{scroll:false})}var s;var l;function c(){if(!r){if(i[0].selectionStart!==s||i[0].selectionEnd!==l){s=i[0].selectionStart;l=i[0].selectionEnd;a()}setTimeout(c,200)}}setTimeout(c,200)}t.$watch("helpMode",function(e){e?n.hide():n.show()});var a=t.$watch("codeareaTouchApi",function(e){if(e){o(e);a()}});t.$on("$destroy",function(){r=true;i=void 0})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){e.directive("qvCodeareaBlockLargePastes",function(){var e=function e(t){if(""===t||Number.isNaN(+t))return 1e6;return t};var t=function e(t){return t.originalEvent.clipboardData?t.originalEvent.clipboardData.getData("text/plain").length:window.clipboardData.getData("Text").length};return{restrict:"A",controller:["$scope","$element","$attrs",function(n,i,r){i.find("textarea").on("paste",function(n){t(n)>e(r.qvCodeareaBlockLargePastes)&&n.preventDefault()});n.$on("$destroy",function(){i.find("textarea").off("paste")})}]}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48)],r=function(e,t){t.directive("qvCodeareaExposedGutterWidth",["$parse","$timeout",function(t,n){return{require:"qvCodearea",link:function i(r,o,a,s){var l=t(a.qvCodeareaExposedGutterWidth);r.$watch(function(){return String(s.codemirror.lineCount()).length},function(){var t=e(s.codemirror.getGutterElement()).outerWidth();l.assign(r,t);n(function(){var t=e(s.codemirror.getGutterElement()).outerWidth();l.assign(r,t)})});r.$on("$destroy",function(){l.assign(r,void 0)})},controller:function e(){}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(11),n(190)],r=function(e,t,n){var i="CodeMirror-text-in-composition";var r={inclusiveLeft:true,inclusiveRight:true,className:i};function o(e){var t,n,r,o;n=e.getAllMarks();for(r=0,o=n.length;r<o;r++){t=n[r];null!=t&&t.className===i&&t.clear()}return true}var a,s,l,c,u,d,f,p,h,v,g;function m(e,i){var m=i;e.options.enableCompositionMod=true;u=function t(){d&&d();e.display.input.blur();e.display.input.focus()};c=function t(n){f=n.char;d&&d();if(e.display.inCompositionMode){var i=e.getCursor();var r=e.display.compositionHead;var o=e.charCoords(i).left-e.charCoords(r).left;o+=void 0!==f?30:1;e.display.input.style.width=o+"px"}};a=function t(){if(e.options.enableCompositionMod){g.disabled=true;e.display.inCompositionMode=true;h=m.offset();e.display.inputDiv.classList.add("CodeMirror-input-wrapper");e.display.inputDiv.classList.add("in-composition");e.setOption("readOnly",true);e.somethingSelected()&&e.replaceSelection("");e.display.compositionHead=e.getCursor();void 0===f?e.display.input.value="":" "===f&&s({data:" "})}};s=function t(n){var i,o;if(!e.options.enableCompositionMod||!e.display.inCompositionMode)return;var a=e.display.compositionHead;if(e.display.textMarkerInComposition){i=e.display.textMarkerInComposition.find();if(i){e.replaceRange(n.data,a,i.to);e.display.textMarkerInComposition.clear();e.display.textMarkerInComposition=void 0}}else e.replaceRange(n.data,a,a);var s=e.getCursor();o=e.charCoords(s).left-e.charCoords(a).left;void 0===f&&(o+=1);e.display.input.style.width=o+"px";e.display.textMarkerInComposition=e.markText(a,s,r);p()};function b(){var e=window.navigator.userAgent;var t=e.indexOf("MSIE ");return t>0||!!navigator.userAgent.match(/Trident.*rv:11\./)}l=function t(i){var r;if(!e.options.enableCompositionMod||!e.display.inCompositionMode)return;b()?"\b"===f&&s(i):s(i);e.display.inCompositionMode=false;e.display.compositionHead=void 0;null!=(r=e.display.textMarkerInComposition)&&r.clear();e.display.textMarkerInComposition=void 0;e.setOption("readOnly",false);e.display.inputDiv.classList.remove("in-composition");e.display.inputDiv.classList.remove("CodeMirror-input-wrapper");o(e);d=function t(){g.disabled=false;n.off(e.display.input,"input",d);if(!e.display.inCompositionMode){e.display.input.value="";e.display.input.style.width="0px";d=void 0}};n.on(e.display.input,"input",d)};p=function t(){if(e.display.inCompositionMode){var n=e.charCoords(e.display.compositionHead).top-h.top;void 0!==f&&(n-=1);e.display.inputDiv.style.top=n+"px";var i=e.charCoords(e.display.compositionHead).left-h.left;e.display.inputDiv.style.left=i+"px"}};v=function n(i){var r=t(e.display.scroller);r.scrollTop(r.scrollTop()-i.wheelDelta)}}e.directive("qvCodeareaCompositionEvent",function(){return{restrict:"A",require:"qvCodearea",link:function e(i,r,o,f){m(f.codemirror,r);var h=f.codemirror.display.input;var b=i.$watch(o.qvCodeareaAutocomplete,function(e){g=e;b()});b=i.$watch("codeareaTouchApi",function(e){if(e){e.onResize(function(){p()});e.onScroll(function(){p()});b()}});t(window).on("resize",p);n.on(f.codemirror,"mousedown",u);n.on(h,"keydown",c);n.on(h,"compositionstart",a);n.on(h,"compositionupdate",s);n.on(h,"compositionend",l);n.on(h,"mousedown",u);n.on(h,"mousewheel",v);i.$on("$destroy",function(){t(window).off("resize",p);n.off(f.codemirror,"mousedown",u);n.off(h,"compositionstart",a);n.off(h,"keydown",c);n.off(h,"compositionupdate",s);n.off(h,"compositionend",l);n.off(h,"input",d);n.off(h,"mousedown",u);n.off(h,"mousewheel",v)})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(711)],r=function(e,t){e.directive("qvExpandableList",function(){return{restrict:"A",template:t,controller:["$scope",function(e){e.expandClicked=function(e){e.expanded=!e.expanded;"undefined"!=typeof e.state&&(e.expanded?e.state["sectionExpanded"]=true:e.state["sectionExpanded"]=false)}}]}});e.directive("includeSection",function(){return{restrict:"A",controller:["$scope","$element","$compile",function(e,t,n){t.append(n(e.item.template)(e))}]}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-expandable-list-component" tcl="expandable-list">\n\t<ul class="qv-expandable-list">\n\t\t<li ng-repeat="item in items track by item.key" tid="section {{item.key}}">\n\t\t\t<div class="qv-expandable-list-header" qva-activate="expandClicked(item)" ng-class="{ \'expanded\': item.state.stateExpanded }" tid="{{item.key}}">\n                <i class="toggle-expand  lui-icon  {{ item.expanded ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\' }}"></i>\n\t\t\t\t<span class="text" q-translation="{{item.translation}}"></span>\n\t\t\t</div>\n\t\t\t<div class="qv-expandable-list-content" ng-if="item.expanded">\n\t\t\t\t<div include-section></div>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(91),n(713),n(97),n(714),n(191)],r=function(e,t,n,i,r,o,a){t.directive("qvInformationArea",function(){return{scope:{info:"=",app:"=",mode:"="},restrict:"E",replace:true,template:i,link:function t(i,s){i.nbrOfStatements=0;i.exprValidator=null;i.state={expanded:false,autoExpanded:false};var l="validating";var c="valid";var u="invalid";var d=s.find(".text-column"),f=e("#expression-editor-content");function p(){setTimeout(function(){d.css({"max-height":f.height()/2})})}function h(){var e=0;""!==i.info.translatedErrorMgs&&e++;""!==i.info.extraErrorMsg&&e++;""!==i.info.expandedExpr&&e++;e>1&&(i.state.autoExpanded=true);i.nbrOfStatements=e}function v(e){i.info.status=e.valid?c:u;i.info.errorMsg=e.valid?"Common.OK":"Expression.Validation.InvalidExpression";i.info.translatedErrorMgs=n.get(i.info.errorMsg);i.info.extraErrorMsg="";if(e.data)if(e.data.bad.length>0){var t=e.data.bad.map(function(e){return e.name});i.info.errorMsg={id:"Expression.Validation.BadFieldName",value:[t.join(", ")]}}else e.data.error&&(i.info.extraErrorMsg=e.data.error);h()}i.$watch("info.codeArea.content",function(e){i.info.status=l;o.getExpandedExpression(i.app,e).then(function(t){if(null==i.exprValidator){i.exprValidator=new a.ExpressionValidator(i.app,i.mode);i.exprValidator.Update.bind(function(e){v(e)})}i.info.expr=e;i.info.expandedExpr=t.qExpandedExpression;i.info.translatedErrorMgs=n.get(i.info.errorMsg);i.exprValidator.validate(i.info.expandedExpr,i.labels)})});i.expandCollapse=function(){i.state.expanded=!i.state.expanded};p();r.on("end.ee-update-size",p);i.$on("$destroy",function(){r.off("end.ee-update-size",p);i.exprValidator=null})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="ia-wrapper" ng-class="{ \'collapsed\' : state.expanded, \'ia-light\' : nbrOfStatements <= 1 }">\r\n    <div class="icon-column">\r\n        <span class="lui-icon  lui-icon--info" aria-hidden="true"></span>\r\n    </div>\r\n    <div class="text-column">\r\n        <div class="ia-text">\r\n           \r\n            <div class="hint" ng-if="info.translatedErrorMgs !== \'\'">\r\n                <span>{{info.translatedErrorMgs}}</span>\r\n            </div>\r\n            <div class="hint" ng-if="info.extraErrorMsg !== \'\'">\r\n                <span>{{info.extraErrorMsg}}</span>\r\n            </div>\r\n            <div class="evaluated" ng-if="info.expandedExpr !== \'\'">\r\n                {{info.expandedExpr}}\r\n            </div>\r\n               \r\n        </div>\r\n    </div>\r\n    <div class="action-column">\r\n        <span class="lui-icon  lui-icon--arrow-down" \r\n              ng-class="{ \'lui-icon--arrow-down\' : !state.expanded, \'lui-icon--arrow-up\' : state.expanded }" \r\n              aria-hidden="true"\r\n              ng-if="nbrOfStatements > 1"\r\n              ng-click="expandCollapse($event)">\r\n        </span>\r\n    </div>    \r\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(93),n(89)],r=function(e,t){function n(n){return n?t.resolve(n.enigmaModel):e.getApp()}var i={};i.getExpandedExpression=function(e,t){return n(e).then(function(e){return e.engineApp.expandExpression(t)}).catch(function(e){console.log("error"+e)})};return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="expression-input" tcl="expression-input">\n\t\n\t<label q-translation="{{labelTranslation}}"></label>\n\n\t<div class="lui-input-group">\n\n\t\t<input class="lui-input lui-input-group__item lui-input-group__input"\n\t\t\ttype="text"\n\t\t\tspellcheck="false"\n\t\t\tmaxlength="{{maxLength}}"\n\t\t\tng-class="{ \'lui-invalid\': !isValidExpression, \'force-editor\': shouldForceEditInExpressionEditor() }"\n\t\t\tng-model="expression"\n\t\t\tng-model-options="{ updateOn: \'blur\', allowInvalid: true }"\n\t\t\tng-change="onExpressionChange()"\n\t\t\tqva-activate="onExpressionActivate($event)" \n\t\t\tdata-tid="label-exp-input" />\n\n\t\t<button class="lui-button lui-input-group__item lui-input-group__button" \n\t\t\tq-title-translation="Tooltip.OpenExpressionEditor"\n\t\t\tqva-activate="openExpressionDialog( $event )">\n\n\t\t\t<span class="lui-button__icon lui-icon lui-icon--expression edit-expression" ng-class="{\'active\': isExpression}"></span>\n\t\t</button>\n\t\t\n\t</div>\n\n\t<div ng-if="shouldForceEditInExpressionEditor()" class="hint" q-translation="properties.editInExpressionEditor"></div>\n\n</div>'},function(e,t){e.exports='<div class="description-textarea" tcl="description-textarea">\n\n\t<tiny-editor ng-show="enableDescriptionExpression" value="editorValue" on-open="openExpressionDialog( $event )" invalid="!isValid" max-length="maxLength" on-blur="onBlur( $event )" always-expression="{{false}}"></tiny-editor>\n\n\t<textarea ng-show="!enableDescriptionExpression" class="lui-textarea" ng-model="description" maxlength="{{maxLength}}" name="desc" ng-class="{ \'lui-invalid\': !isValid }" tid="description-textarea"></textarea>\n\n</div>'},function(e,t){e.exports='\ufeff<div class="tiny-editor lui-textarea" ng-class="{\'lui-invalid\': invalid, \'lui-focused\': active}">\n\t<div class="textarea-wrapper">\n\t\t<textarea tid="tiny-editor-text" type="text" maxlength="{{maxLength || 8192}}" rows="3" class="wrapped-textarea"\n\t\t\t\t\t\t\tng-trim="false" ng-model="editorValue" ng-change="change()" ng-focus="focused()" ng-blur="blurred()" spellcheck="false">\n\t\t</textarea>\n\t</div>\n\t<button tid="tiny-editor-fx-button"\n\t\t\t\t\tqva-activate="open( $event )"\n\t\t\t\t\tclass="lui-fade-button edit-expression"\n\t\t\t\t\tq-title-translation="Tooltip.OpenExpressionEditor">\n\t\t<span class="lui-icon lui-icon--expression" ng-class="{\'active\': isExpression}"></span>\n\t</button>\n\n</div>'},function(e,t){e.exports='<div class="qv-cloud">\n\t<div class="qv-tageditor">\n\t\t<div class="lui-input-group">\n\t\t\t<input class="lui-input  lui-input-group__item  lui-input-group__input qv-tagText" tid="tag-cloud-input" ng-model="tagInput" type="text" maxlength="31">\n\t\t\t<button class="lui-button  lui-input-group__item  lui-input-group__button" data-tid="tag-button">\n\t\t\t \t<span class="lui-button__icon  lui-icon  lui-icon--plus" q-title-translation="Tooltip.AddTag" ng-click="addTagsAndFocus( $event )"></span>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\t<div tid="tag-cloud-cloud" class="qv-tagCloud" data-value="tags">\n\t\t<span ng-repeat="tag in tags" class="qv-tagItem lui-tag">\n\t\t\t<div class="qv-tagContent">{{tag}}</div>\n\t\t\t <div class="lui-icon lui-icon--remove qv-clearTag" ng-click="removeTagAt( $index )" q-title-translation="Common.Delete"></div>\n\t\t</span>\n\t</div>\n</div>\n'},function(e,t){e.exports='<button ng-click="onClick($event, \'inverse\')" qv-enter="onClick($event)" class="colorpicker-button lui-button {{variantClass}}" ng-class="{\'lui-active\': opened === true}" q-title-translation="ColorPicker.Choose">\n\t<span class="lui-button__icon  qv-color-picker-preview" tid="color-picker-preview"></span><span class="lui-button__caret lui-caret"></span>\n</button>'},function(e,t){e.exports='<lui-popover class="qv-cp-popup qv-color-picker-new"\n\t\t\t style="z-index: 1200;"\n\t\t\t ng-style="{\'width\': \'auto\'}"\n\t\t\t collision="\'flipfit\'"\n\t\t\t align-to="$alignToElement"\n\t\t\t on-close-view="closeView(event)"\n\t\t\t tid="color-picker-popup"\n\t\t\t qva-outside-ignore-for="media-toolbar">\n\n\t<div class="qv-cp-flex-new">\n\t\t<div class="qv-cp-main-stage-new" >\n\t\t\t<div ng-show="!customColor" class="color-palette">\n\t\t\t\t<ul class="qv-colorpicker-new palette"\n\t\t\t\t\ttid="color-picker-palette">\n\t\t\t\t\t<li ng-repeat="color in currentPalette | filter: ( $disableNone || \'\' ) && \'!none\' "\n\t\t\t\t\t\tng-click="colorClicked($event, $index, color)"\n\t\t\t\t\t\tng-style="{\'background-color\': color}"\n\t\t\t\t\t\tq-title-translation="{{color === \'none\' ? \'ColorPicker.None\' : color}}"\n\t\t\t\t\t\tclass="lui-icon"\n\t\t\t\t\t\tng-class="{\'lui-icon--tick\': foreColor === color, \'selected-w\' : !isDark, \'transparent\': color === \'none\', \'disabled\' : color === \'none\' && $disableNone}">\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t\t<div class="custom-color" ng-show="customColor">\n\t\t\t\t<div hue-sat-wheel-new callback="hueSatValueChanged" visible="customColor" hsv="hsv"></div>\n\t\t\t\t<div value-slider-new callback="hueSatValueChanged" visible="customColor" hsv="hsv"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="$useGlyph" style="height: 156px">\n\t\t\t<div class="qv-cp-glyphs-title-new" q-translation="properties.glyph"></div>\n\t\t\t<div class="qv-cp-glyphs-new">\n\t\t\t\t<button ng-repeat="glyph in $glyphPalette"\n\t\t\t\t\t\tclass="lui-fade-button  lui-fade-button--inverse"\n\t\t\t\t\t\tng-click="setGlyph($event, $index, glyph)"\n\t\t\t\t\t\tng-class="{\'lui-active\': glyphIcon === glyph.icon, \'border\': glyph.cssClass === \'\'}" >\n\t\t\t\t\t<span class="lui-fade-button__icon lui-icon" ng-class="glyph.cssClass"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n\n\t<div class="qv-cp-divider-new"></div>\n\n\t<div class="qv-cp-hex-result-new" ng-if="extended || customColor">\n\t\t<div class="qv-cp-preview"\n\t\t\t tid="color-picker-preview"\n\t\t\t ng-class="{\'transparent\' : foreColor === \'none\'}"\n\t\t\t ng-style="getBackgroundStyle(foreColor)"></div>\n\t\t<div class="qv-cp-hex-text">#</div>\n\t\t<input class="qv-cp-hex-input"\n\t\t\t   ng-model="hex.value"\n\t\t\t   ng-change="onHexChange(hex.value)"\n\t\t\t   maxlength="6"\n\t\t\t   tid="{{hex.value}}"\n\t\t\t   ng-keypress="onKeyPress($event)"/>\n\n\t\t<button class="qv-cp-switch lui-button lui-button--inverse"\n\t\t\t\ttid="color-picker-result"\n\t\t\t\tng-class="{\'lui-active\' : customColor }"\n\t\t\t\tng-click="onFoldoutClick($event)"\n\t\t\t\tq-title-translation="{{customColor ? \'ColorPicker.HideOptions\' : \'ColorPicker.ShowOptions\'}}">\n\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--palette"></span>\n\t\t</button>\n\t</div>\n\n\t<div class="qv-colorpicker-recent-wrapper" ng-show="showRecent">\n\t\t<span class="recently-used-text" q-translation="colorpicker.RecentlyUsed"></span>\n\t\t<div>\n\t\t\t<ul class="qv-colorpicker-new recent">\n\t\t\t\t<li ng-repeat="color in recentColors | filter: \'!none\'"\n\t\t\t\t\tng-click="recentColorClicked($event, color)"\n\t\t\t\t\tng-style="{\'background-color\': color}"\n\t\t\t\t\tq-title-translation="{{color === \'none\' ? \'ColorPicker.None\' : color}}"\n\t\t\t\t\tclass="lui-icon"\n\t\t\t\t\tng-class="{\'selected\': foreColor === color, \'selected-w\' : !isDark, \'transparent\': color === \'none\', \'disabled\' : color === \'none\' && $disableNone}"\n\t\t\t\t\tclass="no-margin">\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\n</lui-popover>'},function(e,t,n){"use strict";var i,r;!(i=[n(722)],r=function(e){function t(t){var n=e.FixedQueue(5,[]);var r;if(i){s(i,n);for(r=t.length-1;r>=1;r--)s(t[r],n)}else for(r=t.length-1;r>=0;r--)n.push(t[r]);return n}var n=r();var i;function r(){return e.FixedQueue(5,[])}function o(){return t(n)}function a(e){s(e,n)}function s(e,t){if("none"!==e){var n=t.indexOf(e);n>-1&&t.splice(n,1);t.push(e)}}function l(e){i=e}function c(){a(i);i=null}return{getPersistentRecentColors:o,initRecentColors:r,persistColor:a,stage:l,commit:c}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(t,n){n=n||[];var i=Array.apply(null,n);i.fixedSize=t;i.push=e.push;i.splice=e.splice;i.unshift=e.unshift;e.trimTail.call(i);return i}e.trimHead=function(){if(this.length<=this.fixedSize)return;Array.prototype.splice.call(this,0,this.length-this.fixedSize)};e.trimTail=function(){if(this.length<=this.fixedSize)return;Array.prototype.splice.call(this,this.fixedSize,this.length-this.fixedSize)};e.wrapMethod=function(e,t){var n=function n(){var i=Array.prototype[e];var r=i.apply(this,arguments);t.call(this);return r};return n};e.push=e.wrapMethod("push",e.trimHead);e.splice=e.wrapMethod("splice",e.trimTail);e.unshift=e.wrapMethod("unshift",e.trimTail);return{FixedQueue:e}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(96)],r=function(e,t){e.directive("hueSatWheelNew",function(){return{require:"?hsv",replace:true,template:'<div class="cp-hue-sat-new"><div class="cp-hue-sat-wheel" tid="color-picker-wheel"><div class="cp-hsw-overlay"></div><div class="cp-hsw-pointer"><div class="cp-hsw-inside"/></div></div></div>',scope:{callback:"=",hsv:"=hsv",visible:"="},link:function e(n,i){var r=i.find(".cp-hsw-pointer");var o=i.find(".cp-hsw-overlay");var a=i.find(".cp-hue-sat-wheel");var s=a.width()/2;var l=a.height()/2;var c=0;var u=0;function d(e,t){c=(180*Math.atan2(t,e)/Math.PI+360)%360;u=Math.min(Math.max(0,Math.sqrt(t*t+e*e)/s*100),100);n.hsv.h=c;n.hsv.s=u;n.callback&&n.callback({hue:c,sat:u})}function f(e,t){r.css({left:e,top:t})}function p(){var e=Math.cos(c/180*Math.PI)*(u/100*s);var t=Math.sin(c/180*Math.PI)*(u/100*s);f(e+s,l-t)}function h(e,t){var n=Math.sqrt(e*e+t*t);if(n>s){e=e/n*s;t=t/n*s}return{x:e,y:t}}function v(e){var t=a.offset();var n=h(e.x-s-t.left,2*l-e.y-s+t.top);f(n.x+s,l-n.y);d(n.x,n.y)}var g="cp-hsw";t(a[0]).tap({id:g,end:function e(t,n){v(n.pagePoints[0])}}).swipe({id:g,options:{useMomentum:true,inertia:.5,radiusThreshold:6},update:function e(t,n){v(n.pagePoints[0])}});n.$watch("hsv.v",function(){o.css("background","rgba(0,0,0, "+(100-n.hsv.v)/100+")")});n.$watch("hsv.h",function(){if(c!==n.hsv.h){c=n.hsv.h%360;p()}});n.$watch("hsv.s",function(){if(u!==n.hsv.s){u=n.hsv.s>100?100:n.hsv.s<0?0:n.hsv.s;p()}});n.$watch("visible",function(){p()});n.$on("$destroy",function(){t(a[0]).off("*",g)})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(109),n(96)],r=function(e,t,n){function i(e,n,i){return new t("hsv("+e+","+n+","+i+")").toRGB()}e.directive("valueSliderNew",function(){return{require:"?hsv",replace:true,template:'<div class="cp-value" tid="color-picker-slider"><div class="cp-val-slider"><span class="cp-val-pointer"/></div></div>',scope:{callback:"=",hsv:"=hsv",visible:"="},link:function e(t,r){var o=r.find(".cp-val-pointer");var a=r.find(".cp-val-slider");var s=100;function l(e){return(e-o.outerWidth()/2)/(a.outerWidth()-o.outerWidth())*100}function c(e){return e/100*(a.outerWidth()-o.outerWidth())+o.outerWidth()/2}function u(e){s=Math.max(Math.min(100,l(e)),0);t.hsv.v=s;t.callback&&t.callback({value:l(e)})}function d(e){o.css({left:e})}function f(e){var t=c(e);d(t)}function p(e){return Math.min(Math.max(e,o.outerWidth()/2),a.outerWidth()-o.outerWidth()/2)}function h(e){var t=a.offset();var n=p(e.x-t.left);d(n);u(n)}var v="cp-hsw";n(r[0]).tap({id:v,end:function e(t,n){h(n.pagePoints[0])}}).swipe({id:v,options:{useMomentum:true,inertia:.5,radiusThreshold:6},update:function e(t,n){h(n.pagePoints[0])}});t.$watchCollection("[hsv.s, hsv.h]",function(){a.css("background-color",i(t.hsv.h,t.hsv.s,100))});t.$watch("hsv.v",function(){if(s!==t.hsv.v){s=t.hsv.v;f(t.hsv.v)}});t.$watch("visible",function(){f(s)});t.$on("$destroy",function(){n(r[0]).off("*",v)})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<button ng-click="onClick($event, \'inverse\')" qv-enter="onClick($event)" class="colorpicker-button lui-button {{variantClass}}" ng-class="{\'lui-active\': opened === true}" q-title-translation="ColorPicker.Choose">\n\t<span class="lui-button__icon  qv-color-picker-preview" tid="color-picker-preview"></span><span class="lui-button__caret lui-caret"></span>\n</button>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(727),n(109),n(728),n(729)],r=function(e,t,n){function i(e,t){if(t[e])return t[e];return e||"none"}function r(e,t,n){if(!e||-1!==n.indexOf(t))return false;return"none"!==t&&!!t}var o={template:t,controller:["$scope","$element","$timeout",function(t,o,a){t.hsv={h:0,s:100,v:100};var s=new n;if(t.$useGlyph){t.foreColor=i(t.$inputViewValue.color,t.$palette);t.glyphIcon=t.$inputViewValue.icon;t.customColor=r(t.$extended,t.$inputViewValue.color,t.$palette)}else{t.foreColor=i(t.$inputViewValue,t.$palette);t.customColor=r(t.$extended,t.$inputViewValue,t.$palette)}t.hex={value:""};t.getBackgroundStyle=function(e){if("none"!==e)return{"background-color":e}};function l(){t.onColorChange(t.$useGlyph,t.index,t.foreColor,t.glyphIcon)}t.setGlyph=function(e,n,i){t.glyphIcon=i.icon;l()};function c(e){s=new n(e);s.isInvalid()&&t.$disableNone&&(s=new n(t.$defaultColor))}function u(e){var n=s.toHex();t.foreColor=s.isInvalid()?"none":n;t.index=e;l();t.isDark=s.isDark()}function d(){s.isInvalid()?t.hex.value="-":t.hex.value=s.toHex().substring(1,7)}function f(){if(!s.isInvalid()){var e=s.toHSVComponents();t.hsv.h=e.h;t.hsv.s=e.s;t.hsv.v=e.v}}var p=null;function h(e){return function(){var t=this,n=arguments;p||(p=a(function(){e.apply(t,n);p=null},100))}}t.hueSatValueChanged=h(function(){c("hsv("+t.hsv.h+","+t.hsv.s+","+t.hsv.v+")");d();u(-1)});function v(e){e="#"+e.replace(/[^0-9A-Fa-f]+/g,"").substring(0,6);c(e);f();u(-1)}t.onHexChange=h(v);t.colorClicked=h(function(e,n){if(!t.$disableNone||"none"!==n){c(n);f();d();u(e)}});t.onFoldoutClick=function(e){e.preventDefault();t.customColor=!t.customColor};t.onKeyPress=function(e){var n=e.which;13===n&&t.close()};c(t.foreColor);f();t.isDark=s.isDark();var g=a(function(){e.$apply(t,function(){d()})});t.$on("$destroy",function(){a.cancel(g);o.find(".qv-cp-hex-input").off()})}]};return{popupComponent:o,isCustom:r}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover class="qv-cp-popup qv-color-picker"\n\t\t\t\t\t  style="min-width: 100px;z-index: 1200;"\n\t\t\t          ng-style="{\'width\': \'auto\'}"\n\t\t\t\t\t  collision="\'flipfit\'"\n\t\t\t\t\t  align-to="$alignToElement"\n\t\t\t\t\t  on-close-view="closeView(event)"\n\t\t\t\t\t  tid="color-picker-popup"\n\t\t\t\t\t  qva-outside-ignore-for="media-toolbar">\n\n\t<div class="qv-cp-flex">\n\t\t<div class="qv-cp-main-stage" >\n\t\t\t<ul class="qv-colorpicker"\n\t\t\t\tng-show="!customColor"\n\t\t\t\tng-class="{\'extended\' : $extended}"\n\t\t\t\ttid="color-picker-palette">\n\t\t\t\t<li ng-repeat="color in $palette"\n\t\t\t\t\tqva-activate="colorClicked($index, color)"\n\t\t\t\t\tng-style="{\'background-color\': color}"\n\t\t\t\t\tq-title-translation="{{color === \'none\' ? \'ColorPicker.None\' : color}}"\n\t\t\t\t\tclass="lui-icon"\n\t\t\t\t\tng-class="{\'selected\': foreColor === color, \'selected-w\' : !isDark, \'transparent\': color === \'none\', \'disabled\' : color === \'none\' && $disableNone}">\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div ng-show="customColor">\n\t\t\t\t<div hue-sat-wheel callback="hueSatValueChanged" visible="customColor" hsv="hsv"></div>\n\t\t\t\t<div value-slider callback="hueSatValueChanged" visible="customColor" hsv="hsv"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="$useGlyph">\n\t\t\t<div class="qv-cp-glyphs-title" q-translation="properties.glyph"></div>\n\t\t\t<div class="qv-cp-glyphs">\n\t\t\t\t<button ng-repeat="glyph in $glyphPalette" \n\t\t\t\t\t\tclass="lui-fade-button  lui-fade-button--inverse"\n\t\t\t\t\t\tqva-activate="setGlyph($event, $index, glyph)"\n\t\t\t\t\t\tng-class="{\'lui-active\': glyphIcon === glyph.icon, \'border\': glyph.icon === \'\'}" >\n\t\t\t\t\t<span class="lui-fade-button__icon  lui-icon">{{glyph.icon}}</span>\n\t\t\t\t</button>\n\t\t\t\t\x3c!--<li ng-repeat="glyph in $glyphPalette" \n\t\t\t\tqva-activate="setGlyph($event, $index, glyph)" \n\t\t\t\tng-class="{\'selected\': glyphIcon === glyph.icon, \'border\': glyph.icon === \'\'}">{{glyph.icon}}</li>--\x3e\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n\t\t<div ng-if="$extended">\n\t\t\t<div class="qv-cp-divider"></div>\n\t\t\t<div class="qv-cp-hex-result">\n\t\t\t\t<div class="qv-cp-preview"\n\t\t\t\t\t\ttid="color-picker-preview"\n\t\t\t\t\t\tng-class="{\'transparent\' : foreColor === \'none\'}"\n\t\t\t\t\t\tng-style="getBackgroundStyle(foreColor)"></div>\n\t\t\t\t<div class="qv-cp-hex-text">#</div>\n\t\t\t\t<input class="qv-cp-hex-input"\n\t\t\t\t\tng-model="hex.value"\n\t\t\t\t\tng-change="onHexChange(hex.value)"\n\t\t\t\t\tmaxlength="7"\n\t\t\t\t\ttid="{{hex.value}}"\n\t\t\t\t\tng-keypress="onKeyPress($event)"/>\n\n\t\t\t\t\t<button class="qv-cp-switch lui-button  lui-button--inverse"\n\t\t\t\t\t\t\ttid="color-picker-result"\n\t\t\t\t\t\t\tng-class="{\'lui-active\' : customColor }"\n\t\t\t\t\t\t\tqva-activate="onFoldoutClick($event)"\n\t\t\t\t\t\t\tq-title-translation="{{customColor ? \'ColorPicker.HideOptions\' : \'ColorPicker.ShowOptions\'}}">\n\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--palette"></span>\n\t\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n</lui-popover>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(96)],r=function(e,t){e.directive("hueSatWheel",function(){return{require:"?hsv",replace:true,template:'<div class="cp-hue-sat"><div class="cp-hue-sat-wheel" tid="color-picker-wheel"><div class="cp-hsw-overlay"></div><div class="cp-hsw-pointer"><div class="cp-hsw-inside"/></div></div></div>',scope:{callback:"=",hsv:"=hsv",visible:"="},link:function e(n,i){var r=i.find(".cp-hsw-pointer");var o=i.find(".cp-hsw-overlay");var a=i.find(".cp-hue-sat-wheel");var s=a.width()/2;var l=a.height()/2;var c=0;var u=0;function d(e,t){c=(180*Math.atan2(t,e)/Math.PI+360)%360;u=Math.min(Math.max(0,Math.sqrt(t*t+e*e)/s*100),100);n.hsv.h=c;n.hsv.s=u;n.callback&&n.callback({hue:c,sat:u})}function f(e,t){r.css({left:e,top:t})}function p(){var e=Math.cos(c/180*Math.PI)*(u/100*s);var t=Math.sin(c/180*Math.PI)*(u/100*s);f(e+s,l-t)}function h(e,t){var n=Math.sqrt(e*e+t*t);if(n>s){e=e/n*s;t=t/n*s}return{x:e,y:t}}function v(e){var t=a.offset();var n=h(e.x-s-t.left,2*l-e.y-s+t.top);f(n.x+s,l-n.y);d(n.x,n.y)}var g="cp-hsw";t(a[0]).tap({id:g,end:function e(t,n){v(n.pagePoints[0])}}).swipe({id:g,options:{useMomentum:true,inertia:.5,radiusThreshold:6},update:function e(t,n){v(n.pagePoints[0])}});n.$watch("hsv.v",function(){o.css("background","rgba(0,0,0, "+(100-n.hsv.v)/100+")")});n.$watch("hsv.h",function(){if(c!==n.hsv.h){c=n.hsv.h%360;p()}});n.$watch("hsv.s",function(){if(u!==n.hsv.s){u=n.hsv.s>100?100:n.hsv.s<0?0:n.hsv.s;p()}});n.$watch("visible",function(){p()});n.$on("$destroy",function(){t(a[0]).off("*",g)})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(109),n(96)],r=function(e,t,n){function i(e,n,i){return new t("hsv("+e+","+n+","+i+")").toRGB()}e.directive("valueSlider",function(){return{require:"?hsv",replace:true,template:'<div class="cp-value" tid="color-picker-slider"><div class="cp-val-slider"><span class="cp-val-pointer"/></div></div>',scope:{callback:"=",hsv:"=hsv",visible:"="},link:function e(t,r){var o=r.find(".cp-val-pointer");var a=r.find(".cp-val-slider");var s=100;function l(e){return(e-o.outerWidth()/2)/(a.outerWidth()-o.outerWidth())*100}function c(e){return e/100*(a.outerWidth()-o.outerWidth())+o.outerWidth()/2}function u(e){s=Math.max(Math.min(100,l(e)),0);t.hsv.v=s;t.callback&&t.callback({value:l(e)})}function d(e){o.css({left:e})}function f(e){var t=c(e);d(t)}function p(e){return Math.min(Math.max(e,o.outerWidth()/2),a.outerWidth()-o.outerWidth()/2)}function h(e){var t=a.offset();var n=p(e.x-t.left);d(n);u(n)}var v="cp-hsw";n(r[0]).tap({id:v,end:function e(t,n){h(n.pagePoints[0])}}).swipe({id:v,options:{useMomentum:true,inertia:.5,radiusThreshold:6},update:function e(t,n){h(n.pagePoints[0])}});t.$watchCollection("[hsv.s, hsv.h]",function(){a.css("background-color",i(t.hsv.h,t.hsv.s,100))});t.$watch("hsv.v",function(){if(s!==t.hsv.v){s=t.hsv.v;f(t.hsv.v)}});t.$watch("visible",function(){f(s)});t.$on("$destroy",function(){n(r[0]).off("*",v)})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(731),n(91),n(100),n(732),n(501),n(350)],r=function(e,t,n,i){e.directive("qvSegmentColors",["qvRecentGradientsService",function(e){return{restrict:"E",template:t,replace:true,measure:"=",link:function t(r){function o(){var e=false,t=r.measure.coloring;t.gradient||(e=true);!e&&t.gradient.limits&&t.gradient.limits.length!==r.limits.length&&(e=true);e||t.gradient.colors&&t.gradient.limits&&t.gradient.breakType||(e=true);if(!e){t.gradient.colors.forEach(function(t,n){t!==r.colors[n]&&(e=true)});t.gradient.limits.forEach(function(t,n){t!==r.limits[n]&&(e=true)});t.gradient.breakType.forEach(function(t,n){t!==r.types[n]&&(e=true)})}e||t.gradient.limitType===(r.format?"percent":"absolute")||(e=true);e&&r.enable&&(t.gradient={limits:r.limits.slice(),breakType:r.types.slice(),limitType:r.format?"percent":"absolute",colors:r.colors.slice()})}r.measure.coloring.gradient?r.enable=true:r.enable=false;function a(){var e=r.measure.coloring,t;e.gradient||(e.gradient={limits:r.templates[0].limits,breakType:r.templates[0].types.slice(),limitType:r.templates[0].percentage,colors:r.templates[0].colors.slice()});t="absolute"!==e.gradient.limitType;r.format=t;e.gradient.colors.forEach(function(e,t){r.colors[t]=e});e.gradient.limits.forEach(function(e,t){r.limits[t]=e});e.gradient.breakType.forEach(function(e,t){r.types[t]=e});r.enable||delete r.measure.coloring.gradient}r.$watch("enable",function(){r.enable?o():delete r.measure.coloring.gradient});r.templates=[{colors:[i.resolveColor({index:6}),i.resolveColor({index:10})],name:n.get("library.colors.basicTemplate"),limits:[.5],types:[false],percentage:true}];i.scales.forEach(function(e){var t="gradient"===e.type,i=t?e.scale:e.scale[e.scale.length-1],o=i.length-1,a=1/(o+1),s=[],l;for(l=0;l<o;l++)s.push((l+1)*a);r.templates.push({colors:i.slice(),name:n.get(e.translation),limits:s,types:s.map(function(){return t}),percentage:true})});e.getTemplates().forEach(function(e){r.templates.push(e)});r.colors=[];r.limits=[];r.types=[];r.format=true;a();Object.defineProperty(r,"currentTemplate",{set:function e(t){var n=r.templates[t];r.format=!!n.percentage;r.colors.length=0;r.types.length=0;r.limits.length=0;n.colors.forEach(function(e,t){r.colors[t]=e});n.types.forEach(function(e,t){r.types[t]=e});n.limits.forEach(function(e,t){r.limits[t]=e});o()}});r.$watch("colors",function(){o()},true);r.$watch("limits",function(){o()},true);r.$watch("types",function(){o()},true);r.$watch("format",function(){o()})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="segment-colors-wrapper ">\n\n\n\t<div class="segment-colors-row segment-colors-limit-format segment-colors-auto" tid="segment-colors">\n\t\t<p ng-if="false" q-translation="library.colors.applyCustom"></p>\n\t\t<p>\n\t\t\t<span q-translation="library.colors.autoFillSwitch"></span></br>\n\t\t\t<b ng-show="enable" class="qv-dim-dlg-colors-label" q-translation="library.colors.on"></b>\n\t\t\t<b ng-show="!enable" class="qv-dim-dlg-colors-label" q-translation="library.colors.off"></b>\n\t\t</p>\n\t\t<lui-switch x-model="enable"></lui-switch>\n\t</div>\n\t<div class="borderline">\n\t</div>\n\t<div ng-class="{\'overlay\': !enable}">\n\t\t<p q-translation="library.colors.selectTemplate" class="segment-colors-row-text">\n\t\t<div color-drop-down class="segment-color-drop-down segment-colors-row" schemas="templates" ng-model="currentTemplate"></div>\n\t\t<div class="segment-colors-row segment-colors-limit-format" tid="segment-format">\n\t\t\t<p>\n\t\t\t\t<span q-translation="library.colors.limitFormat"></span></br>\n\t\t\t\t<b ng-show="format" class="qv-dim-dlg-colors-label" q-translation="library.colors.PercentageBased" tid="percentage-label"></b>\n\t\t\t\t<b ng-show="!format" class="qv-dim-dlg-colors-label" q-translation="library.colors.FixedValueBased" tid="fixed-value-label"></b>\n\t\t\t</p>\n\t\t\t<lui-switch x-model="format"></lui-switch>\n\t\t</div>\n\t\t<div class="segment-colors-bottom">\n\t\t\t<qv-palette-creator ng-if="colors && colors.length" colors="colors" percentage="format" limits="limits" types="types"></qv-palette-creator>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(733),n(97),n(734),n(349)],r=function(e,t){e.directive("colorDropDown",function(){var n={borderColor:"#B3B3B3"};var i={borderColor:"#595959"};return{template:t,require:"?ngModel",scope:{schemas:"="},link:function t(r,o,a,s){r.show=false;r.expanded=false;r.selected=0;r.getCurrent=function(e){return r.schemas[e]};r.getCurrentName=function(){return r.schemas[r.currentScheme].name};r.currentShowComponent=null;r.currentScheme=s.$viewValue||0;r.close=function(){r.expanded=false;r.expandedBorder=n};function l(e){r.expanded=e}r.checkExpanded=function(){return true===r.expanded};r.onOpenDropDown=function(){if(r.expanded){r.expanded=false;s.$setViewValue(r.currentScheme);r.close()}else{var t=e.getService("luiPopover");r.expanded=true;r.currentShowComponent=t.show({template:"<color-scheme-popup>",input:{schemas:r.schemas,currentScheme:r.currentScheme,onChange:function e(t){s.$setViewValue(t);r.currentScheme=t},expanded:l,width:o.width()-18+"px"},alignTo:o[0],closeOnEscape:true,closeOnOutside:true,closeOnResize:true,outsideIgnore:"color-drop-down-wrapper",dock:"bottom",autoFocus:true})}};r.$watch("schemas",function(){r.show=true});r.activateHover=function(){r.expandedBorder=i};r.disableHover=function(){r.expanded||(r.expandedBorder=n)}}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div ng-class="{\'color-drop-down-wrapper-expanded\': checkExpanded()}" class="lui-popover color-drop-down-wrapper" ng-show="show" ng-style=" {\'border-color\' : expandedBorder.borderColor} " ng-mouseenter="activateHover()" ng-mouseleave="disableHover()">\n\t<div qva-activate="onOpenDropDown($event)" class="color-drop-down-popup-item" qva-outside="close()">\n\t\t<span class="color-drop-down-current-name">{{getCurrentName()}}</span>\n\t\t<div qv-color-scheme-display class="color-scheme-drop-down-list-item-colors" colors="getCurrent(currentScheme).colors"  types="getCurrent(currentScheme).types" limits="getCurrent(currentScheme).limits"></div>\n\t\t<span ng-if="!expanded" class="lui-icon lui-icon--small lui-icon--triangle-bottom" class="color-drop-down-triangle" style="float: right;margin-top: -20px; margin-right: 8px"></span>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(735)],r=function(e,t){e.directive("colorSchemePopup",function(){return{schemas:"=",currentScheme:"=",expanded:"=",width:"=",template:t,link:function e(t){t.pickScheme=function(e){for(var n=0;n<t.schemas.length;n++)if(e===t.schemas[n].name){t.onChange&&t.onChange(n);t.close();t.expanded(false)}};t.getSchemas=function(){var e=[];e.push(t.schemas[t.currentScheme]);for(var n=0;n<t.schemas.length;n++)n!==t.currentScheme&&e.push(t.schemas[n]);return e}}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="lui-popover color-scheme-drop-down-list-wrapper" ng-style="{\'max-width\' : width}">\n\t<ul class="lui-list color-drop-down-popup-list">\n\t\t<li class="lui-list__item lui-list__action color-drop-down-popup-item" ng-repeat="scheme in getSchemas() track by $index" qva-activate="pickScheme(scheme.name)">\n\t\t\t<div class="color-scheme-drop-down-list-name" >\n\t\t\t\t{{scheme.name}}\n\t\t\t\t<div class="color-scheme-drop-down-list-item-colors" qv-color-scheme-display colors="scheme.colors" types="scheme.types" limits="scheme.limits"></div>\n\t\t\t</div>\n\t\t</li>\n\t</ul>\n</div>'},function(e,t){e.exports='<div class="qv-color-scheme-display">\n\t<div class="gradient" >\n\t\t<div class="segment" \n\t\t\t ng-class="{\'animate\': animateChange, \'interactive\': allowChange}"\n\t\t\t ng-repeat="color in colors track by $index" \n\t\t\t qva-activate="allowChange && onClick($event, $index)" \n\t\t\t ng-style="segmentStyles[$index]">\n\t\t</div>\n\t\t<div class="marker" ng-class="{\'animate\': animate}" ng-if="allowChange" ng-repeat="limit in lims track by $index" ng-style="{left: getLimitPos(limit)}"></div>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(90),n(48),n(97),n(348),n(297)],r=function(e,t,n,i){var r,o=i.popupComponent,a=["#b0afae","#7b7a78","#545352","#4477aa","#7db8da","#b6d7ea","#46c646","#f93f17","#ffcf02","#276e27","#ffffff","#000000"],s=t.getService("qvGlyphService").getDefaultGlyphs();function l(i,l,c,u,d){var f=e.extend({palette:null,glyphPalette:null,useGlyph:false,disableNone:false,defaultColor:"#4477aa",extended:true,dock:"top",actualColor:true},c);f.palette||(f.palette=a);f.glyphPalette||(f.glyphPalette=s);function p(e,t,n){n.value=e;d&&d()}function h(){r&&r.close()}n.on("start",h);var v;var g;var m;var b=t.getService("luiPopover");var y=t.getService("$timeout");r=b.showToPosition({template:o.template,controller:o.controller,input:{$palette:f.palette,$glyphPalette:f.glyphPalette,$useGlyph:f.useGlyph,$disableNone:f.disableNone,$defaultColor:f.defaultColor,$inputViewValue:u.value,$extended:f.extended,onColorChange:function e(t,n,i,r){v&&y.cancel(v);g=t?{color:f.actualColor?i:n,icon:r}:f.actualColor?i:n;m=i;v=y(function(){p(g,m,u);v=null},300)}},x:i,y:l,variant:"inverse",closeOnEscape:true,closeOnOutside:true,outsideIgnore:"colorpicker-tooltip",dock:f.dock,autoFocus:false});r.closed.then(function(){n.off("start",h)})}return{openColorPicker:l}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){function t(e){e.invalidExpressionIndex=-1;e.segments.forEach(function(t,n){Number.isNaN(+t.limit)&&(e.invalidExpressionIndex=n)});e.hasInvalidExpression=-1!==e.invalidExpressionIndex}function n(e,t,n){if(e===t)return;-1!==e&&n.children().eq(e).removeClass("active-handle");-1!==t&&n.children().eq(t).addClass("active-handle")}function i(e,t,i,r){e.hasInvalidExpression&&(r=e.invalidExpressionIndex);"number"!==typeof r&&(r=e.segments.length-1);n(e.activeIndex,r,i);if(-1!==r&&-1===e.activeIndex){t.find(".limit-options-arrow").removeClass("hidden");t.find(".qv-palette-creator-limit-options").removeClass("hidden")}else if(-1===r){t.find(".limit-options-arrow").addClass("hidden");t.find(".qv-palette-creator-limit-options").addClass("hidden")}e.activeIndex=r}function r(e,n,i,r){t(e);(e.segments.length>0&&r.hasClass("notVisible")||e.segments.length<1&&!r.hasClass("notVisible"))&&r.toggleClass("notVisible");l(e,{min:i.min,max:i.max,step:c(i.max,i.min),values:e.segments.map(function(e){return"NaN"!==e.limit?e.limit:(i.max+i.min)/2})});a(e,n,i.max,i.min);s(e,i)}function o(e,t,n){this.limit=t;this.type=n;Object.defineProperties(this,{percent:{get:function t(){if(e.percentage&&""!==this.limit){if(this.currentInput&&this.currentInput.endsWith("."))return e.inputFocus?this.currentInput:parseFloat(Math.floor(100*this.limit*100)/100)+"%";return e.inputFocus?parseFloat(Math.floor(100*this.limit*100)/100):parseFloat(Math.floor(100*this.limit*100)/100)+"%"}return this.limit},set:function t(n){this.currentInput=n;e.percentage&&!n.endsWith(".")?e.inputFocus?this.limit=""!==n?parseFloat(n/100):"":this.limit=parseFloat(n.replace(/%/g,"")):n.endsWith(".")?this.limit=parseFloat(n/100):this.limit=n}}})}function a(e,t,n,i){if(Number.isNaN(+e.activeIndex)||e.activeIndex<0)return;var r=(e.segments[e.activeIndex].limit-i)/(n-i)*100;r=r<0?0:r;r=r>100?100:r;r+="%";t.find(".limit-options-arrow-fg").css("left",r);t.find(".limit-options-arrow-bg").css("left",r)}function s(e,t){var n=t.max-t.min;e.colorSchemeLimits=[];e.types.length=0;e.limits.length=0;e.segments.map(function(e){return{limit:e.limit,type:e.type}}).sort(function(e,t){if(e.limit!==t.limit)return e.limit<t.limit?-1:1;return 0}).forEach(function(i){e.limits.push(i.limit);e.colorSchemeLimits.push((i.limit-t.min)/n);e.types.push(i.type)})}function l(t,n){t.sliderOptions=e.extend({},t.sliderOptions,n);t.sliderValues=t.sliderOptions.values}function c(e,t){return Number(((e-t)/1e3).toFixed(20))}function u(e){var t,n,i,r=e.segments.length;if(e.percentage){t=0;n=1}else if(0===r){t=0;n=1}else if(1===r&&0===e.segments[0].limit){t=-10;n=10}else if(1===r||e.segments.every(function(t){return t.limit===e.segments[0].limit})){var o=.9*e.segments[0].limit;var a=1.1*e.segments[0].limit;t=Math.min(o,a);n=Math.max(o,a)}else{t=null;n=null;e.segments.forEach(function(e){n=null!==n?Math.max(n,e.limit):e.limit;t=null!==t?Math.min(t,e.limit):e.limit});i=n-t;t-=.3*i;n+=.3*i}return{max:n,min:t}}function d(e,t,n,i,o){var a=u(e);if(a.min!==i.min||a.max!==i.max){e.animate=true;r(e,n,a,o);t(function(){e.animate=false},200)}return a}return{updateOutDataArrays:s,SegmentLimit:o,getSliderStep:c,getRange:u,updateRange:d,updateSliderOptions:l,updateSelectedHandle:n,updateSegments:r,checkInvalidExpressionInLimits:t,updateActiveIndex:i,updateArrow:a}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-palette-creator">\n\t<button ng-if="!hasInvalidExpression && colors.length" class="lui-button  lui-button--block qv-palette-creator-btn" ng-disabled="addDisabled()" ng-click="addLimit($event)" tid="add-limit-button">\n\t\t<span class="lui-button__text" q-translation="properties.colorScaleCreator.addLimit"></span>\n\t</button>\n\t<div class="qv-palette-creator-container">\n\t\t<div>\n\t\t\t<div class="qv-palette-creator-color-scheme">\n\t\t\t\t<qv-color-scheme-display\n\t\t\t\t\tcolors="colors"\n\t\t\t\t\tlimits="colorSchemeLimits"\n\t\t\t\t\ttypes="types"\n\t\t\t\t\tallow-change="!!colorSchemeLimits"\n\t\t\t\t\tanimate-change="animate">\n\t\t\t\t</qv-color-scheme-display>\n\t\t\t</div>\n\n\t\t\t<div class="pp-component pp-slider-component" class="segment-slider" ng-class="{\'notVisible\': segments.length < 1}">\n\t\t\t\t<div class="value">\n\t\t\t\t\t<div class="slider paletteSlider" ng-class="{\'qv-palette-creator-animate\' : animate}" pp-slider="sliderOptions" ng-model="sliderValues"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-show="hasInvalidExpression" class="invalid-limit-warning invalid-expression-text" q-translation="properties.colorScaleCreator.cantShowSettings">\n\t\t</div>\n\t\t<div class="hidden limit-options-arrow" ng-class="{\'notVisible\': segments.length < 1}">\n\t\t\t<div class="limit-options-arrow-fg" ng-class="{\'no-transition\' : slide}"></div>\n\t\t\t<div class="limit-options-arrow-bg" ng-class="{\'no-transition\' : slide}"></div>\n\t\t</div>\n\n\t\t<div class="qv-palette-creator-limit-options hidden">\n\t\t\t<div ng-repeat="segment in segments track by $index">\n\n\t\t\t\t<div class="lui-input-group" ng-show="$index == activeIndex">\n\t\t\t\t\t<input class="lui-input  lui-input-group__item  lui-input-group__input" qv-enter="onEnter($index, $event)" ng-focus="onInputFocus()"\n\t\t\t\t\t qva-blur="onEnter($index, $event)" ng-model="segment.percent" type="text" maxlength="31">\n\t\t\t\t</div>\n\t\t\t\t<lui-checkbox id="qv-palette-creator-gradient" ng-show="$index == activeIndex" x-change="onGradient()" x-model="segment.type" title="{{\'properties.gradient\'|translate}}">{{\'properties.gradient\'|translate}}</lui-checkbox>\n\t\t\t\t<button ng-show="$index == activeIndex" class="lui-button  lui-button--block qv-palette-creator-btn" ng-click="removeLimit($index)" tid="remove-limit-button">\n\t\t\t\t\t<span class="lui-button__text" q-translation="properties.colorScaleCreator.removeLimit"></span>\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--bin  remove-icon" q-title-translation="Common.Delete"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(741)],r=function(e,t){e.directive("qvEditMeasure",[function(){return{restrict:"E",template:t,replace:true}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div>\n\t\x3c!-- Expression --\x3e\n\t<div class="measure-component">\n\t\t<label class="qv-metadatalabel" q-translation="metadata.expression">Expression:</label>\n\t\t<tiny-editor class="measureExpArea" value="measure.expression" on-open="openInExpressionDialog( $event )" invalid="!measure.validity.expression"></tiny-editor>\n\t</div>\n\n\t\x3c!-- Name --\x3e\n\t<div class="measure-component">\n\t\t<label q-translation="metadata.name" class="qv-metadatalabel">Name:</label>\n\t\t<input class="lui-input" ng-model="measure.name" type="text" name="name" maxlength="{{stringLimits.name}}" ng-class="{ \'lui-invalid\': !measure.validity.name }" data-tid="name-input"/>\n\t</div>\n\n\t\x3c!-- Label expression --\x3e\n\t<div class="measure-component">\n\t\t<qv-expression-input expression="measure.labelExpression" is-valid-expression="measure.validity.labelExpression"></qv-expression-input>\n\t</div>\n\n\t\x3c!-- Description --\x3e\n\t<div class="measure-component">\n\t\t<label q-translation="metadata.description" class="qv-metadatalabel">Description:</label>\n\t\t<qv-description-textarea\n\t\t\tdescription="measure.description"\n\t\t\tdescription-expression="measure.descriptionExpression"\n\t\t\tis-valid="measure.validity.description">\n\t\t</qv-description-textarea>\n\t</div>\n\n\t\x3c!-- Measure color --\x3e\n\t<div class="measure-component">\n\t\t<label class="qv-metadatalabel" q-translation="library.colors.measurecolor"></label>\n\t\t<qv-color-picker-button-new ng-model="color" palette="theme.currentPalette" extended="true" toggle-open="true"></qv-color-picker-button-new>\n\t</div>\n\n\t\x3c!-- Tags --\x3e\n\t<div class="measure-component">\n\t\t<label q-translation="metadata.tags" class="qv-taglabel"></label>\n\t\t<qv-tagcloud tags="measure.tags" update="measure.updateTags"></qv-tagcloud>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(743),n(48),n(744),n(94),n(107),n(166),n(113),n(145),n(209),n(268),n(211)],r=function(e,t,n,i,r,o){var a={template:n,controller:["$scope",function(t){function n(){var e=o.validateMetadataName(t.visualization,r);return e&&t.visualization.validity.description&&t.visualization.validity.labelExpression}var a=e.create(t,n);t.stringLimits=r;t.cancel=a.cancel;t.confirm=function(){t.visualization.updateTags();a.save()};i.StateChanged.bind(t.cancel);t.$on("$destroy",function(){i.StateChanged.unbind(t.cancel)});t.$watch("visualization.name",function(){t.visualization.validity.name||o.validateMetadataName(t.visualization,r)})}]};function s(e){var n={title:e.title,confirm:e.confirm,visualization:{name:e.visualization.name,description:e.visualization.description,descriptionExpression:e.visualization.descriptionExpression,labelExpression:e.visualization.labelExpression,tags:e.visualization.tags},onSaveCallback:e.onSaveCallback};return t.getService("luiDialog").show({template:a.template,controller:a.controller,input:n,closeOnOutside:false,showArrow:false,component:a})}return{show:s}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e,t){if(!e)throw new TypeError("You must pass a scope to this function");if(!t||"function"!==typeof t)throw new TypeError("You must pass a validateForm function to this function");function n(){e.destroyComponent()}function i(){if(t()){var n=o();e.destroyComponent();e.onSaveCallback(n)}}function r(){e.visualization=e.visualization||{};e.visualization.validity={};e.visualization.validity.name=true;e.visualization.validity.description=true;e.visualization.validity.labelExpression=true}function o(){return{name:e.visualization.name,labelExpression:a(e.visualization.labelExpression),description:e.visualization.description,descriptionExpression:e.visualization.descriptionExpression,tags:e.visualization.tags}}function a(e){var t="string"!==typeof e||0===e.length;if(t)return;return{qStringExpression:{qExpr:"="===e[0]?e.substr(1):e}}}e.visualization=e.input.visualization;r();return{cancel:n,save:i,getFormData:o}}return{create:e}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="lui-modal-background"></div>\n<lui-dialog id="visualization-dialog">\n\t<lui-dialog-header class="dm-header" q-translation="{{input.title}}"></lui-dialog-header>\n\t<lui-dialog-body class="dm-main">\n\t\t<div class="visualization-dialog-item">\n\t\t\t<label q-translation="metadata.name">Name:</label>\n\t\t\t<input class="lui-input" ng-model="visualization.name" type="text" name="name" maxlength="{{stringLimits.name}}" ng-class="{ \'lui-invalid\': !visualization.validity.name }" data-tid="name-input"/>\n\t\t</div>\n\t\t<div class="visualization-dialog-item">\n\t\t\t<qv-expression-input expression="visualization.labelExpression" is-valid-expression="visualization.validity.labelExpression"></qv-expression-input>\n\t\t</div>\n\n\t\t<div class="visualization-dialog-item">\n\t\t\t<label q-translation="metadata.description">Description:</label>\n\t\t\t<qv-description-textarea\n\t\t\t\tdescription="visualization.description"\n\t\t\t\tdescription-expression="visualization.descriptionExpression"\n\t\t\t\tis-valid="visualization.validity.description">\n\t\t\t</qv-description-textarea>\n\t\t</div>\n\t\t<div class="visualization-dialog-item">\n\t\t\t<label q-translation="metadata.tags" class="qv-taglabel"></label>\n\t\t\t<qv-tagcloud tags="visualization.tags" update="visualization.updateTags"></qv-tagcloud>\n\t\t</div>\n\t</lui-dialog-body>\n\t<lui-dialog-footer qv-confirm-label="{{input.confirm}}">\n\t\t<lui-button ng-click="cancel()" tid="2f2a4f" q-translation="Common.Cancel" ></lui-button>\n\t\t<lui-button ng-click="confirm()" tid="2f2a56" q-translation="{{input.confirm}}" ></lui-button>\n\t</lui-dialog-footer>\n</lui-dialog>'},function(e,t,n){"use strict";var i,r;!(i=[n(51),n(48),n(91),n(746),n(94),n(107),n(191),n(150),n(295),n(166),n(89),n(316),n(90),n(49),n(145),n(241),n(209),n(351)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p){var h=null;function v(e,t,n){e.validity[t]=!!e[t]&&!!e[t].trim()&&e[t].length<=n.name;return e.validity[t]}function g(e,t){e.validity[t]=!!e[t]&&f.isInteger(e[t])&&!Number.isNaN(+e[t])&&parseInt(e[t],10)>0;return e.validity[t]}function m(e,t){var n=g(e,t);if(n){var i=e[t];e.validity[t]=Math.log10(i)<9}return e.validity[t]}function b(e,t,n,i){var r=new u;var o=c.validateExpr(e,t);if(o){n.validate(e.expression);r.resolve(true)}else{i();r.resolve(false)}return r.promise}function y(e){var t=false;if(c.validateMetadata(e.odagLink,o))if(d.allowedChars(e.odagLink.name))t=true;else{e.odagLink.validity.name=false;t=false}return t}function x(e){var t="unlimited"===e.odagLink.retentionTimeUnit||g(e.odagLink,"retentionLimit");if(t&&e.odagLink.retentionLimit>99999){e.odagLink.validity.retentionLimit=false;t=false}return t}function S(e){var t=false;var n=y(e);var i=v(e.odagLink,"templateApp",o);var r=m(e.odagLink,"rowEstCount");var a=g(e.odagLink,"genAppLimit");var s=x(e);s&&n&&r&&a&&i&&(t=true);return t}function w(e,t){var n=e.getRetentionTimeServerValue(t.odagLink.retentionLimit,t.odagLink.retentionTimeUnit);return{name:t.odagLink.name,templateApp:t.odagLink.templateApp,tags:t.odagLink.tags,rowEstExpr:t.odagLink.expression,rowEstCount:parseInt(t.odagLink.rowEstCount,10),genAppLimit:parseInt(t.odagLink.genAppLimit,10),retentionLimit:n,defaultViewId:t.odagLink.defaultViewId,publishToStreamId:t.odagLink.publishToStreamId}}var q={scope:{title:"=",app:"=",confirmLabel:"=",odagLink:"=",inEditMode:"=",onConfirmCallback:"="},template:i,controller:["$scope","$element","$timeout","odagLinkDialogService",function(e,i,u,d){e.startSpinnerTimeout=null;var f=t.getService("qvLoader");e.isOdagSaas=p.getFlag("ODAG_SAAS_ENABLED");e.odagLink.validity={};e.odagLink.validity.expression=true;e.odagLink.validity.rowEstCount=true;e.odagLink.validity.genAppLimit=true;e.odagLink.validity.retentionLimit=true;e.odagLink.validity.templateApp=true;e.odagLink.validity.name=true;e.templateApps=[];e.exprValidator=null;e.stringLimits=o;e.retentionTimeUnits=[{id:"unlimited",name:n.get("ODAGLink.Dialog.RetentionTimeUnit.NeverExpires")},{id:"d",name:n.get("ODAGLink.Dialog.RetentionTimeUnit.Days")},{id:"h",name:n.get("ODAGLink.Dialog.RetentionTimeUnit.Hours")}];e.defaultViews=[{id:"",name:n.get("ODAGLink.Dialog.DefaultView.AppOverview")}];e.publishToStreams=[{qId:"",qName:n.get("ODAGLink.Dialog.DefaultPublishTo.MyWork")}];function v(){e.startSpinnerTimeout=u(function(){f.show({template:l,hugeLoader:false,mediumLoader:true,appendTo:i.find("#odag-link-dialog .dm-main")[0]})},0,false);return e.startSpinnerTimeout}function m(){u.cancel(e.startSpinnerTimeout);e.startSpinnerTimeout=null;f.close()}function x(){e.odagLink.validity.expression=false}e.cancel=function(){e.destroyComponent()};e.confirm=function(){v().then(function(){h=S(e);b(e.odagLink,o,e.exprValidator,x).then(function(e){e||m()}).catch(function(){m()})})};d.getTemplateApps().then(function(t){e.templateApps=t;e.templateApps.length&&e.odagLink.validity.templateApp&&(e.odagLink.templateApp||(e.odagLink.templateApp=e.templateApps[0].qDocId))});d.getPublishableStreams().then(function(t){if(t)for(var n=0;n<t.length;n++)e.publishToStreams.push(t[n])});r.StateChanged.bind(e.cancel);function q(t){if(h&&t.valid){var n=w(d,e);if(e.onConfirmCallback)e.onConfirmCallback(n).then(function(){m();e.deferredResult.resolve(n)}).catch(function(){m()});else{m();e.deferredResult.resolve(n)}}else m();t.valid||x()}function C(){e.odagLink.templateApp&&d.getSheetsForApp(e.odagLink.templateApp).then(function(t){if(t)for(var n=0;n<t.length;n++)e.defaultViews.push(t[n])})}e.exprValidator=new a.ExpressionValidator(e.app,a.Modes.Expression);e.exprValidator.Update.bind(q);e.openInExpressionDialog=function(t){t.preventDefault();s.show({expr:e.odagLink.expression,title:e.odagLink.expression?"Dimension.Expression.Dialog.Edit.Title":"Dimension.Expression.Dialog.Add.Title"}).then(function(t){e.odagLink.expression=t})};e.$watch("odagLink.expression",function(){e.odagLink.validity.expression||c.validateExpr(e.odagLink,o)});e.$watch("odagLink.name",function(){e.odagLink.validity.name||y(e)});e.$watch("odagLink.rowEstCount",function(){e.odagLink.validity.rowEstCount||g(e.odagLink,"rowEstCount")});e.$watch("odagLink.genAppLimit",function(){e.odagLink.validity.genAppLimit||g(e.odagLink,"genAppLimit")});e.$watch("odagLink.retentionLimit",function(){e.odagLink.validity.retentionLimit||g(e.odagLink,"retentionLimit")});e.$watch("odagLink.retentionTimeUnit",function(){"unlimited"===e.odagLink.retentionTimeUnit&&(e.odagLink.retentionLimit="")});e.$watch("odagLink.templateApp",function(t,n){if(t!==n){e.odagLink.defaultViewId="";e.defaultViews.splice(1)}C()});e.$on("$destroy",function(){r.StateChanged.unbind(e.cancel);e.exprValidator.Update.unbind(q)})}]};function C(n){var i={retLimit:"",retentionTimeUnit:""};if(n.retentionLimit){var r=t.getService("odagLinkDialogService");i=r.getRetentionTimeDisplayValue(n.retentionLimit)}else{i.retentionTimeValue="0";i.retentionTimeUnit="unlimited"}var o={title:n.title,app:n.app,confirmLabel:n.confirm,inEditMode:n.inEditMode,onConfirmCallback:n.confirmCallback,odagLink:{expression:n.rowEstExpr,rowEstCount:n.rowEstCount,genAppLimit:n.genAppLimit,retentionLimit:i.retentionTimeValue,retentionTimeUnit:i.retentionTimeUnit,defaultViewId:n.defaultViewId,publishToStreamId:n.publishToStreamId,name:n.name,templateApp:n.templateApp?n.templateApp.id:null,tags:n.tags}};return e.show(q,o)}return{show:C}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<qv-modal-dialog qv-id="odag-link-dialog" qv-cancel="cancel()" qv-confirm="confirm()">\n\t<header class="dm-header" q-translation="{{title}}"></header>\n\t<main class="dm-main">\n\n\t\t<div class="odag-link-component">\n\t\t\t<label q-translation="metadata.name" class="qv-metadatalabel">Name:</label>\n\t\t\t<input class="lui-input" ng-model="odagLink.name" autofocus qva-focus="true" type="text" name="name" maxlength="{{stringLimits.name}}" ng-class="{ \'lui-invalid\': !odagLink.validity.name }"/>\n\t\t</div>\n\t\t<div class="odag-link-component">\n\t\t\t<label q-translation="ODAGLink.Dialog.TemplateApp" class="qv-metadatalabel">Template App:</label>\n\t\t\t<lui-select ng-class="{ \'lui-invalid\': !odagLink.validity.templateApp }" ng-disabled="inEditMode" x-model="odagLink.templateApp" tid="odag-link-templateApp-selector" x-options="templateApp.qDocId as templateApp.qDocName for templateApp in templateApps"></lui-select>\n\t\t</div>\n \t\t<div class="odag-link-component">\n\t\t\t<label q-translation="metadata.expression" class="qv-metadatalabel">Expression:</label>\n\t\t\t<tiny-editor class="rowCountExpArea" value="odagLink.expression" on-open="openInExpressionDialog( $event )"\n\t\t\t\tinvalid="!odagLink.validity.expression"></tiny-editor>\n\t\t</div>\n\t\t<div class="odag-link-component">\n\t\t\t<label q-translation="ODAGLink.Dialog.MaxRowCount" class="qv-metadatalabel">Max row count:</label>\n\t\t\t<input class="lui-input" ng-model="odagLink.rowEstCount" type="text" name="name" maxlength="{{stringLimits.name}}" ng-class="{ \'lui-invalid\': !odagLink.validity.rowEstCount }"/>\t\t\n\t\t</div>\n\t\t<div class="odag-link-divider">\n            <div class="odag-link-divider-label" q-translation="ODAGLink.Dialog.Generated.Apps"></div>\n            <div class="odag-link-divider-line"></div>\n        </div>\t\t\n\t\t<div class="odag-link-component">\n\t\t\t<label q-translation="ODAGLink.Dialog.MaxGenAppsCount2" class="qv-metadatalabel">Maximum number:</label>\n\t\t\t<input class="lui-input" ng-model="odagLink.genAppLimit" type="text" name="name" maxlength="{{stringLimits.name}}" ng-class="{ \'lui-invalid\': !odagLink.validity.genAppLimit }"/>\t\n\t\t</div>\t\t\n\t\t<div class="odag-link-component">\n\t\t\t<label q-translation="ODAGLink.Dialog.RetentionTime" class="qv-metadatalabel">Retention time:</label>\n\t\t\t<div class="odag-retention-time">\n\t\t\t\t<input class="lui-input" ng-disabled="odagLink.retentionTimeUnit === \'unlimited\'"" ng-model="odagLink.retentionLimit" type="text" name="name" maxlength="{{stringLimits.name}}" ng-class="{ \'lui-invalid\': !odagLink.validity.retentionLimit }"/>\t\n\t\t\t\t<lui-select x-model="odagLink.retentionTimeUnit" tid="odag-link-retentionTimeUnit-selector" x-options="retentionTimeUnit.id as retentionTimeUnit.name for retentionTimeUnit in retentionTimeUnits"></lui-select>\n\t\t\t</div>\t\n\t\t</div>\n\t\t<div class="odag-link-component">\n\t\t\t<label q-translation="ODAGLink.Dialog.DefaultViewWhenOpened" class="qv-metadatalabel">Default view when opened:</label>\t\n\t\t\t<lui-select x-model="odagLink.defaultViewId" tid="odag-link-defaultView-selector" x-options="defaultView.id as defaultView.name for defaultView in defaultViews"></lui-select>\n\t\t</div>\n\t\t<div class="odag-link-component" ng-if="!isOdagSaas">\n\t\t\t<label q-translation="ODAGLink.Dialog.PublishTo" class="qv-metadatalabel">Publish To:</label>\t\n\t\t\t<lui-select x-model="odagLink.publishToStreamId" tid="odag-link-publishTo-selector" x-options="publishToStream.qId as publishToStream.qName for publishToStream in publishToStreams"></lui-select>\n\t\t</div>\n\x3c!--\n\t\t<div class="measure-component">\n\t\t\t<label q-translation="metadata.tags" class="qv-taglabel"></label>\n\t\t\t<qv-tagcloud tags="odagLink.tags" update="odagLink.updateTags"></qv-tagcloud>\n\t\t</div>\n --\x3e\n\t</main>\n\t<footer class="dm-footer">\n\t    <lui-button x-variant="inverse" qva-activate="$event.preventDefault(); cancel()" name="cancel" q-translation="Common.Cancel" tid="2f2a4f"></lui-button>\n\t    <lui-button x-variant="inverse" qva-activate="$event.preventDefault(); confirm()" name="confirm" q-translation="{{confirmLabel}}" tid="2f2a56" ng-disabled="startSpinnerTimeout !== null" ></lui-button>\n\t</footer>\n\n</qv-modal-dialog>\n'},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;var t={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"};function n(e){return e<0?Math.ceil(e):Math.floor(e)}function i(e){if(e){var n=e.toLowerCase().replace(/(.)s$/,"$1");e=t[e]||n}return e}function r(e){var t={},n,r;for(r in e)if(e.hasOwnProperty(r)){n=i(r);n&&(t[n]=e[r])}return t}function o(e){var t=r(e),n=t.year||0,i=t.month||0,o=t.week||0,a=t.day||0,l=t.hour||0,c=t.minute||0,u=t.second||0,d=t.millisecond||0;this._input=e;this._milliseconds=+d+1e3*u+6e4*c+36e5*l;this._days=+a+7*o;this._months=+i+12*n;this._data={};s.call(this)}function a(t){var n="number"===typeof t,i={},r=null,a,s;if(n)i.milliseconds=t;else if(!!(r=e.exec(t))){a="-"===r[1]?-1:1;s=function e(t){var n=t&&parseFloat(t.replace(",","."));return(Number.isNaN(+n)?0:n)*a};i={y:s(r[2]),M:s(r[3]),d:s(r[4]),h:s(r[5]),m:s(r[6]),s:s(r[7]),w:s(r[8])}}return new o(i)}function s(){var e=this._milliseconds,t=this._days,i=this._months,r=this._data,o,a,s,l;r.milliseconds=e%1e3;o=n(e/1e3);r.seconds=o%60;a=n(o/60);r.minutes=a%60;s=n(a/60);r.hours=s%24;this.hours=function(){return r.hours};t+=n(s/24);r.days=t%30;this.days=function(){return r.days};i+=n(t/30);r.months=i%12;l=n(i/12);r.years=l;function c(e){return 365*Math.floor(e/12)}this.asHours=function(){var t=this._days+c(this._months);return 24*t+e/36e5};this.asDays=function(){var t=this._days+c(this._months);return t+e/864e5}}return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92),n(49),n(91),n(262),n(183),n(325)],r=function(e,t,n,i,r){var o;var a=e.extend("ODAGRestService",{init:function e(t,n,i,r){this._host=t;this._port=n;this._isSecured=r;this._proxy=i},_errorHandler:function e(t){if(!t.isHandled){t.isHandled=true;var r=t.response&&t.response.obj&&t.response.obj.message?t.response.obj.message:"";r||t&&(500===t.status?r=n.get("odag.Error.Unreachable"):t.message&&(r=n.get(t.errObj.message)));i.show({title:n.get("odag.Error.Title"),message:r})}throw t},_isODAGAvailableErrorHandler:function e(t){var n=t.statusCode%500;if(n>=0&&n<100)return false;this._errorHandler(t)},_getAPI:function e(){if(!o){var n=t.getFlag("ODAG_SAAS_ENABLED")?"api":"api/odag/v1";var i=t.getFlag("ODAG_SAAS_ENABLED")?"odag/openapi":"openapi";var a=t.getFlag("ODAG_SAAS_ENABLED");o=r.getApi(n,i,this._isSecured,this._host,this._port,this._proxy,a)}return o},_getLinksWithIds:function e(n,i){var r=null;r={linkList:i};return this._getAPI().then(function(e){if(t.getFlag("ODAG_SAAS_ENABLED"))return e.apis.Link.SyncAppLinkUsages({id:1,selAppId:n},{requestBody:r}).then(function(e){return e.body});return e.apis.Link.SyncAppLinkUsages({selAppId:n,linkUsagePayload:r}).then(function(e){return e.body})}).catch(this._errorHandler)},_getLinks:function e(){return this._getAPI().then(function(e){return e.apis.Link.LinksGet().then(function(e){return e.body})}).catch(this._errorHandler)},_getLink:function e(t){return this._getAPI().then(function(e){return e.apis.Link.LinkGet({linkId:t}).then(function(e){return e.body})}).catch(this._errorHandler)},_isODAGAvailable:function e(){return this._getAPI().then(function(e){if(e.apis.Settings)return!!t.getFlag("ODAG_SAAS_ENABLED")&&e.apis.Settings.IsOdagAvailable().then(function(e){return e.body.available});return e.apis.Global.IsOdagAvailable().then(function(e){return e.body})}).catch(this._isODAGAvailableErrorHandler.bind(this))},_canCreateLink:function e(t){return this._getAPI().then(function(e){var n={};t&&(n.optSelectAppId=t);return e.apis.Link.LinkCanCreate(n).then(function(e){return e.body})},function e(){return{canCreateLinks:false}}).catch(this._errorHandler)},_createLink:function e(n){var i=this;return this._getAPI().then(function(e){if(t.getFlag("ODAG_SAAS_ENABLED"))return e.apis.Link.LinkCreate({id:n.id},{requestBody:n}).then(function(e){return e.body}).catch(i._errorHandler);return e.apis.Link.LinkCreate({linkPayload:n}).then(function(e){return e.body})}).catch(this._errorHandler)},_deleteLink:function e(n,i){var r={statusSetting:"decommission",modifiedDate:i.data.modifiedDate};return this._getAPI().then(function(e){if(t.getFlag("ODAG_SAAS_ENABLED")){r.name=i.data.name;r.selectionApp=i.data.selectionApp;return e.apis.Link.LinkUpdate({linkId:n},{linkId:n,requestBody:r}).then(function(e){return e.body})}return e.apis.Link.LinkUpdate({linkId:n,linkPayload:r}).then(function(e){return e.body})}).catch(this._errorHandler)},_updateLink:function e(n,i){var r=this;return this._getAPI().then(function(e){if(t.getFlag("ODAG_SAAS_ENABLED"))return e.apis.Link.LinkUpdate({linkId:n},{linkId:n,requestBody:i}).then(function(e){return e.body}).catch(r._errorHandler);return e.apis.Link.LinkUpdate({linkId:n,linkPayload:i}).then(function(e){return e.body})}).catch(this._errorHandler)},_renameApp:function e(n,i){return this._getAPI().then(function(e){var r={appName:i};if(t.getFlag("ODAG_SAAS_ENABLED"))return e.apis.Request.RenameApp({requestId:n},{requestId:n,requestBody:r});return e.apis.Request.RenameApp({requestId:n,renameAppPayload:r})}).catch(this._errorHandler)},_deleteApp:function e(t){return this._getAPI().then(function(e){return e.apis.Request.DeleteApp({requestId:t})}).catch(this._errorHandler)},_reloadApp:function e(n,i,r,o,a){var s={};if(i){a&&(s.copyRequest=a);s.actualRowEst=i;s.bindSelectionState=r;s.selectionState=o}return this._getAPI().then(function(e){if(t.getFlag("ODAG_SAAS_ENABLED"))return e.apis.Request.ReloadApp({requestId:n},{requestId:n,requestBody:s});return e.apis.Request.ReloadApp({requestId:n,reloadAppPayload:s})}).catch(this._errorHandler)},_getSelections:function e(t){return this._getAPI().then(function(e){return e.apis.Request.GetSelections({requestId:t}).then(function(e){return e.body})}).catch(this._errorHandler)},_requestAction:function e(t,n,i,r){var o={requestId:t,action:n,ignoreSucceeded:true};void 0!==i&&(o.delGenApp=i);void 0!==r&&(o.autoAck=r);return this._getAPI().then(function(e){return e.apis.Request.RequestAction(o).then(function(e){return e.body})}).catch(this._errorHandler)},_getGeneratedAppsForLink:function e(t,n,i,r,o,a,s){var l={linkId:t};o&&(l.user=o);a&&(l.state=a);s&&(l.pending=s);return this._getAPI().then(function(e){return e.apis.Request.LinkRequestsGet(l).then(function(e){return e.body})}).catch(this._errorHandler)},_generateApp:function e(n,i,r,o,a,s,l){var c={linkId:n,requestPostPayload:{clientContextHandle:r,actualRowEst:a,selectionApp:i,bindSelectionState:s,selectionState:l,sheetname:o}};return this._getAPI().then(function(e){var i;i=t.getFlag("ODAG_SAAS_ENABLED")?e.apis.Request.LinkRequestCreate({linkId:n},{linkId:n,requestBody:c.requestPostPayload}):e.apis.Request.LinkRequestCreate(c);return i.then(function(e){return e.body})}).catch(this._errorHandler)},_getTemplateApps:function e(){var t={appType:"template"};return this._getAPI().then(function(e){return e.apis.Apps.GetApps(t).then(function(e){return e.body})}).catch(this._errorHandler)},getTemplateApps:function e(){return this._getTemplateApps()},getODAGLinksWithIds:function e(t,n){return this._getLinksWithIds(t,n)},getODAGLink:function e(t){return this._getLink(t)},canCreateLink:function e(t){return this._canCreateLink(t)},createODAGLink:function e(t){return this._createLink(t)},deleteODAGLink:function e(t,n){return this._deleteLink(t,n)},updateODAGLink:function e(t,n){return this._updateLink(t,n)},renameApp:function e(t,n){return this._renameApp(t,n)},deleteApp:function e(t){return this._deleteApp(t)},isODAGAvailable:function e(){return this._isODAGAvailable()},reloadApp:function e(t,n,i,r,o){return this._reloadApp(t,n,i,r,o)},getSelections:function e(t){return this._getSelections(t)},generateApp:function e(t,n,i,r,o,a,s){return this._generateApp(t,n,i,r,o,a,s)},getGeneratedAppsForLink:function e(t,n,i,r,o,a,s){return this._getGeneratedAppsForLink(t,n,i,r,o,a,s)},requestAction:function e(t,n,i,r){return this._requestAction(t,n,i,r)}});return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={qInfo:{qType:"odag-toolbar-navpoint"},qMetaDef:{},qHyperCubeDef:{qDimensions:[],qInitialDataFetch:[{qLeft:0,qTop:0,qWidth:1,qHeight:0}]}};var t={qInfo:{qType:"odag-toolbar-navpoint"},MaxRowCountExpression:{qValueExpression:{qExpr:""}}};return{fieldHyperCubeProperties:e,maxRowExpression:t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover position="input.menuOptions.position"\n\t\t\t\t\t  on-close-view="onOutsidePopover(event)"\n\t\t\t\t\t  class= "qv-guidance-popover"\n\t\t\t\t\t  ng-style="{\'opacity\': popupClosing? 0 : 1, \'width\': input.menuOptions.width, \'top\': input.menuOptions.bottom}" \n>\n\t<div tid="dm-gridview-guidance-popover-content" class="qv-guidance-popover-content">\n\t\t<div class="qv-guidance-popover-title">{{input.title}}</div>\n\t\t<div class="qv-guidance-popover-message">{{input.message}}</div>\n\t\t<div class="qv-guidance-popover-button">\n\t\t\t<button \n\t\t\t\ttid="dm-gridview-guidance-popover-ok-button"\n\t\t\t\tclass="lui-button  lui-button--success qui-popover-ok-button" qva-activate="onCloseClicked()">{{input.buttonText}}</button>\n\t\t</div>\n\t</div>\n</lui-popover>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(89)],r=function(e){function t(e){return e.getProperties().then(function(e){return e.qExtendsId})}function n(n){var i=new e;t(n).then(function(e){n.copyFrom(e).then(function(){n.getProperties().then(function(e){delete e.qMetaDef;delete e.descriptionExpression;delete e.labelExpression;n.setProperties(e).then(function(){i.resolve(e)})})})});return i.promise}return{breakLink:n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(){this.tabs=null;this.activeTab=null;this.fullMode=true;this.query="";this.table="All";this.tabExpanded=false;this.expandTab=function(e){this.activeTab=e;this.tabExpanded=true}}e.prototype.setTabs=function(e){this.tabs=e};e.prototype.activateTab=function(e){if(e.loading)return;if(this.activeTab&&e.id===this.activeTab.id&&this.tabExpanded){this.tabExpanded=false;this.query=""}else this.expandTab(e)};e.prototype.getActiveTabId=function(){return this.activeTab&&this.tabExpanded?this.activeTab.id:null};e.prototype.openSection=function(e){for(var t=0;t<this.tabs.length;++t){var n=this.tabs[t];var i=n.openSection(e);if(i){this.expandTab(n);return true}}return false};e.prototype.resize=function(e){null!=this.activeTab&&this.activeTab.resize(e)};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(754),n(755),n(757),n(762),n(800),n(803),n(807),n(810),n(817),n(821),n(115),n(91),n(49),n(113)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p){function h(t){var i=new n(t,"charts");var r={id:"assets-tab-template",section:i,name:"Common.Charts",button:{icon:"object",text:"Common.Charts"}};return new e(r)}function v(t){var n=new i(t);var r={id:"assets-tab-field",section:n,name:"Common.Fields",hasTableFilter:true,haveManageDataButtons:p.LIBRARY_DATA_BUTTONS,button:{icon:"database",text:"Common.Fields"}};var o=new e(r);return o}function g(e){var n=[new r(e),new o(e),new a(e)];f.getFlag("ALT_STATE_ONE")&&n.push(new c(e));var i={id:"library",sections:n,name:"Toolbox.Tab.Title.MasterItems",button:{icon:"link",text:"Tooltip.Toolbox.MasterItems"}};return new t(i)}function m(e,i,r){var o="Common.CustomObjects";var a=[];var l=r.then(function(){(f.getFlag("CLOUD_EXTENSIONS")||!f.getFlag("CLOUD_EXTENSIONS")&&!f.getFlag("DISABLE_ONPREM_EXTENSIONS"))&&a.push(new n(e,"extensions"));var t=u.getRegisteredNames();var r={};t.forEach(function(e){var t=u.getType(e).getLibraryInfo();t&&t.bundle&&t.bundle.id&&!r[t.bundle.id]&&(r[t.bundle.id]=t.bundle)});Object.keys(r).forEach(function(t){a.push(new n(e,"extensions",t,r[t]))});return i.then(function(t){t.forEach(function(t){var n=new s(e);n.title=t.data.name;n.name=t.data.name;n.id=t.data.name;n.infoTitle=d.get("AssetsPanel.Widgets.libraryInfoHeading",n.title);n.description=t.data.description;n.onLoadData(t.resolvedWidgets);a.push(n)});return a})});var c={id:"widgets",sectionsPromise:l,name:o,longname:"Common.CustomObjects",button:{icon:"puzzle",text:"Common.Extensions"}};return new t(c)}function b(t,n){var i=new l(t,n);var r={id:"assets-tab-odag",section:i,name:"ODAG.Toolbox.PanelTitle.NavLinks",hasTableFilter:false,button:{icon:"sign-post",text:"ODAG.Toolbox.Title.ODAGToolbar"}};var o=new e(r);return o}return{createWidgetTab:m,createMasterItemsTab:g,createFieldTab:v,createTemplateTab:h,createODAGTab:b}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(352)],r=function(e){var t;t=e.extend({init:function e(t){t.component={template:'<div id="{{tab.id}}" class="assets-tab"><qv-assets-section section="tab.section" /></div>',controller:function e(){}};this._super(t);this.section=t.section},resize:function e(t){this._super(t);this.section.resize(t)},openSection:function e(t){return this.section.id===t}});Object.defineProperty(t.prototype,"hitCount",{get:function e(){return this.section.matchCount?this.section.matchCount:""}});return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(352),n(756),n(102)],r=function(e,t,n,i){function r(t,n){var i=t.tab;t.$evalAsync(function(){var r=n.find("#libAccordion");var o=r.find("header");var a=i.activeIndex;var s,l;r.accordion({fillSpace:true,heightStyle:"fill",animate:!("ontouchstart"in window)&&"swing",active:a,beforeActivate:function n(c,u){a=o.index(u.newHeader);s=u.oldPanel.height();l=u.oldPanel.width();i.sections[a].resize({height:s,width:l});e.$apply(t);r.addClass("animating")},activate:function e(){i.sections[a].resize({height:s,width:l});r.removeClass("animating");var t=r.accordion("option","active");i.activeIndex=t}});function c(){r.accordion("option","active",i.activeIndex)}function u(){r.accordion("refresh");i.activeIndex>-1&&i.sections[i.activeIndex].resize()}i.Activate.bind(c);i.Resize.bind(u);t.$on("$destroy",function(){i.Activate.unbind(c);i.Resize.unbind(u)})})}var o;o=t.extend({init:function e(t){var o=this;t.component={template:n,controller:["$scope","$element",r]};o._super(t);o.activeIndex=-1;if(t.sections){o.sections=t.sections;o.activeIndex=this.sections.length-1}else{o.sections=[];o.loading=true;t.sectionsPromise.then(function(e){o.loading=false;o.sections=e;o.activeIndex=o.sections.length-1})}i.create(o,"Activate")},openSection:function e(t){for(var n=0;n<this.sections.length;++n){var i=this.sections[n].id===t;if(i){this.activeIndex=n;this.Activate.emit(n);return true}}return false}});Object.defineProperty(o.prototype,"hitCount",{get:function e(){var t=0;for(var n=0;n<this.sections.length;++n)t+=this.sections[n].matchCount;return t}});return o}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div id="{{tab.id}}" class="assets-tab">\n    <section class="qui-toolssectionframe" class="accordion" id="libAccordion">\n        <header ng-repeat-start="section in tab.sections" ng-if="!section.hidden" data-accordion-name="{{section.name}}" tid="accordion-header-{{section.id}}" ng-hide="tab.hiddenHeaders" >\n            <div class="active-marker"></div>\n            <div class="header-content">\n                <div ng-if="section.icon" class="icon {{section.icon}}"></div>\n                <h2 class="section-name" q-translation="{{section.title}}"></h2>\n                <qv-outlined-search-hit-indicator count="section.matchCount"></qv-outlined-search-hit-indicator>\n            </div>\n\t\t</header>\n\t\t\n        <div class="assets-section-items" ng-if="!section.hidden" ng-repeat-end>\n            <qv-assets-section section="section" />\n\t\t</div>\n\n    </section>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(95),n(91),n(2),n(94),n(49),n(126),n(136),n(112),n(149),n(137),n(758),n(759),n(761),n(345),n(89),n(111)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v){return s.extend({init:function e(){this.id=a.sectionIDs.template;this.list=[];this.name="template";this.templateType=arguments.length>1?arguments[1]:"charts";this.bundle=arguments.length>2?arguments[2]:void 0;this.bundleInfo=arguments.length>3?arguments[3]:void 0;"charts"===this.templateType&&(this.title="Common.Charts");if("extensions"===this.templateType){this.id=a.sectionIDs.extensions;this.title="Common.Extensions";this.infoTitle=n.get("Common.ExtensionsInfoTitle");this.description=n.get("Common.ExtensionsDescription");this.hasMetaInfo=true;this.shouldShowCloudExtensionsWarning=false;var t=this;if(!o.getFlag("HIDE_ABOUT_BUTTON")){var r={url:"about/v1/systemInfo",headers:{"x-qlik-capabilities":"about"},method:"GET"};this.bundle||i(r).then(function(e){var n=e.data;n.deploymentType&&"QlikSenseServer"===n.deploymentType&&p.showCloudExtensionWarning().then(function(e){t.shouldShowCloudExtensionsWarning=e})})}this.cloudExtensionWarning=n.get("Object.WarningMessage.Cloud.Extensions.NotAvailable")}if("cloudExtensions"===this.templateType){this.id=a.sectionIDs.cloudExtensions;this.title="Common.CloudExtensions";var s=this;h.areCloudExtensionsAvailable().then(function(e){if(e){s.infoTitle=n.get("Common.AvailCloudExtensionsInfoTitle");o.getFlag("DISABLE_ONPREM_EXTENSIONS")?s.description=n.get("Common.AvailCloudExtensionsDescription"):s.description=n.get("Common.AvailCloudExtensionsDescriptionDesktop")}else{s.infoTitle=n.get("Common.UnavailCloudExtensionsInfoTitle");s.description=n.get("Common.UnavailCloudExtensionsDescription")}});this.hasMetaInfo=true}if(this.bundle&&this.bundleInfo){this.id=this.bundle;this.title=this.bundleInfo.name;this.infoTitle=n.get("AssetsPanel.Widgets.libraryInfoHeading",this.bundleInfo.name);this.description=this.bundleInfo.description}this.tooltip="charts"===this.templateType?"":"Common.Extensions";this._super.apply(this,arguments);this.initPreviewManager()},initLoadData:function e(){d.create(this.templateType).then(this.onLoadData.bind(this))},initPreviewManager:function e(){function i(e){t.publish("/ui/library/addToSheet",{item:e})}function o(e){var t=e.item;var r={query:e.query,name:t.name,description:t.descriptionKey?n.get(t.descriptionKey):t.description,imageUrl:t.previewIconURL,hasImage:!!t.previewIconURL,icon:t.icon,tags:t.tags||[]};r.buttons=[c.buttonAddToSheet(i,e.closePreview,t,l.isAddToSheetMode())];r.close=e.closePreview;c.alignPreview(r,e.$element);return f.show(r)}this.previewManager=c.previewManagerFactory({getSlowInfo:function e(t){var n=new v;var i=document.createElement("IMG");var r=new Image;r.onload=function(){i.src=this.src;i.parentNode&&i.parentNode.removeChild(i);n.resolve()};r.onerror=function(){i.parentNode&&i.parentNode.removeChild(i);n.resolve()};r.src=t.previewIconURL;return n.promise},createPreview:o,itemDialogHandler:u,State:r})},onLoadData:function e(t){this.loading=false;for(var n=0;n<t.length;++n)t[n].id=t[n].template;function i(e){var t=new Date(e);return Number.isNaN(+t)||Date.now()<t}var r=this.bundle;var o=t.filter(function(e){return r?!!e.bundle&&e.bundle.id===r&&i(e.deprecated):!e.bundle});0===o.length&&this.bundle&&(this.hidden=true);this.list=l.localeOrderBy(o,function(e){return e.name});this.onFilter()},doFilter:function e(t){var n=this.assets.query;return t.filter(function(e){return e.isLibraryItem&&l.librarySearchFn(e,n)})},openContextMenu:function n(i,r){if(!l.isAddToSheetMode())return;var o=e.getService("qvContextMenu").menu();i.selected||l.toggleSelection(i,r);o.addItem({translation:"contextMenu.addToSheet",tid:"add-to-sheet",select:function e(){t.publish("/ui/library/addToSheet",{item:i})}});u.openContextMenu(o,i,r)}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(115),n(124),n(89),n(91),n(90)],r=function(e,t,n,i,r){function o(e){return{id:"newObject",args:{template:e.template,init:{}}}}var a={create:function s(l){var c=new n;t.load().then(function(){var t=e.getRegisteredNames();var n=t.map(function(t){var n=r.extend(true,{},e.getType(t).getLibraryInfo());n.getDropOption=o.bind(null,n);a.translateName(n,i.get);a.translateDescription(n,i.get);return n}).filter(function(e){return e.visible&&"visualization"!==e.type&&"charts"===l||"visualization"===e.type&&"extensions"===l&&!e.certified||"visualization"===e.type&&"cloudExtensions"===l&&e.certified});n.forEach(function(e){e.type="template"});c.resolve(n)});return c.promise},translateName:function e(t,n){if(!t)throw new TypeError("No item passed");if("function"!==typeof n)throw new TypeError("No translation function passed");t.translationKey&&(t.name=n(t.translationKey))},translateDescription:function e(t,n){if(!t)throw new TypeError("No item passed");if("function"!==typeof n)throw new TypeError("No translation function passed");t.descriptionKey&&(t.description=n(t.descriptionKey))}};return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(760)],r=function(e,t){function n(n){var i={template:t,controller:["$scope",function(e){e.input=n}],dock:"right",alignTo:n.alignTo[0]};return e.getService("luiPopover").show(i)}return{show:n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover id="library-preview" class="template-preview" x-arrow="arrow">\n\n\t<lui-popover-body>\n\t\t<div ng-show="input.hasImage" class="template-image-container">\n\t\t\t<img ng-src="{{input.imageUrl}}">\n\t\t</div>\n\t\t<i ng-show="!input.hasImage" class="template-icon  lui-icon  lui-icon--{{input.icon}}"></i>\n\n\t\t<h2 class="title">\n\t\t\t<span qve-highlight text="{{input.name}}" query="input.query"></span>\n\t\t</h2>\n\n\t\t<p class="description">{{input.description}}</p>\n\n\t\t<div ng-if="input.tags.length">\n\t\t\t<h2><span q-translation="Common.Tags"></span></h2>\n\t\t\t<ul class="tags">\n\t\t\t\t<li ng-repeat="tag in input.tags" class="lui-tag" ng-class="{ \'lui-matched\': tag.matching }" title="{{tag}}">{{tag}}</li>\n\t\t\t</ul>\n\t\t</div>\n\t</lui-popover-body>\n\n\t<lui-popover-footer>\n\t\t<button class="lui-fade-button" ng-repeat="button in input.buttons.slice().reverse()" q-title-translation="{{button.title}}"\n\t\t\t\tqva-activate="$event.preventDefault(); button.action($event)" ng-disabled="button.disabled" tid="{{button.tid}}">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--{{button.icon}}"></span>\n\t\t</button>\n\t</lui-popover-footer>\n</lui-popover>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(2)],r=function(e){var t=function e(){};var n=function e(t){var n=t.data;if(Array.isArray(n)){var i={};n.forEach(function(e){Object.keys(e.attributes||{}).forEach(function(t){i[t]=e.attributes[t]})});return i}return t};t.getWarnings=function(){var t={method:"GET",url:"api/dbws/deployment-warnings"};return e(t).then(function(e){return n(e.data)}).catch(function(){return{}})};t.showCloudExtensionWarning=function(){return t.getWarnings().then(function(e){return Boolean(e.showCloudExtensionWarning)}).catch(function(){return false})};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(54),n(94),n(126),n(136),n(112),n(149),n(137),n(763),n(154),n(106),n(144),n(791),n(148),n(793),n(796),n(229),n(49),n(157),n(142),n(89),n(111),n(233)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v,g,m,b,y,x){return r.extend({init:function t(){this.list=[];this.expanded={};this.id=i.sectionIDs.field;this.title="Assets.Section.Fields.Name";this.tid="fields.All";this._super.apply(this,arguments);this.initPreviewManager();this.classificationService=e.getService("classificationService")},bindWatches:function e(){this._super();this.$scope.$watch("assets.table",this.onFilter.bind(this))},initLoadData:function e(){c.getList().then(function(e){this.$scope.listModel=e}.bind(this));u(this.$scope,"listModel",this.onLoadData.bind(this))},initPreviewManager:function e(){var t=this;function i(e){o.addItemToSheetOrVisualization(e)}function r(e){l.addFieldAsDimension(t.assets,e.name)}function c(e){l.addFieldAsMeasure(t.assets,e.name)}function u(e){var t=[];for(var n=0;n<e.length;n++)t.contains(e[n].derivedDefinitionName)||t.push(e[n].derivedDefinitionName);return t}function d(e){return!e.isDerived}function h(e){var t=e.item;var n=this.$scope;t.app=n.listModel.app;var s=t.derivedFields?u(t.derivedFields):void 0;var l=d(t);var h={query:e.query,name:t.name,displayName:t.displayName,sourceField:t.sourceField,calendarTemplateName:t.calendarTemplateName?t.calendarTemplateName:t.derivedDefinitionName,derivedCalendars:s?o.localeOrderBy(s.slice()):[],isDerivedFromDate:t.isDerivedFromDate,isDateField:t.isDateField,tables:t.srcTables?o.localeOrderBy(t.srcTables.slice()):[],typeTranslationKey:p.getTypeTranslationKey(t.tags),alwaysOneSelected:false,isSingleSelectSupported:l};l&&(h.alwaysOneSelected=e.modelInfo.isSingleSelect);h.buttons=[a.buttonAddTo(i,e.closePreview,t,o.getAddToText(),o.isAddToMode())];o.permissionToCreate("dimension")&&h.buttons.push(a.buttonAddDimension(r,e.closePreview,t,true));o.permissionToCreate("measure")&&h.buttons.push(a.buttonAddMeasure(c,e.closePreview,t,true));l&&h.buttons.push(a.buttonFieldSettings(v.show,e.closePreview,t,true));h.close=e.closePreview;a.alignPreview(h,e.$element);return f.show(h)}this.previewManager=a.previewManagerFactory({getSlowInfo:function e(n){var i=new x;var r=t.$scope;var o;o=d(n)?y.isSingleSelect(r.listModel.app,n.name):x.resolve(false);o.then(function(e){i.resolve({isSingleSelect:e})});return i.promise},createPreview:h.bind(this),itemDialogHandler:s,State:n})},onLoadData:function e(t){if(m.getFlag("DISABLE_AUTO_CHART")||b.isVariableDefined("DISABLE_AUTO_CHART")){this.loading=false;t=d.create(t);this.list=o.localeOrderBy(t,function(e){return e.name});this.onFilter()}else this.classificationService.getClassification().then(function(e){var n=e?new g(e):void 0;this.loading=false;t=d.create(t,n);this.list=o.localeOrderBy(t,function(e){return e.name});this.onFilter()}.bind(this),function(){this.loading=false;t=d.create(t);this.list=o.localeOrderBy(t,function(e){return e.name});this.onFilter()}.bind(this))},doFilter:function e(n){var i=this.assets.query;var r=this.assets.table;var a=[];if(i&&""!==i)for(var s=0;s<n.length;s++){var l=t.extend({},n[s]);var c=l.derivedFields;c&&c.length>0&&(l.derivedFields=[]);a.push(l);if(c&&c.length>0)for(var u=0;u<c.length;u++)a.push(c[u])}else a=n;return a.filter(function(e){var t=o.librarySearchFn(e,i);var n="All"===r||-1!==e.srcTables.indexOf(r);return t&&n})},openContextMenu:function t(n,i){n.selected||o.toggleSelection(n,i);var r=e.getService("qvContextMenu").menu({docking:"BottomLeft"}),a=this,c=this.$scope.listModel.app;o.isAddToMode()&&r.addItem({translation:o.getContextMenuAddToText(),tid:"add-to-sheet",select:function e(){o.addItemToSheetOrVisualization(n)}});o.permissionToCreate("dimension")&&r.addItem({translation:"contextMenu.addToMasterItems.AsDimension",tid:"add-field-as-dimension",select:function e(){l.addFieldAsDimension(a.assets,n.name)}});o.permissionToCreate("measure")&&r.addItem({translation:"contextMenu.addToMasterItems.AsMeasure",tid:"add-field-as-measure",select:function e(){l.addFieldAsMeasure(a.assets,n.name)}});o.permissionToCreate("measure")&&!n.isDerivedFromDate&&r.addItem({translation:"AssetsPanel.CalendarFlags.GenerateCalendarMeasures",tid:"generate-calenar-measures",select:function t(){var i=e.getService("luiDialog");i.show({controller:h.component.controller,template:h.component.template,input:{selectedField:n,assets:a.assets}})}});n.isDerived||r.addItem({translation:"contextMenu.fieldSettings",tid:"open-field-settings",select:function e(){n.app=c;v.show(n)}});s.openContextMenu(r,n,i)},addItemToSheetOrActiveObject:function e(t,n){n?o.addItemToSheetOrVisualization(t,n):o.addItemToSheetOrVisualization(t)}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(502),n(126)],r=function(e,t){function n(e){if("object"!==o(e))throw new Error("assets")}function i(e){if("string"!==typeof e)throw new Error("fieldName")}function r(t,r,o,a){n(o);i(a);e[t](a,function(){o.openSection(r)})}return{addFieldAsDimension:r.bind(null,"showAddDimensionDialog",t.sectionIDs.dimension),addFieldAsMeasure:r.bind(null,"showAddMeasureDialog",t.sectionIDs.measure)}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(170),n(765),n(767),n(310),n(389),n(459)],r=function(e,t,n,i,r,o,a){function s(e,t,r){if(!e)throw new Error("Raw data is undefined.");if(!r)throw new Error("Cached ideal data is undefined.");var o,a,s=[];for(o in e.qk){a=e.qk[o];var u=a.qTables.length<3?l(r,a):c(r,a);s.push(u)}n.markConnectionAsCircularReferences(t,s);i.appendArms(s);return s}function l(e,n){var i=n.qKeyFields[0];var r=t.encodeTableName(n.qTables[0]);var o=t.encodeTableName(n.qTables[1]);var a=f(e,r);var s=f(e,o);var l={fieldName:i,tables:[r,o],lines:[]};var c=u(e,r,i,s.left);var d=u(e,o,i,a.left);l.lines.push({start:{targetIsToLeft:c.targetIsToLeft,top:c.top,left:c.left},end:{targetIsToLeft:d.targetIsToLeft,top:d.top,left:d.left},startTable:r,endTable:o});return l}function c(e,n){var i=Number.MAX_VALUE,r=Number.MAX_VALUE,o=0,a=0,s=n.qKeyFields[0];var l={fieldName:s,tables:[],lines:[]};var c;for(c in n.qTables){var d=t.encodeTableName(n.qTables[c]);var p=f(e,d);var h=1===t.getTableElement(d).length?t.getFieldElement(d,s).position().top:p.height;l.tables.push(d);i=Math.min(i,p.top);r=Math.min(r,p.left);o=Math.max(o,p.top+h);a=Math.max(a,p.left+p.width)}l.interception={top:i+(o-i)/2,left:r+(a-r)/2};for(c in n.qTables){var v=t.encodeTableName(n.qTables[c]);l.lines.push({start:{targetIsToLeft:u(e,v,s,l.interception.left).targetIsToLeft,top:u(e,v,s,l.interception.left).top,left:u(e,v,s,l.interception.left).left},end:{top:l.interception.top,left:l.interception.left},startTable:v})}return l}function u(n,i,s,l){if("number"!==typeof l)throw new Error("targetLeftPosition is not a number");var c=45;var u=5;var p=t.getTableElement(i);var h=p.find("li[data-name='"+s.replace(/'/g,"\\'")+"']");var v=o.getCurrentZoomLevel();var g=t.getTableHeader(i).outerHeight();var m=f(n,i);var b=t.getTableElementTop(i);var y=t.getTableHeightByTableName(i);var x=d(n,i,l);var S=x?m.left+m.width-u:m.left+u;var w;if(h.offset()){w=h.offset().top-c+e(".table-container").scrollTop();w=a.getDimensionBasedOnZoom(w,v);w+=h.height()/2}else w=0;var q=y<=g;var C=b+g;(w<C||q)&&(w=b+g/2);var _=b+y-r.OFFSET_BETWEEN_TABLE_BOTTOM_AND_UL_BOTTOM;w>_&&(w=_);return{targetIsToLeft:x,top:w,left:S}}function d(e,t,n){if("number"!==typeof n)throw new Error("targetLeftPosition is not a number");var i=f(e,t);return i.left<n}function f(e,n){var i=e[n];if(!i)throw new Error('Cannot find table "'+n+'" for position.');var r=t.getTableElementTop(n);var o=t.getTableElementLeft(n);var a=t.getTableHeightByTableName(n);var s=t.getTableWidthByTableName(n);return{top:r,left:o,height:a,width:s}}return{convertRawDataToIdealConnectionData:s}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(766)],r=function(e){function t(t,n){e.getTablesWithCircularReferences(t,function(e){for(var t in n){var i=n[t];for(t in i.lines){var r=i.lines[t];-1===e.indexOf(r.startTable)&&-1===e.indexOf(r.endTable)||(r.isCircular=true)}}})}return{markConnectionAsCircularReferences:t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(279)],r=function(e){function t(t,n){e.getTablesAndKeys(t).then(function(t){e.getLooselyCoupledVector(function(e){var i=[];for(var r=0;r<t.qtr.length;r++){var o=e.qv[r];if(0!==o){var a=t.qtr[r].qName;i.push(a)}}n(i)})})}return{getTablesWithCircularReferences:t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i;!(i=function(){function e(e){var n,i,r,o,a;for(n in e){var s=[];i=e[n];for(r in i.lines){o=i.lines[r];a=t(i,o);s=s.concat(a)}i.lines=i.lines.concat(s)}}function t(e,t){var n=15,i=7,r=5,o,a,s,l,c,u=[];a=t.start.left+(t.start.targetIsToLeft?n:-n);s=a+(t.start.targetIsToLeft?-r:i);l=t.end.left+(t.end.targetIsToLeft?n:-n);c=l+(t.start.targetIsToLeft?r:-i);o={left:t.end.targetIsToLeft?c:s,top:t.end.targetIsToLeft?t.end.top:t.start.top};u.push({isCircular:t.isCircular,isArm:true,start:{top:t.start.top,left:t.start.left},end:{top:t.start.top,left:a},startTable:t.startTable,endTable:t.endTable,connectionPoint:o});t.start.left=a;if(!e.interception){o={left:t.end.targetIsToLeft?s:c,top:t.end.targetIsToLeft?t.start.top:t.end.top};u.push({isCircular:t.isCircular,isArm:true,start:{top:t.end.top,left:t.end.left},end:{top:t.end.top,left:l},startTable:t.startTable,endTable:t.endTable,connectionPoint:o});t.end.left=l}return u}return{appendArms:e}}.call(t,n,t,e),void 0!==i&&(e.exports=i))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(90),n(127),n(769),n(770),n(94),n(771),n(91),n(354),n(107),n(166),n(317),n(125),n(11),n(206),n(179),n(270),n(161),n(100),n(779),n(99),n(249),n(145),n(268),n(211),n(209),n(263),n(503),n(296),n(298),n(782)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v,g,m,b,y,x){var S=l.dimensionTypes,w,q="drilldown",C="single",_,I=false;function E(e,t,n){function i(){var e=n.input.dimension.selectedFields[0];!e||""!==e&&e!==n.input.dimension.name||(n.input.dimension.name="")}e===q&&t===C&&(n.add?i():!I&&n.colorModelWrapper.hasColors()?d.show({text:"library.colors.drilldownwarning"}).then(function(){i()}).catch(function(){n.input.dimension.type=C;A(n)}):i());e===C&&1===n.input.dimension.selectedFields.length&&_.validateFieldsInDimension();if(e===C&&n.input.dimension.selectedFields.length>1){I=true;d.show({text:"Dimensions.Dialog.FieldDeleteWarning"}).then(function(){n.input.dimension.type=C;n.input.dimension.selectedFields.length=1;A(n);I=false;n.colorModelWrapper=new y(n.input.dimension);n.colorModelWrapper.initModel()}).catch(function(){I=false});n.input.dimension.type=t}}function D(e,t,n){if(n.input.dimension.type===C&&1===e.length&&_.isFieldInList(e[0],n.input.dimension.allFields)){var i=m.trimAutoCalendarName(e[0]);var r=m.trimAutoCalendarName(t[0]);(1!==t.length||r!==n.input.dimension.name&&n.input.dimension.name)&&(0!==t.length||n.input.dimension.name)||(n.input.dimension.name=i)}else n.input.dimension.type===C&&n.input.dimension.name===t[0]&&_.isFieldInList(n.input.dimension.name,n.input.dimension.allFields)&&(n.input.dimension.name="")}function A(e){e.input.dimension.allFields.forEach(function(t){t.selected=e.input.dimension.selectedFields.contains(t.qName)})}function T(e){e.input.dimension.allFields.forEach(function(t){t.used=t.used||e.input.dimension.selectedFields.contains(t.qName)})}function O(e){e.input.dimension.allFields.forEach(function(e){e.used=false})}function k(e){return{name:e.input.dimension.name,description:e.input.dimension.description,descriptionExpression:e.input.dimension.descriptionExpression,tags:e.input.dimension.tags,expr:e.input.dimension.selectedFields,type:e.input.dimension.type,baseColor:e.input.dimension.qDim.coloring.baseColor,colorsChanged:true,labelExpression:e.input.dimension.labelExpression}}function L(e,t){e.$watch("input.dimension.type",E);e.$watch("input.dimension.selectedFields",D,true);e.$watch("input.dimension.selectedTable",t.filterFields);e.$watch("input.dimension.name",function(){e.input.dimension.validity.name||t.validateNameField()});e.$watch("input.dimension.selectedFields",function(){e.input.dimension.validity.selectedFields||t.validateFieldsInDimension();e.input.dimension.selectedFields.length?e.input.dimension.fieldName=e.input.dimension.selectedFields[0]:e.input.dimension.fieldName=null},true);e.$watch("search.query",function(){t.filterFields()})}var P={template:i,controller:["$scope","qvConfirmDialog",function(e,i){var r=e.input.tableData,l=e.input.dimension;e.scrollDown=0;e.initColorMap=function(t){e.visible=t};e.theme=b;e.input.dimension.qDim.coloring||(e.input.dimension.qDim.coloring={});Object.defineProperty(e,"color",{get:function t(){return e.theme.resolveColor(e.input.dimension.qDim.coloring.baseColor)},set:function t(n){var i="undefined"!==typeof n.color?n.color:n;var r="undefined"!==typeof n.index?n.index:e.theme.currentPalette.indexOf(n);e.input.dimension.qDim.coloring.baseColor={color:i,index:r}}});l.name=m.trimAutoCalendarName(l.name);l.validity={};l.validity.description=true;l.validity.name=true;l.validity.selectedFields=true;l.validity.labelExpression=true;l.selectedFields=l.qDim.qFieldDefs;l.labelExpression=l.qDim.qLabelExpression;l.descriptionExpression=l.qDim.descriptionExpression;l.type=l.qDim.qGrouping===S.drilldown?q:C;l.stringLimits=c;l.allFields=[];w=s.get("Common.All.Tables");e.allTablesStr=w;l.selectedTable=w;if(!e.add&&l.type===C){e.colorModelWrapper=new y(l);e.colorModelWrapper.initModel()}e.showLabelExpression=function(){return l.type===C};e.search={query:""};e.sortableLists={options:{direction:"vertical",itemSelector:"li:not(.empty-expression-placeholder)"},onBegin:function e(t){d(t)},onEnter:function t(n){f.move(l.selectedFields,e.placeholderIndex,n);e.placeholderIndex=n},onMove:function t(n,i){h();if(null===i||e.placeholderIndex===n)return;n<i&&i--;f.move(l.selectedFields,n,i)},onCancel:function e(){h()},allowDrag:function e(t){if(x.isMouse(t))return!!p(t.target).closest(".field-token").length;return!!p(t.target).closest(".icon-handle").length}};e.placeholderIndex=-1;function d(t){e.placeholderIndex=t;l.selectedFields.splice(t,0,"")}function h(){if(-1!==e.placeholderIndex){l.selectedFields.splice(e.placeholderIndex,1);e.placeholderIndex=-1}}e.$root.$evalAsync(function(){_=a.create(e,u,c);L(e,_)});if(r){l.allFields=r.fields;l.filteredFields=r.fields.slice();l.tables=r.tables;l.tables.unshift(w)}e.cancel=function(){l.updateTags();!e.input.add||_.isEmpty()?e.destroyComponent():i.show({message:s.get("Dimensions.Dialog.CloseWarning"),icon:"cogwheel"}).closed.then(function(t){t&&e.destroyComponent()})};o.StateChanged.bind(e.cancel);e.showAddingFeedback=function(){e.adding=true;setTimeout(function(){e.adding=false;e.added=true;e.$apply()},500)};e.hideAddedFeedback=function(){e.added=false};e.getFieldDisplayName=function(t){var n=t.isDerived&&""===e.search.query?t.qName.substring(t.qName.lastIndexOf(".")+1,t.qName.length):m.trimAutoCalendarName(t.qName);return n};e.getTrimmedName=function(e){return m.trimAutoCalendarName(e)};e.confirm=function(){l.updateTags();l.expr=l.selectedFields;if(_.validate())if(e.input.add){e.input.callback(k(e));T(e);_.clearDialog();A(e);e.showAddingFeedback();e.color="none"}else if(e.colorModelWrapper){e.input.dimension.selectedFields.length>1&&e.colorModelWrapper.clearColors();e.colorModelWrapper.save().then(function(){e.input.callback(k(e));e.destroyComponent()})}else{e.input.callback(k(e));e.destroyComponent()}};e.selectFieldHandler=function(t,i){i.preventDefault();setTimeout(function(){var r=n.elementFromEventPosition(i);var o=r!==i.target;if(o)return;_.selectFieldHandler(t);A(e);e.$apply()},100)};e.removeItemHandler=function(t){l.selectedFields.splice(t,1);e.expressionColor=false;A(e)};function v(t,n){_.updateFieldExpression(t,n);e.expressionColor=true;A(e)}e.editExpressionHandler=function(n,i){n.preventDefault();var r=e,o=r.input.dimension.selectedFields[i]||"";"="!==o.substr(0,1)&&o.length&&(o="="+t.escapeField(o));r.input.expressionInterface(v,i,o)};A(e);O(e)}]};function M(t){var n={title:t.title,tableData:t.tableData,dimension:t.dimension,expressionInterface:t.expressionInterface,add:t.add,callback:t.callback};var i=e.getService("luiDialog").show({template:P.template,controller:P.controller,input:n,dock:"top",closeOnOutside:false,showArrow:false});return i}function N(e){e.title="Dimensions.Dialog.Add.Title";e.add=true;M(e)}function R(e){e.title="Dimensions.Dialog.Edit.Title";M(e)}e.directive("qvFieldList",["$timeout",function(e){return{template:r,link:function t(n,i){var r={minRowHeight:38,maxRowHeight:38,blockSize:60,keepItemsCount:10};var a=new h(e,r);n.scroll=a;var s=new g(a);n.$evalAsync(function(){var e=i.find(".scroll-area");var t=e.controller("qvScrollArea");var r=new v(e,e,".lui-list__item",".lui-list__item:first",".lui-list__item:last");var l=i.find(".qv-scroll-loader").controller("qvScrollLoader");a.initialize(r,s,t,l).then(function(){a.activate();a.updateViewport();n.$watch("input.dimension.filteredFields",function(e){if(!e)return;s.setList(e)})});n.$on("$destroy",function(){a.destroy();o.StateChanged.unbind(n.cancel)})})}}}]);e.directive("qvScroll",[function(){return{link:function e(t,n){t.$watch("scrollDown",function(e){e&&(n[0].scrollTop=n.find(".empty-expression")[0].parentNode.offsetTop)})}}}]);return{add:N,edit:R}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="lui-modal-background"></div>\n<div class="lui-dialog" id="dimensions-dialog" data-tid="dim-dialog">\n\t<div class="dimension-dialog-dimvalcol-wrapper dimension-dialog-container">\n\t\t<lui-tab-view>\n\t\t\t<div ng-show="!input.add" class="lui-dialog__header">\n\t\t\t\t<lui-tabset fill="true">\n\t\t\t\t\t<lui-tab q-title-translation="{{input.title}}" q-translation="{{input.title}}" on-tab-selected="initColorMap(false)" ref="tab1"></lui-tab>\n\t\t\t\t\t<lui-tab q-title-translation="library.colors.valuecolors" q-translation="library.colors.valuecolors" on-tab-selected="initColorMap(true)" ng-class="{\'lui-disabled\' : ((input.dimension.type === \'drilldown\' ) || !!input.add)}" ref="tab2" tid="value-col-tab"></lui-tab>\n\t\t\t\t</lui-tabset>\n\t\t\t</div>\n\t\t\t<div ng-if="input.add" class="lui-dialog__header">\n\t\t\t\t<div class="lui-dialog__title dimension-dialog-add-title" q-translation="{{input.title}}"></div>\n\t\t\t</div>\n\t\t\t<div class="lui-dialog__body">\n\t\t\t\t<lui-tab-content ref="tab1">\n\t\t\t\t\t<div data-dimension-type="{{input.dimension.type}}" class="dimension-type-{{input.dimension.type}}" ng-class="{ \'label-expression\': showLabelExpression() }">\n\t\t\t\t\t\t<div class="dimension-dialog-radio">\n\t\t\t\t\t\t\t<lui-radiobutton class="dimension-dialog-radio-single"\n\t\t\t\t\t\t\t\t\t\t\t x-name="dimension-type"\n\t\t\t\t\t\t\t\t\t\t\t x-model="input.dimension.type"\n\t\t\t\t\t\t\t\t\t\t\t x-value="single">\n\t\t\t\t\t\t\t\t{{ \'Common.Single\' | translate }}\n\t\t\t\t\t\t\t</lui-radiobutton>\n\t\t\t\t\t\t\t<lui-radiobutton class="dimension-dialog-radio-drilldown"\n\t\t\t\t\t\t\t\t\t\t\t x-name="dimension-type"\n\t\t\t\t\t\t\t\t\t\t\t x-model="input.dimension.type"\n\t\t\t\t\t\t\t\t\t\t\t x-value="drilldown">\n\t\t\t\t\t\t\t\t{{ \'Dimensions.Dialog.Type.DrillDown\' | translate }}\n\t\t\t\t\t\t\t</lui-radiobutton>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id="dimensions-dialog-content">\n\t\t\t\t\t\t\t\x3c!-- Available fields --\x3e\n\t\t\t\t\t\t\t<section id="dimension-dialog-fields" class="field-box">\n\t\t\t\t\t\t\t\t<h1 q-translation="Assets.FieldsTab.Table"></h1>\n\t\t\t\t\t\t\t\t<lui-select x-model="input.dimension.selectedTable" x-options="table for table in input.dimension.tables"></lui-select>\n\t\t\t\t\t\t\t\t<div class="dimension-dialog-search">\n\t\t\t\t\t\t\t\t\t<qv-assets-search-panel query="search.query" look="light" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div qv-field-list class="dimension-dialog-field-list">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\x3c!-- Selected fields --\x3e\n\t\t\t\t\t\t\t<section class="dimension-editor-form">\n\t\t\t\t\t\t\t\t<section id="dimensions-dialog-field-reference" class="field-box">\n\t\t\t\t\t\t\t\t\t<h1 q-translation="Dimensions.Dialog.FieldReference"></h1>\n\t\t\t\t\t\t\t\t\t<ul qv-scroll id="dimensions-dialog-field-tokens"\n\t\t\t\t\t\t\t\t\t\tng-class="{ invalid: !input.dimension.validity.selectedFields }"\n\t\t\t\t\t\t\t\t\t\tqv-sortable-list="sortableLists">\n\t\t\t\t\t\t\t\t\t\t<li ng-repeat="field in input.dimension.selectedFields" data-id="{{field}}" title="{{field}}" ng-class="{ placeholder: $index === placeholderIndex }">\n\t\t\t\t\t\t\t\t\t\t\t<div class="field-wrapper field-token">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="lui-icon lui-icon--handle" q-title-translation="Common.Move"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="field-text">{{field}}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="lui-icon lui-icon--remove remove" ng-click="removeItemHandler($index)" q-title-translation="Common.Delete"></div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="expression-input">\n\t\t\t\t\t\t\t\t\t\t\t\t<button class="lui-fade-button" ng-click="editExpressionHandler($event, $index)" q-title-translation="Tooltip.OpenExpressionEditor">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--expression" ng-class="{ \'active\': expressionColor }"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<button class="lui-fade-button empty-expression" ng-click="editExpressionHandler($event)" q-title-translation="Tooltip.OpenExpressionEditor">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--expression"></span>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\x3c!-- Meta data--\x3e\n\t\t\t\t\t\t\t\t<section class="metadata-form">\n\n\t\t\t\t\t\t\t\t\t\x3c!-- Name --\x3e\n\t\t\t\t\t\t\t\t\t<div class="metadata-item">\n\t\t\t\t\t\t\t\t\t\t<label q-translation="metadata.name"></label>\n\t\t\t\t\t\t\t\t\t\t<input class="lui-input" type="text" name="metadata-name" maxlength="255" ng-model="input.dimension.name" id="dimensions-dialog-name" ng-class="{ \'lui-invalid\': !input.dimension.validity.name }" data-tid="dim-dialog-name" >\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\x3c!-- Label expression --\x3e\n\t\t\t\t\t\t\t\t\t<div class="metadata-item" ng-if="showLabelExpression()">\n\t\t\t\t\t\t\t\t\t\t<qv-expression-input class="metadata-item" expression="input.dimension.labelExpression" is-valid-expression="input.dimension.validity.labelExpression" data-tid="dim-dialog-labelexp"></qv-expression-input>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\x3c!-- Description --\x3e\n\t\t\t\t\t\t\t\t\t<div class="metadata-item">\n\t\t\t\t\t\t\t\t\t\t<label q-translation="metadata.description"></label>\n\t\t\t\t\t\t\t\t\t\t<qv-description-textarea\n\t\t\t\t\t\t\t\t\t\t\t\tdescription="input.dimension.description"\n\t\t\t\t\t\t\t\t\t\t\t\tdescription-expression="input.dimension.descriptionExpression"\n\t\t\t\t\t\t\t\t\t\t\t\tis-valid="input.dimension.validity.description"\n\t\t\t\t\t\t\t\t\t\t\t\tdata-tid="dim-dialog-description">\n\t\t\t\t\t\t\t\t\t\t</qv-description-textarea>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\x3c!-- Dimension color --\x3e\n\t\t\t\t\t\t\t\t\t<div class="metadata-item">\n\t\t\t\t\t\t\t\t\t\t<label class="qv-metadatalabel" q-translation="library.colors.dimensioncolor"></label>\n\t\t\t\t\t\t\t\t\t\t<qv-color-picker-button-new ng-model="color" palette="theme.currentPalette" extended="true" toggle-open="true"></qv-color-picker-button-new>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\x3c!-- Tags --\x3e\n\t\t\t\t\t\t\t\t\t<div class="metadata-item tags">\n\t\t\t\t\t\t\t\t\t\t<label q-translation="metadata.tags" class="qv-taglabel"></label>\n\t\t\t\t\t\t\t\t\t\t<qv-tagcloud tags="input.dimension.tags" update="input.dimension.updateTags"></qv-tagcloud>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t<lui-button ng-if="input.add" ng-click="confirm()" class="add-dimension-button" autofocus q-translation="Dimensions.Dialog.Add.Button" data-tid="add-dim-button"></lui-button>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t</lui-tab-content>\n\t\t\t\t<lui-tab-content ref="tab2">\n\t\t\t\t\t<section class="metadata-form">\n\t\t\t\t\t\t<div class="metadata-item">\n\t\t\t\t\t\t\t<qv-dimension-colors visible="visible" color-model-wrapper="colorModelWrapper"></qv-dimension-colors>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t</lui-tab-content>\n\t\t\t</div>\n\t\t</lui-tab-view>\n\t</div>\n\t<div class="lui-dialog__footer">\n\t\t<qv-spinner show="adding"></qv-spinner>\n\t\t<div ng-if="added" qva-outside="hideAddedFeedback()" class="qv-animate dimension-added">\n\t\t\t<i class="lui-icon lui-icon--tick" aria-hidden="false"> </i> <span q-translation="Dimensions.Dialog.DimensionAdded"></span>\n\t\t</div>\n\t\t<lui-button ng-if="input.add" ng-click="$event.preventDefault(); cancel()" name="cancel" q-translation="Common.Done" tid="done"></lui-button>\n\t\t<lui-button ng-if="!input.add" ng-click="$event.preventDefault(); cancel()" name="cancel" q-translation="Common.Cancel" tid="cancel"></lui-button>\n\t\t<lui-button ng-if="!input.add" ng-click="$event.preventDefault(); confirm()" name="confirm" autofocus q-translation="Common.Save" tid="dim-dlg-save-btn"></lui-button>\n\t</div>\n</div>\n'},function(e,t){e.exports='<qv-scroll-area class="scroll-area" ng-class="{ \'native-scroll-enabled\': !scroll.virtualScrollEnabled }">\n\t<qv-scroll-load-button\n\t\t\tng-show="scroll.loadPrevious"\n\t\t\ton-load="scroll.gotoPreviousBlock()"\n\t\t\ttext="Object.Listbox.LoadPrevious" previous="true"></qv-scroll-load-button>\n\n\t<ul class="lui-list" ng-class="{ \'align-bottom\': scroll.alignBottomAbsolute }">\n\t\t<li ng-repeat="field in scroll.items"\n\t\t\tng-click="selectFieldHandler(field, $event)"\n\t\t\tclass="lui-list__item lui-list__action"\n\t\t\tng-class="{ \'lui-selected\': field.selected, \'derived-field\': (field.isDerived) }">\n\t\t\t<i ng-if="field.isDateField" class="lui-icon lui-icon--calendar lui-list__aside"></i>\n\t\t\t<i ng-if="field.isGeoField" class="lui-icon lui-icon--map lui-list__aside"></i>\n\n\t\t\t<div ng-if="field.dimensionDialogMetaData.icon" class="lui-icon  lui-icon--{{field.dimensionDialogMetaData.icon}} lui-list__aside" q-title-translation="{{::field.dimensionDialogMetaData.iconTooltip}}"></div>\n\t\t\t<div class="lui-list__text lui-list__text--ellipsis" qve-highlight text="{{::getFieldDisplayName(field)}}" query="search.query" title="{{::getFieldDisplayName(field)}}"></div>\n\t\t\t<div ng-if="field.used" class="lui-icon lui-icon--tick lui-list__aside"></div>\n\t\t</li>\n\t</ul>\n\n\t<div ng-if="!scroll.items.length" class="no-hits">\n\t\t<span ng-if="search.query.length" q-translation="Toolbox.Search.Nohits"></span>\n\t\t<span ng-if="!search.query.length" q-translation="library.noitems"></span>\n\t</div>\n\n\t<qv-scroll-load-button\n\t\t\tng-show="scroll.loadNext"\n\t\t\ton-load="scroll.gotoNextBlock()"\n\t\t\ttext="Object.Listbox.LoadMore"></qv-scroll-load-button>\n</qv-scroll-area>\n<qv-scroll-loader></qv-scroll-loader>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(139)],r=function(e,t){var n="single";function i(i,r,o){var a=i.input.dimension;function s(){return r.validateMetadataName(a,o)}function l(){return r.validateFieldsInDimension(a)}function c(){var e=s();var t=l();return e&&t&&a.validity.labelExpression&&a.validity.description}function u(){var e=i.search.query;var n=a.selectedTable;function r(n){return-1!==t.string(n.qName.toLowerCase()).indexOf(t.string(e.toLowerCase()))}n===i.allTablesStr?a.filteredFields=a.allFields.filter(function(e){return r(e)}):a.filteredFields=a.allFields.filter(function(e){return-1!==e.qSrcTables.indexOf(n)&&r(e)})}function d(e,t){var n=0,i=t.length;for(n=0;n<i;n++)if(t[n].qName===e)return true;return false}function f(t,r){r=r.replace(/^=+/,"=");"="!==r.charAt(0)&&(r="="+r);if(void 0!==t)a.selectedFields[t]=r;else{a.selectedFields.push(r);a.type!==n&&e.getService("$timeout")(function(){i.scrollDown+=1})}}function p(t){if(!t||t.selected)return;if(a.type===n)a.selectedFields=[t.qName];else{a.selectedFields.push(t.qName);e.getService("$timeout")(function(){i.scrollDown+=1})}}function h(){a.name="";a.description="";a.tags=[];a.selectedFields=[];delete a.labelExpression}function v(){return""===a.name&&""===a.description&&0===a.tags.length&&0===a.selectedFields.length}return{selectFieldHandler:p,updateFieldExpression:f,isFieldInList:d,clearDialog:h,isEmpty:v,validateNameField:s,validateFieldsInDimension:l,validate:c,filterFields:u}}return{create:function e(t,n,r,o){return new i(t,n,r,o)}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";(function(e){var n,i;!(n=[],i=function(){var e={};Object.defineProperties(e,{ZERO:{value:"zero"},POSITIVE:{value:"positive"}});var t;function n(){var t=document.createElement("div");t.style.width="100px";t.style.overflow="hidden";t.style.opacity="0";t.dir="rtl";var n=document.createElement("div");n.style.width="200px";n.innerHTML="t";t.appendChild(n);var i=document.getElementsByTagName("body")[0];i.appendChild(t);var r=t.scrollLeft;i.removeChild(t);return 0===r?e.ZERO:e.POSITIVE}function i(){t||(t=n());return t}var r={getStartType:i};Object.defineProperty(r,"RTL_SCROLL_START",{value:e});return r}.apply(t,n),void 0!==i&&(e.exports=i))}).call(this,n(55)(e))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(89)],r=function(e,t){e.directive("qvScrollLoader",["$animateCss","$timeout",function(e,n){return{restrict:"E",replace:true,template:function e(t,n){var i=n.tag||"div";return"<"+i+' ng-style="loaderStyle" class="qv-scroll-loader qv-animate"><qv-rain ng-if="showRain" show="showRain"></qv-rain></'+i+">"},scope:{},controller:function e(){},link:function i(r,o,a,s){var l,c,u,d=!!a.noRain;r.loaderStyle={width:0,height:0};r.showRain=false;s.fadeIn=function(i,a,s){var u=t();f(i,a,s);d||(l=n(function(){r.showRain=true}));c=e(o,{addClass:"fade"});c.start().done(function(){u.resolve()});return u.promise};s.fadeOut=function(){var n=t();r.showRain=false;u=e(o,{removeClass:"fade"});u.start().done(function(){r.loaderStyle.width=0;r.loaderStyle.height=0;r.$apply();n.resolve()});return n.promise};function f(e,t,n){r.loaderStyle.top=e;r.loaderStyle.left=t;r.loaderStyle.width=n.width;r.loaderStyle.height=n.height}r.$on("$destroy",function(){n.cancel(l)})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(775),n(54)],r=function(e,t,n){e.directive("qvScrollLoadButton",[function(){return{restrict:"E",transclude:true,replace:true,template:function e(n,i){var r=i.tag||"div";return t.replace(/^\s*<div/,"<"+r).replace(/<\/div>\s*$/,"</"+r+">")},scope:{onLoad:"&",text:"@",previous:"=",disabled:"=",scrollApi:"=",watchResize:"=",showButton:"="},link:function e(t,i){t.load=function(){t.onLoad()};var r=i.find(".lui-button");function o(){if(!t.scrollApi)return;var e=t.scrollApi.domApi.$scrollContent[0].clientWidth,n=t.scrollApi.settings.width,i=t.scrollApi.domApi.$element[0].scrollLeft,o=e-n;r[0].style.left=i-o/2+"px"}var a=t.$watch("watchResize",function(e){if("function"===typeof e){e(o);a()}});var s=t.$watch("showButton",function(e){if(e){o();t.scrollApi.domApi.$element.scroll(n.debounce(o,40));s()}})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-scroll-data-load-buttons" ng-class="{ previous: previous }">\n\t<div ng-transclude></div>\n\t<button class="lui-button" qva-activate="load()" ng-disabled="disabled">\n\t\t<p q-translation="{{text}}"></p>\n\t</button>\n</div>\n'},function(e,t){e.exports='<div dir={{direction}}>\n\t<div class="scroll-content" ng-transclude></div>\n\t<qv-scroll-area-affordance x-show="scrollbarY.showMinAffordance" x-direction="\'vertical\'" x-dock="\'min\'" ng-if="scrollbarY.enabled" x-viewport-rect="viewportRect"></qv-scroll-area-affordance>\n\t<qv-scroll-area-affordance x-show="scrollbarX.showMinAffordance" x-direction="\'horizontal\'" x-dock="\'min\'" ng-if="scrollbarX.enabled" x-viewport-rect="viewportRect"></qv-scroll-area-affordance>\n\t<qv-scrollbar x-data="scrollbarY" x-interactive="interactiveY" x-viewport-rect="viewportRect" ng-if="scrollbarY.enabled"></qv-scrollbar>\n\t<qv-scrollbar x-data="scrollbarX" x-interactive="interactiveX" x-viewport-rect="viewportRect" ng-if="scrollbarX.enabled"></qv-scrollbar>\n\t<qv-scroll-area-affordance x-show="scrollbarY.showMaxAffordance" x-direction="\'vertical\'" x-dock="\'max\'" ng-if="scrollbarY.enabled" x-viewport-rect="viewportRect"></qv-scroll-area-affordance>\n\t<qv-scroll-area-affordance x-show="scrollbarX.showMaxAffordance" x-direction="\'horizontal\'" x-dock="\'max\'" ng-if="scrollbarX.enabled" x-viewport-rect="viewportRect"></qv-scroll-area-affordance>\n</div>\n'},function(e,t){e.exports='<div class="scrollbar-animation scrollbar-track"\n\tng-class="data.classList"\n\tng-style="data.style">\n\t<qv-scrollbar-track-hit-area ng-style="trackHitAreaStyle" class="scrollbar-hitarea"></qv-scrollbar-track-hit-area>\n\t<qv-scrollbar-thumb ng-class="{ active: data.active }" class="scrollbar-thumb" ng-style="thumbStyle"></qv-scrollbar-thumb>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){e.directive("qvScrollAreaAffordance",function(){return{restrict:"E",template:'<div ng-show="show" class="scroll-affordance" ng-class="[dock,direction]" ng-style="style"></div>',replace:true,require:"^qvScrollArea",scope:{viewportRect:"=",direction:"=",dock:"=",size:"=?",show:"="},link:function e(t){t.size=t.size||18;t.style={};t.updateAffordance=function(){switch(t.direction){case"vertical":t.style.width=t.viewportRect.width+"px";t.style.height=t.size+"px";switch(t.dock){case"min":t.style.left=t.viewportRect.left+"px";t.style.top=t.viewportRect.top+"px";break;case"max":t.style.left=t.viewportRect.left+"px";t.style.top=t.viewportRect.top+t.viewportRect.height-t.size+"px";break;default:throw new Error("Dock "+t.dock+" not supported")}break;case"horizontal":t.style.width=t.size+"px";t.style.height=t.viewportRect.height+"px";switch(t.dock){case"min":t.style.left=t.viewportRect.left+"px";t.style.top=t.viewportRect.top+"px";break;case"max":t.style.left=t.viewportRect.left+t.viewportRect.width-t.size+"px";t.style.top=t.viewportRect.top+"px";break;default:throw new Error("Dock "+t.dock+" not supported")}break;default:throw new Error("Direction "+t.direction+" not supported")}};t.$watch("viewportRect",t.updateAffordance,true)}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(100),n(92),n(174)],r=function(e,t,n){var i=null,r=null,o=null,a=n.extend({init:function t(n){var a=e.getService("qvColorMapService");i=n.qInfo.qId;r=n;o=a.getTemplate()},initModel:function t(){var n=e.getService("qvColorMapService");return n.getColorMap(i).then(function(e){if(e){o=e;void 0===o.autoFill&&(o.autoFill=!(o.single&&false===o.usePal||o.pal))}})},hasColors:function e(){return o&&!!(o.pal&&o.pal.length&&o.pal!==t.dataPalettes[0].propertyValue)||o&&false===o.autoFill||["nul","oth","single"].some(function(e){return o[e]&&"none"!==o[e].color})||o.colors.some(function(e){return"none"!==e.baseColor.color})},save:function t(){var n=e.getService("qvColorMapService");return this.hasColors()?n.setColorMap(i,o):n.deleteColorMap(i).then(function(){o=n.getTemplate();delete r.qDim.coloring.colorMapRef})},clearColors:function t(){var n=e.getService("qvColorMapService");o=n.getTemplate()}});Object.defineProperties(a.prototype,{dimensionName:{get:function e(){return r.qDim.title}},fieldName:{get:function e(){return r.fieldName}},colors:{get:function e(){return o.colors}},nullColor:{get:function e(){return t.resolveColor(o.nul)},set:function e(n){if(n&&(null===o.nul||o.nul.color!==n.color||o.nul.index!==n.index)){n.color||(o.nul={color:n,index:t.currentPalette.indexOf(n)});n.color&&(o.nul={color:n.color,index:n.index})}}},othersColor:{get:function e(){return t.resolveColor(o.oth)},set:function e(n){if(n&&(null===o.oth||o.oth.color!==n.color||o.oth.index!==n.index)){n.color||(o.oth={color:n,index:t.currentPalette.indexOf(n)});n.color&&(o.oth={color:n.color,index:n.index})}}},singleColor:{get:function e(){return t.resolveColor(o.single)},set:function e(n){if(n&&(null===o.single||o.single.color!==n.color||o.single.index!==n.index)){n.color||(o.single={color:n,index:t.currentPalette.indexOf(n)});n.color&&(o.single={color:n.color,index:n.index})}}},palette:{get:function e(){return o.pal?o.pal:t.dataPalettes[0].propertyValue},set:function e(n){o.pal!==n&&(o.pal=n!==t.dataPalettes[0].propertyValue?n:null);this.usePalette=true}},usePalette:{get:function e(){return null===o.usePal||o.usePal},set:function e(t){o.usePal!==t&&null!==t&&(o.usePal=t)}},autoFill:{get:function e(){return o.autoFill},set:function e(t){o.autoFill=t;if(t){o.pal=null;o.usePal=null;this.singleColor="none"}else{this.usePalette=true;"none"===this.singleColor&&(this.singleColor="#4477aa")}}}});return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(303)],r=function(e,t,n){t.service("qvSortableListDragService",[function(){var t;t={$new:function e(t){return{fromItem:void 0,enterItem:void 0,enterList:void 0,toItem:void 0,toList:void 0,offsetX:0,offsetY:0,left:0,top:0,direction:void 0,clientRect:void 0,scroll:{},pageX:0,pageY:0,suppressDragStyle:t.suppressDragStyle||[],zIndex:t.zIndex,enterItemAction:void 0}},startOffset:function e(t,n,i,r,o,a){if(a){var s=i.offset();var l=a.offset();n.left=s.left-l.left;n.top=s.top-l.top}else{var c=i.position();n.left=c.left;n.top=c.top}n.offsetX=n.left-r.x;n.offsetY=n.top-r.y;if(o){n.offsetX=n.offsetX-t[0].scrollLeft;n.offsetY=n.offsetY-t[0].scrollTop}},startData:function e(t,n,i,r){n.scroll.clientRect=t[0].getBoundingClientRect();n.scroll.width=t[0].scrollWidth;n.scroll.height=t[0].scrollHeight;n.clientRect=i[0].getBoundingClientRect();n.minLeft=-n.clientRect.width;n.maxLeft=n.scroll.width;n.minTop=-n.clientRect.height;n.maxTop=n.scroll.height-n.clientRect.height;n.fromItem=i.scope()[r];n.toItem=void 0;n.toList=void 0;n.enterItem=void 0;n.enterList=void 0;n.enterItemAction=void 0},updateDragCoordinates:function e(t,n,i,r){r=r||t.scroll.clientRect;t.pageX=n;t.pageY=i;t.pageX<=r.left?t.pageX=r.left+1:t.pageX>=r.left+r.width&&(t.pageX=r.left+r.width-1);t.pageY<=r.top?t.pageY=r.top+1:t.pageY>=r.top+r.height&&(t.pageY=r.top+r.height-1)},updateEnterItemAction:function e(t,i){var r=i[0].getBoundingClientRect(),o,a,s;switch(t.direction){case"horizontal":o=t.pageX;a=r.left;s=r.width;break;case"vertical":o=t.pageY;a=r.top;s=r.height;break;default:return}o<=a+.5*s?t.enterItemAction=n.ENTER_BEFORE:o>a+.5*s&&(t.enterItemAction=n.ENTER_AFTER)},updateData:function n(i,r,o,a,s,l,c,u,d){var f,p,h,v,g=r.enterItemAction,m=function e(){};function b(e){return e.length&&t.isChild(i[0],e[0])}function y(e){if("function"===typeof s)return s(e);return e.scope()[s]}var x=o[0].style.display;o[0].style.display="none";p=document.elementFromPoint(r.pageX,r.pageY);f=e(p).closest(l);if(b(f))m=function e(n){h=n.scope()[c];t.updateEnterItemAction(r,n);if(r.enterItem!==h||r.enterItem===h&&g!==r.enterItemAction){r.enterList=void 0;r.enterItem=h;u()}};else{f=e(p).closest(a);if(b(f))m=function e(t){v=y(t);if(r.enterList!==v){r.enterList=v;r.enterItem=void 0;d()}};else{r.enterItem=void 0;r.enterList=void 0}}o[0].style.display=x;m(f)},start:function e(t,n,i){i[0].style||(i[0].style="");i[0].style.position="absolute";-1===n.suppressDragStyle.indexOf("width")&&(i[0].style.width=n.clientRect.width+"px");i[0].style.height=n.clientRect.height+"px";i[0].style.pointerEvents="none";i[0].style.left=n.left+"px";i[0].style.top=n.top+"px";i[0].style.zIndex=n.zIndex;i[0].style.boxSizing="border-box"},update:function e(t,n,i,r){var o,a;switch(n.direction){case"horizontal":n.left=r.currentPoint.x+n.offsetX+t[0].scrollLeft;break;case"vertical":n.top=r.currentPoint.y+n.offsetY+t[0].scrollTop;break;default:n.left=r.currentPoint.x+n.offsetX+t[0].scrollLeft;n.top=r.currentPoint.y+n.offsetY+t[0].scrollTop}o=n.left;a=n.top;n.left<n.minLeft?o=n.minLeft:n.left>n.maxLeft&&(o=n.maxLeft);n.top<n.minTop?a=n.minTop:n.top>n.maxTop&&(a=n.maxTop);i[0].style.left=o+"px";i[0].style.top=a+"px"},end:function e(t,n){if(t.stopAutoScrolling){t.stopAutoScrolling();t.stopAutoScrolling=null}n&&n.length&&n[0].removeAttribute("style")},isParent:function e(t,n){return t===n},isChild:function e(n,i){var r=i;if(t.isParent(n,i))return false;while(r){if(r===n)return true;r=r.parentNode}return false},autoScroll:function e(t,n,i,r,o,a,s,l){var c=true,u=0,d=0,f=0,p=0;function h(e,o){u=t.scrollLeft;d=t.scrollTop;if(c){if(e<0&&0===u){c=false;return}if(e>0&&u+parseInt(n.height+.5,10)>=i){c=false;return}if(o<0&&0===d){c=false;return}if(o>0&&d+parseInt(n.height+.5,10)>=r){c=false;return}0!==e&&(t.scrollLeft+=e);0!==o&&(t.scrollTop+=o);a();setTimeout(function(){h(e,o)})}}switch(o.direction){case"horizontal":o.pageX<=n.left+l?f=-s:o.pageX>=n.left+n.width-l&&(f=s);break;case"vertical":o.pageY<=n.top+l?p=-s:o.pageY>=n.top+n.height-l&&(p=s);break;default:o.pageY<=n.top+l?p=-s:o.pageY>=n.top+n.height-l&&(p=s)}0===f&&0===p||h(f,p);if(o.stopAutoScrolling){o.stopAutoScrolling();delete o.stopAutoScrolling}o.stopAutoScrolling=function(){c=false};return o.stopAutoScrolling}};return t}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="assets-search-panel" data-help="Library.Search">\n\n\t<div class="frame">\n\t\t<div class="lui-search" ng-class="{\'lui-search--inverse\': look == \'inverse\', \'assets-search-bright\': look == \'default\'}">\n\t\t\t<span class="lui-search__search-icon"></span>\n\t\t\t<input class="lui-search__input" maxlength="255" ng-model="rawQuery" spellcheck="false" type="text" q-placeholder="Common.Search" ng-trim="true" data-tid="search-input" />\n\t\t\t<button class="asset-search-panel-clear-search  lui-search__clear-button" ng-click="onClear();" ng-hide="!rawQuery" q-title-translation="Common.Clear">\n\t\t\t\t<span class="lui-icon  lui-icon--small  lui-icon--close"></span>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(783),n(100),n(317),n(784),n(787)],r=function(e,t,n,i){e.directive("qvDimensionColors",[function(){return{restrict:"E",template:t,replace:true,scope:{visible:"=",colorModelWrapper:"="},link:function e(t){t.currentPalette=n.currentPalette;t.$watchCollection("[visible, colorModelWrapper.autoFill]",function(){t.colorModelWrapper&&(t.colorSelector=t.colorModelWrapper.usePalette?"schemeSelect":"oneSelect")});t.$watch("colorSelector",function(){t.colorModelWrapper&&(t.colorModelWrapper.usePalette="schemeSelect"===t.colorSelector)},false);t.$on("clearAll",function(){i.show({text:"library.colors.clearcolorsconfirmation"}).then(function(){t.colorModelWrapper.clearColors();t.colorSelector=t.colorModelWrapper.usePalette?"schemeSelect":"oneSelect"})})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-dim-dlg-colors">\n\t<div class="qv-dim-dlg-colors-column qv-dim-dlg-colors-column-left">\n\t\t\t<h2 class="qv-dim-dlg-colors-header">{{colorModelWrapper.dimensionName}}</h2>\n\t\t<div class="qv-dim-dlg-colors-colormap">\n\t\t\t<qv-color-mapper\n\t\t\t\tvisible="visible"\n\t\t\t\tfield-name="colorModelWrapper.fieldName"\n\t\t\t\tdimension-name="colorModelWrapper.dimensionName"\n\t\t\t\tuse-palette="colorModelWrapper.usePalette"\n\t\t\t\tcolor-array="colorModelWrapper.colors"\n\t\t\t\tpalette="colorModelWrapper.palette"\n\t\t\t\tsingle-color="colorModelWrapper.singleColor"\n\t\t\t\thas-colors="colorModelWrapper.hasColors"></qv-color-mapper>\n\t\t</div>\n\t\t<div class="qv-dim-dlg-colors-row qv-dim-dlg-colors-others-row">\n\t\t\t<label class="qv-dim-dlg-colors-label" q-translation="library.colors.others"></label>\n\t\t\t<div class="qv-dim-dlg-colors-select">\n\t\t\t\t<qv-color-picker-button-new\n\t\t\t\t\t\tng-model="colorModelWrapper.othersColor"\n\t\t\t\t\t\tpalette="currentPalette"\n\t\t\t\t\t\textended="true"\n\t\t\t\t\t\ttoggle-open="true">\n\t\t\t\t</qv-color-picker-button-new>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="qv-dim-dlg-colors-row">\n\t\t\t<label class="qv-dim-dlg-colors-label" q-translation="library.colors.nullvalues"></label>\n\t\t\t<div class="qv-dim-dlg-colors-select">\n\t\t\t\t<qv-color-picker-button-new\n\t\t\t\t\t\tng-model="colorModelWrapper.nullColor"\n\t\t\t\t\t\tpalette="currentPalette"\n\t\t\t\t\t\textended="true"\n\t\t\t\t\t\ttoggle-open="true">\n\t\t\t\t</qv-color-picker-button-new>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="qv-dim-dlg-colors-column qv-dim-dlg-colors-column-right">\n\t\t<div class="qv-dim-dlg-colors-row"></div>\n\t\t<div class="qv-dim-dlg-colors-row qv-dim-dlg-colors-row-text">\n\t\t\t<label class="qv-dim-dlg-colors-label" q-translation="library.colors.autofilloption"></label>\n\t\t</div>\n\t\t<div class="qv-dim-dlg-colors-row qv-dim-dlg-colors-auto-fill">\n\t\t\t<h2 ng-show="colorModelWrapper.autoFill" class="qv-dim-dlg-colors-label" q-translation="Common.Auto"></h2>\n\t\t\t<h2 ng-show="!colorModelWrapper.autoFill" class="qv-dim-dlg-colors-label" q-translation="Common.Custom"></h2> \n\t\t\t<lui-switch x-model="colorModelWrapper.autoFill"></lui-switch>\n\t\t</div>\n\t\t<div ng-show="!colorModelWrapper.autoFill" class="qv-dim-dlg-colors-row qv-dim-dlg-colors-row-text">\n\t\t\t<label class="qv-dim-dlg-colors-label" q-translation="library.colors.autofill"></label>\n\t\t</div>\n\t\t<div ng-show="!colorModelWrapper.autoFill" class="qv-dim-dlg-colors-row">\n\t\t\t<select class="lui-select" ng-model="colorSelector">\n\t\t\t\t<option value="oneSelect" q-translation="library.colors.onecolor"></option>\n\t\t\t\t<option value="schemeSelect" q-translation="library.colors.colorscheme"></option>\n\t\t\t</select>\n\t\t</div>\n\t\t<div ng-show="!colorModelWrapper.autoFill" class="qv-dim-dlg-colors-row" ng-if="colorSelector === \'oneSelect\'">\n\t\t\t<label class="qv-dim-dlg-colors-label" q-translation="library.colors.color"></label>\n\t\t\t<div class="qv-dim-dlg-colors-select">\n\t\t\t\t<qv-color-picker-button-new\n\t\t\t\t\t\tng-model="colorModelWrapper.singleColor"\n\t\t\t\t\t\tpalette="currentPalette"\n\t\t\t\t\t\textended="true"\n\t\t\t\t\t\tdisable-none="true"\n\t\t\t\t\t\ttoggle-open="true">\n\t\t\t\t</qv-color-picker-button-new>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-show="!colorModelWrapper.autoFill" ng-if="colorSelector === \'schemeSelect\'">\n\t\t\t<div class="qv-dim-dlg-colors-row qv-dim-dlg-colors-row-text">\n\t\t\t\t\t<label class="qv-dim-dlg-colors-label" q-translation="library.colors.schemeselect"></label>\n\t\t\t</div>\n\t\t\t<div class="qv-dim-dlg-colors-row">\n\t\t\t\t<scheme-input palette="colorModelWrapper.palette"></scheme-input>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(785),n(206),n(179),n(243),n(93),n(141),n(153),n(89),n(100),n(91),n(92),n(288),n(109),n(786),n(97),n(244)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v){var g,m,b,y=1024,x=100,S=37;g=d.extend({init:function e(t,n,i){this.palette=null;this.singleColor=null;this.length=0;if(t||"none"!==i){if(t){var r,o=c.dataPalettes.length;for(r=0;r<o;r++)if(c.dataPalettes[r].propertyValue===n){"pyramid"===c.dataPalettes[r].type?this.palette=c.dataPalettes[r].scale[c.dataPalettes[r].scale.length-1]:this.palette=c.dataPalettes[r].scale;break}this.palette||("pyramid"===c.dataPalettes[0].type?this.palette=c.dataPalettes[0].scale[c.dataPalettes[0].scale.length-1]:this.palette=c.dataPalettes[0].scale)}}else{var a=c.dataPalettes[0];"pyramid"===a.type?this.palette=a.scale[a.scale.length-1]:this.palette=a.scale}if(this.palette){"none"===this.palette[0]&&(this.palette=this.palette.slice(1,this.palette.length));this.length=this.palette.length}else this.singleColor=c.resolveColor(i)},getColor:function e(t){return this.singleColor?this.singleColor:this.palette[t%this.length]}});b=i.extend({getBoundingBox:function e(){return this.$scrollArea[0].getBoundingClientRect()}});function w(e,t,n,i){var r,o=i.length,a=o>0,s={color:null,custom:false};if(a)for(r=0;r<o;r++)if(i[r].value===t){s.color=c.resolveColor(i[r].baseColor);s.custom=true;break}!s.color&&e.colorLookup&&(s.color=e.colorLookup.getColor(n));return s}function q(e){return p.isDark(e)?"#e6e6e6":"#595959"}function C(e){e.nbrCustom=u.get("library.colors.numberofcustomcolors",e.colorArray.length)}m=r.extend({init:function e(t,n){this.$scope=t;this.$timeout=n;this.model=null;this.qWidth=0;this.qHeight=0},initialize:function e(t,n){this.updateSearch=function(){this.model.getLayout().then(function(e){this.showSearch(e.qListObject.qSize.qcy)}.bind(this))}.bind(this);return o.getApp().then(function(e){return a.createTransientField(e,t,_(n)).then(function(e){this.model=e;this.$scope.backendApi=new f(e);e.on("changed",this.updateSearch);this.$scope.$watch("query",function(e,t){if(void 0===e||e===t)return;e.length>0?this.$scope.backendApi.search(e):this.$scope.backendApi.abortSearch()}.bind(this));return e.getLayout().then(function(e){this.qWidth=e.qListObject.qSize.qcx;this.qHeight=e.qListObject.qSize.qcy}.bind(this))}.bind(this))}.bind(this))},show:function e(){var t=this.$scope.items.length,n=0,i=this.$scope.scrollApi.settings.viewportRowCount;i<t&&(i=t);return this.getData(n,i,false,false).then(function(){this.$scope.scrollApi.setTotalRows(this.qHeight);return this.$scope.scrollApi.setVirtualSize(true)}.bind(this))},showSearch:function e(t){var n=0,i=this.$scope.scrollApi.settings.viewportRowCount,r=this.$scope.scrollApi.resetNativeScroll();return this.getData(n,i,false,false).then(function(){r();this.$scope.scrollApi.setTotalRows(t);return this.$scope.scrollApi.setVirtualSize(false)}.bind(this))},getRows:function e(){return this.$scope.items},getRowCount:function e(){return this.$scope.items.length},getFirstElementIndex:function e(){return this.$scope.items[0].dataRowIx},getLastElementIndex:function e(){return this.$scope.items[this.$scope.items.length-1].dataRowIx},onVirtualScroll:function e(t,n){this.$scope.colorPickerCallback&&this.$scope.colorPickerCallback.close&&this.$scope.colorPickerCallback.close();var i=this.getData(t,n,false,false);this.$scope.$digest();return i},onInitialNativeScroll:function e(t,n){this.$scope.colorPickerCallback&&this.$scope.colorPickerCallback.close&&this.$scope.colorPickerCallback.close();return this.$scope.rowLoaderCtrl.fadeIn(0,0,{width:"100%",height:S+"px"}).then(function(){return this.getData(t,n,true,false).then(function(){return this.$scope.rowLoaderCtrl.fadeOut()}.bind(this))}.bind(this))},gotoBlock:function e(t,n,i){var r=this.$scope.scrollApi.getSpliceArgs(),o=this.$scope.items;i&&o.reverse();o.splice.apply(o,r);return this.getData(t,n,true,i)},onGotoNextBlock:function e(t,n){return this.gotoBlock(t,n,false)},onGotoPreviousBlock:function e(t,n){return this.gotoBlock(t,n,true)},onUpdateData:function e(t,n,i){this.updateItems(t,n,i);return this.$timeout(function(){},0,false)},updateItems:function e(t,n,i){var r,o=0,a,s=this.$scope.items,l=t[0].qMatrix,c,u,d,f=this.$scope.colorArray,p=t[0].qArea.qTop,h=t[0].qArea.qHeight;i&&l.reverse();n&&(o=s.length);for(r=0,a=l.length;r<a;++r){s[o+r]||(s[o+r]={});u=s[o+r];c=l[r][0];d=w(this.$scope,c.qText||"",c.qElemNumber,f);u.paletteIcon=d.custom;u.dataRowIx=i?p+h-r-1:p+r;u.enabled=(c.qText||"").length<=y;u.tipText=(c.qText||"").substring(0,y);u.colorStyle={"background-color":d.color,color:q(d.color)};u.color=d.color;u.inEdit=false;this.updateTextItem(u,c)}n||s.splice(r);i&&s.reverse()},updateTextItem:function e(t,n){var i,r=n.qHighlightRanges&&n.qHighlightRanges.qRanges.length||0,o,a,s=n.qText&&n.qText.split("")||[],l=0,c;t.textItems=[];s.length||t.textItems.push({isHighlighted:false,text:""});if(!r){t.textItems.push({isHighlighted:false,text:(n.qText||"").substring(0,y)});return}a=n.qHighlightRanges.qRanges.sort(function(e,t){return e.qCharPos-t.qCharPos});for(i=0;i<r;++i){o=a[i];c=o.qCharPos;c!==l&&t.textItems.push({isHighlighted:false,text:s.splice(0,c-l).join("")});t.textItems.push({isHighlighted:true,text:s.splice(0,o.qCharCount).join("")});l=o.qCharPos+o.qCharCount}s.length&&y-l>0&&t.textItems.push({isHighlighted:false,text:s.splice(0,y-l).join("")})},getData:function e(t,n,i,r){var o={qTop:t,qLeft:0,qWidth:1,qHeight:n};return this.model?this.model.getListObjectData("/qListObjectDef",[o]).then(function(e){return this.onUpdateData(e,i,r)}.bind(this)):l.reject()},release:function e(){if(this.model){this.model.removeListener("changed",this.updateSearch);this.model=null}}});function _(e){var t={title:e,qListObjectDef:{qDef:{}}};s.autoSortDimension(t.qListObjectDef);return t}function I(e){var t;e.mapItem=function(e){t=e;return true};e.openColorPicker=function(){t.inEdit=true};e.closeColorpicker=function(n){var i,r,o;if(n&&n.target.classList.contains("lui-icon--bin")&&"none"!==t.color){r=e.colorArray.length;for(i=0;i<r;i++)if(e.colorArray[i].value===t.tipText){o=w(e,null,t.dataRowIx,e.colorArray).color;e.colorArray.splice(i,1);t.colorStyle={"background-color":o};t.color=o;t.paletteIcon=false;break}}t.inEdit=false;C(e)};e.onColorChange=function(){var n,i=t.tipText,r=null,o=-1,a,s=e.colorArray,l=s.length;for(a=0;a<l;a++)if(s[a].value===i){r=s[a];o=a;break}s.length!==x||"none"===t.color||r||e.blinkWarning();if("none"!==t.color){n={color:t.color.color,index:t.color.index};if(r){r.baseColor=n;t.colorStyle={"background-color":n.color,color:q(n.color)};t.paletteIcon=true}else if(s.length<x){s.push({value:i,baseColor:n});t.colorStyle={"background-color":n.color,color:q(n.color)};t.paletteIcon=true}}else if(o>-1){t.color=w(e,null,t.dataRowIx,s).color;s.splice(o,1);t.colorStyle={"background-color":t.color};t.paletteIcon=false}C(e)}}var E=["$scope",function(e){e.backendApi=null}];e.directive("qvColorMapper",["$timeout","luiPopover",function(e,i){return{restrict:"E",template:t,controller:E,replace:true,require:["qvColorMapper"],scope:{visible:"=",fieldName:"=",dimensionName:"=",usePalette:"=",colorArray:"=",palette:"=",singleColor:"=",hasColors:"="},link:function t(r,o){var a=o.find(".qv-cm-scroll-area"),s=a.controller("qvScrollArea"),l=o.find(".qv-scroll-loader:not(.qv-scroll-row-loader)").controller("qvScrollLoader"),u={blockSize:200,minRowHeight:S,maxRowHeight:S},d,f,p=new b(o,a,"li:not(.qv-cm-load-buttons)","li:not(.qv-cm-load-buttons):first","li:not(.qv-cm-load-buttons):not(.qv-scroll-row-loader):last"),y=true;r.items=[];r.colorPickerCallback={};r.rowLoaderCtrl=a.find(".qv-scroll-row-loader").controller("qvScrollLoader");r.currentPalette=c.currentPalette;r.showOptionsMenu=function(){var e=r,t={template:h,controller:["$scope",function(t){t.enabled=e.hasColors();t.clear=function(){t.enabled&&e.$emit("clearAll")}}],alignTo:o.find(".qv-cm-search")[0],showArrow:false,dock:"bottom"};r.popover=i.show(t);r.popover.closed.then(function(){r.popover=null})};r.warning=false;r.blinkWarning=function(){r.warning=true;e(function(){r.warning=false})};I(r);function x(){if(f&&f.model){r.colorLookup=new g(r.usePalette,r.palette,r.singleColor);f.show()}}function w(){if(r.popover){r.popover.close();r.popover=null}}v.on("start",w);r.$on("$destroy",function(){d&&d.destroy&&d.destroy();r.backendApi&&r.backendApi.abortSearch();f&&f.release();v.off("start",w)});r.$watch("visible",function(t){if(t){if(!y){d.destroy();r.items=[];r.backendApi.abortSearch();f.release()}if(r.fieldName){d=new n(e,u);r.scrollApi=d;f=new m(r,e);d.initialize(p,f,s,l).then(function(){d.activate();d.updateViewport();f.initialize(r.fieldName,r.dimensionName).then(function(){x();y=false})});C(r)}}},false);r.$watchCollection("[palette, singleColor, usePalette, colorArray]",function(){x()})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-color-mapper">\n\t<div qva-direction x-dir-setting="\'ltr\'" class="qv-cm-search">\n\t\t<lui-search class="lui-search__input" query="query" placeholder="Common.Search" />\n\t\t<button ng-class="{\'lui-active\' : popover}" class="lui-fade-button lui-fade-button--large" qva-activate="showOptionsMenu()" tid="clear-all-btn">\n\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--large lui-icon--more"></span>\n\t\t</button>\n\t</div>\n\t<div class="qv-cm-wrapper">\n\t\t<qv-scroll-area class="qv-cm-scroll-area qv-animate" ng-class="{ \'qv-color-mapper-interactive\': !scrollApi.virtualScrollEnabled }" x-direction="\'ltr\'">\n\t\t\t<ul class="qv-cm-color-mapper lui-list" ng-class="{ \'align-bottom\': scrollApi.alignBottomAbsolute }" qva-direction x-dir-setting="\'ltr\'">\n\t\t\t\t<qv-scroll-load-button tag="li" class="qv-cm-load-buttons" ng-show="scrollApi.loadPrevious" on-load="scrollApi.gotoPreviousBlock()" text="Object.Listbox.LoadPrevious" previous="true">\n\t\t\t\t</qv-scroll-load-button>\n\n\t\t\t\t<li ng-repeat="item in items" class="lui-list__item" class="lui-list__item"\n\t\t\t\t\tqv-color-picker-custom-new\n\t\t\t\t\tng-class="{\'lui-active\' : item.inEdit, \'lui-disabled\': !item.enabled}"\n\t\t\t\t\tng-model="item.color"\n\t\t\t\t\tkeep-open="true"\n\t\t\t\t\tdisable-none="false"\n\t\t\t\t\ton-change="onColorChange"\n\t\t\t\t\tpalette="currentPalette"\n\t\t\t\t\textended="true"\n\t\t\t\t\tdock="\'right\'",\n\t\t\t\t\tcallback="colorPickerCallback"\n\t\t\t\t\tqva-activate="item.enabled && mapItem(item) && onClick($event)"\n\t\t\t\t\ton-open="openColorPicker"\n\t\t\t\t\ton-close="closeColorpicker">\n\n\t\t\t\t\t<span class="lui-list__text qv-cm-list-text" ng-attr-title="{{item.tipText}}">\n\t\t\t\t\t\t<span ng-repeat="textItem in item.textItems" ng-class="{ highlighted: textItem.isHighlighted }" ng-bind="textItem.text"></span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class="lui-list__aside">\n\t\t\t\t\t\t<div class="qv-cm-color-wrap">\n\t\t\t\t\t\t\t<span ng-if="!item.paletteIcon" class="qv-cm-color" ng-class="{\'qv-cm-narrow\' : !item.inEdit, \'qv-cm-wide\': item.inEdit}" ng-style="item.colorStyle"></span>\n\t\t\t\t\t\t\t<span ng-if="item.paletteIcon" class="qv-cm-color qv-cm-wide lui-icon" ng-class="{\'lui-icon--palette\' : !item.inEdit, \'lui-icon--bin\': item.inEdit}" ng-style="item.colorStyle"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\n\t\t\t\t<qv-scroll-loader tag="li" class="qv-scroll-row-loader"></qv-scroll-loader>\n\t\t\t\t<qv-scroll-load-button tag="li" class="qv-cm-load-buttons" ng-show="scrollApi.loadNext" on-load="scrollApi.gotoNextBlock()"\n\t\t\t\t\t\t\t\t\t\ttext="Object.Listbox.LoadMore"></qv-scroll-load-button>\n\t\t\t</ul>\n\t\t</qv-scroll-area>\n\t\t<qv-scroll-loader></qv-scroll-loader>\n\t</div>\n\t<div class="qv-cm-nbr-custom">\n\t\t<div class="qv-cm-custom-wrapper" ng-class="{\'qv-cm-animate-in qv-cm-color-limit-feedback\' : warning, \'qv-cm-animate-out\' : !warning }">\n\t\t\t<span ng-show="colorArray.length === 100" class="lui-icon lui-icon--warning lui-text-warning"></span>\n\t\t\t<span class="lui-text-default" ng-show="colorArray.length > 0" ng-class="{\'lui-text-warning\': colorArray.length === 100}">{{nbrCustom}}</span>\n\t\t\t<span class="lui-text-default" ng-show="colorArray.length === 0" q-translation="library.colors.clickonvalue"></span>\n\t\t</div>\n\t</div>\n</div>\n\n'},function(e,t){e.exports='<lui-popover style="margin-top: -10px">\n\t<lui-popover-body class="lui-nopad">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item lui-list__action" ng-class="{\'lui-disabled\': !enabled}" qva-activate="clear()">\n\t\t\t\t<div class="lui-list__text lui-list__text--ellipsis">\n\t\t\t\t\t<span q-translation="library.colors.clear"></span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(788),n(789),n(91)],r=function(e,t,n,i){e.directive("schemeInput",function(){var e={borderColor:"#B3B3B3"};var r={borderColor:"#595959"};return{restrict:"E",replace:true,template:t,scope:{palette:"="},link:function t(o,a){o.schemeInputLogic=n.create(o.palette);o.colorBarHeight="7px";o.expanded=false;o.buttonHeight="36px";o.expandedBorder=e;o.pickScheme=function(e,t){o.schemeInputLogic.pickScheme(t);o.palette=t.propertyValue};o.getPaletteViewWidth=function(e){var t=o.schemeInputLogic.getNumberOfPaletteColors(e);return.85*a.width()/t+"px"};o.onClickSchemePicker=function(){o.expanded=!o.expanded;if(o.expanded&&o.schemeInputLogic.getPalettes().length>5){o.buttonHeight="209px";o.expandedBorder=r}else if(o.expanded){o.buttonHeight=38*o.schemeInputLogic.getPalettes().length+"px";o.expandedBorder=r}else{o.buttonHeight="36px";o.expandedBorder=e}};o.close=function(){o.expanded=false;o.buttonHeight="36px";o.expandedBorder=e};o.activateHover=function(){o.expandedBorder=r};o.disableHover=function(){o.expanded||(o.expandedBorder=e)};o.getPaletteName=function(e,t){var n=i.get(e);n||(n=t);return n};o.$watch("palette",function(){if(o.palette&&o.schemeInputLogic.getCurrentPalette().propertyValue!==o.palette){var e=o.schemeInputLogic.getThemePalettes().filter(function(e){return e.propertyValue==o.palette})[0];e||(e=o.schemeInputLogic.getThemePalettes()[0]);o.schemeInputLogic.pickScheme(e)}},true)}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div qv-enter="onClick($event)" class="lui-popover custom-dimensions-input-button" ng-class="{\'active\':active}" ng-style=" {\'height\' : buttonHeight, \'border-color\' : expandedBorder.borderColor} " ng-mouseenter="activateHover()" ng-mouseleave="disableHover()" qva-outside="close()">\n\t<div ng-if="!expanded" qva-activate="onClickSchemePicker($event)" class="custom-dimensions-selector-wrapper">\n\t\t<span class="lui-list__text palette-text">{{getPaletteName(schemeInputLogic.getCurrentPalette().translation, schemeInputLogic.getCurrentPalette().name)}}</span>\n\t\t<span class="lui-icon lui-icon--small lui-icon--triangle-bottom" style="float: right; margin-top: 7px; margin-right: 8px">\n\t\t</span>\n\t\t<div class="palette-color-wrapper">\n\t\t\t<div class="palette-color" ng-repeat="paletteColor in schemeInputLogic.getPaletteScale(schemeInputLogic.getCurrentPalette()) track by $index">\n\t\t\t\t<div ng-style="{\'background-color\' : schemeInputLogic.getPaletteColor(schemeInputLogic.getCurrentPalette(), $index), \'width\' : getPaletteViewWidth(schemeInputLogic.getCurrentPalette()), \'height\' : colorBarHeight}"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div ng-if="expanded" qva-activate="onClickSchemePicker($event)" class="custom-dimensions-selector-wrapper">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item lui-list__action custom-dimensions-palette-select" q-title-translation="{{schemeInputLogic.getCurrentPalette().translation}}" qva-activate="pickScheme($event, schemeInputLogic.getCurrentPalette())">\n\t\t\t\t<span class="lui-list__text palette-text">{{getPaletteName(schemeInputLogic.getCurrentPalette().translation, schemeInputLogic.getCurrentPalette().name)}}</span>\n\t\t\t\t<div class="palette-color-wrapper">\n\t\t\t\t\t<div class="palette-color" ng-repeat="paletteColor in schemeInputLogic.getPaletteScale(schemeInputLogic.getCurrentPalette()) track by $index">\n\t\t\t\t\t\t<div ng-style="{\'background-color\' : schemeInputLogic.getPaletteColor(schemeInputLogic.getCurrentPalette(), $index), \'width\' : getPaletteViewWidth(schemeInputLogic.getCurrentPalette()), \'height\' : colorBarHeight}"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item lui-list__action custom-dimensions-palette-select" ng-repeat=" schemePalette in schemeInputLogic.getPalettes()" ng-if="schemePalette != schemeInputLogic.getCurrentPalette()" q-title-translation="{{schemePalette.translation}}" qva-activate="pickScheme($event, schemePalette)">\n\t\t\t\t<span class="lui-list__text palette-text">{{getPaletteName(schemePalette.translation, schemePalette.name)}}</span>\n\t\t\t\t<div class="palette-color-wrapper">\n\t\t\t\t\t<div class="palette-color" ng-repeat="paletteColor in schemeInputLogic.getPaletteScale(schemePalette) track by $index">\n\t\t\t\t\t\t<div ng-style="{\'background-color\' : schemeInputLogic.getPaletteColor(schemePalette, $index), \'width\' : getPaletteViewWidth(schemePalette), \'height\' : colorBarHeight}"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(100)],r=function(e){function t(t){var n=r();var i=n.filter(function(e){return e.propertyValue==t})[0];i||(i=n[0]);function r(){var t=[];e.dataPalettes.forEach(function(e){"true"!==e.disabled&&t.push(e)});return t}function o(e,t){if("pyramid"===e.type)return e.scale[e.scale.length-1][t];return e.scale[t]}function a(e,t){var n;n="pyramid"===e.type?e.scale[e.scale.length-1].length:e.scale.length;return.85*t.width()/n+"px"}function s(e){if("pyramid"===e.type)return e.scale[e.scale.length-1];return e.scale}function l(e){return"pyramid"===e.type?e.scale[e.scale.length-1].length:e.scale.length}function c(e){var t=0;for(;t<e.length;t++)if(e[t].propertyValue===i.pal){i=e[t];break}}function u(e){i=e;e.pal=i.propertyValue}function d(){return i}function f(){return n}return{getThemePalettes:r,getPaletteColor:o,getPaletteViewWidth:a,getPaletteScale:s,getNumberOfPaletteColors:l,updatePalette:c,pickScheme:u,getCurrentPalette:d,getPalettes:f}}return{create:function e(n){return new t(n)}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){function t(t){e.isDirectDiscoveryField(t)&&(t.dimensionDialogMetaData={icon:"direct-discovery",iconTooltip:e.getTypeTranslationKey(t.qTags)})}return{addIconMetaData:t}}return{create:function t(n){return new e(n)}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(792)],r=function(e,t){function n(n){var i={template:t,controller:["$scope",function(e){e.input=n}],dock:"right",alignTo:n.alignTo[0]};return e.getService("luiPopover").show(i)}return{show:n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover id="library-preview" class="field-preview" x-arrow="arrow">\n\n\t<lui-popover-body>\n\t\t<h2 class="title">\n\t\t\t<span qve-highlight text="{{input.displayName ? input.displayName : input.name}}" query="input.query"></span>\n\t\t</h2>\n\n\t\t<div ng-if="input.sourceField">\n\t\t\t<h2><span q-translation="library.preview.header.source-field">&nbsp;</span></h2>\n\n\t\t\t<p class="sourcefield">{{input.sourceField}}</p>\n\t\t</div>\n\n\t\t<h2><span q-translation="library.preview.header.table">&nbsp;</span></h2>\n\t\t<ul class="tables">\n\t\t\t<li ng-repeat="table in input.tables">{{table}}</li>\n\t\t</ul>\n\t\t<h2 ng-if="input.typeTranslationKey"><span q-translation="assets.preview.header.fieldtype">&nbsp;</span></h2>\n\n\t\t<p ng-if="input.typeTranslationKey" class="field-type" q-translation="{{input.typeTranslationKey}}">&nbsp;</p>\n\n\t\t<div ng-if="input.calendarTemplateName">\n\t\t\t<h2><span q-translation="{{input.isDerivedFromDate ? \'library.preview.header.calendar-template\' : \'library.preview.header.field-template\'}}">&nbsp;</span></h2>\n\n\t\t\t<p class="calendar-template">{{input.calendarTemplateName}}</p>\n\t\t</div>\n\n\t\t<div ng-if="input.derivedCalendars && input.derivedCalendars.length > 0">\n\t\t\t<h2><span q-translation="{{input.isDateField ? \'library.preview.header.applied-calendars\' : \'library.preview.header.applied-field-templates\'}}">&nbsp;</span></h2>\n\t\t\t<ul class="tables">\n\t\t\t\t<li ng-repeat="cal in input.derivedCalendars">{{cal}}</li>\n\t\t\t</ul>\n\t\t</div>\n\n\t\t<div ng-if="input.isSingleSelectSupported && input.alwaysOneSelected">\n\t\t\t<h2 q-translation="library.preview.singleSelect.header">&nbsp;</h2>\n\t\t\t<ul class="tables">\n\t\t\t\t<li ng-if="input.alwaysOneSelected" q-translation="Common.Enabled">&nbsp;</li>\n\t\t\t</ul>\n\t\t</div>\n\n\t</lui-popover-body>\n\n\t<lui-popover-footer>\n\t\t<button class="lui-fade-button" ng-repeat="button in input.buttons.slice().reverse()" q-title-translation="{{button.title}}"\n\t\t\t\tqva-activate="$event.preventDefault(); button.action($event)" ng-disabled="button.disabled" tid="{{button.tid}}">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--{{button.icon}}"></span>\n\t\t</button>\n\t</lui-popover-footer>\n</lui-popover>'},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(91),n(126),n(794),n(795)],r=function(e,t,n,i){var r={template:i,controller:["$scope","$q","CalendarMeasuresDialogService",function(i,r,o){i.previewsLoading=false;i.measuresCreating=false;i.aggregations=["Sum","Count","Avg","Min","Max"];i.measureTypes=[];i.viewModel={previewsExpanded:false};i.previewSelectionModel={};i.selectionModel={selectedAggregation:"Sum",selectedDate:void 0,selectedMeasure:void 0,selectedMeasureType:void 0};function a(){var e=o.getDateFields().then(function(e){i.dateFields=e;i.selectedField.isDateField?i.selectionModel.selectedDate=i.dateFields.filter(function(e){return e.qName===i.selectedField.name})[0]:i.dateFields.length?i.selectionModel.selectedDate=i.dateFields[0]:i.missingStateErrorMessage=t.get("Dialog.CalendarFlags.ErrorMessage.NoDateField")});var n=o.getMeasureFields().then(function(e){i.measures=e;i.selectedField.isDateField?i.measures.length?i.selectionModel.selectedMeasure=i.measures[0]:i.missingStateErrorMessage=t.get("Dialog.CalendarFlags.ErrorMessage.NoFields"):i.selectionModel.selectedMeasure=i.measures.filter(function(e){return e.qName===i.selectedField.name})[0]});r.all([e,n]).then(function(){i.initialized=true})}function s(){return o.getAvailableMeasureTypes(i.selectionModel.selectedDate.qName,i.selectionModel.selectedMeasure.qName,i.selectionModel.selectedAggregation).then(function(e){i.measureTypes=[];Object.keys(e).forEach(function(n){e[n]&&i.measureTypes.push({name:t.get("Dialog.CalendarFlags."+n),value:n})});if(i.measureTypes.length>0)if(i.selectionModel.selectedMeasureType){var n=i.measureTypes.filter(function(e){return e.value===i.selectionModel.selectedMeasureType.value});n.length>0&&(i.selectionModel.selectedMeasureType=n[0])}else i.selectionModel.selectedMeasureType=i.measureTypes[0];else i.selectionModel.selectedMeasureType=void 0})}i.createMasterMeasures=function(){var e=i.previewMeasures.filter(function(e){return i.previewSelectionModel[e.name].selected&&!e.alreadyExists});i.measuresCreating=true;o.createMasterItems(i.selectionModel.selectedDate.qName,i.selectionModel.selectedMeasure.qName,i.selectionModel.selectedAggregation,i.selectionModel.selectedMeasureType.value,e).finally(function(){i.measuresCreating=false;l();i.assets&&i.assets.openSection(n.sectionIDs.measure)})};i.isAddToMasterLibraryEnabled=function(){return!i.measuresCreating&&i.previewMeasures&&i.previewMeasures.some(function(e){return i.previewSelectionModel[e.name].selected&&!e.alreadyExists})};i.$watch("selectionModel",function(n,r){if(i.missingStateErrorMessage||!i.initialized)return;if(e.equals(n,r))return;var o=n.selectedMeasureType;s().then(function(){if(0===i.measureTypes.length){i.previewMeasures=[];i.inlineErrorMessage=t.get("Dialog.CalendarFlags.ErrorMessage.NoTimeCycleFlags")}else o&&l()})},true);var l=function e(){i.previewsLoading=true;o.getMasterMeasures(i.selectionModel.selectedDate.qName,i.selectionModel.selectedMeasure.qName,i.selectionModel.selectedAggregation,i.selectionModel.selectedMeasureType.value).then(function(e){i.previewMeasures=e.measures;i.previewMeasures.forEach(function(e){i.previewSelectionModel[e.name]||(i.previewSelectionModel[e.name]={selected:true})})}).finally(function(){i.previewsLoading=false})};var c=function e(){i.destroyComponent()};i.cancel=function(){c()};i.addToMaster=function(){c()};a()}]};return{component:r}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-dialog id="calendar-measures-dialog">\n\t<lui-dialog-header q-translation="Dialog.CalendarFlags.Title"></lui-dialog-header>\n\t<lui-dialog-body>\n\n\t\t<qv-spinner class="spinner" show="!initialized" show-delay="100" show-for-at-least="300" spinner-height="250px" spinner-width=250px" center-in-parent="true"></qv-spinner>\n\n\t\t<div class="body error-message" ng-if="initialized && missingStateErrorMessage">\n\t\t\t{{missingStateErrorMessage}}\n\t\t</div>\n\n\t\t<div class="body" ng-if="initialized && !missingStateErrorMessage">\n\n\t\t\t<div class="left-side">\n\t\t\t\t<div class="section">\n\t\t\t\t\t<label class="lui-label" q-translation="Dialog.CalendarFlags.DateField"></label>\n\t\t\t\t\t<lui-select x-model="selectionModel.selectedDate" x-options="field as field.qName for field in dateFields"></lui-select>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="section">\n\t\t\t\t\t<label class="lui-label" q-translation="Dialog.CalendarFlags.AggregatedField"></label>\n\t\t\t\t\t<lui-select x-model="selectionModel.selectedMeasure" x-options="field as field.qName for field in measures">\n\t\t\t\t\t</lui-select>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="section">\n\t\t\t\t\t<label class="lui-label" q-translation="Dialog.CalendarFlags.AggregationField"></label>\n\t\t\t\t\t<lui-select x-model="selectionModel.selectedAggregation" x-options="aggregation as aggregation for aggregation in aggregations">\n\t\t\t\t\t</lui-select>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="section">\n\t\t\t\t\t<label class="lui-label" q-translation="Dialog.CalendarFlags.TimeCycleField"></label>\n\t\t\t\t\t<lui-select x-model="selectionModel.selectedMeasureType" x-disabled="measureTypes.length === 0" x-options="measureType as measureType.name for measureType in measureTypes">\n\t\t\t\t\t</lui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="right-side">\n\n\t\t\t\t<div class="details-toggle-container">\n\t\t\t\t\t<div class="details-toggle-container-left-side">\n\t\t\t\t\t\t<div class="preview-title" q-translation="Dialog.CalendarFlags.PreviewMeasuresTitle"></div>\n\t\t\t\t\t\t<div class="details-text" ng-if="!viewModel.previewsExpanded" q-translation="Dialog.CalendarFlags.PreviewDetailsOff"></div>\n\t\t\t\t\t\t<div class="details-text" ng-if="viewModel.previewsExpanded" q-translation="Dialog.CalendarFlags.PreviewDetailsOn"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<lui-switch x-model="viewModel.previewsExpanded"></lui-switch>\n\t\t\t\t</div>\n\n\t\t\t\t<div style="position: relative; flex: 1">\n\t\t\t\t\t<qv-spinner class="spinner" show="previewsLoading || measuresCreating" show-delay="200" show-for-at-least="1000" spinner-height="150px" spinner-width="150px" center-in-parent="true"></qv-spinner>\n\n\t\t\t\t\t<div class="measure-container qv-animate" ng-hide="previewsLoading">\n\t\t\t\t\t\t<div ng-repeat="measure in previewMeasures" class="measure">\n\t\t\t\t\t\t\t<lui-checkbox x-model="previewSelectionModel[measure.name].selected" ng-if="!measure.alreadyExists" title="{{measure.name}}">{{measure.name}}</lui-checkbox>\n\t\t\t\t\t\t\t<div class="label" ng-if="measure.alreadyExists" title="{{measure.name}}">\n\t\t\t\t\t\t\t\t<span class="lui-icon  lui-icon--tick checkmark"></span>\n\t\t\t\t\t\t\t\t<lui-label>{{measure.name}}</lui-label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<input class="lui-input measure-preview" ng-model="measure.expr" readonly="true" title="{{measure.expr}}" ng-if="viewModel.previewsExpanded"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div ng-if="inlineErrorMessage && previewMeasures.length === 0" class="inline-error">\n\t\t\t\t\t\t{{inlineErrorMessage}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\n\n\n\t\t\t\t<lui-button class="create-measure-button" ng-click="createMasterMeasures()" q-translation="Dialog.CalendarFlags.SaveToMasterItems" tid="add_to_master" ng-disabled="!isAddToMasterLibraryEnabled()"></lui-button>\n\n\t\t\t</div>\n\n\t\t</div>\n\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<lui-button ng-click="cancel()" q-translation="Common.Close" tid="close"></lui-button>\n\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(93),n(144),n(183),n(90),n(182)],r=function(e,t,n,i,r,o){e.service("CalendarMeasuresDialogService",[function(){var e={};var a;function s(){a||(a=i.getApi("api/dataprepservice/v1","openapi",void 0,void 0,void 0,void 0,o.getServerNodeId()));return a}function l(e,t,n,i,o,a){return s().then(function(s){if(s&&s.apis.assets)return s.apis.assets.generateAssets({appId:r.getParameterByName("app"),body:{topic:"timeCycleAnalysis",calendarField:e,measure:{field:t,aggr:n},addOnly:a,addToLibrary:o,assetTypes:i}}).then(function(e){return e.body.response})})}e.getAvailableMeasureTypes=function(e,t,n){return l(e,t,n,["measuresYearly","measuresMonthly","measuresQuarterly","measuresWeekly"],false).then(function(e){return e.hasPrerequisites})};e.getMasterMeasures=function(e,t,n,i){return l(e,t,n,[i],false)};e.createMasterItems=function(e,t,n,i,r){return l(e,t,n,[i],true,r)};function c(){return t.getApp().then(function(e){return e.getFieldList().then(function(e){return n.expand(e)})})}e.getDateFields=function(){return c().then(function(e){return e.filter(function(e){return e.qDerivedFieldData})})};e.getMeasureFields=function(){return c().then(function(e){return e.filter(function(e){return!e.qDerivedFieldData&&!e.isDerivedFromDate})})};return e}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(797),n(798),n(799),n(94),n(91),n(145),n(211),n(241)],r=function(e,t,n,i,r,o){var a;var s=function e(t){function s(){t.singleSelectNotEditable=false;t.singleSelectTitle=o.get("field.settings.dialog.singleSelect.label");t.confirmLabel=t.confirmLabel||"Common.Save";t.fieldSettingsTitle=o.get("field.settings.dialog.title");i.fetchAndExtendSettings(t.app,t.fieldName,t.fieldSettings);t.singleSelectErrorTranslation=null}function l(e,i){t.fieldSettings.alwaysOneSelected=!i;t.singleSelectNotEditable=true;var r=(i?"A":"D")+"-"+e;var a=n.getErrorCodeTranslation(r);t.singleSelectErrorTranslation=a;t.singleSelectTitle=o.get(a)}s();t.cancel=function(){a.closed.then(function(){t.destroyComponent()});a.close()};t.confirm=function(){if(n.validate(t)){var e=n.getFormData(t);var r=e.alwaysOneSelected;i.applySingleSelect(t.app,t.fieldName,r).then(function(e){e.success?t.app.global.getConfiguration().then(function(e){e.qFeatures.qAutoSave&&t.app.doSave();a.close()}):l(e.code,r)})}};r.StateChanged.bind(t.cancel);t.$on("$destroy",function(){r.StateChanged.unbind(t.cancel)})};var l={scope:{},template:t,controller:["$scope",s]};function c(t){var n={title:t.name,fieldName:t.name,app:t.app,fieldSettings:{description:t.description,descriptionExpression:t.descriptionExpression,alwaysOneSelected:t.alwaysOneSelected,preSelectExpression:t.preSelectExpression}};a=e.getService("luiDialog").show({template:l.template,controller:l.controller,input:n,closeOnOutside:false,showArrow:false});return a}return{show:c,controller:s}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="lui-modal-background"></div>\n\n<div class="lui-dialog field-settings-dialog-wrapper" name="fieldSettingsDialog" style="width: 440px;" data-tid="field-settings-dialog">\n\t<div class="lui-dialog__header">\n\t\t<div class="lui-dialog__title">{{fieldSettingsTitle}}</div>\n\t</div>\n\t<div class="lui-dialog__body">\n\n\t\t\x3c!-- Description - TODO: To be added later --\x3e\n\t\t\x3c!-- <div class="field-settings-component">\n\t\t\t<label q-translation="metadata.description" class="qv-metadatalabel">Description:</label>\n\t\t\t<qv-description-textarea\n\t\t\t\tdescription="fieldSettings.description"\n\t\t\t\tdescription-expression="fieldSettings.descriptionExpression"\n\t\t\t\tng-disabled="true"\n\t\t\t\tis-valid="validity.descriptionExpression">\n\t\t\t</qv-description-textarea>\n\t\t</div> --\x3e\n\n\t\t\x3c!-- TODO: Checkbox with Always-one-selected --\x3e\n\t\t\n\t\t<div class="field-settings-component">\n\t\t\t<h1>{{fieldName}}</h1>\n\t\t\t<label class="lui-checkbox" title="{{singleSelectTitle}}">\n\t\t\t\t<input class="lui-checkbox__input" type="checkbox" ng-model="fieldSettings.alwaysOneSelected" tid="always-one-selected" ng-change="change()" ng-disabled="readOnly || fieldSettings.isFetching || singleSelectNotEditable">\n\t\t\t\t<div class="lui-checkbox__check-wrap">\n\t\t\t\t\t<span class="lui-checkbox__check"></span>\n\t\t\t\t\t<span class="lui-checkbox__check-text label" \n\t\t\t\t\t\tng-disabled="readOnly" \n\t\t\t\t\t\tq-translation="field.settings.dialog.singleSelect.label">\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</label>\n\t\t\t<div ng-if="singleSelectErrorTranslation" class="error">\n\t\t\t\t<span q-translation="{{singleSelectErrorTranslation}}"></span>\n\t\t\t</div>\n\t\t\t<div class="hint" q-translation="field.settings.dialog.singleSelect.disclaimer"></div>\n\n\t\t</div>\n\n\t\t\x3c!-- Pre-selection expression - TODO: To be added later --\x3e\n\t\t\x3c!-- <div class="field-settings-component">\n\t\t\t<qv-expression-input ng-disabled="true" label-translation="Pre-Selection" expression="fieldSettings.preSelectExpression" is-valid-expression="validity.preSelectExpression"></qv-expression-input>\n\t\t</div> --\x3e\n\n\t</div>\n\t<div class="lui-dialog__footer">\n\t\t<button class="lui-button close-button" qva-activate="cancel()" name="cancelButton" q-translation="Common.Cancel" data-tid="close-btn"></button>\n\t\t<button class="lui-button close-button" qva-activate="$event.preventDefault(); confirm()" name="confirmButton" q-translation="{{confirmLabel}}" data-tid="create-btn" ng-disabled="singleSelectNotEditable"></button>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){return{validate:e,getFormData:t,getErrorCodeTranslation:n};function e(){return true}function t(e){return{alwaysOneSelected:e.fieldSettings.alwaysOneSelected}}function n(e){var t={1:"field.settings.dialog.singleSelect.error.unknown","A-2":"field.settings.dialog.singleSelect.error.activateNoSelectableValue","A-3":"field.settings.dialog.singleSelect.error.activateSelectableValueFailed","A-4":"field.settings.dialog.singleSelect.error.activateSetFieldProps","D-4":"field.settings.dialog.singleSelect.error.deactivateSetFieldProps"};var n=t["1"];return t[e]||n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(142),n(141),n(90),n(89),n(49)],r=function(e,t,n,i,r){var o={ERROR_NO_SELECTABLE_VALUE:2,ERROR_COULD_NOT_SELECT_VALUE:3,ERROR_COULD_NOT_SET_FIELD_PROPS:4};return{applySingleSelect:h,fetchAndExtendSettings:s};function a(t,n){var i={};return e.isSingleSelect(t,n).then(function(e){i.alwaysOneSelected=e;return i})}function s(e,t,i){i.isFetching=true;return a(e,t).then(function(e){return n.extend(true,i,e)}).finally(function(){delete i.isFetching})}function l(e,n,i){var r=1;return t.createTransientField(e.app,n,{qStateName:i}).then(function(e){var t="/qListObjectDef";var n={qTop:0,qLeft:0,qWidth:1,qHeight:r};return e.getListObjectData(t,[n]).then(function(e){var t=e[0].qMatrix;var n=t[0][0];return n.qElemNumber})})}function c(e,t,n){var i=true;return l(e,t,n).then(function(t){if("number"===typeof t)return e.clear().then(function(){return e.lowLevelSelect([t],false,i).then(function(e){if(!e)return{success:false,code:o.ERROR_COULD_NOT_SELECT_VALUE};return{success:true}}).catch(function(){return{success:false,code:o.ERROR_COULD_NOT_SELECT_VALUE}})});return{success:false,code:o.ERROR_NO_SELECTABLE_VALUE}}).catch(function(){return{success:false,code:o.ERROR_NO_SELECTABLE_VALUE}})}function u(e,t){return e.setNxProperties(t).then(function(){return{success:true}}).catch(function(){return{success:false,code:o.ERROR_COULD_NOT_SET_FIELD_PROPS}})}function d(e){return e.getAppLayout().then(function(e){return["$"].concat(e.qStateNames)})}function f(e){e=e||[];var t=e.reduce(function(e,t){var n=i.resolve(e);return n.then(function(){return t()})},i.resolve());return t}function p(e,t,n,i){return e.getField(t,n).then(function(e){return e.getNxProperties().then(function(r){var o=r.qOneAndOnlyOne;if(!o&&true===i)return c(e,t,n).then(function(t){if(true===t||t.success){r.qOneAndOnlyOne=i;return u(e,r)}return t});r.qOneAndOnlyOne=i;return u(e,r)})})}function h(e,t,n,o){o=o||false;if("boolean"!==typeof n)return i.resolve({success:false});function a(i){if(!i.success&&!o)return h(e,t,!n,i.code);return{success:!o&&i.success,code:o||i.code,reverted:!!o&&i.success}}if(r.getFlag("ALT_STATE_ONE"))return d(e).then(function(i){var r=i.map(function(i){return function(){return p(e,t,i,n)}});return f(r).then(a)});return p(e,t,void 0,n).then(a)}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(94),n(126),n(136),n(112),n(149),n(137),n(194),n(107),n(90),n(269),n(134),n(106),n(357),n(358),n(111),n(174)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h){function v(e){var t="";"N"===e?t="Common.Single":"H"===e&&(t="library.preview.dimensiontype.drilldown");return t}function g(e){var t=e.qFieldDefs[0];return"N"===e.qGrouping&&!!t&&"="===t.charAt(0)}function m(t){d.remove(t.id).then(function(){e.getService("qvColorMapService").deleteColorMap(t.id).then(function(){e.$rootScope.$emit("clearUndo")})})}function b(e){var t=new u;t.edit(e.id)}function y(e){r.addItemToSheetOrVisualization(e)}function x(e){r.hasLinks(e.id,d).then(function(t){var n="Dimension.EditWarning.Text";t?r.editDialog(n,function(){b(e)}):b(e)})}function S(e){r.hasLinks(e.id,d).then(function(t){var n=t?"Dimension.Master.DeleteWarning.Text":"Dimension.Master.DeleteWarning.Unused.Text";r.removeDialog(n,function(){m(e)})})}function w(t){d.getListLayout().then(function(n){var i=n.map(function(e){return e.qData.title});d.get(t.id).then(function(n){n.app.cloneDimension(t.id).then(function(r){n.app.getDimension(r).then(function(n){n.getProperties().then(function(r){var o=s.generateUniqueName(i,t.name);o=c.crop(o,l.name);r.qMetaDef.title=o;r.qDim.title=o;if(r.qDim.coloring&&r.qDim.coloring.colorMapRef){var a=e.getService("qvColorMapService");r.qDim.coloring.colorMapRef=r.qInfo.qId;a.getColorMap(t.id).then(function(e){e&&a.setColorMap(r.qInfo.qId,e)})}n.setProperties(r).then(function(){e.$rootScope.$emit("clearUndo")})})})})})})}return i.extend({init:function e(){this.list=[];this.id=n.sectionIDs.dimension;this.name="dimension";this.title="Common.Dimensions";this._super.apply(this,arguments);this.initPreviewManager();this.allowAdd=r.permissionToCreate("dimension")},addId:"addDimension",addText:"Dimension.Toolbox.CreateButton",addAction:function e(){var t=new u;t.add(null)},initLoadData:function e(){d.getList().then(function(e){this.$scope.listModel=e}.bind(this));f(this.$scope,"listModel",this.onLoadData.bind(this))},initPreviewManager:function e(){var n=this;function i(e){var t=e.item;var i=e.modelInfo;var a=o.getBasePreviewInfo(e);a.description=i.layout.qDim.descriptionExpression||i.properties.qMetaDef.description;a.typeTranslationKey=v(i.properties.qDim.qGrouping);a.isSingleExpression=g(i.properties.qDim);a.fields=i.properties.qDim.qFieldDefs;a.labelExpression=i.layout.qDim.qLabelExpression;a.labelExpressionDef=i.properties.qDim.qLabelExpression;a.qId=i.properties.qInfo.qId;i.properties.qDim.coloring&&(a.baseColor=i.properties.qDim.coloring.baseColor);a.buttons=[o.buttonAddTo(y,e.closePreview,t,r.getAddToText(),r.isAddToMode())];n.allowAdd&&a.buttons.push(o.buttonDuplicate(w,e.closePreview,t));t.permissions.update&&a.buttons.push(o.buttonEdit(x,e.closePreview,t));t.permissions.remove&&a.buttons.push(o.buttonDelete(S,e.closePreview,t));a.close=e.closePreview;o.alignPreview(a,e.$element);return h.show(a)}this.previewManager=o.previewManagerFactory({getSlowInfo:function e(t){return o.getItemInformation(d,t.id)},createPreview:i,itemDialogHandler:a,State:t})},onLoadData:function e(t){this.loading=false;t=p.create(t);this.list=r.localeOrderBy(t,function(e){return e.name});this.onFilter()},doFilter:function e(t){var n=this.assets.query;r.removeSelection(t);this.previewManager.close();return t.filter(function(e){return r.libraryMultiSearch(e,n,["name","secondaryName","tags"])})},openContextMenu:function t(n,i){var o=e.getService("qvContextMenu").menu();r.isAddToMode()&&o.addItem({translation:r.getContextMenuAddToText(),tid:"add-to-sheet",select:function e(){y(n)}});n.permissions&&n.permissions.update&&o.addItem({translation:"Common.Edit",tid:"edit-master",select:function e(){x(n)}});this.allowAdd&&o.addItem({translation:"Common.Duplicate",tid:"duplicate-master",select:function e(){w(n)}});n.permissions&&n.permissions.remove&&o.addItem({translation:"Common.Delete",tid:"remove-master",select:function e(){S(n)}});a.openContextMenu(o,n,i)},addItemToSheetOrActiveObject:function e(t){y(t)}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover id="library-preview" class="dimension-preview" x-arrow="arrow">\n\n\t<lui-popover-body>\n\t\t<h2 class="title" title="{{input.name}}">\n\t\t\t<span qve-highlight text="{{input.name}}" query="input.query"></span>\n\t\t</h2>\n\n\t\t<p ng-if="showLabelExpression" class="label-expression" qve-highlight text="{{input.labelExpression}}" query="input.query"></p>\n\n\t\t<p class="description">{{input.description}}</p>\n\n\t\t<h2><span q-translation="library.preview.header.type"></span></h2>\n\t\t<p class="no-scroll" q-translation="{{input.typeTranslationKey}}" tid="preview-dimension-type"></p>\n\n\t\t<h2><span q-translation="library.preview.header.fields"></span></h2>\n\t\t<ul class="fields" ng-class="{ \'single-expression\': input.isSingleExpression }">\n\t\t\t<li ng-repeat="field in input.fields" title="{{field}}">{{field}}</li>\n\t\t</ul>\n\n\t\t<div ng-if="showLabelExpressionDef">\n\t\t\t<h2><span q-translation="library.preview.header.labelExpression"></span></h2>\n\t\t\t<p class="label-expression-def">{{input.labelExpressionDef}}</p>\n\t\t</div>\n\n\t\t<div ng-if="color">\n\t\t\t<h2><span q-translation="library.colors.dimensioncolor"></span></h2>\n\t\t\t<div class="color-row">\n\t\t\t\t<div class="color" ng-style="{\'background-color\': color}"></div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="valueColors.length">\n\t\t\t<h2><span q-translation="library.colors.valuecolors"></span></h2>\n\t\t\t<div class="color-row" tid="val-cols">\n\t\t\t\t<div ng-repeat="valcolors in valueColors track by $index" class="color" ng-style="{\'background-color\': valcolors, \'width\': previewColorViewWidth}">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="input.tags.length">\n\t\t\t<h2><span q-translation="Common.Tags"></span></h2>\n\t\t\t<ul class="tags">\n\t\t\t\t<li ng-repeat="tag in input.tags" class="lui-tag" ng-class="{ \'lui-matched\': tag.matching }" title="{{tag.name}}">{{tag.name}}</li>\n\t\t\t</ul>\n\t\t</div>\n\t</lui-popover-body>\n\n\t<lui-popover-footer>\n\t\t<button class="lui-fade-button" ng-repeat="button in input.buttons.slice().reverse()" q-title-translation="{{button.title}}"\n\t\t\t\tqva-activate="$event.preventDefault(); button.action($event)" ng-disabled="button.disabled" tid="{{button.tid}}">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--{{button.icon}}"></span>\n\t\t</button>\n\t</lui-popover-footer>\n</lui-popover>'},function(e,t,n){"use strict";var i,r;!(i=[n(100),n(174)],r=function(e){var t=[];function n(n){t=[];if(n.usePal)n.colors.length?t=n.colors.map(function(t){return e.resolveColor(t.baseColor)}):e.dataPalettes.forEach(function(e){e.propertyValue===n.pal&&(t="pyramid"===e.type?t.concat(e.scale[e.scale.length-1]):t.concat(e.scale))});else if(n.single&&"none"!==n.single.color){t.push(e.resolveColor(n.single));if(n.colors){var i=n.colors.map(function(t){return e.resolveColor(t.baseColor)});t=t.concat(i)}}else n.colors&&(t=n.colors.map(function(t){return e.resolveColor(t.baseColor)}));return t}function i(e){return 0!==e.length?100/e.length+"%":0}return{getColors:n,getPreviewColorViewWidth:i}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(94),n(126),n(136),n(112),n(149),n(137),n(194),n(107),n(90),n(217),n(147),n(106),n(804),n(805),n(111)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h){function v(e){u.editMeasure(e.id)}function g(e){d.remove(e.id)}function m(e){r.addItemToSheetOrVisualization(e)}function b(e){r.hasLinks(e.id,d).then(function(t){var n="Measure.Master.EditWarning.Text";t?r.editDialog(n,function(){v(e)}):v(e)})}function y(e){r.hasLinks(e.id,d).then(function(t){var n=t?"Measure.Master.DeleteWarning.Text":"Measure.Master.DeleteWarning.Unused.Text";r.removeDialog(n,function(){g(e)})})}function x(e){d.getListLayout().then(function(t){var n=t.map(function(e){return e.qData.title});d.get(e.id).then(function(t){t.app.cloneMeasure(e.id).then(function(e){return t.app.getMeasure(e)}).then(function(t){t.getProperties().then(function(i){var r=s.generateUniqueName(n,e.name);r=c.crop(r,l.name);i.qMetaDef.title=r;i.qMeasure.qLabel=r;t.setProperties(i)})})})})}return i.extend({init:function e(){this.list=[];this.id=n.sectionIDs.measure;this.name="measure";this.title="Common.Measures";this._super.apply(this,arguments);this.initPreviewManager();this.allowAdd=r.permissionToCreate("measure")},addId:"addMeasure",addText:"Measure.Toolbox.CreateButton",addAction:function e(){u.addMeasure(null)},initLoadData:function e(){d.getList().then(function(e){this.$scope.listModel=e}.bind(this));f(this.$scope,"listModel",this.onLoadData.bind(this))},initPreviewManager:function e(){var n=this;function i(e){var t=e.item;var i=e.modelInfo;var a=o.getBasePreviewInfo(e);a.description=i.layout.qMeasure.descriptionExpression||i.properties.qMetaDef.description;a.expression=i.properties.qMeasure.qDef;a.labelExpression=i.properties.qMeasure.qLabelExpression;a.labelExpression=i.layout.qMeasure.qLabelExpression;a.labelExpressionDef=i.properties.qMeasure.qLabelExpression;a.baseColor=i.properties.qMeasure.coloring?i.properties.qMeasure.coloring.baseColor:i.properties.qMeasure.baseColor;a.qId=i.properties.qInfo.qId;a.buttons=[o.buttonAddTo(m,e.closePreview,t,r.getAddToText(),r.isAddToMode())];n.allowAdd&&a.buttons.push(o.buttonDuplicate(x,e.closePreview,t));t.permissions.update&&a.buttons.push(o.buttonEdit(b,e.closePreview,t));t.permissions.remove&&a.buttons.push(o.buttonDelete(y,e.closePreview,t));a.close=e.closePreview;o.alignPreview(a,e.$element);return h.show(a)}this.previewManager=o.previewManagerFactory({getSlowInfo:function e(t){return o.getItemInformation(d,t.id)},createPreview:i,itemDialogHandler:a,State:t})},onLoadData:function t(n){this.loading=false;e.$rootScope.$emit("clearUndo");n=p.create(n);this.list=r.localeOrderBy(n,function(e){return e.name});this.onFilter()},doFilter:function e(t){var n=this.assets.query;r.removeSelection(t);this.previewManager.close();return t.filter(function(e){return r.libraryMultiSearch(e,n,["name","secondaryName","tags"])})},openContextMenu:function t(n,i){var o=e.getService("qvContextMenu").menu();r.isAddToMode()&&o.addItem({translation:r.getContextMenuAddToText(),tid:"add-to-sheet",select:function e(){m(n)}});n.permissions&&n.permissions.update&&o.addItem({translation:"Common.Edit",tid:"edit-master",select:function e(){b(n)}});this.allowAdd&&o.addItem({translation:"Common.Duplicate",tid:"duplicate-master",select:function e(){x(n)}});n.permissions&&n.permissions.remove&&o.addItem({translation:"Common.Delete",tid:"remove-master",select:function e(){y(n)}});a.openContextMenu(o,n,i)},addItemToSheetOrActiveObject:function e(t){m(t)}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(49),n(157)],r=function(e,t){function n(e){var t={};t.permissions=e.permissions;t.name=e.qData.title;t.secondaryName=e.qData.labelExpression||"";t.type=e.qInfo.qType;t.id=e.qInfo.qId;t.getDropOption=r.bind(null,t);t.tags=e.qData.tags;return t}function i(e){return{id:"newObject",args:{template:"kpi",init:{qHyperCubeDef:{qDimensions:[],qMeasures:[{qLibraryId:e.id,qDef:{autoSort:true,numFormatFromTemplate:true,conditionalColoring:{useConditionalColoring:false,singleColor:3,segments:{limits:[],colors:[{color:2}]}},measureAxis:{min:0,max:100},qNumFormat:{}},qSortBy:{qSortByLoadOrder:1,qSortByNumeric:-1}}],qInterColumnSortOrder:[0]}}}}}function r(n,r,o){if(e.getFlag("DISABLE_AUTO_CHART")||t.isVariableDefined("DISABLE_AUTO_CHART"))return i(n);if(o&&o.shiftKey)return i(n);return{id:"newObject",args:{template:"auto-chart",init:{qHyperCubeDef:{qMeasures:[{qLibraryId:n.id}],qInterColumnSortOrder:[0]},showTitles:false}}}}var o={create:function e(t){return t.map(function(e){return n(e)})}};return o}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(806),n(100),n(174)],r=function(e,t,n){function i(i){var r={template:t,controller:["$scope",function(t){t.input=i;i.baseColor&&i.baseColor.color&&(t.color=n.resolveColor(i.baseColor));t.showLabelExpression=!!t.input.labelExpression;t.showLabelExpressionDef=!!t.input.labelExpressionDef;var r=e.getService("qvColorMapService"),o=e.getService("qvRecentGradientsService");r.getMeasureGradient(t.input.qId).then(function(e){if(e){t.gradient=e;t.gradientColors=e.colors.map(function(e){return n.resolveColor(e)});t.gradientLimits="absolute"===e.limitType?o.convertAbsLimits(e.limits):e.limits.slice()}})}],dock:"right",alignTo:i.alignTo[0]};return e.getService("luiPopover").show(r)}return{show:i}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover id="library-preview" class="measure-preview" x-arrow="arrow">\n\n\t<lui-popover-body>\n\t\t<h2 class="title" title="{{input.name}}">\n\t\t\t<span qve-highlight text="{{input.name}}" query="input.query"></span>\n\t\t</h2>\n\n\t\t<p ng-if="showLabelExpression" class="label-expression" qve-highlight text="{{input.labelExpression}}" query="input.query"></p>\n\n\t\t<p class="description">{{input.description}}</p>\n\n\t\t<h2><span q-translation="library.preview.header.expression">&nbsp;</span></h2>\n\t\t<p class="expression">{{input.expression}}</p>\n\n\t\t<div ng-if="showLabelExpressionDef">\n\t\t\t<h2><span q-translation="library.preview.header.labelExpression">&nbsp;</span></h2>\n\t\t\t<p class="label-expression-def">{{input.labelExpressionDef}}</p>\n\t\t</div>\n\n\t\t<div ng-if="color">\n\t\t\t<h2><span q-translation="library.colors.measurecolor">&nbsp;</span></h2>\n\t\t\t<div class="color" ng-style="{\'background-color\': color}"></div>\n\t\t</div>\n\n\t\t<div ng-if="gradient">\n\t\t\t<h2><span q-translation="library.colors.segmentColors">&nbsp;</span></h2>\n\t\t\t<div class="color" qv-color-scheme-display colors="gradientColors" types="gradient.breakTypes" limits="gradientLimits"></div>\n\t\t</div>\n\n\t\t<div ng-if="input.tags.length">\n\t\t\t<h2><span q-translation="Common.Tags">&nbsp;</span></h2>\n\t\t\t<ul class="tags">\n\t\t\t\t<li ng-repeat="tag in input.tags" class="lui-tag" ng-class="{ \'lui-matched\': tag.matching }" title="{{tag.name}}">{{tag.name}}</li>\n\t\t\t</ul>\n\t\t</div>\n\t</lui-popover-body>\n\n\t<lui-popover-footer>\n\t\t<button class="lui-fade-button" ng-repeat="button in input.buttons.slice().reverse()" q-title-translation="{{button.title}}"\n\t\t\t\tqva-activate="$event.preventDefault(); button.action($event)" ng-disabled="button.disabled" tid="{{button.tid}}">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--{{button.icon}}"></span>\n\t\t</button>\n\t</lui-popover-footer>\n</lui-popover>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(95),n(94),n(126),n(136),n(112),n(149),n(137),n(194),n(107),n(90),n(128),n(131),n(115),n(314),n(106),n(808),n(49),n(111)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v,g,m){function b(){var e=this;return{id:"newObject",args:{template:e.visualization,init:{qExtendsId:e.id}}}}function y(e){var t=p.getType(e);return t?t.getLibraryInfo().icon:"toolbar-help"}function x(e){var t=e.qData.visualization;return{id:e.qInfo.qId,name:e.qData.name,secondaryName:e.qData.labelExpression||"",tags:e.qData.tags,visualization:t,getDropOption:b,icon:y(t),type:"visualization",permissions:{update:e.permissions.update,remove:e.permissions.remove,publish:e.permissions.publish}}}function S(e){d.editMaster(e.id,e.visualization)}function w(e){h.remove(e.id)}function q(e,t){return o.hasLinks(e,t)}function C(e){t.publish("/ui/library/addToSheet",{item:e})}function _(e){q(e.id,h).then(function(t){var n="Object.Master.EditWarning.Text";t?o.editDialog(n,function(){S(e)}):S(e)})}function I(e){q(e.id,h).then(function(t){var n=t?"Object.Master.DeleteWarning.Text":"Object.Master.DeleteWarning.Unused.Text";o.removeDialog(n,function(){w(e)})})}function E(e){h.getList().then(function(t){t.getLayout().then(function(t){var n=t.map(function(e){return e.qData.name});h.get(e.id).then(function(t){var i=t.app;i.cloneObject(t.id).then(function(t){i.getObject(t).then(function(t){t.getProperties().then(function(i){var r=l.generateUniqueName(n,e.name);r=u.crop(r,c.name);i.qMetaDef.title=r;t.setProperties(i)})})})})})})}function D(e,t){for(var n=0;n<e.length;++n)e[n].disabled=e[n].id===t}return r.extend({init:function e(){this.list=[];this.id=i.sectionIDs.visualization;this.name="visualization";this.title="library.Visualizations";this._super.apply(this,arguments);this.initPreviewManager();this.allowDuplicate=o.permissionToCreate("visualization");this.$scope.stageState=f;this.$scope.$watch("stageState.selectedObject",function(e){e&&"gridCell"===e.type?D(this.list,e&&e.id):D(this.list,null)}.bind(this))},initLoadData:function e(){h.getList().then(function(e){this.$scope.listModel=e}.bind(this));v(this.$scope,"listModel",this.onLoadData.bind(this))},initPreviewManager:function e(){var i=this;function r(e){var n=e.item;var r=e.modelInfo;var s=a.getBasePreviewInfo(e);s.description=r.layout.descriptionExpression||r.properties.qMetaDef.description;s.labelExpression=r.layout.labelExpression;if(r.properties.labelExpression){var l=u.getValue(r.properties,"labelExpression.qStringExpression.qExpr","");l.length&&"="!==l[0]&&(l="="+l);s.labelExpressionDef=l}s.model=r.model;s.options={isReadonly:true,isPopover:true,navigation:false,selections:false};s.buttons=[a.buttonAddToSheet(C,e.closePreview,n,o.isAddToSheetMode())];i.allowDuplicate&&s.buttons.push(a.buttonDuplicate(E,e.closePreview,n));n.permissions.update&&s.buttons.push(a.buttonEdit(_,e.closePreview,n));n.permissions.remove&&s.buttons.push(a.buttonDelete(I,e.closePreview,n));m.getFlag("SINGLE_CONFIG")&&s.buttons.push(a.buttonEmbed(function(){t.publish("/embed-dialog/open",{type:"object",objectId:n.id})},e.closePreview,n));s.close=e.closePreview;a.alignPreview(s,e.$element);return g.show(s)}this.previewManager=a.previewManagerFactory({getSlowInfo:function e(t){return a.getItemInformation(h,t.id)},createPreview:r,itemDialogHandler:s,State:n})},onLoadData:function t(i){this.loading=false;n.view!==n.Views.masterObject&&e.$rootScope.$emit("clearUndo");i=i.filter(function(e){return!!e.qData.name});i=i.map(x);var r=f.selectedObject;r&&"gridCell"===r.type&&D(i,r&&r.id);this.list=o.localeOrderBy(i,function(e){return e.name});this.onFilter()},doFilter:function e(t){var n=this.assets.query;o.removeSelection(t);this.previewManager.close();return t.filter(function(e){return o.libraryMultiSearch(e,n,["name","secondaryName","tags"])})},openContextMenu:function n(i,r){var a=e.getService("qvContextMenu").menu();o.isAddToMode()&&a.addItem({translation:"contextMenu.addToSheet",tid:"add-to-sheet",select:function e(){C(i)}});i.permissions&&i.permissions.update&&a.addItem({translation:"Common.Edit",tid:"edit-master",select:function e(){_(i)}});this.allowDuplicate&&a.addItem({translation:"Common.Duplicate",tid:"duplicate-master",select:function e(){E(i)}});i.permissions&&i.permissions.remove&&a.addItem({translation:"Common.Delete",tid:"remove-master",select:function e(){I(i)}});m.getFlag("SINGLE_CONFIG")&&a.addItem({translation:"contextMenu.embed",tid:"120694",select:function e(){t.publish("/embed-dialog/open",{type:"object",objectId:i.id})}});s.openContextMenu(a,i,r)}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(809)],r=function(e,t){function n(n){var i={template:t,controller:["$scope",function(e){e.input=n;e.showLabelExpression=!!e.input.labelExpression;e.showLabelExpressionDef=!!e.input.labelExpressionDef}],dock:"right",alignTo:n.alignTo[0]};return e.getService("luiPopover").show(i)}return{show:n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover id="library-preview" class="object-preview" x-arrow="arrow">\n\n\t<lui-popover-body>\n\t\t<h2 class="title">\n\t\t\t<span qve-highlight text="{{input.name}}" query="input.query"></span>\n\t\t</h2>\n\n\t\t<p ng-if="showLabelExpression" class="label-expression" qve-highlight text="{{input.labelExpression}}" query="input.query"></p>\n\n\t\t<div class="object">\n\t\t\t<qv-object model="input.model" options="input.options"></qv-object>\n\t\t\t<qv-transparent-overlay></qv-transparent-overlay>\n\t\t</div>\n\n\t\t<p class="description">{{input.description}}</p>\n\n\t\t<div ng-if="input.tags.length">\n\t\t\t<h2 class="tags-title"><span q-translation="Common.Tags"></span></h2>\n\t\t\t<ul class="tags">\n\t\t\t\t<li ng-repeat="tag in input.tags" class="lui-tag" ng-class="{ \'lui-matched\': tag.matching }">{{tag.name}}</li>\n\t\t\t</ul>\n\t\t</div>\n\n\t\t<div ng-if="showLabelExpressionDef">\n\t\t\t<h2><span q-translation="library.preview.header.labelExpression"></span></h2>\n\t\t\t<p class="label-expression-def">{{input.labelExpressionDef}}</p>\n\t\t</div>\n\n\t</lui-popover-body>\n\n\t<lui-popover-footer>\n\t\t<button class="lui-fade-button" ng-repeat="button in input.buttons.slice().reverse()" q-title-translation="{{button.title}}"\n\t\t\t\tqva-activate="$event.preventDefault(); button.action($event)" ng-disabled="button.disabled" tid="{{button.tid}}">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--{{button.icon}}"></span>\n\t\t</button>\n\t</lui-popover-footer>\n</lui-popover>\n\n\n'},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(95),n(94),n(136),n(149),n(137),n(504),n(156),n(112),n(811),n(318),n(319),n(111)],r=function(e,t,n,i,r,o,a,s,l,c,u,d){function f(e){n.publish("/ui/library/addToSheet",{item:e});return e}function p(e){this.item=e;this.id=e.id;this.name=e.name;this.type="template";this.template="widget";this.init={templateId:this.id};this.icon=d.getIcon(e.meta.type)}p.prototype.getDropOption=function(){var e=this.init.templateId;var t=s.getDefinition(this.item);var n=l.mapProperties(t,{templateId:e},e);n.widgetMeta={libid:this.item.libid,name:this.item.name};var i={id:"newObject",args:{template:"widget",init:n}};return i};return r.extend({init:function t(){this.list=[];this.id="some_id";this.name="qwidget";this.title="Widgets";this.stageScope=e("div.qv-panel-stage").scope();this._super.apply(this,arguments);this.initPreviewManager();this.allowAdd=false;this.infoExpanded=false;this.hasMetaInfo=true},addId:"addWidget",addText:"Create Widget",addAction:function e(){this.stageScope.enableWidget=true;this.stageScope.enableSheet=false},initPreviewManager:function e(){function t(e){var t=e.item;var n={query:e.query,name:t.name,description:t.item.description||t.item.meta.description,imageUrl:t.previewIconURL,hasImage:!!t.previewIconURL,icon:d.getIcon(t.item.meta.type)};n.buttons=[o.buttonAddToSheet(f,e.closePreview,t,c.isAddToSheetMode())];n.close=e.closePreview;o.alignPreview(n,e.$element);return u.show(n)}this.previewManager=o.previewManagerFactory({createPreview:t,itemDialogHandler:a,State:i})},onLoadData:function e(t){this.loading=false;var n=[];t.forEach(function(e){n.push(new p(e))});this.list=c.localeOrderBy(n,function(e){return e.name});this.onFilter()},doFilter:function e(t){var n=this.assets.query;return t.filter(function(e){return c.librarySearchFn(e,n)})},openContextMenu:function e(n,i){if(c.isAddToMode()){var r=t.getService("qvContextMenu").menu();r.addItem({translation:"contextMenu.addToSheet",tid:"add-to-sheet",select:function e(){f(n)}});a.openContextMenu(r,n,i)}},addItemToSheetOrActiveObject:function e(t){c.itemDblClickHandler(t)}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(812)],r=function(e,t){function n(n){var i={template:t,controller:["$scope",function(e){e.input=n}],dock:"right",alignTo:n.alignTo[0]};return e.getService("luiPopover").show(i)}return{show:n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover id="library-preview" class="widget-preview" x-arrow="arrow">\n\n\t<lui-popover-body>\n\t\t<div ng-show="input.hasImage" class="template-image-container">\n\t\t\t<img ng-src="{{input.imageUrl}}">\n\t\t</div>\n\t\t<i ng-show="!input.hasImage" class="template-icon  lui-icon  lui-icon--{{input.icon}}"></i>\n\n\t\t<h2 class="title">\n\t\t\t<span qve-highlight text="{{input.name}}" query="input.query"></span>\n\t\t</h2>\n\n\t\t<p class="description">{{input.description}}</p>\n\t</lui-popover-body>\n\n\t<lui-popover-footer>\n\t\t<button class="lui-fade-button" ng-repeat="button in input.buttons.slice().reverse()" q-title-translation="{{button.title}}"\n\t\t\t\tqva-activate="$event.preventDefault(); button.action($event)" ng-disabled="{{button.disabled}}" tid="{{button.tid}}">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--{{button.icon}}"></span>\n\t\t</button>\n\t</lui-popover-footer>\n</lui-popover>\n\n'},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(814),n(96)],r=function(e,t,n){var i,r=500;function o(e){return e.is("input:not([type=radio]):not([type=checkbox]), textarea:not([readonly])")&&!e.closest(".CodeMirror").length||e.closest("[contenteditable=true]").length||e.closest(".CodeMirror").length}function a(e){return e.is(".ignore-context-menu")}function s(t,n,i,r,a){var s;i=e(i);if(n.ctrlKey&&n.shiftKey)return;if(o(i))return;if(i.is(".progress")||i.is("select")){n.preventDefault();return}n.originalType=n.type;delete n.type;s=e.Event(n,{type:t,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey});s.pageX=r;s.pageY=a;i.trigger(s);return false}function l(t){if(t.ctrlKey&&t.shiftKey)return;o(e(t.target))||t.preventDefault()}e(document.body).on("contextmenu",l);n(document.body).tap({options:{preventDefault:false,which:3},start:function e(t){n.utils.isMouse(t)&&(this._openContextMenu=true)},end:function e(t){if(this._openContextMenu){s("qv-contextmenu",t,t.target,t.pageX,t.pageY);this._openContextMenu=false}}});(n.utils.msPointer||n.utils.touch)&&n(document.body).longtap({options:{preventDefault:false,timeThreshold:r,interval:20},start:function t(r){if(n.utils.isMouse(r)||o(e(r.target))||a(e(r.target))){this.cancel();return}i=r.target},update:function e(n,r){if(100===r.percentage){t.show(r.pagePoints[0].x,r.pagePoints[0].y);s("qv-radial-contextmenu",n,i,r.pagePoints[0].x,r.pagePoints[0].y)}},cancel:function e(){t.hide()},end:function e(n,r){t.hide();s("qv-contextmenu",n,i,r.pagePoints[0].x,r.pagePoints[0].y);i=null}});e(document.body).on("MSHoldVisual",function(e){e.preventDefault()});e(document.body).on("MSGestureHold",function(e){e.preventDefault()})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(51),n(815)],r=function(e,t,n){var i=null;var r={scope:{position:"="},template:n,controller:["$scope","$element",function(e,t){var n=t.children();var i=n.outerWidth();n.css("top",e.position.y-i/2);n.css("left",e.position.x-i/2);n.addClass("transition")}]};var o={show:function n(a,s){o.hide();e.$apply(e.$rootScope,function(){i=t.show(r,{position:{x:a,y:s}})})},hide:function t(){e.$apply(e.$rootScope,function(){if(i){i.destroy();i=null}})}};return o}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div id="actionIndicator"></div>'},function(e,t,n){(function(e){(function(e,t,n){"$:nomunge";e.addOutsideEvent=i;function i(i,r){r=r||i+n;var o=[],a=i+"."+r+"-special-event";e.event.special[r]={setup:function(){-1===o.indexOf(this)&&o.push(this);1===o.length&&e(t).bind(a,s)},teardown:function(){var n=o.indexOf(this);-1!==n&&o.splice(n,1);0===o.length&&e(t).unbind(a)},add:function(e){var t=e.handler;e.handler=function(e,n){e.target=n;t.apply(this,arguments)}}};function s(t){var n=o.slice();n.forEach(function(n){var i=e(n);n===t.target||i.has(t.target).length||i.triggerHandler(r,[t.target])})}}})(e,document,"outside")}).call(this,n(11))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(54),n(91),n(94),n(49),n(126),n(136),n(112),n(149),n(137),n(217),n(219),n(192),n(818),n(133),n(819),n(106),n(111),n(351)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v,g){function m(e){var t=i.model;var n={insertBeforeItem:null,title:e.name,odagLinkRefID:e.id};h.addODAGNavPoint(t,n)}function b(t){var i="";if("unlimited"===t||""===t)i=n.get("ODAGLink.Dialog.RetentionTimeUnit.NeverExpires");else{var r={retentionTimeValue:"",retentionTimeUnit:""};var o=e.getService("odagLinkDialogService");r=o.getRetentionTimeDisplayValue(t);i="d"===r.retentionTimeUnit?"1"===r.retentionTimeValue?n.get("library.preview.odag.retentionTime.day",r.retentionTimeValue):n.get("library.preview.odag.retentionTime.days",r.retentionTimeValue):"h"===r.retentionTimeUnit?"1"===r.retentionTimeValue?n.get("library.preview.odag.retentionTime.hour",r.retentionTimeValue):n.get("library.preview.odag.retentionTime.hours",r.retentionTimeValue):t}return i}return a.extend({init:function e(t,n){this.app=n;this.list=[];this.id=o.sectionIDs.odag;this.name="odaglinks";this.title="ODAG.Toolbox.Title.ODAGToolbar";this._super.apply(this,arguments);this.initPreviewManager();this.allowAdd=s.permissionToCreate("odagLink");this.initLoadComplete=false},addId:"addODAGLink",addText:"ODAGLink.Toolbox.CreateButton",addAction:function e(){u.addODAGLink(this.app)},initLoadData:function e(){var t=this;f.getList(this.app).then(function(e){t.$scope.listModel=e});g(this.$scope,"listModel",this.loadODAGLinks.bind(this))},loadODAGLinks:function e(){var t=this;var n=function e(n){t.onLoadData(n);t.initLoadComplete=true};this.initLoadComplete?d.getList(this.app,true).then(function(e){t.onLoadData(e)}).catch(function(){this.loading=false}):this.$scope.listModel&&this.$scope.listModel.layout&&this.$scope.listModel.layout.qAppObjectList.qItems.length>0?d.getList(this.app,true).then(function(e){n(e)}).catch(function(){t.loading=false}):n([])},editCallback:function e(t){u.editODAGLink(this.app,t.id)},deleteCallback:function e(t){var n=this;var i="ODAGLink.Master.DeleteWarning.Text";s.removeDialog(i,function(){d.get(t.id).then(function(e){h.deleteODAGLink(n.app,t.id,e.properties)})})},initPreviewManager:function e(){var o=this;function a(e){var i=e.item;var a=e.modelInfo;var c="";c=""===a.properties.data.properties.targetSheet[0].sheetId||null===a.properties.data.properties.targetSheet[0].sheetId?n.get("ODAGLink.Dialog.DefaultView.AppOverview"):a.properties.data.properties.targetSheet[0].sheetName?a.properties.data.properties.targetSheet[0].sheetName:n.get("library.preview.odag.defaultView.UnableToAccess",a.properties.data.properties.targetSheet[0].sheetId);var u="";u=0===a.properties.data.properties.publishTo.length||""===a.properties.data.properties.publishTo[0].streamId||null===a.properties.data.properties.publishTo[0].streamId?n.get("ODAGLink.Dialog.DefaultPublishTo.MyWork"):a.properties.data.properties.publishTo[0].streamName?a.properties.data.properties.publishTo[0].streamName:n.get("library.preview.odag.publishTo.UnableToAccess",a.properties.data.properties.publishTo[0].streamId);var d=l.getBasePreviewInfo(e);d.templateApp=a.properties.data.templateApp;d.rowEstExpr=a.properties.data.rowEstExpr;d.rowEstCount=a.properties.data.properties.rowEstRange[0].highBound;d.genAppLimit=a.properties.data.properties.genAppLimit[0].limit;d.retentionTime=b(a.properties.data.properties.appRetentionTime[0].retentionTime);d.defaultView=c;d.publishTo=u;d.buttons=[l.buttonAddTo(m,e.closePreview,i,s.getAddToText(o.name),s.isAddToMode())];(r.getFlag("ODAG_SAAS_ENABLED")||t.contains(a.properties.data.privileges,"update")&&s.hasAppUpdatePermssion())&&d.buttons.push(l.buttonEdit(o.editCallback.bind(o),e.closePreview,i));(r.getFlag("ODAG_SAAS_ENABLED")||t.contains(a.properties.data.privileges,"delete")&&s.hasAppUpdatePermssion())&&d.buttons.push(l.buttonDelete(o.deleteCallback.bind(o),e.closePreview,i));d.close=e.closePreview;l.alignPreview(d,e.$element);return v.show(d)}this.previewManager=l.previewManagerFactory({getSlowInfo:function e(t){return l.getItemInformation(d,t.id)},createPreview:a,itemDialogHandler:c,State:i})},onLoadData:function t(n){this.loading=false;e.$rootScope.$emit("clearUndo");n=p.create(n);this.list=s.localeOrderBy(n,function(e){return e.name});this.onFilter()},doFilter:function e(t){var n=this.assets.query;s.removeSelection(t);this.previewManager&&this.previewManager.close();return t.filter(function(e){return s.libraryMultiSearch(e,n,["name","tags"])})},openContextMenu:function n(i,o){var a=this;var u=e.getService("qvContextMenu").menu();l.getItemInformation(d,i.id).then(function(e){var n=e.properties;s.isAddToMode()&&u.addItem({translation:s.getContextMenuAddToText(a.name),tid:"add-to-sheet",select:function e(){m(i)}});(r.getFlag("ODAG_SAAS_ENABLED")||t.contains(n.data.privileges,"update")&&s.hasAppUpdatePermssion())&&u.addItem({translation:"Common.Edit",tid:"edit-master",select:function e(){a.editCallback(i)}});(r.getFlag("ODAG_SAAS_ENABLED")||t.contains(n.data.privileges,"delete")&&s.hasAppUpdatePermssion())&&u.addItem({translation:"Common.Delete",tid:"remove-master",select:function e(){a.deleteCallback(i)}});c.openContextMenu(u,i,o)})},addItemToSheetOrActiveObject:function e(t){m(t)}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){var n={};n.dragDropType="odagLinkItem";n.name=e.data.name;n.type=e.type;n.id=e.data.id;n.getDropOption=t.bind(null,n);n.tags=e.data.tags;return n}function t(e){return{id:"newODAGNavPoint",args:{template:"odagLink",init:{linkRef:e}}}}var n={create:function t(n){return n.map(function(t){return e(t.properties)})}};return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(820),n(49)],r=function(e,t,n){function i(i){var r={template:t,controller:["$scope",function(e){e.input=i;e.isOdagSaas=n.getFlag("ODAG_SAAS_ENABLED")}],dock:"right",alignTo:i.alignTo[0]};return e.getService("luiPopover").show(r)}return{show:i}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover id="library-preview" class="odag-preview" x-arrow="arrow">\n\n\t<lui-popover-body>\n\t\t<h2 class="title">\n\t\t\t<span qve-highlight text="{{input.name}}" query="input.query"></span>\n\t\t</h2>\n\t\t<h2><span q-translation="library.preview.odag.row.templateapp"></span></h2>\n\t\t<p class="description">{{input.templateApp.name}}</p>\n\t\t<h2><span q-translation="library.preview.odag.row.expression"></span></h2>\n\t\t<p class="description">{{input.rowEstExpr}}</p>\n\t\t<h2><span q-translation="library.preview.odag.row.count"></span></h2>\n\t\t<p class="description">{{input.rowEstCount}}</p>\n\t\t<h2><span q-translation="library.preview.odag.maxGenAppsCount"></span></h2>\n\t\t<p class="description">{{input.genAppLimit}}</p>\n\t\t<h2><span q-translation="library.preview.odag.retentionTime"></span></h2>\n\t\t<p class="description">{{input.retentionTime}}</p>\n\t\t<h2 ng-if="!isOdagSaas"><span q-translation="library.preview.odag.defaultView"></span></h2>\n\t\t<p ng-if="!isOdagSaas" class="description">{{input.defaultView}}</p>\n\t\t<h2 ng-if="!isOdagSaas"><span q-translation="library.preview.odag.publishTo"></span></h2>\n\t\t<p ng-if="!isOdagSaas" class="description">{{input.publishTo}}</p>\t\t\n\t</lui-popover-body>\n\n\t<lui-popover-footer>\n\t\t<button class="lui-fade-button" ng-repeat="button in input.buttons.slice().reverse()" q-title-translation="{{button.title}}"\n\t\t\t\tqva-activate="$event.preventDefault(); button.action($event)" ng-disabled="button.disabled" tid="{{button.tid}}">\n\t\t\t<span class="lui-fade-button__icon  lui-icon  lui-icon--{{button.icon}}"></span>\n\t\t</button>\n\t</lui-popover-footer>\n</lui-popover>'},function(e,t,n){"use strict";var i,r;!(i=[n(91),n(48),n(136),n(93),n(112),n(137),n(106),n(822),n(269),n(134),n(357),n(358),n(111)],r=function(e,t,n,i,r,o,a,s){function l(t){var n={};n.permissions="$"===t?{update:false,remove:false}:{update:true,remove:true};n.name="$"===t?e.get("AlternateState.DefaultState"):t;n.type="state";n.id=t;n.allowDrag=false;n.getDropOption=function(){};return n}function c(e){return e.global.getConfiguration().then(function(t){if(t.qFeatures.qAutoSave)return e.doSave()})}function u(e){r.addItemToSheetOrVisualization(e)}return n.extend({init:function e(){this.list=[];this.prevList=[];this.id="AlternateStates";this.name="alternate states";this.title="Common.AlternateStates";this._super.apply(this,arguments);this.initPreviewManager();this.allowAdd=r.permissionToCreate("dimension");this.allowRemove=this.allowAdd},addId:"addState",addText:"AlternateState.Toolbox.CreateButton",addAction:function e(){var t=this;var n=function e(t){null!==t&&""!==t&&i.getApp().then(function(e){e.addAlternateState(t).then(function(){c(e)})})};var r=function e(n){if(!n||""===n)return false;if(!t.items)return true;return!t.items.some(function(e){return e.name===n})};var o={title:"AlternateState.Dialog.Add.Title",confirm:"Common.Create",name:"",checkNameCallback:r,callback:n};var a=s.show(o);a.closed.then(function(){a=null})},initLoadData:function e(){var t=this;i.getApp().then(function(e){t.$scope.listModel=e});a(this.$scope,"listModel",this.onLoadData.bind(this))},initPreviewManager:function e(){},openPreview:function e(){},onLoadData:function e(t){if(!this.prevList.length||this.prevList.length!==t.qStateNames.length||!this.prevList.every(function(e,n){return e===t.qStateNames[n]})){this.loading=false;var n=r.localeOrderBy(t.qStateNames||[],function(e){return e});this.list=["$"].concat(n).map(l);this.onFilter();this.prevList=t.qStateNames.concat()}},doFilter:function e(t){var n=this.assets.query;r.removeSelection(t);return t.filter(function(e){return r.libraryMultiSearch(e,n,["name"])})},openContextMenu:function e(n,a){var s=t.getService("qvContextMenu").menu();r.isAddToMode()&&s.addItem({translation:r.getContextMenuAddToText(),tid:"add-to-sheet",select:function e(){u(n)}});n.permissions&&n.permissions.remove&&this.allowRemove&&s.addItem({translation:"Common.Delete",tid:"remove-master",select:function e(){i.getApp().then(function(e){e.removeAlternateState(n.id).then(function(){c(e)})})}});o.openContextMenu(s,n,a)},addItemToSheetOrActiveObject:function e(t){u(t)},closePreview:function e(){}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(99),n(823),n(94),n(107),n(166)],r=function(e,t,n,i,r){var o;function a(e){return{name:e.alternateState.name}}var s={scope:{title:"=",confirmLabel:"=",alternateState:"="},template:n,controller:["$scope",function(e){e.stringLimits=r;e.isValid=true;e.cancel=function(){e.destroyComponent()};e.confirm=function(){var t=a(e);e.isValid=e.checkNameCallback(t.name);if(e.isValid){o.close();e.callback(t.name)}};i.StateChanged.bind(e.cancel);e.onKeyPress=function(t){e.isValid=true;var n=t.which;13===n&&e.confirm()};e.$watch("alternateState.name",function(){});e.$on("$destroy",function(){i.StateChanged.unbind(e.cancel)});e.autoFocus=t.treatAsDesktop()}]};function l(t){var n={title:t.title,confirmLabel:t.confirm,alternateState:{name:t.name},add:t.add,checkNameCallback:t.checkNameCallback,callback:t.callback};o=e.getService("luiDialog").show({template:s.template,controller:s.controller,input:n,closeOnOutside:false,showArrow:false});return o}return{show:l}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="lui-modal-background"></div>\n<div class="lui-dialog" name="alternateStatesDialog" id="alternate-states-dialog">\n\t<lui-tab-view>\n\t\t<div class="lui-dialog__header">\n\t\t\t<div class="lui-dialog__title" q-translation="{{input.title}}"></div>\n\t\t</div>\n\t\t<div class="lui-dialog__body">\n\t\t\t\x3c!-- Name --\x3e\n\t\t\t<div class="alternate-state-component">\n\t\t\t\t<label q-translation="AlternateState.NewStateName" class="qv-metadatalabel">State:</label>\n\t\t\t\t<input class="lui-input" qva-focus="autoFocus" ng-keypress="onKeyPress($event)" ng-model="alternateState.name" type="text" name="name" maxlength="{{stringLimits.name}}" ng-class="{ \'lui-invalid\': !isValid }" data-tid="name-input"/>\n\t\t\t</div>\n\t\t</div>\n\t</lui-tab-view>\n\t<div class="lui-dialog__footer">\n\t\t<button class="lui-button close-button" ng-click="cancel()" name="cancelButton" q-translation="Common.Cancel" data-tid="close-btn"></button>\n\t\t<button class="lui-button close-button" ng-click="$event.preventDefault(); confirm()" name="confirmButton" q-translation="{{confirmLabel}}" data-tid="create-btn"></button>\n\t</div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(210),n(359),n(505)],r=function(e,t){function n(e,t){t.widgets=t.widgets||[];Object.defineProperties(this,{id:{value:e},data:{value:t,writable:true}});t.type="widget-library"}function i(e){e=e||this;return t.saveLibrary(e)}n.prototype.save=i;n.save=i;n.getList=function(){return e.getList().then(function(e){var t=[];e.forEach(function(e){"widget-library"===e.data.type&&t.push(new n(e.id,e.data))});return t})};n.get=function(e){return t.getLibrary(e).then(function(t){return new n(e,t)})};return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){var t=false;if(e&&e.length>3){t="";e=e.replace("qw","");e=e[0].toLowerCase()+e.substr(1);for(var n in e){var i=e[n];if("string"===typeof i){i===i.toUpperCase()&&(i="-"+i.toLocaleLowerCase());t+=i}}}return t}function t(e,t){var n=false;if(e){n=e;t&&(n=e.toLowerCase());n=n[0].toUpperCase()+n.substr(1)}return n}return{directiveToFile:e,capitalizeString:t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(827),n(828)],r=function(e,t){var n={restrict:"E",replace:true,scope:{section:"="},template:t};e.directive("qvAssetsSection",function(){return n});return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="assets-section" tid={{section.id}}>\n\t<div ng-if="section.allowAdd" class="library-section-add-button-wrapper">\n\t\t<lui-button\n\t\t\tqva-activate="section.addAction()"\n\t\t\tid="{{section.addId}}"\n\t\t\tq-translation="{{section.addText}}">\n\t\t</lui-button>\n\t</div>\n\t<qv-assets-list\n\t\tquery="section.assets.query"\n\t\tsection="section">\n\t</qv-assets-list>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(829),n(112),n(127),n(54),n(11),n(206),n(179),n(270),n(96),n(161),n(111),n(263),n(830)],r=function(e,t,n,i,r,o,a,s,l,c,u){var d={restrict:"E",replace:true,scope:{query:"=",section:"="},template:t,link:function t(d,f){var p;var h=false;var v=f.find(".expanded-info-header");v&&v.on("transitionend",function(e){"max-height"===e.originalEvent.propertyName&&_(k,0)});function g(){if(p){clearTimeout(p);p=null}}function m(e){for(var t=0;t<d.section.items.length;t++)if(d.section.items[t].id===e.id)return t}d.getDisplayText=function(e){var t=e.isDerived&&""===d.query?e.qName:u.trimAutoCalendarName(e.name);return t};d.itemDblClick=function e(t,i){d.section.closePreview();t.selected&&n.toggleSelection(t,i);if(t.disabled)return;d.section.addItemToSheetOrActiveObject(t);g()};d.itemContextMenu=function e(t,n){if(t.disabled)return;d.section.openContextMenu(t,n)};d.isExpanded=function(e){return d.section.expanded&&d.section.expanded[e.id]};d.inMomentumScroll=function(e,t){var n=i.elementFromEventPosition(t);return e!==o(n).scope().item};function b(e,t){var n=m(e);h=false;if(e.derivedFields&&e.derivedFields.length>0){d.section.items.splice(n+1,e.derivedFields.length);t||E.setList(d.section.items,true)}d.section.expanded[e.id]=false}function y(e,t){var n=m(e);h=true;d.section.expanded[e.id]=true;if(e.derivedFields&&e.derivedFields.length>0){var i=[n+1,0].concat(e.derivedFields);Array.prototype.splice.apply(d.section.items,i);t||E.setList(d.section.items,true)}}d.itemClicked=function e(t,i){g();p=setTimeout(function(){if(c.utils.touch&&d.inMomentumScroll(t,i))return;if(t.disabled)return;t.derivedFields&&t.derivedFields.length>0&&(d.section.expanded[t.id]?b(t):y(t));if(!n.toggleSelection(t,i)){d.$apply();return}x(t,i)},200)};function x(e,t){var n=o(t.currentTarget);var i;i=I.virtualScrollEnabled&&I.alignBottomAbsolute?0===I.items.indexOf(e)?-1:0:d.itemOffLimitPx(n,f);function r(){d.section.openPreview(e,t);d.$apply()}function a(e){return e>0?1:e<0?-1:0}if(0===i)r();else if(I.virtualScrollEnabled){var s=I.getVirtualScrollAmount(0,a(i),1);A.scroll(0,s.deltaY);_(r)}else{D.one("scroll",function(){r()});D[0].scrollTop+=i}}d.itemOffLimitPx=function(e,t){var n=e.position();var i=n.top;if(i<0)return i;i=n.top+e.outerHeight()-t.height();if(i>0)return i;return 0};function S(){e.$apply(d,function(){h||d.section.closePreview();h=false;e.getService("qvContextMenu").close()})}var w=r.throttle(S,500);var q=45;var C={minRowHeight:q,maxRowHeight:q,blockSize:60,keepItemsCount:10};var _=e.getService("$timeout");var I=new a(_,C);d.scroll=I;var E=new l(I);var D=f.find(".scroll-area");var A=D.controller("qvScrollArea");var T=new s(D,D,".lui-list__item",".lui-list__item:first",".lui-list__item:last");var O=f.find(".qv-scroll-loader").controller("qvScrollLoader");I.initialize(T,E,A,O).then(function(){I.activate();I.updateViewport();d.$watch("section.items",function(e){if(!e)return;I.updateViewport();var t=false;if(d.section.expanded)for(var n=0;n<e.length;n++)if(d.section.expanded[e[n].id]&&(n===e.length-1||!e[n+1].isDerived)){y(e[n],true);t=true}E.setList(e,t)})});I.Scroll.bind(w);function k(e){if(e){d.section.allowAdd&&(e.height-=37);T.getBoundingBox=function(){return e};T.getScrollAreaBoundingBox=function(){return e};E.resize().then(function(){delete T.getBoundingBox;delete T.getScrollAreaBoundingBox})}else E.resize()}d.section.Resize.bind(k);d.$on("$destroy",function(){I.destroy();v&&v.off("transitionend");d.section.Resize.unbind(k);I.Scroll.unbind(w)})}};e.directive("qvAssetsList",function(){return d});return d}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="assets-list" ng-class="{ empty: !section.items.length }">\n\t\n\t<div class="expanded-info-header " ng-show="!section.loading && section.hasMetaInfo" ng-class="{\'expanded\': section.infoExpanded || section.shouldShowCloudExtensionsWarning}">\n\t\t<div class="expanded-info-collapsed-header">\n\t\t\t<div class="expanded-info-collapsed-title" ng-bind="section.infoTitle" title="{{section.infoTitle}}"></div>\n\t\t\t<span class="lui-icon lui-icon--more" ng-click="section.infoExpanded = !section.infoExpanded;" q-title-translation="Tooltip.AssetPanel.ExpandWidgetInformation"></span>\n\t\t</div>\n\t\t<div class="expanded-info">\n\t\t\t<div class="info-image"></div>\n\t\t\t<div class="expanded-info-content" ng-bind="section.description"></div>\n\t\t\t<div class="expanded-info-content" ng-if="section.shouldShowCloudExtensionsWarning">\n\t\t\t\t<div>\n\t\t\t\t\t<span class="extension-warning-icon lui-icon lui-icon--warning-triangle"></span>\n\t\t\t\t\t<div class="expanded-info-content extension-warning-text" ng-bind="section.cloudExtensionWarning"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\n\t<span class="assets-nohits" ng-show="!section.loading && !query && !section.items.length" q-translation="library.noitems"></span>\n\t<qv-assets-search-no-hits query="query" show="!section.loading && query && !section.items.length"></qv-assets-search-no-hits>\n\t\n\t<qv-scroll-area class="scroll-area" ng-show="!section.loading" ng-class="{ \'native-scroll-enabled\': !scroll.virtualScrollEnabled }" >\n\t\t<qv-scroll-load-button\n\t\t\t\tng-show="scroll.loadPrevious"\n\t\t\t\ton-load="scroll.gotoPreviousBlock()"\n\t\t\t\ttext="Object.Listbox.LoadPrevious" previous="true"></qv-scroll-load-button>\n\n\t\t<ul class="lui-list assets-n-minutes__list" ng-class="{ \'align-bottom\': scroll.alignBottomAbsolute }" >\n\n\t\t\t<li ng-repeat="item in scroll.items track by item.id"\n\t\t\t\tng-hide="item.hidden"\n\t\t\t\tclass="lui-list__item lui-list__action library-item qv-draggable"\n\t\t\t\tdata-id="{{item.id}}"\n\t\t\t\tng-click="itemClicked(item, $event)"\n\t\t\t\tqva-context-menu="itemContextMenu(item, $event)"\n\t\t\t\tng-dblclick="itemDblClick(item, $event)"\n\t\t\t\tng-class="{ \'lui-active\': item.selected, \'lui-disabled\': item.disabled, \'derived-field-item\' : item.isDerived && query === \'\' }"\n\t\t\t\ttitle="{{item.name}}">\n\t\t\t\t<div ng-if="item.icon" class="lui-icon lui-icon--{{item.icon}} lui-list__aside" q-title-translation="{{item.iconTooltip}}"></div>\n\t\t\t\t<div class="lui-list__text library-item-text">\n\t\t\t\t\t<div ng-if="item.isDateField" class="lui-icon lui-icon--calendar icon-align"></div>\n\t\t\t\t\t<div ng-if="item.isGeoField" class="lui-icon lui-icon--map icon-align"></div>\n\t\t\t\t\t<div class="titles">\n\t\t\t\t\t\t<span qve-highlight text="{{ getDisplayText(item) }}" query="query" class="title"></span>\n\t\t\t\t\t\t<span ng-if="item.secondaryName" qve-highlight text="{{item.secondaryName}}" query="query" class="title secondary-title">{{item.secondaryName}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div ng-if="item.match.tags" class="lui-icon lui-icon--tag lui-list__aside"></div>\n\t\t\t\t<div ng-if="item.derivedFields.length > 0" class="toggle-expand lui-icon lui-list__aside" ng-class="isExpanded(item) ? \'lui-icon--triangle-bottom\' : \'lui-icon--triangle-right\'"></div>\n\t\t\t\t<i class="lui-icon lui-list__aside lui-icon--draggable" q-title-translation="Common.Move"></i>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t<qv-scroll-load-button\n\t\t\t\tng-show="scroll.loadNext"\n\t\t\t\ton-load="scroll.gotoNextBlock()"\n\t\t\t\ttext="Object.Listbox.LoadMore"></qv-scroll-load-button>\n\t</qv-scroll-area>\n\t<qv-scroll-loader no-rain="true"></qv-scroll-loader>\n\n\t<div class="assets-loading" ng-show="section.loading"><span q-translation="Common.Loading"></span>\n\t\t<qv-spinner show="section.loading"></qv-spinner>\n\t</div>\n\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(831)],r=function(e,t){var n={restrict:"E",replace:true,scope:{query:"=",show:"="},template:t};e.directive("qvAssetsSearchNoHits",function(){return n});return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div ng-show="show" class="assets-nohits">\n\t<div class="query"><div>{{query}}</div></div>\n\t<span class="message" q-translation="Toolbox.Search.Nohits"></span>\n</div>\n'},,function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(834),n(99),n(112),n(92),n(144),n(89),n(97),n(148),n(124),n(96),n(142),n(49),n(157),n(95),n(93),n(108),n(155),n(176),n(835),n(837),n(175)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v,g,m,b){var y=".globalSelections",x=o.extend({init:function t(n,r){var o=this;var a=m.inClient();this.$scope=n;this.callbacks=[];this.ignoreUpdates=false;this.hasLoaded=false;n.dimensions=[];n.dimensionsFields=[];n.selectedFields=[];n.fields=[];n.dimAvailable=false;n.showFields=r.getShowFields(n.app);n.showFieldsCheckbox=true;n.filter="";n.autoFocus=i.treatAsDesktop();n.selectionToolbarOpen=false;n.showNoMatches=false;n.disableSelectionInsights=false;n.selInsightsEnabled=p.getFlag("SELECTION_INSIGHTS")&&a;function l(){var e=new s;c.isRunning().then(function(){e.resolve(true)},function(){e.resolve(false)});return e.promise}var c;if(a){c=new b;var u=localStorage.getItem("qv-global-selections-settings");g.getApp().then(function(e){l().then(function(t){h.load(e).then(function(){!h.isVariableDefined("DISABLE_SELECTION_INSIGHTS")&&t||(n.disableSelectionInsights=true);u&&!JSON.parse(u).open?n.showInsights=false:n.showInsights=true})})})}n.handleEscape=function(e){if(n.filter&&n.filter.length>0){n.filter="";e.stopImmediatePropagation();e.preventDefault()}else r.off()};function d(){localStorage.setItem("qv-global-selections-settings",JSON.stringify({open:n.showInsights}))}n.showInsightsPanel=function(){n.showInsights=true;d();v.publish("selection/insights/show")};var f=function e(){n.showInsights=false;d();localStorage.setItem("qv-global-selections-settings",JSON.stringify({open:n.showInsights}))};v.subscribe("selection/insights/close",f);n.$on("$destroy",function(){v.unsubscribe("selection/insights/close",f)});s.all({fields:this.getFields(),select:this.bindCurrentSelections(),dim:this.getLibraryDimensions(),reg:this.registerExtensions()}).then(function(){o.hasLoaded=true;n.showFieldsCheckbox=n.fields.length>0;n.dimAvailable=n.dimensions.length>0;if(!n.dimAvailable&&n.showFieldsCheckbox){n.showFields=true;r.setShowFields(n.showFields,n.app)}n.$watch("filter",function(){o.filterShown(o,o.$scope)});n.$watch("showFields",function(){r.setShowFields(n.showFields,n.app);o.filterShown(o,o.$scope)});e(".qv-gs-section .qv-gs-header")[1].style.display="none";e(".qv-gs-section .qv-gs-header")[1].offsetHeight;e(".qv-gs-section .qv-gs-header")[1].style.display="block"})},registerExtensions:function e(){var t=new s;u.load().then(function(){t.resolve()});return t.promise},getFields:function e(){var t=this.$scope;return t.app.getFieldList().then(function(e){t.fields=a.expand(e).map(function(e){return{title:e.qName,qField:e.qName,qTags:e.qTags}})})},_updateCurrentSelectionFields:function e(t){var n=this,i=this.$scope;i.selectedFields=t.qSelectionObject.qSelections.filter(function(e){return!e.qIsHidden}).sort(f.sortSelections).map(function(e){return{title:e.qReadableName||e.qField,qField:e.qField,enableBadge:true}});n.hasLoaded&&n.filterShown(n,i)},handleCurrentSelectionFields:function e(){var t=this;this.$scope.currentSelectionsModel.getLayout().then(function(e){t._updateCurrentSelectionFields(e)})},bindCurrentSelections:function e(){var t=this.$scope,n=this;return n.$scope.app.getCurrentSelectionObject().then(function(e){t.currentSelectionsModel=e;n.subscription=e.layoutSubscribe(function(e){if(t.app.isInModalSelection())return;n._updateCurrentSelectionFields(e)})})},getLibraryDimensions:function e(){var t=this.isCalculatedField,n=this.$scope;return n.app.getDimensionList().then(function(e){n.dimensions=e.filter(function(e){return e.qData.info.length>0&&!e.qData.info.some(t)&&"H"!==e.qData.grouping}).map(function(e){return{title:e.qData.labelExpression||e.qData.title,fieldName:e.qData.info[0].qName,qId:e.qInfo.qId}})})},isCalculatedField:function e(t){return"="===t.qName[0]},filterShown:function e(n,i){var o="",a=[];i.dimensionsFields=i.dimensions.filter(function(e){return!i.selectedFields.some(function(t){return e.fieldName===t.qField})});if(i.showFields){a=i.fields.filter(function(e){return!i.selectedFields.some(function(t){return t.qField===e.qField})});a=c.removeMeasureAndDetailsFields(a);i.dimensionsFields=i.dimensionsFields.concat(a.filter(function(e){return!i.dimensions.some(function(t){return e.qField===t.fieldName})}))}if(i.filter.length>0){o=i.filter.toLowerCase();a=i.dimensionsFields.filter(function(e){return-1!==e.title.toLowerCase().indexOf(o)});i.dimensionsFields=a}r.localeOrderBy(i.dimensionsFields,function(e){return e.title});i.showNoMatches=0===i.dimensionsFields.length&&!this.ignoreUpdates&&i.filter.length>0;t.$apply(i,function(){n.notifyCallbacks(n)})},addCallback:function e(t,n){this.callbacks.push({type:t,fn:n})},notifyCallbacks:function e(t){if(!t.hasLoaded)return;if(t.ignoreUpdates)return;t.callbacks.forEach(function(e){"fields"!==e.type&&"dimensions"!==e.type||e.fn()})},setIgnoreUpdates:function e(t){this.ignoreUpdates=t}});x.$inject=["$scope","qvGlobalSelectionsService"];t.directive("qvGlobalSelections",["$document","qvSelectionToolbarService","$timeout",function(t,i,r){return{restrict:"E",template:n,controller:x,require:["qvGlobalSelections"],scope:{app:"="},replace:true,link:function n(o,a,s,c){o.toolbar=!!t.find(".qui-toolbar,.qs-toolbar")[0];var u=c[0],h=function e(){u.ignoreUpdates=false},v=function e(){o.selectionToolbarOpen=false;r(function(){u.handleCurrentSelectionFields()})},g=function e(){o.selectionToolbarOpen=true};i.Closed.bind(v);i.Opened.bind(g);t.on("keyup"+y,function(e){27===e.which?u.ignoreUpdates=false:13===e.which&&(u.ignoreUpdates=false)});p.getFlag("ALT_STATE_ONE")&&f.getSelectionStates(o.app).then(function(e){e.splice("$",1);o.hasStatesOtherThanDefault=e.length>0});d(t[0].body).tap({id:y,options:{preventDefault:false},start:function t(n){var i=e(n.target).closest(".qv-gs-badge").length>0,r=e(n.target).closest(".qv-gs-listbox").length>0,o=e(n.target).closest(".qv-selection-toolbar").length>0;u.ignoreUpdates=r&&!i&&!o}});l.on("start",h);o.$on("$destroy",function(){u.callbacks=[];i.Closed.unbind(v);i.Opened.unbind(g);d(t[0].body).off("*",y);t.off(y);l.off("start",h);u.subscription&&u.subscription.dispose()});o.onEnter=function(e){e.stopPropagation();e.target.blur()}}}}]);return'<qv-global-selections app="app"></qv-global-selections>'}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-global-selections" ng-class="{\'toolbar\': toolbar, \'selection-toolbar-open\': selectionToolbarOpen, \'insights-active\': showInsights && selInsightsEnabled }">\n\t<div class="qv-gs-sections">\n\t<section class="qv-gs-section qv-gs-top" tid="globalSelections.topSection" ng-class="{\'qv-gs-section-margin\' : showInsights && !disableSelectionInsights}">\n\t\t<header class="qv-gs-header">\n\t\t\t<h2 ng-if="!hasStatesOtherThanDefault" q-translation="GlobalSelections.CurrentSelections"></h2>\n\t\t\t<h2 ng-if="hasStatesOtherThanDefault" q-translation="GlobalSelections.CurrentSelections.Default"></h2>\n\t\t\t<div class="show-insights-btn" ng-show="selInsightsEnabled && !showInsights && !disableSelectionInsights">\n\t\t\t\t<button tid="explore-selections-button" class="lui-button show-insights--button" ng-click="showInsightsPanel()">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--lightbulb"></span><span class="lui-button__text"  q-translation="ExploreSelections.ExploreSelectionsBtn"></span>\n\t\t\t\t</button></div>\n\t\t</header>\n\t\t<div class="qv-gs-no-selections" ng-if="selectedFields.length == 0">\n\t\t\t<div class="qv-gs-no-selections-content">\n\t\t\t\t<div class="qv-qs-no-selections-image"></div>\n\t\t\t\t<div class="qv-qs-no-selections-title" q-translation="GlobalSelections.NoSelections"></div>\n\t\t\t\t<div class="qv-qs-no-selections-body" q-translation="GlobalSelections.NoSelectionsBody"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div qv-global-select-section="{ itemSize: 220, itemSpacing: 20, type: \'fields\' }" all-items="selectedFields" app="app"></div>\n\t</section>\n\n\t<section class="qv-gs-section" tid="globalSelections.bottomSection" ng-class="{\'qv-gs-section-margin\' : showInsights && !disableSelectionInsights}">\n\t\t<header class="qv-gs-header">\n\t\t\t<h2 q-translation="GlobalSelections.AppDimensions"></h2>\n\t\t\t<lui-checkbox class="global-show-fields-checkbox" x-model="showFields" title="{{\'GlobalSelections.ShowFields\'|translate}}" tid="globalSelections.showFields">{{\'GlobalSelections.ShowFields\'|translate}}</lui-checkbox>\n\t\t\t<lui-search  class="qv-gs-searchfield" placeholder="{{showFields ? \'GlobalSelections.FilterDimensionsAndFields\' : \'GlobalSelections.FilterDimensions\'}}" query="filter" maxlength="255"\n\t\t\t\t\t\t\t tid="globalSelections.searchField" on-escape="handleEscape($event)" auto-focus="autoFocus" on-enter="onEnter($event)"></lui-search>\n\t\t</header>\n\n\t\t<div class="qv-gs-info" ng-if="!dimAvailable && !showFields">\n\t\t\t<h2 q-translation="GlobalSelections.DimensionsWarning"></h2>\n\t\t</div>\n\t\t<div class="qv-gs-info" ng-if="showNoMatches">\n\t\t\t<h2 q-translation="GlobalSelections.NoMatchesForSearch"></h2>\n\t\t</div>\n\t\t<div qv-global-select-section="{ itemSize: 220, itemSpacing: 20, type: \'dimensions\'}" all-items="dimensionsFields" filter="filter" app="app"></div>\n\n\t</section>\n\t</div>\n\n\t<div tid="selection-insights-container" class="qv-insights-container" ng-if="selInsightsEnabled && showInsights && !disableSelectionInsights">\n\t\t<qv-selection-insights show-fields="showFields"></qv-selection-insights>\n\t</div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(836),n(92),n(141),n(153),n(97),n(89),n(206),n(179),n(270),n(11),n(90),n(104),n(251),n(114),n(99),n(176),n(244)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v){function g(e,t){while(e.length>t)e.pop()}var m=c.extend({init:function e(){this.resetColumnIndex();this._super.apply(this,arguments)},resetColumnIndex:function e(){this.columnIndex=0},setList:function e(t){this.list=t;this.scrollApi.setTotalRows(this.list.length);this.setItems(this.columnIndex,this.scrollApi.settings.blockSize);this.scrollApi.updateLoadingButtons()},onInitialNativeScroll:function e(){return a.resolve()},onGotoNextBlock:function e(){var t=this._super.apply(this,arguments).then(function(){this.columnIndex=this.getFirstElementIndex()}.bind(this));return t},onGotoPreviousBlock:function e(){var t=this._super.apply(this,arguments).then(function(){this.columnIndex=this.getFirstElementIndex()}.bind(this));return t}}),b=l.extend({resetNativeScroll:function e(){this.$scrollArea.scrollLeft(0)},alignToFirstRow:function e(){var t=this.getFirstRow(),n=t.children(".qv-object-wrapper").attr("id"),i=260;return function(){var e=u(this.$scrollArea.find("#"+n)),t;if(e.length>0){t=e.offset().left-i;this.$scrollArea.scrollLeft(t)}}.bind(this)},alignToLastRow:function e(){var t=this.getLastRow(),n=t.children(".qv-object-wrapper").attr("id"),i=250;return function(){var e=u(this.$scrollArea.find("#"+n)),t;if(e.length>0){this.$scrollArea.scrollLeft(0);t=e.parent().position().left-this.getScrollAreaBoundingBox().width+e[0].getBoundingClientRect().width+i;this.$scrollArea.scrollLeft(t)}}.bind(this)},getBoundingBox:function e(){var t=this._super.apply(this,arguments);return new f(t.top,t.left,t.height,t.width)}}),y=n.extend({size:{width:0,height:0},itemSize:0,itemSpacing:0,$element:void 0,init:function e(t,n,i){this.$scope=t;this.$timeout=n;this.selectionToolbarService=i;this.$scope.items=[];this.$scope.options={direction:h.direction}},initialize:function e(t,n,i){this.setSize(n);this.setItemSize(i.itemSize);this.setItemSpacing(i.itemSpacing);this.setElement(t.find(".qv-gs-scroll-area"));this.setItems();this.initialized=true},updateVisible:function e(){var t=this.offsetX-(this.$scope.scrollApi.loadPrevious?1:0),n=this.visibleItemsCount;this.$scope.items.forEach(function(e,i){var r=i>=t&&i<t+n;!e.visible&&r&&(e.options={isPopOver:false,highlightTitle:true,direction:h.direction});r&&!e.model&&this.getModel(e).then(function(e,t){e.model=t}.bind(null,e));e.visible=r},this)},getModel:function e(t){var n=this.getInitProps(t.title),r;t.qField?r=i.createTransientField(this.$scope.app,t.qField,n):t.qId&&(r=i.createTransientDimension(this.$scope.app,t.qId,n));return r},onScroll:function e(){this.qvGlobalSelectionsCtrl.setIgnoreUpdates(false);this.selectionToolbarService.confirm();this.updateHighlights();this.$timeout.cancel(this.scrollTimeout);this.scrollTimeout=this.$timeout(function(){this.updateVisible();this.updateHighlights()}.bind(this),100)},onResize:function e(t){this.setSize(t);this.updateVisible()},updateHighlights:function e(){this.$scope.items.forEach(function(e){e.options.highlightQuery=this.$scope.filter},this)},setItems:function e(){var t,n,i,r=this.$scope,o=this.totalItemsCount;r.items.length!==o&&g(r.items,o);for(t=0;t<o;t++){n=r.items[t]||{};i=r.scrollApi.items[t];i.enableBadge&&(n.enableBadge=i.enableBadge);n.model||(n.options={isPopOver:false,highlightTitle:true,direction:h.direction});if(i.qField){delete n.qId;if(!n.model||n.qField!==i.qField){if(n.visible){r.items[t]=d.extend(true,{},n);n=r.items[t];delete n.$$hashKey;delete n.options.search}n.title=i.title;n.qField=i.qField;n.id=p.sha256(n.qField);delete n.model}}else if(i.qId){delete n.qField;if(!n.model||n.qId!==i.qId){if(n.visible){r.items[t]=d.extend(true,{},n);n=r.items[t];delete n.$$hashKey;delete n.options.search}n.title=i.title;n.qId=i.qId;n.id=p.sha256(n.qId);delete n.model}}r.items[t]||(r.items[t]=n)}this.updateVisible()},getInitProps:function e(t){var n={title:t,qListObjectDef:{qDef:{}}};r.autoSortDimension(n.qListObjectDef);return n},getWidthOf:function e(t){return this.totalItemSize*t-this.itemSpacing},setItemSize:function e(t){this.itemSize=t||220},setItemSpacing:function e(t){this.itemSpacing=t||20},setSize:function e(t){this.size=t},setElement:function e(t){this.$element=t;this.$element.on("scroll",this.onScroll.bind(this))}});Object.defineProperties(y.prototype,{vPosX:{get:function e(){return this.$element.scrollLeft()}},totalItemSize:{get:function e(){return this.itemSize+this.itemSpacing}},visibleItemsCount:{get:function e(){var t=Math.ceil(((this.vPosX+(this.previousBtnVisible?240:0))%this.totalItemSize+this.size.width)/this.totalItemSize);return Math.min(t,this.totalItemsCount+(this.previousBtnVisible?1:0))}},totalItemsCount:{get:function e(){return(this.$scope.scrollApi.items||[]).length}},offsetX:{get:function e(){return Math.floor(this.vPosX/this.totalItemSize)}},previousBtnVisible:{get:function e(){return!!this.$scope.scrollApi.loadPrevious}}});y.$inject=["$scope","$timeout","qvSelectionToolbarService"];e.directive("qvGlobalSelectSection",["$parse","$timeout",function(e,n){return{controller:y,require:["qvGlobalSelectSection","^qvGlobalSelections"],template:t,replace:true,scope:{allItems:"=",filter:"=",app:"="},link:function t(i,r,a,l){var c=l[0],u=l[1],d=e(a.qvGlobalSelectSection)(),f={},p=r.find(".qv-gs-scroll-area"),h=p.controller("qvScrollArea"),g=r.find(".qv-scroll-loader").controller("qvScrollLoader"),y={blockSize:24,minRowHeight:240,maxRowHeight:240,keepItemsCount:4,virtualScrollEnabled:false},x=new s(n,y),S=new m(x),w=new b(r,p,".qv-gs-listbox",".qv-gs-listbox:first",".qv-gs-listbox:last"),q=null,C=function e(){f.width=r.innerWidth();f.height=r.innerHeight();c.onResize(f)};i.scrollApi=x;c.qvGlobalSelectionsCtrl=u;x.initialize(w,S,h,g).then(function(){x.activate();x.updateViewport();i.$watch("filter",function(){S.resetColumnIndex();x.resetNativeScroll()});i.$watch("allItems",function(e){if(!e)return;S.setList(e);q&&q();q=i.$watch("scrollApi.items",function(){var t=!v.treatAsDesktop();if(u.ignoreUpdates&&!t)return;if(0===x.items.length&&i.allItems.length>0){x.resetNativeScroll();S.resetColumnIndex();S.setList(e)}c.initialized&&c.setItems()})})}).catch(function(e){false});n(function(){f.width=r.innerWidth();f.height=r.innerHeight();c.initialize(r,f,d)});o.on("end",C);i.$on("$destroy",function(){o.off("end",C);x.destroy()});u.addCallback(d.type,function(){c.$timeout(function(){c.setItems();c.$timeout(function(){c.updateHighlights()})})})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-gs-scroll-container">\n\t<qv-scroll-area class="qv-gs-scroll-area">\n\t\t<div ng-if="scrollApi.loadPrevious" class="qv-gs-scroll-btn qv-gs-scroll-btn-previous" tid="globalSelections.loadPrevious">\n\t\t\t<qv-scroll-load-button tag="div" class="qv-listbox-load-buttons" on-load="scrollApi.gotoPreviousBlock()" text="Object.Listbox.LoadPrevious" previous="true"></qv-scroll-load-button>\n\t\t</div>\n\t\t<div ng-repeat="item in items" class="qv-gs-listbox">\n\t\t\t<qv-object ng-if="item.visible" model="item.model" options="item.options" object="item.object" class="qv-object-listbox" id="{{item.id}}"></qv-object>\n\t\t\t<div ng-if="!item.visible" class="qv-object qv-object-listbox qv-gs-placeholder" id="{{item.id}}">\n\t\t\t\t<h1 class="qv-object-title" qva-direction x-dir-text="{{item.title}}">\n\t\t\t\t\t<span class="qv-object-title-text" qva-direction x-dir-text="{{item.title}}">{{item.title}}</span>\n\t\t\t\t</h1>\n\t\t\t\t<div class="progress">\n\t\t\t\t\t<qv-rain></qv-rain>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<p ng-if="item.qField" q-title-translation="Common.Field" tid="globalSelections.fieldIndicator" class="qv-gs-field-indicator" qva-direction>\n\t\t\t\t<span class="lui-icon  lui-icon--field"></span>\n\t\t\t</p>\n\t\t\t<qv-gs-badge></qv-gs-badge>\n\t\t</div>\n\t\t<div ng-if="scrollApi.loadNext" class="qv-gs-scroll-btn" tid="globalSelections.loadNext">\n\t\t\t<qv-scroll-load-button tag="div" class="qv-listbox-load-buttons" on-load="scrollApi.gotoNextBlock()" text="Object.Listbox.LoadMore"></qv-scroll-load-button>\n\t\t</div>\n\t</qv-scroll-area>\n\t<qv-scroll-loader tag="li" class="qv-scroll-row-loader"></qv-scroll-loader>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(838),n(288)],r=function(e,t,n){function i(t,n){var i=n[2];e.$apply(e.$rootScope,function(){t.item.showBadge=(void 0===n[0]||false===n[0])&&false===n[1]&&!i})}e.directive("qvGsBadge",function(){return{restrict:"E",template:t,replace:true,link:function e(t){if(t.item.enableBadge){t.item.object||(t.item.object={});t.$watchCollection("[item.model.layout.qListObject.qDimensionInfo.qLocked, item.object.selectionsApi.active, item.object.model.layout.qListObject.qDimensionInfo.qIsOneAndOnlyOne]",function(e){i(t,e)});t.badgeClick=function(e){var t=new n(e.model);return t.beginSelections().then(function(){return t.clearSelections().then(function(){return t.endSelections(true)})})}}}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-gs-badge" ng-if="item.showBadge" q-title-translation="Tooltip.clearSelection" tid="globalSelections.badge" ng-click="badgeClick(item)">\n\t<span class="lui-icon lui-icon--remove"></span>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(840),n(132),n(134),n(154),n(112),n(89),n(93),n(106),n(141),n(148),n(184),n(142),n(95),n(105),n(49),n(175),n(841),n(843),n(271),n(240),n(289)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v){function g(t,n){var i="",r=[];t.selectables=n.dimensions.filter(function(e){return!t.selectedFields.some(function(t){return e.qField===t.qField})});if(true===t.filter.showFields){r=n.fields.filter(function(e){return!t.selectedFields.some(function(t){return t.qField===e.qField})});r=u.removeMeasureAndDetailsFields(r);t.selectables=t.selectables.concat(r.filter(function(e){return!n.dimensions.some(function(t){return e.qField===t.qField})}))}if(t.filter.filter.length>0){i=t.filter.filter.toLowerCase();r=t.selectables.filter(function(e){return-1!==e.title.toLowerCase().indexOf(i)});t.selectables=r}o.localeOrderBy(t.selectables,function(e){return e.title});e.$apply(t)}function m(e){return e.every(function(e){return e.qLocked})}function b(t,i){var r=new a,o=e.getService("qvCurrentSelectionsService");n.get().then(function(e){t.currentSelectionsModel=e;l(t,"currentSelectionsModel",function(e){t.disable={clear:0===e.qSelectionObject.qSelections.length||m(e.qSelectionObject.qSelections),back:0===e.qSelectionObject.qBackCount,forward:0===e.qSelectionObject.qForwardCount};t.selectedFields=e.qSelectionObject.qSelections.filter(function(e){return!e.qIsHidden}).sort(f.sortSelections);t.selectedFields.forEach(function(e){e.translation=o.translate(e)});i.hasLoaded&&g(t,i)});r.resolve()});return r.promise}function y(e){var t=function e(t){return"="===t.qName[0]},n=new a;i.getList().then(function(i){i.getLayout().then(function(i){e.dimensions=i.filter(function(e){return e.qData.info.length>0&&!e.qData.info.some(t)&&"H"!==e.qData.grouping}).map(function(e){return{title:e.qData.title,qField:e.qData.info[0].qName,qId:e.qInfo.qId}});n.resolve()})});return n.promise}function x(e){var t=new a;r.getList().then(function(e){return e.getLayout()}).then(function(n){e.fields=n.map(function(e){return{title:e.qName,qField:e.qName,qTags:e.qTags,isField:true}});t.resolve()});return t.promise}var S=["$scope","qvGlobalSelectionsService",function(t,n){var i={hasLoaded:false,dimensions:[],fields:[]};t.filter={};s.getApp().then(function(r){t.app=r;t.selectedFields=[];t.filter.filter="";t.filter.showFields=n.getShowFields(r);t.filter.onEnter=function(e){e.stopPropagation();e.target.blur()};t.selectables=[];t.enableMenu=true;t.disable={clear:false,back:false,forward:false};e.getService("qvChartTooltipService").close();a.all({selectionsDfd:b(t,i),dimensionsDfd:y(i),fieldsDfd:x(i)}).then(function(){i.hasLoaded=true;t.enableMenu=i.fields.length>0;if(i.dimensions.length<=0&&t.enableMenu){t.filter.showFields=true;n.setShowFields(t.filter.showFields,r)}t.$watch("filter",function(){g(t,i)},true)})})}];e.directive("qvMobileSelections",["qvGlobalSelectionsService","qvListboxPopoverServiceMobile",function(e,n){return{restrict:"E",template:t,controller:S,replace:true,require:["qvMobileSelections"],scope:{},link:function t(i,r){var o,l=function e(){r.find(".qv-ms-scroll-area").animate({scrollTop:0})},u=d.createGroup("mobile-selections",0);u.registerKeys("enter",function(){});u.on();document.activeElement&&document.activeElement.blur();v.getFlag("ALT_STATE_ONE")&&s.getApp().then(function(e){f.getSelectionStates(e).then(function(e){e.splice("$",1);i.hasStatesOtherThanDefault=e.length>0})});i.close=function(t){t.preventDefault();e.toggleGlobalSelection(i.app);p.publish(h.Events.PubSub.RestoreSearchState)};i.selectionsBack=function(){i.disable.back||i.currentSelectionsModel.back()};i.selectionsForward=function(){i.disable.forward||i.currentSelectionsModel.forward()};i.selectionsClear=function(){i.disable.clear||i.currentSelectionsModel.clearAll()};i.toggleTooltip=i.filter.showFields?"GlobalSelections.HideFields":"GlobalSelections.ShowFields";i.toggleMenu=function(){i.filter.showFields=!i.filter.showFields;i.toggleTooltip=i.filter.showFields?"GlobalSelections.HideFields":"GlobalSelections.ShowFields";s.getApp().then(function(t){e.setShowFields(i.filter.showFields,t)})};i.$on("showListbox",function(e,t){var u={title:t.qReadableName||t.title,qListObjectDef:{qDef:{}}},d=-1!==i.selectedFields.indexOf(t),f=function e(){i.currentSelectionsModel.getLayout().then(function(e){var n;if(!d){n=e.qSelectionObject.qSelections.some(function(e){return t.qField===e.qField});if(n){o.resolve();return}}o.reject()})},p=function e(t){o&&o.reject();o=new a;o.promise.then(l);r.children(".qv-ms-searchbox").find("input").blur();n.show(t,{showLock:true},f)};s.getApp().then(function(e){t.qField?c.createTransientField(e,t.qField,u).then(p):c.createTransientDimension(e,t.qId,u).then(p)})});i.$on("$destroy",function(){o&&o.reject();u.delete()})}}}]);return"<qv-mobile-selections></qv-mobile-selections>"}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-mobile-selections" tid="{{\'mobileSelections.showFields.\' + filter.showFields}}">\n\t<div class="qv-ms-toolbar">\n\t\t<p ng-click="selectionsBack()" ng-class="{\'qv-ms-button-disabled\' : disable.back, \'qv-ms-button-enabled\': !disable.back}" class="lui-icon lui-icon--selections-back qv-ms-toolbar-buttons" tid="mobileSelections.back" q-title-translation="Tooltip.NavigateBack"></p>\n\t\t<p ng-click="selectionsForward()" ng-class="{\'qv-ms-button-disabled\' : disable.forward, \'qv-ms-button-enabled\': !disable.forward}" class="qv-ms-toolbar-buttons lui-icon lui-icon--selections-forward" tid="mobileSelections.forward" q-title-translation="Tooltip.NavigateForward"></p>\n\t\t<p ng-click="selectionsClear()" ng-class="{\'qv-ms-button-disabled\' : disable.clear, \'qv-ms-button-enabled\': !disable.clear}" class="qv-ms-toolbar-buttons lui-icon lui-icon--clear-selections" tid="mobileSelections.clear" q-title-translation="Tooltip.ClearSelections"></p>\n\t\t<p ng-click="toggleMenu()" ng-class="{\'qv-ms-button-disabled\' : !enableMenu, \'qv-ms-button-enabled\': enableMenu, \'qv-ms-button-menu-active\': filter.showFields }" class="qv-ms-toolbar-buttons lui-icon\tlui-icon--settings" id="mobileSelectionsToggle" tid="mobileSelections.toggleFields" q-title-translation="{{toggleTooltip}}"></p>\n\n\t\t<qui-toolbarbutton ng-click="close($event)" name="close" class="qv-ms-toolbar-close" tid="mobileSelections.close">\n\t\t\t<span q-translation="Common.Close" class="qv-ms-toolbar-close-text"></span>\n\t\t</qui-toolbarbutton>\n\t</div>\n\t<header class="qv-ms-header">\n\t\t<h2 ng-if="!hasStatesOtherThanDefault" q-translation="GlobalSelections.CurrentSelections"></h2>\n\t\t<h2 ng-if="hasStatesOtherThanDefault" q-translation="GlobalSelections.CurrentSelections.Default"></h2>\n\t</header>\n\t<lui-search x-variant="inverse" class="qv-ms-searchbox" placeholder="{{filter.showFields ? \'GlobalSelections.FilterDimensionsAndFields\' : \'GlobalSelections.FilterDimensions\'}}" query="filter.filter" maxlength="255"\n\t\ton-enter="filter.onEnter($event)" tid="mobileSelections.searchfield">\n\t</lui-search>\n\t<div class="qv-ms-scroll-area">\n\t\t<qv-ms-selected ng-repeat="item in selectedFields"></qv-ms-selected>\n\t\t<div class="qv-ms-selectable" ng-if="filter.filter.length && (!selectables || selectables.length === 0)">\n\t\t\t<span q-translation="GlobalSelections.NoMatchesForSearch"></span>\n\t\t</div>\n\t\t<qv-ms-selectable ng-repeat="item in selectables"></qv-ms-selectable>\n\t</div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(842)],r=function(e,t){e.directive("qvMsSelectable",["$timeout",function(e){return{restrict:"E",replace:true,template:t,link:function t(n){n.showSelectable=function(){n.item.flash=true;e(function(){n.$emit("showListbox",n.item);n.item.flash=false},20)}}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div ng-click="showSelectable()" ng-class="{\'qv-ms-touch-flash\' : item.flash}" class="qv-ms-selectable" tid="mobileSelections.selectable">\n\t<span ng-if="item.isField" class="lui-icon  lui-icon--field"></span>\n\t<div class="qv-ms-highlight">\n\t\t<span qve-highlight text="{{item.title}}" query="filter.filter"></span>\n\t</div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(844)],r=function(e,t){e.directive("qvMsSelected",function(){return{restrict:"E",replace:true,template:t,link:function e(t){t.showSelected=function(){t.$emit("showListbox",t.item)};t.clear=function(e){t.currentSelectionsModel.clearField(e)}}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-ms-selected" tid="mobileSelections.selected">\n\t<div class="qv-ms-selected-icon">\n\t\t<a ng-show="!item.qLocked && !item.qOneAndOnlyOne" ng-click="clear(item.qField)">\n\t\t\t<i class="lui-icon  lui-icon--remove"></i>\n\t\t</a>\n\t\t<a ng-show="item.qLocked" ng-click="showSelected(item.qField)">\n\t\t\t<i class="lui-icon lui-icon--lock"></i>\n\t\t</a>\n\t</div>\n\t<div ng-click="showSelected(item.qField)" class="qv-ms-selected-info" ng-class="{ \'no-icon\': item.qOneAndOnlyOne }">\n\t\t<h1 class="qv-object-title">{{item.qReadableName || item.qField}}</h1>\n\t\t<span>{{item.translation}}</span>\n\t\t<qv-state-count-bar state-counts="item.qStateCounts"></qv-state-count-bar>\n\t</div>\n</div>\n'},function(e,t){e.exports='<lui-popover style="min-width: 200px;width: 230px;" align-to="alignTo" position="position" collision="\'flipfit\'" on-close-view="closeAddPopover(event)" qva-outside-ignore-for="{{qvaOutsideIgnoreFor}}">\n\t<object-add-typeahead>\n\t\t<lui-popover-header>\n\t\t\t<div class="lui-input-group">\n\t\t\t\t<input class="lui-input  lui-input-group__item  lui-input-group__input" type="text" name="new-dimension" autocomplete="off" ng-model="search.term" tid="add-dimension-input" qva-focus="autoFocus"\n\t\t\t\t\t   object-add-typeahead-input on-escape="onEscape($event)" on-enter="onEnter($event)" maxlength="255"/>\n\t\t\t\t<button ng-if="allowExpressionEditor !== false" class="lui-button  lui-input-group__item  lui-input-group__button" qva-activate="close()"\n\t\t\t\t\t\tpp-expression-editor="search.term" pp-expression-editor-on-apply="addFieldDimension({value:value})" expression-type="dimension"\n\t\t\t\t\t\tq-title-translation="Tooltip.OpenExpressionEditor" tid="fx-button">\n\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--expression  edit-expression"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</lui-popover-header>\n\t\t<div class="object-add-popover-content" object-add-typeahead-menu>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="dimension in activeDimensions" tid="dimension-item"\n\t\t\t\t\tobject-add-typeahead-item="dimension" on-select="addActiveDimension(dimension)">\n\t\t\t\t\t<span qve-highlight text="{{dimension.translatedTitle}}" title="{{dimension.translatedTitle}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="object-add-popover-list-header" ng-if="dimensions.length" q-translation="Common.Dimensions"></div>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="dimension in dimensions" tid="dimension-item"\n\t\t\t\t\tobject-add-typeahead-item="dimension" on-select="addLibraryDimension(dimension)">\n\t\t\t\t\t<span ng-if="dimension.isDrillDown" class="lui-icon lui-icon--drill-down lui-list__aside" q-title-translation="Tooltip.dimensions.drilldown"></span>\n\t\t\t\t\t<span qve-highlight text="{{dimension.label}}" title="{{dimension.label}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="object-add-popover-list-header" ng-if="fields.length" q-translation="Common.Fields"></div>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="field in fields" tid="field-item"\n\t\t\t\t\tobject-add-typeahead-item="field" on-select="addFieldDimension(field)"\n\t\t\t\t\tng-class="{\'derived-field\': (field.isDerived && search.term === \'\')}">\n\t\t\t\t\t<i ng-if="isDirectDiscoveryField( field )" class="lui-icon  lui-icon--direct-discovery  lui-list__aside" q-title-translation="{{ getDirectDiscoveryTypeTranslationKey( field.qTags ) }}"></i>\n\t\t\t\t\t<span ng-if="field.isDateField" class="lui-icon lui-list__aside  lui-icon--calendar"></span>\n\t\t\t\t\t<span ng-if="field.isGeoField" class="lui-icon lui-list__aside  lui-icon--map"></span>\n\t\t\t\t\t<span qve-highlight text="{{getFieldDisplayName(field)}}" title="{{field.toolTip}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="object-add-popover-nohits" ng-if="!dimensions.length && !fields.length" q-translation="Toolbox.Search.Nohits"></div>\n\t\t</div>\n\t</object-add-typeahead>\n</lui-popover>\n'},function(e,t){e.exports='<lui-popover style="width: 200px" on-close-view="onClose(event)">\n\t<div class="object-error-popup">\n\t\t\x3c!--<div class="object-error-title" q-translation="{{error.title}}"></div>--\x3e\n\t\t<div class="object-error-message">{{error.message}}</div>\n\t</div>\n</lui-popover>'},function(e,t){e.exports='<div class="object-error hard-error" tid="object.Error">\n\t<div class="object-error-content">\n\t\t<div class="object-error-title">\n\t\t\t<span>{{error.title}}</span>\n\t\t\t<i class="object-error-more lui-icon lui-icon--info lui-icon--large" ng-click="showMore($event)"></i>\n\t\t</div>\n\t\t<div ng-if="error.message" class="object-error-message">{{error.message}}</div>\n\t\t<button ng-if="showButton" class="lui-button object-error-remove" ng-click="remove($event)" q-translation="Common.Delete"></button>\n\t</div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(94),n(122),n(362)],r=function(e,t,n){var i;function r(){i||(i=e.getService("$navigationService"));return i}function o(){return r().Sheets.all.mashed}function a(){return r().Stories.all.mashed}function s(e){var n=t.model.id;var i=-1;e.forEach(function(e,t){e.qInfo.qId===n&&(i=t)});return i}function l(e,t){var n;t.forEach(function(t){t.qInfo.qId===e&&(n=t)});return n}function c(e,t){var n;t.forEach(function(t){t.qInfo.qId===e&&(n=t)});return n}function u(e){n.goToSheet(e,Object.keys(t.States)[t.state]);return{success:true,sheetId:e}}function d(e){n.goToStory(e,Object.keys(t.States)[t.States.play]);return{success:true,storyId:e}}function f(e,t,n){this.inClient=e;Object.defineProperties(this,{ANALYSIS:{get:function e(){return"analysis"}},EDIT:{get:function e(){return"edit"}},SNAPSHOT:{get:function e(){return"snapshot"}},sheets:{get:function n(){return e?o(this):t||[]}},stories:{get:function t(){return e?a(this):n||[]}}})}f.prototype.gotoSheet=function(e){var t=l(e,this.sheets);if(t)return u(e);return{success:false,error:"NOSUCHSHEET",errorMsg:"No such sheet"}};f.prototype.nextSheet=function(){if((t.view===t.Views.sheet||t.view===t.Views.object)&&t.model){var e=s(this.sheets)+1;var n=this.sheets[e===this.sheets.length?0:e].qInfo.qId;return u(n)}return{success:false,error:"NOCURRENTSHEET",errorMsg:"No current sheet"}};f.prototype.prevSheet=function(){if((t.view===t.Views.sheet||t.view===t.Views.object)&&t.model){var e=s(this.sheets)-1;var n=this.sheets[e<0?this.sheets.length-1:e].qInfo.qId;return u(n)}return{success:false,error:"NOCURRENTSHEET",errorMsg:"No current sheet"}};f.prototype.getCurrentSheetId=function(){if(t.view===t.Views.sheet&&t.model)return{success:true,sheetId:t.model.id};return{success:false,error:"NOCURRENTSHEET",errorMsg:"No current sheet"}};f.prototype.getMode=function(){return Object.keys(t.States)[t.state]};f.prototype.setMode=function(e){if(!this.isModeAllowed(e))return{success:false,error:"MODENOTALLOWED",errorMsg:"Mode not allowed"};t.setState(t.States[e]);return{success:true,mode:e}};f.prototype.isModeAllowed=function(e){switch(e){case this.ANALYSIS:return true;case this.EDIT:return this.inClient&&t.model.layout&&t.model.layout.permissions&&t.model.layout.permissions.update;case this.SNAPSHOT:return this.inClient}return false};f.prototype.gotoStory=function(e){var t=c(e,this.stories);if(t)return d(e);return{success:false,error:"NOSUCHSTORY",errorMsg:"No such story"}};return f}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(239)],r=function(e){function t(){this._options=null;this._appid=null;this._type=null;this._cols=null;return window.Reflect?window.Reflect.construct(HTMLElement,[],this.constructor):null}t.prototype=Object.create(HTMLElement.prototype);t.prototype.constructor=t;Object.setPrototypeOf(t,HTMLElement);t.prototype.connectedCallback=function(){i(this)};Object.defineProperty(t.prototype,"options",{get:function e(){return this._options},set:function e(t){this.setAttribute("options",t)}});t.observedAttributes=["options","appid","config"];t.prototype.attributeChangedCallback=function(e,t,o){if("options"===e&&this.vis){var a=JSON.parse(o);this.vis.setOptions(a)}else{r(this);"appid"!==e&&"config"!==e||n(this);i(this)}};t.prototype.disconnectedCallback=function(){r(this)};t.init=function(){window.customElements&&window.customElements.define&&customElements.define("qlik-visual",t)};return t;function n(t){var n=t.getAttribute("appid");if(n){var i=JSON.parse(t.getAttribute("config"));t.app=e.openApp(n,i)}else t.app=e.currApp()}function i(e){var t=e.getAttribute("visid"),i=JSON.parse(e.getAttribute("options"));e.app||n(e);if(e.app&&t)e.app.visualization.get(t).then(function(t){e.vis=t;i&&t.setOptions(i);t.show(e)});else if(e.app){var r=JSON.parse(e.getAttribute("cols")),o=e.getAttribute("type")||"barchart";e.app.visualization.create(o,r,i).then(function(t){e.vis=t;t.show(e)})}}function r(e){if(e.vis){e.vis.close();delete e.vis}}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-panel-subtoolbar qv-panel-current-selections" ng-class="{smallDevice: isSmallDevice, bright: brightCurSel, \'expand-smart-search-suggested-chart\': expandSmartSearchSuggestedChart}">\n\t<div ng-if="!isSmallDevice">\n\t\t<div class="qv-selections-pager" ng-class="{\'client-tab-navigation--bright\' : clientTabNavigation }">\n\t\t\t<div class="buttons borderbox border-bottom border-right" aria-hidden="true">\n\n\t\t\t\t<div tid="toggleGlobalSearchButton" tabindex="0" class="qv-subtoolbar-button toggle-button borderbox" ng-hide="hideSearch" ng-class="{active: isGlobalSearchActive, indexing: isGlobalSearchIndexing}" ng-click="toggleGlobalSearch()" q-title-translation="{{isGlobalSearchActive ? \'Tooltip.CloseGlobalSearch\' : \'Tooltip.GlobalSearch\'}}">\n\t\t\t\t\t<i class="lui-icon lui-icon--selection-search icon"></i>\n\t\t\t\t\t<div class="label" q-translation="GlobalSearch.Preparing" q-title-translation="GlobalSearch.Preparing.Tooltip"></div>\n\t\t\t\t\t<qv-progress-bar ng-if="isGlobalSearchIndexing" percent-done="indexPercentDone" on-completed="setSearchIndexingDone()" options="progressBarOptions"></qv-progress-bar>\n\t\t\t\t</div>\n\n\t\t\t\t<button class="qv-subtoolbar-button borderbox" ng-hide="hideUndoRedo" ng-click="back()" ng-disabled="disable.back" q-title-translation="Tooltip.NavigateBack" data-tid="current-selections-back">\n\t\t\t\t\t<i class="lui-icon lui-icon--selections-back"></i>\n\t\t\t\t</button>\n\n\t\t\t\t<button class="qv-subtoolbar-button borderbox" ng-hide="hideUndoRedo" ng-click="forward()" ng-disabled="disable.forward" q-title-translation="Tooltip.NavigateForward" data-tid="current-selections-forward">\n\t\t\t\t\t<i class="lui-icon lui-icon--selections-forward"></i>\n\t\t\t\t</button>\n\n\t\t\t\t<button id="clearselections" class="qv-subtoolbar-button borderbox" ng-disabled="disable.clear" ng-hide="hideClearSelections" ng-click="clearAllFields()" q-title-translation="Tooltip.ClearSelections" data-tid="current-selections-clear">\n\t\t\t\t\t<i class="lui-icon lui-icon--clear-selections"></i>\n\t\t\t\t</button>\n\n\t\t\t</div>\n\t\t\t<div class="selections-shadow" ng-if="showShadow"></div>\n\t\t\t<div class="wrap borderbox" style="height: 100%;" qv-pager qv-selection-pager>\n\t\t\t\t<ul class="list" ng-show="!isGlobalSelectionsActive || (items.length > 0 && currentSelectionDisabled) || (items.length > 0 && !isGlobalSelectionsActive)" qva-delegated-activate=".item#showPopover($event)" qva-outside-ignore-for="currentSelectionsItems">\n\t\t\t\t\t<li class="item" ng-class="{\'item-multi-state\': !item.isSingleState, \'multi-active\': multiPopoverFieldName && multiPopoverFieldName === item.qField, \'selection-insights-disabled\': currentSelectionDisabled}" ng-repeat="item in items track by item.qField" data-csid="{{item.qField}}" tabindex="0"\n\t\t\t\t\t ng-keydown="handleKeyDown($event, item)" aria-label="{{item.screenReaderLabel}}">\n\t\t\t\t\t\t<qv-current-selections-item ng-if="item.isSingleState" item="item" current-selection-disabled="currentSelectionDisabled"></qv-current-selections-item>\n\t\t\t\t\t\t<div ng-if="!item.isSingleState" class="current-selections-item" ng-mousemove="openTooltip($event, item)" ng-mouseleave="closeTooltip()">\n\t\t\t\t\t\t\t<div class="item-component label">\n\t\t\t\t\t\t\t\t<span ng-class="{ \'lui-icon lui-icon--lock\': item.qLocked }"></span><span class="name">{{item.name}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="item-component count" title="">\n\t\t\t\t\t\t\t\t<span class="field-states-indicator">{{ item.states.length }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="item-component caret">\n\t\t\t\t\t\t\t\t<span class="lui-icon lui-icon--arrow-down"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div ng-if="currentSelectionDisabled" class="current-selections-disabled"></div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\n\t\t\t\t<div ng-if="!items.length && !haveHiddenSelections" class="empty-text no-selection borderbox" q-translation="CurrentSelections.NoSelections"></div>\n\t\t\t\t<div ng-if="!items.length && haveHiddenSelections" class="empty-text no-selection borderbox" q-translation="CurrentSelections.OnlyHiddenSelections"></div>\n\t\t\t\t<a class="qv-pager-nav qv-pager-previous" ng-class="{inverted: brightCurSel}" ng-click="prevPage()" q-title-translation="Tooltip.Previous"><i class="lui-icon lui-icon--arrow-left"></i></a>\n\t\t\t\t<a class="qv-pager-nav qv-pager-next" ng-class="{inverted: brightCurSel}" ng-click="nextPage()" q-title-translation="Tooltip.Next"><i class="lui-icon lui-icon--arrow-right"></i></a>\n\t\t\t</div>\n\t\t\t<div class="buttons-end borderbox border-left">\n\t\t\t\t<div aria-hidden="true" class="qv-subtoolbar-button qv-explore-selections-btn toggle-button borderbox" tabindex="0" ng-class="{active: isGlobalSelectionsActive}" ng-hide="hideSelectionsTool" ng-click="toggleGlobalSelection($event)" q-title-translation="{{isGlobalSelectionsActive ? \'Tooltip.CloseGlobalSelector\' : \'Tooltip.GlobalSelector\'}}"\n\t\t\t\t tid="currentSelections.toggleGlobalSelections">\n\t\t\t\t\t<i class="lui-icon lui-icon--global-selector icon"></i>\n\t\t\t\t\t<span id="explore-selections-label" q-translation="CurrentSelections.ExploreSelectionsBtn"></span>\n\t\t\t\t</div>\n\n\t\t\t\t<div aria-labelledby="insights-label" tid="toggleCaoButton" id="toggle-insights" tabindex="0" class="qv-subtoolbar-button toggle-button borderbox qv-insight-toggle-button" ng-if="options && options.enableCao" ng-class="{active: isCaoActive, bright: brightCurSel}" ng-click="toggleCao()"\n\t\t\t\t q-title-translation="{{isCaoActive ? \'cao.CloseCognitiveAssociativeOverlay\' : \'cao.CognitiveAssociativeOverlay\'}}">\n\t\t\t\t\t<i class="lui-icon lui-icon--analyze icon" aria-hidden="true"></i>\n\t\t\t\t\t<span id="insights-label" q-translation="cao.CognitiveAssociativeOverlayToggleButton"></span>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t</div>\n\t</div>\n\t<div ng-if="isSmallDevice && mobileIndicatorShow && !inSelection " ng-click="toggleGlobalSelection($event)" ng-class="{\'expand-smart-search-suggested-chart\': expandSmartSearchSuggestedChart}" class="qv-current-selections-mobile-wrapper" tid="currentSelections.toggleMobileSelections"\n\t q-title-translation="GlobalSelections.CurrentSelections">\n\t\t<div class="qv-current-selections-mobile-background">\n\t\t\t<p class="qv-current-selections-mobile-nbr" ng-class="{selections: nbrSelections > 0}">{{nbrSelections}}</p>\n\t\t</div>\n\t</div>\n</div>'},function(e,t){e.exports='<div qva-direction x-dir-setting={{options.direction}}" class="qv-tooltip qvt-generic-tooltip" ng-class="{\'above\':alwaysOnTop}">\n\t<div ng-repeat="item in content">\n\t\t<div qva-direction x-dir-text="{{item.header}}" x-dir-setting="{{options.direction}}" class="qv-tp-header">\n\t\t\t<strong>{{item.header}}</strong>\n\t\t</div>\n\t\t<table>\n\t\t\t<tr ng-repeat="row in item.rows" class="qv-tp-row">\n\t\t\t\t<td class=\'qv-tp-item\'>\n\t\t\t\t\t<div qva-direction x-dir-text="{{row.content}}" class="qv-tp-rowContent fade-out">{{row.content}}</div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(184)],r=function(e,t,n){function i(i){var r={preventDefault:false,allowInInput:false};function o(){n.preventDefault();t.$rootScope.$apply()}function a(){i.inSelection&&e(document).trigger("qv-press");i.forward();o()}function s(){i.inSelection&&e(document).trigger("qv-press");i.back();o()}this.keyboardShortcutsGroup=n.createGroup("current-selection-"+i.app.id,1);this.keyboardShortcutsGroup.registerKeys("ctrl+shift+y",a,r);this.keyboardShortcutsGroup.registerKeys("ctrl+shift+z",s,r);this.keyboardShortcutsGroup.on();this.on=function(){if(!this._isOn){this.keyboardShortcutsGroup.on();this._isOn=true}};this.off=function(){if(this._isOn){this.keyboardShortcutsGroup.off();this._isOn=false}};this.delete=function(){this.keyboardShortcutsGroup.delete()}}return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(92)],r=function(e){var t=e.extend("CurrentSelectionsViewHelper",{init:function e(t,n,i,r,o,a){this.scope=t;this.responsiveState=n;this.globalSelectionService=i;this.exploreSelectionsService=r;this.globalSearchService=o;this.caoService=a},toggleGlobalSelection:function e(t){this.globalSelectionService.toggleGlobalSelection(t);this.responsiveState.isSmallDevice||this.globalSearchService.off();this.scope.isCaoActive=false;this.exploreSelectionsService.off();this.scope.isExploreSelectionsActive=false},toggleExploreSelection:function e(t){this.globalSelectionService.off();this.scope.isExploreSelectionsActive=this.exploreSelectionsService.toggleExploreSelection(t);this.globalSearchService.off();this.scope.isCaoActive=false},toggleGlobalSearch:function e(t){this.globalSearchService.toggleGlobalSearch(this.scope.app.enigmaModel,t,this.scope.options.objectSearch);this.scope.isCaoActive=false;this.globalSelectionService.off();this.exploreSelectionsService.off();this.scope.isExploreSelectionsActive=false},toggleCao:function e(t){this.scope.isCaoActive=this.caoService.toggleCao(t);this.globalSearchService.off();this.globalSelectionService.off();this.exploreSelectionsService.off();this.scope.isExploreSelectionsActive=false}});return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(242)],r=function(e){e.widget("qv.pager",{options:{itemSelector:">li",orientation:"horizontal",pageSize:"auto",startPage:1,animationDuration:300},_create:function t(){var n=this.options;e.extend(this,{positionProperty:"horizontal"===n.orientation?"left":"top",sizeProperty:"horizontal"===n.orientation?"outerWidth":"outerHeight"});this.refresh();this.goToPage(n.startPage)},isItemInsidePage:function t(n){var i=e(n),r=i.position()[this.positionProperty]+i[this.sizeProperty](),o=Math.abs(parseFloat(i.parent().css("margin-"+this.positionProperty))),a=o+this.containerSize;return r>o&&r<a},calculatePageSize:function e(){return Math.floor(this.containerSize/this.calculateItemSize())},calculateItemSize:function e(){return this.element.find(this.options.itemSelector).eq(0)[this.sizeProperty]()},refresh:function e(){var t=this.currentPage||1;this.containerSize=this.element.parent()[this.sizeProperty]();this.pageSize="auto"===this.options.pageSize?this.calculatePageSize():this.options.pageSize;this.itemSize=this.calculateItemSize();this.maxPages=Math.ceil(this.element.find(this.options.itemSelector).length/this.pageSize||1);this.currentPage=Math.min(t,this.maxPages);this.goToPage(this.currentPage)},goToPage:function e(t){this.currentPage=Math.min(Math.max(1,t),this.maxPages);var n=(this.currentPage-1)*this.itemSize*this.pageSize,i={};i[this.positionProperty]=-n+"px";this.element.stop(true).animate(i,this.options.animationDuration)},goToPreviousPage:function e(){this.goToPage(this.currentPage-1)},goToNextPage:function e(){this.goToPage(this.currentPage+1)},goToPageContaining:function e(t){var n=Math.ceil(this.element.find(t).index()+1/this.pageSize);this.goToPage(n)},_destroy:function e(){this.element.off(this.eventNamespace)}});return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(10),n(48),n(856),n(94),n(140),n(103),n(168),n(155),n(49),n(89),n(176)],r=function(e,t,n,i,r,o){n.service("qvExploreSelectionsService",["$document","qvSelectionToolbarService",function(n,a){var s,l;var c=300;function u(){return{$container:void 0,$containerId:".qv-explore-selections-container",getComponent:function e(){return i},setup:function e(){o.get().then(function(e){r.StateChanged.bind(d.bind(null,d));e.enigmaModel.isInModalSelection()&&a.confirm()})},destroy:function e(){r.StateChanged.unbind(d)}}}function d(){(r.isInEditMode()||!r.isInAnalysisMode||r.inObjectView())&&h()}function f(i){r.setState(r.States.analysis);l.$container=t.element("<div>");i=i||n;i.find(l.$containerId).append(l.$container);l.$container.showComponent(l.getComponent());l.setup();e(".qv-explore-selections").slideDown(c)}function p(){return!(!l||void 0===l.$container)}function h(){if(!l)return;e(".qv-explore-selections").slideUp(c,function(){if(l.$container){l.$container.remove();l.$container=void 0}l.destroy()})}s={toggleExploreSelection:function e(t){l||(l=new u);if(p()){h();return false}f(t);return true},off:function e(){h()}};return s}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(857),n(858)],r=function(e,t){var n=["$scope",function(e){e.showFullModel=false;e.$on("$destroy",function(){})}];e.directive("qvExploreSelectionsComponent",function(){return{restrict:"E",template:t,controller:n,scope:true,replace:true,link:function e(t){t.target=null}}});return"<qv-explore-selections-component></qv-explore-selections-component>"}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-explore-selections overlay" id="qv-explore-selections-overlay" style="display:none;">\n\t<qv-selection-insights full="showFullModel"></qv-selection-insights>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(284),n(859),n(860),n(93),n(234),n(95),n(91),n(106),n(103),n(220),n(861),n(863),n(867)],r=function(e,t,n,i,r,o,a,s,l,c){var u={NO_SELECTIONS:0,GENERATE_INSIGHTS:1,INSIGHTS_FOUND:2,NO_INSIGHTS:3,UNSUPPORTED:4};var d={restrict:"E",bindings:{showFields:"<"},template:n,controller:["$scope","$timeout","qvSelectionInsightsService",function(n,d,f){var p=this;var h=null;this.showLoading=true;this.insights=[];this.activeCard=1e3;this.showInsightDetails=false;this.selectedInsight=null;this.hasSelection=false;this.measure="";this.newMeasureChosen=false;this.newSelection=false;this.isRefreshing=false;this.app=null;this.layout=null;this.selectionInsightsState=u.NO_SELECTIONS;this.states=u;this.measureError=false;this.loadingCards=false;this.cardIsInsight=true;this.selectionContribution="";this.isOneAndOnlyOneField=null;this.showing={table:false,excluded:false};this.$onInit=function(){v().then(function(e){if(e)r.getApp().then(function(e){p.app=e;e.enigmaModel.getCurrentSelectionObject().then(function(e){n.currentSelModel=e;l(n,"currentSelModel",function(){g()})});b(e);c.trackEvent(c.customEvents.EXPLORE_SELECTIONS_OPENED,{type:"clicked"})});else{m();p.showLoading=false}})};function v(){return f.getInsightDimensions(p.showFields).then(function(){return true}).catch(function(){return false})}this.generateInsights=function(){p.showLoading=true;p.newMeasureChosen=false;p.newSelection=false;y();c.trackEvent(c.customEvents.ASSOCIATIVE_INSIGHTS_GENERATED,{type:"clicked"})};function g(){if(p.selectionInsightsState!=u.UNSUPPORTED){p.hasSelection=n.currentSelModel.layout.qSelectionObject.qSelections.length>0;p.showLoading=false;p.isOneAndOnlyOneField=f.isOneAndOnlyOne(n.currentSelModel.layout);if(p.isOneAndOnlyOneField.isOneAndOnlyOne){p.selectionInsightsState=u.UNSUPPORTED;p.errorMsg=s.get("ExploreSelections.SingleSelectField",[p.isOneAndOnlyOneField.items])}else p.hasSelection||(p.selectionInsightsState=u.NO_SELECTIONS);p.hasSelection&&p.selectionInsightsState===u.NO_SELECTIONS&&(p.selectionInsightsState=u.GENERATE_INSIGHTS);p.layout=n.currentSelModel.layout;a.publish("selection/insights/current-selection",n.currentSelModel.layout)}}this.$onChanges=function(e){void 0===e.showFields||e.showFields.isFirstChange()||p.selectionInsightsState===u.NO_INSIGHTS&&(p.selectionInsightsState=u.GENERATE_INSIGHTS)};function m(){p.selectionInsightsState=u.UNSUPPORTED;p.errorMsg=s.get("ExploreSelections.NoSelectionInsights")}function b(e){return e.getCurrentSelectionObject().then(function(e){e.layoutSubscribe(function(){if(p.selectionInsightsState!=u.UNSUPPORTED){p.showInsightDetails=false;if(!p.newMeasureChosen){p.isRefreshing=true;a.publish("selection/insights/selection/changed")}if(p.selectionInsightsState!==u.NO_SELECTIONS&&p.selectionInsightsState!==u.NO_INSIGHTS){p.newSelection=true;p.newMeasureChosen=false}else p.selectionInsightsState===u.NO_INSIGHTS&&(p.selectionInsightsState=u.GENERATE_INSIGHTS)}c.trackEvent(c.customEvents.NEW_SELECTION_MADE,{type:"clicked"})})})}function y(){p.insights=[];return f.getInsightDimensions(p.showFields).then(function(e){a.publish("selection/insights/refreshed");p.showLoading=false;p.selectionInsightsState=u.INSIGHTS_FOUND;if(0!==e.insights.length){p.measure=e.insights[0].measure;p.loadingCards=true;x(e.insights)}else{a.publish("selection/insights/updated");e.measure?p.measure=e.measure:p.selectionInsightsState=u.NO_INSIGHTS}p.isRefreshing=false}).catch(function(){p.showLoading=false;m()})}function x(t){var n=e.getService("$q");function i(e){var r=t[e];if(!r)return n.resolve(true);return f.getInsightSummary(r.dimension,p.app).then(function(e){p.measureError="NaN"==e.summary;r.summaryNaN=p.measureError;r.summaryString=e.summary;if(e.show){p.insights.push(r);a.publish("selection/insight/draw",{insight:r,index:p.insights.length-1})}}).catch(function(){r.summaryError=true;p.insights.push(r)}).then(function(){e+=1;if(e<t.length)return i(e);p.loadingCards=false;a.publish("selection/insights/updated");return true})}return i(0)}this.openCardSummaryDialog=function(){h=e.getService("luiDialog").show({template:i,input:{title:"SelectionInsights.SummarySelection.HelpTitle",html:i,closeDialog:function e(){h.close();h=null}}})};this.backToSelections=function(){p.showInsightDetails=false;p.newMeasureChosen=false;a.publish("selections/insights/details/close")};this.closeInsights=function(){p.showInsightDetails=false;p.newMeasureChosen=false;f.clearInsights();a.publish("selection/insights/close")};this.openCard=function(e){a.publish("selections/insights/details/close");if(e>=0)p.newMeasureChosen||p.isRefreshing||p.insights[e].summaryNaN||!p.insights[e].show||d(function(){if(p.activeCard==e)p.closeCard();else{a.publish("selections/insights/details/open");p.activeCard=e;e=e>0?e:0;var n=f.getInsightDetails(p.insights[e].dimension,p.app);n.isMeasureNegative=n.includedMeasure.qNumber<0||n.excludedMeasure.qNumber<0;p.showInsightDetails=true;p.cardIsInsight=true;p.insights[e]=n;p.selectedInsight=p.insights[e];f.getTableVis(p.selectedInsight,p.showing.excluded).then(function(e){p.selectedInsight.table=e});n.isMeasureNegative?a.publish("selection/insights/details/negative",p.selectedInsight):a.publish("selection/insights/details/updated",{measure:p.selectedInsight.measure,aggr:p.selectedInsight.measureAggregation,dimension:p.selectedInsight.dimension,contribution:p.selectedInsight.selectedMeasure.selected.percentage.toFixed(1)});var i=t.openApp(p.app.qDocId);i.visualization.create("listbox",[p.selectedInsight.dimension],{showTitles:true,title:p.selectedInsight.dimension}).then(function(e){p.listbox=e.model.enigmaModel;S()})}});else if(!p.newMeasureChosen&&!p.isRefreshing)if(p.activeCard==e&&p.showInsightDetails)p.closeCard();else{p.activeCard=e;var n=f.getInsightDetails(p.insights[0].dimension,p.app);p.showInsightDetails=true;p.cardIsInsight=false;n.isSelectionNegative=n.selectedMeasure.selected.percentage<0||n.selectedMeasure.excluded.percentage<0;p.insights[0]=n;p.selectedInsight=p.insights[0];a.publish("selection/insights/current/open",{insight:p.selectedInsight});a.publish("selections/insights/details/open")}c.trackEvent(c.customEvents.ASSOCIATIVE_INSIGHTS_CARD_CLICKED,{type:"clicked"})};this.closeCard=function(){p.showInsightDetails=!p.showInsightDetails;p.cardIsInsight=true;p.activeCard=null};a.subscribe("selection/insights/details/close",function(){p.showInsightDetails=false});a.subscribe("selection/insights/new",function(e){p.isRefreshing=false;p.insights=[];p.activeCard=1e3;if(0===e.insights.length){p.measureError=false;a.publish("selection/insights/updated")}else{p.loadingCards=true;x(e.insights)}e.measure&&(p.measure=e.measure);p.showInsightDetails=false});a.subscribe("selection/insights/error",m);function S(){o.selectAll(".gwBar g").remove();var e=o.select(".gwBar svg");var t=e.append("g");var n=p.selectedInsight.counts.excluded/(p.selectedInsight.counts.excluded+p.selectedInsight.counts.included)*100/100*427;var i=p.selectedInsight.counts.included/(p.selectedInsight.counts.excluded+p.selectedInsight.counts.included)*100/100*427;t.append("rect").style("fill","#A9A9A9").attr("width",35).attr("height",Math.ceil(n)).attr("y",Math.ceil(i)).attr("x",0);t.append("rect").style("fill","white").attr("width",35).attr("height",Math.ceil(i)).attr("y",0).attr("x",0);var r=[];r.push([{x:35,y:Math.ceil(i)+Math.ceil(n)/2},{x:65,y:322}]);r.push([{x:65,y:322},{x:95,y:322}]);r.push([{x:35,y:Math.ceil(i)/2},{x:65,y:107}]);r.push([{x:65,y:107},{x:95,y:107}]);var a=o.svg.line().x(function(e){return e.x}).y(function(e){return e.y});var s=e.append("g").attr("class","lines");s.selectAll("path").data(r).enter().append("path").attr({d:a,"stroke-dasharray":"790 790","stroke-dashoffset":0}).style("stroke",function(e,t){return t>1?"white":"#A9A9A9"}).style("stroke-width","2").attr("opacity",1)}this.$onDestroy=function(){a.unsubscribe("selection/insights/show");a.unsubscribe("selection/insights/new");a.unsubscribe("selection/insights/error")}}]};e.nativeComponent("qvSelectionInsights",d)}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-selections-insights-container">\n\t\x3c!-- Insights found --\x3e\n\t<div class="qv-selections-insights-header">\n\t\t<h2\n\t\t\tq-translation="SelectionInsights.AssociativeInsights"\n\t\t\tclass="qv-selections-insights-title"\n\t\t></h2>\n\t\t<span\n\t\t\tclass="lui-icon lui-icon--help lui-icon--small"\n\t\t\tng-click="$ctrl.openCardSummaryDialog()"\n\t\t></span>\n\t\t<div class="qv-insight-summary-close">\n\t\t\t<span\n\t\t\t\tclass="lui-icon lui-icon--close"\n\t\t\t\tng-click="$ctrl.closeInsights()"\n\t\t\t></span>\n\t\t</div>\n\t\t<qv-selection-insights-summary\n\t\t\tng-if="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.INSIGHTS_FOUND"\n\t\t\tstates="$ctrl.states"\n\t\t\tselection-insights-state="$ctrl.selectionInsightsState"\n\t\t\tnew-measure-chosen="$ctrl.newMeasureChosen"\n\t\t\tnew-selection="$ctrl.newSelection"\n\t\t\tmeasure="$ctrl.measure"\n\t\t\tshow-loading="$ctrl.showLoading"\n\t\t\thas-selection="$ctrl.hasSelection"\n\t\t\tshow-fields="$ctrl.showFields"\n\t\t\tmeasure-error="$ctrl.measureError"\n\t\t\tselected-insight="$ctrl.selectedInsight"\n\t\t></qv-selection-insights-summary>\n\t</div>\n\t<qv-selection-insights-card-container\n\t\tng-show="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.INSIGHTS_FOUND"\n\t\tnew-measure-chosen="$ctrl.newMeasureChosen"\n\t\tnew-selection="$ctrl.newSelection"\n\t\tmeasure="$ctrl.measure"\n\t\tshow-loading="$ctrl.showLoading"\n\t\tinsights="$ctrl.insights"\n\t\topen-card="$ctrl.openCard"\n\t\tactive-card="$ctrl.activeCard"\n\t\tclass="qv-selection-insights-card-container"\n\t\tshow-fields="$ctrl.showFields"\n\t\tloading-cards="$ctrl.loadingCards"\n\t\tcard-is-insight="$ctrl.cardIsInsight"\n\t></qv-selection-insights-card-container>\n\t\x3c!-- LOADING --\x3e\n\t<div class="qv-selections-insights-loading" ng-if="$ctrl.showLoading">\n\t\t<div class="spinner-container">\n\t\t\t<qv-spinner\n\t\t\t\tshow="$ctrl.showLoading"\n\t\t\t\tcenter-in-parent="true"\n\t\t\t></qv-spinner>\n\t\t</div>\n\t\t<div\n\t\t\tclass="loading-message"\n\t\t\tq-translation="SelectionInsights.Loading"\n\t\t></div>\n\t</div>\n\n\t\x3c!-- No selection has been made --\x3e\n\t<div\n\t\tclass="qv-selections-no-insights"\n\t\tng-if="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.NO_SELECTIONS"\n\t>\n\t\t<div class="no-insights-icon"></div>\n\t\t<p\n\t\t\tclass="qv-selections-insights--p"\n\t\t\tq-translation="ExploreSelections.NoInsights"\n\t\t></p>\n\t</div>\n\n\t\x3c!-- AI is not supported for this app --\x3e\n\t<div\n\t\tclass="qv-selections-no-insights"\n\t\tng-if="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.UNSUPPORTED"\n\t>\n\t\t<div class="no-insights-icon"></div>\n\t\t<p class="qv-selections-insights--p" ng-bind-html="$ctrl.errorMsg"></p>\n\t</div>\n\n\t\x3c!--\n\t\tUser opened the selection insights panel for the first time after making selections\n\t--\x3e\n\t<div\n\t\tclass="qv-selections-generate-insights qv-selections-no-insights"\n\t\tng-if="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.GENERATE_INSIGHTS"\n\t>\n\t\t<div class="no-insights-icon"></div>\n\t\t<p\n\t\t\tq-translation="ExploreSelections.GenerateInsights"\n\t\t\tclass="qv-selections-insights--p"\n\t\t></p>\n\t\t<button\n\t\t\ttid="explore-selections-generate-insight-button"\n\t\t\tclass="lui-button lui-button--success"\n\t\t\tq-translation="ExploreSelections.GenerateInsights.Button"\n\t\t\tng-click="$ctrl.generateInsights()"\n\t\t></button>\n\t</div>\n\n\t\x3c!-- User has made a selection but no insights were found --\x3e\n\t<div\n\t\tclass="qv-selections-no-insights"\n\t\tng-if="!$ctrl.showLoading && $ctrl.selectionInsightsState === $ctrl.states.NO_INSIGHTS"\n\t>\n\t\t<div class="no-insights-icon"></div>\n\t\t<p\n\t\t\tclass="qv-selections-insights--p"\n\t\t\tq-translation="ExploreSelections.NoInsightsWithSelection.Paragraph1"\n\t\t></p>\n\t\t\x3c!--\n\t\t\tIf show fields checkbox is unchecked, we tell them to check it since they got no master item insights\n\t\t--\x3e\n\t\t<div\n\t\t\tng-if="!$ctrl.showFields"\n\t\t\tclass="select-fields"\n\t\t\tq-translation="ExploreSelections.NoInsightsWithSelection.Paragraph3"\n\t\t></div>\n\t</div>\n\n\t\x3c!-- Insights details --\x3e\n\t<qv-selection-insights-details\n\t\tng-show="$ctrl.selectionInsightsState === $ctrl.states.INSIGHTS_FOUND"\n\t\tshow-insight-details="$ctrl.showInsightDetails"\n\t\tselected-insight="$ctrl.selectedInsight"\n\t\tlistbox="$ctrl.listbox"\n\t\tcard-is-insight="$ctrl.cardIsInsight"\n\t\tback-to-selections="$ctrl.backToSelections()"\n\t\tlayout="$ctrl.layout"\n\t\tshowing="$ctrl.showing"\n\t></qv-selection-insights-details>\n</div>\n'},function(e,t){e.exports='<lui-dialog class="selection-insights-dialog" x-variant="{{::variant}}">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title\n\t\t\tq-translation="SelectionInsights.SummarySelection.HelpTitle"\n\t\t></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="q-modal-loading">\n\t\t<p q-translation="SelectionInsights.SummarySelection.HelpText"></p>\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<button\n\t\t\tclass="lui-button close-button"\n\t\t\tng-click="closeDialog();"\n\t\t\tq-translation="Common.Close"\n\t\t\ttid="selection-insights-dialog-help-button"\n\t\t></button>\n\t</lui-dialog-footer>\n</lui-dialog>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(862),n(234),n(95),n(220)],r=function(e,t,n,i){e.nativeComponent("qvSelectionInsightsCardContainer",{bindings:{showLoading:"<",insights:"=",openCard:"<",activeCard:"<",newMeasureChosen:"=",newSelection:"=",showFields:"<",loadingCards:"<",measure:"<",selectedInsight:"=",cardIsInsight:"<"},controller:["$timeout","qvSelectionInsightsService",function(e,t){var r=this;this.showLoading=true;this.insights=[];this.refreshActive=false;this.isRefreshing=false;this.hasInsights=true;this.itemString="";this.selectionContribution="";this.$onInit=function(){n.selectAll(".insight-bar-container svg").remove()};function o(){if(r.insights.length>0){var e=t.getInsightDetails(r.insights[0].dimension,r.app).selectedMeasure.selected.percentage/100;r.selectionContribution=r.getLocalizedPercentage(e)}}i.subscribe("selection/insights/updated",function(){e(function(){r.hasInsights=r.insights.length>0;o()})});i.subscribe("selection/insight/draw",function(t){e(function(){n.select("#insightCard"+t.index+" .insight-bar-container svg").remove();s(t.insight,t.index)})});i.subscribe("selection/insights/refresh",function(){r.isRefreshing=true});i.subscribe("selection/insights/refreshed",function(){r.isRefreshing=false;r.refreshActive=false});i.subscribe("selection/insights/new",function(){r.isRefreshing=false;r.refreshActive=false});i.subscribe("selection/insights/measure/cancel",function(){r.refreshActive=false});i.subscribe("selection/insights/fields/change",function(){r.refreshActive=true});i.subscribe("selection/insights/selection/changed",function(){r.refreshActive=true});i.subscribe("selection/insights/current-selection",function(e){a(t.getSelectionItems(e))});function a(e){if(e){r.itemString="";e.forEach(function(t,n){e.length-1===n?r.itemString+=t.name:r.itemString+=t.name+", "})}}this.getLocalizedPercentage=function(e){return t.getLocalizedPercentage(e)};this.getMeasurePercentage=function(e){var t=e.counts.excluded+e.counts.included;var n=e.counts.excluded<e.counts.included?e.counts.excluded:e.counts.included;var i=n/t*100;var o=Math.round(10*i)/100;o=r.getLocalizedPercentage(o/10);return o};function s(e,t){var i=n.select("#insightCard"+t+" .insight-bar-container").append("svg").attr("width",44).attr("height",125);var r=i.append("g");var o=e.counts.excluded/(e.counts.excluded+e.counts.included)*100/100*124;var a=e.counts.included/(e.counts.excluded+e.counts.included)*100/100*124;r.append("rect").style("fill","#A9A9A9").attr("width",12).attr("height",Math.ceil(o)).attr("y",Math.ceil(a)).attr("x",0);r.append("rect").style("fill","white").style("stroke-width",1).style("stroke","#E6E6E6").attr("width",12).attr("height",Math.ceil(a)).attr("y",0).attr("x",0);var s=[];var l=Math.ceil(a)+Math.ceil(o)/2;s.push([{x:12,y:l},{x:28,y:38}]);var c=n.svg.line().x(function(e){return e.x}).y(function(e){return e.y});var u=i.append("g").attr("class","lines");u.selectAll("path").data(s).enter().append("path").attr({d:c,"stroke-dasharray":"790 790","stroke-dashoffset":0}).style("stroke",function(e,t){return t>1?"white":"#A9A9A9"}).style("stroke-width","1").attr("opacity",1)}this.$onDestroy=function(){i.unsubscribe("selection/insights/updated");i.unsubscribe("selection/insights/fields/change");i.unsubscribe("selection/insights/measure/cancel");i.unsubscribe("selection/insights/selection/changed");i.unsubscribe("selection/insights/refresh");i.unsubscribe("selection/insights/new");i.unsubscribe("selection/insights/refreshed");i.unsubscribe("selection/insight/draw");i.unsubscribe("selection/insights/current-selection")}}],template:t})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div tid="selection-insights-card-container" class="qv-selections-insights-cards-container" ng-show="!$ctrl.isRefreshing && $ctrl.hasInsights">\n\t<div ng-show="!$ctrl.showLoading" class="qv-selections-empty-cards">\n\t\t<div tid="current-selections-card" class="card selection-insights-card selection-insights-card--current-selection" ng-class="{\'active\': $ctrl.activeCard === -1 && !$ctrl.cardIsInsight}" ng-click="$ctrl.openCard(-1)" tabindex="0"> \n\t\t\t<div tid="no-longer-valid-overlay" class="no-longer-valid-overlay" ng-if="$ctrl.refreshActive">\n\t\t\t\t<div class="gray-overlay"></div>\n\t\t\t\t<span class="no-longer-valid-text" q-translation="SelectionInsights.Refresh.NoLongerValid"></span>\n\t\t\t</div>\n\t\t\t<div class="insight-card-content selection-insights-card--current-selection-content">\n\t\t\t\t<div class="insight-card-body">\n\t\t\t\t\t<div class="insight-dimension-title">\n\t\t\t\t\t\t<div class="insight-dimension-name" title="{{$ctrl.itemString}}">{{$ctrl.itemString}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="insight-card-body-your-selections" q-translation="SelectionInsights.CardSummaryYourSelections" q-title-translation="SelectionInsights.CardSummaryYourSelections"></div>\n\t\t\t\t\t<div class="insight-card-body-account" q-translation="SelectionInsights.CardSummaryAccountFor"></div>\n\t\t\t\t\t<div class="insight-measure-title">\n\t\t\t\t\t\t<div class="insight-current-selection-value" ng-show="$ctrl.selectionContribution">\n\t\t\t\t\t\t\t{{ $ctrl.selectionContribution }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="insight-measure-name" title="">\n\t\t\t\t\t\t\t{{ $ctrl.measure }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="selection-insights--other-fields" q-translation="SelectionInsights.FoundOtherFields"></div>\n\t\t<div tid="selection-insights-card" ng-repeat="insight in $ctrl.insights track by $index" id="insightCard{{ $index }}" class="card selection-insights-card insight-card" ng-class="{\'active\': $ctrl.activeCard === $index && $ctrl.cardIsInsight, \'disabled\': $ctrl.refreshActive || !insight.show, \'inactive\': insight.summaryNaN }"\n\t\t ng-click="$ctrl.openCard($index)" tabindex="0">\n\t\t\t<div tid="no-longer-valid-overlay" class="no-longer-valid-overlay" ng-if="$ctrl.refreshActive">\n\t\t\t\t<div class="gray-overlay"></div>\n\t\t\t\t<span class="no-longer-valid-text" q-translation="SelectionInsights.Refresh.NoLongerValid"></span>\n\t\t\t</div>\n\t\t\t<div class="insight-bar-container"></div>\n\t\t\t<div class="insight-card-content">\n\t\t\t\t<div class="insight-card-body">\n\t\t\t\t\t<div class="insight-dimension-title">\n\t\t\t\t\t\t<div class="insight-dimension-name" title="{{ insight.dimension }}">\n\t\t\t\t\t\t\t{{ insight.dimension }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div tid="insight-counts-summary" class="insight-card-body-your-selections" title="{{insight.counts.summary}}">{{insight.counts.summary}}</div>\n\t\t\t\t\t<div class="insight-card-body-account" q-translation="SelectionInsights.CardSummaryAccountFor"></div>\n\t\t\t\t\t<div class="insight-measure-title" ng-if="!insight.summaryError && !insight.summaryNaN && insight.show">\n\t\t\t\t\t\t<div class="insight-measure-value">\n\t\t\t\t\t\t\t{{ insight.summaryString }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="insight-measure-name" title="{{ insight.measure }}">\n\t\t\t\t\t\t\t{{ insight.measure }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="insight-measure-title" ng-if="insight.summaryError">\n\t\t\t\t\t\t<span class="timeout-error" q-translation="SelectionInsights.ErrorTimeout"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="insight-measure-title" ng-if="!insight.show && !insight.summaryNaN && !insight.summaryError">\n\t\t\t\t\t\t<span tid="selection-insight-error-calculation" class="timeout-error" q-translation="SelectionInsights.ErrorCalculations"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="insight-measure-title" ng-if="insight.summaryNaN">\n\t\t\t\t\t\t<span class="invalid-error" q-translation="SelectionInsights.InvalidMeasure"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div ng-if="$ctrl.showLoading" class="qv-selections-empty-cards">\n\t\t\t\t<div class="empty card"></div>\n\t\t\t\t<div class="empty card"></div>\n\t\t\t\t<div class="empty card"></div>\n\t\t\t\t<div class="empty card"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div id="cardLoading" class="card loading-card selection-insights-card inactive" ng-if="$ctrl.loadingCards">\n\t\t\t<div class="insight-bar-container">\n\t\t\t\t<div class="loading-line bar"></div>\n\t\t\t</div>\n\t\t\t<div class="insight-card-content">\n\t\t\t\t<div class="insight-card-body">\n\t\t\t\t\t<div class="loading-line title"></div>\n\t\t\t\t\t<div class="loading-line count"></div>\n\t\t\t\t\t<div class="loading-line contribution"></div>\n\t\t\t\t\t<div class="measure-container">\n\t\t\t\t\t\t<div class="loading-line percent"></div>\n\t\t\t\t\t\t<div class="loading-line measure"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n\x3c!-- LOADING --\x3e\n<div class="qv-selections-insights-loading" ng-if="$ctrl.isRefreshing">\n\t<div class="spinner-container">\n\t\t<qv-spinner show="$ctrl.isRefreshing" center-in-parent="true"></qv-spinner>\n\t</div>\n\t<div class="loading-message" q-translation="SelectionInsights.Loading"></div>\n</div>\n\n\x3c!-- NO INSIGHTS FOUND --\x3e\n<div class="qv-selections-no-insights" ng-show="!$ctrl.isRefreshing && !$ctrl.hasInsights">\n\t<div class="no-insights-icon"></div>\n\t<p class="qv-selections-insights--p" q-translation="ExploreSelections.NoInsightsWithSelection.Paragraph1"></p>\n\t<div ng-if="!$ctrl.showFields" class="select-fields" q-translation="ExploreSelections.NoInsightsWithSelection.Paragraph3"></div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(864),n(284),n(95),n(91),n(234),n(103),n(93),n(865),n(220)],r=function(e,t,n,i,r,o,a,s){e.nativeComponent("qvSelectionInsightsDetails",{bindings:{showInsightDetails:"<",selectedInsight:"<",listbox:"<",layout:"<",cardIsInsight:"<",backToSelections:"&",showing:"="},controller:["$timeout","qvSelectionInsightsService",function(e,t){var l=this;this.detailsTitle="";this.measure="";this.selectionHelp="";this.refreshActive=false;this.selectionInsightsMeasureBarTitle="";this.hasLockedSelections=false;this.selectionsBarTotal="";this.options={isReadonly:true,isPopover:false,selections:false,showSearch:true};this.showExcludedValues=false;this.celloptions={selections:false};l.selectionInsightsMeasureBarTitle=function(){if(l.selectedInsight&&l.selectedInsight.measureAggregation)return r.get("SelectionInsights.MeasureBarTitle",[l.selectedInsight.measureAggregation[0].toUpperCase()+l.selectedInsight.measureAggregation.slice(1),l.selectedInsight.measure])};l.selectionsBarTotal=function(){if(l.selectedInsight&&l.selectedInsight.selectedMeasure.total)return r.get("SelectionInsights.SelectionsBarTotal",[l.selectedInsight.selectedMeasure.total])};l.countBarTotal=function(){if(l.selectedInsight&&l.selectedInsight.counts.excluded&&l.selectedInsight.counts.included)return r.get("SelectionInsights.CountBarTotal",[l.selectedInsight.counts.excluded+l.selectedInsight.counts.included])};i.subscribe("selection/insights/details/negative",function(e){l.showExcludedValues=false;l.measure=e.measure;l.detailsTitle=r.get("SelectionInsights.DimensionContributionsTitle",["<strong>"+e.dimension+"</strong>","<strong>"+e.measure+"</strong>"]);l.selectionHelp=r.get("SelectionInsights.SelectionHelp","<strong>"+e.dimension+"</strong>");c(e)});i.subscribe("selection/insights/details/updated",function(e){l.showExcludedValues=false;l.measure=e.measure;l.hasLockedSelections=t.isHasLockedSelections(l.layout);l.detailsTitle=r.get("SelectionInsights.DimensionContributionsTitle",["<strong>"+e.dimension+"</strong>","<strong>"+e.measure+"</strong>"]);l.selectionHelp=r.get(l.hasLockedSelections?"SelectionInsights.SelectionHelpWithLockedSelections":"SelectionInsights.SelectionHelp","<strong>"+e.dimension+"</strong>");d()});i.subscribe("selection/insights/measure/cancel",function(){l.refreshActive=false});i.subscribe("selection/insights/fields/change",function(){l.refreshActive=true});i.subscribe("selection/insights/updated",function(){l.refreshActive=false});function c(e){o.selectAll(".bars-container svg").remove();var t=[{name:"excluded",value:e.counts.excluded,label:e.counts.excluded},{name:"included",value:e.counts.included,label:e.counts.included}];u(t,"value");var n=[{name:"excluded",value:e.excludedMeasure.qNumber,label:e.measureBreakdown.excluded.num},{name:"included",value:e.includedMeasure.qNumber,label:e.measureBreakdown.included.num}];u(n,"measure")}function u(e,t){var n=431;var i=120;var r=10;var a="";var s=45;var l=30;a="value"==t?" .val-dist":" .measure-dist";var c=o.select(".negative-chart"+a).append("svg").attr("width",i+s).attr("height",n+s);var u=c.append("g").attr("transform","translate("+r/2+",1)");var d=o.scale.ordinal().rangeRoundBands([0,i]);var f=o.scale.linear().range([n,0]);d.domain(e.map(function(e){return e.name}));"value"==t?f.domain([0,o.max(e,function(e){return e.value})]):f.domain(o.extent(e,function(e){return e.value}));var p=u.append("defs");p.append("filter").attr("id","blur").append("feGaussianBlur").attr("stdDeviation",5);if("value"==t){u.selectAll("bar").data(e).enter().append("rect").style("fill","rgba(0,0,0,0.1)").attr("x",function(e){return d(e.name)}).attr("width",d.rangeBand()).attr("y",function(e){return f(e.value)}).attr("height",function(e){return n-f(e.value)}).attr("filter","url(#blur)").attr("rx",3).attr("ry",3);u.selectAll("bar").data(e).enter().append("rect").style("fill",function(e){return"value"==t?"excluded"==e.name?"#A7A7A7":"#FFFFFF":"excluded"==e.name?"blue":"#FFFFFF"}).style("stroke",function(e){return"excluded"==e.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)"}).attr("x",function(e){return d(e.name)}).attr("width",d.rangeBand()).attr("y",function(e){return e.value>0?f(e.value):f(0)}).attr("height",function(e){return"value"==t?n-f(e.value):Math.abs(f(e.value)-f(0))}).attr("rx",3).attr("ry",3);u.selectAll("bar").data(e).enter().append("rect").style("fill",function(e){return"excluded"==e.name?"#A7A7A7":"#FFFFFF"}).attr("x",function(e){return d(e.name)}).attr("width",d.rangeBand()).attr("y",n-3).attr("height",3);var h=c.append("g").attr("class","barLabels").attr("transform","translate("+r/2+",0)");e.forEach(function(e,t){u.append("line").style("stroke","excluded"==e.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)").attr("x1",d(e.name)).attr("y1",n).attr("x2",d(e.name)).attr("y2",n-3);t>0&&u.append("line").style("stroke","excluded"==e.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)").attr("x1",d(e.name)+60).attr("y1",n).attr("x2",d(e.name)+60).attr("y2",n-3);var i=h.append("g");i.append("rect").attr("x",function(){return d(e.name)}).attr("width",d.rangeBand()).attr("height",2).attr("y",function(){return f(e.value)}).attr("opacity",0);i.append("text").attr("x",d(e.name)+l).attr("y",function(){return n-f(e.value)>n-l?f(e.value)+30:f(e.value)-10}).attr("text-anchor","middle").attr("class","grouped-bar-value-label").text(e.label).attr("fill",function(){var t="#404040";"excluded"==e.name&&n-f(e.value)>n-l&&(t="white");return t})})}else{p.append("pattern").attr("id","diagonalStripes").attr("patternUnits","userSpaceOnUse").attr("width",8).attr("height",8).attr("patternTransform","rotate(45)").append("rect").attr("width","2").attr("height","8").attr("fill","#4842b5");u.selectAll("bar").data(e).enter().append("rect").style("fill","rgba(0,0,0,0.1)").attr("x",function(e){return d(e.name)}).attr("width",d.rangeBand()).attr("y",function(e){return e.value>0?f(e.value):f(0)}).attr("height",function(e){return Math.abs(f(e.value)-f(0))}).attr("filter","url(#blur)").attr("rx",3).attr("ry",3);u.selectAll("bar").data(e).enter().append("rect").style("fill",function(e){return"excluded"==e.name?"#655DC6":"#FFFFFF"}).style("stroke",function(e){return"excluded"==e.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)"}).attr("x",function(e){return d(e.name)}).attr("width",d.rangeBand()).attr("y",function(e){return e.value>0?f(e.value):f(0)+1}).attr("height",function(e){return Math.abs(f(e.value)-f(0))}).attr("rx",3).attr("ry",3);u.selectAll("bar").data(e).enter().append("rect").style("fill",function(e){return"excluded"==e.name?"#655DC6":"#FFFFFF"}).attr("x",function(e){return d(e.name)}).attr("width",d.rangeBand()).attr("y",function(e){return e.value>0?f(e.value)-3:f(0)+1}).attr("height",2);var v=c.append("g").attr("class","barLabels").attr("transform","translate("+r/2+",0)");e.forEach(function(e,t){u.append("line").style("stroke","excluded"==e.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)").attr("x1",d(e.name)).attr("y1",function(){return e.value>0?f(e.value):f(0)}).attr("x2",d(e.name)).attr("y2",function(){return e.value>0?f(e.value)-3:f(0)+3});t>0&&u.append("line").style("stroke","excluded"==e.name?"rgba(0,0,0,0.1)":"rgba(0,0,0,0.27)").attr("x1",d(e.name)+60).attr("y1",function(){return e.value>0?f(e.value):f(0)}).attr("x2",d(e.name)+60).attr("y2",function(){return e.value>0?f(e.value)-3:f(0)+3});"excluded"==e.name&&u.append("rect").attr("x",function(){return d(e.name)}).attr("width",d.rangeBand()).attr("y",function(){return e.value>0?f(e.value):f(0)}).attr("height",function(){return Math.abs(f(e.value)-f(0))}).attr("stroke","#504A9E").attr("rx",3).attr("ry",3).attr("fill","url(#diagonalStripes)");var n=v.append("g");n.append("rect").attr("x",function(){return d(e.name)}).attr("width",d.rangeBand()).attr("height",2).attr("y",function(){return e.value>0?f(e.value):f(0)}).attr("opacity",0);n.append("text").attr("x",d(e.name)+l).attr("y",function(){return e.value>0?f(e.value)+20:Math.abs(f(e.value)-f(0))<l?Math.abs(f(e.value)-f(0))+f(0)+20:Math.abs(f(e.value)-f(0))+f(0)-10}).attr("text-anchor","middle").attr("class","grouped-bar-label").text(e.label).attr("fill",function(){var t="#404040";"excluded"==e.name&&(t=Math.abs(f(e.value)-f(0))<l?"#655DC6":"#FFFFFF");return t})})}c.append("g").attr("class","x axis").append("line").attr("y1",f(0)).attr("y2",f(0)).attr("x2",i+r).attr("stroke","#404040").attr("stroke-width","3");var g=c.append("text").attr("x",i+2*r).attr("y",f(0)-28).attr("text-anchor","left").style("font-size","22px").attr("fill","#B3B3B3");g.append("tspan").attr("dx",0).attr("dy",4).text("+");g.append("tspan").attr("dx",-13).attr("dy",30).attr("fill","#404040").text("0");g.append("tspan").attr("dx",-10).attr("dy",30).text("-")}function d(){e(function(){var e=431;var t=213;o.selectAll(".connectors svg").remove();var n=o.select(".connectors .svg-container").append("svg").attr("width",t).attr("height",e);n.append("linearGradient").attr("id","area-gradient").attr("x1",0).attr("y1",0).attr("x2",5).attr("y2",0).selectAll("stop").data([{offset:"0%",color:"#A7A7A7"},{offset:"20%",color:"white"}]).enter().append("stop").attr("offset",function(e){return e.offset}).attr("stop-color",function(e){return e.color});var i=l.getPercentage("excluded")/100*e;var r=l.selectedInsight.measureBreakdown.excluded.percentage/100*e;var a=[{x:0,y:e-i},{x:t,y:e-r}];var s=[{x:0,y:i},{x:t,y:r}];var c=o.scale.linear().domain([0,o.max(s,function(e){return e.x})]).range([0,t]);var u=o.scale.linear().domain([0,e]).range([e,0]);var d=o.svg.area().x(function(e){return c(e.x)}).y0(e).y1(function(e){return u(e.y)});var f=o.svg.line().x(function(e){return e.x}).y(function(e){return e.y});var p=[];p.push(a);var h=n.append("g").attr("class","lines");h.selectAll("path").data(p).enter().append("path").attr({d:f,"stroke-dasharray":"3, 3","stroke-dashoffset":0}).style("stroke","#BEBEBE").style("stroke-width","1").attr("opacity",1);n.append("path").datum(s).attr("class","area").attr("d",d)})}this.getLocalizedPercentage=function(e){return t.getLocalizedPercentage(e)};this.getPercentageLocalized=function(e){if(l.selectedInsight){var t=l.selectedInsight.counts.excluded+l.selectedInsight.counts.included;return l.getLocalizedPercentage(l.selectedInsight.counts[e]/t)}return 0};this.getPercentage=function(e){if(l.selectedInsight){var t=l.selectedInsight.counts.excluded+l.selectedInsight.counts.included;return l.selectedInsight.counts[e]/t*100}return 0};this.showTable=function(e){l.showing={table:e,excluded:true};t.getTableVis(l.selectedInsight,true).then(function(e){l.selectedInsight.table=e})};this.toggleShowTableExcluded=function(e){l.showing={table:true,excluded:e};t.getTableVis(l.selectedInsight,e).then(function(e){l.selectedInsight.table=e})};this.selectExcluded=function(){var e=l.selectedInsight.dimension;var t=this.selectedInsight.dimensionId;l.showing={table:false,excluded:false};var r=l.layout.qSelectionObject.qSelections;if(void 0!==t)return s.getApp().then(function(e){e.getDimension(t).then(function(t){t.getDimension().then(function(t){var i=t.qFieldDefs[0].replace("=","");e.getField(i).then(function(e){return e.selectExcluded().then(function(){r.length>0&&r.forEach(function(e){n.currApp().field(e.qField).clear()})})})})})});n.currApp().field(e).selectExcluded().then(function(){r.length>0&&r.forEach(function(e){n.currApp().field(e.qField).clear()})});i.publish("selection/insights/close");a.trackEvent(a.customEvents.SELECT_POSSIBLE_CLICKED,{type:"clicked"})};this.selectPossible=function(){var e=l.selectedInsight.dimension;var t=this.selectedInsight.dimensionId;l.showing={table:false,excluded:false};var r=l.layout.qSelectionObject.qSelections;if(void 0!==t)return s.getApp().then(function(e){e.getDimension(t).then(function(t){t.getDimension().then(function(t){var i=t.qFieldDefs[0].replace("=","");e.getField(i).then(function(e){return e.selectPossible().then(function(){r.length>0&&r.forEach(function(e){n.currApp().field(e.qField).clear()})})})})})});n.currApp().field(e).selectPossible().then(function(){r.length>0&&r.forEach(function(e){n.currApp().field(e.qField).clear()})});i.publish("selection/insights/close");a.trackEvent(a.customEvents.SELECT_POSSIBLE_CLICKED,{type:"clicked"})};this.isLabelContained=function(e){var t=427;var n=55;var i=e/100*t;return n<i};this.isLabelSmall=function(e){var t=427;var n=65;var i=e/100*t;return n<i};this.getNegativeMeasureText=function(){return r.get("SelectionInsights.MeasureNegative",[l.selectedInsight.measureAggregation[0].toUpperCase()+l.selectedInsight.measureAggregation.slice(1),l.selectedInsight.measure,l.selectedInsight.dimension])};this.getNegativeMeasurePossible=function(){return r.get("SelectionInsights.MeasureNegativePossible",[l.selectedInsight.measureAggregation[0].toUpperCase()+l.selectedInsight.measureAggregation.slice(1),l.selectedInsight.measure,l.selectedInsight.dimension,"<span>"+l.selectedInsight.measureBreakdown.included.num+"</span>"])};this.getNegativeMeasureExcluded=function(){return r.get("SelectionInsights.MeasureNegativeExcluded",[l.selectedInsight.measureAggregation[0].toUpperCase()+l.selectedInsight.measureAggregation.slice(1),l.selectedInsight.measure,l.selectedInsight.dimension,"<span>"+l.selectedInsight.measureBreakdown.excluded.num+"</span>"])};this.$onDestroy=function(){i.unsubscribe("selection/insights/details/updated");i.unsubscribe("selection/insights/measure/cancel");i.unsubscribe("selection/insights/updated");i.unsubscribe("selection/insights/fields/change");i.unsubscribe("selection/insights/details/negative")}}],template:t})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-selections-insights-details" ng-show="$ctrl.showInsightDetails">\n\t<div class="main-details-wrapper" ng-class="{\'disabled\': $ctrl.refreshActive}">\n\t\t<div ng-if="$ctrl.refreshActive" class="gray-overlay"></div>\n\t\t<div class="current-selections-container" ng-show="!$ctrl.cardIsInsight">\n\t\t\t<div class="current-selections-container-inner">\n\t\t\t\t<qv-selection-insights-current selected-insight="$ctrl.selectedInsight" back-to-selections="$ctrl.backToSelections()"></qv-selection-insights-current>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="details-container" ng-show="$ctrl.cardIsInsight">\n\t\t\t<div class="details-container-inner">\n\t\t\t\t<div class="closeBtn">\n\t\t\t\t\t<button tid="back-to-selection-button" class="lui-button" ng-click="$ctrl.backToSelections()" q-translation="SelectionInsights.BackToSelections">\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="details-body">\n\t\t\t\t\t<div class="title details-title">\n\t\t\t\t\t\t<span tid="insight-details-title" ng-bind-html="$ctrl.detailsTitle"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div tid="insight-details-summary" class="detail-summary" ng-bind-html="$ctrl.selectedInsight.summaryStringLong"></div>\n\t\t\t\t\t<div class="qv-titles-and-bars">\n\t\t\t\t\t\t<div class="bars-titles">\n\t\t\t\t\t\t\t<div class="title-container longer" q-title-translation="{{ $ctrl.selectedInsight.dimension }}">\n\t\t\t\t\t\t\t\t<div tid="insights-with-selection-title" class="title-longer">\n\t\t\t\t\t\t\t\t\t{{ $ctrl.selectedInsight.dimension }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div tid="insight-with-selections-bar-total" class="bar-total" q-translation="SelectionInsights.CountBarTotal, {{$ctrl.selectedInsight.counts.excluded + $ctrl.selectedInsight.counts.included}}" title="{{$ctrl.countBarTotal()}}"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="title-container">\n\t\t\t\t\t\t\t\t<div tid="insights-without-selection-title" class="title-longer" q-translation="SelectionInsights.MeasureBarTitle, {{$ctrl.selectedInsight.measureAggregation[0].toUpperCase() + $ctrl.selectedInsight.measureAggregation.slice(1)}}, {{$ctrl.selectedInsight.measure}}"\n\t\t\t\t\t\t\t\t\ttitle="{{$ctrl.selectionInsightsMeasureBarTitle()}}"></div>\n\t\t\t\t\t\t\t\t<div tid="insight-without-selections-bar-total" class="bar-total" q-translation="SelectionInsights.SelectionsBarTotal, {{$ctrl.selectedInsight.selectedMeasure.total}}" title="{{$ctrl.selectionsBarTotal()}}"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="bars-container negative-chart" ng-show="$ctrl.selectedInsight.isMeasureNegative && !$ctrl.showing.table">\n\t\t\t\t\t\t\t<div class="val-dist">\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="legend-dist">\n\t\t\t\t\t\t\t\t<div class="possible-legend">\n\t\t\t\t\t\t\t\t\t<div class="square">\n\t\t\t\t\t\t\t\t\t\t<div class="white-square"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="legend-label" tid="possible-chart-legend" q-translation="SelectionInsights.Possible" q-title-translation="{{SelectionInsights.Possible}}"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="excluded-legend">\n\t\t\t\t\t\t\t\t\t<div class="square">\n\t\t\t\t\t\t\t\t\t\t<div class="gray-square"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="purple-square"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="legend-label" tid="excluded-chart-legend" q-translation="SelectionInsights.Excluded" q-title-translation="{{SelectionInsights.Excluded}}"></div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="measure-dist">\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="bars-container" ng-show="!$ctrl.selectedInsight.isMeasureNegative && !$ctrl.showing.table">\n\t\t\t\t\t\t\t<div class="value-bar" ng-class="{\'negative\': $ctrl.selectedInsight.isMeasureNegative}">\n\t\t\t\t\t\t\t\t<div tid="insight-with-selections-included-bar" class="bar included" ng-style="{height: ($ctrl.getPercentage(\'included\') /100) * 427 + \'px\'}">\n\t\t\t\t\t\t\t\t\t<div tid="insight-with-selections-included-measure-value" class="label" ng-style="{top: ($ctrl.getPercentage(\'included\')/100) * 427 + 5 + \'px\'}"\n\t\t\t\t\t\t\t\t\t\tng-class="{\'overlay-top\': !$ctrl.isLabelContained($ctrl.getPercentage(\'included\')), \'small\': !$ctrl.isLabelSmall($ctrl.getPercentage(\'included\'))}">\n\t\t\t\t\t\t\t\t\t\t{{ $ctrl.selectedInsight.counts.included }}\n\t\t\t\t\t\t\t\t\t\t<div tid="insight-with-selections-included-measure-percentage" class="percentage">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.getPercentageLocalized(\n\t\t\t\t\t\t\t\t\t\t\t"included"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div tid="insight-with-selections-excluded-bar" class="bar excluded" ng-style="{height: ($ctrl.getPercentage(\'excluded\') / 100) * 427 + \'px\'}">\n\t\t\t\t\t\t\t\t\t<div tid="insight-with-selections-excluded-measure-value" class="label" ng-style="{bottom: ($ctrl.getPercentage(\'excluded\')/100) * 427 + 5 + \'px\'}"\n\t\t\t\t\t\t\t\t\t\tng-class="{\'overlay-bottom\': !$ctrl.isLabelContained($ctrl.getPercentage(\'excluded\')), \'small\': !$ctrl.isLabelSmall($ctrl.getPercentage(\'excluded\'))}">\n\t\t\t\t\t\t\t\t\t\t{{ $ctrl.selectedInsight.counts.excluded }}\n\t\t\t\t\t\t\t\t\t\t<div tid="insight-with-selections-excluded-measure-percentage" class="percentage">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.getPercentageLocalized(\n\t\t\t\t\t\t\t\t\t\t\t"excluded"\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="connectors" ng-if="!$ctrl.selectedInsight.isMeasureNegative">\n\t\t\t\t\t\t\t\t<div class="svg-container">\n\t\t\t\t\t\t\t\t\t<svg width="215" height="429"></svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="possible-label" q-translation="SelectionInsights.PossibleValues"></div>\n\t\t\t\t\t\t\t\t<div class="excluded-label" q-translation="SelectionInsights.ExcludedValues"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="measure-bar excluded-insight" ng-if="!$ctrl.selectedInsight.isMeasureNegative">\n\t\t\t\t\t\t\t\t<div tid="insight-without-selections-included-bar" class="bar included" ng-style="{height: ($ctrl.selectedInsight.measureBreakdown.included.percentage/100) * 427 + \'px\'}">\n\t\t\t\t\t\t\t\t\t<div tid="insight-without-selections-included-measure-value" class="label" ng-style="{top: ($ctrl.selectedInsight.measureBreakdown.included.percentage/100) * 427 + 5 + \'px\'}"\n\t\t\t\t\t\t\t\t\t\tng-class="{\'overlay-top\': !$ctrl.isLabelContained($ctrl.selectedInsight.measureBreakdown.included.percentage), \'small\': !$ctrl.isLabelSmall($ctrl.selectedInsight.measureBreakdown.included.percentage)}">\n\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t$ctrl.selectedInsight.measureBreakdown\n\t\t\t\t\t\t\t\t\t\t.included.num\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t<div tid="insight-without-selections-included-measure-percentage" class="percentage">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.getLocalizedPercentage(\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.selectedInsight\n\t\t\t\t\t\t\t\t\t\t\t.measureBreakdown.included\n\t\t\t\t\t\t\t\t\t\t\t.percentage / 100\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div tid="insight-without-selections-excluded-bar" class="bar excluded" ng-style="{height: ($ctrl.selectedInsight.measureBreakdown.excluded.percentage/100) * 427 + \'px\'}">\n\t\t\t\t\t\t\t\t\t<div tid="insight-without-selections-excluded-measure-value" class="label" ng-style="{bottom: ($ctrl.selectedInsight.measureBreakdown.excluded.percentage/100) * 427 + 5 + \'px\'}"\n\t\t\t\t\t\t\t\t\t\tng-class="{\'overlay-bottom\': !$ctrl.isLabelContained($ctrl.selectedInsight.measureBreakdown.excluded.percentage), \'small\': !$ctrl.isLabelSmall($ctrl.selectedInsight.measureBreakdown.excluded.percentage)}">\n\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t$ctrl.selectedInsight.measureBreakdown\n\t\t\t\t\t\t\t\t\t\t.excluded.num\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t<div tid="insight-without-selections-excluded-measure-percentage" class="percentage">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.getLocalizedPercentage(\n\t\t\t\t\t\t\t\t\t\t\t$ctrl.selectedInsight\n\t\t\t\t\t\t\t\t\t\t\t.measureBreakdown.excluded\n\t\t\t\t\t\t\t\t\t\t\t.percentage / 100\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="bars-container" style="display: block" ng-show="$ctrl.showing.table">\n\t\t\t\t\t\t\t<div class="table-container" ng-class="{\'possible\': !$ctrl.showing.excluded}">\n\t\t\t\t\t\t\t\t<qv-object tabindex="-1" class="cell-content" model="$ctrl.selectedInsight.table" options="$ctrl.celloptions"></qv-object>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="toggle-values" ng-class="{\'show-table\': !$ctrl.showing.table}">\n\t\t\t\t\t\t\t<button tid="show-table-button" ng-if="!$ctrl.showing.table" class="lui-button show-table--button" ng-click="$ctrl.showTable(true)">\n\t\t\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--table"></span><span class="lui-button__text" q-translation="SelectionInsights.ShowValues"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button tid="show-table-button" ng-if="!$ctrl.showing.excluded && $ctrl.showing.table" class="lui-button show-vis--button" ng-click="$ctrl.toggleShowTableExcluded(true)">\n\t\t\t\t\t\t\t\t<span class="lui-button__text" q-translation="SelectionInsights.ViewExcluded"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button tid="show-table-button" ng-if="$ctrl.showing.excluded && $ctrl.showing.table" class="lui-button show-vis--button" ng-click="$ctrl.toggleShowTableExcluded(false)">\n\t\t\t\t\t\t\t\t<span class="lui-button__text" q-translation="SelectionInsights.ViewPossible"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button tid="show-table-button" ng-if="$ctrl.showing.table" class="lui-button show-vis--button" ng-click="$ctrl.showTable(false)">\n\t\t\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--back"></span><span class="lui-button__text" q-translation="SelectionInsights.ShowVisualization"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="insight-summary-footer">\n\t\t\t\t<div class="help-text" ng-bind-html="$ctrl.selectionHelp"></div>\n\t\t\t\t<div class="btns" ng-if="!$ctrl.hasLockedSelections">\n\t\t\t\t\t<button tid="select-possible-button" class="lui-button selection-btn" ng-click="$ctrl.selectPossible()" q-translation="Selections.Possible"></button>\n\t\t\t\t\t<button tid="select-excluded-button" class="lui-button selection-btn" ng-click="$ctrl.selectExcluded()" q-translation="Selections.Excluded"></button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(48),n(96),n(866),n(91),n(95),n(234),n(220)],r=function(e,t,n,i,r,a){e.nativeComponent("qvSelectionInsightsCurrent",{bindings:{selectedInsight:"<",backToSelections:"&"},controller:["$scope","qvSelectionInsightsService","qvChartTooltipService","$timeout",function(e,n,s,l){var c=this,u,d=false;this.items=[];this.app=null;this.model=null;this.selectionsTitle="";this.measure="";this.selectionsCaption="";this.selectionsBarTotal="";r.subscribe("selection/insights/current-selection",function(e){c.items=n.getSelectionItems(e)});r.subscribe("selection/insights/current/open",function(e){var t={measure:e.insight.measure,aggr:e.insight.measureAggregation,dimension:e.insight.dimension,contribution:e.insight.selectedMeasure.selected.percentage.toFixed(1)};var n=e.insight.isSelectionNegative?e.insight.selectedMeasure.selected.num:e.insight.selectedMeasure.selected.percentage.toFixed(1)+"%";c.measure=t.measure;c.selectionsTitle=i.get("SelectionInsights.SelectionsContributionsTitle","<strong>"+t.measure.substring(0,40)+"</strong>");c.selectionsCaption=i.get("SelectionInsights.SelectionContributionCaption",["<span>"+t.measure.substring(0,40)+"</span>","<span>"+n+"</span>","<span>"+(t.aggr[0].toUpperCase()+t.aggr.slice(1))+"</span>"]);a.selectAll(".negative-chart.select-measure-dist svg").remove();if(e.insight.isSelectionNegative){var r=[{name:"selected",value:e.insight.selectedMeasure.selected.qNum,label:e.insight.selectedMeasure.selected.num},{name:"excluded",value:e.insight.selectedMeasure.excluded.qNum,label:e.insight.selectedMeasure.excluded.num}];f(r)}});function f(e){var t=431;var n=120;var i=10;var r=".negative-chart.select-measure-dist";var o=45;var s=30;var l=a.select(".negative-chart"+r).append("svg").attr("width",n+o).attr("height",t+o);var c=l.append("g").attr("transform","translate("+i/2+",1)");var u=a.scale.ordinal().rangeRoundBands([0,n]);var d=a.scale.linear().range([t,0]);u.domain(e.map(function(e){return e.name}));d.domain(a.extent(e,function(e){return e.value}));var f=c.append("defs");f.append("filter").attr("id","blur").append("feGaussianBlur").attr("stdDeviation",5);f.append("pattern").attr("id","diagonalStripes").attr("patternUnits","userSpaceOnUse").attr("width",8).attr("height",8).attr("patternTransform","rotate(45)").append("rect").attr("width","2").attr("height","8").attr("fill","#4dc753");c.selectAll("bar").data(e).enter().append("rect").style("fill","rgba(0,0,0,0.1)").attr("x",function(e){return u(e.name)}).attr("width",u.rangeBand()).attr("y",function(e){return e.value>0?d(e.value):d(0)}).attr("height",function(e){return Math.abs(d(e.value)-d(0))}).attr("filter","url(#blur)").attr("rx",3).attr("ry",3);c.selectAll("bar").data(e).enter().append("rect").style("fill",function(e){return"selected"==e.name?"#6cd475":"#D8D8D8"}).style("stroke",function(e){return"selected"==e.name?"#37B342":"#959595"}).attr("x",function(e){return u(e.name)}).attr("width",u.rangeBand()).attr("y",function(e){return e.value>0?d(e.value):d(0)+1}).attr("height",function(e){return Math.abs(d(e.value)-d(0))}).attr("rx",3).attr("ry",3);c.selectAll("bar").data(e).enter().append("rect").style("fill",function(e){return"selected"==e.name?"#6cd475":"#D8D8D8"}).attr("x",function(e){return u(e.name)}).attr("width",u.rangeBand()).attr("y",function(e){return e.value>0?d(e.value)-3:d(0)+1}).attr("height",2);var p=l.append("g").attr("class","barLabels").attr("transform","translate("+i/2+",0)");e.forEach(function(e,t){c.append("line").style("stroke","selected"==e.name?"#37B342":"#959595").attr("x1",u(e.name)).attr("y1",function(){return e.value>0?d(e.value):d(0)}).attr("x2",u(e.name)).attr("y2",function(){return e.value>0?d(e.value)-3:d(0)+3});t>0&&c.append("line").style("stroke","selected"==e.name?"#37B342":"#959595").attr("x1",u(e.name)+60).attr("y1",function(){return e.value>0?d(e.value):d(0)}).attr("x2",u(e.name)+60).attr("y2",function(){return e.value>0?d(e.value)-3:d(0)+3});"selected"==e.name&&c.append("rect").attr("x",function(){return u(e.name)}).attr("width",u.rangeBand()).attr("y",function(){return e.value>0?d(e.value):d(0)}).attr("height",function(){return Math.abs(d(e.value)-d(0))}).attr("stroke","#504A9E").attr("stroke-width","0").attr("rx",3).attr("ry",3).attr("fill","url(#diagonalStripes)");var n=p.append("g");n.append("rect").attr("x",function(){return u(e.name)}).attr("width",u.rangeBand()).attr("height",2).attr("y",function(){return e.value>0?d(e.value):d(0)}).attr("opacity",0);n.append("text").attr("x",u(e.name)+s).attr("y",function(){return e.value>0?d(e.value)+20:Math.abs(d(e.value)-d(0))<s?Math.abs(d(e.value)-d(0))+d(0)+20:Math.abs(d(e.value)-d(0))+d(0)-10}).attr("text-anchor","middle").attr("class","grouped-bar-label").text(e.label).attr("fill",function(){var t="#414141";"selected"==e.name&&(t=Math.abs(d(e.value)-d(0))<s?"#2F9938":"#FFFFFF");return t})});l.append("g").attr("class","x axis").append("line").attr("y1",d(0)).attr("y2",d(0)).attr("x2",n+i).attr("stroke","#404040").attr("stroke-width","3");var h=l.append("text").attr("x",n+2*i).attr("y",d(0)-28).attr("text-anchor","left").style("font-size","22px").attr("fill","#B3B3B3");h.append("tspan").attr("dx",0).attr("dy",4).text("+");h.append("tspan").attr("dx",-13).attr("dy",30).attr("fill","#404040").text("0");h.append("tspan").attr("dx",-10).attr("dy",30).text("-")}c.selectionsBarTotal=function(){if(c.selectedInsight&&c.selectedInsight.selectedMeasure.total)return i.get("SelectionInsights.SelectionsBarTotal",[c.selectedInsight.selectedMeasure.total])};this.getLocalizedPercentage=function(e){return n.getLocalizedPercentage(e)};this.getSeparatorPos=function(){if(void 0!==c.items&&null!==c.selectedInsight&&void 0!==c.selectedInsight){var e=56;var t=427;if(c.selectedInsight.isSelectionNegative){var n=c.selectedInsight.selectedMeasure.selected.qNum;var i=c.selectedInsight.selectedMeasure.excluded.qNum;var r=0;t=431;var o=55;r=n<0?t-Math.abs(n)/2/((Math.abs(n)+i)/t):n/2/((Math.abs(i)+n)/t);return r+o}var a=38;var s=10;var l=(c.items.length*a+(c.items.length-1)*s)/2;var u=c.selectedInsight.selectedMeasure.selected.percentage/100*t/2;return e+Math.min(l,u)}};this.isLabelContained=function(e){var t=427;var n=55;var i=e/100*t;return n<i};this.getLabelFontSize=function(e){var t=427;var n=65;var i=e/100*t;return n<i?"24px":"36px"};this.getNegativeMeasureText=function(){return i.get("SelectionInsights.SelectionNegative",[c.selectedInsight.measureAggregation[0].toUpperCase()+c.selectedInsight.measureAggregation.slice(1),c.selectedInsight.measure])};function p(e){var t=e.qStateCounts;var n="";"object"===o(t)&&(n=" ("+(t.qSelected+t.qSelectedExcluded+t.qLocked+t.qLockedExcluded)+"/"+e.qTotal+")");return n}e.openTooltip=function(n,i){if(d||t.utils.touch)return;e.cancelTooltip();u=l(function(){d=true;var e=i.translation;var t=p(i);s.open({content:[{header:(i.qReadableName||i.qField)+t,rows:[{content:e}]}],position:{x:n.clientX,y:n.clientY},alwaysOnTop:true,direction:"bottom",template:"current-selections-tooltip-template.ng.html"})},500)};e.closeTooltip=function(){d=false;e.cancelTooltip();s.close()};e.cancelTooltip=function(){l.cancel(u)};this.getNegativeMeasurePossible=function(){return i.get("SelectionInsights.SelectionNegativePossible",[c.selectedInsight.measureAggregation[0].toUpperCase()+c.selectedInsight.measureAggregation.slice(1),c.selectedInsight.measure,"<span>"+c.selectedInsight.measureBreakdown.included.num+"</span>"])};this.getNegativeMeasureExcluded=function(){return i.get("SelectionInsights.SelectionNegativeExcluded",[c.selectedInsight.measureAggregation[0].toUpperCase()+c.selectedInsight.measureAggregation.slice(1),c.selectedInsight.measure,"<span>"+c.selectedInsight.measureBreakdown.excluded.num+"</span>"])};this.isLabelSmall=function(e){var t=427;var n=65;var i=e/100*t;return n<i};this.getVerticalHeight=function(){if(void 0!==c.items&&null!==c.selectedInsight&&void 0!==c.selectedInsight)return c.selectedInsight.isSelectionNegative?431:40*c.items.length+11*(c.items.length-1)};this.$onDestroy=function(){r.unsubscribe("selection/insights/current-selection");r.unsubscribe("selection/insights/current/open")}}],template:n})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="closeBtn">\n\t<button tid="back-to-selection-button" class="lui-button" ng-click="$ctrl.backToSelections()" q-translation="SelectionInsights.BackToSelections"></button>\n</div>\n<div class="details-body">\n\t<div class="title current-selection-title">\n\t\t<span tid="selection-details-title" ng-bind-html="$ctrl.selectionsTitle"></span>\n\t</div>\n\t<div class="current-selection-caption">\n\t\t<div tid="selections-caption" ng-bind-html="$ctrl.selectionsCaption"></div>\n\t</div>\n\t<div class="current-selection-details">\n\t\t<div class="field-list">\n\t\t\t<div tid="selections-fields-title" class="fields-title" q-translation="SelectionInsights.YourSelections" q-title-translation="{{ SelectionInsights.YourSelections }}"></div>\n\t\t\t<div class="fields-items">\n\t\t\t\t<ul class="list" ng-show="$ctrl.items.length > 0">\n\t\t\t\t\t<li class="item" tid="selection-insight-details-user-selections" ng-class="{\'item-multi-state\': !item.isSingleState, \'multi-active\': multiPopoverFieldName && multiPopoverFieldName === item.qField}" ng-repeat="item in $ctrl.items track by item.qField" data-csid="{{ item.qField }}" tabindex="0"\n\t\t\t\t\t ng-keydown="handleKeyDown($event, item)" aria-label="{{ item.screenReaderLabel }}">\n\t\t\t\t\t\t<qv-current-selections-item ng-if="item.isSingleState" item="item"></qv-current-selections-item>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="separator" ng-class="{\'negative\': $ctrl.selectedInsight.isSelectionNegative}">\n\t\t\t<div class="legend-dist" ng-if="$ctrl.selectedInsight.isSelectionNegative">\n\t\t\t\t<div class="selected-legend">\n\t\t\t\t\t<div class="square">\n\t\t\t\t\t\t<div class="green-square"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="legend-label" tid="selected-chart-legend" q-translation="SelectionInsights.Selected" q-title-translation="{{ SelectionInsights.Selected }}"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="excluded-legend">\n\t\t\t\t\t<div class="square">\n\t\t\t\t\t\t<div class="gray-square"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="legend-label" tid="excluded-chart-legend" q-translation="SelectionInsights.Excluded" q-title-translation="{{ SelectionInsights.Excluded }}"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="vertical" ng-style="{height: $ctrl.getVerticalHeight() + \'px\'}"></div>\n\t\t\t<div class="horizontal" ng-style="{\'margin-top\': $ctrl.getSeparatorPos() + \'px\'}"></div>\n\t\t</div>\n\t\t<div class="chart">\n\t\t\t<div tid="selections-bar-title" class="bar-title" q-translation="SelectionInsights.SelectionsBarTitle, {{\n\t\t\t\t\t$ctrl.measure\n\t\t\t\t}}" q-translation-title="SelectionInsights.SelectionsBarTitle, {{\n\t\t\t\t\t$ctrl.measure\n\t\t\t\t}}"></div>\n\t\t\t<div tid="selections-bar-total" class="bar-total" title="{{ $ctrl.selectionsBarTotal() }}">\n\t\t\t\t{{ $ctrl.selectionsBarTotal() }}\n\t\t\t</div>\n\t\t\t<div class="bar selected" ng-if="!$ctrl.selectedInsight.isSelectionNegative" ng-style="{height: ($ctrl.selectedInsight.selectedMeasure.selected.percentage/100) * 427 + \'px\'}">\n\t\t\t\t<div tid="selected-measure-number" class="label" ng-style="{top: ($ctrl.selectedInsight.selectedMeasure.selected.percentage/100) * 427 + 5 + \'px\'}" ng-class="{\'overlay-top\': !$ctrl.isLabelContained($ctrl.selectedInsight.selectedMeasure.selected.percentage), \'small\': !$ctrl.isLabelSmall($ctrl.selectedInsight.selectedMeasure.selected.percentage)}">\n\t\t\t\t\t{{ $ctrl.selectedInsight.selectedMeasure.selected.num }}\n\t\t\t\t\t<div tid="selected-measure-percentage" class="percentage">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t$ctrl.getLocalizedPercentage(\n\t\t\t\t\t\t$ctrl.selectedInsight.selectedMeasure.selected\n\t\t\t\t\t\t.percentage / 100\n\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="bar excluded" ng-if="!$ctrl.selectedInsight.isSelectionNegative" ng-style="{height: ($ctrl.selectedInsight.selectedMeasure.excluded.percentage/100) * 427 + \'px\'}">\n\t\t\t\t<div tid="excluded-measure-number" class="label" ng-style="{bottom: ($ctrl.selectedInsight.selectedMeasure.excluded.percentage/100) * 427 + 5 + \'px\'}" ng-class="{\'overlay-bottom\': !$ctrl.isLabelContained($ctrl.selectedInsight.selectedMeasure.excluded.percentage), \'small\': !$ctrl.isLabelSmall($ctrl.selectedInsight.selectedMeasure.excluded.percentage)}">\n\t\t\t\t\t{{ $ctrl.selectedInsight.selectedMeasure.excluded.num }}\n\t\t\t\t\t<div tid="excluded-measure-percentage" class="percentage">\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t$ctrl.getLocalizedPercentage(\n\t\t\t\t\t\t$ctrl.selectedInsight.selectedMeasure.excluded\n\t\t\t\t\t\t.percentage / 100\n\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="negative-chart select-measure-dist" ng-show="$ctrl.selectedInsight.isSelectionNegative"></div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(868),n(95),n(869),n(147),n(106),n(103),n(870)],r=function(e,t,n,i,r,o,a){e.nativeComponent("qvSelectionInsightsSummary",{bindings:{showLoading:"<",hasSelection:"<",measure:"=",newMeasureChosen:"=",newSelection:"=",showFields:"<",selectionInsightsState:"=",states:"=",measureError:"="},controller:["$scope","$timeout","luiPopover","qvSelectionInsightsService","qvSelectionInsightsSearchService",function(e,t,s,l,c){var u=this;this.showLoading=true;var d=[];this.fieldList=[];this.showFieldsChanged=false;this.currentMeasure=u.measure;function f(){t(function(){var e=document.getElementsByClassName("ai-change-field-input");e[0].focus()},100)}this.showChangeField=function(e){var t=["$scope",function(e){function t(t){var n=e.highlight;var i=c.getMatchingFields(t,n);e.measures=i.filter(function(e){return!e.masterItemMeasures});e.masterMeasures=i.filter(function(e){return e.masterItemMeasures})}function n(n){e.highlight=n;t(u.fieldList)}e.filterFields=n;e.onSelectMeasure=b;e.navigate=y;t(u.fieldList)}];p(i,t,e.currentTarget,"bottom",h)};function p(e,t,n,i,r){var o={template:e,controller:t,dock:i,alignTo:n,showArrow:true,autoFocus:false};var a=s.show(o);d.push(a);a.closed.then(function(){"function"===typeof r&&r()});f()}function h(){d.forEach(function(e,t){e.close();d.splice(t,1)})}function v(){l.getMeasures(u.showFields).then(function(e){u.fieldList=e})}function g(){r.getList().then(function(t){e.masterMeasuresListModel=t});o(e,"masterMeasuresListModel",function(){v()})}g();this.refreshInsights=function(){n.publish("selection/insights/refresh");u.newMeasureChosen=false;u.newSelection=false;u.showFieldsChanged&&m();return l.getInsightDimensions(u.showFields,u.selectedMeasure).then(function(e){n.publish("selection/insights/new",e);u.currentMeasure=u.measure}).catch(function(e){n.publish("selection/insights/error",e.error)})};this.$onChanges=function(e){if(void 0!==e.showFields&&!e.showFields.isFirstChange()){u.showFieldsChanged=true;u.newMeasureChosen=false;n.publish("selection/insights/fields/change")}};function m(){l.getMeasures(u.showFields).then(function(e){u.showFieldsChanged=false;u.fieldList=e})}n.subscribe("selection/insights/show",function(){u.showFieldsChanged&&m()});function b(e){u.newMeasureChosen=true;u.newSelection=false;u.measureError=false;u.selectedMeasure=e;u.measure=e.qName;h();a.trackEvent(a.customEvents.NEW_MEASURE_CHOSEN,{type:"clicked"});u.refreshInsights()}function y(e){b(e)}}],template:t})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-selections-insights-cards-summary" ng-class="{\'empty\': $ctrl.showLoading}">\n\t<div ng-if="!$ctrl.showLoading">\n\t\t<div class="summary-text" ng-if="!$ctrl.newMeasureChosen && !$ctrl.newSelection && !$ctrl.showFieldsChanged">\n\t\t\t<span q-translation="SelectionInsights.SummarySelection"> </span>\n\t\t</div>\n\t\t<div class="measure-select">\n\t\t\t<div class="refresh-insights-new-selection" ng-if="!$ctrl.newMeasureChosen && ($ctrl.newSelection || $ctrl.showFieldsChanged) ">\n\t\t\t\t<p class="refresh-insights-paragraph" q-translation="SelectionInsights.Refresh.NewSelection"></p>\n\t\t\t\t<div class="refresh-insights--button-group">\n\t\t\t\t\t<button class="lui-button  lui-button--success refresh-insights--button onlyOne" q-translation="SelectionInsights.Refresh" ng-click="$ctrl.refreshInsights()"></button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<h2 q-translation="Common.Measure"></h2>\n\t\t\t<p q-translation="SelectionInsights.CalculatedOn"></p>\n\t\t\t<button tid="ai-measure-picker" class="ai-measure-picker lui-button" id="ai-measure-picker" ng-click="$ctrl.showChangeField($event)" tabindex="0" ng-disabled="$ctrl.showFieldsChanged || $ctrl.newSelection">\n\t\t\t\t<span class="ai-measure-picker-text">{{ $ctrl.measure }}</span><span class="lui-icon lui-button__icon small lui-icon--small" ng-class="{\'lui-icon--arrow-down\' : !match.expanded, \'lui-icon--arrow-up\': match.expanded}"></span>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="measure-error" ng-if="$ctrl.measureError" q-translation="SelectionInsights.ErrorNaN"></div>\n\t</div>\n</div>\n<div class="hr-div">\n\t<hr class="qv-selection-insights-hr" ng-if="$ctrl.selectionInsightsState === $ctrl.states.INSIGHTS_FOUND" />\n</div>'},function(e,t){e.exports='<lui-popover class="ai-change-field-popover ai-popover">\n\t<object-add-typeahead>\n\t\t<lui-popover-header>\n\t\t\t<div class="lui-input-group">\n\t\t\t\t<input class="lui-input lui-input-group__input ai-change-field-input" type="text" autocomplete="off" ng-model="search.term" qva-focus="autoFocus" ng-change="filterFields(search.term)" maxlength="255" object-add-typeahead-input />\n\t\t\t</div>\n\t\t</lui-popover-header>\n\t\t<div class="lui-popover__body lui-nopad popover-body" object-add-typeahead-menu>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<div ng-if="masterMeasures.length > 0" class="object-add-popover-list-header" q-translation="Common.MasterMeasures"></div>\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="field in masterMeasures" ng-click="onSelectMeasure(field)" on-select="navigate(field)" object-add-typeahead-item="field">\n\t\t\t\t\t<span class="lui-list__text" qve-highlight text="{{ field.qName }}" query="highlight"></span>\n\t\t\t\t</li>\n\n\t\t\t\t<div ng-if="measures.length > 0" class="object-add-popover-list-header" q-translation="Common.Measures"></div>\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="field in measures" ng-click="onSelectMeasure(field)" on-select="navigate(field)" object-add-typeahead-item="field">\n\t\t\t\t\t<span class="lui-list__text" qve-highlight text="{{ field.qName }}" query="highlight"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\n\t\t\t<div class="no-hits" ng-if="fieldList.length === 0">\n\t\t\t\t<span><i q-translation="Toolbox.Search.Nohits" /></span>\n\t\t\t</div>\n\t\t</div>\n\t</object-add-typeahead>\n</lui-popover>'},function(e,t,n){"use strict";var i,r;!(i=[n(54),n(48),n(112)],r=function(e,t,n){t.service("qvSelectionInsightsSearchService",[function(){var t;function i(t,i){var r=[];var o;i?i=i?i.toLowerCase():"":i&&""!==i||(o=true);if(o)return t;r=e.uniq(t).filter(function(e){return n.librarySearchFn(e,i)});return n.localeOrderBy(r,function(e){return e.qName})}t={getMatchingFields:function e(t,n){return i(t,n)}};return t}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(872),n(873),n(306)],r=function(e,t,n){e.directive("qvGlobalSearch",function(){return{restrict:"E",template:t,controller:["$scope","$document","$element","$window",n],require:["qvGlobalSearch"],scope:true,replace:true,link:function e(){}}});return"<qv-global-search></qv-global-search>"}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div>\n\t<div class="qv-global-search" ng-class="{ \'overlay\': displaySuggestions || displayResult.data || displayResult.visuals }" ng-style="{paddingTop: toolbarHeight}" qva-outside="onOutsideSearch($event)" tid="globalSearch">\n\t\t<div class="zoomed-chart" ng-class="{\'animate-expand \': animateZoomedChart, \'animate-shrink\': !animateZoomedChart}">\n\t\t\t<div class="close-btn" ng-if="zoomedChart" tid="smartsearch-zoomed-chart">\n\t\t\t\t<button class="lui-fade-button" ng-click="minimizeExpandedChart()" tid="smartSearchExitZoomedChart">\n\t\t\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--close lui-icon--large"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="chart" ng-if="zoomedChart">\n\t\t\t\t<qv-object tid="smartsearch-zoomed-chart-object" model="zoomedChart.model" options="zoomedChart.options"></qv-object>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<qv-global-search-input class="qv-global-search-input"></qv-global-search-input>\n\t\t<div class="qv-global-search-line" ng-if="!showMobileIndexProgressBar"></div>\n\t\t<qv-mobile-index-progress ng-if="isSmallDevice && query.length === 0 && isIndexClosedFeature"></qv-mobile-index-progress>\n\t\t<qv-global-search-history ng-if="isSearchHistoryFeature && searchInputFocused && query.length === 0"></qv-global-search-history>\n\t\t<div class="qv-global-search-dimmer" ng-if="query.length > 0 || forceShowDimmer" ng-style="dimmerStyles">\n\t\t\t<qv-global-search-result tid="globalSearch.ResultList"></qv-global-search-result>\n\t\t\t<div ng-show="scrollShow && !activity.show" class="scroll-affordance scroll-vertical"></div>\n\t\t</div>\n\t</div>\n\t<div class="qv-global-search-glass" ng-if="query.length > 0" qva-activate="close();"></div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(113),n(108),n(97),n(106),n(143),n(874),n(110),n(227),n(50),n(128),n(99),n(881),n(882),n(883),n(884),n(885),n(49),n(89),n(91),n(95),n(105),n(222),n(887),n(890),n(901),n(903),n(905),n(908),n(169),n(175)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v,g,m,b,y,x,S,w,q){function C(e,t,n,i){var r={qOffset:t,qCount:n,qGroupOptions:[],qGroupItemOptions:[]};if(e===h.data){r.qGroupOptions.push({qGroupType:"DatasetType",qOffset:0,qCount:-1});r.qGroupItemOptions.push({qGroupItemType:"Field",qOffset:0,qCount:i})}else if(e===h.visuals){r.qGroupOptions.push({qGroupType:"GenericObjectsType",qOffset:0,qCount:30});r.qGroupItemOptions.push({qGroupItemType:"GenericObject",qOffset:0,qCount:i})}return r}function _(e){var t={qContext:"CurrentSelections"};e&&(t.qCharEncoding="Utf16");return t}function I(e,t){e.dimmerStyles["max-height"]=t;e.dimmerStyles["height"]=t}function E(e){e.isSmallDeviceLandscape=u.orientation===u.Orientation.landscape&&u.isSmallDevice}function D(D,A,T,O){var k=t.getService("qvGlobalSearchDataService"),L=t.getService("$timeout"),P=t.getService("qvGlobalSelectionsService"),M=t.getService("qvGlobalSearchService"),N,R={search:{idCounter:0,requestState:p.idle,searchTerms:""},searchVisuals:{idCounter:0,requestState:p.idle,searchTerms:""},result:{requestState:p.idle},suggest:{idCounter:0,requestState:p.idle,suggestTerms:""}},F=function e(){L(function(){D.isSmallDevice=u.isSmallDevice;D.isSmallDevice&&(D.forceShowDimmer=false);E(D);V=H();j()})},$=function e(){D.isSmallDeviceLandscape=u.orientation===u.Orientation.landscape&&u.isSmallDevice;E(D);V=H();j()},j=function e(){I(D,A.find("body").height()-V)},H=function e(){return T.offset().top+T[0].offsetTop+T.find(".qv-global-search-input").outerHeight()},V=H(),B=T.parent().parent(),z=this;D.inClient=i.inClient();D.zoomedChart=false;D.focusState=new v(new g(v,this,D),v.Input);N=new s(T,D,this);D.forceShowDimmer=false;D.isSmallDevice=u.isSmallDevice;D.isSmallDeviceLandscape=u.orientation===u.Orientation.landscape&&u.isSmallDevice;D.showMobileIndexProgressBar=false;D.isObjectsFeature=n["SMARTSEARCH_OBJECTS"]&&D.inClient&&(D.isSmallDevice||D.options&&D.options.objectSearchIsOn);D.isSearchHistoryFeature=n["SEARCH_HISTORY"];D.isIndexClosedFeature=n["SMARTSEARCH_INDEX_CLOSE"];D.suggestedChartExpanded=null;S.subscribe(w.Events.PubSub.ExpandSmartSearchSuggestedChart,function(e){D.zoomedChart=e;D.animateZoomedChart=Boolean(e);D.suggestedChartExpanded=Boolean(e);e&&D.isSmallDevice&&q.resizeCharts(O)});S.subscribe(w.Events.PubSub.RestoreSearchState,function(){if(D.suggestedChartExpanded){D.query=D.suggestedChartExpanded;z.setQueryFromHistory()}});D.minimizeExpandedChart=function(){D.suggestedChartExpanded=null;S.publish(w.Events.PubSub.ExpandSmartSearchSuggestedChart,null)};if(D.isSearchHistoryFeature){a.userId?D.userID=a.userId:D.userID="DESKTOP";D.searchInputFocused=false;D.activeHistoryIx=-1;D.historyPermission=false;D.searchHistory=m.initHistory(D)}u.ViewChanged.bind(F);u.OrientationChanged.bind($);r.on("end",j);D.input="input goes here";D.result="result goes here";D.isSelectActiveInSmallDevice=false;D.$on("$destroy",function(){T.off("qv-outside");N.delete();u.ViewChanged.unbind(F);u.OrientationChanged.unbind($);r.off("end",j);S.unsubscribe(w.Events.PubSub.ExpandSmartSearchSuggestedChart);S.unsubscribe(w.Events.PubSub.RestoreSearchState)});D.$on("updateForceShowDimmer",function(e,t){D.forceShowDimmer=t});D.$watch("throbber.show",function(e){e&&D.focusState.reset()});D.app.getCurrentSelectionObject().then(function(e){D.modelSelections=e});o(D,"modelSelections",function(e){var t=e.qSelectionObject.qSelections,n;n=t.reduce(function(e,t){return e+(true===t.qLocked)?1:0},0);D.currentSelections=t.length>0;D.allSelectionsLocked=t.length===n;D.isObjectsFeature&&z.searchVisuals(D.searchTerms);z.search(D.searchTerms)});D.$watch("app.isModal()",function(e){e&&L(function(){M.toggleGlobalSearch(D.app)})});D.$watch(P.isSelectActive.bind(null,D.app),function(e){D.isSelectActiveInSmallDevice=e&&D.isSmallDevice});D.$watch("query",function(e){M.setHaveQuery(D.app,!!e)});if(D.isIndexClosedFeature&&!D.isSmallDevice&&M.couldEngineBeIndexing(D.app)){D.forceShowDimmer=true;L(function(){D.$broadcast("toggleActivityIndicator",true)})}D.underlines=[];D.query="";D.searchTerms=[];D.searchTermGroups=[];D.matches=[];D.displayResult={data:false,visuals:false};D.activity={show:false};D.throbber={show:false};D.indexProgress={enabled:false,show:false,visible:false};D.indexDone={show:false,visible:false};D.activeSelectIx=-1;D.showMeMoreFocus=false;D.forcePartials=false;D.allSelectionsLocked=false;D.dimmerStyles={};D.error={show:false,message:"",description:""};D.paging={lastRowIx:0,totalRows:0};D.searchOutsideSelections=function(){z.searchOutsideSelections()};D.onShowMoreHits=function(e,t,n){e.stopPropagation();if(t.disableShowMore)return;I(D,T.find(".qv-global-search-dimmer").height());t.disableShowMore=true;t.mobileExpand=true;var i=C(h.data,n,1,t.qItemMatches.length+15);z.callSearch(D.searchTerms,i).then(function(e){k.showMore(e,t)}).finally(function(){t.disableShowMore=false})};D.getSearchTermGroup=function(e){return D.searchTermGroups.filter(function(t){return t.qSearchTermsMatched.length===e})};D.close=function(){z.closeSearch()};T.on("qv-outside",U);function U(t){var n=e(t.target);if(1===n.closest(".qv-selections-pager").length||1===n.closest(".transparent-overlay-scroll").length)return;z.closeSearch()}D.suggestions=[];D.displaySuggestions=false;D.activeSuggestionIx=-1;D.ignoreQueryChange=false;D.onOutsideSearch=function(){D.isSearchHistoryFeature&&z.showHistory(false)};D.onSuggestSelect=function(e,t){var n,i,r=[];if(!t){e=void 0!==e?e:D.activeSuggestionIx;t=D.suggestions[e]}k.getUnderlinersAndSearchTerms(D.query,r,[]);n=k.getResultingQueryFromSuggestion(r,t);if(n.length>255){N.off();c.showDialog({message:"ErrorDialog.SearchStringTooLong"});i=D.$on("errorHandlerClosed",function(){N.on();i()})}else{D.query=n+" ";D.ignoreQueryChange=false}z.hideSuggestions();D.$broadcast("focusInput");D.getInsightsCharts(t.value)};D.haveUnlockedSelections=function(){return D.currentSelections&&!D.allSelectionsLocked};D.getInsightsCharts=function(e){if(b.getFlag("CAO_MOBILE")){var n=t.getService("qvCaoChartService");if(D.query){D.unableTofetchInsightCharts=false;D.fetchingInsightChartsPending=true;n.getInsights(D.app,e).then(function(e){var t=[].concat(e.recommendations).concat(e.chartMatches);var n=t.map(function(e){return e.visualization.loadChart(D.app)});y.all(n).then(function(e){t=t.map(function(t,n){t=Object.assign({},t,{itemIndex:n,load:true,qItemType:"GenericObject",qTotalNumberOfMatches:0,qIdentifier:e[n].model.id,qItemMatches:[],qTermsMatched:[],qSearchTermsMatched:[]});return t});if(t.length>0){D.suggestedChartGroupTitle=x.get("GlobalSearch.Insight.ChartsTitle",[t.length]);D.insightVisualsGroups=[{qGroupType:"GenericObjectsType",qid:0,qItems:t,insightCharts:true,qSearchTermsMatched:[0],qTotalNumberOfItems:t.length}]}D.fetchingInsightChartsPending=false})},function(){D.unableTofetchInsightCharts=true;D.insightVisualsGroups=[];D.fetchingInsightChartsPending=false})}else D.insightCharts=[]}};this.hideSuggestions=function(){if(D.displaySuggestions){D.displaySuggestions=false;this.resetSuggestions()}};this.hideSoftKeyboard=function(){D.$broadcast("blurInput")};this.showNoResultsMessage=function(){return false};this.searchOutsideSelections=function(){D.outsideSelection=true;D.modelSelections.clearAll();D.$broadcast("focusInput")};this.setShowPartialMatches=function(){D.forcePartials=!D.forcePartials;f.treatAsDesktop()&&D.$broadcast("focusInput")};D.isPartials=function(){return D.searchTermGroups.length&&D.searchTerms.length>D.searchTermGroups[0].qSearchTermsMatched.length};this.resetSuggestions=function(){D.activeSuggestionIx=-1;D.activeSelectIx=-1};this.showSuggestions=function(){D.displaySuggestions=true;D.activeSuggestionIx=-1;D.activeSelectIx=-1};this.showError=function(e){D.displayResult={data:false,visuals:false};D.error.show=true;D.error.translation="ErrorCode."+e.code;e.isHandled=true};this.toogleSuggestions=function(e){e?this.showSuggestions():this.hideSuggestions()};this.emptyResult=function(){D.insightVisualsGroups=[];D.displayResult={data:false,visuals:false};D.activeSelectIx=-1;D.error.show=false;R.search.requestState=p.idle;R.searchVisuals.requestState=p.idle;R.suggest.requestState=p.idle;D.searchTerms=[];D.searchTermGroups=[];D.searchVisualsGroups=[];D.matches=[];D.outsideSelection=false;D.$broadcast("toggleActivityIndicator",false);D.forcePartials=false;D.focusState.reset();this.hideSuggestions();B.removeClass("queryon")};this.moveActiveResult=function(e){D.showMeMoreFocus=false;if(0===e)return;if(e>0){D.activeSelectIx=Math.min(D.activeSelectIx+1,D.searchTermGroups.length);D.activeSelectIx=Math.min(D.activeSelectIx,D.paging.totalRows-1);D.activeSelectIx===D.searchTermGroups.length&&(D.showMeMoreFocus=true)}else e<0&&(D.activeSelectIx=Math.max(D.activeSelectIx-1,0))};this.searchVisuals=function(e){if(!D.isObjectsFeature)return;I(D,A.find("body").height()-V);if(0===e.length)return;R.searchVisuals.idCounter=R.searchVisuals.idCounter+1;var t=R.searchVisuals.idCounter,n=this,i={qAttributes:["qProperty"],qCharEncoding:"Utf16"},r=C(h.visuals,0,-1,20);R.searchVisuals.requestState=p.pending;R.searchVisuals.searchTerms=e;function o(e){D.searchVisualsGroups=[];if(t===R.searchVisuals.idCounter&&R.searchVisuals.requestState===p.pending){R.searchVisuals.requestState=p.idle;R.searchVisuals.searchTerms="";k.transformResult(D,e)}}function a(e){if(e.code===l.NxLocalizedErrorCode.LOCERR_SEARCH_TIMEOUT){n.emptyResult();n.showError(e)}if(e.code===l.NxLocalizedErrorCode.LOCERR_GENERIC_ABORTED)return;R.searchVisuals.requestState=p.idle;R.searchVisuals.searchTerms="";D.displayResult.visuals=false}D.app[h.visuals](i,e,r).then(o,a)};this.search=function(e){I(D,A.find("body").height()-V);D.focusState.reset();if(0===e.length)return;B.addClass("queryon");R.search.idCounter=R.search.idCounter+1;var t=R.search.idCounter,n=this,i=C(h.data,0,5,5);R.search.requestState=p.pending;R.search.searchTerms=e;D.$broadcast("toggleActivityIndicator",true);D.$broadcast("resultScrollToTop");function r(n){D.searchTermGroups=[];D.matches=[];if(t===R.search.idCounter&&R.search.requestState===p.pending){R.search.requestState=p.idle;R.search.searchTerms="";D.searchTerms=e;D.$broadcast("toggleActivityIndicator",false,true);D.$broadcast("resultScrollToTop");k.transformResult(D,n);D.activeSelectIx=-1;D.paging.lastRowIx=D.searchTermGroups.length;D.paging.totalRows=n.qTotalNumberOfGroups}}function o(e){if(e.code===l.NxLocalizedErrorCode.LOCERR_SEARCH_TIMEOUT){n.emptyResult();n.showError(e)}if(e.code===l.NxLocalizedErrorCode.LOCERR_GENERIC_ABORTED)return;R.search.requestState=p.idle;R.search.searchTerms="";D.displayResult.data=false}D.error.show=false;this.callSearch(e,i).then(r,o)};this.loadNextPage=function(){I(D,T.find(".qv-global-search-dimmer").height());var e=C(h.data,D.paging.lastRowIx,5,5),t=this;if(R.result.requestState!==p.idle)return;R.result.requestState=p.pending;D.showMeMoreFocus=false;D.$broadcast("toggleActivityIndicator",true);function n(e){R.result.requestState=p.idle;D.$broadcast("toggleActivityIndicator",false,true);k.transformResult(D,e);D.paging.lastRowIx=D.searchTermGroups.length}function i(){if(i.code===l.NxLocalizedErrorCode.LOCERR_SEARCH_TIMEOUT){t.emptyResult();t.showError(i)}if(i.code===l.NxLocalizedErrorCode.LOCERR_GENERIC_ABORTED)return;R.search.requestState=p.idle;R.search.searchTerms="";D.displayResult.data=false}this.callSearch(D.searchTerms,e).then(n,i)};this.callSearch=function(e,t){return D.app[h.data](_(true),e,t)};this.closeSearch=function(){if(D.isSmallDevice){z.emptyResult();D.query="";D.$broadcast("blurInput")}else M.toggleGlobalSearch(D.app)};this.suggest=function(e){if(0===e.length)return;var t=this;R.suggest.idCounter=R.suggest.idCounter+1;var n=R.suggest.idCounter;R.suggest.requestState=p.pending;R.suggest.suggestTerms=e;function i(e){if(b.getFlag("CAO_MOBILE")){var i=e.qFieldNames.map(function(e){return{qValue:e,qTerm:0}});e.qSuggestions=e.qSuggestions.concat(i)}R.suggest.suggestTerms="";if(k.isWhiteSpaceAt(D.query,D.query.length-1)||'"'===D.query.charAt(D.query.length-1))return;if(n===R.suggest.idCounter&&R.suggest.requestState===p.pending){k.transformSuggest(D,e,10);t.toogleSuggestions(D.suggestions.length>0);D.$broadcast("suggestShow",true,true)}R.suggest.requestState=p.idle}function r(e){e.code===l.NxLocalizedErrorCode.LOCERR_SEARCH_TIMEOUT&&(e.isHandled=true);if(e.code===l.NxLocalizedErrorCode.LOCERR_GENERIC_ABORTED)return;R.suggest.requestState=p.idle;R.suggest.suggestTerms=""}D.app.searchSuggest({},e).then(i,r)};this.select=function(e,t){D.$broadcast("blurInput");if(0===e.length||0===D.searchTermGroups.length)return;if(t<0){t=0;D.activeSelectIx=0}var n=[],i=[];k.getUnderlinersAndSearchTerms(D.query,n,i);var r=i;D.app.selectAssociations(_(),e,t).then(function(){D.isSearchHistoryFeature&&D.historyPermission&&m.createEntryInHistory(D,r)});this.emptyResult();D.query="";f.treatAsDesktop()&&!D.isSearchHistoryFeature&&D.$broadcast("focusInput")};this.setTestSearchTermGroups=function(e){D.searchTermGroups=e};this.onNavigateToSheet=function(e){var t=[],n=[];k.getUnderlinersAndSearchTerms(D.query,t,n);D.isSearchHistoryFeature&&D.historyPermission&&""!=D.query&&m.createEntryInHistory(D,n);if(f.treatAsDesktop()){z.emptyResult();D.query="";D.isSearchHistoryFeature?D.$broadcast("blurInput"):D.$broadcast("focusInput")}else L(function(){z.emptyResult();D.query=""},200);d.highlightedCell(e)};this.showMoreHitsForVisual=function(e){var t={qOffset:0,qCount:1,qGroupOptions:[{qGroupType:"GenericObjectsType",qOffset:e.itemIndex,qCount:1}],qGroupItemOptions:[{qGroupItemType:"GenericObject",qOffset:0,qCount:e.qItemMatches.length+15}]};return D.app[h.visuals]({qAttributes:["qProperty"]},D.searchTerms,t).then(function(t){k.showMore(t,e);return e})};this.showHistory=function(e){D.searchInputFocused=e};this.setQueryFromHistory=function(e){D.ignoreQueryChange=false;e>=0&&(D.query=D.searchHistory[e]);this.showHistory(false);D.$broadcast("focusInput");b.getFlag("CAO_MOBILE")&&D.query&&D.getInsightsCharts(D.query)};this.clearHistory=function(){m.clearSearchHistory(D);this.showHistory(false)};this.removeHistory=function(e){m.removeSingleHistory(D,e)}}return D}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(184),n(49),n(221)],r=function(e,t,n){function i(i,r,o){var a,s,l=i.find("input")[0],c=e.getService("$document");a={preventDefault:false,allowInInput:true,delay:0};s={preventDefault:false,allowInInput:true,delay:75};r.focusState.ActiveStateChanged.bind(u);function u(){r.activeSelectIx=r.focusState.activeStateName===r.focusState.Results?0:-1;r.activeHistoryIx=r.focusState.activeStateName===r.focusState.History?0:-1;r.activeSuggestionIx=r.focusState.activeStateName===r.focusState.Suggestions?0:-1;r.activeVisualIx=r.focusState.activeStateName===r.focusState.Visuals?0:-1;r.$broadcast(r.focusState.activeStateName===r.focusState.Visuals?"visualsGroupFocus":"visualsGroupBlur")}function d(){return"INPUT"===c[0].activeElement.tagName}function f(){t.preventDefault();e.$rootScope.$apply()}function p(e){var t,n,i;if(document.selection&&document.selection.createRange){t=document.selection.createRange();n=t.getBookmark();i=n.charCodeAt(2)-2}else e.setSelectionRange&&(i=e.selectionStart);return i===e.value.length}function h(){d()?r.focusState.activeStateName===r.focusState.Suggestions?o.hideSuggestions():r.query?r.query="":r.close():r.close();f()}function v(){if(r.focusState.activeStateName===r.focusState.Suggestions){r.activeSuggestionIx=r.activeSuggestionIx>0?r.activeSuggestionIx-1:r.suggestions.length-1;f()}else if(r.focusState.activeStateName===r.focusState.Visuals){r.$broadcast("visualsGroupMoveActiveVisual",-1);f()}}function g(){if(r.focusState.activeStateName===r.focusState.Suggestions){r.activeSuggestionIx=(r.activeSuggestionIx+1)%r.suggestions.length;f()}else if(r.focusState.activeStateName===r.focusState.Visuals){r.$broadcast("visualsGroupMoveActiveVisual",1);f()}}function m(){var e=r.focusState.activeStateName;r.focusState.previous();if(e===r.focusState.activeStateName)switch(r.focusState.activeStateName){case r.focusState.History:r.activeHistoryIx=Math.max(-1,r.activeHistoryIx-1);break;case r.focusState.Results:o.moveActiveResult(-1);break}f()}function b(){var e=r.focusState.activeStateName;r.focusState.next();if(e===r.focusState.activeStateName)switch(r.focusState.activeStateName){case r.focusState.History:r.activeHistoryIx=Math.min(r.activeHistoryIx+1,r.searchHistory.length-1);break;case r.focusState.Results:o.moveActiveResult(1);break}f()}function y(e){switch(r.focusState.activeStateName){case r.focusState.History:o.setQueryFromHistory(r.activeHistoryIx);break;case r.focusState.Input:r.isPartials()?o.setShowPartialMatches():r.displaySuggestions?x(e,true):r.displayResult.data?n.getFlag("CAO_MOBILE")||o.select(r.searchTerms,0):o.showNoResultsMessage()&&r.haveUnlockedSelections()&&o.searchOutsideSelections();break;case r.focusState.Suggestions:x(e,true);break;case r.focusState.Visuals:r.$broadcast("selectActiveVisualItem");break;case r.focusState.Partials:o.setShowPartialMatches();break;case r.focusState.Results:r.showMeMoreFocus?o.loadNextPage():o.select(r.searchTerms,r.activeSelectIx);break;case r.focusState.StartNewSearch:o.searchOutsideSelections();break}n.getFlag("CAO_MOBILE")&&r.query&&r.getInsightsCharts(r.query);f()}function x(e,t){if(r.displaySuggestions&&(t||p(l))){r.activeSuggestionIx=-1===r.activeSuggestionIx?0:r.activeSuggestionIx;r.onSuggestSelect()}f()}function S(){o.closeSearch();f()}this.keyboardShortcutsGroup=t.createGroup("global-search-"+r.app.id,1);this.keyboardShortcutsGroup.registerKeys("esc",h,a);this.keyboardShortcutsGroup.registerKeys("left",v,s);this.keyboardShortcutsGroup.registerKeys("right",g,s);this.keyboardShortcutsGroup.registerKeys("up",m,s);this.keyboardShortcutsGroup.registerKeys("down",b,s);this.keyboardShortcutsGroup.registerKeys("enter",y,a);this.keyboardShortcutsGroup.registerKeys("tab",x,a);this.keyboardShortcutsGroup.registerKeys("ctrl+f",S,a);this.keyboardShortcutsGroup.on();this.on=function(){this.keyboardShortcutsGroup.on()};this.off=function(){this.keyboardShortcutsGroup.off()};this.delete=function(){this.keyboardShortcutsGroup.delete();r.focusState.ActiveStateChanged.unbind(u)}}return i}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(91)],r=function(e){function t(e){return e.libId?e.libIdLabel?e.libIdLabel:"Unknown master item":e.aggr?e.aggr+"("+e.field+")":e.field}function n(n,i){var r=i.filter(function(e){return void 0!==e}).length;var o=n&&n.filter(function(e){return Object.keys(e.msgParams).length===r});var a=null;o&&o.forEach(function(e){if(e.msgParams){var t=e.msgParams;var n=Object.keys(t);var r=true;n.forEach(function(e){var t=i.some(function(t){return t.slot&&t.slot===e});t||(r=false)});r&&(a=e)}});if(!a)return"";var s=[void 0,void 0,void 0,void 0,void 0];Object.keys(a.msgParams).forEach(function(e){var n=i.filter(function(t){return t.slot===e})[0];var r=t(n);s[a.msgParams[e]]=r});return e.get(a.msgId,s)}return{findTitleForChart:n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(89)],r=function(e){function t(e,t,n,i){this.chartId=e;this.searchReport=n;this.app=i;this.type="found";this.analysisPrecedentId="found";this.appearsOnSheets=t}t.prototype.getTitle=function(){var t=new e;this.app.getObject(this.chartId).then(function(e){e.getLayout().then(function(e){t.resolve(e.title)})});return t.promise};t.prototype.getMatchDetails=function(){var e=[];var t=this.chartId;if(this.searchReport.search){var n=this.searchReport.search["chartFinder-Title"].searchHits;Object.keys(n).forEach(function(i){if(i.includes(t)){var r=n[i].matchingTypes;r.forEach(function(t){e.push({matchedOn:n[i].title,matchedField:t})})}})}return e};t.prototype.getChartType=function(){var t=new e;this.app.getObject(this.chartId).then(function(e){e.getLayout().then(function(e){t.resolve(e.visualization)})});return t.promise};t.prototype.loadChart=function(t){var n=new e;t.getObject(this.chartId).then(function(e){e.getProperties().then(function(t){n.resolve({model:e,options:{interactionState:0,showTitles:false},properties:t})})});return n.promise};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(54),n(1097),n(1098),n(1114),n(1116),n(1119),n(878),n(199)],r=function(e,t,n,i,r,o,a,s){return{generateAlternativeChartProperties:c,generateDefaultChartProperties:u,generateChartPropertiesForRecommendation:d};function l(i,s,l,c){return r.createDataCollection(l,i).then(function(l){var u=r.adaptDataCollectionForRecommendations(l,s.qHyperCube);return t.getChartRecommendations(u).then(function(r){var u=[];var d=!e.isArray(r);d&&(r=[]);var f=r.some(function(e){return"list"===e.analysis.analysis});if(!f){var p=t.getFallbackRecommendation(l);r.push(p)}r.forEach(function(t){var r=o.merge(s.qHyperCube,i.qHyperCubeDef,l,t);var a=n.findChartsByAnalysis(t,r);n.createChartDataProperties(t,a).forEach(function(t){var n=e.findWhere(u,{type:t.type});if(n){if(t.score&&(!n.score||t.score>n.score)){var i=u.indexOf(n);u[i]=t}}else u.push(t)})});if(c){var h=a.getSupportedChartTypes().slice().filter(function(e){var t=true;for(var n=0;n<u.length;n++)if(u[n].type===e){t=false;break}return t});var v=o.merge(s.qHyperCube,i.qHyperCubeDef,l,r[0]);var g=n.findPossibleCharts(h,v);n.createChartDataProperties(r[0],g).forEach(function(e){u.push(e)})}return{recommendations:r,allChartDataProperties:u}})})}function c(e,t,n,r){return l(e,t,n,r).then(function(t){if(s.CRE_CHARTS){var r={recommendations:t.recommendations,allChartDataProperties:t.allChartDataProperties};console.log(r)}t.allChartDataProperties.length>1&&t.allChartDataProperties.sort(function(e,t){return t.score-e.score});return t.allChartDataProperties.map(function(t){return i.generateProperties(t,e,n)})})}function u(e,t,n,r){return l(e,t,n,r).then(function(t){var r=t.allChartDataProperties;r.length>1&&r.sort(function(e,t){return t.score-e.score});var o=r[0];e&&e.preferredChart&&r.forEach(function(t,n){t.type===e.preferredChart&&(o=r[n])});return i.generateProperties(o,e,n).then(function(e){if(s.CRE_CHARTS){var n={recommendations:t.recommendations,allChartDataProperties:r,bestChartDataProperties:o,chartProperties:e};console.log(n)}return e})})}function d(t,r){var a=[];var l=[t];var c=l.some(function(e){return"list"===e.analysis.analysis});if(!c){var u={analysis:{analysis:"list",dims:t.analysis.dims,msrs:t.analysis.msrs}};l.push(u)}l.forEach(function(t){var i=o.collectFromRecommendation(t);var r=n.findChartsByAnalysis(t,i);n.createChartDataProperties(t,r).forEach(function(t){var n=e.findWhere(a,{type:t.type});if(n){if(t.score&&(!n.score||t.score>n.score)){var i=a.indexOf(n);a[i]=t}}else a.push(t)})});a.length>1&&a.sort(function(e,t){return t.score-e.score});var d=a[0];return i.generateProperties(d,void 0,r).then(function(e){if(s.CRE_CHARTS){var t={recommendations:l,allChartDataProperties:a,bestChartDataProperties:d,chartProperties:e};console.log(t)}return e})}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(54),n(1099),n(1100),n(1101),n(1102),n(1103),n(1104),n(1105),n(1106),n(1107),n(1108),n(1109),n(1110),n(1111),n(1112)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h){function v(e){g[e.type]=e}var g={};v(n);v(i);v(o);v(a);v(s);v(l);v(c);v(u);v(d);v(f);v(p);v(r);v(t);v(h);function m(){var t=e.keys(g);if(y)return e.filter(t,function(e){return y.indexOf(e)>=0});return t}function b(e){return g[e]}var y=void 0;function x(e){y=e}return{getSupportedChartTypes:m,getChartDataDefinition:b,restrictSupportedChartTypes:x}}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(48),n(92),n(404),n(128),n(89),n(367),n(49),n(114),n(123),n(196)],r=function(e,t,n,i,r,o,a,s,l,c){var u=t.extend("CaoChartUiModel",{init:function t(n,i){this.app=i;this.zoomed=false;this.ObjectPlacementService=e.getService("qvObjectPlacementService");this.CaoChartService=e.getService("qvCaoChartService");this.$timeout=e.getService("$timeout");this.chart=n;this.object={};this.zoomedObject={};this.options={};this.zoomedOptions={};this.state="READY";this.modified=false;this.chartTypeImageUrl=void 0;this.chartType=void 0;this.rendered=false;this.renderedCount=0;this.insightFeedback=a.getFlag("CE_PRECEDENTS");this.interaction=true},updateState:function e(t){this.state=t},isHidden:function e(){if(this.isFound())return false;return this.insightFeedback&&this.chart.visualization.visualization.analysis.precedents&&this.chart.visualization.visualization.analysis.precedents.disliked||this.chart.invalidFromLearning},isRendered:function e(){return this.rendered},isFound:function e(){return"found"===this.chart.visualization.type},isGenerated:function e(){return"generated"===this.chart.visualization.type},isModified:function e(){return this.modified},setState:function e(t){this.state=t},setModified:function e(t){this.modified=t},setType:function e(t){this.chart.visualization.type=t},refreshChartType:function e(){var t=this;t.chart.visualization.getChartType().then(function(e){t.chartType=e;t.chartTypeImageUrl=n.getImageNameFromChartType(e)})},getTitle:function e(){return this.chart.visualization.getTitle().then(function(e){return e})},getComplexity:function e(){return this.chart.complexity},getRelevance:function e(){return this.chart.relevance},getMatchRecord:function e(){return this.chart.visualization.visualization.matchRecord},getState:function e(){return this.state},getModel:function e(){return this.chart.model},getObject:function e(){return this.zoomed?this.zoomedObject:this.object},getAnalysisPrecedentId:function e(){return this.chart.visualization.analysisPrecedentId},getMatchDetails:function e(){return this.chart.visualization.getMatchDetails()},getSheetsThisChartAppearsOn:function e(){return this.chart.visualization.appearsOnSheets},getMatches:function e(){return this.chart.visualization.visualization.matchRecord.matches},getFields:function e(){return this.getMatches().filter(function(e){return!e.slotRole})},getMeasures:function e(){return this.getMatches().filter(function(e){return e.slotRole===c.MEASURE})},getDimensions:function e(){return this.getMatches().filter(function(e){return e.slotRole===c.DIMENSION})},getChartType:function e(){return this.chart.visualization.visualization.analysis.analysis},getSearchReport:function e(){return this.chart.visualization.searchReport},getAnalysis:function e(){return this.chart.visualization.visualization.analysis},isObjectInvalid:function e(){return this.zoomed?this.zoomedObject.invalid:this.object.invalid},isViewDataToggled:function e(){return this.zoomed?this.zoomedObject.viewDataToggled:this.object.viewDataToggled},isDataViewSupported:function e(){return this.zoomed?this.zoomedObject.supportViewData&&this.zoomedObject.supportViewData():this.object.supportViewData&&this.object.supportViewData()},toggleDataView:function e(){if(this.zoomed)return this.zoomedObject.toggleDataView();return this.object.toggleDataView()},activateSelectionWatch:function e(t){this.object.selectionsApi.watchActivated(t)},deactivateSelectionWatch:function e(t){this.object.selectionsApi.watchDeactivated(t)},adaptChart:function e(t){var n=this;return this.CaoChartService.adaptRecommendation(n.chart.visualization.visualization,n.app).then(function(e){n.chart.visualization=new o({analysis:e.analysis,matchRecord:e.matchRecord},n.chart.visualization.searchReport,e.properties);delete n.rendered;n.isViewDataToggled()?n.toggleDataView().then(function(){n.shouldRedraw=true}):n.shouldRedraw=true;n.recalculateConfidence=t})},addToNewSheet:function e(){var t=this;return t.chart.model.getProperties().then(function(e){return t.ObjectPlacementService.addToNewSheet(e).then(function(e){t.setType("found");t.chart.visualization.appearsOnSheets.push(e.id);return e})})},addToSheet:function e(t){var n=this;return n.chart.model.getProperties().then(function(e){return n.ObjectPlacementService.addObjectToSheet(e,t,i.getModel()).then(function(e){n.setType("found");n.chart.visualization.appearsOnSheets.push(e.id);return e})})},setChartInteraction:function e(t){if(this.zoomed&&this.zoomedObject&&this.interaction!==t){this.interaction=t;t?this.zoomedObject.on():this.zoomedObject.off()}},setChartInteractionState:function e(t){this.options.interactionState=t},destroyChart:function e(){var t=this;if(t.zoomed){t.zoomed=false;return}if("LOADING"===t.state||"LOADED"===t.state){if(!t.rendered&&t.object&&t.object.subscription){t.rendered=false;t.object.cancel()}t.isGenerated()&&t.chart.model&&t.chart.model.id&&!t.zoomed?t.app.destroySessionObject(t.chart.model.id).then(function(){t.rendered=false;t.state="READY"}):t.state="READY"}},initializeOptions:function e(){this.options={};this.zoomedOptions={};this.options.isReadonly=false;this.options.isPopover=false;this.options.selectionsDisabled=true;this.options.interactionState=l.STATIC;this.options.direction=s.direction;this.zoomedOptions.isReadonly=false;this.zoomedOptions.isPopover=false;this.zoomedOptions.selectionsDisabled=false;this.zoomedOptions.interactionState=l.ANALYSIS;this.zoomedOptions.direction=s.direction},loadChart:function e(t){var n=this;var i=new r;var o;if(n.rendered){n.setState("LOADED");t();i.resolve()}else{n.initializeOptions();var a=n.chart.model?n.app.destroySessionObject(n.chart.model.id):r.when({});a.then(function(){n.chart.visualization.loadChart(n.app).then(function(e){n.object&&n.object.type&&(n.object.type=null);n.zoomedObject&&n.zoomedObject.type&&(n.zoomedObject.type=null);n.chart.model=e.model;n.state="LOADED";function r(){o&&n.$timeout.cancel(o)}var a=function e(){if(n.zoomed){n.renderedCount++;if(n.renderedCount<2)return}n.renderedCount=0;n.rendered=true;t&&t();n.state="LOADED";r();i.resolve()};n.options.onRendered=a;n.zoomedOptions.onRendered=a;var s=function e(){r();i.resolve()};n.options.onCanceled=s;n.zoomedOptions.onCanceled=s;o=n.$timeout(function(){if(!n.allowLongLoad&&!n.rendered&&n.object&&n.object.subscription){n.object.subscription.cancel();n.zoomedObject&&n.zoomedObject.subscription&&n.zoomedObject.subscription.cancel();n.state="MANUAL_LOAD";i.resolve()}},n.chart.suggestedTimeout)},function(){i.resolve()})})}return i.promise}});return u}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={};Object.defineProperties(e,{idle:{value:0},pending:{value:1}});return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={};Object.defineProperties(e,{data:{value:"searchResults"},visuals:{value:"searchObjects"},indexProgress:{value:"GetProgress"}});return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(102)],r=function(e){function t(n,i){var r=n[i];if(!(this instanceof t))throw new Error("FocusState needs to be called with the new keyword");if(!r)throw new Error("Invalid initialStateName provided");e.mixin(this);this.notification("ActiveStateChanged");Object.defineProperties(this,{initialState:{value:r},activeState:{configurable:true,value:r},activeStateName:{configurable:true,value:r.name}})}t.prototype.next=function(){var e=this.activeState;if(e.onBeforeNext&&!e.onBeforeNext())return;var t=e.next();while(t){if(!t.onBeforeEnter||t.onBeforeEnter()){n(this,t);return}t=t.next()}};t.prototype.previous=function(){var e=this.activeState;if(e.onBeforePrevious&&!e.onBeforePrevious())return;var t=e.previous();while(t){if(!t.onBeforeEnter||t.onBeforeEnter()){n(this,t);return}t=t.previous()}};t.prototype.reset=function(){n(this,this.initialState)};i(t,"Input");i(t,"Suggestions");i(t,"History");i(t,"Partials");i(t,"Visuals");i(t,"SuggestedCharts");i(t,"Results");i(t,"StartNewSearch");function n(e,t){Object.defineProperties(e,{activeState:{value:t},activeStateName:{value:t.name}});e.ActiveStateChanged.emit()}function i(e,t){var n={value:t};Object.defineProperty(e,t,n);Object.defineProperty(e.prototype,t,n)}return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e,i,r){var o={};n(o,e.Input,{previous:function e(){return false},onBeforeNext:function e(){return!r.throbber.show},next:t.bind(o,e.Suggestions)});n(o,e.Suggestions,{onBeforeEnter:function e(){return!!r.displaySuggestions},previous:t.bind(o,e.Input),next:t.bind(o,e.History)});n(o,e.History,{onBeforeEnter:function e(){return r.isSearchHistoryFeature&&r.searchInputFocused&&0===r.query.length},onBeforeNext:function e(){return false},onBeforePrevious:function e(){return 0===r.activeHistoryIx},previous:t.bind(o,e.Suggestions),next:t.bind(o,e.Visuals)});n(o,e.Visuals,{onBeforeEnter:function e(){return r.isObjectsFeature&&r.displayResult.visuals&&!r.isSmallDeviceLandscape},previous:t.bind(o,e.History),next:t.bind(o,e.Partials)});n(o,e.Partials,{onBeforeEnter:function e(){return!!r.displayResult.data&&r.isPartials()},previous:t.bind(o,e.Visuals),next:t.bind(o,e.Results)});n(o,e.Results,{onBeforeEnter:function e(){return!!r.displayResult.data&&(!r.isPartials()||r.forcePartials)},onBeforeNext:function e(){return false},onBeforePrevious:function e(){return 0===r.activeSelectIx},previous:t.bind(o,e.Partials),next:t.bind(o,e.StartNewSearch)});n(o,e.StartNewSearch,{onBeforeEnter:function e(){return i.showNoResultsMessage()&&r.haveUnlockedSelections()},previous:t.bind(o,e.Results),next:function e(){return false}});return o}function t(e){var t=this[e];if(!t)throw new Error("Invalid stateName provided");return t}function n(e,t,n){if(e[t])throw new Error("State with name '"+t+"' already exists");n.name=t;e[t]=n}return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(54),n(886)],r=function(e,t){function n(e){return e.app.id+"."+e.userID+".smartSearch.history"}function i(e){e.storage=s(e);if("NONE"==e.storage)return;var t=n(e);if(e.storage.contains(t)){var i=h(e.storage.get(t));return i}}function r(e,t){var i=n(e),r=[],o=[];if(e.storage.contains(i)){r=e.storage.get(i);o=l(t);var a=c(o,r);var s=h(a);e.storage.set(i,a);e.searchHistory=s}else{o=l(t);r.unshift(o);e.storage.set(i,r);var u=h(r);e.searchHistory=u}}function o(e){var t=n(e);if(e.storage.contains(t)){e.searchHistory=[];e.storage.remove(t)}}function a(e,t){var i=n(e);if(e.storage.contains(i)){var r=e.storage.get(i);r.splice(t,1);e.storage.set(i,r);var o=h(r);e.searchHistory=o}}function s(e){if("DESKTOP"==e.userID){e.historyPermission=true;return t}if(e.userID&&"anonymous"!=e.userID.substring(0,9)){e.historyPermission=true;return t}e.historyPermission=false;return"NONE"}function l(e){return e.map(function(e){return e.startQuote&&e.endQuote?e.string='"'+e.string+'"':e.string})}function c(e,t){var n=d(t);var i=f(e);var r=p(n,i);var o=[];if(r>=0){t.splice(r,1);t.unshift(e);o=u(t)}else{t.unshift(e);o=u(t)}return o}function u(e){e.length>4&&(e.length=4);return e}function d(e){function t(e){return e.toLowerCase()}return e.map(function(e){return e.map(t)})}function f(e){return e.map(function(e){return e.toLowerCase()})}function p(t,n){for(var i=0;i<t.length;i++)if(e.isEqual(t[i],n))return i}function h(e){return e.map(function(e){return e.join(" ")})}return{initHistory:i,createEntryInHistory:r,clearSearchHistory:o,removeSingleHistory:a,getStoragePath:n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(54),n(118)],r=function(e,t){var n="sessionstorageservice";function i(t){if(!e.isString(t))throw new Error('The key "'+t+'" is not a String.');return n+"."+t}function r(t,n,r){var o=(new Date).getTime(),a,s;if(!e.isString(t))throw new Error('The key "'+t+'" is not a String.');if(!e.isObject(n))throw new Error('The value "'+n+'" for the key "'+t+'" is not valid object.');if(r){if(!e.isNumber(r))throw new Error('The time to live value "'+r+'" is not numeric.');r+=o}s={timeToLive:r,value:n};a=JSON.stringify(s);sessionStorage[i(t)]=a}function o(t){if(!e.isString(t))throw new Error('The key "'+t+'" is not a String.');var n=e.isEmpty(sessionStorage[i(t)]);return!n}function a(t,n){if(!e.isString(t))throw new Error('The key "'+t+'" is not a String.');if(!o(t)){if(void 0!==n)return n;throw new Error('There is no data set for the key "'+t+'". Please use contains() first to verify you should actually do a get().')}var i=s(t);return i.value}function s(e){var t=JSON.parse(sessionStorage[i(e)]);return t}function l(t){if(!e.isString(t))throw new Error('The key "'+t+'" is not a String.');if(!o(t))throw new Error('There is no data set for the key "'+t+'". Please use contains() first to verify you should actually do a get().');delete sessionStorage[i(t)]}function c(){var i,r,o;for(i in sessionStorage)if(t.startsWith(i,n)){i=i.substring(n.length+1);r=s(i);o=(new Date).getTime();e.isNumber(r.timeToLive&&o>r.timeToLive)&&l(i)}}return{set:r,get:a,contains:o,clean:c,remove:l}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(91),n(90),n(888),n(889),n(139),n(96),n(99),n(169)],r=function(e,t,n,i,r,o,a,s,l){var c=null;function u(e,t){var n;if(e.length!==t.length)return false;for(n=0;n<e.length;++n)if(e[n]!==t[n])return false;return true}t.directive("qvGlobalSearchInput",["$timeout","qvGlobalSearchDataService",function(o,a){return{restrict:"E",replace:true,template:r,require:"^qvGlobalSearch",link:function r(d,f,p,h){var v=f.find("input"),g=[],m=t.getService("$document");v.on("keydown",function(){d.ignoreQueryChange=false});d.$watch("isSelectActiveInSmallDevice",function(e){d.autoFocus=!i.isIos()&&!i.isAndroid()&&!e});d.placeholder=n.get("GlobalSearch.SearchData");function b(t){if(d.isInputFocused){if(1===e(t.target).closest(".qv-global-search-suggest").length||1===e(t.target).closest(".qv-search-last-history").length)return;t.preventDefault();t.stopPropagation();s.preventGestures(this.gestureHandler);d.$apply(function(){h.hideSuggestions();h.hideSoftKeyboard()})}}d.isObjectsFeature&&!l.treatAsDesktop()&&f.on("qv-outside",b);d.$watch("query",function(e){var t=[],n,i;o.cancel(c);h.showHistory(d.isSearchHistoryFeature&&d.isInputFocused&&0===d.query.length);d.ignoreQueryChange||h.resetSuggestions();if(!e||0===e.length){h.emptyResult();d.underlines.length=0;g=[];return}a.getUnderlinersAndSearchTerms(e,d.underlines,t);if(d.ignoreQueryChange){d.ignoreQueryChange=false;return}c=o(function(){if(a.isWhiteSpaceAt(e,e.length-1)||'"'===e.charAt(e.length-1))h.hideSuggestions();else{i=a.getSuggestTerms(e,t);h.suggest(i)}n=t.map(function(e){return e.string});if(t.length>0&&!u(n,g)){h.searchVisuals(n);h.search(n)}else e.length<a.getMinQueryLength()&&h.emptyResult();g=n;c=null},200)});d.$watch("isInputFocused",function(e){d.isSmallDevice&&(e?m.find("body").animate({scrollTop:f.offset().top},100):d.isObjectsFeature&&s.utils.touch&&h.hideSuggestions());d.isSearchHistoryFeature&&e&&0===d.query.length&&h.showHistory(true)});d.$on("focusInput",function(){v.focus()});d.$on("blurInput",function(){v.blur()});d.$on("$destroy",function(){v.off()})}}}]);t.directive("qvGlobalSearchInputHint",["qvGlobalSearchDataService",function(e){return{restrict:"E",replace:true,template:o,require:"^qvGlobalSearch",link:function t(n){function i(){var t=n.suggestions[-1===n.activeSuggestionIx?0:n.activeSuggestionIx],i=[],r=[],o,s,l,c,u;e.getUnderlinersAndSearchTerms(n.query,i,r);o=e.getSuggestTerms(n.query,r);if(!n.displaySuggestions||n.suggestions.length<=0||0===o.length)return;s=e.getUnderlineLengthFromTermIx(i,t.term);c=i.slice(s).reduce(function(e,t){return e+(t.isWhitespace?" ":t.string)},"");l=a.string(c).length;c=a.string(t.value).slice(0,l);u=a.string(t.value).slice(l);n.ignoreQueryChange=true;n.hintString=u}n.$watch("activeSuggestionIx",function(){i()});n.$watchCollection("suggestions",function(){i()});n.$watch("displaySuggestions",function(){i()})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-search-input" ng-class="{\'focus\': isInputFocused}">\n\t<div class="search-field-area">\n\t\t<lui-search class="search-field" query="query" auto-focus="autoFocus" autocomplete="\'off\'" is-focused="isInputFocused" tid="globalSearch.searchField" placeholder="{{placeholder}}" />\n\t</div>\n\t<div class="search-underlines">\n\t\t<span ng-repeat="underline in underlines" class="underline" ng-class="underline.isWhitespace ? \'term-space\' : \'term\' + underline.colorIx">{{underline.string}}</span><qv-global-search-input-hint></qv-global-search-input-hint>\n\t</div>\n</div>\n'},function(e,t){e.exports='<span ng-show="displaySuggestions" class="search-suggest" tid="globalSearch.suggestionString">{{hintString}}</span>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(891),n(892),n(893),n(96),n(99),n(49),n(370),n(895)],r=function(e,t,n,i,r,o,a){var s={INITIAL:0,VISUALS_DOCKED:1,DATA_DOCKED:2};e.directive("qvGlobalSearchResult",["$timeout",function(e){return{restrict:"E",template:t,replace:true,require:["^qvGlobalSearch","qvGlobalSearchResult"],controller:function e(){this.getElement=function(){};this.setDockState=function(){}},link:function t(n,i,l,c){var u=c[0],d=c[1],f,p,h=function t(){var r=this,a=0;o.treatAsDesktop()&&!p&&(p=i.find(".qv-smartsearch-visuals-group"));e(function(){if(p&&p.length){a=p[0].offsetTop+p[0].offsetHeight-33;n.fixedbar=r.scrollTop>a}n.scrollShow=r.scrollHeight-r.scrollTop>r.clientHeight})},v=!o.treatAsDesktop()&&n.isObjectsFeature?i.find(".data-container"):i;n.dockState=s.INITIAL;n.caoMobile=a.getFlag("CAO_MOBILE");n.emptyMessageEnabled=false;n.fixedbar=false;n.classes={"qv-global-search-result-throbber-open":n.activity.show,"with-objects":n.isObjectsFeature&&!n.isSmallDeviceLandscape};n.$watch("isObjectsFeature && !isSmallDeviceLandscape",function(e){n.classes["with-objects"]=e});n.$watch("activity.show",function(e){n.classes["qv-global-search-result-throbber-open"]=e});n.$watch(function(){return n.showNoResultsMessage()},function(e){n.classes["noresults"]=e});n.select=function t(i,o){if(r.utils.touch){n.activeResultIx=o;e(function(){u.select(n.searchTerms,i.qId)},100)}else u.select(n.searchTerms,i.qId)};n.loadNextPage=function e(){u.loadNextPage()};d.getElement=function(){return i};d.setDockState=function(t){e(function(){n.dockState=t;n.classes["visuals-docked"]=t===s.VISUALS_DOCKED;n.classes["data-docked"]=t===s.DATA_DOCKED})};n.setShowPartialMatches=function(){u.setShowPartialMatches()};n.showNoResultsMessage=function(){var e;e=n.caoMobile?n.emptyMessageEnabled&&n.searchTerms.length>0&&!n.displayResult.data&&!n.error.show&&!n.activity.show&&0===n.insightVisualsGroups.length&&!n.fetchingInsightChartsPending||n.error.show:n.emptyMessageEnabled&&n.searchTerms.length>0&&!n.displayResult.data&&!n.error.show&&!n.activity.show||n.error.show;return e};u.showNoResultsMessage=function(){return n.showNoResultsMessage()};n.resetDockState=function(){n.dockState=s.INITIAL;o.treatAsDesktop()&&v.animate({scrollTop:0},300,"swing")};f=n.$watch(function(){return v[0]&&v[0].scrollHeight?v[0].scrollHeight:0},function(e){e&&(n.scrollShow=e>v[0].clientHeight)});v.on("scroll",h);n.$on("resultScrollToTop",function(){i[0].scrollTop=0});n.$on("$destroy",function(){f();v.off("scroll",h)})}}}]);e.directive("qvScrollToActive",function(){return{restrict:"A",require:"^qvGlobalSearchResult",link:function e(t,n,i,r){i.$observe("qvScrollToActive",function(e){e=e+""==="true";n.toggleClass("active",e);if(e){var t=r.getElement(),i=n.position();i.top<0?t[0].scrollTop=n[0].offsetTop:i.top+n.height()>t.height()&&n[0].scrollIntoView(false)}})}}});e.directive("qvGlobalSearchResultMsg",function(){return{restrict:"E",template:n,replace:true,require:["^qvGlobalSearch","^qvGlobalSearchResult"],link:function e(t){t.capUnderlineMaxNumber=6}}});e.directive("qvGlobalSearchNoResults",function(){return{restrict:"E",template:i,replace:true,require:["^qvGlobalSearch","^qvGlobalSearchResult"],link:function e(){}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-global-search-result" ng-class="classes" >\n\n\t<qv-global-search-suggest ng-if="displaySuggestions" class="qv-global-search-suggest" qv-scroll-to-active="{{activeSelectIx === -1 && focusState.activeStateName === focusState.Suggestions}}"></qv-global-search-suggest>\n\n\t<h3 ng-if="isObjectsFeature && ( displayResult.data || showNoResultsMessage() ) && matches.length > 0" class="title-section title-selections" >\n\t\t<span q-translation="GlobalSearch.Selections"></span>\n\t\t<i ng-click="resetDockState();" class="lui-icon lui-icon--arrow-up"></i>\n\t</h3>\n\n\t<qv-global-search-no-results class="search-no-results-message" ng-show="showNoResultsMessage()" ></qv-global-search-no-results>\n\n\t<div ng-if="(outsideSelection || currentSelections) && (!isPartials() || forcePartials)" class="qv-global-search-result-title strong" >\n\t\t<span ng-if="outsideSelection && !currentSelections" tid="globalSearch.matchesWholeDataset" q-translation="GlobalSearch.MatchesWholeDataset"></span>\n\t\t<span ng-if="currentSelections" tid="globalSearch.addToYourSelections" q-translation="GlobalSearch.AddToYourSelections"></span>\n\t</div>\n\n\t<div ng-repeat="m in matches" class="data-matches-group" ng-if="(!isPartials() || forcePartials)">\n\n\t\t<div ng-if="m !== searchTerms.length" class="caption-flex" q-translation="GlobalSearch.MatchedSearchTerms,{{m}}"></div>\n\n\t\t<div class="content-flex" ng-init="parentIndex = $index" ng-class="{ \'touch-off\':!isSmallDevice }" ng-repeat="row in getSearchTermGroup(m)" qv-scroll-to-active="{{( row.qId === activeSelectIx) && focusState.activeStateName === focusState.Results }}" tid="globalSearch.resultGroup" >\n\n\t\t\t<div class="cell" ng-repeat="item in row.qItems" tid="globalSearch.resultField" ng-class="{ \'maxcell\': !$last && !$first, \'maxcellfirst\': ($first && row.qTotalNumberOfItems > 1) }" >\n\t\t\t\t<div class="group-hits" ng-click="select( row, $parentIndex )" ng-class="{ \'shown\': (item.qTotalNumberOfMatches-item.qItemMatches.length) > 0  }">\n\t\t\t\t\t<span class="field-name" tid="globalSearch.resultField.Name">{{item.qIdentifier}}</span>\n\t\t\t\t\t<span ng-repeat="hit in item.qItemMatches" tid="globalSearch.resultField.Hit">\n\t\t\t\t\t\t<qv-global-search-highlights q-text="hit.qText" q-ranges="hit.qRanges"></qv-global-search-highlights >\n\t\t\t\t\t\t<span>{{$last ? \'\' : \', \'}}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div tid="globalSearch.resultField.MoreHits" ng-if="item.qTotalNumberOfMatches-item.qItemMatches.length > 0" ng-click="onShowMoreHits($event, item, row.qId)" class="more-hits"><span class="more-text" q-translation="GlobalSearch.MoreResults,{{(item.qTotalNumberOfMatches-item.qItemMatches.length)}}"></span></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="more-hits-area-mobile" ng-if="item.qTotalNumberOfMatches-item.qItemMatches.length > 0" tid="globalSearch.resultField.MoreHitsMobile" ng-click="onShowMoreHits($event, item, row.qId)">\n\t\t\t\t\t<button class="lui-button lui-button--rounded">\n\t\t\t\t\t\t<span class="lui-button__icon lui-icon lui-icon--more"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div ng-hide="matches.length === 0" qv-scroll-to-active="{{showMeMoreFocus}}" class="show-me-more"><button ng-if="paging.totalRows > paging.lastRowIx && (!isPartials() || forcePartials)" tid="globalSearch.showmemore" ng-click="loadNextPage($event)" class="lui-button" q-translation="GlobalSearch.ShowMeMore" ng-class="{\'lui-active\': showMeMoreFocus }"></button></div>\n\n\t<h3 class="title-section title-navigation" ng-if="displayResult.visuals && !isSmallDeviceLandscape" qv-scroll-to-active="{{focusState.activeStateName === focusState.Visuals}}">\n\t\t<span ng-if="!caoMobile" q-translation="GlobalSearch.Navigations"></span>\n\t\t<span ng-if="caoMobile">{{existingChartGroupTitle}}</span>\n\t\t<i ng-click="resetDockState();" class="lui-icon lui-icon--arrow-down"></i>\n\t</h3>\n\n\t<h3 class="title-section title-landscape" ng-if="displayResult.visuals && isSmallDeviceLandscape">\n\t\t<span class="lui-icon lui-icon--object"></span>\n\t\t<span q-translation="GlobalSearch.RotateForVisuals"></span>\n  </h3>\n  \n\t<qv-smartsearch-visuals-group tid="smartsearch-visuals-group" items="searchVisualsGroups" app="app" search-terms="searchTerms" options="{\'preload\': false}" ng-if="displayResult.visuals " ng-hide="isSmallDeviceLandscape"></qv-smartsearch-visuals-group>\n\n\t<h3 class="title-section title-navigation"\n\t\tng-if="insightVisualsGroups.length > 0 && caoMobile && !isSmallDeviceLandscape"\n\t\tqv-scroll-to-active="{{focusState.activeStateName === focusState.SuggestedCharts}}">\n\t\t<span tid="global.search.suggested.charts.title">{{suggestedChartGroupTitle}}</span>\n\t\t<i ng-click="resetDockState();" class="lui-icon lui-icon--arrow-down"></i>\n  </h3>\n  \n  <div class="insight-charts-unavailable" ng-if="unableTofetchInsightCharts === true" q-translation="GlobalSearch.SuggestedChartsUnavailable"></div>\n\t\n\t<div ng-if="isPartials()" qv-scroll-to-active="{{ focusState.activeStateName === focusState.Partials }}" class="qv-global-search-result-message search-partials-message">\n\t\t<qv-global-search-result-msg></qv-global-search-result-msg>\n\t\t<div>\n\t\t\t<button class="lui-button" ng-click="setShowPartialMatches($event)" tid="globalSearch.showPartialMatches" q-translation="{{ !forcePartials?\'GlobalSearch.ShowPartialMatches\' : \'GlobalSearch.HidePartialMatches\' }}"\n\t\t\t ng-class="{ \'lui-active\': focusState.activeStateName === focusState.Partials }"></button>\n\t\t</div>\n\t</div>\n\n\t<qv-smartsearch-visuals-group tid="smartsearch-visuals-group" items="insightVisualsGroups" app="app" search-terms="searchTerms" options="{\'preload\': false}" ng-if="insightVisualsGroups.length > 0 && caoMobile" ng-hide="isSmallDeviceLandscape"></qv-smartsearch-visuals-group>\n\n\t<div class="fixed-bar" ng-show="fixedbar">\n\t\t<span ng-click="resetDockState();" class="lui-fade-button">\n\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--arrow-down"></span>\n\t\t</span>\n\t</div>\n\n\t<qv-global-search-throbber></qv-global-search-throbber>\n</div>\n'},function(e,t){e.exports='<div class="qv-global-search-result-message-inline">\n    <span ng-if="currentSelections" q-translation="GlobalSearch.NoMatchesWithinCurrentSelection"></span>\n    <span ng-if="!currentSelections" q-translation="GlobalSearch.NoMatchesForYourTerms"></span>\n</div>'},function(e,t){e.exports='<div>\n    <div class="qv-global-search-result-groups" ng-if="!error.show">\n\n        <div class="qv-global-search-result-message" >            \n            <qv-global-search-result-msg></qv-global-search-result-msg>\n\n            <div ng-if="haveUnlockedSelections()">\n                <button class="lui-button qv-gs-new-search-button" qva-activate="searchOutsideSelections($event)" tid="globalSearch.newSearchJustFor"\n\t\t\t\t\t\tq-translation="GlobalSearch.ClearSelectionAndSearchAgain" q-title-translation="GlobalSearch.ClearSelectionAndSearchAgain"\n\t\t\t\t\t\tng-class="{ \'lui-active\': focusState.activeStateName === focusState.StartNewSearch }"></button>\n            </div>\n        </div>\n    </div>      \n\n    <div class="qv-global-search-result-error" ng-if="error.show">\n        <span q-translation="{{error.translation}}"></span>\n    </div>\n</div>'},function(e,t){e.exports="<span ng-repeat=\"slice in slices track by $index\" ng-class=\"slice.highlight ? 'highlighted' + slice.qTerm : ''\">{{slice.qSliceText}}</span>"},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(896),n(50),n(97),n(897),n(899),n(371)],r=function(e,t,n,i){var r={MAX_MOBILE_VISUALS:10,PAGE_VISUALS:3,PAGE_VISUALS_PORTRAIT:2,PADDING_PAGES:15};e.directive("qvSmartsearchVisualsGroup",["$timeout",function(e){return{restrict:"E",template:t,replace:true,scope:{items:"=",searchTerms:"=",options:"=",app:"="},controller:function e(){this.loadPage=function(){};this.preparePages=function(){}},link:function t(o,a,s,l){var c=0;o.pageIndex=0;o.activeVisualIx=-1;o.pages=[];o.objects=null;var u=a.find(".visuals-wrapper"),d=false,f=n.isSmallDevice?400:600,p=function e(){f=n.isSmallDevice?400:600;u[0].scrollLeft=o.pageIndex*(u[0].offsetWidth+r.PADDING_PAGES)},h=function e(){l.preparePages(o.items[0].qItems)};n.OrientationChanged.bind(h);n.ViewChanged.bind(h);o.setPageIndex=function(e){o.pageIndex=e;for(var t=0;t<o.pages.length;t++)o.pages[t].forEach(function(n){o.options.preload?n.load=t===e||t===e+1||t===e-1:n.load=t===e})};i.on("update",p);o.goToPage=function(e){l.loadPage(e)};o.onSwipePage=function(e){l.loadPage(o.pageIndex+e)};o.$watch("items",function(e){e&&e.length&&l.preparePages(e[0].qItems)});o.$on("visualsGroupMoveActiveVisual",function(e,t){if(d)return;var n=o.pages.reduce(function(e,t){return e+t.length},0),i,r;i=o.activeVisualIx>0||t>0?(o.activeVisualIx+t)%n:n-1;r=Math.floor(i/c);r!==o.pageIndex&&l.loadPage(r);o.activeVisualIx=i});o.$on("visualsGroupBlur",function(){o.activeVisualIx=-1});o.$on("visualsGroupFocus",function(){o.activeVisualIx=0;0!==o.pageIndex&&l.loadPage(0)});o.$on("$destroy",function(){i.off("update",p);n.OrientationChanged.unbind(h);n.ViewChanged.unbind(h)});l.loadPage=function(t){if(!d&&t>=0&&t<o.pages.length){d=true;u.animate({scrollLeft:t*(u[0].offsetWidth+r.PADDING_PAGES)},f,"swing",function(){d=false;e(function(){o.setPageIndex(t)})})}};l.preparePages=function(e){if(e){v();var t,i=0,a=[];n.orientation===n.Orientation.landscape?t=n.isSmallDevice?1:r.PAGE_VISUALS:n.orientation===n.Orientation.portrait&&(t=n.isSmallDevice?1:r.PAGE_VISUALS_PORTRAIT);c=t;for(var s=0;s<e.length;s++){if(n.isSmallDevice&&a.length>=r.MAX_MOBILE_VISUALS&&a[i].length>=t)break;if(a[i]){if(a[i].length>=t){i++;a.push([])}}else a.push([]);e[s].itemIndex=s;e[s].load=o.options.preload?0===i||1===i:0===i;a[i].push(e[s])}o.pages=a}};function v(){o.pages=[];u.scrollLeft(0);o.pageIndex=0}}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-smartsearch-visuals-group" qva-smart-search-swipe-horizontal="onSwipePage(delta)" >\n\t<div class="nav-visual-arrow left" qva-activate="goToPage( pageIndex - 1 );" ng-show="pageIndex > 0">\n\t\t<span class="lui-fade-button">\n\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--arrow-left"></span>\n\t\t</span>\n\t</div>\n\t<div class="visuals-wrapper" >\n\t\t<div class="page" tid="swipeable-chart-page-container" ng-repeat="p in pages" ng-class="{ \'first\': $first, \'last\': $last }">\n\t\t\t<div class="content" >\n\t\t\t\t<qv-smartsearch-visual-preview\n\t\t\t\t\tng-repeat="visualItem in p"\n\t\t\t\t\tapp="app"\n\t\t\t\t\tactive-visual-ix="activeVisualIx"\n\t\t\t\t\tvisual-object="visualItem"\n\t\t\t\t\tsearch-terms="searchTerms"\n\t\t\t\t\tng-class="{ \'first\': $first && !$last, \'last\': $last, \'active\': focusState.activeStateName === focusState.Suggestions && activeVisualIx === visualItem.itemIndex }">\n\t\t\t\t</qv-smartsearch-visual-preview>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="nav-visual-arrow right" qva-activate="goToPage( pageIndex + 1 );" ng-show="pageIndex < (pages.length - 1)">\n\t\t<span class="lui-fade-button">\n\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--arrow-right"></span>\n\t\t</span>\n\t</div>\n\n\t<qv-global-search-more-indicator pages="pages" active-page-ix="pageIndex" on-page-change="goToPage(index);"></qv-global-search-more-indicator>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(54),n(95),n(105),n(898),n(89),n(114),n(123),n(370),n(169),n(267)],r=function(e,t,n,i,r,o,a,s){e.directive("qvSmartsearchVisualPreview",["$timeout",function(l){var c={TITLE:0,SUBTITLE:1,FOOTNOTE:2,DIMENSION:3,MEASURE:4,ALTERNATIVE_DIMENSION:5,ALTERNATIVE_MEASURE:6,TYPE:7,VALUE:8};function u(e,t){return t.getObject(e.qIdentifier).then(function(e){return{model:e,options:{isReadonly:true,isPopover:false,selectionsDisabled:true,interactionState:s.STATIC,components:{miniChart:{show:false},scrollArea:{showFlag:0}},direction:a.direction}}})}function d(e){var t=e.split("/");t=t.map(function(e){return parseInt(e)}).filter(function(e){return!Number.isNaN(+e)});return t.length?t[0]:-1}function f(e,t){e.id=-1;if(-1!==t.indexOf("qDimensions")||-1!==t.indexOf("qListObjectDef/qDef")){e.id=d(t);e.type=-1===t.indexOf("qLayoutExclude")?c.DIMENSION:c.ALTERNATIVE_DIMENSION;e.isLabel=-1!==t.indexOf("qFieldLabels")}else if(-1!==t.indexOf("qMeasures")){e.id=d(t);e.type=-1===t.indexOf("qLayoutExclude")?c.MEASURE:c.ALTERNATIVE_MEASURE;e.isLabel=-1!==t.indexOf("qLabel")}else{-1!==t.indexOf("subtitle")?e.type=c.SUBTITLE:-1!==t.indexOf("title")?e.type=c.TITLE:-1!==t.indexOf("footnote")?e.type=c.FOOTNOTE:-1!==t.indexOf("type")?e.type=c.TYPE:e.type=c.VALUE;e.isLabel=-1===t.indexOf("qExpr")}e.trans=p(e.type)}function p(e){var t="---";switch(e){case c.TITLE:t="Common.Title";break;case c.DIMENSION:t="Common.Dimensions";break;case c.MEASURE:t="Common.Measures";break;case c.ALTERNATIVE_DIMENSION:t="properties.alternative.dimensions";break;case c.ALTERNATIVE_MEASURE:t="properties.alternative.measures";break;case c.SUBTITLE:t="properties.subtitle";break;case c.FOOTNOTE:t="properties.footnote";break;case c.TYPE:t="properties.type";break;case c.VALUE:t="properties.dataPoints.labelmode.value";break}return t}return{restrict:"E",template:r,replace:true,require:["^qvGlobalSearch"],scope:{visualObject:"=",searchTerms:"=",activeVisualIx:"=",app:"="},link:function r(c,d,p,h){var v=e.getService("$navigationService").Sheets,g=e.getService("qvGlobalSearchDataService").getMaxColorsNum(),m=h[0],b;c.viz=null;c.termsMatched=null;c.extra=false;c.matches=null;c.loadManually=function(e){e.stopPropagation();c.viz.object.retry();c.isManualLoad=false};function y(){c.loadTimer=l(function(){if(c.viz.object){c.viz.object.cancel();c.isManualLoad=true}},c.visualObject.suggestedTimeout);c.viz.options.onRendered=function(){c.loadTimer&&l.cancel(c.loadTimer)}}c.$watch("visualObject.load",function(e){if(true===e){S();if(b)c.viz=b;else{u(c.visualObject,c.app).then(function(e){b=e;c.viz=e;c.viz.object={};c.visualObject.suggestedTimeout&&y()});w(c.visualObject.qItemMatches)}}else c.viz=null});c.$watch("searchTerms",function(e){e&&c.visualObject&&S()});c.$on("selectActiveVisualItem",function(){c.activeVisualIx===c.visualObject.itemIndex&&x()});c.$on("$destroy",function(){b=null});c.showMoreHits=function(e){e.stopPropagation();m.showMoreHitsForVisual(c.visualObject).then(function(e){w(e.qItemMatches)})};function x(e){var t=function e(t){t=t.filter(function(e){return e});return t.length?t[0]:null};C().then(function(r){var o=t(r);if(o){v.navigateToSheet(o.sheet);m.onNavigateToSheet(o.cell.name)}else if(e){var l={isReadonly:true,isPopover:false,selectionsDisabled:true,interactionState:s.ANALYSIS,components:{miniChart:{show:true},scrollArea:{showFlag:1}},direction:a.direction};n.publish(i.Events.PubSub.ExpandSmartSearchSuggestedChart,Object.assign({},e,{options:l}))}})}function S(){c.termsMatched=c.visualObject.qSearchTermsMatched.map(function(e){return{string:c.searchTerms[e],pos:e%g}})}function w(e){c.hitsDisplayed=e.length;var n,i,r;e.forEach(function(e){e.qAttributes&&e.qAttributes.length&&f(e,e.qAttributes[0][1])});n=c.visualObject.qItemMatches.filter(function(t){if(t.isLabel)return true;var n=e.filter(function(e){return e.isLabel&&t.type===e.type&&t.id===e.id&&t!==e});var i=t.qRanges.every(function(e){return n.some(function(t){return t.qRanges.some(function(t){return e.qTerm===t.qTerm})})});return!i});i=t.groupBy(n,function(e){return e.type});r=Object.keys(i).map(function(e){return i[e]});c.matches?r.forEach(function(e,t){if(e.length>c.matches[t].length){var n=c.matches[t].length;for(var i=n;i<e.length;i++)c.matches[t].push(e[i])}}):c.matches=r}function q(e,t,n){var i={sheet:e,cell:t};return t.name===c.visualObject.qIdentifier?o.resolve(i):"filterpane"===t.type?n.getObject(t.name).then(function(e){return e.getLayout().then(function(e){if(e.qChildList&&e.qChildList.qItems.length){var t=e.qChildList.qItems.filter(function(e){return e.qInfo.qId===c.visualObject.qIdentifier});return t.length?i:null}return null})}):o.resolve(null)}function C(){var e,t=[];for(var n=0;n<v.all.mashed.length;n++){e=v.all.mashed[n];for(var i=0;i<e.qData.cells.length;i++)t.push(q(e,e.qData.cells[i],c.app))}return o.all(t)}c.showExtraInfo=function(e){c.extra=!c.extra&&c.matches.length;e.stopPropagation()};c.navigateToSheet=function(e,t){if(!c.isManualLoad){e.stopPropagation();x(t)}}}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="visual-item">\n\t<div class="object" qva-activate="navigateToSheet($event, viz)" >\n\t\t<qv-object ng-if="viz && visualObject.load" model="viz.model" options="viz.options" object="viz.object"></qv-object>\n\t\t<div class="transparent-overlay"></div>\n\t\t<div ng-hide="visualObject.load" class="qv-animate progress">\n\t\t\t<div class="progress-loader"></div>\n\t\t</div>\n\t\t<div class="cao-mobile-manual-loader" ng-click="$event.stopPropagation()" ng-if="isManualLoad">\n\t\t\t<ul>\n\t\t\t\t<li class="cao-mobile-loader-text" q-translation="cao.card.complex">\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<lui-button ng-click="loadManually($event)" q-translation="cao.card.complex.load"></lui-button>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n\t<div class="visual-data" qva-activate="showExtraInfo($event);">\n\t\t<div ng-if="visualObject.load" class="keywords">\n\t\t\t<div class="terms">\n\t\t\t\t<span ng-repeat="t in termsMatched"><span ng-if="!$first">&nbsp;</span><span class="highlighted{{t.pos}}">{{t.string}}</span></span>\n\t\t\t</div>\n\t\t\t<div class="lui-fade-button" ng-if="matches.length" tid="swipeableChartPageInfoButton">\n\t\t\t\t<span class="lui-fade-button__icon lui-icon lui-icon--info"></span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="extra-info" ng-if="visualObject.load" ng-class="{ \'show\': extra }">\n\t\t\t<div ng-if="matches.length" ng-repeat="hits in matches" class="hits">\n\t\t\t\t<div ng-repeat="hit in hits" class="match-hit">\n\t\t\t\t\t<span ng-if="$first"><b q-translation="{{hit.trans}}"></b>: </span><qv-global-search-highlights q-text="hit.qText" q-ranges="hit.qRanges" class="highlights"></qv-global-search-highlights><span ng-if="!$last">,&nbsp;</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="more-hits" qva-activate="showMoreHits($event)" ng-if="$last && (visualObject.qTotalNumberOfMatches-hitsDisplayed) > 0" q-translation="GlobalSearch.MoreResults,{{(visualObject.qTotalNumberOfMatches-hitsDisplayed)}}"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(99),n(900)],r=function(e,t,n){e.directive("qvGlobalSearchMoreIndicator",function(){return{replace:true,template:n,restrict:"E",scope:{pages:"=",activePageIx:"=",onPageChange:"&"},link:function e(n){n.touchOn=!t.treatAsDesktop();n.pressedPageIx=void 0;n.onPageClick=function(e){n.pressedPageIx=e;n.onPageChange({index:e})};n.$watch("activePageIx",function(){n.pressedPageIx=void 0})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-gs-more-indicator" ng-class="{ \'touch-on\': touchOn }">\n\t<div class="hit-area"  qva-activate="onPageClick($index);" ng-repeat="p in pages">\n\t\t<span tid="swipeableChartPageClickDot" class="dot" ng-class="{ \'active\': $index === activePageIx, \'pressed\': $index === pressedPageIx }"></span>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(902)],r=function(e,t){e.directive("qvGlobalSearchSuggest",[function(){return{restrict:"E",template:t,replace:true,require:["^qvGlobalSearch"],link:function e(){}}}]);e.directive("qvScrollToActiveSuggestion",function(){return{restrict:"A",link:function e(t,n,i){i.$observe("qvScrollToActiveSuggestion",function(e){e=e+""==="true";if(e){var t=n.position(),i=n.parent(),r=n[0].clientWidth>i[0].clientWidth,o=t.left+n[0].clientWidth-i[0].clientWidth;n[0].scrollIntoView(r);t.left<=i[0].offsetLeft?i.scrollLeft(n[0].offsetLeft-i[0].offsetLeft):o>0&&!r&&(i[0].scrollLeft=i[0].scrollLeft+o)}})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-search-suggest-wrapper" tid="globalSearch.suggestions">\n\t<span class="hidden">{{query}}</span>\n    <div ng-show="isSmallDevice" ng-if="!isObjectsFeature" class="dym" q-translation="GlobalSearch.DidYouMean"></div>\n\t<ul class="suggest-popup">\n\t\t<li ng-repeat="suggest in suggestions track by $index" qv-scroll-to-active-suggestion="{{$index === activeSuggestionIx && focusState.activeStateName === focusState.Suggestions}}" ng-class="{active: $index === activeSuggestionIx && focusState.activeStateName === focusState.Suggestions }" qva-activate="onSuggestSelect(null, suggest)" tid="globalSearch.suggestion" bold-suggest=\'{{suggest.value}}\'>\n\t\t\t{{suggest.value}}\n\t\t</li>\n\t</ul>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(904),n(169)],r=function(e,t){e.directive("qvGlobalSearchHistory",["$timeout",function(n){return{restrict:"E",template:t,replace:true,require:["^qvGlobalSearch"],link:function t(i,r,o,a){var s=a[0],l=r.find(".history-popup")[0];i.colorsLimit=e.getService("qvGlobalSearchDataService").getMaxColorsNum();i.$watch("searchInputFocused",function(e){e&&n(function(){l.scrollTop=0})});i.onSearchHistorySelect=function(e){s.setQueryFromHistory(e)};i.clearSearchHistory=function(){s.clearHistory()};i.removeSelectedHistory=function(e){s.removeHistory(e)}}}}]);e.directive("qvScrollToActiveHistory",function(){return{restrict:"A",link:function e(t,n,i){i.$observe("qvScrollToActiveHistory",function(e){e=e+""==="true";n.toggleClass("active",e);e&&n[0].scrollIntoView(false)})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-search-last-history" tid="globalSearch.searchHistory">\n\t<div class="history-header" ng-show="searchHistory.length">\n\t\t<div class="title"  q-translation="GlobalSearch.RecentSearches"></div>\n\t\t<div class="clear-all-button" q-translation="GlobalSearch.ClearAll" qva-activate="clearSearchHistory($index)"></div>\n\t</div>\n\t<ul class="history-popup" ng-show="searchHistory.length">\n\t\t<li ng-repeat="items in searchHistory track by $index" qva-delegated-activate=".history-query#onSearchHistorySelect($index); .lui-icon--close#removeSelectedHistory($index);" tid="globalSearch.searchHistoryItem" ng-class="{active: $index === activeHistoryIx && focusState.activeStateName === focusState.History}" qv-scroll-to-active-history="{{$index === activeHistoryIx && focusState.activeStateName === focusState.History}}">\n\t\t\t<div class="history-query">{{searchHistory[$index]}}</div>\n\t\t\t<div class="lui-icon lui-icon--close" q-title-translation="Common.Delete" title="Delete"></div>\n\t\t</li>\n\t</ul>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(906),n(163),n(89),n(50),n(97),n(276),n(257),n(371)],r=function(e,t,i,r,o,a){var s={};Object.defineProperties(s,{THROBBER:{value:1e3},INDEX_PROGRESS:{value:5e3},NEXT_INDEX_PROGRESS:{value:500},HIDE_INDEX_DONE:{value:1e3}});e.directive("qvGlobalSearchThrobber",["$timeout","$window","$animate",function(l,c,u){return{replace:true,template:t,restrict:"E",link:function t(d,f){var p=e.getService("qvGlobalSearchService"),h,v,g,m,b=f.find(".qv-gs-index-progress .qv-gs-index-group"),y,x;d.asyncHideActivity=false;d.percentDone=void 0;d.imgSrc=n.p+"img/core/static/smart-search.png";d.pages=[{},{}];d.activePageIx=0;y=function e(){l(function(){b[0].scrollLeft=d.activePageIx*b[0].offsetWidth})};o.OrientationChanged.bind(y);a.on("update",y);d.goToPage=function(e){b.animate({scrollLeft:e*b[0].offsetWidth},400,"swing",function(){l(function(){d.activePageIx=e})})};d.onSwipePage=function(e){if(d.isSmallDevice){var t=e>0?1:0;t!==d.activePageIx&&d.goToPage(t)}};d.openHelp=function(){c.open(i.path+"SmartSearch_Intro")};d.$on("$destroy",function(){l.cancel(h);l.cancel(v);l.cancel(g);l.cancel(m);a.off("update",y);o.OrientationChanged.unbind(y);p.IndexProgressUpdate.unbind(k);u.off("removeClass",f[0])});function S(e){var t=r(),n=f.find(e)[0];u.on("removeClass",n,function(e,i){if("close"===i){u.off(n);t.resolve()}});return t.promise}function w(){d.throbber.show=false;d.indexProgress.enabled=false;d.indexProgress.show=false;d.indexProgress.visible=false;d.indexDone.show=false;d.indexDone.visible=false}function q(){if(void 0!==d.percentDone&&d.percentDone<100)return true;return p.couldEngineBeIndexing(d.app)}function C(e){if(!x){p.IndexProgressUpdate.bind(k);x=true}l.cancel(m);m=l(function(){p.requestIndexProgressUpdate(d.app)},e||0)}d.showIndexDone=function(){S(".qv-gs-index-done").then(function(){d.indexProgress.show=false;d.indexProgress.visible=false;d.indexDone.visible=true;d.percentDone=void 0;l.cancel(g);g=l(_,s.HIDE_INDEX_DONE)});d.indexDone.show=true};function _(){d.indexDone.visible=false;d.indexDone.show=false;l.cancel(h);d.$emit("updateForceShowDimmer",false);d.asyncHideActivity?T():h=l(A,s.THROBBER)}function I(e){S(".qv-gs-index-progress").then(function(){d.indexProgress.visible=true;d.isSmallDevice||d.$emit("updateForceShowDimmer",true)});d.percentDone=e;d.indexProgress.show=true;d.activity.show=true;d.throbber.show=false;e<100?C(s.NEXT_INDEX_PROGRESS):D()}function E(e){d.percentDone=e;e<100?C(s.NEXT_INDEX_PROGRESS):D()}function D(){l.cancel(m);if(x){p.IndexProgressUpdate.unbind(k);x=false}}function A(){d.activity.show=true;d.throbber.show=true;d.emptyMessageEnabled=false}function T(){l.cancel(h);l.cancel(v);l.cancel(g);l.cancel(m);D();d.activity.show=false;d.throbber.show=false;d.indexProgress.enabled=false;d.indexProgress.show=false;d.indexProgress.visible=false;d.emptyMessageEnabled=d.searchTerms.length>0}function O(){d.indexProgress.enabled=true;C()}function k(e,t){if(e!==(d.app.id||"").toUpperCase())return;var n=new Number(t);if(Number.isNaN(+n)||!t){d.indexProgress.enabled=true;C(s.INDEX_PROGRESS);return}if(!d.indexProgress.show&&n<100)I(n);else if(d.indexProgress.show)E(n);else{l.cancel(h);h=l(A,s.THROBBER)}}function L(e,t,n){if(t){d.asyncHideActivity=false;if(d.activity.show)return;w();l.cancel(h);l.cancel(v);if(q())O();else{h=l(A,s.THROBBER);v=l(O,s.INDEX_PROGRESS)}}else{var i=d.percentDone&&d.percentDone<100;if(i&&n){p.setLastKnownIndexProgress(d.app,100);D();d.percentDone=100;d.asyncHideActivity=true}else if(i&&!n){if(!d.isSmallDevice)return;T()}else if(100==d.percentDone){p.setLastKnownIndexProgress(d.app,100);D();d.asyncHideActivity=true}else T()}}d.$on("toggleActivityIndicator",L)}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div ng-show="activity.show" class="qv-qs-throbber-container qv-animate ng-hide">\n\n\t<div class="qv-gs-throbber-dimmer"></div>\n\n\t<div ng-show="throbber.show" class="qv-gs-throbber ng-hide"></div>\n\n\t<div ng-show="indexProgress.show" class="qv-gs-index qv-gs-index-progress qv-animate ng-hide">\n\n\t\t<div class="qv-gs-index-group" qva-smart-search-swipe-horizontal="onSwipePage(delta)">\n\t\t\t<div class="qv-gs-index-section">\n\t\t\t\t<div class="qv-gs-index-content qv-gs-index-content-shrink">\n\t\t\t\t\t<span class="qv-gs-index-header" q-translation="GlobalSearch.PreparingSmartSearch"></span>\n\n\t\t\t\t\t<qv-progress-bar percent-done="percentDone" on-completed="showIndexDone()"></qv-progress-bar>\n\n\t\t\t\t\t<span class="qv-gs-index-text" q-translation="GlobalSearch.NextTimeFaster"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="qv-gs-index-section">\n\t\t\t\t<div class="qv-gs-index-content qv-gs-index-content-shrink">\n\t\t\t\t\t<div class="qv-gs-index-help" qva-activate="openHelp()">\n\t\t\t\t\t\t<span class="qv-gs-index-header" q-translation="GlobalSearch.LearnHowToUse"></span>\n\t\t\t\t\t\t<img ng-src="{{imgSrc}}" class="qv-gs-index-image" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<qv-global-search-more-indicator pages="pages" active-page-ix="activePageIx" on-page-change="goToPage(index);"></qv-global-search-more-indicator>\n\n\t</div>\n\n\t<div ng-show="indexDone.show" class="qv-gs-index qv-gs-index-done qv-animate ng-hide">\n\t\t<div class="qv-gs-index-section qv-gs-index-section-single">\n\t\t\t<div class="qv-gs-index-content qv-gs-index-shrink">\n\t\t\t\t<span class="qv-gs-index-icon lui-icon lui-icon--tick" aria-hidden="true"></span>\n\t\t\t\t<span class="qv-gs-index-text-big" q-translation="GlobalSearch.Done"></span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n</div>'},function(e,t){e.exports='<div class="qv-progress-bar">\n\t<div class="progress-bar-bg">\n\t\t<div class="progress-bar-fg" ng-style="{ width: display }"></div>\n\t</div>\n\n\t<div class="progress-text" ng-bind="display" ng-hide="options.hideText"></div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(276),n(257)],r=function(e){e.directive("qvMobileIndexProgress",["$timeout",function(t){return{replace:true,template:'<div class="qv-mobile-index-progress"><qv-progress-bar ng-if="showMobileIndexProgressBar" percent-done="indexPercentDone" on-completed="hideMobileIndexProgressWhenDone()" options="progressBarOptions"></qv-progress-bar></div>',restrict:"E",link:function n(i){var r=e.getService("qvGlobalSearchService"),o,a;i.progressBarOptions={hideText:true};r.couldEngineBeIndexing(i.app)&&c(0);i.$on("$destroy",function(){t.cancel(a);r.IndexProgressUpdate.unbind(s)});i.hideMobileIndexProgressWhenDone=function(){i.showMobileIndexProgressBar=false};function s(e,t){if(e!==(i.app.id||"").toUpperCase())return;if(!i.showMobileIndexProgressBar&&t<100){i.indexPercentDone=t;i.showMobileIndexProgressBar=true;c(500)}else if(i.showMobileIndexProgressBar){i.indexPercentDone=t;t<100&&c(500)}else l()}function l(){t.cancel(a);if(o){r.IndexProgressUpdate.unbind(s);o=false}}function c(e){if(!o){r.IndexProgressUpdate.bind(s);o=true}t.cancel(a);a=t(function(){r.requestIndexProgressUpdate(i.app)},e||0)}}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(54),n(95),n(186),n(93),n(910),n(124),n(120),n(113),n(49),n(91),n(89),n(103),n(229),n(222),n(99),n(134),n(147),n(154),n(106),n(168),n(114),n(105),n(223),n(372),n(911),n(912),n(937),n(939),n(941),n(374),n(212),n(221),n(275),n(945),n(366),n(946),n(267),n(415),n(233),n(368),n(947),n(963)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v,g,m,b,y,x,S,w,q,C,_,I){var E=["$scope","$element","$window","$timeout","$q","qvCaoService","qvCaoSearchService","qvCaoChartService","qvAppDetailsService","qvCaoRenderService","qvCaoComplexityEstimatorService","qvCaoSelectionService",function(a,l,E,D,A,T,O,k,L,P,M,N){var R=this;var F=new S;var $=A.defer();var j=A.defer();var H=false;var V=0;R.zoomDeferred=null;R.lightEdits=[];a.loadedCount=0;a.query="";a.charts=[];a.chartMatches=[];a.renderableCharts=[];a.fieldList=[];a.debug=c.CAO_DEBUG;a.syncFieldPicker=u.getFlag("CAO_FIELD_PICKER_SYNC");a.insightFeedback=u.getFlag("CE_PRECEDENTS");a.caoTweakEnabled=u.getFlag("CAO_TWEAK");a.nluEnabled=u.getFlag("NLU_INSIGHTS");a.nluQueryInfoVisible=false;a.nluRawResponse=null;a.learningPerformed=false;a.contextPanelVisible=false;a.assetsPanelVisible=true;a.showHidden=false;a.showFieldPicker=true;a.limitedAccess=null;a.scrollContainer=l.find(".qv-cao-scroll-content")[0];a.mouseUp=function(){a.focusBorder=true};a.resultLabel=d.get("cao.search.title",[0,0,0,0]);a.introHeader=a.nluEnabled?d.get("cao.search.intro.nlu.header"):d.get("cao.search.intro.header");a.introDescriptionSearch=d.get("cao.search.intro.description.search");a.introDescriptionNoFields=d.get("cao.search.intro.description.nofields");a.introDescriptionGenerateInsights=d.get("cao.search.intro.description.generateInsights");a.introButton=d.get("cao.search.intro.button");a.goToSheetButton=d.get("cao.search.gotosheet.button");a.cellStatusElem=l.find("#sr-cell-status-label");a.direction=w.direction;a.appPrecedents={enabled:true};a.state="INIT";a.gridScreenReader=d.get("Cao.Accessibility.Object.Description");a.onGridFocus=function(){a.gridScreenReader=H?"":d.get("Cao.Accessibility.Object.Description")};a.onGridBlur=function(){D(function(){H=!!document.activeElement&&document.activeElement.classList.contains("cao-insight-container");a.gridScreenReader=""},1)};s.load();m.getList().then(function(e){a.masterDimensionsListModel=e});x(a,"masterDimensionsListModel",function(){B()});b.getList().then(function(e){a.masterMeasuresListModel=e});x(a,"masterMeasuresListModel",function(){B()});y.getList().then(function(e){a.fieldsListModel=e});x(a,"fieldsListModel",function(){B()});a.updateDirection=function(e){a.direction!==e&&(a.direction=e)};a.closeAndGoToSheet=function(){T.toggleCao();i.publish("cao/insights/close")};w.DirectionChanged.bind(a.updateDirection);o.getApp().then(function(i){j.resolve();a.app=i;a.contextPanelVisible=C.storageObj(i.id).contextPanel;a.assetsPanelVisible=C.storageObj(i.id).assetsPanel;L.get().then(function(e){a.limitedAccess=Boolean(e.model.app.published||!e.model.permissions.update)}).then(function(){f.all({appFieldList:i.getFieldList(),classificationsResult:t.getService("classificationService").getClassification(),appScrape:T.scrapeApp()}).then(function(t){var o=t.classificationsResult?new h(t.classificationsResult):void 0;r.addClassificationDataToFields(t.appFieldList,o);$.resolve();M.init(i);a.state="INTRO";g.treatAsDesktop()&&D(function(){e("#cao-search-input").focus()});O.getMasterItems().then(function(e){a.limitedAccess&&0===e.length&&(a.state="NO_FIELDS")});a.fieldList=t.fieldList;O.clearSelectedFields();O.registerForCaoSearchQuery(n.debounce(z,300));B()},function(){$.reject();U()})});a.app.getLayout().then(function(e){a.permissions=e.permissions})},function(){j.reject();U()});function B(){O.createFieldList().then(function(e){a.fieldList=e})}function z(e){T.setRefreshIndicatorVisibility(false);if("NO_FIELDS"===a.state)return;if(e.showIntro){a.state="INTRO";a.$apply(function(){a.query="";a.charts=[];a.chartMatches=[];a.selectedFieldNames=[]});return}a.query=e.query?e.query:"";a.loadGraphs(e.query);a.selectedFieldNames=e.selectedFields?e.selectedFields:[]}a.refreshCharts=function(){if("INTRO"===a.state){T.setRefreshIndicatorVisibility(false);return}i.publish("cao/insight/refreshPerformed");a.state="LOADING";T.setRefreshIndicatorVisibility(false);a.clearChartSelection();D(function(){P.clearRenderQueue();a.charts=[];a.chartMatches=[]}).then(function(){k.refreshInsights(a.appPrecedents.enabled).then(function(e){a.state="LOADED";a.loadedCount++;a.charts=e.recommendations;a.chartMatches=e.chartMatches;a.learningPerformed=false}).catch(U)})};a.$watch("appPrecedents.enabled",function(e,t){e!=t&&a.refreshCharts()});a.clearInsightResults=function(){i.publish("cao/insights/clear")};a.isClearResultsVisible=function(){return a.caoTweakEnabled&&(a.charts&&a.charts.length>0||a.chartMatches&&a.chartMatches.length>0)};a.setItemAccFocusVisibility=function(){this.itemAccFocus=true};a.removeItemAccFocusVisibility=function(){this.itemAccFocus=false};a.toggleFieldPicker=function(){a.showFieldPicker=!a.showFieldPicker;p.trackEvent(p.customEvents.INSIGHTS_FIELD_PICKER,{type:a.showFieldPicker?"open":"close"});D(a.resizeCharts)};a.resizeCharts=function(){v.resizeCharts(E)};function U(e){V--;e&&(e.norefresh||e.notFound)?e.notFound&&(a.state="NOT_FOUND"):a.state="ERROR";a.learningPerformed=false}a.loadGraphs=function(e){P.clearRenderQueue();T.setRefreshIndicatorVisibility(false);"LOADED"===a.state&&a.$apply(function(){a.charts=[];a.chartMatches=[]});a.state="LOADING";a.showHidden=false;var t=new Date;j.promise.then(function(){$.promise.then(function(){V++;var n;n=a.nluEnabled&&e&&e.length?_.parseQuery(e,a.app.id).then(function(e){a.nluRawResponse=e;i.publish("cao/nlu/new_queries",e);var t=I.buildDataCollection(e);return k.getVisualRecommendations(a.app,t,a.limitedAccess)}):k.getInsights(a.app,e,a.limitedAccess,a.appPrecedents.enabled);n.then(function(e){V--;if(V>0)return;a.state="LOADED";a.loadedCount++;a.charts=e.recommendations;a.chartMatches=e.chartMatches;var n=new Date;var i=(n-t)/1e3;p.trackEvent(p.customEvents.INSIGHTS_SEARCH,{query:a.query,queryTime:i})},U)},U)},U)};a.selectField=function(e){if(a.syncFieldPicker){a.fieldToAdd=e.selected?null:e;a.fieldToRemove=e.selected?e:null}else{a.fieldToAdd=null;D(function(){a.fieldToAdd=e})}i.publish("cao/insight/contextPanelToggled",!!a.insightFeedback&&C.storageObj(a.app.id).contextPanel);a.clearChartSelection()};a.updateFieldPicker=function(){D(function(){a.fieldList=[];a.fieldList=O.getFields()})};a.zoomChart=function(e){R.zoomDeferred=A.defer();a.zoomOpen=true;e.zoomed=true;D(function(){l.find(".qv-cao-zoomed-anmiation-container").addClass("animate-expand");D(function(){a.zoomedChart=e},400)});return R.zoomDeferred.promise};a.exitZoom=function(){D(function(){l.find(".qv-cao-zoomed-anmiation-container").addClass("animate-shrink");a.zoomedChart=void 0;D(function(){a.zoomOpen=false;R.zoomDeferred.resolve()},400)});return R.zoomDeferred.promise};a.sendFeedback=function(e,t){var n=e.getAnalysis();if(t===q.Precedents.PrecedentTypes.Dislike)return n.precedents&&n.precedents.disliked?F.undislikeAnalysis(n).then(function(){delete n.precedents;return false}):F.dislikeAnalysis(n).then(function(e){n.precedents={id:e.nodes[0].id,disliked:true};return true});if(t===q.Precedents.PrecedentTypes.Like)return F.likeAnalysis(n).then(function(e){n.precedents={id:e.nodes[0].id,liked:true};return true})};function G(t){e(t.currentTarget).blur()}a.showHiddenCharts=function(){a.showHidden=!a.showHidden;a.showHidden&&D(function(){var t=e(".qv-cao-section-hidden")[0];t&&t.scrollIntoView&&t.scrollIntoView({behavior:"smooth",block:"start"})})};a.showFoundInsights=function(e){13===e.which?a.chartsToShow={charts:a.chartMatches,activeTab:"found"}:"click"===e.type&&(a.chartsToShow={charts:a.chartMatches,activeTab:"found"});G(e)};a.showGeneratedInsights=function(e){13===e.which?a.chartsToShow={charts:a.renderableCharts,activeTab:"generated"}:"click"===e.type&&(a.chartsToShow={charts:a.renderableCharts,activeTab:"generated"});G(e)};a.isRefreshIndicatorVisible=function(){return T.getRefreshIndicatorVisibility()};a.isCaoInsightContextPanelVisible=function(){return a.caoTweakEnabled&&a.contextPanelVisible&&"ERROR"!==a.state};a.clearChartSelection=function(){N.clearSelection()};a.isChartSelected=function(){var e=N.getSelectedChart();return e&&a.zoomedChart&&a.zoomedChart===e};a.toggleNluQueryInfo=function(){a.nluQueryInfoVisible=!a.nluQueryInfoVisible};function W(e){a.contextPanelVisible=e}function K(e){a.assetsPanelVisible=e}function Y(e){a.learningPerformed=e}i.subscribe("cao/insight/refresh",a.refreshCharts);i.subscribe("cao/insight/contextPanelToggled",W);i.subscribe("cao/insight/assetsPanelToggled",K);i.subscribe("cao/insight/learningPerformed",Y);a.$watchGroup(["charts","chartMatches"],function(){0===a.charts.length&&"LOADED"===a.state&&U({notFound:true});a.renderableCharts=a.charts.filter(function(e){return!a.insightFeedback||!e.isHidden()});a.chartsToShow={charts:a.renderableCharts,activeTab:"generated"};a.hiddenCharts=a.charts.filter(function(e){return e.isHidden()});a.numberOfGeneratedInsights=d.get("cao.search.info.title.generated.plural",a.renderableCharts.length.toString());a.numberOfFoundInsights=d.get("cao.search.info.title.found.plural",a.chartMatches.length.toString());function e(){var e=[];if(a.charts.length+a.chartMatches.length===0)return null;a.charts.length+a.chartMatches.length>0&&e.push(d.get("cao.search.titleResults",[a.charts.length+a.chartMatches.length]));a.renderableCharts.length>0&&e.push(d.get("cao.search.titleGenerated",[a.renderableCharts.length]));a.hiddenCharts.length>0&&e.push(d.get("cao.search.titleHidden",[a.hiddenCharts.length]));switch(e.length){case 3:return d.get("cao.search.titleLength3",e);case 2:return d.get("cao.search.titleLength2",e);default:break}}a.resultLabel=e()});a.$on("$destroy",function(){O.unRegisterFromCaoSearchQuery(z);P.clearRenderQueue();i.unsubscribe("cao/insight/refresh");i.unsubscribe("cao/insight/contextPanelToggled");i.unsubscribe("cao/insight/assetsPanelToggled");i.unsubscribe("cao/insight/learningPerformed");w.DirectionChanged.unbind(a.updateDirection)})}];t.directive("qvCaoComponent",function(){return{restrict:"E",template:a,controller:E,scope:true,replace:true,link:function e(t){l.getList().then(function(e){e.getLayout().then(function(e){t.sheets=e})});t.target=null}}});return"<qv-cao-component></qv-cao-component>"}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-cao overlay" id="qv-cao-overlay" style="display:none;" ng-keyup="setItemAccFocusVisibility()" ng-mouseup="removeItemAccFocusVisibility()">\n\t<div class="qv-cao-zoomed-chart" ng-if="zoomOpen" ng-class="{\'cao-tweak-width\' : caoTweakEnabled && isChartSelected() && contextPanelVisible}">\n\t\t<div class="qv-cao-zoomed-anmiation-container" ng-if="zoomOpen">\n\t\t\t<qv-cao-insight class="qv-cao-section-result-item qv-cao-section-result-item-zoomed" ng-class="{\'cao-insight-focus\': itemAccFocus}"\n\t\t\t\tng-if="zoomedChart"\n\t\t\t\tchart="zoomedChart"\n\t\t\t\tapp="::app"\n\t\t\t\tdebug="::debug"\n\t\t\t\tsheets="::sheets"\n\t\t\t\tinteractive="::true"\n\t\t\t\talways-show-header="true"\n\t\t\t\theader-icon="lui-icon--arrow-left"\n\t\t\t\theader-action="exitZoom"\n\t\t\t\tpermissions="permissions"\n\t\t\t\tng-keyup="mouseUp"\n\t\t\t\tsend-feedback="sendFeedback(chart, type)"\n\t\t\t\tdirection="direction"\n\t\t\t\tis-cao-context-panel-visible="contextPanelVisible"\n\t\t\t>\n\t\t\t</qv-cao-insight>\n\t\t</div>\n\t</div>\n\n\t<div ng-if="assetsPanelVisible" class="qv-cao-field-picker" ng-class="{ \'hide-field-picker\' : !showFieldPicker, \'field-picker-panel-container\': caoTweakEnabled }" tid="cao-assets-panel">\n\t\t<qv-cao-field-picker\n\t\t\tinsights-loaded="state !== \'INIT\'"\n\t\t\tis-limited ="limitedAccess"\n\t\t\tclass ="field-picker"\n\t\t\ttoggle-field-picker="toggleFieldPicker"\n\t\t\tshow-field-picker="showFieldPicker"\n\t\t\titems="fieldList"\n\t\t\tselect-field="selectField">\n\t\t</qv-cao-field-picker>\n\t</div>\n\n\t<div class="qv-cao-search" ng-class="{ \'hide-field-picker\' : !showFieldPicker, \'search-container-with-context-panel\': caoTweakEnabled, \'search-container-nlu\': nluEnabled }">\n\t\t<div class="qv-cao-insights-header" ng-if="nluEnabled && (state === \'INTRO\' || state === \'INIT\')">\n\t\t\t<h1 q-translation="cao.CognitiveAssociativeOverlay"></h1>\n\t\t\t<button class=\'lui-button\' tid="go-to-sheet-intro-btn" ng-click="closeAndGoToSheet()">\n\t\t\t\t{{ goToSheetButton }}\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="qv-cao-nlu-intro" ng-if="nluEnabled && (state === \'INTRO\' || state === \'INIT\')">\n\t\t\t<div class="qv-cao-intro-image"></div>\n\t\t\t<h1>{{ introHeader }}</h1>\n\t\t</div>\n\t\t<qv-cao-search field-to-remove="fieldToRemove"\n\t\t\t\t\tfield-to-add="fieldToAdd"\n\t\t\t\t\tupdate-field-picker="updateFieldPicker"\n\t\t\t\t\tclear-field-picker="clearFieldPicker"\n\t\t\t\t\tis-limited ="limitedAccess"\n\t\t\t\t\tdirection="direction"\n\t\t\t\t\tdata-disabled="state === \'INIT\'"\n\t\t\t\t\tnlu-query-info-button-visible="state === \'LOADED\'"\n\t\t\t\t\tnlu-query-info-visible="nluQueryInfoVisible"\n\t\t\t\t\ttoggle-nlu-query-info="toggleNluQueryInfo">\n\t\t</qv-cao-search>\n\t\t<div class="qv-cao-search-info" ng-if="nluEnabled && nluQueryInfoVisible">\n\t\t\t<div class="qv-cao-search-info-debug" ng-if="debug">\n\t\t\t\t<h2>Debug Information</h2>\n\t\t\t\t<p class="qv-cao-search-info-response-text">{{ nluRawResponse | json : spacing }}</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<p ng-if="nluEnabled && (state === \'INTRO\' || state === \'INIT\')" class="qv-cao-nlu-intro-suggestion-text" q-translation="cao.search.nlu.suggestedQuestionsText"></p>\n\n\t\t<div class="qv-cao-search-line" ng-if="!nluEnabled || (state !== \'INTRO\' && state !== \'INIT\')"></div>\n\n\t\t<div class="qv-cao-scroll-content">\n\t\t\t<div class="qv-cao-scroll-area">\n\n\t\t\t\t<div class="qv-cao-intro" ng-if="state === \'INTRO\' || state === \'INIT\'">\n\t\t\t\t\t<div class="qv-cao-intro-content">\n\t\t\t\t\t\t<div class="qv-cao-intro-image"></div>\n\t\t\t\t\t\t<h1>{{ introHeader }}</h1>\n\t\t\t\t\t\t<p>{{ introDescriptionSearch }}</p>\n\t\t\t\t\t\t<p ng-if="state === \'INTRO\'">{{ introDescriptionGenerateInsights }}</p>\n\t\t\t\t\t\t<div class="btns">\n\t\t\t\t\t\t\t<button class=\'lui-button lui-button--large\' tid="go-to-sheet-intro-btn" ng-click="closeAndGoToSheet()" ng-if="state === \'INTRO\' ">\n\t\t\t\t\t\t\t\t{{ goToSheetButton }}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button class=\'lui-button lui-button--success lui-button--large\' tid="generate-insights-intro-btn" ng-click="loadGraphs()" ng-if="state === \'INTRO\' ">\n\t\t\t\t\t\t\t\t{{ introButton }}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div ng-if="state === \'INIT\'">\n\t\t\t\t\t\t\t<div class="loader">\n\t\t\t\t\t\t\t\t<qv-spinner show="state === \'INIT\'" show-delay="300" center-in-parent="true"></qv-spinner>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<p q-translation="cao.loading"></p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="qv-cao-intro" ng-if="state === \'NO_FIELDS\'">\n\t\t\t\t\t<div class="qv-cao-intro-content">\n\t\t\t\t\t\t<div class="qv-cao-intro-image"></div>\n\t\t\t\t\t\t<h1>{{ introHeader }}</h1>\n\t\t\t\t\t\t<p>{{ introDescriptionNoFields }}</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="qv-cao-intro" ng-if="state === \'ERROR\'">\n\t\t\t\t\t<div class="qv-cao-intro-content">\n\t\t\t\t\t\t<h1 q-translation="cao.error.header"></h1>\n\t\t\t\t\t\t<p q-translation="cao.error.description"></p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="qv-cao-intro" ng-if="state === \'NOT_FOUND\'">\n\t\t\t\t\t<div class="qv-cao-intro-content">\n\t\t\t\t\t\t<h1 q-translation="cao.error.header"></h1>\n\t\t\t\t\t\t<p q-translation="cao.error.description.notfound"></p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="qv-cao-section qv-cao-section-insights">\n\t\t\t\t\t<div class="qv-cao-loading" ng-if="state === \'LOADING\'">\n\t\t\t\t\t\t<div class="spinner-container">\n\t\t\t\t\t\t\t<qv-spinner show="state === \'LOADING\'" show-delay="300" center-in-parent="true"></qv-spinner>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="qv-cao-section-header"\n\t\t\t\t\t\tng-if="state === \'LOADED\'">\n\t\t\t\t\t\t<p class="qv-cao-section-header-text" ng-if="chartMatches.length === 0">{{resultLabel}}</p>\n\t\t\t\t\t\t<span style="display:none;" ng-show="state === \'LOADED\'" tid="cao-last-loaded-query" test-attribute="{{query}}" test-loaded-count="{{loadedCount}}">\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<ul class="lui-tabset qv-cao-section-header-text" ng-if="chartMatches.length > 0">\n\t\t\t\t\t\t\t<li class="lui-tab cao-tab qv-cao-section-header-tab1" ng-class="{\'lui-active\' : chartsToShow.activeTab === \'generated\'}" tabindex="0" ng-click="showGeneratedInsights($event)" ng-keypress="showGeneratedInsights($event)">\n\t\t\t\t\t\t\t  <span class="lui-tab__text qv-cao-section-header-tab1-text">{{numberOfGeneratedInsights}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="lui-tab cao-tab qv-cao-section-header-tab2" ng-class="{\'lui-active\' : chartsToShow.activeTab === \'found\'}" tabindex="0" ng-click="showFoundInsights($event)" ng-keypress="showFoundInsights($event)">\n\t\t\t\t\t\t\t  <span class="lui-tab__text qv-cao-section-header-tab2-text">{{numberOfFoundInsights}}</span>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="results-action-container" ng-class="{\'results-action-container--tabset\': chartMatches.length > 0}">\n\t\t\t\t\t\t\t<button class="lui-button clear-insights-btn" ng-if="isClearResultsVisible()" tid="clear-insights-btn" ng-click="clearInsightResults()" q-translation="cao.insights.clear"></button>\n\t\t\t\t\t\t\t<button class="lui-button lui-button--success refresh-insights-btn" ng-if="caoTweakEnabled && learningPerformed" tid="refresh-insights-btn" ng-click="refreshCharts()" q-translation="cao.insight.results.refreshButton"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="qv-cao-section-results" ng-if="state === \'LOADED\'">\n\t\t\t\t\t\t<qv-cao-insight class="qv-cao-section-result-item" ng-class-odd="\'qv-cao-section-result-item-odd\'" ng-focus="onGridFocus()" ng-blur="onGridBlur()" ng-repeat="chart in chartsToShow.charts | orderBy : \'-chart.relevance\'" ng-class="{\'cao-insight-focus\': itemAccFocus}"\n\t\t\t\t\t\t\tgrid-screen-reader="gridScreenReader"\n\t\t\t\t\t\t\tindex="$index"\n\t\t\t\t\t\t\tchart="chart"\n\t\t\t\t\t\t\tapp="::app"\n\t\t\t\t\t\t\tsheets="::sheets"\n\t\t\t\t\t\t\tdebug="::debug"\n\t\t\t\t\t\t\tinteractive="::false"\n\t\t\t\t\t\t\tdirection="direction"\n\t\t\t\t\t\t\tscroll-container="scrollContainer"\n\t\t\t\t\t\t\theader-action="zoomChart"\n\t\t\t\t\t\t\theader-icon="lui-icon--expand"\n\t\t\t\t\t\t\tpermissions="permissions"\n\t\t\t\t\t\t\tsend-feedback="sendFeedback(chart, type)"\n\t\t\t\t\t\t\ton-insight-focus="onGridFocus()"\n\t\t\t\t\t\t\ton-insight-blur="onGridBlur()">\n\t\t\t\t\t\t</qv-cao-insight>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="qv-cao-section-footer" ng-if="state === \'LOADED\' && insightFeedback && hiddenCharts.length > 0 && chartsToShow.activeTab !== \'found\' && !caoTweakEnabled">\n\t\t\t\t\t\t<span q-translation="cao.card.section.hidden,{{hiddenCharts.length}}"></span>\n\t\t\t\t\t\t<a class="lui-fade-button show-more-button" ng-click="showHiddenCharts()">\n\t\t\t\t\t\t\t(<span q-translation="{{ showHidden ? \'cao.card.section.hidden.hide\' : \'cao.card.section.hidden.show\' }}"></span>)\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="qv-cao-section-results qv-cao-section-hidden" ng-if="state === \'LOADED\' && showHidden && chartsToShow.activeTab !== \'found\' && !caoTweakEnabled">\n\t\t\t\t\t\t<qv-cao-insight class="qv-cao-section-result-item" ng-class-odd="\'qv-cao-section-result-item-odd\'" ng-focus="onGridFocus()" ng-blur="onGridBlur()" ng-repeat="chart in hiddenCharts | orderBy : \'-chart.relevance\'" ng-class="{\'cao-insight-focus\': itemAccFocus}"\n\t\t\t\t\t\t\tgrid-screen-reader="gridScreenReader"\n\t\t\t\t\t\t\tindex="$index + renderableCharts.length"\n\t\t\t\t\t\t\tchart="chart"\n\t\t\t\t\t\t\tapp="::app"\n\t\t\t\t\t\t\tsheets="::sheets"\n\t\t\t\t\t\t\tdebug="::debug"\n\t\t\t\t\t\t\tinteractive="::false"\n\t\t\t\t\t\t\tdirection="direction"\n\t\t\t\t\t\t\tscroll-container="scrollContainer"\n\t\t\t\t\t\t\theader-action="zoomChart"\n\t\t\t\t\t\t\theader-icon="lui-icon--expand"\n\t\t\t\t\t\t\tpermissions="permissions"\n\t\t\t\t\t\t\tsend-feedback="sendFeedback(chart, type)"\n\t\t\t\t\t\t\ton-insight-focus="onGridFocus()"\n\t\t\t\t\t\t\ton-insight-blur="onGridBlur()">\n\t\t\t\t\t\t</qv-cao-insight>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="qv-cao-footer" ng-if="nluEnabled && (state === \'INTRO\' || state === \'INIT\')">\n\t\t\t<p>{{ introDescriptionGenerateInsights }}</p>\n\t\t\t<button class=\'lui-button lui-button--success\' tid="generate-insights-intro-btn" ng-click="loadGraphs()">\n\t\t\t\t{{ introButton }}\n\t\t\t</button>\n\t\t</div>\n\t\t<qv-cao-refresh-indicator ng-if="isRefreshIndicatorVisible()" />\n\t</div>\n\n\t<qv-cao-insights-context-panel ng-if="isCaoInsightContextPanelVisible()" app="app" hidden-charts="hiddenCharts" class="context-panel cao-height" tid="cao-context-panel" state="state" insight-feedback="insightFeedback" precedents-enabled="appPrecedents.enabled"></qv-cao-insights-context-panel>\n\t<qv-cao-insights-bottom-panel ng-if="caoTweakEnabled" app="app" insight-feedback="insightFeedback"></qv-cao-insights-bottom-panel>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e=function e(){};function t(e){if(e){var t=e.filter(function(e){return e.type.startsWith("master_")});var n=e.filter(function(e){return e.type.startsWith("field")});if(t.length)return t[0];if(n.length)return n[0]}}function n(e,t,n){var i=null;if(t.type.startsWith("master_")){i={libId:t.libId};e.libItems.push(i)}else if("field"===t.type){i={name:t.name};e.fields.push(i)}i&&n&&(i.cond=n)}e.buildDataCollection=function(e){var i={fields:[],libItems:[]};if(e.entities){e.entities.filter(function(e){return"model_element"==e.type}).forEach(function(e){var r=t(e.model_elements);null!=r&&n(i,r)});e.entities.filter(function(e){return"data_value"==e.type&&"filter-category"==e.role}).forEach(function(e){if(e.data_values&&e.data_values.length){var t=e.data_values[0];n(i,t.owner,["==",t.value])}})}if(e.intent){var r=e.intent.name.split("-")[1];r&&(i.analysisTypes=[r])}return i};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(54),n(122),n(94),n(322),n(91),n(90),n(128),n(49),n(103),n(97),n(222),n(105),n(95),n(123),n(223),n(913),n(914),n(915),n(916),n(917),n(918),n(919),n(920),n(934),n(374)],r=function(e,t,n,i,r,o,a,s,l,c,u,d,f,p,h,v,g,m,b,y,x,S,w){var q=["$scope","qvCaoService","qvAccessibilityGridService","$element","$timeout","qvContextMenu","$exportDialog","luiPopover","$window","qvCaoSelectionService",function(t,m,q,C,_,I,E,D,A,T){var O=this;var k=null;var L=[];var P;this.id=s.generateId();this.activeSheet=l.getModel();this.viewDataToggled=false;this.chartLoaded=false;this.contextMenuStatus={open:false};this.lightEditing=c.getFlag("INSIGHT_LIGHT_EDITING");this.generatedChartScreenReaderLabel=a.get("generated.insight.card.screen.reader");this.insightFeedback=c.getFlag("CE_PRECEDENTS");this.insightLearning=c.getFlag("CE_PRECEDENTS");this.caoTweakEnabled=c.getFlag("CAO_TWEAK");this.popupOpen=false;this.shouldFadeToast=false;this.onResize=function(){if(O.row>=0&&O.col>=0){var e=O.row;var t=O.col;O.setRowAndColumn();var n=e!==O.row;n=n||t!==O.col;n&&q.updateItem(O.id,"CaoInsight",O.row,O.col)}};this.resetFocusOnMouseup=function(){O.isFocused=false};this.setFocusOnInsight=function(e){_(function(){O.isFocused=e})};this.setRowAndColumn=function(){var e=3;A.innerWidth<=1024?e=1:A.innerWidth<=1920&&(e=2);O.row=Math.floor(O.index/e);O.col=O.index%e;O.hideConfidenceText=C[0].clientWidth<390};var M=C.find("#sr-cell-status-label");t.accCallback=function(e,t){var n=e===this.col&&t===this.row;O.tabIndex=n?0:-1;n||O.onInsightBlur();_(function(){O.isFocused=!!n})};this.getChartAddMenuItems=function(e){var t=O.chart.isFound();if(t&&!O.isHidden()){var n=O.chart.getSheetsThisChartAppearsOn()[0];e.addItem({translation:O.getSheetName(n),icon:"goto",tid:"cao-external-link",select:function e(){O.gotoSheet(n)}})}var i=[];O.sheets.forEach(function(e){e.permissions&&e.permissions.update&&i.push({translation:e.qMeta.title,tid:"cao-add-to-sheet",icon:"sheet",select:function n(){t&&(O.isCopyMenuItemSelected=true);O.addChartToSheet(e.qInfo.qId)}})});if(O.permissions&&O.permissions.createSheet&&!O.isHidden()){i.push({translation:"cao.search.add.createNewSheet",tid:"cao-add-to-new-sheet",icon:"plus",select:function e(){O.addToNewSheet()}});if(i.length>0){var r=e.addItem({translation:t?"cao.resultitem.contextMenu.copyItem":"cao.resultitem.contextMenu.addItem",icon:t?"copy":"plus",tid:"cao-add"});i.forEach(function(e){r.addItem(e)})}}};this.getChartMenuItems=function(e){var t={translation:"contextMenu.export",tid:"export",icon:"export",select:function e(){O.exportData()}};O.chart.isDataViewSupported()&&O.interactive&&!O.isHidden()&&e.addItem({translation:O.chart.isViewDataToggled()?"contextMenu.viewSource":"contextMenu.viewData",tid:"toggle-flip-to-table",icon:O.chart.isViewDataToggled()?"back":"table",select:function e(){O.flipToTable()}});if(O.chart.isViewDataToggled())O.enableShare&&O.chart.getObject().supportExportData()&&e.addItem(t);else if(!O.isHidden()){O.insightLearning?O.insightLearning&&O.chart.isModified()&&!O.interactive&&!O.caoTweakEnabled&&e.addItem({translation:"cao.insight.inlinerefresh.indicator.action",tid:"cao-learn",icon:"lightbulb",select:function e(){O.refreshAndLearn()}}):e.addItem({translation:"cao.resultitem.info",tid:"cao-open-info",icon:"info",select:function e(){O.openInfo()}});this.getChartAddMenuItems(e);if(O.enableShare&&(O.chart.getObject().supportExport()||O.chart.getObject().supportExportData())){var n=e.addItem({translation:"contextMenu.exportGroup",tid:"cao-share",icon:"export"});if(O.chart.getObject().supportExport()){n.addItem({translation:"contextMenu.export.chart.image",tid:"cao-print-object-image",select:function e(){O.exportToImage()}});n.addItem({translation:"contextMenu.export.chart.pdf",tid:"cao-print-object-pdf",select:function e(){O.exportToPdf()}})}O.enableShare&&O.chart.getObject().supportExportData()&&n.addItem({translation:"contextMenu.export",tid:"export",select:function e(){O.exportData()}})}O.caoTweakEnabled&&O.chart.isGenerated()&&e.addItem({translation:O.isSelected()?"cao.resultitem.finishEditInsightProperties":"cao.resultitem.editInsightProperties",tid:"cao-editInsightProperties",icon:O.isSelected()?"tick":"edit",select:function e(){O.editInsightProperties()}})}O.isHidden()||e.addItem({translation:O.interactive?"cao.resultitem.collapse":"cao.resultitem.expand",tid:"cao-expandCollapseChart",icon:O.interactive?"collapse":"expand",select:function e(){O.headerAction(O.chart)}});this.insightFeedback&&O.chart.isGenerated()&&e.addItem({translation:this.getFeedbackText(),tid:"cao-hideSuggestedChart",icon:"view",select:function e(){O.sendUserFeedback()}})};this.setChartBlurHandler=function(){this.chart.getObject().setOnBlurHandler(function(){q.setFocus("CaoInsight",O);O.isFocused=true})};this.editorKeyDownHandler=function(e){switch(e.which){case 27:O.headerAction(O.chart).then(function(){O.tabIndex=0;O.isFocused=true});M.text(a.get("Accessibility.Object.CloseFullScreenMode"))}};this.keyDownHandler=function(e){switch(e.which){case q.RIGHT_KEY:case q.LEFT_KEY:case q.UP_KEY:case q.DOWN_KEY:this.contextMenuStatus.open&&I.close();if(0===O.tabIndex){e.stopPropagation();e.preventDefault();this.interactive||q.key(e,"CaoInsight")}break;case 9:if(!O.caoTweakEnabled){e.shiftKey&&I.close();O.onInsightBlur();O.isFocused=!O.isFocused}break;case 13:case 32:I.close();e.stopImmediatePropagation();e.stopPropagation();e.preventDefault();if(!O.chart.isObjectInvalid()&&!O.isHidden()){if(e.shiftKey){O.isFocused=false;O.headerAction(O.chart).then(function(){O.tabIndex=0;O.isFocused=true});M.text(a.get("Accessibility.Object.FullScreenMode"))}else if(O.viewDataSupported()&&O.interactive)O.chart.toggleDataView().then(function(){O.chart.isViewDataToggled()&&M.text(a.get("Accessibility.Object.ViewDataMode"))});else if(O.chart.isViewDataToggled()&&"function"===typeof this.chart.getObject().dataViewObject.focus){O.isFocused=false;this.chart.getObject().dataViewObject.focus()}else if("function"===typeof this.chart.getObject().focus){O.isFocused=false;this.chart.getObject().focus()}else M.text(a.get("Accessibility.Object.CannotViewData"));M.text("")}break;case 27:if(this.contextMenuStatus.open)I.close();else if(this.chart.isViewDataToggled())this.chart.toggleDataView().then(function(){O.chart.isViewDataToggled()||M.text(a.get("Accessibility.Object.ViewChartMode"))});else if(this.interactive){O.headerAction(O.chart).then(function(){O.tabIndex=0;O.isFocused=true});M.text(a.get("Accessibility.Object.CloseFullScreenMode"))}O.isFocused=true;break;case 121:if(e.shiftKey&&!this.contextMenuStatus.open){var n=C.offset();e.pageY=n.top+C.height()/2;e.pageX=n.left+C.width()/2;t.$broadcast("cao.openContextMenu",{event:e,closeFn:function e(){O.isFocused=true},element:C.find(".result-item-graph-container")})}break}};this.onBlur=function(){this.isFocused=false;this.onInsightBlur()};this.$onInit=function(){if(this.interactive){this.tabIndex=0;this.isFocused=true}this.initializeState();this.setRowAndColumn();if(this.interactive)this.tabIndex=0;else{k=q.addItem(this.id,t.accCallback,"CaoInsight",this.col,this.row);this.tabIndex=k?0:-1}d.on("end",this.onResize)};this.$onChanges=function(){this.permissions&&(this.enableShare=this.permissions.exportData)};this.$doCheck=function(){O.caoTweakEnabled&&(O.isSelected()?O.chart.setChartInteractionState(v.STATIC):O.chart.setChartInteractionState(v.ANALYSIS))};this.$onDestroy=function(){O.interactive||q.removeItem("CaoInsight",O.id);e(".qv-cao-scroll-content").unbind("scroll",O.closePopups);d.off("end",this.onResize);h.unsubscribe("cao/insights/adapt_chart");O.shouldFadeToastTimer&&_.cancel(O.shouldFadeToastTimer)};this.isSelected=function(){var e=T.getSelectedChart();return e&&O.chart&&O.chart===e};this.onChartLoaded=function(){this.chartLoaded=true;if(O.caoTweakEnabled){O.chart.activateSelectionWatch(function(){O.chart.isInSelectionState=true});O.chart.deactivateSelectionWatch(function(){O.chart.isInSelectionState=false})}};this.initializeState=function(){e(".qv-cao-scroll-content").bind("scroll",O.closePopups);this.chartLoaded="LOADED"===this.chart.getState();this.chart.refreshChartType();this.matchDetails=this.chart.getMatchDetails()};this.chartClick=function(){!O.chartLoaded||O.headerActionInProgress||O.interactive||O.contextMenuStatus.open||O.isHidden()||O.caoTweakEnabled?O.closePopups():O.headerAction(O.chart)};this.editInsightProperties=function(t){if(t){t.preventDefault();t.stopPropagation();O.caoTweakEnabled&&_(function(){e("button.cao-edit-field-header-title.lui-button").first().focus()})}if(this.caoTweakEnabled&&this.chartLoaded&&!this.headerActionInProgress){O.closePopups();if(this.isSelected()){T.clearSelection();g.storageObj(O.app.id).contextPanel||h.publish("cao/insight/contextPanelToggled",false);h.publish("cao/insight/editInsightProperties",false)}else{O.isCaoContextPanelVisible||h.publish("cao/insight/contextPanelToggled",true);h.publish("cao/insight/editInsightProperties",true);T.selectChart(O.chart)}}};this.sendUserFeedback=function(){O.chart.setModified(false);O.feedbackInProgress=true;O.isHidden()||u.trackEvent(u.customEvents.INSIGHTS_HIDE_CHART_CLICKED,{chart:O.chart.getAnalysisPrecedentId()});O.sendFeedback({chart:O.chart,type:p.Precedents.PrecedentTypes.Dislike}).then(function(){O.interactive&&O.headerAction(O.chart)}).finally(function(){O.feedbackInProgress=false})};this.adaptChart=function(e){if(O.chart===e){O.chart.getTitle().then(function(e){O.dataMode&&(O.dataMode=false);O.title=e});O.shouldFadeToast=false;O.shouldFadeToastTimer=_(function(){O.shouldFadeToast=true},5e3)}};h.subscribe("cao/insights/adapt_chart",O.adaptChart);this.refreshAndLearn=function(){O.feedbackInProgress=true;O.sendFeedback({chart:O.chart,type:p.Precedents.PrecedentTypes.Like}).then(function(){O.interactive&&O.headerAction(O.chart)}).finally(function(){u.trackEvent(u.customEvents.INSIGHTS_LEARN_CLICKED);O.feedbackInProgress=false;O.chart.setModified(false)})};this.isHidden=function(){return O.chart.isHidden()};this.getFeedbackText=function(){return O.chart.isHidden()?"cao.card.unhide":"cao.card.hide"};this.addChartToSheet=function(e){O.isChartAdded=true;O.chart.addToSheet(e).then(function(e){R(e)})};this.addToNewSheet=function(){O.chart.addToNewSheet().then(function(e){R(e)})};this.exportToPdf=function(){O.setFocusOnInsight(false);u.trackEvent(u.customEvents.INSIGHTS_EXPORT,{type:"PDF",chart:O.chart.getAnalysisPrecedentId()});var e=o.showForObject(O.chart.getObject(),"Pdf","object",640,480);e.closed.then(function(){O.setFocusOnInsight(true)});O.closePopups()};this.exportToImage=function(){O.setFocusOnInsight(false);u.trackEvent(u.customEvents.INSIGHTS_EXPORT,{type:"IMAGE",chart:O.chart.getAnalysisPrecedentId()});var e=o.showForObject(O.chart.getObject(),"Image","object",640,480);e.closed.then(function(){O.setFocusOnInsight(true)});O.closePopups()};this.exportData=function(){O.setFocusOnInsight(false);u.trackEvent(u.customEvents.INSIGHTS_EXPORT,{type:"DATA",chart:O.chart.getAnalysisPrecedentId()});var e=E.show(O.chart.getModel());e.closed.then(function(){O.setFocusOnInsight(true)});O.closePopups()};this.navigateToSheet=function(e){O.closePopups();m.toggleCao();i.goToSheet(e,Object.keys(r.States)[r.state])};this.gotoSheet=function(){if(1===O.chart.getSheetsThisChartAppearsOn().length)O.navigateToSheet(O.chart.getSheetsThisChartAppearsOn()[0]);else{var e=["$scope",function(e){e.appearsOnSheets=O.chart.getSheetsThisChartAppearsOn();e.getSheetName=O.getSheetName;e.gotoSheet=O.navigateToSheet}];N(w,e,C.find(".gotoSheet")[0],"top")}};this.confidenceClosed=function(){O.headerActionInProgress=false};this.confidenceOpened=function(){O.headerActionInProgress=true};this.closeConfidenceRegistration=function(e){P=e};this.closePopups=n.throttle(function(){P&&P();L.forEach(function(e,t){_(function(){e.close();L.splice(t,1)})});O.headerActionInProgress=false},200,{trailing:false});this.openAddPopover=function(){var e=["$scope",function(e){e.sheets=O.sheets;e.addChartToSheet=O.addChartToSheet;e.addToNewSheet=O.addToNewSheet;e.permissions=O.permissions}];N(b,e,C.find(".add-to-button")[0],"bottom")};this.openDebugInformation=function(){var e=["$scope",function(e){e.debugInformation=O.chart.getSearchReport();e.visualization=O.chart.chart.visualization;e.complexity=O.chart.chart.complexity}];N(y,e,C.find(".debug-information")[0],"bottom")};this.openShare=function(){if(O.popupOpen)O.popupOpen=false;else{O.popupOpen=true;var e=["$scope",function(e){if(!O.chart.isViewDataToggled()&&O.chart.getObject().supportExport()){e.exportToPdf=O.exportToPdf;e.exportToImage=O.exportToImage}O.chart.getObject().supportExportData()&&(e.exportData=O.exportData)}];N(x,e,C.find(".share")[0],"bottom")}};this.openInfo=function(){var e=function e(){_(function(){O.isFocused=true})};_(function(){O.isFocused=false});var t=["$scope",function(e){e.type=O.chart.chart.visualization.type;e.title=O.chart.isGenerated()?"cao.search.info.title.generated":"cao.search.info.title.found";e.matches=[];O.matchDetails&&O.matchDetails.forEach(function(t){var n="";var i="";if(O.chart.isGenerated()){switch(t.matchedOn){case"exactMatch":n=a.get("cao.search.generated.exactMatch");break;case"literalMatch":n=a.get("cao.search.generated.literalMatch");break;case"headMatch":n=a.get("cao.search.generated.headMatch");break;case"headSynonymMatch":n=a.get("cao.search.generated.headSynonymMatch");break;case"headStemMatch":n=a.get("cao.search.generated.headStemMatch");break;case"headStemSynonymMatch":n=a.get("cao.search.generated.headStemSynonymMatch");break;case"partialTokenMatch":n=a.get("cao.search.generated.partialTokenMatch");break;case"substrPartialMatch":n=a.get("cao.search.generated.substrPartialMatch");break;case"semanticMatch":n=a.get("cao.search.generated.semanticMatch");break;case"valueMatch":n=a.get("cao.search.generated.valueMatch");break;default:break}n=n.replace(/\{1\}/g,function(e){return"<b>"+e+"</b>"});i=a.get(n,[O.chart.getSearchReport().search.searchPhrase.text,t.matchedField]);e.matches.push(i)}else if(O.chart.isFound()){switch(t.matchedField){case"titleMatch":n=a.get("cao.search.titleMatch");break;case"subTitleMatch":n=a.get("cao.search.subTitleMatch");break;case"footnoteMatch":n=a.get("cao.search.footnoteMatch");break;case"basedOnMatch":n=a.get("cao.search.basedOnMatch");break;default:break}n=n.replace(/\{1\}/g,function(e){return"<b>"+e+"</b>"});i=a.get(n,[O.chart.getSearchReport().search.searchPhrase.text,t.matchedOn]);e.matches.push(i)}});e.formattedSheetLinks=[];var t=a.get("cao.search.info.found.match");t=t.replace(/\{0\}/g,function(e){return"<b>"+e+"</b>"});O.chart.getSheetsThisChartAppearsOn().forEach(function(n){var i=O.getSheetName(n);var r=a.get(t,[i]);e.formattedSheetLinks.push({label:r,sheetId:n})});e.gotoSheet=O.navigateToSheet}];N(S,t,C.find(".info")[0],"bottom",e)};this.getSheetName=function(e){var t=O.sheets.filter(function(t){return t.qInfo.qId===e})[0];if(t)return t.qMeta.title};function N(e,t,n,i,r){var o={template:e,controller:t,dock:i,closeOnResize:true,alignTo:n};var a=D.show(o);L.push(a);a.closed.then(function(){O.headerActionInProgress=false;O.popupOpen=false;"function"===typeof r&&r()});O.headerActionInProgress=true}function R(e){m.scrapeApp();u.trackEvent(u.customEvents.INSIGHTS_ADD_CHART,{chart:O.chart.getAnalysisPrecedentId()});O.closePopups();_(function(){C.find(".result-item-buttons").addClass("animate")});_(function(){O.addedToSheet=true;O.chart.getSheetsThisChartAppearsOn().indexOf(e.id)>-1&&(O.isCopyMenuItemSelected?O.addOrCopySuccessText="cao.insight.copiedToSheet":O.addOrCopySuccessText="cao.search.addedToSheet");f.resizeCharts(A);_(function(){C.find(".result-item-added").addClass("animate")})},500);_(function(){C.find(".goto-sheet").addClass("animate")},2500);_(function(){O.addedToSheet=false;C.find(".goto-sheet").removeClass("animate");C.find(".result-item-added").removeClass("animate");C.find(".result-item-buttons").removeClass("animate")},4e3)}this.flipToTable=function(){var e=O.chart.isDataViewSupported()&&O.interactive;if(e){u.trackEvent(u.customEvents.INSIGHTS_FLIP_TO_TABLE);O.chart.toggleDataView();O.dataMode=!O.dataMode}};this.viewDataSupported=function(){return O.chart.isDataViewSupported()};t.$watch(function(){return e(".qv-contextmenu").length},function(){if(0===e(".qv-contextmenu").length)_(function(){O.chart.setChartInteraction(true);O.contextMenuStatus={open:0!==e(".qv-contextmenu").length}},300);else{O.chart.setChartInteraction(false);O.contextMenuStatus={open:true}}});t.$watch(function(){return O.chart.shouldRedraw},function(){O.chart.getTitle().then(function(e){O.dataMode&&(O.dataMode=false);O.title=e})})}];var C={transclude:true,template:m,bindings:{chart:"<",app:"<",headerAction:"<",headerIcon:"@",interactive:"<",direction:"<",sheets:"<",alwaysShowHeader:"<",scrollContainer:"<",debug:"<",permissions:"<",index:"<",gridScreenReader:"=",onInsightBlur:"&",onInsightFocus:"&",sendFeedback:"&",isCaoContextPanelVisible:"<"},controller:q};return t.nativeComponent("qvCaoInsight",C)}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="cao-insight">\n\t<div class="cao-insight-in-selection-overlay" ng-if="$ctrl.chart.isInSelectionState && $ctrl.caoTweakEnabled"></div>\n\t<div class="cao-insight-container" ng-class="{\'zoom\': $ctrl.interactive, \'hidden\': $ctrl.isHidden(), \'generated\': $ctrl.chart.isGenerated(), \'lightedit\': $ctrl.lightEditing && !$ctrl.caoTweakEnabled, \'selected\': $ctrl.isSelected()}" tabindex="{{$ctrl.tabIndex}}"\n\t\tng-keydown="$ctrl.keyDownHandler($event)" focus-when="$ctrl.isFocused" ng-focus="$ctrl.onInsightFocus()" dir="{{$ctrl.direction}}" test-chart-loaded="{{$ctrl.chartLoaded}}">\n\t\t<div class="hidden-screen-reader-label" aria-label="{{$ctrl.gridScreenReader}}"></div>\n\t\t<label class="hidden-screen-reader-label" id="sr-cell-status-label" aria-live="assertive"></label>\n\t\t<div class="result-item-title-bar" dir="{{$ctrl.direction}}" ng-class="{ \'interactive\': $ctrl.interactive}">\n\t\t\t<div class="result-item-title" title="{{ $ctrl.title }}" qva-direction x-dir-setting="{{$ctrl.direction}}" x-dir-text="{{$ctrl.title}}" ng-click="$ctrl.editInsightProperties($event)" tid="insight-chart-edit-button">\n\t\t\t\t<span>{{ $ctrl.title }}</span>\n\t\t\t</div>\n\t\t\t<div class="result-item-title-icons" ng-class="{ \'active\': $ctrl.headerActionInProgress || $ctrl.interactive || $ctrl.isSelected() }" q-title-translation="cao.resultitem.info">\n\t\t\t\t<button ng-click="$ctrl.openInfo()" ng-keyup="$event.keyCode == 13 ? $ctrl.openInfo() : null" class="insight-chart-info-button result-item-title-icon" ng-show="!$ctrl.insightLearning && $ctrl.chartLoaded && !$ctrl.isHidden()">\n\t\t\t\t\t<span class="info lui-icon lui-icon--info"></span>\n\t\t\t\t</button>\n\t\t\t\t<button ng-if="$ctrl.caoTweakEnabled && !$ctrl.isSelected() && $ctrl.chart.isGenerated()" class="result-item-title-icon" ng-click="$ctrl.editInsightProperties($event)" ng-keyup="$event.keyCode == 13 ? $ctrl.editInsightProperties($event) : null"\n\t\t\t\t\tq-title-translation="cao.resultitem.editInsightProperties" tid="insight-chart-edit-properties-button" ng-show="$ctrl.chartLoaded && !$ctrl.isHidden()">\n\t\t\t\t\t<span class="lui-icon--edit lui-icon"></span>\n\t\t\t\t</button>\n\t\t\t\t<button ng-if="$ctrl.caoTweakEnabled && $ctrl.isSelected()" class="result-item-title-icon" ng-click="$ctrl.editInsightProperties($event)" ng-keyup="$event.keyCode == 13 ? $ctrl.editInsightProperties($event) : null" q-title-translation="cao.resultitem.finishEditInsightProperties"\n\t\t\t\t\ttid="insight-chart-finish-edit-properties-button" ng-show="$ctrl.chartLoaded">\n\t\t\t\t\t<span class="lui-icon--tick lui-icon result-item-title-icon-checkmark"></span>\n\t\t\t\t</button>\n\t\t\t\t<button ng-click="$ctrl.openShare()" ng-keyup="$event.keyCode == 13 ? $ctrl.openShare() : null" class="result-item-title-icon" ng-if="$ctrl.enableShare" q-title-translation="contextMenu.exportGroup" tid="insight-chart-export-button" ng-show="$ctrl.chartLoaded && !$ctrl.isHidden()">\n\t\t\t\t\t<span class="share lui-icon lui-icon--export"></span>\n\t\t\t\t</button>\n\t\t\t\t<button ng-click="$ctrl.openDebugInformation()" ng-keyup="$event.keyCode == 13 ? $ctrl.openDebugInformation() : null" class="result-item-title-icon" ng-if="$ctrl.debug">\n\t\t\t\t\t<span class="debug-information lui-icon lui-icon--cogwheel"></span>\n\t\t\t\t</button>\n\t\t\t\t<button tabindex="0" ng-if="!$ctrl.interactive" class="result-item-title-icon" ng-click="$ctrl.headerAction($ctrl.chart)" ng-keyup="$event.keyCode == 13 ? $ctrl.headerAction($ctrl.chart) : null" q-title-translation="cao.resultitem.expand" tid="insight-chart-expand-button"\n\t\t\t\t\tng-show="$ctrl.chartLoaded && !$ctrl.isHidden()">\n\t\t\t\t\t<span class="qv-cao-item-expand-icon lui-icon" ng-class="$ctrl.headerIcon"></span>\n\t\t\t\t</button>\n\t\t\t\t<button ng-if="$ctrl.interactive" class="result-item-title-icon" ng-click="$ctrl.headerAction($ctrl.chart)" ng-keyup="$event.keyCode == 13 ? $ctrl.headerAction($ctrl.chart) : null" q-title-translation="cao.resultitem.collapse" tid="zoomed-chart-shrink-button">\n\t\t\t\t\t<span class="lui-icon--remove lui-icon"></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="chart-container">\n\t\t\t<div class="insight">\n\t\t\t\t<qv-cao-insight-chart set-blur-handler="$ctrl.setChartBlurHandler()" get-chart-menu-items="$ctrl.getChartMenuItems(menu)" ng-click="$ctrl.chartClick(id)" class="result-item-graph" chart="$ctrl.chart" app="::$ctrl.app" on-chart-loaded="$ctrl.onChartLoaded()"\n\t\t\t\t\tinteractive="$ctrl.interactive" scroll-container="$ctrl.scrollContainer" object="$ctrl.object" ng-class="{\'clickable\': !$ctrl.contextMenuStatus.open}" context-menu-status="$ctrl.contextMenuStatus" index="$ctrl.index" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="result-item-footer" dir="{{$ctrl.direction}}">\n\t\t\t<div ng-if="$ctrl.chart.isGenerated()" aria-hidden="true" class="result-item-buttons" ng-show="!$ctrl.addedToSheet">\n\t\t\t\t<div class="footer-left" ng-if="!$ctrl.interactive">\n\t\t\t\t\t<cao-confidence ng-if="!$ctrl.caoTweakEnabled" class="result-item-title-icon" data-chart="$ctrl.chart" button-id="confidence_{{$parent.$parent.$parent.$parent.$index}}" ng-show="$ctrl.insightLearning" close-notification="$ctrl.closeConfidenceRegistration(handler)"\n\t\t\t\t\t\topened="$ctrl.confidenceOpened()" closed="$ctrl.confidenceClosed()" hide-text="$ctrl.hideConfidenceText"></cao-confidence>\n\t\t\t\t\t<span class="title generated-insight-title" ng-show="!$ctrl.insightLearning" q-translation="cao.search.card.generated" aria-label="{{$ctrl.generatedChartScreenReaderLabel}}"></span>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="footer-right">\n\t\t\t\t\t<div class="feedback-button-container" ng-if="$ctrl.insightFeedback && !$ctrl.caoTweakEnabled" qva-direction x-dir-setting="{{$ctrl.direction}}">\n\t\t\t\t\t\t<lui-button tid="insight-feedback-button" ng-click="$ctrl.sendUserFeedback()" ng-disabled="!$ctrl.chartLoaded || $ctrl.feedbackInProgress" tabindex="-1" q-translation="{{$ctrl.getFeedbackText()}}"\n\t\t\t\t\t\t\tng-class="{\'btn-state-unhide\': $ctrl.chart.isHidden(), \'btn-state-hide\': !$ctrl.chart.isHidden()}">\n\t\t\t\t\t\t</lui-button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="lui-buttongroup" tid="cao-add-to-sheet-button" ng-if="$ctrl.activeSheet.layout.permissions.update && $ctrl.permissions.createSheet">\n\t\t\t\t\t\t<lui-button ng-click="$ctrl.addChartToSheet()" tabindex="-1" ng-disabled="!$ctrl.chartLoaded || $ctrl.isChartAdded" q-translation="cao.search.addToSheet">\n\t\t\t\t\t\t</lui-button>\n\t\t\t\t\t\t<lui-button class="add-to-button" tabindex="-1" q-title-translation="cao.search.addToSheetOptions" ng-disabled="!$ctrl.chartLoaded" ng-click="$ctrl.openAddPopover()">\n\t\t\t\t\t\t\t<span class="lui-overlay-button__caret lui-caret"></span>\n\t\t\t\t\t\t</lui-button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="lui-buttongroup" ng-if="!$ctrl.activeSheet.layout.permissions.update && $ctrl.permissions.createSheet">\n\t\t\t\t\t\t<lui-button class="add-to-button" tabindex="-1" q-title-translation="cao.search.addToSheetOptions" ng-disabled="!$ctrl.chartLoaded" ng-click="$ctrl.openAddPopover()">\n\t\t\t\t\t\t\t<span q-translation="cao.search.addToSheet"></span>\n\t\t\t\t\t\t\t<span class="lui-overlay-button__caret lui-caret"></span>\n\t\t\t\t\t\t</lui-button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div ng-if="$ctrl.chart.isFound()" ng-class="{ \'itemAdded\': $ctrl.addedToSheet }" class="result-item-added result-item-buttons">\n\t\t\t\t<span>\n\t\t\t\t\t<div class="goto-sheet" ng-show="$ctrl.addedToSheet">\n\t\t\t\t\t\t<span class="tick-highlight" qva-direction x-dir-setting="{{$ctrl.direction}}">\n\t\t\t\t\t\t\t<span class="lui-icon lui-icon--tick"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span q-translation="{{$ctrl.addOrCopySuccessText}}"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</span>\n\t\t\t\t<a ng-click="$ctrl.gotoSheet($ctrl.chart.getSheetsThisChartAppearsOn()[0])" q-title-translation="Storytelling.Sheet.GoToSheet">\n\t\t\t\t\t<span ng-if="$ctrl.chart.getSheetsThisChartAppearsOn().length === 1" x-dir-text="{{ $ctrl.getSheetName($ctrl.chart.getSheetsThisChartAppearsOn()[0]) }}" qva-direction x-dir-setting="{{$ctrl.direction}}">\n\t\t\t\t\t\t{{ $ctrl.getSheetName($ctrl.chart.getSheetsThisChartAppearsOn()[0]) }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span ng-if="$ctrl.chart.getSheetsThisChartAppearsOn().length > 1" q-translation="cao.search.multipleSources">\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="gotoSheet lui-icon lui-icon--goto" qva-direction x-dir-setting="{{$ctrl.direction}}"></span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="editor cao-chart-light-editing" ng-if="$ctrl.lightEditing && $ctrl.interactive && $ctrl.chart.isGenerated() && !$ctrl.caoTweakEnabled" ng-keydown="$ctrl.editorKeyDownHandler($event)">\n\t\t\x3c!-- TODO: move to directive --\x3e\n\t\t<div class=\'qv-panel-properties\' style="overflow: auto;">\n\t\t\t<qv-cao-insight-editor chart="$ctrl.chart" app="$ctrl.app" />\n\t\t</div>\n\t</div>\n\t<div class="cao-chart-refresh-indicator-container" ng-class="{\'visible\': $ctrl.insightLearning && $ctrl.chart.isModified() && !$ctrl.interactive && !$ctrl.shouldFadeToast, \'fade\': $ctrl.shouldFadeToast}" ng-if="$ctrl.insightLearning && $ctrl.chart.isModified() && !$ctrl.interactive" ng-click="$ctrl.adaptChart($ctrl.chart)">\n\t\t<div class="cao-chart-refresh-indicator-content">\n\t\t\t<div class="cao-chart-refresh-top">\n\t\t\t\t<span class="lui-icon lui-icon--close" ng-click="$ctrl.chart.setModified(false)"></span>\n\t\t\t</div>\n\t\t\t<div class="cao-chart-text" ng-class="{\'cao-chart-text-no-refresh\': $ctrl.caoTweakEnabled}">\n\t\t\t\t<div q-translation="cao.insight.inlinerefresh.indicator.body.lineone" />\n\t\t\t\t<div q-translation="cao.insight.inlinerefresh.indicator.body.linetwo" />\n\t\t\t</div>\n\t\t\t<div class="cao-chart-refresh-indicator-action-container">\n\t\t\t\t<div class="cao-chart-refresh-action">\n\t\t\t\t\t<a class="cao-chart-refresh" ng-click="$ctrl.refreshAndLearn()" q-translation="cao.insight.inlinerefresh.indicator.action" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t){e.exports='<lui-popover class="cao-add-popover">\n\t<div class="lui-popover__body lui-nopad popover-body">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item lui-list__action" ng-click="addChartToSheet(sheet.qInfo.qId)" ng-repeat="sheet in sheets"\n\t\t\t ng-if="sheet.permissions.update">\n\t\t\t\t<span class="lui-list__aside lui-icon lui-icon--sheet"></span>\n\t\t\t\t<span class="lui-list__text">{{ sheet.qMeta.title }}</span>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item lui-list__action" ng-click="addToNewSheet()">\n\t\t\t\t<span class="lui-list__aside lui-icon lui-icon--plus"></span>\n\t\t\t\t<span class="lui-list__text" q-translation="cao.search.add.createNewSheet"></span>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</lui-popover>'},function(e,t){e.exports='<lui-popover class="cao-debug-popover">\n\t<lui-popover-body>\n\t\t<div>\n\t\t\t<b>Debug Information</b>\n\t\t\t<pre>{{ debugInformation | json : spacing }}</pre>\n\t\t\t<b ng-if="visualization.type === \'generated\'">Visualization</b>\n\t\t\t<pre ng-if="visualization.type === \'generated\'">{{ visualization | json : spacing }}</pre>\n\t\t\t<b ng-if="visualization.type === \'generated\'">Complexity</b>\n\t\t\t<pre ng-if="visualization.type === \'generated\'">Estimate: {{ complexity }}</pre>\n\n\t\t\t<b ng-if="visualization.type === \'found\'">Chart</b>\n\t\t\t<pre ng-if="visualization.type === \'found\'">\n{\n  chartId: {{ visualization.chartId }},\n  appearsOnSheets: {{ visualization.appearsOnSheets | json : spacing }}}\n\t\t\t</pre>\n\t\t</div>\n\t</lui-popover-body>\n</lui-popover>\n'},function(e,t){e.exports='<lui-popover class="cao-share-popover">\n\t<div class="lui-popover__body lui-nopad popover-body">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item lui-list__action" ng-if="exportToImage" ng-click="exportToImage()" tid="share-popover-export-image">\n\t\t\t\t<a class="lui-list__text" q-translation="contextMenu.export.chart.image"></a>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item lui-list__action" ng-if="exportToPdf" ng-click="exportToPdf()" tid="share-popover-export-pdf">\n\t\t\t\t<a class="lui-list__text" q-translation="contextMenu.export.chart.pdf"></a>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item lui-list__action" ng-if="exportData" ng-click="exportData()" tid="share-popover-export-data">\n\t\t\t\t<a class="lui-list__text" q-translation="contextMenu.export"></a>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</lui-popover>'},function(e,t){e.exports='<lui-popover class="cao-info-popover">\n    <lui-popover-body>\n        <div>\n            <ul>\n                <li class="cao-popover-title" q-translation="{{ title }}"></li>\n                <li ng-repeat="match in matches" ng-bind-html="match"></li>\n                <li ng-if="matches.length === 0 && type === \'generated\'" q-translation="cao.search.info.body.generated"></li>\n                <li ng-repeat="sheet in formattedSheetLinks">\n                    <a class="gotoSheet" ng-click="gotoSheet(sheet.sheetId)">\n                        <span ng-bind-html="sheet.label"></span>\n                        &nbsp; <span class="lui-icon lui-icon--goto"></span>\n                    </a>\n                </li>\n            </ul>\n        </div>\n    </lui-popover-body>\n</lui-popover>\n'},function(e,t){e.exports='<lui-popover class="cao-goto-sheet-popover">\n    <div class="lui-popover__body lui-nopad popover-body">\n        <ul class="lui-list">\n            <li class="lui-list__item lui-list__action" ng-repeat="sheet in appearsOnSheets track by $index" ng-click="gotoSheet(sheet)">\n                <span class="lui-list__aside lui-icon lui-icon--goto"></span>\n                <span class="lui-list__text">{{ getSheetName(sheet) }}</span>\n            </li>\n        </ul>\n    </div>\n</lui-popover>'},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){var t={restrict:"A",scope:{focusWhen:"="},controller:["$scope","$element",function(e,t){e.$watch("focusWhen",function(e){e?t.focus():false===e&&t.blur()})}]};e.directive("focusWhen",function(){return t})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(95),n(91),n(103),n(49),n(196),n(187),n(178),n(921),n(922),n(923),n(924),n(925),n(926),n(927),n(930),n(218),n(932),n(221)],r=function(e,t,n,i,r,o,a,s,l,c,u,d){var f=["qvCaoSearchService","qvCaoService","qvCaoChartService","qvAppDetailsService","luiPopover",function(e,l,f,p,h){var v=this;var g=[];var m;this.insightLearning=r.getFlag("CE_PRECEDENTS");this.caoTweakEnabled=r.getFlag("CAO_TWEAK");this.$onInit=function(){p.get().then(function(e){m=e.model.app.published||!e.model.permissions.update});t.subscribe(o.PUBSUB_TOPIC,S)};this.$onDestroy=function(){t.unsubscribe(o.PUBSUB_TOPIC)};function b(e){v.chart.setModified(v.chart.isModified()||!e&&v.chart.getMatches().filter(function(e){return e.isDirty}).length>0);v.chart.adaptChart(v.chart.isModified()).then(function(){y()});t.publish("cao/insights/adapt_chart",v.chart)}function y(){g.forEach(function(e,t){e.popup.close();g.splice(t,1)})}function x(e){g.forEach(function(t,n){e===t.id&&g.splice(n,1)})}function S(e){var t=v.chart.getMatches();var n=e.slotA;var r=e.slotB;var o,a;t.forEach(function(e,t){e.slot===n?o=t:e.slot===r&&(a=t)});var s=t[a];t[a]=t[o];t[o]=s;t[a].slot=r;t[o].slot=n;i.trackEvent(i.customEvents.INSIGHTS_LIGHT_EDITING_DRAG_AND_DROP,{chart:v.chart.getAnalysisPrecedentId()});b(true)}this.toggleMatchDetails=function(e){e.expanded=!e.expanded};this.getFields=function(){return v.chart.getMatches().filter(function(e){return!e.slotRole})};this.getMeasures=function(){return v.chart.getMatches().filter(function(e){return e.slotRole===o.MEASURE})};this.getDimensions=function(){return v.chart.getMatches().filter(function(e){return e.slotRole===o.DIMENSION})};this.getDimensionCount=function(){return v.getDimensions().length};this.getMeasureCount=function(){return v.getMeasures().length};this.getFieldCount=function(){return v.getFields().length};this.hasMeasures=function(){return v.chart.getMatches().filter(function(e){return e.slotRole===o.MEASURE}).length>0};this.hasDimensions=function(){return v.chart.getMatches().filter(function(e){return e.slotRole===o.DIMENSION}).length>0};this.applyLearning=function(){f.refreshInsights().then(function(e){var n=e.recommendations.filter(function(e){return e.chart.visualization.visualization.analysis.analysis===v.chart.chart.visualization.visualization.analysis.analysis})[0];if(n){v.chart.chart.visualization=n.chart.visualization;delete v.chart.rendered;v.chart.shouldRedraw=true;v.chart.recalculateConfidence=true}else v.chart.invalidFromLearning=true;l.setRefreshIndicatorVisibility(true);t.publish("cao/insight/learning_applied")})};this.changeAggr=function(e,t){v.chart.getMatches().forEach(function(n){if(n.slot===e.slot){n.isDirty=true;n.aggr=t}});i.trackEvent(i.customEvents.INSIGHTS_LIGHT_EDITING_AGGREGATION_CHANGE,{chart:v.chart.getAnalysisPrecedentId()});b()};this.changeField=function(e,t){v.lastAggr=e.aggr||v.lastAggr;v.chart.getMatches().forEach(function(n){if(n.slot===e.slot){n.isDirty=true;v.caoTweakEnabled&&v.toggleMatchDetails(n);if(t.libId){n.libId=t.libId;n.libIdLabel=t.libIdLabel;delete n.field;delete n.aggr}else{n.field=t.name;n.slotRole!==o.MEASURE||n.aggr||(n.aggr=v.lastAggr);delete n.libId;delete n.libIdLabel}}});i.trackEvent(i.customEvents.INSIGHTS_LIGHT_EDITING_FIELD_CHANGE,{chart:v.chart.getAnalysisPrecedentId()});b()};this.showChangeAggr=function(e,t){var n=["$scope",function(e){e.field=t;e.change=v.changeAggr;e.wrappedAggregations=a.COMMON_FUNCTIONS.map(function(e){return{text:s.getFormattedAggregation(e),action:function n(){v.changeAggr(t,s.getFormattedAggregation(e))}}})}];w(c,n,e.currentTarget,"bottom","cao-changeAggregation_"+t.slot)};this.canChangeAggregation=function(e){if(!e.restrictions)return true;var t=e.restrictions.filter(function(e){return"aggregation"===e.name})[0];return!t};this.showChangeField=function(t,n,i){var r=["$scope",function(t){var r=[];var a=[];var s=[];var l=n.restrictions?n.restrictions.filter(function(e){return"candidates"==e.name})[0]:void 0;function c(e){if(!l)return true;return l.types.indexOf(e)>-1}function u(e){r=c("eField")?e.filter(function(e){return!e.masterItem}):[];a=c("eDimLib")?e.filter(function(e){return e.masterItem&&e.classifications.filter(function(e){return e===o.DIMENSION}).length>0}):[];s=c("eMsrLib")?e.filter(function(e){return e.masterItem&&e.classifications.filter(function(e){return e===o.MEASURE}).length>0}):[];t.field=n;t.fields=r;if(i===o.DIMENSION){t.dimensions=a;t.measures=[]}else if(i===o.MEASURE){t.measures=s;t.dimensions=[]}else{t.dimensions=a;t.measures=s}}function d(n){var i=e.getMatchingFields(n,m);t.highlight=n;u(i)}var f=e.getMatchingFields(void 0,m);u(f);t.change=v.changeField;t.filterFields=d}];w(u,r,t.currentTarget,"bottom","cao-changeField_"+n.slot);v.caoTweakEnabled&&v.toggleMatchDetails(n)};this.showAnalysisInfo=function(e){var t=["$scope",function(e){var t=v.chart.chart.visualization.visualization.analysis.analysis;var i=n.get("cao.insight.analysis."+t);e.analysisTitle=n.get("cao.insight.analysis.popover.title",[i]);e.analysisDescription=n.get("cao.insight.analysis."+t+".description")}];w(d,t,e.currentTarget,"left","cao_analysisPopover")};function w(e,t,n,i,r){if(g.filter(function(e){return e.id===r})[0]){y();return}y();var o={template:e,controller:t,dock:i,alignTo:n,closeOnResize:true,outsideIgnore:r};var a=h.show(o);a.closing.then(function(){x(r)});a.closed.then(function(){n.focus()});g.push({id:r,popup:a})}}];var p={transclude:true,template:l,bindings:{chart:"=",app:"="},controller:f};return e.nativeComponent("qvCaoInsightEditor",p)}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="title" q-translation="cao.card.title.editor.title" ng-if="!$ctrl.caoTweakEnabled" />\n<div class="cao-editor-field-list">\n    <div class="header">\n        <span q-translation="cao.editor.title" />\n        <a ng-click="$ctrl.showAnalysisInfo($event)" id="cao_analysisPopover" qva-outside-ignore-for="cao_analysisPopover">\n            <span class="lui-icon lui-icon--help" />\n        </a>\n    </div>\n    <div class="analysis-type">\n        <span tid="analyis-type-string" q-translation="{{\'cao.insight.analysis.\' + $ctrl.chart.getChartType()}}" />\n    </div>\n\n    \x3c!--- GENERIC FIELDS --\x3e\n    <div class="header" ng-if="!$ctrl.hasDimensions() && !$ctrl.hasMeasures()">\n        <span q-translation="cao.fieldPicker.tab.fields">\n    </div>\n    <div class="cao-edit-field qv-pp-sortable" qv-cao-field-drop-zone data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}"\n        ng-repeat="match in $ctrl.getFields()">\n        <div class="cao-edit-field-header" ng-class="{\'draggable\': $ctrl.fieldCount > 1}" qv-cao-field-draggable\n            data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}">\n            \x3c!-- Header title --\x3e\n            <button class="cao-edit-field-header-title lui-button" ng-click="$ctrl.showChangeField($event, match)" qva-outside-ignore-for="{{\'cao-changeField_\' + match.slot}}">\n                <span ng-if="match.field" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.field }}\n                </span>\n                <span ng-if="match.libIdLabel" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.libIdLabel }}\n\t\t\t\t</span>\n\t\t\t\t<div class="cao-field-caret-container" ng-if="$ctrl.insightLearning && $ctrl.caoTweakEnabled">\n\t\t\t\t\t<span class="lui-icon lui-button__icon cao-edit-expander-span" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n\t\t\t\t</div>\n            </button>\n            \x3c!-- Header icons --\x3e\n            <button class="lui-button cao-edit-expander" ng-if="!$ctrl.caoTweakEnabled" ng-show="$ctrl.insightLearning" ng-click="$ctrl.toggleMatchDetails( match )">\n                <span class="lui-icon lui-button__icon" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n            </button>\n            <i class="lui-icon lui-icon--draggable cao-edit-field-draggable cao-edit-sortable-handle" ng-if="$ctrl.getFieldCount() > 1"\n                q-title-translation="Common.Move"></i>\n        </div>\n\n        <qv-cao-field-details ng-if="$ctrl.insightLearning && !$ctrl.caoTweakEnabled" class="cao-edit-field-details" data-match="match"\n            data-apply-callback="$ctrl.applyLearning" field-id="details_field_{{$index}}" chart="$ctrl.chart" ng-show="match.expanded" />\n    </div>\n\n\n    \x3c!--- DIMENSIONS--\x3e\n    <div class="header" ng-if="$ctrl.hasDimensions()">\n        <span q-translation="cao.fieldPicker.tab.dimensions">\n    </div>\n    <div class="cao-edit-field qv-pp-sortable" qv-cao-field-drop-zone data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}"\n        ng-repeat="match in $ctrl.getDimensions()">\n        <div class="cao-edit-field-header" ng-class="{\'draggable\': $ctrl.dimensionCount > 1}" qv-cao-field-draggable\n            data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}">\n            \x3c!-- Header title --\x3e\n            <button class="cao-edit-field-header-title lui-button" ng-click="$ctrl.showChangeField($event, match, \'dimension\')" qva-outside-ignore-for="{{\'cao-changeField_\' + match.slot}}">\n                <span ng-if="match.field" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.field }}\n                </span>\n                <span ng-if="match.libIdLabel" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.libIdLabel }}\n\t\t\t\t</span>\n\t\t\t\t<div class="cao-field-caret-container" ng-if="$ctrl.insightLearning && $ctrl.caoTweakEnabled">\n\t\t\t\t\t<span class="lui-icon lui-button__icon cao-edit-expander-span" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n\t\t\t\t</div>\n            </button>\n            \x3c!-- Header icons --\x3e\n            <button class="lui-button cao-edit-expander" ng-if="!$ctrl.caoTweakEnabled" ng-show="$ctrl.insightLearning" ng-click="$ctrl.toggleMatchDetails( match )">\n                <span class="lui-icon lui-button__icon" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n            </button>\n            <i class="lui-icon lui-icon--draggable cao-edit-field-draggable cao-edit-sortable-handle" ng-if="$ctrl.getDimensionCount() > 1"\n                q-title-translation="Common.Move"></i>\n        </div>\n\n        <qv-cao-field-details ng-if="$ctrl.insightLearning && !$ctrl.caoTweakEnabled" class="cao-edit-field-details" data-match="match"\n            data-apply-callback="$ctrl.applyLearning" field-id="details_dimension_{{$index}}" chart="$ctrl.chart"\n            ng-show="match.expanded" />\n    </div>\n\n    \x3c!--- MEASURES --\x3e\n    <div class="header cao-msrs-header" ng-if="$ctrl.hasMeasures()">\n        <span q-translation="cao.fieldPicker.tab.measures">\n    </div>\n    <div class="cao-edit-field qv-pp-sortable" qv-cao-field-drop-zone data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}"\n        ng-repeat="match in $ctrl.chart.getMatches()" ng-if="match.slotRole === \'measure\'">\n        <div class="cao-edit-field-header" ng-class="{\'draggable\': $ctrl.measureCount > 1}" qv-cao-field-draggable\n            data-slot="{{match.slot}}" data-slot-role="{{match.slotRole}}">\n            \x3c!-- Change aggregation dropdown --\x3e\n            <button ng-if="match.aggr" class="lui-button cao-edit-field-header-aggregation" ng-click="$ctrl.showChangeAggr($event, match)"\n                ng-disabled="!$ctrl.canChangeAggregation( match )" qva-outside-ignore-for="{{\'cao-changeAggregation_\' + match.slot}}" >\n                {{ match.aggr.charAt(0).toUpperCase() + match.aggr.substring(1) }}\n            </button>\n            \x3c!-- Header content --\x3e\n\n            \x3c!-- Header title --\x3e\n            <button class="cao-edit-field-header-title lui-button" ng-click="$ctrl.showChangeField($event, match, \'measure\')" qva-outside-ignore-for="{{\'cao-changeField_\' + match.slot}}">\n                <span ng-if="match.field" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.field }}\n                </span>\n                <span ng-if="match.libIdLabel" ng-class="{\'cao-edit-field-span\' : $ctrl.caoTweakEnabled}">\n                    {{ match.libIdLabel }}\n\t\t\t\t</span>\n\t\t\t\t<div class="cao-field-caret-container" ng-if="$ctrl.insightLearning && $ctrl.caoTweakEnabled">\n\t\t\t\t\t<span class="lui-icon lui-button__icon cao-edit-expander-span" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n\t\t\t\t</div>\n            </button>\n            \x3c!-- Header icons --\x3e\n            <button class="lui-button cao-edit-expander" ng-if="!$ctrl.caoTweakEnabled" ng-show="$ctrl.insightLearning" ng-click="$ctrl.toggleMatchDetails( match )">\n                <span class="lui-icon lui-button__icon" ng-class="{\'lui-icon--arrow-right\' : !match.expanded, \'lui-icon--arrow-down\': match.expanded}"></span>\n            </button>\n            <i class="lui-icon lui-icon--draggable cao-edit-field-draggable cao-edit-sortable-handle" ng-if="$ctrl.getMeasureCount() > 1"\n                q-title-translation="Common.Move"></i>\n\n        </div>\n        <qv-cao-field-details ng-if="$ctrl.insightLearning && !$ctrl.caoTweakEnabled" class="cao-edit-field-details" data-match="match"\n            data-apply-callback="$ctrl.applyLearning" field-id="details_measure_{{$index}}" chart="$ctrl.chart" ng-show="match.expanded" />\n    </div>\n</div>'},function(e,t){e.exports='<lui-popover class="cao-change-aggr-popover cao-popover">\n    <div class="lui-popover__body lui-nopad popover-body">\n            <qv-action-list items="wrappedAggregations"></qv-action-list>\n    </div>\n</lui-popover>\n\n'},function(e,t){e.exports='<lui-popover class="cao-change-field-popover cao-popover">\n    <object-add-typeahead>\n        <lui-popover-header>\n            <div class="lui-input-group">\n                <input class="lui-input lui-input-group__input" type="text" autocomplete="off"\n                    ng-model="search.term" qva-focus="autoFocus" ng-change="filterFields(search.term)" maxlength="255"\n                    object-add-typeahead-input />\n            </div>\n        </lui-popover-header>\n        <div class="lui-popover__body lui-nopad popover-body" object-add-typeahead-menu>\n\n            <ul class="lui-list">\n                <div ng-if="dimensions.length > 0" class="object-add-popover-list-header" q-translation="Common.Dimensions"></div>\n\n                <li class="lui-list__item lui-list__action" ng-repeat="d in dimensions" on-select="change(field, d)"\n                    object-add-typeahead-item="d">\n                    <span class="lui-list__text" qve-highlight text="{{ d.libIdLabel }}" query="highlight"></span>\n                </li>\n\n                <div ng-if="measures.length > 0" class="object-add-popover-list-header" q-translation="Common.Measures"></div>\n\n                <li class="lui-list__item lui-list__action" ng-repeat="m in measures" on-select="change(field, m)"\n                    object-add-typeahead-item="m">\n                    <span class="lui-list__text" qve-highlight text="{{ m.libIdLabel }}" query="highlight"></span>\n                </li>\n\n                <div ng-if="fields.length > 0" class="object-add-popover-list-header" q-translation="Common.Fields"></div>\n\n                <li class="lui-list__item lui-list__action" ng-repeat="f in fields" on-select="change(field, f)"\n                    object-add-typeahead-item="f">\n                    <span class="lui-list__text" qve-highlight text="{{ f.displayNameTokens[0].text }}" query="highlight"></span>\n                </li>\n            </ul>\n            <div class="no-hits" ng-if="(fields.length === 0) && (measures.length === 0) && (dimensions.length == 0)">\n                <span><i q-translation="Toolbox.Search.Nohits" /></span>\n            </div>\n        </div>\n\n    </object-add-typeahead>\n</lui-popover>'},function(e,t){e.exports='<lui-popover class="cao-popover cao-analysis-info-popover">\n    <lui-popover-body>\n        <div class="popover-body cao-analysis-info-popover-body">\n            <div class="analysis-header">\n                {{analysisTitle}}\n            </div>\n            {{analysisDescription}}\n        </div>\n    </lui-popover-body>\n</lui-popover>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(95),n(196)],r=function(e,t,n){e.directive("qvCaoFieldDropZone",function(){return{restrict:"A",replace:true,scope:{},link:function e(i,r){function o(e,t){return t===e}r.droppable({accept:function e(t){var n=t[0].getAttribute("data-slot");var i=t[0].getAttribute("data-slot-role");var a=r[0].getAttribute("data-slot");var s=r[0].getAttribute("data-slot-role");if(n===a)return false;if(o(s,i)&&o(i,s))return true;return false},drop:function e(i,o){var a=o.draggable[0].getAttribute("data-slot");var s=r[0].getAttribute("data-slot");t.publish(n.PUBSUB_TOPIC,{slotA:a,slotB:s})}})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){e.directive("qvCaoFieldDraggable",function(){return{restrict:"A",replace:true,link:function e(t,n){n.draggable({revert:"invalid",axis:"y",handle:".cao-edit-sortable-handle",helper:"clone",revertDuration:250,zIndex:1e3})}}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(928),n(929),n(373)],r=function(e,t,n){e.nativeComponent("qvCaoFieldDetails",{bindings:{match:"<",chart:"<",applyCallback:"<",fieldId:"@"},controller:["qvCaoLearningConfidenceService","luiPopover",function(e,t){var i;var r;this.$onInit=function(){this.showExpression=!this.match.libId;this.searchReport=this.chart.getSearchReport();this.matchDetails=this.chart.getMatchDetails()};this.getDisplayExpressionForMatch=function(e){return e.libId?e.libIdLabel:e.aggr?e.aggr+"("+e.field+")":e.field};this.showFieldInfo=function(o){if(i&&r){r.close();return}var a={reasons:e.getReasonForSelectingField(this.match,this.searchReport,this.matchDetails,true)};var s={template:n,input:a,controller:[function(){}],dock:"bottom",alignTo:o.currentTarget,closeOnResize:true,outsideIgnore:this.fieldId+"_why"};i=true;r=t.show(s);r.closed.then(function(){i=false})}}],template:t})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="cao-field-details-recommended" ng-hide="$ctrl.match.isDirty">\n    <span q-translation="cao.insight.editor.details.recommendation.why"/>\n    <a tid="{{$ctrl.fieldId}}_why" id="{{$ctrl.fieldId}}_why" ng-click="$ctrl.showFieldInfo($event)" qva-outside-ignore-for="{{$ctrl.fieldId}}_why">\n        <span class="lui-icon lui-icon--help"/>\n    </a>\n</div>\n<div class="cao-field-details-learn">\n    <cao-help-learn data-match="$ctrl.match" data-apply-callback="$ctrl.applyCallback" button-id="{{$ctrl.fieldId}}" chart="$ctrl.chart"></cao-help-learn>\n</div>\n'},function(e,t){e.exports='<lui-popover x-arrow="arrow">\n        <div class="cao-confidence-body">\n            <div class="cao-confidence-body-heading" q-translation="cao.confidence.heading"></div>\n            <ul class="cao-confidence-reason-list">\n                <li class="cao-confidence-reason-item" ng-repeat="reason in input.reasons.learned">\n                    <span class="lui-icon  lui-icon--tick lui-text-success" aria-hidden="true" ng-hide="reason.priority === 0"></span>\n                    <div class="cao-confidence-reason-item__text" ng-bind-html="reason.text"></div>\n                </li>\n                <li class="cao-confidence-reason-item" ng-repeat="reason in input.reasons.search">\n                        <span class="lui-icon  lui-icon--tick lui-text-success" aria-hidden="true" ng-hide="reason.priority === 0"></span>\n                        <div class="cao-confidence-reason-item__text" ng-bind-html="reason.text"></div>\n                    </li>\n            </ul>\n        </div>\n</lui-popover>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(91),n(103),n(196),n(931),n(168)],r=function(e,t,n,i,r,o){e.nativeComponent("caoHelpLearn",{bindings:{applyCallback:"<",match:"<",chart:"<",buttonId:"@"},controller:["$element","luiPopover",function(e,a){var s=this;var l;var c=false;var u=false;s.learningOptions=[];var d=new o;var f=void 0;var p=void 0;var h=void 0;s.$onChange=function(){f=void 0;p=void 0;h=void 0};s.$doCheck=function(){if(s.match.field!==f||s.match.libId!==p||s.match.aggr!==h){f=s.match.field;p=s.match.libId;h=s.match.aggr;if(!u){this.searchReport=this.chart.getSearchReport();this.chartType=this.chart.getChartType();u=true}d.getDislikedItems().then(function(e){e&&e.length>0&&(s.dislikedFields=e[0].nodes);s.updateLearningOptions()})}};var v=function e(t){if(s.dislikedFields&&s.dislikedFields.length>0)return s.dislikedFields.filter(function(e){return e.field?e.field.name===t:e.libItem.libId===t})[0]};s.updateLearningOptions=function(){s.learningOptions=[];if(!s.match)return;var e=v(s.match.field||s.match.libId);if(e){s.learningOptions.push({text:t.get("cao.helpuslearn.useagain"),icon:"plus",action:function t(){d.undislikeItem(e.id).then(function(){l.close();s.applyCallback()});n.trackEvent(n.customEvents.INSIGHTS_PROPOSE_FIELD_AGAIN_CLICKED)}});return}s.match.libId||s.match.isDirty||(s.match.slotRole===i.MEASURE?s.learningOptions.push({text:t.get("cao.helpuslearn.not_a_measure"),icon:"unapprove",action:function e(){d.defineDimension({expr:"["+s.match.field+"]"}).then(function(){l.close();s.applyCallback()});n.trackEvent(n.customEvents.INSIGHTS_NOT_A_MEASURE_CLICKED)}}):s.match.slotRole===i.DIMENSION&&s.learningOptions.push({text:t.get("cao.helpuslearn.not_a_dimension"),icon:"unapprove",action:function e(){d.defineMeasure({expr:"unknown(["+s.match.field+"])"}).then(function(){l.close();s.applyCallback()});n.trackEvent(n.customEvents.INSIGHTS_NOT_A_DIMENSION_CLICKED)}}));s.learningOptions.push({text:t.get("cao.helpuslearn.neveruse"),icon:"minus",action:function e(){if(s.match.field){n.trackEvent(n.customEvents.INSIGHTS_NEVER_PROPOSE_FIELD_CLICKED);d.dislikeField({name:s.match.field}).then(function(){l.close();s.applyCallback()})}else if(s.match.libId){n.trackEvent(n.customEvents.INSIGHTS_NEVER_PROPOSE_LIB_CLICKED);d.dislikeLibItem({name:s.match.libId}).then(function(){l.close();s.applyCallback()})}}});s.isDisabled=0===s.learningOptions.length||s.chart.invalidFromLearning};this.displayHelpUsLearn=function(){if(c&&l){l.close();return}var t={template:r,input:s,controller:[function(){}],dock:"bottom",alignTo:e[0],closeOnResize:true,outsideIgnore:s.buttonId};c=true;l=a.show(t);n.trackEvent(n.customEvents.INSIGHTS_HELP_US_LEARN_CLICKED,{chart:s.chart.getAnalysisPrecedentId()});l.closed.then(function(){document.getElementById(s.buttonId).focus();c=false})}}],template:['<button class="lui-button" ng-click="$ctrl.displayHelpUsLearn()" ng-disabled="$ctrl.isDisabled"  tid="{{$ctrl.buttonId}}" id="{{$ctrl.buttonId}}" qva-outside-ignore-for="{{$ctrl.buttonId}}">','<span class="lui-button__icon  lui-icon  lui-icon--lightbulb" ></span><span class="lui-button__text" q-translation="cao.fieldPicker.helpuslearn.button"></span>',"</button>"].join("")})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover x-arrow="arrow">\n    <div class="cao-help-learn-body">\n        <qv-action-list items="input.learningOptions"></qv-action-list>\n    </div>\n</lui-popover>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(933),n(167)],r=function(e,t,n){e.nativeComponent("qvActionList",{bindings:{items:"<"},controller:["$element","$timeout",function(e,t){var i=this;i.selectedIndex=-1;var r;this.$postLink=function(){r=e.find(".lui-list");r.on("keydown",a)};this.$onDestroy=function(){r.off("keydown",a)};this.selectItem=function(e){e.action()};function o(e){t(function(){i.selectedIndex=e})}function a(e){if(e.keyCode===n.ARROW_DOWN){e.preventDefault();i.selectedIndex<i.items.length-1?o(i.selectedIndex+1):o(0)}else if(e.keyCode===n.ARROW_UP){e.preventDefault();0===i.selectedIndex?o(i.items.length-1):o(i.selectedIndex-1)}else if(e.keyCode===n.ENTER||e.keyCode===n.TAB){e.preventDefault();t(function(){i.selectItem(i.items[i.selectedIndex])},0)}}}],template:t})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='\n    <ul class="lui-list" qva-focus="true" tabindex="0">\n        <li ng-repeat="item in $ctrl.items" class="lui-list__item lui-list__action" ng-class="{ \'lui-disabled\': item.disabled, \'lui-active\': $index === $ctrl.selectedIndex }"\n            ng-click="item.disabled || $ctrl.selectItem(item)">\n            <span class="lui-list__aside  lui-icon lui-icon--{{item.icon}}" ng-if="item.icon"></span>\n            <span class="lui-list__text" tid="{{item.tid}}" q-translation="{{item.text}}"></span>\n        </li>\n    </ul>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(91),n(103),n(935),n(373)],r=function(e,t,n,i){e.nativeComponent("caoConfidence",{bindings:{buttonId:"@",chart:"<",hideText:"<",closeNotification:"&",opened:"&",closed:"&"},controller:["luiPopover","qvCaoLearningConfidenceService",function(e,r){var o=this;var a;var s=false;o.$onInit=function(){l();o.closeNotification({handler:function e(){if(a){a.close();s=false}}})};o.$doCheck=function(){if(o.chart.recalculateConfidence){o.chart.recalculateConfidence=false;l()}};function l(){o.confidenceReasons={learned:[],search:[]};o.confidence=r.determineConfidence(o.chart);o.confidenceTitle=t.get("cao.confidence.title_"+o.confidence);if("empty"===o.confidence)o.emptyConfidence=true;else{var e=o.chart.getMatchDetails();o.chart.getMatches().forEach(function(t){var n=r.getReasonForSelectingField(t,o.chart.getSearchReport(),e,false);o.confidenceReasons.learned=o.confidenceReasons.learned.concat(n.learned);o.confidenceReasons.search=o.confidenceReasons.search.concat(n.search)})}}o.displayConfidenceInfo=function(){var t=this;if(t.emptyConfidence)return;if(s&&a){a.close();return}var r={template:i,input:this,controller:[function(){}],dock:"bottom",alignTo:document.getElementById(t.buttonId),closeOnResize:true,outsideIgnore:this.buttonId};s=true;a=e.show(r);a.opened.then(function(){if(t.opened){n.trackEvent(n.customEvents.INSIGHTS_CONFIDENCE_INDICATOR_CLICKED,{chart:t.chart.getAnalysisPrecedentId()});t.opened()}});a.closed.then(function(){t.closed&&t.closed();s=false})}}],template:['<span class="cao-confidence-container" q-title-translation="cao.confidence.title" aria-label="{{$ctrl.confidenceTitle}}"  >','<span class="cao-confidence-{{$ctrl.confidence}}-icon" ng-class="{\'no-reasons\': $ctrl.emptyConfidence}" ng-click="$ctrl.displayConfidenceInfo()" tid="{{$ctrl.buttonId}}" id="{{$ctrl.buttonId}}" qva-outside-ignore-for="{{$ctrl.buttonId}}"></span>',"</span>"].join("")})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover x-arrow="arrow">\n    <div class="cao-confidence-body">\n        \x3c!-- <div class="cao-confidence-body-heading" q-translation="cao.confidence.heading"></div> --\x3e\n        <div class="cao-confidence-empty" ng-show="input.emptyConfidence" q-translation="cao.confidence.emptyconfidence"></div>\n\n        <div class="cao-confidence-body-heading-small" q-translation="cao.confidence.learnedbycognitive.title" ng-show="input.confidenceReasons.learned.length > 0"></div>\n        <ul class="cao-confidence-reason-list" ng-hide="input.emptyConfidence">\n            <li class="cao-confidence-reason-item" ng-repeat="reason in input.confidenceReasons.learned">\n                <span class="lui-icon  lui-icon--tick lui-text-success" aria-hidden="true"></span>\n                <div class="cao-confidence-reason-item__text" ng-bind-html="reason.field"></div>\n            </li>\n        </ul>\n\n        <div class="cao-confidence-body-heading-small" q-translation="cao.confidence.relevanttoserach.title" ng-show="input.confidenceReasons.search.length > 0"></div>\n        <ul class="cao-confidence-reason-list" ng-hide="input.emptyConfidence">\n            <li class="cao-confidence-reason-item" ng-repeat="reason in input.confidenceReasons.search">\n                <span class="lui-icon  lui-icon--tick lui-text-success" aria-hidden="true"></span>\n                <div class="cao-confidence-reason-item__text" ng-bind-html="reason.field"></div>\n            </li>\n        </ul>\n\n    </div>\n</lui-popover>'},function(e,t){e.exports='<div class="cao-refresh-indicator-container">\n    <div class="cao-refresh-indicator-content">\n        <div q-translation="cao.insight.refresh.indicator.body" />\n        <div class="cao-refresh-action">\n            <a class="cao-refresh" ng-click="$ctrl.refresh()" q-translation="cao.insight.refresh.indicator.action" />\n        </div>\n    </div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(10),n(11),n(48),n(54),n(938),n(49),n(111)],r=function(e,t,n,i,r,o){var a={transclude:true,template:r,bindings:{chart:"=",app:"<",interactive:"<",scrollContainer:"<",getChartMenuItems:"&",setBlurHandler:"&",onChartLoaded:"&",contextMenuStatus:"=",index:"<"},controller:["$element","$document","$window","$timeout","$scope","qvCaoRenderService",function(r,a,s,l,c,u){var d=this;d.isLoadingCardImageFlag=o.getFlag("LOADING_CARD_IMAGES");d.caoTweakEnabled=o.getFlag("CAO_TWEAK");function f(){return d.interactive?-99:d.chart.getComplexity()?d.chart.getComplexity():d.index}this.$onInit=function(){this.hasBlurHandler=false;this.isDestroyed=false;this.scrollHander=i.debounce(this.renderChartIfInView,300);this.initializeState()};this.$doCheck=function(){if((this.interactive||this.caoTweakEnabled)&&this.chart.shouldRedraw){delete this.chart.shouldRedraw;d.chart.refreshChartType();d.chart.setState("LOADING");u.enqueueForRender(d.loadChart,f(d.chart.chart.visualization))}if(!this.hasBlurHandler&&this.chart.getObject().setOnBlurHandler){this.setBlurHandler();this.hasBlurHandler=true}};this.$postLink=function(){l(function(){if("READY"===d.chart.getState()&&d.isInView()&&!d.isDestroyed){d.chart.setState("LOADING");u.enqueueForRender(d.loadChart,f(d.chart.chart.visualization))}})};this.$onDestroy=function(){this.isDestroyed=true;u.dequeueRender(d.loadChart);e.element(this.scrollContainer).unbind("scroll",d.scrollHander);e.element(s).unbind("resize",d.renderChartIfInView);this.chart.destroyChart()};this.renderChartIfInView=function(){if(!d.isDestroyed&&d.isInView()&&"READY"===d.chart.getState()){d.chart.setState("LOADING");u.enqueueForRender(d.loadChart,f(d.chart.chart.visualization))}};this.isInView=function(){var e=r[0].getBoundingClientRect();var t=!s.innerHeight||a[0].documentElement.clientHeight;var n=e.top<=t;return n};this.loadManually=function(e){e.stopPropagation();d.chart.setState("LOADING");d.chart.allowLongLoad=true;u.enqueueForRender(d.loadChart,f(d.chart.chart.visualization))};this.loadChart=function(){return d.chart.loadChart(d.onChartLoaded)};this.openContextMenu=function(e,i,r,o){if(!this.contextMenuStatus.open&&this.chart.rendered){var a=n.getService("qvContextMenu").menu();a.onOpen=function(){t(".qv-contextmenu lui-popover").css("max-height",400)};d.getChartMenuItems({menu:a});var s=n.getService("qvContextMenu");s.showInline(a,{position:{x:i.pageX,y:i.pageY},onCloseFn:r},o||i.currentTarget)}};c.$on("cao.openContextMenu",function(e,t){d.openContextMenu(null,t.event,t.closeFn,t.element)});this.initializeState=function(){if(this.scrollContainer){e.element(this.scrollContainer).bind("scroll",this.scrollHander);e.element(s).bind("resize",d.renderChartIfInView)}}}]};n.nativeComponent("qvCaoInsightChart",a)}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="result-item-graph-container" ng-if="!$ctrl.interactive" qva-context-menu="$ctrl.openContextMenu( item, $event, $ctrl.onCloseContextMenu)"\n    qva-radial-context-menu="$ctrl.openContextMenu( item, $event, $ctrl.onCloseContextMenu)">\n    <qv-object ng-if="$ctrl.chart.getState() === \'LOADED\'" model="$ctrl.chart.chart.model" options="$ctrl.chart.options"\n        object="$ctrl.chart.object" />\n</div>\n\n<div class="result-item-graph-container" ng-if="$ctrl.interactive" qva-context-menu="$ctrl.openContextMenu( item, $event, $ctrl.onCloseContextMenu)"\n    qva-radial-context-menu="$ctrl.openContextMenu( item, $event, $ctrl.onCloseContextMenu)">\n    <qv-object ng-if="$ctrl.chart.getState() === \'LOADED\'" model="$ctrl.chart.chart.model" options="$ctrl.chart.zoomedOptions"\n        object="$ctrl.chart.zoomedObject" />\n</div>\n\n<div class="spinner-container" ng-if="($ctrl.chart.getState() === \'LOADING\' && !$ctrl.isLoadingCardImageFlag)">\n    <qv-spinner show="!$ctrl.chartLoaded && !$ctrl.isLoadingCardImageFlag" show-delay="100" center-in-parent="true"></qv-spinner>\n</div>\n<div class="image-container" ng-if="$ctrl.chart.getState() === \'LOADING\' && $ctrl.isLoadingCardImageFlag">\n    <img ng-src="{{$ctrl.chart.chartTypeImageUrl}}" class="loader-image" />\n</div>\n\n<div class="cao-manual-loader" ng-click="$event.stopPropagation()" ng-if="$ctrl.chart.getState() === \'MANUAL_LOAD\'">\n    <ul>\n        <li class="cao-loader-text" q-translation="cao.card.complex">\n        </li>\n        <li>\n            <lui-button ng-click="$ctrl.loadManually($event)" q-translation="cao.card.complex.load"></lui-button>\n        </li>\n    </ul>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(95),n(940),n(105),n(49),n(159),n(91),n(372),n(93),n(103),n(275),n(212)],r=function(e,t,n,i,r,o,a,s,l,c,u){var d={template:i,bindings:{query:"<",disabled:"<",matchingFields:"<",matchingFieldIndex:"<",fieldToRemove:"<",fieldToAdd:"<",updateFieldPicker:"<",isLimited:"<",direction:"<",nluQueryInfoButtonVisible:"<",nluQueryInfoVisible:"<",toggleNluQueryInfo:"<"},controller:["$timeout","qvCaoSearchService","qvCaoService",function(t,i,d){var f=this;this.selectedSuggestion=null;this.nluEnabled=o.getFlag("NLU_INSIGHTS");this.nluQueries=[];this.NLU_QUERIES_LIMIT=10;this.waitingForAppId=false;this.$onInit=function(){this.initializeState()};this.searchInputPlaceHolder=this.nluEnabled?s.get("cao.search.input.nlu.placeHolder")+a.lrm:s.get("cao.search.input.placeHolder")+a.lrm;this.clearSerchButtonIconScreenReader=s.get("clear.serch.button.icon.screen.reader");this.caoSearchInputSearchScreenReader=s.get("cao.search.input.search.reader");this.caoSearchInputScreenReader=s.get("cao.search.input.screen.reader");this.$onChanges=function(e){this.syncFieldPicker=o.getFlag("CAO_FIELD_PICKER_SYNC");this.syncFieldPicker?e.fieldToAdd&&e.fieldToAdd.currentValue?this.toggleFieldPickerField(this.fieldToAdd):e.fieldToRemove&&e.fieldToRemove.currentValue&&this.toggleFieldPickerField(this.fieldToRemove):e.fieldToAdd&&e.fieldToAdd.currentValue&&this.fieldToAdd&&this.addFieldToQuery(this.fieldToAdd,true)};this.$onDestroy=function(){e("#qv-cao-search-container").off("click",f.caoSearchContainerOnclickHandler);e("#cao-search-input").off("click",f.caoSearchInputOnClickHandler);e(window).off("resize",f.searchSuggestionBoxOnResizeHandler);n.unsubscribe("cao/insights/clear");f.nluEnabled&&n.unsubscribe("cao/nlu/new_queries")};this.caoSearchContainerOnclickHandler=function(e){e.stopPropagation()};this.caoSearchInputOnClickHandler=function(e){e.stopPropagation();f.updateCursorPositionState(e)};this.searchSuggestionBoxOnResizeHandler=function(){f.isMatchingFieldPopupVisible&&t(function(){f.updateMatchingFields();f.showMatchingFieldPopup()},300)};this.toggleCao=function(){d.toggleCao()};this.initializeState=function(){this.queryTokens=[];this.cursorPosition=0;e("#qv-cao-search-container").click(f.caoSearchContainerOnclickHandler);e("#cao-search-input").click(f.caoSearchInputOnClickHandler);e(window).on("resize",f.searchSuggestionBoxOnResizeHandler);if(this.nluEnabled){n.subscribe("cao/nlu/new_queries",f.newNluQuery);c.getApp().then(function(e){f.appId=e.id;f.getNluQueries().then(function(){f.waitingForAppId&&t(function(){f.showSearchHistoryPopup()})})})}};this.handleSearchInputBlur=function(){f.matchingField=null;f.hideMatchingFields();f.hideSearchHistoryPopup()};this.updateCursorPositionState=function(e){f.updateCurrentCursorPositionState(e);if(f.query){var n=i.getCurrentToken(f.query,f.cursorPosition).token;f.cursorPosition<f.query.length+1&&n&&n.word?f.showFields(e):f.hideMatchingFields()}else f.nluEnabled&&(f.nluQueries.length||f.appId?f.nluQueries.length&&t(function(){f.positionSearchResultPopup();f.showSearchHistoryPopup()}):f.waitingForAppId=true)};this.showMatchingFieldPopup=function(){this.isMatchingFieldPopupVisible||(this.isMatchingFieldPopupVisible=true)};this.showSearchHistoryPopup=function(){this.isSearchHistoryPopupVisible||(this.isSearchHistoryPopupVisible=true)};this.hideSearchHistoryPopup=function(){this.isSearchHistoryPopupVisible=false};this.setMatchingFieldIndex=function(e){this.matchingFieldIndex=e};this.toggleFieldPickerField=function(e){if(e&&e.selected){this.removeFieldFromQuery(e);this.syncFieldPicker&&i.selectField(e,false)}else if(e&&!e.selected){this.addFieldToQuery(e);this.fieldToAdd=this.syncFieldPicker?this.fieldToAdd:"";this.syncFieldPicker&&i.selectField(e,true)}this.query&&0!==this.query.trim().length?this.updateInsights(this.query):this.clearQuery()};this.updateInsights=function(e){if(e){i.updateInsights(e.trim());this.trimSpacesOnQuery();this.hideMatchingFields();u.trackEvent(u.customEvents.INSIGHTS_TYPED_QUERY,{query:e})}};this.defaultCursorPosition=function(){return this.query?this.query.length+1:0};this.trimSpacesOnQuery=function(){this.query=this.query.trim();this.query+=" "};this.addFieldToQuery=function(t,n,r){r&&r.preventDefault();var o=e("#cao-search-input")[0];var a=this.cursorPosition?this.cursorPosition:this.defaultCursorPosition();var s=i.addFieldToQuery(t,this.query,a,o.selectionStart,o.selectionEnd);this.cursorPosition=s.cursorPosition;this.query=s.query;this.updateMatchingFields();this.positionCursorAtIndex(this.cursorPosition);this.syncFieldsInQueryWithFieldPicker();this.trimSpacesOnQuery();n&&this.updateInsights(this.query)};this.usePreviousQuery=function(e){f.query=e};this.keydown=function(e,t){switch(e.which){case 38:case 40:t&&(this.selectedSuggestion=t.caoFieldId);break;default:this.selectedSuggestion=null}};this.removeFieldFromQuery=function(e){var t=i.getSelectedFields(this.query);var n=this.cursorPosition?this.cursorPosition:this.defaultCursorPosition();this.query=i.removeFieldFromQuery(e,this.query,t);this.positionCursorAtIndex(n);this.syncFieldsInQueryWithFieldPicker()};this.hideMatchingFields=function(){t(function(){f.isMatchingFieldPopupVisible=false;f.navigatingThroughMatchingFields=false;f.matchingFields=[]})};this.clearQuery=function(){f.query="";f.hideMatchingFields();i.clearSelectedFields();f.syncFieldsInQueryWithFieldPicker();i.showIntro(true)};this.showFields=function(e){e&&this.updateCurrentCursorPositionState(e);this.matchingFields=i.getFields();this.clearHighlightedFields();this.updateMatchingFields();this.showMatchingFieldPopup()};this.positionCursorAtIndex=function(n){this.query&&this.query.length>0&&t(function(){var t=document.getElementById("cao-search-input");var i=n;e("#cao-search-input").focus();t.setSelectionRange(i,i)})};this.updateCurrentCursorPositionState=function(e){this.cursorPosition=e.target.selectionStart};this.scrollFieldIntoView=function(e){if(e&&e.caoFieldId){var t=document.getElementById(e.caoFieldId);t&&t.scrollIntoView&&t.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}};this.updateMatchingFields=function(){t(function(){var e=f.cursorPosition?f.cursorPosition:0;var t=i.getCurrentToken(f.query,e);f.currentToken=t;f.setMatchingFieldIndex(-1);if(null!==t.index&&t.token.word){if(t.token){f.matchingFields=i.getMatchingFields(t.token.word,f.isLimited);f.highlightField(f.matchingFieldIndex)}}else f.hideMatchingFields();f.positionSearchResultPopup()})};this.getNluQueries=function(){return l.getQueries(f.NLU_QUERIES_LIMIT,f.appId).then(function(e){f.nluQueries=e})};this.newNluQuery=function(e){f.nluQueries.push(e)};this.positionSearchResultPopup=function(){var t;if(this.query&&this.query.length>0){var n=this.cursorPosition?this.cursorPosition:0;var r=e("#cao-search-input");var o=e("#qv-cao-search-input-container");if(r.position()&&r.position().left){t=r.position().left;f.nluEnabled&&o&&o.position()&&(t+=o.position().left);var a=i.getCurrentToken(this.query,n);a.token&&(n=a.token.indexStart);t+=i.searchResultPositionRelativeToQuery(this.query,n)}}this.searchResultContainerLeft=t+"px"};this.highlightField=function(e){this.clearHighlightedFields();this.matchingFields.length>0&&e>=0&&(this.matchingFields[e].highlight=true)};this.clearHighlightedFields=function(){this.matchingFields=this.matchingFields.map(function(e){e.highlight=false;return e})};this.syncFieldsInQueryWithFieldPicker=function(){if(this.syncFieldPicker){i.syncFieldsInQueryWithFieldPicker(this.query);this.updateFieldPicker()}};this.getMatchingFields=function(e){this.triggerKeyboardBehaviours(e);if(this.query&&this.query.length>0){f.hideSearchHistoryPopup();var t=this.query.replace(/\s{2,}/g," ");var n="keyup"===e.type&&e.which===r.KeyCodes.Enter&&!this.navigatingThroughMatchingFields;if(!this.navigatingThroughMatchingFields){this.updateMatchingFields();e.which!==r.KeyCodes.Enter&&this.showMatchingFieldPopup()}e.which!==r.KeyCodes.Enter&&e.which!==r.KeyCodes.Tab||(this.isMatchingFieldPopupVisible=false);n&&this.updateInsights(t)}};this.navigateMatchingFields=function(e){this.triggerKeyboardBehaviours(e);this.navigatingThroughMatchingFields=e&&e.which===r.KeyCodes.Down||e.which===r.KeyCodes.Up;var t=e&&"keydown"===e.type&&e.keyCode;var n=t&&this.matchingFields&&this.matchingFields.length>0;if(n){this.matchingField=i.matchingField(e.keyCode,this.matchingFieldIndex,this.matchingFields);this.setMatchingFieldIndex(this.matchingFields.indexOf(this.matchingField));this.scrollFieldIntoView(this.matchingField);if(this.matchingFieldIndex>=0){var o=t&&e.keyCode===r.KeyCodes.Tab&&this.matchingField;var a=t&&e.keyCode===r.KeyCodes.Enter&&this.matchingField;if(o){this.addFieldToQuery(this.matchingField);this.hideMatchingFields()}if(a){this.addFieldToQuery(this.matchingField);this.updateInsights(this.query)}this.navigatingThroughMatchingFields&&this.highlightField(this.matchingFieldIndex)}switch(e.which){case 38:case 40:this.matchingField&&(this.selectedSuggestion=this.matchingField.caoFieldId);break}}e&&e.which===r.KeyCodes.Enter&&!this.query&&this.clearQuery()};n.subscribe("cao/insights/clear",f.clearQuery);this.triggerKeyboardBehaviours=function(e){this.updateCurrentCursorPositionState(e);this.syncFieldsInQueryWithFieldPicker();e.which!==r.KeyCodes.Down&&e.which!==r.KeyCodes.Up&&e.which!==r.KeyCodes.Enter||e.preventDefault();t(function(){e.which===r.KeyCodes.Delete&&f.updateMatchingFields();if(e.which===r.KeyCodes.Esc){f.matchingField=null;f.hideMatchingFields()}})}}]};t.nativeComponent("qvCaoSearch",d)}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div id="qv-cao-search-container" class="qv-cao-search-container">\n\t<div class="qv-cao-search-input" ng-class="{\'focus\': $ctrl.isInputFocused, \'qv-cao-search-input--nlu\': $ctrl.nluEnabled}" id="qv-cao-search-input-container">\n\t\t<div class="search-cao-field-area">\n\t\t\t<div class="lui-search search-field" qva-direction x-dir-setting="{{$ctrl.direction}}">\n\t\t\t\t<span class="lui-search__search-icon"></span>\n\t\t\t\t<input class="lui-search__input"\n\t\t\t\t\t   ng-model="$ctrl.query"\n\t\t\t\t\t   auto-focus="autoFocus"\n\t\t\t\t\t   aria-autocomplete="list"\n\t\t\t\t\t   autocomplete="off"\n\t\t\t\t\t   ng-disabled="$ctrl.disabled"\n\t\t\t\t\t   type="text"\n\t\t\t\t\t   is-focused="isInputFocused"\n\t\t\t\t\t   placeholder="{{$ctrl.searchInputPlaceHolder}}"\n\t\t\t\t\t   ng-keydown="$ctrl.navigateMatchingFields($event)"\n\t\t\t\t\t   ng-keyup="$ctrl.getMatchingFields($event)"\n\t\t\t\t\t   tid="caoSearch.searchField"\n\t\t\t\t\t   tabindex="0"\n             role="combobox"\n\t\t\t\t\t   aria-label="{{$ctrl.caoSearchInputSearchScreenReader}}"\n\t\t\t\t\t   aria-activedescendant="{{$ctrl.selectedSuggestion}}"\n\t\t\t\t\t   aria-owns="cao_search_suggestions cao_search_history"\n\t\t\t\t\t   id="cao-search-input"\n\t\t\t\t\t   ng-blur="$ctrl.handleSearchInputBlur()"\n        />\n\t\t\t\t<button aria-label="{{$ctrl.clearSerchButtonIconScreenReader}}" class="lui-icon  lui-icon--remove" tid="cao-search-clear-btn" ng-if="$ctrl.query" q-title-translation="cao.search.clear.tooltip" ng-click="$ctrl.clearQuery()"></button>\n\t\t\t</div>\n\t\t</div>\n\t\t<button class="qv-cao-search-info-button" ng-class="{ \'qv-cao-search-info-button--active\': $ctrl.nluQueryInfoVisible }" ng-if="$ctrl.nluEnabled && $ctrl.nluQueryInfoButtonVisible" ng-click="$ctrl.toggleNluQueryInfo()">\n\t\t\t<i class="lui-icon lui-icon--info"></i>\n\t\t</button>\n\t</div>\n\t<div id="cao_search_suggestions" class="qv-cao-search-suggestions" ng-if="$ctrl.isMatchingFieldPopupVisible"\n\t\t ng-style="{ \'left\': $ctrl.searchResultContainerLeft }">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item fields"\n\t\t\t\ttid="caoSearchSuggestionField"\n\t\t\t\tng-class="{\'highlight\': field.highlight}"\n\t\t\t\tng-repeat="field in $ctrl.matchingFields"\n\t\t\t\tng-mousedown="$ctrl.addFieldToQuery(field, true, $event)"\n\t\t\t\tid="{{field.caoFieldId}}"\n\t\t\t\taria-labelledby="{{field.caoFieldId+\'Name\' + \' \' + field.caoFieldId+\'Origin\'}}"\n\t\t\t\t>\n\t\t\t\t<span aria-hidden="true" class="lui-list__text" q-title-translation={{field.qName}} tid="caoSearchSuggestionFieldName" >\n\t\t\t\t\t<span aria-hidden="true" qve-highlight text="{{ field.qName }}" query="$ctrl.currentToken.token.word" ></span>\n\t\t\t\t</span>\n\t\t\t\t<span aria-hidden="true" ng-if="!field.masterItem" class="lui-list__aside field-name" q-title-translation={{field.tablesTooltip}}>{{field.tablesAssociated}}</span></span>\n\t\t\t\t<span aria-hidden="true" ng-if="field.masterItem" class="lui-list__aside field-name">{{field.masterItemTitle}}</span></span>\n\t\t\t\t<p id="{{field.caoFieldId+\'Name\'}}" class="sr-only" >{{ field.qName }}</p>\n\t\t\t\t<p id="{{field.caoFieldId+\'Origin\'}}" class="sr-only" ng-if="!field.masterItem" class="lui-list__aside field-name" q-title-translation={{field.tablesTooltip}}>{{field.tablesAssociated}}</p>\n\t\t\t\t<p id="{{field.caoFieldId+\'Origin\'}}" class="sr-only" ng-if="field.masterItem" class="lui-list__aside field-name">{{field.masterItemTitle}}</p>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\t<div id="cao_search_history" class="qv-cao-search-history qv-cao-search-suggestions" ng-if="$ctrl.isSearchHistoryPopupVisible"\n\t\tng-style="{ \'left\': $ctrl.searchResultContainerLeft }">\n\t\t<ul class="lui-list">\n\t\t\t<li class="lui-list__item fields"\n\t\t\t\ttid="caoSearchHistoryField"\n\t\t\t\tng-repeat="query in $ctrl.nluQueries"\n\t\t\t\tng-mousedown="$ctrl.usePreviousQuery(query.text)"\n\t\t\t\tid="{{query.id}}"\n\t\t\t\taria-labelledby="{{query.id}}"\n\t\t\t\t>\n\t\t\t\t<span aria-hidden="true" class="lui-list__text" q-title-translation={{query.text}} tid="caoSearchHistoryFieldName">\n\t\t\t\t\t<span aria-hidden="true" qve-highlight text="{{ query.text }}"></span>\n\t\t\t\t</span>\n\t\t\t\t<p id="{{query.id}}" class="sr-only" >{{ query.text }}</p>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(91),n(103),n(95),n(942),n(168),n(49),n(943),n(944)],r=function(e,t,n,i,r,o,a){var s={template:r,bindings:{isLimited:"<",insightsLoaded:"<",items:"<",activeTab:"<",selectField:"<",showFieldPicker:"<",toggleFieldPicker:"&"},controller:["qvCaoService",function(e){var r=this;var s=new o;this.activeTab=null;this.fieldPickerTabDimensions=t.get("cao.fieldPicker.tab.dimensions");this.fieldPickerTabMeasures=t.get("cao.fieldPicker.tab.measures");this.fieldPickerTabFields=t.get("cao.fieldPicker.fields.title");this.fieldPickerTabFieldsScreenReader=t.get("cao.fieldPicker.fields.title");this.fieldPickerTabMasterItemsScreenReader=t.get("cao.fieldPicker.masterItems.title");this.insightLearning=a.getFlag("CE_PRECEDENTS");this.caoTweakEnabled=a.getFlag("CAO_TWEAK");this.useAgainString=t.get("cao.helpuslearn.useagain");this.dislikedFields=[];this.$onInit=function(){this.init()};this.$onDestroy=function(){i.unsubscribe("cao/insight/learning_applied")};this.$onChanges=function(e){if(e.items&&e.items.currentValue){this.items=e.items.currentValue;this.masterItemDimensions=[];this.masterItemMeasures=[];this.fields=[];this.items.forEach(function(e){e.masterItemDimension?r.masterItemDimensions.push(e):e.masterItemMeasures?r.masterItemMeasures.push(e):r.fields.push(e)})}e.isLimited&&e.isLimited.currentValue&&e.isLimited!==e.isLimited.currentValue?this.init():e.isLimited&&false===e.isLimited.currentValue&&this.init();l()};var l=function e(){if(r.insightLearning){if(r.items&&0!==r.items.length)return s.getDislikedItems().then(function(e){e&&e.length>0&&(r.dislikedFields=e[0].nodes)});r.dislikedFields=[]}else r.dislikedFields=[]};this.isDislikedField=function(e){return r.dislikedFields.filter(function(t){return t.field&&t.field.name===e.qName})[0]};this.isDislikedMasterItem=function(e){return r.dislikedFields.filter(function(t){return t.libItem&&t.libItem.libId===e.libId})[0]};this.useFieldAgain=function(t){n.trackEvent(n.customEvents.INSIGHTS_PROPOSE_FIELD_AGAIN_CLICKED);s.undislikeItem(t.id).then(function(){e.setRefreshIndicatorVisibility(true);i.publish("cao/insight/learning_applied")})};this.init=function(){true===this.isLimited?this.setActiveTab("masterItems"):false===this.isLimited&&this.setActiveTab("fields");i.subscribe("cao/insight/learning_applied",l)};this.setActiveTab=function(e){if("fields"===e)if("fields"!==this.activeTab){this.activeTab="fields";this.title=t.get("cao.fieldPicker.fields.title");this.showFieldPicker||this.toggleFieldPicker()}else this.toggleFieldPicker();else if("masterItems"===e)if("masterItems"!==this.activeTab){this.activeTab="masterItems";this.title=t.get("cao.fieldPicker.masterItems.title");this.setMasterItemsSection("measures");this.showFieldPicker||this.toggleFieldPicker()}else this.toggleFieldPicker()};this.setMasterItemsSection=function(e){"measures"===e?this.activeMasterItemSection="measures":"dimensions"===e&&"dimensions"===this.activeMasterItemSection?this.activeMasterItemSection="measures":"dimensions"===e&&"dimensions"!==this.activeMasterItemSection&&(this.activeMasterItemSection="dimensions")}}]};e.nativeComponent("qvCaoFieldPicker",s)}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="field-picker">\n\t<div class="tabs">\n\t\t<div qva-cao-acc-field-items x-items-type="fieldPickerCategories">\n\t\t\t<div tid="caoFieldPickerFieldTabButton" class="tab" cao-acc-field-item="{\'type\': \'fieldPickerCategories\', \'index\': 0}"\n\t\t\t ng-class="{\'hide-tab\': $ctrl.activeTab === null, \'selected\': $ctrl.activeTab === \'fields\', \'cao-acc-focus\': $ctrl.itemAccFocus}"\n\t\t\t ng-show="!$ctrl.isLimited" aria-label="{{$ctrl.fieldPickerTabFieldsScreenReader}}" ng-click="$ctrl.setActiveTab(\'fields\')"\n\t\t\t q-title-translation="cao.fieldPicker.fields.title">\n\t\t\t\t<span class="lui-icon  lui-icon--database"></span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div qva-cao-acc-field-items x-items-type="fieldPickerCategories">\n\t\t\t<div tid="caoFieldPickerMasterItemsTabButton" class="tab" cao-acc-field-item="{\'type\': \'fieldPickerCategories\', \'index\': 1}"\n\t\t\t ng-class="{\'hide-tab\': $ctrl.activeTab === null, \'selected\': $ctrl.activeTab === \'masterItems\', \'cao-acc-focus\': $ctrl.itemAccFocus}"\n\t\t\t ng-click="$ctrl.setActiveTab(\'masterItems\')" aria-label="{{$ctrl.fieldPickerTabMasterItemsScreenReader}}"\n\t\t\t q-title-translation="cao.fieldPicker.masterItems.title">\n\t\t\t\t<span class="lui-icon  lui-icon--link"></span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="tab-content" tid="caoFieldPickerContentContainer">\n\t\t<qv-spinner class="spinner" show="!$ctrl.items" show-delay="500" center-in-parent="true"></qv-spinner>\n\n\t\t<div ng-if="$ctrl.activeTab === \'fields\' && !$ctrl.isLimited && $ctrl.insightsLoaded" class="fields">\n\t\t\t<button class="field-item-header" ng-class="{\'selected\': true}" tabindex="0" tid="caoFieldPickerFieldSectionButton"\n\t\t\t\taria-labelledby="{{caoFieldPickerFieldText}}">\n\t\t\t\t   <span ng-class="{\'cao-acc-focus\': $ctrl.itemAccFocus}" tid="caoFieldPickerFieldText" class="group-name">\n\t\t\t\t\t   {{$ctrl.fieldPickerTabFields}}</span>\n\t\t\t  </button>\n\t\t\t<div class="no-items" ng-if="$ctrl.showFieldPicker && !$ctrl.fields.length" q-translation="cao.fieldPicker.noItems"></div>\n\t\t\t<ul class="lui-list" ng-if="$ctrl.fields.length" qva-cao-acc-field-items x-items-type="fieldItem">\n\t\t\t\t<div ng-repeat="field in $ctrl.fields" class="field-container">\n\t\t\t\t\t<li class="lui-list__item field" tid="caoFieldPickerField" cao-acc-field-item="{\'type\': \'fieldItem\', \'index\': $index}"\n\t\t\t\t\t ng-click="$ctrl.selectField(field)" aria-label="{{field.qName}}" q-title-translation={{field.qName}} ng-class="{\'selected\': field.selected, \'cao-acc-focus\': $ctrl.itemAccFocus, \'disliked\': $ctrl.isDislikedField(field)}">\n\t\t\t\t\t\t<span class="lui-list__aside  lui-icon {{field.classificationIcon}}" ng-if="field.classificationIcon"></span>\n\t\t\t\t\t\t<span class="lui-list__text">{{field.qName}}</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<div class="field-picker-propose" ng-if="!$ctrl.caoTweakEnabled && $ctrl.isDislikedField(field)" ng-click="$event.stopPropagation(); $ctrl.useFieldAgain($ctrl.isDislikedField(field))"\n\t\t\t\t\t lui-title-tooltip title="{{$ctrl.useAgainString}}" x-dock="top" x-close-on-click="true">\n\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--plus"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</ul>\n\t\t</div>\n\n\t\t<div ng-if="$ctrl.activeTab === \'masterItems\' && $ctrl.insightsLoaded" class="master-items" tid="caoFieldPickerMasterItemsContainer">\n\t\t\t<div class="dimensions" ng-class="{\'selected\': $ctrl.activeMasterItemSection === \'dimensions\'}">\n\t\t\t\t<button class="master-item-header" ng-class="{\'selected\': $ctrl.activeMasterItemSection === \'dimensions\'}" ng-keyup="$ctrl.itemAccFocus=true"\n\t\t\t\t ng-mouseup="$ctrl.itemAccFocus=false" tabindex="0" aria-controls="cao-field-picker-dimensions-fields" tid="caoFieldPickerMasterItemsDimensionSectionButton"\n\t\t\t\t ng-click="$ctrl.setMasterItemsSection(\'dimensions\')" aria-labelledby="{{caoFieldPickerMasterItemDimensionText}}">\n\t\t\t\t\t<span ng-class="{\'cao-acc-focus\': $ctrl.itemAccFocus}" tid="caoFieldPickerMasterItemDimensionText" class="group-name">\n\t\t\t\t\t\t{{$ctrl.fieldPickerTabDimensions}}</span>\n\t\t\t\t</button>\n\t\t\t\t<div class="no-items" ng-if="$ctrl.showFieldPicker && !$ctrl.masterItemDimensions.length && $ctrl.activeMasterItemSection === \'dimensions\'"\n\t\t\t\t q-translation="cao.fieldPicker.noItems"></div>\n\t\t\t\t<ul id="cao-field-picker-dimensions-fields" class="lui-list master-item-fields" qva-cao-acc-field-items\n\t\t\t\t x-items-type="masterItemDimension" aria-expanded="$ctrl.activeMasterItemSection === \'dimensions\'">\n\t\t\t\t\t<div ng-repeat="field in $ctrl.masterItemDimensions" class="field-container">\n\t\t\t\t\t\t<li class="lui-list__item field" tid="caoFieldPickerMasterItemDimension" cao-acc-field-item="{\'type\': \'masterItemDimension\', \'index\': $index}"\n\t\t\t\t\t\t aria-label="{{field.qName}}" ng-click="$ctrl.selectField(field)"\n\t\t\t\t\t\t q-title-translation={{field.qName}} ng-class="{\'selected\': field.selected, \'cao-acc-focus\': $ctrl.itemAccFocus, \'disliked\': $ctrl.isDislikedMasterItem(field) }">\n\t\t\t\t\t\t\t<span class="lui-list__text caoFieldPickerMasterItemDimensionText">{{field.qName}}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<div class="field-picker-propose" ng-if="!$ctrl.caoTweakEnabled && $ctrl.isDislikedMasterItem(field)" ng-click="$event.stopPropagation(); $ctrl.useFieldAgain($ctrl.isDislikedMasterItem(field))"\n\t\t\t\t\t\t lui-title-tooltip title="{{$ctrl.useAgainString}}" x-dock="top" x-close-on-click="true">\n\t\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--plus"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t\t<div class="measures">\n\t\t\t\t<button class="master-item-header measures" ng-class="{\'selected\': $ctrl.activeMasterItemSection === \'measures\'}"\n\t\t\t\t ng-keyup="$ctrl.itemAccFocus=true" ng-mouseup="$ctrl.itemAccFocus=false" tabindex="0" aria-controls="cao-field-picker-measures-fields"\n\t\t\t\t tid="caoFieldPickerMasterItemsMeasureSectionButton" ng-click="$ctrl.setMasterItemsSection(\'measures\')"\n\t\t\t\t aria-labelledby="{{caoFieldPickerMasterItemMeasuresText}}">\n\t\t\t\t\t<span ng-class="{\'cao-acc-focus\': $ctrl.itemAccFocus}" tid="caoFieldPickerMasterItemMeasuresText" class="group-name">{{$ctrl.fieldPickerTabMeasures}}</span>\n\t\t\t\t</button>\n\t\t\t\t<div class="no-items" ng-if="$ctrl.showFieldPicker && $ctrl.showFieldPicker && !$ctrl.masterItemMeasures.length && $ctrl.activeMasterItemSection === \'measures\'"\n\t\t\t\t q-translation="cao.fieldPicker.noItems"></div>\n\t\t\t\t<ul id="cao-field-picker-measures-fields" class="lui-list master-item-fields" qva-cao-acc-field-items x-items-type="masterItemMeasure"\n\t\t\t\t aria-expanded="$ctrl.activeMasterItemSection === \'measures\'">\n\t\t\t\t\t<div ng-repeat="field in $ctrl.masterItemMeasures" class="field-container">\n\t\t\t\t\t\t<li class="lui-list__item field" tid="caoFieldPickerMasterItemMeasure" cao-acc-field-item="{\'type\': \'masterItemMeasure\', \'index\': $index}"\n\t\t\t\t\t\t ng-click="$ctrl.selectField(field)" q-title-translation={{field.qName}}\n\t\t\t\t\t\t aria-label="{{field.qName}}" ng-class="{\'selected\': field.selected, \'cao-acc-focus\': $ctrl.itemAccFocus, \'disliked\': $ctrl.isDislikedMasterItem(field) }">\n\t\t\t\t\t\t\t<span class="lui-list__text">{{field.qName}}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<div class="field-picker-propose" ng-if="!$ctrl.caoTweakEnabled && $ctrl.isDislikedMasterItem(field)" ng-click="$event.stopPropagation(); $ctrl.useFieldAgain($ctrl.isDislikedMasterItem(field))"\n\t\t\t\t\t\t lui-title-tooltip title="{{$ctrl.useAgainString}}" x-dock="top" x-close-on-click="true">\n\t\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--plus"></span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){e.directive("qvaCaoAccFieldItems",["qvAccessibilityGridService",function(e){return{restrict:"A",link:function t(n,i,r){n.$on("$destroy",function(){var t=r["itemsType"];e.removeAllItems(t)})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){e.directive("caoAccFieldItem",["$timeout","qvAccessibilityGridService",function(e,t){return{restrict:"A",scope:{caoAccFieldItem:"="},link:function n(i,r){var o=function t(n,i){var o=n===this.col&&i===this.row;e(function(){r.attr("tabindex",o?0:-1);if(o){r.focus();r.addClass("cao-acc-focus")}else r.removeClass("cao-acc-focus")})};var a=t.addItem(i.caoAccFieldItem.index,o,i.caoAccFieldItem.type,0,i.caoAccFieldItem.index);a&&r.attr("tabindex",0);var s=function e(t){switch(t.which){case 9:case 16:"0"===r.attr("tabindex")&&r.addClass("cao-acc-focus");break}};var l=function n(o){switch(o.which){case t.RIGHT_KEY:case t.LEFT_KEY:case t.UP_KEY:case t.DOWN_KEY:o.stopPropagation();o.preventDefault();e(function(){"0"===r.attr("tabindex")&&t.key(o,i.caoAccFieldItem.type)});break}};r.on("mouseup",function(){r.removeClass("cao-acc-focus")});r.on("keyup",s);r.on("keydown",l)}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48)],r=function(e){e.service("qvCaoRenderService",[function(){var e;var t=[];var n=false;function i(){t.sort(function(e,t){return e.priority>t.priority});var e=t[0];e.renderFunction().finally(function(){n=false;t.shift();t.length>0&&i()})}var r=function e(r,o){t.push({renderFunction:r,priority:o});if(!n){n=true;i()}};var o=function e(n){t=t.filter(function(e){return e.renderFunction!==n})};var a=function e(){t=[];n=false};e={enqueueForRender:r,dequeueRender:o,clearRenderQueue:a};return e}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(103),n(168),n(221),n(212)],r=function(e,t,n){e.service("qvCaoLearningService",[function(){var e;var i=new n;function r(e){t.trackEvent(t.customEvents.INSIGHTS_NOT_A_MEASURE_CLICKED);return i.defineDimension({expr:"["+e+"]"})}function o(e){t.trackEvent(t.customEvents.INSIGHTS_NOT_A_DIMENSION_CLICKED);return i.defineMeasure({expr:"["+e+"]"})}function a(e){return i.dislikeLibItem({name:e})}function s(e){return i.dislikeField({name:e})}function l(e){var n=e.getAnalysis();return i.dislikeAnalysis(n).then(function(i){n.precedents={id:i.nodes[0].id,disliked:true};t.trackEvent(t.customEvents.INSIGHTS_HIDE_CHART_CLICKED,{chart:e.getAnalysisPrecedentId()})})}function c(e){var t=e.getAnalysis();return i.undislikeAnalysis(t).then(function(){delete t.precedents})}function u(e,t){return e.filter(function(e){return e.field?e.field.name===t:e.libItem.name===t})[0]}function d(e){return i.getDislikedItems().then(function(n){var r=n[0].nodes;t.trackEvent(t.customEvents.INSIGHTS_PROPOSE_FIELD_AGAIN_CLICKED);var o=u(r,e);return i.undislikeItem(o.id)})}function f(e){return i.dislikeAnalysis(e).then(function(t){e.precedents={id:t.nodes[0].id,disliked:true};return true})}function p(e){return i.undislikeAnalysis(e).then(function(){delete e.precedents;return false})}function h(){return i.getLearnedItems()}function v(){return i.getDislikedItems()}function g(e){return i.removeDefinedItem(e)}function m(e){return i.undislikeItem(e)}e={applyDimensionLearning:r,applyMeasureLearning:o,dislikeLibItem:a,dislikeField:s,hideChart:l,unHideChart:c,unDislikeItem:d,dislikeAnalysis:f,unDislikeAnalysis:p,getDislikedItems:v,getLearnedItems:h,removeDefinedItem:g,unDislikeField:m};return e}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(95),n(91),n(113),n(948),n(949),n(950),n(952),n(954),n(956),n(961)],r=function(e,t,n,i,r,o){var a=["$scope","$timeout","qvCaoSelectionService","qvCaoLearningConfidenceService","qvCaoLearningService",function(r,a,s,l,c){var u=this;var d=null;u.hiddenCharts=[];u.fieldRules=[];u.initState=true;u.isCustomPreferences=true;r.customPreferencesToggleOn=i.CAO_DEBUG;r.customPreferencesToggle={value:true};r.$watch("customPreferencesToggle.value",function(e){u.isCustomPreferences=e;u.precedentsEnabled=e});function f(e){var t=[];var n=u.chart.getSearchReport();var i=u.chart.getMatchDetails();e&&e.forEach(function(e){var r=l.getReasonForSelectingField(e,n,i,true);t=t.concat(r.learned);t=t.concat(r.search)});return t}this.handleHiddenCharts=function(e){if(e){var t=e.getAnalysis();return t.precedents&&t.precedents.disliked?c.unDislikeAnalysis(t):c.dislikeAnalysis(t)}};this.noLearningFound=function(){return!u.isFieldRulesSet()};this.isFieldRulesSet=function(){return u.fieldRules&&u.fieldRules.length>0};this.isFieldRulesEnabled=function(){return u.isFieldRulesSet()&&u.isCustomPreferences};this.viewHiddenCharts=function(){t.publish("cao/insight/open_hidden_charts_panel",u.hiddenCharts)};this.refreshPerformed=function(){u.populateFieldRules()};function p(e){return e.replace(/\{0\}/g,function(e){return"<b>"+e+"</b>"})}function h(e){var t=e.nodes;var i=[];t&&t.length>0&&t.forEach(function(e){var t;t=e&&e.libItem&&e.libItem.name?e.libItem.name:e.field.name;var r=p(n.get("cao.insight.contextPanel.customPreferences.dislikedField"));i.push({label:n.get(r,[t]),field:e,valid:true})});return i}function v(e){var t=e.nodes;var i=[];t&&t.length>0&&t.forEach(function(e){var t=p(n.get("cao.insight.contextPanel.customPreferences.definedItems"));i.push({label:n.get(t,[e[e.type].field,e.type]),field:e,valid:true})});return i}var g=5e3;this.updateListTimer=function(){a.cancel(u.cancelStartTimer);this.cancelStartTimer=a(function(){u.populateFieldRules()},g)};this.populateFieldRules=function(){c.getLearnedItems().then(function(e){var t=[];function n(e){return"define"===e.relation}function i(e){return"dislike"===e.relation}var r=e.filter(i)[0];var o=e.filter(n)[0];r&&(t=t.concat(h(r)));o&&(t=t.concat(v(o)));u.fieldRules=t})};this.removeFieldPreference=function(e){if(e.type)return c.removeDefinedItem(e.id);return c.unDislikeField(e.id)};this.reApplyDefinedField=function(e){if("dimension"===e.type)return c.applyDimensionLearning(e.dimension.field);return c.applyMeasureLearning(e.measure.field)};this.reApplyFieldPreference=function(e){if(e.type)return u.reApplyDefinedField(e);if(e.field)return c.dislikeField(e.field.name);if(e.libId)return c.dislikeLibItem(e.libId.name)};this.openGlobalModeSummaryDialog=function(){d=e.getService("luiDialog").show({template:o,input:{title:"cao.insight.contextPanel.HelpTitle",html:o,closeDialog:function e(){d.close();d=null}}})};this.isHiddenCharts=function(){return u.hiddenCharts&&"INTRO"!==u.state&&"INIT"!==u.state};function m(){return{type:"hide",isHiddenChartLearningOption:true,text:n.get("cao.insight.contextPanel.details.hideChart"),subText:n.get("cao.insight.contextPanel.details.hideChart.subtext"),chart:u.chart}}this.getDetailsForSelectedChart=function(){if(this.chart){var e=[];e=e.concat(f(this.chart.getFields()));e=e.concat(f(this.chart.getMeasures()));e=e.concat(f(this.chart.getDimensions()));e.push(m());u.detailsForChart=e}};this.hiddenChartsTitle=function(){return n.get("cao.insight.contextPanel.hiddenCharts",[u.hiddenCharts.length])};this.updateChart=function(e){u.chart=e;u.initState=true;u.hiddenCharts=[];u.chart?u.getDetailsForSelectedChart():u.populateFieldRules()};u.updateChart(s.getSelectedChart());function b(){u.getDetailsForSelectedChart()}this.openDetailsOption=function(e){u.currentDetailsOption&&u.currentDetailsOption===e?u.currentDetailsOption=null:u.currentDetailsOption=e};t.subscribe("cao/insight/selectedChartChanged",this.updateChart);t.subscribe("cao/insight/light_editing",b);t.subscribe("cao/insight/refreshPerformed",u.refreshPerformed);this.$onDestroy=function(){t.unsubscribe("cao/insight/selectedChartChanged");t.unsubscribe("cao/insight/light_editing");t.unsubscribe("cao/insight/refreshPerformed",u.refreshPerformed);u.cancelStartTimer&&a.cancel(u.cancelStartTimer)}}];var s={transclude:true,template:r,bindings:{app:"<",hiddenCharts:"<",state:"<",insightFeedback:"<",precedentsEnabled:"="},controller:a};return e.nativeComponent("qvCaoInsightsContextPanel",s)}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="cao-insights-context-panel editor">\n\t<div class="cao-insight-context-panel-header">\n\t\t<div class="title" q-translation="{{ $ctrl.chart ? \'cao.insight.contextPanel.header\' : \'cao.insight.contextPanel.global.header\' }}"></div>\n\t\t<span ng-if="!$ctrl.chart" class="lui-icon lui-icon--help lui-icon--small help-icon" ng-click="$ctrl.openGlobalModeSummaryDialog()"></span>\n\t</div>\n\t\n\t<div class="context-panel-content">\n\t\n\t\t<div ng-if="!$ctrl.chart" class="global-mode">\n\t\t\t<div ng-if="$ctrl.isHiddenCharts()" class="hidden-charts">\n\t\t\t\t<button class="hidden-charts-button" ng-click="$ctrl.viewHiddenCharts()">\n\t\t\t\t\t<span class="lui-list__aside">\n\t\t\t\t\t\t<span class="lui-icon hidden-chart-icon"></span>\t\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="lui-list__aside text-wrapper">\n\t\t\t\t\t\t<span class="lui-list__text title" tid="cao-hidden-charts-title">{{$ctrl.hiddenChartsTitle()}}</span>\t\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="lui-list__aside ng-scope">\n\t\t\t\t\t\t<span class="lui-icon lui-icon--small lui-icon--arrow-right icon-arrow"></span>\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n\t\t\t\t<qv-cao-hidden-charts-panel on-panel-hide-action="$ctrl.handleHiddenCharts(chart)" hidden-charts="$ctrl.hiddenCharts" hidden-charts-title="$ctrl.hiddenChartsTitle()" />\n\t\t\t</div>\n\t\t\t<div ng-if="$ctrl.noLearningFound()" class="global-mode-no-learning-applied">\n\t\t\t\t<div class="no-learning-icon" />\n\t\t\t\t<p q-translation="cao.insight.contextPanel.noLearningApplied" class="no-learning-text"></p>\n\t\t\t</div>\n\t\t\t<div ng-if="$ctrl.isFieldRulesSet()" class="custom-preferences">\n\t\t\t\t<span class="lui-list__aside">\n\t\t\t\t\t<span class="lui-icon lui-icon--approve"></span>\n\t\t\t\t</span>\n\n\t\t\t\t<div class="spacing">\n\t\t\t\t\t<div class="preferences-header-title">\n\t\t\t\t\t\t<div class="title" q-translation="cao.insight.contextPanel.customPreferences.title"></div>\n\t\t\t\t\t\t<div class="sub-title" ng-if="customPreferencesToggleOn" q-translation="{{ $ctrl.isCustomPreferences ? \'properties.on\' : \'properties.off\' }}"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="switch-toggle" ng-if="customPreferencesToggleOn">\n\t\t\t\t\t\t<lui-switch x-model="customPreferencesToggle.value" tid="cao-custom-preferences-switch" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div ng-if="$ctrl.isFieldRulesEnabled()">\n\t\t\t\t<qv-cao-field-preferences ng-repeat="fieldRule in $ctrl.fieldRules" delete-rule="$ctrl.removeFieldPreference(fieldPref)" re-apply-rule="$ctrl.reApplyFieldPreference(fieldPref)" field-rule="fieldRule" update-list="$ctrl.updateListTimer()" />\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div ng-if="$ctrl.chart" class="chart-mode">\n\t\t\t<div class=\'qv-panel-properties\' style="overflow: auto;">\n\t\t\t\t<qv-cao-insight-editor ng-if="$ctrl.chart" chart="$ctrl.chart" app="$ctrl.app" />\n\t\t\t</div>\n\n\t\t\t<div class="cao-accordion-panel">\n\t\t\t\t<cao-accordion-control label="cao.insight.contextPanel.details">\n\t\t\t\t\t<qv-cao-details-option ng-repeat="detail in $ctrl.detailsForChart" detail="detail" open-learning-options="$ctrl.openDetailsOption" is-learning-option-open="detail === $ctrl.currentDetailsOption" insight-feedback="$ctrl.insightFeedback"></qv-cao-details-option>\n\t\t\t\t</cao-accordion-control>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t){e.exports='<lui-dialog class="selection-insights-dialog" x-variant="{{::variant}}">\n\t<lui-dialog-header>\n\t\t<lui-dialog-title\n\t\t\tq-translation="cao.insight.contextPanel.HelpTitle"\n\t\t></lui-dialog-title>\n\t</lui-dialog-header>\n\t<lui-dialog-body class="q-modal-loading">\n\t\t<p q-translation="cao.insight.contextPanel.HelpText"></p>\n\t</lui-dialog-body>\n\t<lui-dialog-footer>\n\t\t<button\n\t\t\tclass="lui-button close-button"\n\t\t\tng-click="closeDialog();"\n\t\t\tq-translation="Common.Close"\n\t\t\ttid="selection-insights-dialog-help-button"\n\t\t></button>\n\t</lui-dialog-footer>\n</lui-dialog>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(951)],r=function(e,t){var n=[function(){var e=this;e.expanded=true;this.toggleExpanded=function(){e.expanded=!e.expanded}}];var i={transclude:true,template:t,bindings:{label:"@"},controller:n};return e.nativeComponent("caoAccordionControl",i)}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div ng-click="$ctrl.toggleExpanded()"  class="cao-accordion-control" ng-class="{ \'expanded\': $ctrl.expanded }">\n\t<span class="cao-accordion-control-label" q-title-translation="{{$ctrl.label}}" q-translation="{{$ctrl.label}}" />\n\t<span class="cao-accordion-expander lui-icon lui-icon--small lui-icon--arrow-right" ng-class="{ \'expanded\': $ctrl.expanded }"></span>\n</div>\n<div ng-show="$ctrl.expanded">\n\t<ng-transclude></ng-transclude>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(48),n(953)],r=function(e,t,n){var i=["$element","$timeout",function(t,n){this.$onChanges=function(i){i.isLearningOptionOpen&&i.isLearningOptionOpen.currentValue&&n(function(){var n=e(".context-panel-content");if(n.length){var i=t.offset().top-n.offset().top;var r=t.find(".cao-details-option").height();n.scrollTop(i+r)}})}}];var r={transclude:true,template:n,bindings:{detail:"<",openLearningOptions:"<",isLearningOptionOpen:"<",insightFeedback:"<"},controller:i};return t.nativeComponent("qvCaoDetailsOption",r)}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="cao-details-option" ng-if="(!$ctrl.detail.searchMatch && $ctrl.insightFeedback) || $ctrl.detail.searchMatch">\n\t<button class="details-option-button" ng-class="{\'cao-learning-option-open\': $ctrl.isLearningOptionOpen}" ng-click="$ctrl.openLearningOptions($ctrl.detail)" ng-if="!$ctrl.detail.searchMatch && $ctrl.insightFeedback">\n\t\t<div class="detail-icon">\n\t\t\t<span class="lui-list__aside">\n\t\t\t\t<span class="lui-icon {{ !$ctrl.detail.userMatch ? \'lui-icon--analyze\' : \'lui-icon--approve\' }}"></span>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="label-title" ng-bind-html="$ctrl.detail.text"></div>\n\t\t<div class="learning-options-toggle">\n\t\t\t<span class="lui-list__aside">\n\t\t\t\t<span class="lui-icon lui-icon--small lui-icon--more more-option" ng-class="{\'panelNotOpened\' : !$ctrl.isLearningOptionOpen}"></span>\n\t\t\t</span>\n\t\t</div>\n\t</button>\n\t<div class="details-option-item no-hover" ng-if="$ctrl.detail.searchMatch">\n\t\t<div class="detail-icon">\n\t\t\t<span class="lui-list__aside">\n\t\t\t\t<span class="lui-icon {{ !$ctrl.detail.userMatch ? \'lui-icon--analyze\' : \'lui-icon--approve\' }}"></span>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="label-title" ng-bind-html="$ctrl.detail.text"></div>\n\t</div>\n\t<div ng-show="$ctrl.isLearningOptionOpen">\n\t\t<qv-cao-learning-option detail="$ctrl.detail" />\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(95),n(196),n(955)],r=function(e,t,n,i){var r=["qvCaoLearningService",function(e){var i=this;i.learningPerformed=false;var r="field";var o="propose";var a="hide";this.getOppositeLearningOptionActionText=function(){if(i.detail&&i.detail.type)return i.detail.type===n.MEASURE?"cao.insight.contextPanel.details.learningOption.dimension":"cao.insight.contextPanel.details.learningOption.measure";return null};function s(){return i.detail.type===n.MEASURE&&!i.learningPerformed||i.detail.type===n.DIMENSION&&i.learningPerformed?e.applyDimensionLearning(i.detail.field):e.applyMeasureLearning(i.detail.field)}function l(){return i.detail.isLibItem?e.dislikeLibItem(i.detail.libItemId):e.dislikeField(i.detail.field)}function c(e){i.learningPerformed=e;t.publish("cao/insight/learningPerformed",!!e)}this.applyLearning=function(){s().then(function(e){e&&e.nodes[0]&&(i.learningQuad=e.nodes[0].id);c(r)})};this.hideChart=function(){e.hideChart(i.detail.chart).then(function(){c(a)})};this.handleNeverPropose=function(){l().then(function(){c(o)})};this.removeFieldPreference=function(t){if(t.type)return e.removeDefinedItem(t.id);return e.unDislikeField(t.id)};this.revertLearningAction=function(){if(i.detail.type&&i.detail.field&&i.learningQuad&&i.learningPerformed==r){e.removeDefinedItem(i.learningQuad);c()}else i.learningPerformed==o?e.unDislikeItem(i.detail.field).then(function(){c()}):e.unHideChart(i.detail.chart).then(function(){c()})}}];var o={template:i,bindings:{detail:"<"},controller:r};return e.nativeComponent("qvCaoLearningOption",o)}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="cao-learning-option">\n\t<p q-translation="cao.insight.contextPanel.details.learning" />\n\n\t<div ng-if="!$ctrl.detail.isHiddenChartLearningOption && !$ctrl.learningPerformed">\n\t\t<button class="lui-button learning-button" ng-click="$ctrl.applyLearning()" \n\t\t\tq-translation="{{$ctrl.getOppositeLearningOptionActionText()}}" ng-if="$ctrl.getOppositeLearningOptionActionText() && !$ctrl.detail.isLibItem"/>\n\t\t<button class="lui-button learning-button" ng-click="$ctrl.handleNeverPropose()" \n\t\t\tq-translation="cao.insight.contextPanel.details.learningOption.neverPropose" />\n\t</div>\n\n\t<div ng-if="$ctrl.detail.isHiddenChartLearningOption && !$ctrl.learningPerformed">\n\t\t<button class="lui-button learning-button" ng-click="$ctrl.hideChart()" \n\t\t\tq-translation="cao.insight.contextPanel.details.learningOption.hidechart" tid="hide-chart-button" />\n\t\t<p class="hide-subtext" q-translation="{{$ctrl.detail.subText}}" />\n\t</div>\n\n\t<div ng-if="$ctrl.learningPerformed">\n\t\t<button class="lui-button learning-button undo" ng-click="$ctrl.revertLearningAction()" \n\t\t\tq-translation="cao.insight.contextPanel.details.learningOption.undo" />\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(95),n(957),n(958)],r=function(e,t,n){var i=[function(){var e=this;this.openPanel=function(){e.isPanelOpened=true};this.closePanel=function(){e.isPanelOpened=false};this.handleHiddenChart=function(n){t.publish("cao/insight/learningPerformed",!!n);return e.onPanelHideAction({chart:n})};t.subscribe("cao/insight/open_hidden_charts_panel",this.openPanel);this.$onDestroy=function(){t.unsubscribe("cao/insight/open_hidden_charts_panel")}}];var r={template:n,controller:i,bindings:{onPanelHideAction:"&",hiddenCharts:"<",hiddenChartsTitle:"<"}};return e.nativeComponent("qvCaoHiddenChartsPanel",r)}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="hidden-charts-panel" ng-class="{ \'open-panel\': $ctrl.isPanelOpened }">\n\t\t<div class="header" ng-click="$ctrl.closePanel()">\n\t\t\t<div class="header-wrapper">\n\t\t\t\t<div class="back-navigation">\n\t\t\t\t\t<span class="lui-icon back-icon  lui-icon--previous  lui-icon--small" />\n\t\t\t\t</div>\n\t\t\t\t<div class="text-wrapper">\n\t\t\t\t\t<div class="navigation-title" q-translation="cao.insight.hiddenCharts.panel.goBackTitle"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\n\t\t<div class="hidden-charts-content">\n\t\t\t<div class="spacing title">{{$ctrl.hiddenChartsTitle}}</div>\n\t\t\t<div class="spacing sub-title" q-translation="cao.insight.hiddenCharts.panel.subTitle" ng-if="$ctrl.hiddenCharts.length > 0"></div>\n\t\t\t<div class="spacing sub-title" q-translation="cao.insight.hiddenCharts.panel.subTitleNoHiddenCharts" ng-if="$ctrl.hiddenCharts.length === 0"></div>\n\t\t\t<qv-cao-hidden-charts-view chart="chart" index="$index" ng-repeat="chart in $ctrl.hiddenCharts | orderBy : \'-chart.relevance\'"\n\t\t\t\ton-hide-action="$ctrl.handleHiddenChart(chart)"></cao-hidden-charts-view>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(91),n(959),n(264),n(960)],r=function(e,t,n,i,r){var o=["$element","qvCaoRenderService","luiTooltip","luiPopover",function(e,n,o,a){var s=this;var l=[];s.popupOpen=false;s.actionIcon="view";var c=null;var u={template:i.template,controller:i.controller,input:{item:"",style:{width:"150px"}},alignTo:e.find(".hide-action-button")[0],dock:"left"};var d=500;function f(e){var t=[];e&&e.length>0&&(t=e.map(function(e){return e.field||e.libIdLabel}));return t}this.toTitleCase=function(e){if(e)return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})};this.setFields=function(){if(s.chart){var e=[];var t=[];var n=[];e=e.concat(f(s.chart.getDimensions()));t=t.concat(f(s.chart.getMeasures()));n=n.concat(f(s.chart.getFields()));s.dimensions=e.toString();s.measures=t.toString();s.fields=n.toString()}};function p(){return s.chart.getComplexity()?s.chart.getComplexity():s.index}this.loadChart=function(){return s.chart.loadChart()};function h(e,t,n,i,r){var o={template:e,controller:t,dock:i,closeOnResize:true,alignTo:n};var c=a.show(o);l.push(c);c.closed.then(function(){s.popupOpen=false;"function"===typeof r&&r()})}this.openChartInfoPopover=function(){if(s.popupOpen){s.popupOpen=false;l=[]}else{s.popupOpen=true;var t=["$scope",function(e){e.dimensions=s.dimensions;e.measures=s.measures;e.fields=s.fields}];h(r,t,e.find(".open-chart-info-popover")[0],"bottom")}};this.$onChanges=function(){if(s.chart){n.enqueueForRender(s.loadChart,p());s.chart.refreshChartType();s.setFields()}};this.$onDestroy=function(){s.chart&&this.chart.destroyChart()};this.openTooltip=function(){setTimeout(function(){var e=s.chart.isHidden()?"cao.insight.hiddenCharts.view.unhide":"cao.insight.hiddenCharts.view.hide";u.input.item=t.get(e);c=o.show(u)},d)};this.closeTooltip=function(){setTimeout(function(){c&&c.close()},d)};this.handleHideChartAction=function(){s.closeTooltip();s.onHideAction({chart:s.chart})}}];var a={template:n,bindings:{chart:"<",index:"<",onHideAction:"&"},controller:o};return e.nativeComponent("qvCaoHiddenChartsView",a)}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="hidden-charts-view" ng-class="{ \'hidden\': !$ctrl.chart.isHidden() }">\n\t\t<div class="title-container spacing">\n\t\t\t<div class="header-title">\n\t\t\t\t<div class="title">\n\t\t\t\t\t{{ $ctrl.toTitleCase($ctrl.chart.chartType) }}\n\t\t\t\t</div>\n\t\t\t\t<div class="open-chart-info-popover" ng-click="$ctrl.openChartInfoPopover()"><span class="lui-icon lui-icon--info" /></div>\n\t\t\t</div>\n\t\t\t<div class="cao-hide-action" >\n\t\t\t\t<span class="lui-list__aside action-button-container">\n\t\t\t\t\t<span \n\t\t\t\t\t\tclass="hide-action-button" \n\t\t\t\t\t\tng-class="$ctrl.chart.isHidden() ? \'icon--view\': \'lui-icon lui-icon--back\'"\n\t\t\t\t\t\tng-click="$ctrl.handleHideChartAction()" \n\t\t\t\t\t\tng-mouseover="$ctrl.openTooltip()" \n\t\t\t\t\t\tng-mouseleave="$ctrl.closeTooltip()"\n\t\t\t\t\t/>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t\n\t\t<div class="spacing content-view">\n\t\t\t<div class="wrapper">\n\t\t\t\t<div class="image-container" ng-if="$ctrl.chart && $ctrl.chart.getState() === \'LOADING\'">\n\t\t\t\t\t<img ng-src="{{$ctrl.chart.chartTypeImageUrl}}" class="loader-image" />\n\t\t\t\t</div>\n\t\t\t\t<qv-object ng-if="$ctrl.chart && $ctrl.chart.getState() === \'LOADED\'" model="$ctrl.chart.chart.model" options="$ctrl.chart.options" object="$ctrl.chart.object" />\n\t\t\t</div>\n\t\t</div>\n</div>'},function(e,t){e.exports='<lui-popover class="cao-hidden-charts-popover">\n\t<div class="cao-hidden-charts-popover-body">\n\t\t<ul class="lui-list cao-hidden-charts-popover-list">\n\t\t\t<li class="lui-list__item cao-hidden-charts-popover-list__item" ng-if="dimensions">\n\t\t\t\t<div>\n\t\t\t\t\t<strong q-translation="Common.Dimensions"></strong>:<span>&nbsp;{{ dimensions }}</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item cao-hidden-charts-popover-list__item" ng-if="measures">\n\t\t\t\t<div>\n\t\t\t\t\t<strong q-translation="Common.Measures"></strong>:<span>&nbsp;{{ measures }}</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item cao-hidden-charts-popover-list__item" ng-if="fields">\n\t\t\t\t<div>\n\t\t\t\t\t<strong q-translation="Common.Fields"></strong>:<span>&nbsp;{{ fields }}</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</lui-popover>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(95),n(91),n(962),n(264)],r=function(e,t,n,i,r){var o=["luiTooltip","$element",function(e,i){var o=this;var a=null;var s={template:r.template,controller:r.controller,input:{item:"",style:{width:"150px"}},alignTo:i.find(".field-rule-action-button")[0],dock:"left"};this.toggleFieldRule=function(){o.fieldRule.valid=!o.fieldRule.valid;t.publish("cao/insight/learningPerformed",true)};this.handleFieldRuleAction=function(){o.closeTooltip();o.fieldRule.valid?o.deleteRule({fieldPref:o.fieldRule.field}).then(function(){o.toggleFieldRule();o.updateList()}):o.reApplyRule({fieldPref:o.fieldRule.field}).then(function(){o.toggleFieldRule()})};this.openTooltip=function(){var t=o.fieldRule.valid?"cao.insight.contextPanel.customPreferences.remove":"cao.insight.contextPanel.customPreferences.restore";s.input.item=n.get(t);a=e.show(s)};this.closeTooltip=function(){a&&a.close()}}];var a={template:i,bindings:{fieldRule:"<",deleteRule:"&",reApplyRule:"&",updateList:"&"},controller:o};return e.nativeComponent("qvCaoFieldPreferences",a)}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="cao-field-preferences" ng-class="{ \'hidden\': !$ctrl.fieldRule.valid }">\t\n\t<div class="label-title" ng-bind-html="$ctrl.fieldRule.label" />\n\t<div class="field-rule-action-container" >\n\t\t<span class="lui-list__aside action-button-container">\n\t\t\t<span \n\t\t\t\tclass="lui-icon field-rule-action-button" \n\t\t\t\tng-class="$ctrl.fieldRule.valid ? \'lui-icon--bin\': \'lui-icon--back\'"\n\t\t\t\tng-click="$ctrl.handleFieldRuleAction()" \n\t\t\t\tng-mouseover="$ctrl.openTooltip()" \n\t\t\t\tng-mouseleave="$ctrl.closeTooltip()"\n\t\t\t/>\n\t\t</span>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(10),n(95),n(964),n(223),n(222)],r=function(e,t,n,i,r,o){var a=["$window",function(e){var i=this;i.app=null;i.isToggleContextDisabled=false;this.$onInit=function(){t.element(e).bind("resize",i.autoHidePanels);i.autoHidePanels()};this.$onChanges=function(e){i.app=e.app.currentValue;i.isContextPanelVisible=r.storageObj(i.app.id).contextPanel;i.isAssetsPanelVisible=r.storageObj(i.app.id).assetsPanel};this.autoHidePanels=function(n){var r="string"!==typeof n;var o=t.element(e).innerWidth();o<1200&&(i.isContextPanelVisible&&i.isAssetsPanelVisible&&r?i.toggleContextPanel():i.isAssetsPanelVisible&&i.isContextPanelVisible&&"assets"===n?i.toggleContextPanel():i.isAssetsPanelVisible&&i.isContextPanelVisible&&"context"===n&&i.toggleAssetsPanel())};this.getContextPanelToggleButtonTitle=function(){return i.isContextPanelVisible?"cao.insight.hideContextPanel":"cao.insight.showContextPanel"};this.getHideAssetsButtonTitle=function(){return i.isAssetsPanelVisible?"cao.insight.hideAssetsPanel":"cao.insight.showAssetsPanel"};this.contextPanelToggled=function(){i.autoHidePanels("context");o.resizeCharts(e)};this.toggleContextPanel=function(){if(!i.isToggleContextDisabled){i.isContextPanelVisible=!i.isContextPanelVisible;r.toggleContextPanel(i.app.id);n.publish("cao/insight/contextPanelToggled",i.isContextPanelVisible)}};this.disableToggleContext=function(e){i.isToggleContextDisabled=e};this.assetsPanelToggled=function(t){i.isAssetsPanelVisible=t;i.autoHidePanels("assets");o.resizeCharts(e)};this.toggleAssetsPanel=function(){i.isAssetsPanelVisible=!i.isAssetsPanelVisible;r.toggleAssetsPanel(i.app.id);n.publish("cao/insight/assetsPanelToggled",i.isAssetsPanelVisible)};n.subscribe("cao/insight/contextPanelToggled",this.contextPanelToggled);n.subscribe("cao/insight/assetsPanelToggled",this.assetsPanelToggled);n.subscribe("cao/insight/editInsightProperties",i.disableToggleContext);this.$onDestroy=function(){n.unsubscribe("cao/insight/contextPanelToggled");n.unsubscribe("cao/insight/assetsPanelToggled");n.unsubscribe("cao/insight/editInsightProperties")}}];var s={transclude:true,template:i,bindings:{app:"<",insightFeedback:"<"},controller:a};return e.nativeComponent("qvCaoInsightsBottomPanel",s)}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='\n<div class="cao-insights-bottom-panel">\n\t<div class="hide-assets-panel-container">\n\t\t<button class="bottom-panel-button" ng-class="{ \'lui-active\': $ctrl.isAssetsPanelVisible }" q-title-translation="{{$ctrl.getHideAssetsButtonTitle()}}" tid="bottom-panel-button-left"\n\t\t\tng-click="$ctrl.toggleAssetsPanel()" tabindex="0">\n\t\t\t<span class="lui-icon lui-icon--toggle-left" />\n\t\t\t<span class="label" q-translation="{{$ctrl.getHideAssetsButtonTitle()}}" />\n\t\t</button>\n\t</div>\n\t<div class="hide-insight-properties-container" ng-if="$ctrl.insightFeedback">\n\t\t<button class="bottom-panel-button" ng-class="{ \'lui-active\': $ctrl.isContextPanelVisible, \'disabled\': $ctrl.isToggleContextDisabled }" q-title-translation="{{$ctrl.getContextPanelToggleButtonTitle()}}" tid="bottom-panel-button-right" \n\t\t\tng-click="$ctrl.toggleContextPanel()" tabindex="0" ng-attr-tabindex="{{$ctrl.isToggleContextDisabled ? \'-1\' : \'0\'}}">\n\t\t\t<span class="label" q-translation="{{$ctrl.getContextPanelToggleButtonTitle()}}" />\n\t\t\t<span class="lui-icon lui-icon--toggle-right" />\n\t\t</button>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(966),n(48),n(90),n(967),n(11),n(167),n(277)],r=function(e,t,n,i,r,o){t.service("qvMultiStatePopoverService",["luiPopover",function(t){var a;function s(e,t){var n=e.which;n=e.shiftKey&&o.TAB===n?"SHIFT_TAB":n;switch(n){case o.ARROW_LEFT:case o.ARROW_UP:case"SHIFT_TAB":case o.ESCAPE:r(t).focus();e.preventDefault();break}}return{show:function r(o){var l={handleBtnKeyDown:s,getItems:function e(){return[]},autoFocus:false};o=n.extend(true,{},l,o);a=t.show({template:e,controller:i.controller,alignTo:o.alignToElement,autoFocus:o.autoFocus,input:{title:o.title,getItems:o.getItems,clear:o.clear,click:o.click,onClose:o.onClose,brightCurSel:o.brightCurSel,openTooltip:o.openTooltip,closeTooltip:o.closeTooltip,handleKeyDown:o.handleKeyDown,handleBtnKeyDown:o.handleBtnKeyDown,handlePopoverKeyDown:o.handlePopoverKeyDown,alignToElement:o.alignToElement},closeOnResize:true,dock:"top"});return a},close:function e(){a&&a.close();a=null}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover class="lui-popover qv-multi-state-popover" ng-class="{ bright: input.brightCurSel }" tid="qv-multi-state-popover">\n\t<lui-popover-header class="lui-popover__header">\n\t\t<div class="lui-popover__title">\n\t\t\t<span ng-if="input.title && input.title.length">{{ input.title }}</span>\n\t\t\t<div class="btn-clearall">\n\t\t\t\t<lui-button \n\t\t\t\t\ttid="qv-multi-state-popover-btn-clear"\n\t\t\t\t\tclass="clear-all-btn lui-button--block"\n\t\t\t\t\tng-keydown="handleBtnKeyDown($event, input.alignToElement)" \n\t\t\t\t\tng-click="input.clear(input.getItems()[0].qField, null, $event)" \n\t\t\t\t\tng-disabled="allItemsNonClearable( input.getItems() )" \n\t\t\t\t\tq-title-translation="AlternateState.Popover.ClearAllStates">\n\t\t\t\t\t<span class="lui-button__text" q-translation="AlternateState.Popover.ClearAllStates"></span>\n\t\t\t\t</lui-button>\n\t\t\t</div>\n\t\t</div>\n\t</lui-popover-header>\t\n\t<lui-popover-body class="lui-popover__body">\n\t\t<ul class="lui-list" qva-direction x-dir-setting="{{input.direction}}">\n\t\t\t<li class="item" ng-repeat="item in input.getItems()" ng-click="input.click($event)" ng-mousemove="input.openTooltip($event, item)" ng-mouseleave="input.closeTooltip()"\n\t\t\t\ttabindex="0" ng-keydown="handleKeyDown($event, item)" aria-label="{{item.screenReaderLabel}}" ng-class="{ \'item-locked\' : item.qLocked }">\n\t\t\t\t<div class="item-container">\n\t\t\t\t\t<div ng-if="item.qLocked" class="icon-lock">\n\t\t\t\t\t\t<span class="lui-icon lui-icon--lock">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="item-component text-container" qva-direction x-dir-text="{{item.displayStateName}}">\n\t\t\t\t\t\t<div class="text">{{ item.displayStateName }}</div>\n\t\t\t\t\t\t<div class="values">{{ item.translation }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div ng-if="!( item.qLocked || item.qOneAndOnlyOne )" class="item-component remove" ng-click="input.clear(item.qField, item.stateName, $event)" q-title-translation="CurrentSelections.Remove">\n\t\t\t\t\t\t<span class="lui-icon lui-icon--remove"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<qv-state-count-bar ng-if="!item.isPlaceHolder && item.isSingleState" state-counts="item.qStateCounts"></qv-state-count-bar>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>'},function(e,t,n){"use strict";var i,r;!(i=[n(277)],r=function(){var e={template:null,controller:["$scope","$element","$timeout",function(e,t,n){this.close=function(){i()};function i(){n(function(){e.destroyComponent();t.remove()})}e.closingDeferred.promise.then(function(t){e.input.onClose(t);i()});e.allItemsNonClearable=function(e){return!e.some(function(e){var t=!(e.qLocked||e.qOneAndOnlyOne);return t})}}]};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="current-selections-item" data-tid="current-selections-item"\n\tng-mousemove="openTooltip($event, item)" ng-mouseleave="closeTooltip()" \n\tng-class="{\n\t\t\'active\' : item.qField === activeFieldName,\n\t\t\'dim\' : $parent.itemSelected && !item.active,\n\t\t\'item-locked\' : item.qLocked,\n\t\t\'locked-feedback item-animate-in\' : item.feedbackActive && item.qLocked,\n\t\t\'item-animate-out\' : (!item.feedbackActive && item.qLocked) || (!item.feedbackActive && item.qOneAndOnlyOne),\n\t\t\'single-select-feedback item-animate-in\' : item.feedbackActive && item.qOneAndOnlyOne,\n\t\t\'single-icon\': item.qOneAndOnlyOne || item.qLocked\n\t}">\n\t<div ng-class="{locked:item.qLocked}" class="text">\n\t\t<div class="text-wrap">\n\t\t\t<span ng-class="{ \'lui-icon lui-icon--lock\': item.qLocked }"></span>\n\t\t\t<span class="name" tid="selection-name">{{item.name}}</span>\n\t\t</div>\n\t\t<span class="values">\n\t\t\t<span ng-if="!item.isDefaultState">{{item.displayStateName}}:</span>\n\t\t\t<span tid="current-selection-item-text">{{item.translation}}</span>\n\t\t</span>\n\t</div>\n\t<div class="options" title=" "> \x3c!-- The empty title attribute is neeeded for screen reader not to read anchor title: \'clear selections\' --\x3e\n\t\t<div ng-if="!item.isDefaultState" class="item-component count" title="">\n\t\t\t<span class="field-states-indicator"></span>\n\t\t</div>\n\t\t<a ng-if="!currentSelectionDisabled && (!item.qLocked && !item.isPlaceHolder && !item.qOneAndOnlyOne)" ng-click="clear(item.qField, item.stateName)" class="remove" q-title-translation="CurrentSelections.Remove">\n\t\t\t<span class="lui-clear-all lui-icon lui-icon--remove"></span>\n\t\t</a>\n\t</div>\n\n\t<qv-state-count-bar ng-if="!item.isPlaceHolder && item.isSingleState" state-counts="item.qStateCounts"></qv-state-count-bar>\n</div>'},function(e,t){e.exports='<div class="qv-odag-bar" ng-class="{\'inEditMode\': inEditMode, \'inAnalysisMode\': !inEditMode, \'standAlone\': standAlone }">\n\t<div class="leftOdag" qv-pager qv-sortable-list="sortableNavPoints"> \n\t\t<div ng-if="odagNavPoints.items.length === 0" class="drag-help" ng-class="{\'inEditMode\': inEditMode}">{{waterMarkText}}</div>\n\t\t<ul class="list">\n\t\t\t<li ng-repeat="item in odagNavPoints.items track by item.id" class="odag-nav-point" ng-class="item.classList">\n\t\t\t\t<div class="nav-point-container" ng-class="{\'invalid\': item.invalid }">\n\t\t\t\t\t<div ng-if="inEditMode" class="dropArea"></div>\n\t\t\t\t\t<qv-odag-toolbar-navpoint item="item" in-edit-mode="inEditMode"></qv-odag-toolbar-navpoint>\n\t\t\t\t</div>\n\t\t\t</li> \n\t\t</ul>\n\t\t<a class="qv-pager-nav qv-pager-previous" ng-click="prevPage()" q-title-translation="Tooltip.Previous"><i class="lui-icon lui-icon--arrow-left"></i></a>\n\t\t<a class="qv-pager-nav qv-pager-next" ng-click="nextPage()" q-title-translation="Tooltip.Next"><i class="lui-icon lui-icon--arrow-right"></i></a>\t\t\n\t</div>\n </div>\t\n'},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(92),n(54),n(102),n(219),n(90)],r=function(e,t,n,i,r,o){var a=t.extend("ODAGNavPoint",{properties:null,parent:null,init:function e(t){i.mixin(this);this.notification("Invalidated");this.parent=t.parent;this.properties={qInfo:{qType:"odagNavPoint"}};this.properties=o.extend(this.properties,t.properties);var r=this;this._sheetInvalidated=function(){r.parent.getProperties().then(function(e){for(var t=0;t<e.navPoints.length;t++){var i=e.navPoints[t];if(i.info.id===r.properties.info.id){if(!n.isEqual(i,n.omit(r.properties,["qInfo"]))){r.properties=o.extend(r.properties,i);r.Invalidated.emit()}break}}})};this.parent.Invalidated.bind(this._sheetInvalidated)},getLayout:function e(){var t=this;this.properties.odagLinkName=null;return r.getList(this.parent.app).then(function(e){if(e.filter(function(e){return e.properties.data.id===t.properties.odagLinkRefID}).length>0)return r.get(t.properties.odagLinkRefID,t.parent.app).then(function(e){t.properties.odagLinkName=e.properties.data.name;return t.properties});t.properties.odagLinkName="";return t.properties})},getProperties:function t(){return e.resolve(this.properties)},getEffectiveProperties:function t(){return e.resolve(this.properties)},clearSoftPatches:function e(){return},removeObject:function e(){this.parent.removeNavPoint(this.properties.info.id)},setProperties:function e(t){var n=this;this.properties=o.extend(this.properties,t);return this.parent.getProperties().then(function(e){for(var t=0;t<e.navPoints.length;t++){var i=e.navPoints[t];if(i.info.id===n.properties.info.id){var r=o.extend({},n.properties);delete r["qInfo"];e.navPoints[t]=r;break}}return n.parent.setProperties(e)})},destroy:function e(){this.parent.Invalidated.unbind(this._sheetInvalidated)}});return a}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={type:"items",component:"accordion",items:{navPointProps:{type:"items",translation:"properties.odagNavProperties",items:{general:{type:"items",grouped:true,items:{title:{type:"string",ref:"title",translation:"Common.Name",minlength:1,readOnly:function e(t,n,i){var r=i.layout;return r&&(r.permissions&&!r.permissions.update||r.qMeta&&r.qMeta.sourceObject&&r.qMeta.sourceObject.length>0)},rollbackInvalid:true}}},odagLinkInfo:{type:"items",items:{odagLinkName:{type:"string",ref:"odagLinkName",translation:"properties.odag.link.name",minlength:1,readOnly:function e(){return true},rollbackInvalid:true}}}}}}};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="drag-odag-navpoint">\n\t<div class="odag-nav-point-cell" ng-class="{\'active\': item.id === selObject.id, \'popoverOpen\': popover, \'invalid\': item.invalid }" ng-style="item.style" ng-click="onODAGNavPointClicked(item)">\n\t\t<qv-progress-circle ng-if="!inEditMode && !item.invalid" class=" odag-progress-circle" percentage="rowCountPercentage"></qv-progress-circle>\n\t\t<div class="cell-name" ng-if="inEditMode || !item.invalid" title="{{item.data.title}}">{{item.data.title}}</div>\n\t\t<div class="cell-name" ng-if="!inEditMode && item.invalid " q-title-translation="odag.toolbar.navpoint.invalid" q-translation="odag.toolbar.navpoint.invalid"></div>\n\t\t<div ng-if="!inEditMode && !item.invalid" class="arrow lui-icon lui-icon--triangle-bottom"></div>\n\t\t<button ng-if="inEditMode && item.invalid" class="lui-fade-button delete-invalid-navpoint" ng-click="deleteInvalidNavPoint($event, item)">\n\t\t\t<span class="lui-fade-button__icon  lui-icon lui-icon--bin"></span>\n\t\t</button>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(91),n(49),n(135),n(295),n(138),n(974),n(323),n(976),n(484)],r=function(e,t,i,r,o,a,s){var l={template:s,controller:["$scope","$element","$timeout","odagNavpointService",function(s,l,c,u){var d;var f=e.getService("qvLoader");s.odagNavpointService=u;s.loadingContent={value:true};s.showInfoPopup=false;s.generatedApps=[];s.bindings=[];s.expandedItem={item:null};s.generateAppInProgress=false;s.bindingsPass=true;s.maxGeneratedAppLimitReached=false;s.dismissedMaxGenAppMsg=false;s.dismissMaxGenAppMsgClicked=function(){s.dismissedMaxGenAppMsg=true};s.isGenerateBtnDisabled=function(){s.bindingsPass=s.bindings.filter(function(e){return false===e.bindingPassesConstraint}).length>0;return s.header.invalid||s.maxGeneratedAppLimitReached||s.bindingsPass||!s.item.rowCountPercentage||100!==s.item.rowCountPercentage||r.isSuffixInUse("noData")||s.generateAppInProgress};s.canApplySelectionsForReload=function(){s.bindingsFailed=s.bindings.filter(function(e){return false===e.bindingPassesConstraint}).length>0;return!(s.header.invalid||s.bindingsFailed||!s.item.rowCountPercentage||100!==s.item.rowCountPercentage||r.isSuffixInUse("noData")||s.generateAppInProgress)};s.infoHeader=t.get("odag.toolbar.navpoint.popup.info.header");s.circleModel={chartValue:s.item.rowCountPercentage?s.item.rowCountPercentage:0};s.$watchCollection("item.rowCountPercentageNumber",function(e){s.item.rowCountPercentage=-1===e?NaN:e;s.circleModel.chartValue=s.item.rowCountPercentage?s.item.rowCountPercentage:0});s.header={invalid:false,templateThumbnail:n.p+"img/core/static/Default_thumbnail_app.png",templateName:t.get("Common.Loading"),templateDescription:t.get("Common.Loading")};function p(){return u.updateItemHeader(s.item,s.header)}s.setSelectionState=function(){var e=s.expandedItem.item;i.getFlag("ODAG_SAAS_ENABLED")&&e&&u.getSelections(e.parentContext.app,e.requestId).then(function(e){s.expandedItemSelectionState=u.getSelectedValuesDisplayString(e,{value:false})})};s.loadGeneratedApps=function(){u.loadGeneratedApps(s.item,s.generatedApps).then(function(){s.loadingContent.value=false;s.expandedItem.item&&(s.generatedApps.some(function(e){return s.expandedItem.item.requestId===e.requestId})?s.setSelectionState():s.expandedItem.item=null);s.maxGeneratedAppLimitReached=s.generatedApps.length>=s.item.maxNumberOfApps;v()})};u.initializeBindings(s.item,s.bindings);h().then(function(){s.item.initialized.promise.then(function(){s.actualRowEstFormatted="NaN"===s.item.actualRowEst?t.get("odag.toolbar.navpoint.popup.invalid"):a.format.number(s.item.actualRowEst,{});s.maxRowExpressionCountFormatted=a.format.number(s.item.maxRowExpressionCount,{});p().finally(function(){s.loadGeneratedApps()})})});function h(){d=c(function(){f.close(true).then(function(){f.show({template:o,hugeLoader:false,mediumLoader:true,appendTo:l.find(".odag-popup-body")[0]})})},0,false);return d}function v(){c.cancel(d);d=null;f.close()}s.onApplySelections=function(){u.initializeBindings(s.item,s.bindings)};s.onNavPointInfoClicked=function(e){e.preventDefault();e.stopPropagation();s.showInfoPopup=!s.showInfoPopup};s.deleteGenAppClicked=function(e,t){e.preventDefault();e.stopPropagation();s.showInfoPopup&&(s.showInfoPopup=!s.showInfoPopup);if(t.deleteIcon&&!t.actionInProgress){t.actionInProgress=true;u.deleteGeneratedApp(t).then(function(){s.loadGeneratedApps();s.expandedItem.item&&t.requestId===s.expandedItem.item.requestId&&(s.expandedItem.item=null);t.actionInProgress=false}).catch(function(e){t.actionInProgress=false;throw e})}};s.reloadApp=function(e,t){s.generateAppInProgress=true;u.reloadApp(s.item,e.requestId,t).then(function(){2===t&&(s.expandedItem.item=null);s.loadGeneratedApps();s.generateAppInProgress=false}).catch(function(e){s.generateAppInProgress=false;throw e})};s.onGenerateAppClicked=function(){s.generateAppInProgress=true;s.showInfoPopup=false;u.generateApp(s.item).then(function(){s.generateAppInProgress=false;s.loadGeneratedApps()}).catch(function(e){s.generateAppInProgress=false;throw e})};s.$on("$destroy",function(){u.stopLoadGeneratedApps(s.item);v()})}]};return l}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover id="odag-toolbar-navpoint-popover" ng-class="expandedItem.item? \' request-expanded\' : \'\'" class="odag-toolbar-navpoint-popover"\n x-arrow="arrow">\n\t<lui-popover-header ng-class="{\'invalid\': header.invalid}">\n\t\t<img qva-prevent-drag ng-src="{{ header.imgSrc }}" class="app-thumbnail-img" />\n\t\t<div class="title-description-container">\n\t\t\t<lui-popover-title title="{{header.templateName}}">{{header.templateName}}</lui-popover-title>\n\t\t\t<lui-popover-title ng-if="!header.invalid" class="desciption" title="{{header.templateDescription}}">{{header.templateDescription}}</lui-popover-title>\n\t\t</div>\n\t</lui-popover-header>\n\n\t<lui-popover-body class="odag-popup-body" qva-outside-ignore-for="odag-request-menu">\n\t\t<odag-app-list2 class="odag-app-list-container" applist="generatedApps" reload-app="reloadApp" load-generated-apps="loadGeneratedApps" set-selection-state="setSelectionState"\n\t\t generate-app-in-progress="generateAppInProgress" expanded-item="expandedItem" is-header-invalid="header.invalid" is-generate-btn-disabled="isGenerateBtnDisabled"\n\t\t can-apply-selections-for-reload="canApplySelectionsForReload" expanded-item-selection-state="expandedItemSelectionState"\n\t\t loading="loadingContent.value" delete-clicked="deleteGenAppClicked" on-apply-selections-callback="onApplySelections" open-app-callback="item.openAppCallback"></odag-app-list2>\n\t\t<div ng-if="maxGeneratedAppLimitReached && !dismissedMaxGenAppMsg && !expandedItem.item" class="odag-max-app-limit-reached">\n\t\t\t<div class="max-app-text" q-translation="odag.toolbar.napvoint.popup.maxAppLimitReached"></div>\n\t\t\t<button class="lui-fade-button close-button" q-title-translation="Common.Close" ng-click="dismissMaxGenAppMsgClicked()">\n\t\t\t\t<span class="lui-button__icon  lui-icon lui-icon--small  lui-icon--close"></span>\n\t\t\t</button>\n\t\t</div>\n\t</lui-popover-body>\n\t<div ng-if="showInfoPopup" class="infoPopup">\n\t\t<div class="info-constraints-header">{{infoHeader}}</div>\n\t\t<div class="info-row-count-container">\n\t\t\t<div class="info-section" q-translation="odag.toolbar.navpoint.popup.info.row.count.header"></div>\n\t\t\t<div class="info-row-count-content">\n\t\t\t\t<div class="info-row-count-progress-circle">\n\t\t\t\t\t<circle-chart model=\'circleModel\'></circle-chart>\n\t\t\t\t</div>\n\t\t\t\t<div class="info-row-count-current">\n\t\t\t\t\t<div class="info-row-count-header" q-translation="odag.toolbar.navpoint.popup.info.row.count.current.header"></div>\n\t\t\t\t\t<div class="">{{actualRowEstFormatted}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="info-row-count-constraint">\n\t\t\t\t\t<div class="info-row-count-header" q-translation="odag.toolbar.navpoint.popup.info.row.count.constraint.header"></div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t< {{maxRowExpressionCountFormatted}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="info-section" q-translation="odag.toolbar.navpoint.popup.info.field.header"></div>\n\t\t\t<div class="info-field-header">\n\t\t\t\t<div class="info-field" q-translation="odag.toolbar.navpoint.popup.info.field.table.header"></div>\n\t\t\t\t<div class="info-value" q-translation="odag.toolbar.navpoint.popup.info.current.table.header"></div>\n\t\t\t\t<div class="info-constraint" q-translation="odag.toolbar.navpoint.popup.info.constraint.table.header"></div>\n\t\t\t</div>\n\t\t\t<div class="info-field-values">\n\t\t\t\t<div ng-repeat="binding in bindings | orderBy: \'-hasConstraint\' " class="info-field-row" ng-if="bindings.length">\n\t\t\t\t\t<div class="info-field-data">{{binding.fieldName}}</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class="info-value-data">\n\t\t\t\t\t\t<div class="info-field-checkmark" ng-if="binding.bindingPassesConstraint">\n\t\t\t\t\t\t\t<span class="lui-icon  lui-icon--tick" aria-hidden="true"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="info-field-warning" ng-if="!binding.bindingPassesConstraint">\n\t\t\t\t\t\t\t<span class="lui-icon  lui-icon--warning-triangle" aria-hidden="true"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div ng-if="binding.hasConstraint">{{binding.values.length}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class="info-constraint-data">{{binding.constraint}}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<lui-popover-footer>\n\t\t<lui-button ng-if="!expandedItem.item" class="info-button" ng-class="{\'lui-button--danger\': bindingsPass, \'lui-active\': showInfoPopup}"\n\t\t x-variant="fade" ng-click="onNavPointInfoClicked($event)">\n\t\t\t<span class="lui-icon  lui-button__icon lui-icon--info"></span>\n\t\t</lui-button>\n\t\t<lui-button ng-if="!expandedItem.item" tid="odag-toolbar-navpoint-popover_generate_app_button" ng-disabled="isGenerateBtnDisabled()"\n\t\t ng-click="onGenerateAppClicked()" q-translation="odag.toolbar.navpoint.popup.generate.app"></lui-button>\n\t</lui-popover-footer>\n</lui-popover>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(380),n(138),n(460),n(91),n(49)],r=function(e,t,n,i,r,o){e.service("odagNavpointServiceUI",["$timeout",function(e){var a;function s(e,t){t.value=true;for(var n=0;n<e.length;n++){var i="";var o=e[n];if(o.selectedSize>1e4){t.value=false;i=r.get("odag.toolbar.navpoint.popup.request.tab.xNumSelectedValues",o.selectedSize);o.valuesDisplayString=i}else{var a=0;for(;a<o.values.length&&a<5;a++){a>0&&(i+=", ");i+=o.values[a].strValue}5===a&&o.values.length>5&&(i+=r.get("odag.toolbar.navpoint.popup.request.tab.moreSelectedValues",[o.values.length-5+""]));o.valuesDisplayString=i}}return e}function l(e,i){var a=new Date(e.modifiedDate);var l=o.getFlag("ODAG_SAAS_ENABLED");function c(e){var t="";if(Intl&&Intl.DateTimeFormat){var i={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};t=Intl.DateTimeFormat(n.locale.get(),i).format(e)}else t=n.format.date(e,{datetime:"medium"});return t}var u=c(a);var d=null;if(e.loadState&&e.loadState.finishedAt&&"pending"!==e.loadState.status){var f=new Date(e.loadState.finishedAt);d=c(f)}var p="";var h=false;var v="";var g="lui-icon--bin";var m=r.get("odag.toolbar.navpoint.popup.tooltip.delete");var b=[];var y=[];var x=[];v=e.generatedAppOrigName?e.generatedAppOrigName:"";e.generatedApp&&e.generatedApp.name&&(v=e.generatedApp.name);e.validation&&e.validation.contents&&e.validation.contents.forEach(function(e){b.push({id:b.length,message:e});y.push({id:y.length,message:e})});if(!l&&e.loadState&&e.loadState.messages&&e.loadState.messages.progressData){e.loadState.messages.progressData.persistentProgressMessages&&e.loadState.messages.progressData.persistentProgressMessages.forEach(function(e){y.push({id:y.length,message:t.translateMessage(e)})});e.loadState.messages.progressData.transientProgressMessage&&y.push({id:y.length,message:t.translateMessage(e.loadState.messages.progressData.transientProgressMessage)});e.loadState.messages.progressData.errorData&&e.loadState.messages.progressData.errorData.forEach(function(e){x.push({id:x.length,message:e.qErrorString})})}l&&x.push({id:y.length,message:e.errorMessage});switch(e.state){case"validating":case"queued":case"loading":case"canceling":h=true;p="";v=v||r.get("odag.toolbar.navpoint.popup.status.generating");g="lui-icon--remove";m=r.get("odag.toolbar.navpoint.popup.tooltip.cancel");if("canceling"==e.state){g="";u=r.get("odag.toolbar.navpoint.popup.status.canceling");d=u;m=""}break;case"failed":p="warning";v=v||r.get("odag.toolbar.navpoint.popup.status.failed");g="lui-icon--remove";m=r.get("odag.toolbar.navpoint.popup.tooltip.remove");break;case"canceled":p="";g="lui-icon--remove";m=r.get("odag.toolbar.navpoint.popup.tooltip.remove");break;case"succeeded":p="";v=e.generatedApp?e.generatedApp.name:"";g="lui-icon--bin";m=r.get("odag.toolbar.navpoint.popup.tooltip.delete");break}var S={value:false};e.selectionState&&s(e.selectionState,S);var w={name:v,createdDate:e.createdDate,requestId:e.id,owner:e.owner,lastLoadedTime:d,generatedAppId:e.generatedApp?e.generatedApp.id:null,published:!!e.generatedApp&&e.generatedApp.published,publishToStreamName:e.publishToStreamName?e.publishToStreamName:r.get("odag.toolbar.navpoint.popup.request.tab.info.notPublished"),targetSheet:e.targetSheet,timestamp:u,status:p,state:e.state,loading:h,parentContext:i,deleteIcon:g,deleteIconTooltip:m,actionInProgress:false,statusMessageArray:y,selectionsState:e.selectionState,canApplySelections:S.value,progressErrors:x};return w}function c(t){var n=new Image;var r=t.templateThumbnail;if(r){n.src=r;n.onerror=function(){t.imgSrc=i.staticSrc().staticApp()};n.onload=function(){e(function(){t.imgSrc=r})}}}a={createGeneratedAppWrapper:l,updateImageOnItemHeader:c,getSelectedValuesDisplayString:s};return a}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(11),n(91),n(49),n(13),n(316),n(977),n(978),n(979),n(323)],r=function(e,t,n,i,r,o,a,s,l){e.nativeComponent("odagAppList2",{bindings:{applist:"<",loading:"<",deleteClicked:"<",isGenerateBtnDisabled:"<",canApplySelectionsForReload:"<",isHeaderInvalid:"<",loadGeneratedApps:"<",setSelectionState:"<",expandedItemSelectionState:"<",onApplySelectionsCallback:"<",openAppCallback:"<",reloadApp:"<",generateAppInProgress:"=",expandedItem:"=",variant:"@"},controller:["$element","$timeout","luiPopover","odagNavpointService",function(e,l,c,u){var d=this;d.helpTextNoGeneratedApps=n.get("odag.toolbar.navpoint.popup.noApps");d.selectedTab="info";d.moreMenuPopup=null;d.moreMenuPopupItem=null;d.reloadMenuPopup=null;d.inputName="";d.appNameValid=true;d.applyInProgress=false;d.isOdagSaas=i.getFlag("ODAG_SAAS_ENABLED");d.openAppClicked=function(e,n,i){n.preventDefault();n.stopPropagation();if(e.openAppCallback&&t.isFunction(e.openAppCallback))e.openAppCallback(i.generatedAppId,i.targetSheet?i.targetSheet:null);else if(i.generatedAppId&&u.ODAG_TERMINAL_STATES.indexOf(i.state)>-1){var o;o=i.targetSheet?r.rootPath+"sense/app/"+i.generatedAppId+"/sheet/"+i.targetSheet:r.rootPath+"sense/app/"+i.generatedAppId;window.open(o)}};d.renameGenApp=function(e,t){u.renameGenApp(d.expandedItem.item.parentContext.app,e,t).then(function(){d.loadGeneratedApps()})};d.applySelectionsClicked=function(e){d.applyInProgress=true;u.applySelections(e).then(function(){d.onApplySelectionsCallback&&d.onApplySelectionsCallback();d.applyInProgress=false})};d.$doCheck=function(){var e=this;if(this.applist&&this.expandedItem.item){var t=this.applist.filter(function(t){return t.requestId===e.expandedItem.item.requestId})[0];if(t){this.expandedItem.item=t;if(this.expandedItemSelectionState&&this.isOdagSaas){this.expandedItem.item.selectionsState=this.expandedItemSelectionState;this.expandedItem.item.canApplySelections=true}}else this.expandedItem.item=null}d.expandedItem&&d.expandedItem.item&&d.requestInProgress(this.expandedItem.item)&&d.applist.some(function(e){if(e.requestId===d.expandedItem.item.requestId&&e.name===d.expandedItem.item.name&&d.inputName!==e.name){d.inputName=e.name;return true}return false})};d.moreMenuClicked=function(e,t){e.preventDefault();e.stopPropagation();if(d.moreMenuPopup)d.moreMenuPopup.close();else{d.moreMenuPopupItem=t;d.moreMenuPopup=c.show({template:a,alignTo:e.target,variant:null,controller:["$scope",function(e){e.canOpenApp=function(){return t.generatedAppId&&u.ODAG_TERMINAL_STATES.indexOf(t.state)>-1};e.openApp=function(n){if(e.canOpenApp()){d.moreMenuPopup.close();d.openAppClicked(d,n,t)}};e.canReloadApp=function(){return d.canReloadApp(t)};e.reloadApp=function(n){n.preventDefault();n.stopPropagation();if(e.canReloadApp()){d.moreMenuPopup.close();return d.reloadApp(t)}};e.deleteApp=function(e){e.preventDefault();e.stopPropagation();d.moreMenuPopup.close();d.deleteClicked(e,t)}}],closeOnResize:true,closeOnEscape:true});d.moreMenuPopup.closed.then(function(){d.moreMenuPopup=null;d.moreMenuPopupItem=null})}};d.onOutsideClick=function(){d.expandedItem.item=null};d.rowClicked=function(e){d.moreMenuPopup&&d.moreMenuPopup.close();d.reloadMenuPopup&&d.reloadMenuPopup.close();d.expandedItem.item=e;if(d.expandedItem.item){d.inputName=d.expandedItem.item.name;d.setSelectionState()}};d.reloadClicked=function(e,t){e.preventDefault();e.stopPropagation();d.reloadApp(t)};d.requestInProgress=function(e){var t=false;switch(e.state){case u.ODAG_STATE.VALIDATING:case u.ODAG_STATE.QUEUED:case u.ODAG_STATE.LOADING:case u.ODAG_STATE.CANCELING:t=true;break}return t};d.canReloadApp=function(e){var t=true;t=e&&!d.isHeaderInvalid&&!d.generateAppInProgress&&!d.requestInProgress(e);return t};d.validateAppName=function(){var e=true;d.inputName&&o.allowedChars(d.inputName)||(e=false);d.appNameValid=e};d.statusClicked=function(e,t){e.preventDefault();e.stopPropagation();d.moreMenuPopup&&d.moreMenuPopup.close();d.reloadMenuPopup&&d.reloadMenuPopup.close();if(d.expandedItem.item===t)d.expandedItem.item=null;else{d.selectedTab="status";d.expandedItem.item=t;d.scrollIfNecessary()}};d.selectTab=function(e){d.selectedTab=e;d.scrollIfNecessary()};d.inputKeyEnter=function(e){var t=e.target;t.blur()};d.onBlurGenAppName=function(){if(d.appNameValid)d.renameGenApp(d.expandedItem.item.requestId,d.inputName);else{d.inputName=d.expandedItem.item.name;d.validateAppName()}};d.scrollIfNecessary=function(){"status"===d.selectedTab&&l(function(){var n=t(e.find(".tab-contents"));n.scrollTop(n[0].scrollHeight)})};d.onReloadMenuClicked=function(e,t){e.preventDefault();e.stopPropagation();if(d.reloadMenuPopup)d.reloadMenuPopup.close();else{d.reloadMenuPopup=c.show({template:s,alignTo:e.target,variant:null,controller:["$scope",function(e){e.canReloadApp=function(){return d.canReloadApp(t)};e.reloadApp=function(n){n.preventDefault();n.stopPropagation();if(e.canReloadApp()){d.reloadMenuPopup.close();return d.reloadApp(t)}};e.canApplySelectionsReloadApp=function(){return d.canApplySelectionsForReload()};e.canCopyApplySelectionsReloadApp=function(){return!d.isGenerateBtnDisabled()};e.applySelectionsReloadApp=function(n){n.preventDefault();n.stopPropagation();if(e.canApplySelectionsReloadApp()){d.reloadMenuPopup.close();d.reloadApp(t,1)}};e.copyApplySelectionsReloadApp=function(n){n.preventDefault();n.stopPropagation();if(e.canApplySelectionsReloadApp()){d.reloadMenuPopup.close();d.reloadApp(t,2)}}}],closeOnResize:true,closeOnEscape:true});d.reloadMenuPopup.closed.then(function(){d.reloadMenuPopup=null})}}}],template:l})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<lui-popover x-variant="{{::variant}}" x-arrow="arrow" qva-outside-ignore-for="allOutside">\n\t<lui-popover-body class="lui-nopad">\n\t\t<ul class="lui-list odag-request-menu" tid="odag-request-menu">\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-disabled="!canOpenApp()" ng-click="openApp( $event )" tid="openAppFromMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.menu.openApp">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-disabled="!canReloadApp()" ng-click="reloadApp( $event )" tid="reloadFromRequestMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.reload">\n\t\t\t\t</span>\n\t\t\t</li>\t\t\t\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-click="deleteApp( $event )" tid="deleteAppFromMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.menu.deleteApp">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>'},function(e,t){e.exports='<lui-popover x-variant="{{::variant}}" x-arrow="arrow" qva-outside-ignore-for="allOutside">\n\t<lui-popover-body class="lui-nopad">\n\t\t<ul class="lui-list odag-request-menu" tid="odag-request-reload-menu">\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-disabled="!canReloadApp()" ng-click="reloadApp( $event )" tid="reloadFromMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.reload">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-disabled="!canApplySelectionsReloadApp()" ng-click="applySelectionsReloadApp( $event )" tid="applySelectionsReloadFromMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.applySelections.reload">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t\t<li class="lui-list__item" style="cursor: pointer" ng-disabled="!canCopyApplySelectionsReloadApp()" ng-click="copyApplySelectionsReloadApp( $event )" tid="copyApplySelectionsReloadFromMenu">\n\t\t\t\t<span class="lui-list__text lui-list__action"\n\t\t\t\t\tq-translation="odag.toolbar.navpoint.popup.request.copyAndApplySelections.reload">\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t</ul>\n\t</lui-popover-body>\n</lui-popover>'},function(e,t){e.exports='<div class="odag-app-list2" ng-class="$ctrl.variant">\n\t<div ng-if="$ctrl.applist.length === 0 && !$ctrl.loading" class="description">{{$ctrl.helpTextNoGeneratedApps}}</div>\n\t<ul ng-if="$ctrl.applist.length && !$ctrl.loading && !$ctrl.expandedItem.item" class="generated-apps-list">\n\t\t<li ng-repeat="genAppitem in $ctrl.applist" class="list-item" ng-click="$ctrl.rowClicked(genAppitem)">\n\t\t\t<div class="generated-app-item request-header">\n\t\t\t\t<div class="request-first">\n\t\t\t\t\t<div class="expander lui-icon lui-icon--triangle-right"></div>\n\t\t\t\t\t<div class="request-name-timestamp-area">\n\t\t\t\t\t\t<div class="request-first-top-line">\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class="name" title="{{genAppitem.name}}" ng-class="{\'generating\': genAppitem.state === \'validating\' || genAppitem.state === \'queued\' || genAppitem.state === \'loading\' || genAppitem.state === \'canceling\'}">{{genAppitem.name}}</div>\n\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t<div class="request-first-bottom-line timestamp">{{genAppitem.lastLoadedTime ? genAppitem.lastLoadedTime : genAppitem.timestamp }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="request-second">\n\t\t\t\t\t<button class="status-button lui-fade-button" qva-outside-ignore-for="allOutside" ng-click="$ctrl.statusClicked($event, genAppitem)">\n\t\t\t\t\t\t<span ng-hide="genAppitem.loading" class="lui-fade-button__icon lui-icon lui-icon--{{genAppitem.status}}"></span>\n\t\t\t\t\t\t<div ng-if="genAppitem.loading" class="genAppLoading qv-loader"></div>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button ng-if="genAppitem.state === \'validating\' || genAppitem.state === \'queued\' || genAppitem.state === \'loading\'" class="lui-fade-button" title={{genAppitem.deleteIconTooltip}} ng-click="$ctrl.deleteClicked($event, genAppitem)">\n\t\t\t\t\t  <span class="lui-fade-button__icon  lui-icon lui-icon--remove"></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button ng-if="!$ctrl.requestInProgress( genAppitem )" class="lui-fade-button" q-title-translation="odag.toolbar.navpoint.popup.request.moreMenu.tooltip" ng-click="$ctrl.moreMenuClicked($event, genAppitem)" ng-class="{\'lui-active\': $ctrl.moreMenuPopupItem === genAppitem}">\n\t\t\t\t\t  <span class="lui-fade-button__icon  lui-icon lui-icon--more"></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button ng-if="!$ctrl.requestInProgress( genAppitem )" ng-disabled="!(genAppitem.state === \'succeeded\' || genAppitem.state === \'failed\' || genAppitem.state === \'canceled\') || !genAppitem.generatedAppId" class="lui-fade-button" q-title-translation="{{ $ctrl.openAppCallback ? \'odag.toolbar.navpoint.popup.request.openApp.generic.tooltip\' : \'odag.toolbar.navpoint.popup.request.openApp.tooltip\'}}" ng-click="$ctrl.openAppClicked($ctrl, $event, genAppitem)">\n\t\t\t\t\t  <span class="lui-fade-button__icon  lui-icon lui-icon--new-tab"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\t\t\t\n\t\t</li>\n\t</ul>\n\t<div ng-if="$ctrl.expandedItem.item" class="gen-item-expand" qva-outside="$ctrl.onOutsideClick( $event )">\n\t\t<div class="details-container">\n\t\t\t<div class="request-header" ng-click="$ctrl.rowClicked(null)">\n\t\t\t\t<div class="request-first">\n\t\t\t\t\t<div class="expander lui-icon lui-icon--triangle-bottom" tid="odag-applist-expand"></div>\n\t\t\t\t\t<div class="request-name-timestamp-area">\n\t\t\t\t\t\t<div class="request-first-top-line">\n\t\t\t\t\t\t\t<div class="name" title="{{$ctrl.expandedItem.item.name}}" ng-class="{\'generating\': $ctrl.expandedItem.item.state === \'validating\' || $ctrl.expandedItem.item.state === \'queued\' || $ctrl.expandedItem.item.state === \'loading\' || $ctrl.expandedItem.item.state === \'canceling\'}">{{$ctrl.expandedItem.item.name}}</div>\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="request-first-bottom-line timestamp" >{{$ctrl.expandedItem.item.lastLoadedTime ? $ctrl.expandedItem.item.lastLoadedTime : $ctrl.expandedItem.item.timestamp }}</div>\n\t\t\t\t\t</div>\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class="request-second">\n\t\t\t\t\t<button class="status-button lui-fade-button" qva-outside-ignore-for="allOutside" ng-click="$ctrl.statusClicked($event, $ctrl.expandedItem.item)">\n\t\t\t\t\t\t<span ng-if="!$ctrl.expandedItem.item.loading" class="lui-fade-button__icon lui-icon lui-icon--{{$ctrl.expandedItem.item.status}}"></span>\n\t\t\t\t\t\t<div ng-if="$ctrl.expandedItem.item.loading" class="genAppLoading qv-loader"></div>\n\t\t\t\t\t</button>\t\t\t\t\t\t\t\t\n\t\t\t\t\t<button ng-if="$ctrl.expandedItem.item.state === \'validating\' || $ctrl.expandedItem.item.state === \'queued\' || $ctrl.expandedItem.item.state === \'loading\'" class="lui-fade-button" title={{$ctrl.expandedItem.item.deleteIconTooltip}} ng-click="$ctrl.deleteClicked($event, $ctrl.expandedItem.item)">\n\t\t\t\t\t  <span class="lui-fade-button__icon  lui-icon lui-icon--remove"></span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button ng-if="$ctrl.expandedItem.item.state === \'succeeded\' || $ctrl.expandedItem.item.state === \'failed\' || $ctrl.expandedItem.item.state === \'canceled\'" class="lui-fade-button" q-title-translation="{{ $ctrl.openAppCallback ? \'odag.toolbar.navpoint.popup.request.openApp.generic.tooltip\' : \'odag.toolbar.navpoint.popup.request.openApp.tooltip\'}}" ng-disabled="!($ctrl.expandedItem.item.state === \'succeeded\' || $ctrl.expandedItem.item.state === \'failed\' || $ctrl.expandedItem.item.state === \'canceled\') || !$ctrl.expandedItem.item.generatedAppId" ng-click="$ctrl.openAppClicked($ctrl, $event, $ctrl.expandedItem.item)">\n\t\t\t\t\t  <span class="lui-fade-button__icon  lui-icon lui-icon--new-tab"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\t\n\t\t\t</div>\n\t\t\t<div class="generateAppInput">\n\t\t\t\t<input class="lui-input" ng-disabled="$ctrl.generateAppInProgress || !$ctrl.expandedItem.item.generatedAppId || $ctrl.expandedItem.item.state === \'queued\' || $ctrl.expandedItem.item.state === \'loading\' || $ctrl.expandedItem.item.state === \'validating\' || $ctrl.expandedItem.item.state === \'canceling\'" ng-model="$ctrl.inputName" type="text" name="name" maxlength="255" ng-blur="$ctrl.onBlurGenAppName()" ng-change="$ctrl.validateAppName()" qv-enter="$ctrl.inputKeyEnter($event)" ng-class="{ \'lui-invalid\': !$ctrl.appNameValid }"/>\n\t\t\t</div>\n\t\t\t<div class="action-button-section">\n\t\t\t\t<div class="lui-buttongroup reload-button">\n\t\t\t\t\t<lui-button ng-disabled="!$ctrl.canReloadApp( $ctrl.expandedItem.item )" ng-click="$ctrl.reloadClicked($event, $ctrl.expandedItem.item)" q-translation="odag.toolbar.navpoint.popup.request.reload"></lui-button>\n\t\t\t\t\t<lui-button ng-disabled="!$ctrl.canReloadApp( $ctrl.expandedItem.item ) " class= "reload-drop" tid="odag-reload-dropdown"\n ng-click="$ctrl.onReloadMenuClicked( $event, $ctrl.expandedItem.item )">\n\t\t\t\t\t\t<span class="lui-icon lui-caret"></span>\t\t\t\t\t\t\n\t\t\t\t\t</lui-button>\n\t\t\t\t</div>\n\t\t\t\t<lui-button ng-disabled="$ctrl.expandedItem.item.state !== \'succeeded\' && $ctrl.expandedItem.item.state !== \'failed\' && $ctrl.expandedItem.item.state !== \'canceled\' " tid="odag-applist-delete-app" class="delete-button" ng-click="$ctrl.deleteClicked($event, $ctrl.expandedItem.item)" ><span class="lui-icon  lui-button__icon lui-icon--bin"></span></lui-button>\n\t\t\t</div>\n\n\t\t\t<div class="tab-section">\n\t\t\t\t<div class="tab-header">\n\t\t\t\t\t<ul class="lui-tabset lui-tabset--fill">\n\t\t\t\t\t\t<li class="lui-tab" tabindex="0" ng-class="{\'lui-active\': $ctrl.selectedTab === \'info\' }" ng-click="$ctrl.selectTab(\'info\')">\n\t\t\t\t\t\t\t<span class="lui-tab__text tab-label" q-translation="odag.toolbar.navpoint.popup.request.tab.info"></span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="lui-tab" tabindex="0" ng-class="{\'lui-active\': $ctrl.selectedTab === \'selections\' }" ng-click="$ctrl.selectTab(\'selections\')">\n\t\t\t\t\t\t\t<span class="lui-tab__text tab-label" q-translation="odag.toolbar.navpoint.popup.request.tab.selections"></span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class="lui-tab" tabindex="0" ng-class="{\'lui-active\': $ctrl.selectedTab === \'status\' }" ng-click="$ctrl.selectTab(\'status\')">\n\t\t\t\t\t\t\t<span class="lui-tab__text tab-label" q-translation="odag.toolbar.navpoint.popup.request.tab.status"></span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div class="tab-contents">\n\t\t\t\t\t<div class="tab-content selection-tab" ng-if="$ctrl.selectedTab === \'selections\'">\n\t\t\t\t\t\t<div class="info-section selection-tab-top">\n\t\t\t\t\t\t\t<div class="info-text" q-translation="odag.toolbar.navpoint.popup.request.tab.selections.helpText"></div>\n\t\t\t\t\t\t\t<div class="apply-selections-button">\n\t\t\t\t\t\t\t\t<lui-button ng-disabled="($ctrl.expandedItem.item.state !== \'succeeded\' && $ctrl.expandedItem.item.state !== \'failed\' && $ctrl.expandedItem.item.state !== \'canceled\') || $ctrl.applyInProgress" ng-if="$ctrl.expandedItem.item.canApplySelections" ng-click="$ctrl.applySelectionsClicked($ctrl.expandedItem.item)" q-translation="Common.Apply"></lui-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="selections-field-header">\n\t\t\t\t\t\t\t<div class="selections-field" q-translation="odag.toolbar.navpoint.popup.request.tab.selections.field"></div>\n\t\t\t\t\t\t\t<div class="selections-value" q-translation="odag.toolbar.navpoint.popup.request.tab.selections.values"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="selections-field-values">\n\t\t\t\t\t\t\t<div ng-if="$ctrl.expandedItem.item.selectionsState && $ctrl.expandedItem.item.selectionsState.length" ng-repeat="selection in $ctrl.expandedItem.item.selectionsState" class="selections-field-row">\n\t\t\t\t\t\t\t\t<div class="selections-field-data">{{selection.selectionAppParamName}}</div>\n\t\t\t\t\t\t\t\t<div class="selections-value-data">{{selection.valuesDisplayString}}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div ng-if="!$ctrl.expandedItem.item.selectionsState" q-translation="odag.toolbar.navpoint.popup.request.tab.noSelectedValues"> </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="selections-no-selections" ng-if="$ctrl.expandedItem.item.selectionsState && $ctrl.expandedItem.item.selectionsState.length === 0" q-translation="odag.toolbar.navpoint.popup.request.tab.selections.noselections" >\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tab-content" ng-if="$ctrl.selectedTab === \'info\'">\n\t\t\t\t\t\t<div class="info-section">\n\t\t\t\t\t\t\t<div class="info-section-label" q-translation="odag.toolbar.navpoint.popup.request.tab.info.status"></div>\n\t\t\t\t\t\t\t<div class="info-section-value" q-translation="odag.toolbar.navpoint.popup.request.tab.status.{{$ctrl.expandedItem.item.state}}"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="info-section">\n\t\t\t\t\t\t\t<div class="info-section-label" q-translation="odag.toolbar.navpoint.popup.request.tab.info.appOwner"></div>\n\t\t\t\t\t\t\t<div ng-if="!$ctrl.isOdagSaas" class="info-section-value">{{$ctrl.expandedItem.item.owner.userDirectory}}\\{{$ctrl.expandedItem.item.owner.userId}} ({{$ctrl.expandedItem.item.owner.name}})</div>\n\t\t\t\t\t\t\t<div ng-if="$ctrl.isOdagSaas" class="info-section-value">({{$ctrl.expandedItem.item.owner.name}})</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="info-section" ng-if="!$ctrl.isOdagSaas">\n\t\t\t\t\t\t\t<div class="info-section-label" q-translation="odag.toolbar.navpoint.popup.request.tab.info.publishToStream"></div>\n\t\t\t\t\t\t\t<div class="info-section-value"> {{$ctrl.expandedItem.item.publishToStreamName}} </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tab-content odag-request-status-content" ng-if="$ctrl.selectedTab === \'status\'">\n\t\t\t\t\t\t<div class="info-section">\n\t\t\t\t\t\t\t<div class="info-section-label" q-translation="odag.toolbar.navpoint.popup.request.tab.info.lastCompletedRun"></div>\n\t\t\t\t\t\t\t<div class="info-section-value">{{$ctrl.expandedItem.item.lastLoadedTime ? $ctrl.expandedItem.item.lastLoadedTime : \'Common.None\' | translate }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div ng-repeat="message in $ctrl.expandedItem.item.statusMessageArray" class="info-field-row" ng-if="$ctrl.expandedItem.item.statusMessageArray.length" ng-bind="message.message"></div>\n\t\t\t\t\t\t<div ng-repeat="error in $ctrl.expandedItem.item.progressErrors" class="info-field-row info-field-row-error" ng-if="$ctrl.expandedItem.item.progressErrors.length" ng-bind="error.message"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(981)],r=function(e,t){e.directive("qvProgressCircle",function(){return{scope:{percentage:"="},restrict:"E",template:t,link:function e(t,n){function i(){var e=t.percentage;var i=n.find(".progress-circle-svg .bar");var r=i.attr("r");var o=Math.PI*(2*r);if(Number.isNaN(+e)){e=100;i.css({strokeDashoffset:o,fill:"#CCCCCC"})}else{e<0&&(e=0);e>100&&(e=100);var a=(100-e)/100*o;i.css({strokeDashoffset:a});100===t.percentage?i.css({fill:"#61a729"}):i.css({fill:"transparent"})}}t.$watch("percentage",i)},controller:["$scope",function(e){e.$on("$destroy",function(){})}]}})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="progress-circle-container" ng-class="{\'full\': percentage === 100}">\n\t<svg class="progress-circle-svg" viewPort="0 0 0 0">\n\t\t<circle class="baseCircle" r="6" cx="8px" cy="8px" fill="transparent" stroke-dasharray="37.699" stroke-dashoffset="0"></circle>\n\t\t<circle class="whiteBar" r="6" cx="8px" cy="8px" fill="transparent" stroke-dasharray="37.699" stroke-dashoffset="0"></circle>\n\t\t<circle class="bar" r="6" cx="8px" cy="8px" fill="transparent" stroke-dasharray="37.699" stroke-dashoffset="0"></circle>\n\t</svg>\n</div>\n'},,,,,,function(e,t,n){var i,r,o;(function(){var a=function(e){var t,n,i;n=""===/t(.+)?/.exec("t")[1];function r(e,t){if(e.indexOf)return e.indexOf(t);var n=e.length;while(n--)if(e[n]===t)return n;return-1}function o(e,t){var n=r(e,t);-1!==n&&e.splice(n,1)}function a(e,t){return"[object "+t+"]"===Object.prototype.toString.call(e)}function s(e){return a(e,"RegExp")}function l(e){return a(e,"Array")}function c(e){return"function"===typeof e}function u(e){var t;t=null===e||"null"===e?null:"true"===e||"false"!==e&&(e===i||"undefined"===e?i:""===e||isNaN(e)?e:parseFloat(e));return t}function d(e){var t=e.length,n=[];while(t--)n[t]=u(e[t]);return n}function f(e,t){var n=(e||"").replace("?","").split("&"),i=/([^=]+)=(.+)/,r=-1,o={},a,s,c,d;while(s=n[++r]){a=s.indexOf("=");d=s.substring(0,a);c=decodeURIComponent(s.substring(a+1));false!==t&&(c=u(c));d in o?l(o[d])?o[d].push(c):o[d]=[o[d],c]:o[d]=c}return o}function p(){this.bypassed=new e.Signal;this.routed=new e.Signal;this._routes=[];this._prevRoutes=[];this._piped=[];this.resetState()}p.prototype={greedy:false,greedyEnabled:true,ignoreCase:true,ignoreState:false,shouldTypecast:false,normalizeFn:null,resetState:function(){this._prevRoutes.length=0;this._prevMatchedRequest=null;this._prevBypassedRequest=null},create:function(){return new p},addRoute:function(e,t,n){var i=new h(e,t,n,this);this._sortedInsert(i);return i},removeRoute:function(e){o(this._routes,e);e._destroy()},removeAllRoutes:function(){var e=this.getNumRoutes();while(e--)this._routes[e]._destroy();this._routes.length=0},parse:function(e,t){e=e||"";t=t||[];if(!this.ignoreState&&(e===this._prevMatchedRequest||e===this._prevBypassedRequest))return;var n=this._getMatchedRoutes(e),i=0,r=n.length,o;if(r){this._prevMatchedRequest=e;this._notifyPrevRoutes(n,e);this._prevRoutes=n;while(i<r){o=n[i];o.route.matched.dispatch.apply(o.route.matched,t.concat(o.params));o.isFirst=!i;this.routed.dispatch.apply(this.routed,t.concat([e,o]));i+=1}}else{this._prevBypassedRequest=e;this.bypassed.dispatch.apply(this.bypassed,t.concat([e]))}this._pipeParse(e,t)},_notifyPrevRoutes:function(e,t){var n=0,i;while(i=this._prevRoutes[n++])i.route.switched&&this._didSwitch(i.route,e)&&i.route.switched.dispatch(t)},_didSwitch:function(e,t){var n,i=0;while(n=t[i++])if(n.route===e)return false;return true},_pipeParse:function(e,t){var n=0,i;while(i=this._piped[n++])i.parse(e,t)},getNumRoutes:function(){return this._routes.length},_sortedInsert:function(e){var t=this._routes,n=t.length;do{--n}while(t[n]&&e._priority<=t[n]._priority);t.splice(n+1,0,e)},_getMatchedRoutes:function(e){var t=[],n=this._routes,i=n.length,r;while(r=n[--i]){(!t.length||this.greedy||r.greedy)&&r.match(e)&&t.push({route:r,params:r._getParamsArray(e)});if(!this.greedyEnabled&&t.length)break}return t},pipe:function(e){this._piped.push(e)},unpipe:function(e){o(this._piped,e)},toString:function(){return"[crossroads numRoutes:"+this.getNumRoutes()+"]"}};t=new p;t.VERSION="0.12.2";t.NORM_AS_ARRAY=function(e,t){return[t.vals_]};t.NORM_AS_OBJECT=function(e,t){return[t]};function h(t,n,i,r){var o=s(t),a=r.patternLexer;this._router=r;this._pattern=t;this._paramsIds=o?null:a.getParamIds(t);this._optionalParamsIds=o?null:a.getOptionalParamsIds(t);this._matchRegexp=o?t:a.compilePattern(t,r.ignoreCase);this.matched=new e.Signal;this.switched=new e.Signal;n&&this.matched.add(n);this._priority=i||0}h.prototype={greedy:false,rules:void 0,match:function(e){e=e||"";return this._matchRegexp.test(e)&&this._validateParams(e)},_validateParams:function(e){var t=this.rules,n=this._getParamsObject(e),i;for(i in t)if("normalize_"!==i&&t.hasOwnProperty(i)&&!this._isValidParam(e,i,n))return false;return true},_isValidParam:function(e,t,n){var i=this.rules[t],o=n[t],a=false,u=0===t.indexOf("?");if(null==o&&this._optionalParamsIds&&-1!==r(this._optionalParamsIds,t))a=true;else if(s(i)){u&&(o=n[t+"_"]);a=i.test(o)}else if(l(i)){u&&(o=n[t+"_"]);a=this._isValidArrayRule(i,o)}else c(i)&&(a=i(o,e,n));return a},_isValidArrayRule:function(e,t){if(!this._router.ignoreCase)return-1!==r(e,t);"string"===typeof t&&(t=t.toLowerCase());var n=e.length,i,o;while(n--){i=e[n];o="string"===typeof i?i.toLowerCase():i;if(o===t)return true}return false},_getParamsObject:function(e){var t=this._router.shouldTypecast,i=this._router.patternLexer.getParamValues(e,this._matchRegexp,t),o={},a=i.length,s,l;while(a--){l=i[a];if(this._paramsIds){s=this._paramsIds[a];if(0===s.indexOf("?")&&l){o[s+"_"]=l;l=f(l,t);i[a]=l}if(n&&""===l&&-1!==r(this._optionalParamsIds,s)){l=void 0;i[a]=l}o[s]=l}o[a]=l}o.request_=t?u(e):e;o.vals_=i;return o},_getParamsArray:function(e){var t=this.rules?this.rules.normalize_:null,n;t=t||this._router.normalizeFn;n=t&&c(t)?t(e,this._getParamsObject(e)):this._getParamsObject(e).vals_;return n},interpolate:function(e){var t=this._router.patternLexer.interpolate(this._pattern,e);if(!this._validateParams(t))throw new Error("Generated string doesn't validate against `Route.rules`.");return t},dispose:function(){this._router.removeRoute(this)},_destroy:function(){this.matched.dispose();this.switched.dispose();this.matched=this.switched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}};p.prototype.patternLexer=function(){var e=/[\\.+*?\^$\[\](){}\/'#]/g,t=/^\/|\/$/g,n=/\/$/g,i=/(?:\{|:)([^}:]+)(?:\}|:)/g,r={OS:{rgx:/([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,save:"$1{{id}}$2",res:"\\/?"},RS:{rgx:/([:}])\/?(\{)/g,save:"$1{{id}}$2",res:"\\/"},RQ:{rgx:/\{\?([^}]+)\}/g,res:"\\?([^#]+)"},OQ:{rgx:/:\?([^:]+):/g,res:"(?:\\?([^#]*))?"},OR:{rgx:/:([^:]+)\*:/g,res:"(.*)?"},RR:{rgx:/\{([^}]+)\*\}/g,res:"(.+)"},RP:{rgx:/\{([^}]+)\}/g,res:"([^\\/?]+)"},OP:{rgx:/:([^:]+):/g,res:"([^\\/?]+)?/?"}},o=1,a=2,s=3,c=o;function u(){var e,t;for(e in r)if(r.hasOwnProperty(e)){t=r[e];t.id="__CR_"+e+"__";t.save="save"in t?t.save.replace("{{id}}",t.id):t.id;t.rRestore=new RegExp(t.id,"g")}}u();function f(e,t){var n=[],i;e.lastIndex=0;while(i=e.exec(t))n.push(i[1]);return n}function p(e){return f(i,e)}function h(e){return f(r.OP.rgx,e)}function v(i,r){i=i||"";if(i){c===o?i=i.replace(t,""):c===s&&(i=i.replace(n,""));i=g(i,"rgx","save");i=i.replace(e,"\\$&");i=g(i,"rRestore","res");c===o&&(i="\\/?"+i)}c!==a&&(i+="\\/?");return new RegExp("^"+i+"$",r?"i":"")}function g(e,t,n){var i,o;for(o in r)if(r.hasOwnProperty(o)){i=r[o];e=e.replace(i[t],i[n])}return e}function m(e,t,n){var i=t.exec(e);if(i){i.shift();n&&(i=d(i))}return i}function b(e,t){t=t||{};if("string"!==typeof e)throw new Error("Route pattern should be a string.");var n=function(e,n){var i;n="?"===n.substr(0,1)?n.substr(1):n;if(null!=t[n]){if("object"===typeof t[n]){var r=[],o;for(var a in t[n]){o=t[n][a];if(l(o))for(var s in o)"[]"==a.slice(-2)?r.push(encodeURI(a.slice(0,-2))+"[]="+encodeURI(o[s])):r.push(encodeURI(a+"="+o[s]));else r.push(encodeURI(a+"="+o))}i="?"+r.join("&")}else i=String(t[n]);if(-1===e.indexOf("*")&&-1!==i.indexOf("/"))throw new Error('Invalid value "'+i+'" for segment "'+e+'".')}else{if(-1!==e.indexOf("{"))throw new Error("The segment "+e+" is required.");i=""}return i};r.OS.trail||(r.OS.trail=new RegExp("(?:"+r.OS.id+")+$"));return e.replace(r.OS.rgx,r.OS.save).replace(i,n).replace(r.OS.trail,"").replace(r.OS.rRestore,"/")}return{strict:function(){c=a},loose:function(){c=o},legacy:function(){c=s},getParamIds:p,getOptionalParamsIds:h,getParamValues:m,compilePattern:v,interpolate:b}}();return t};true;!(r=[n(1004)],i=a,o="function"===typeof i?i.apply(t,r):i,void 0!==o&&(e.exports=o))})()},,function(e){e.exports={structs:{Field:{GetCardinal:{In:[],Out:[]},GetAndMode:{In:[],Out:[]},SelectValues:{In:[{Name:"qFieldValues",DefaultValue:[{qText:"",qIsNumeric:false,qNumber:0}]},{Name:"qToggleMode",DefaultValue:false,Optional:true},{Name:"qSoftLock",DefaultValue:false,Optional:true}],Out:[]},Select:{In:[{Name:"qMatch",DefaultValue:""},{Name:"qSoftLock",DefaultValue:false,Optional:true},{Name:"qExcludedValuesMode",DefaultValue:0,Optional:true}],Out:[]},ToggleSelect:{In:[{Name:"qMatch",DefaultValue:""},{Name:"qSoftLock",DefaultValue:false,Optional:true},{Name:"qExcludedValuesMode",DefaultValue:0,Optional:true}],Out:[]},ClearAllButThis:{In:[{Name:"qSoftLock",DefaultValue:false,Optional:true}],Out:[]},SelectPossible:{In:[{Name:"qSoftLock",DefaultValue:false,Optional:true}],Out:[]},SelectExcluded:{In:[{Name:"qSoftLock",DefaultValue:false,Optional:true}],Out:[]},SelectAll:{In:[{Name:"qSoftLock",DefaultValue:false,Optional:true}],Out:[]},Lock:{In:[],Out:[]},Unlock:{In:[],Out:[]},GetNxProperties:{In:[],Out:[{Name:"qProperties"}]},SetNxProperties:{In:[{Name:"qProperties",DefaultValue:{qOneAndOnlyOne:false}}],Out:[]},SetAndMode:{In:[{Name:"qAndMode",DefaultValue:false}],Out:[]},SelectAlternative:{In:[{Name:"qSoftLock",DefaultValue:false,Optional:true}],Out:[]},LowLevelSelect:{In:[{Name:"qValues",DefaultValue:[0]},{Name:"qToggleMode",DefaultValue:false},{Name:"qSoftLock",DefaultValue:false,Optional:true}],Out:[]},Clear:{In:[],Out:[]}},Variable:{GetContent:{In:[],Out:[{Name:"qContent"}]},GetRawContent:{In:[],Out:[]},SetContent:{In:[{Name:"qContent",DefaultValue:""},{Name:"qUpdateMRU",DefaultValue:false}],Out:[]},ForceContent:{In:[{Name:"qs",DefaultValue:""},{Name:"qd",DefaultValue:0}],Out:[]},GetNxProperties:{In:[],Out:[{Name:"qProperties"}]},SetNxProperties:{In:[{Name:"qProperties",DefaultValue:{qName:"",qNumberPresentation:{qType:0,qnDec:0,qUseThou:0,qFmt:"",qDec:"",qThou:""},qIncludeInBookmark:false,qUsePredefListedValues:false,qPreDefinedList:[""]}}],Out:[]}},GenericObject:{GetLayout:{In:[],Out:[{Name:"qLayout"}]},GetListObjectData:{In:[{Name:"qPath",DefaultValue:""},{Name:"qPages",DefaultValue:[{qLeft:0,qTop:0,qWidth:0,qHeight:0}]}],Out:[{Name:"qDataPages"}]},GetHyperCubeData:{In:[{Name:"qPath",DefaultValue:""},{Name:"qPages",DefaultValue:[{qLeft:0,qTop:0,qWidth:0,qHeight:0}]}],Out:[{Name:"qDataPages"}]},GetHyperCubeReducedData:{In:[{Name:"qPath",DefaultValue:""},{Name:"qPages",DefaultValue:[{qLeft:0,qTop:0,qWidth:0,qHeight:0}]},{Name:"qZoomFactor",DefaultValue:0},{Name:"qReductionMode",DefaultValue:0}],Out:[{Name:"qDataPages"}]},GetHyperCubePivotData:{In:[{Name:"qPath",DefaultValue:""},{Name:"qPages",DefaultValue:[{qLeft:0,qTop:0,qWidth:0,qHeight:0}]}],Out:[{Name:"qDataPages"}]},GetHyperCubeStackData:{In:[{Name:"qPath",DefaultValue:""},{Name:"qPages",DefaultValue:[{qLeft:0,qTop:0,qWidth:0,qHeight:0}]},{Name:"qMaxNbrCells",DefaultValue:0,Optional:true}],Out:[{Name:"qDataPages"}]},GetHyperCubeContinuousData:{In:[{Name:"qPath",DefaultValue:""},{Name:"qOptions",DefaultValue:{qStart:0,qEnd:0,qNbrPoints:0,qMaxNbrTicks:0,qMaxNumberLines:0}},{Name:"qReverseSort",DefaultValue:false,Optional:true}],Out:[{Name:"qDataPages"},{Name:"qAxisData"}]},GetHyperCubeTreeData:{In:[{Name:"qPath",DefaultValue:""},{Name:"qNodeOptions",DefaultValue:{qMaxNbrOfNodes:0,qTreeNodes:[{qArea:{qLeft:0,qTop:0,qWidth:0,qHeight:0},qAllValues:false}],qTreeLevels:{qLeft:0,qDepth:0}},Optional:true}],Out:[{Name:"qNodes"}]},GetHyperCubeBinnedData:{In:[{Name:"qPath",DefaultValue:""},{Name:"qPages",DefaultValue:[{qLeft:0,qTop:0,qWidth:0,qHeight:0}]},{Name:"qViewport",DefaultValue:{qWidth:0,qHeight:0,qZoomLevel:0}},{Name:"qDataRanges",DefaultValue:[{qLeft:0,qTop:0,qWidth:0,qHeight:0}]},{Name:"qMaxNbrCells",DefaultValue:0},{Name:"qQueryLevel",DefaultValue:0},{Name:"qBinningMethod",DefaultValue:0}],Out:[{Name:"qDataPages"}]},ApplyPatches:{In:[{Name:"qPatches",DefaultValue:[{qOp:0,qPath:"",qValue:""}]},{Name:"qSoftPatch",DefaultValue:false,Optional:true}],Out:[]},ClearSoftPatches:{In:[],Out:[]},SetProperties:{In:[{Name:"qProp",DefaultValue:{qInfo:{qId:"",qType:""},qExtendsId:"",qMetaDef:{},qStateName:""}}],Out:[]},GetProperties:{In:[],Out:[{Name:"qProp"}]},GetEffectiveProperties:{In:[],Out:[{Name:"qProp"}]},SetFullPropertyTree:{In:[{Name:"qPropEntry",DefaultValue:{qProperty:{qInfo:{qId:"",qType:""},qExtendsId:"",qMetaDef:{},qStateName:""},qChildren:[],qEmbeddedSnapshotRef:null}}],Out:[]},GetFullPropertyTree:{In:[],Out:[{Name:"qPropEntry"}]},GetInfo:{In:[],Out:[{Name:"qInfo"}]},ClearSelections:{In:[{Name:"qPath",DefaultValue:""},{Name:"qColIndices",DefaultValue:[0],Optional:true}],Out:[]},ExportData:{In:[{Name:"qFileType",DefaultValue:0},{Name:"qPath",DefaultValue:"",Optional:true},{Name:"qFileName",DefaultValue:"",Optional:true},{Name:"qExportState",DefaultValue:0,Optional:true}],Out:[{Name:"qUrl"},{Name:"qWarnings"}]},SelectListObjectValues:{In:[{Name:"qPath",DefaultValue:""},{Name:"qValues",DefaultValue:[0]},{Name:"qToggleMode",DefaultValue:false},{Name:"qSoftLock",DefaultValue:false,Optional:true}],Out:[{Name:"qSuccess"}]},SelectListObjectPossible:{In:[{Name:"qPath",DefaultValue:""},{Name:"qSoftLock",DefaultValue:false,Optional:true}],Out:[{Name:"qSuccess"}]},SelectListObjectExcluded:{In:[{Name:"qPath",DefaultValue:""},{Name:"qSoftLock",DefaultValue:false,Optional:true}],Out:[{Name:"qSuccess"}]},SelectListObjectAlternative:{In:[{Name:"qPath",DefaultValue:""},{Name:"qSoftLock",DefaultValue:false,Optional:true}],Out:[{Name:"qSuccess"}]},SelectListObjectAll:{In:[{Name:"qPath",DefaultValue:""},{Name:"qSoftLock",DefaultValue:false,Optional:true}],Out:[{Name:"qSuccess"}]},SelectListObjectContinuousRange:{In:[{Name:"qPath",DefaultValue:""},{Name:"qRanges",DefaultValue:[{qMin:0,qMax:0,qMinInclEq:false,qMaxInclEq:false}]},{Name:"qSoftLock",DefaultValue:false,Optional:true}],Out:[{Name:"qSuccess"}]},SearchListObjectFor:{In:[{Name:"qPath",DefaultValue:""},{Name:"qMatch",DefaultValue:""}],Out:[{Name:"qSuccess"}]},AbortListObjectSearch:{In:[{Name:"qPath",DefaultValue:""}],Out:[]},AcceptListObjectSearch:{In:[{Name:"qPath",DefaultValue:""},{Name:"qToggleMode",DefaultValue:false},{Name:"qSoftLock",DefaultValue:false,Optional:true}],Out:[]},ExpandLeft:{In:[{Name:"qPath",DefaultValue:""},{Name:"qRow",DefaultValue:0},{Name:"qCol",DefaultValue:0},{Name:"qAll",DefaultValue:false}],Out:[]},ExpandTop:{In:[{Name:"qPath",DefaultValue:""},{Name:"qRow",DefaultValue:0},{Name:"qCol",DefaultValue:0},{Name:"qAll",DefaultValue:false}],Out:[]},CollapseLeft:{In:[{Name:"qPath",DefaultValue:""},{Name:"qRow",DefaultValue:0},{Name:"qCol",DefaultValue:0},{Name:"qAll",DefaultValue:false}],Out:[]},CollapseTop:{In:[{Name:"qPath",DefaultValue:""},{Name:"qRow",DefaultValue:0},{Name:"qCol",DefaultValue:0},{Name:"qAll",DefaultValue:false}],Out:[]},DrillUp:{In:[{Name:"qPath",DefaultValue:""},{Name:"qDimNo",DefaultValue:0},{Name:"qNbrSteps",DefaultValue:0}],Out:[]},Lock:{In:[{Name:"qPath",DefaultValue:""},{Name:"qColIndices",DefaultValue:[0],Optional:true}],Out:[]},Unlock:{In:[{Name:"qPath",DefaultValue:""},{Name:"qColIndices",DefaultValue:[0],Optional:true}],Out:[]},SelectHyperCubeValues:{In:[{Name:"qPath",DefaultValue:""},{Name:"qDimNo",DefaultValue:0},{Name:"qValues",DefaultValue:[0]},{Name:"qToggleMode",DefaultValue:false}],Out:[{Name:"qSuccess"}]},SelectHyperCubeCells:{In:[{Name:"qPath",DefaultValue:""},{Name:"qRowIndices",DefaultValue:[0]},{Name:"qColIndices",DefaultValue:[0]},{Name:"qSoftLock",DefaultValue:false,Optional:true},{Name:"qDeselectOnlyOneSelected",DefaultValue:false,Optional:true}],Out:[{Name:"qSuccess"}]},SelectPivotCells:{In:[{Name:"qPath",DefaultValue:""},{Name:"qSelections",DefaultValue:[{qType:0,qCol:0,qRow:0}]},{Name:"qSoftLock",DefaultValue:false,Optional:true},{Name:"qDeselectOnlyOneSelected",DefaultValue:false,Optional:true}],Out:[{Name:"qSuccess"}]},RangeSelectHyperCubeValues:{In:[{Name:"qPath",DefaultValue:""},{Name:"qRanges",DefaultValue:[{qRange:{qMin:0,qMax:0,qMinInclEq:false,qMaxInclEq:false},qMeasureIx:0}]},{Name:"qColumnsToSelect",DefaultValue:[0],Optional:true},{Name:"qOrMode",DefaultValue:false,Optional:true},{Name:"qDeselectOnlyOneSelected",DefaultValue:false,Optional:true}],Out:[{Name:"qSuccess"}]},MultiRangeSelectHyperCubeValues:{In:[{Name:"qPath",DefaultValue:""},{Name:"qRanges",DefaultValue:[{qRanges:[{qRange:{qMin:0,qMax:0,qMinInclEq:false,qMaxInclEq:false},qMeasureIx:0}],qColumnsToSelect:[0]}]},{Name:"qOrMode",DefaultValue:false,Optional:true},{Name:"qDeselectOnlyOneSelected",DefaultValue:false,Optional:true}],Out:[{Name:"qSuccess"}]},MultiRangeSelectTreeDataValues:{In:[{Name:"qPath",DefaultValue:""},{Name:"qRanges",DefaultValue:[{qRanges:[{qRange:{qMin:0,qMax:0,qMinInclEq:false,qMaxInclEq:false},qMeasureIx:0,qDimensionIx:0}]}]},{Name:"qOrMode",DefaultValue:false,Optional:true},{Name:"qDeselectOnlyOneSelected",DefaultValue:false,Optional:true}],Out:[{Name:"qSuccess"}]},SelectHyperCubeContinuousRange:{In:[{Name:"qPath",DefaultValue:""},{Name:"qRanges",DefaultValue:[{qRange:{qMin:0,qMax:0,qMinInclEq:false,qMaxInclEq:false},qDimIx:0}]},{Name:"qSoftLock",DefaultValue:false,Optional:true}],Out:[{Name:"qSuccess"}]},GetChild:{In:[{Name:"qId",DefaultValue:""}],Out:[]},GetParent:{In:[],Out:[]},GetChildInfos:{In:[],Out:[{Name:"qInfos"}]},CreateChild:{In:[{Name:"qProp",DefaultValue:{qInfo:{qId:"",qType:""},qExtendsId:"",qMetaDef:{},qStateName:""}},{Name:"qPropForThis",DefaultValue:null,Optional:true}],Out:[{Name:"qInfo"}]},DestroyChild:{In:[{Name:"qId",DefaultValue:""},{Name:"qPropForThis",DefaultValue:null,Optional:true}],Out:[{Name:"qSuccess"}]},DestroyAllChildren:{In:[{Name:"qPropForThis",DefaultValue:null,Optional:true}],Out:[]},SetChildArrayOrder:{In:[{Name:"qIds",DefaultValue:[""]}],Out:[]},GetLinkedObjects:{In:[],Out:[{Name:"qItems"}]},CopyFrom:{In:[{Name:"qFromId",DefaultValue:""}],Out:[]},BeginSelections:{In:[{Name:"qPaths",DefaultValue:[""]}],Out:[]},EndSelections:{In:[{Name:"qAccept",DefaultValue:false}],Out:[]},ResetMadeSelections:{In:[],Out:[]},EmbedSnapshotObject:{In:[{Name:"qId",DefaultValue:""}],Out:[]},GetSnapshotObject:{In:[],Out:[]},Publish:{In:[],Out:[]},UnPublish:{In:[],Out:[]},Approve:{In:[],Out:[]},UnApprove:{In:[],Out:[]}},GenericDimension:{GetLayout:{In:[],Out:[{Name:"qLayout"}]},ApplyPatches:{In:[{Name:"qPatches",DefaultValue:[{qOp:0,qPath:"",qValue:""}]}],Out:[]},SetProperties:{In:[{Name:"qProp",DefaultValue:{qInfo:{qId:"",qType:""},qDim:{qGrouping:0,qFieldDefs:[""],qFieldLabels:[""],qLabelExpression:""},qMetaDef:{}}}],Out:[]},GetProperties:{In:[],Out:[{Name:"qProp"}]},GetInfo:{In:[],Out:[{Name:"qInfo"}]},GetDimension:{In:[],Out:[{Name:"qDim"}]},GetLinkedObjects:{In:[],Out:[{Name:"qItems"}]},Publish:{In:[],Out:[]},UnPublish:{In:[],Out:[]},Approve:{In:[],Out:[]},UnApprove:{In:[],Out:[]}},GenericBookmark:{GetFieldValues:{In:[{Name:"qField",DefaultValue:""},{Name:"qGetExcludedValues",DefaultValue:false},{Name:"qDataPage",DefaultValue:{qStartIndex:0,qEndIndex:0}}],Out:[{Name:"qFieldValues"}]},GetLayout:{In:[],Out:[{Name:"qLayout"}]},ApplyPatches:{In:[{Name:"qPatches",DefaultValue:[{qOp:0,qPath:"",qValue:""}]}],Out:[]},SetProperties:{In:[{Name:"qProp",DefaultValue:{qInfo:{qId:"",qType:""},qMetaDef:{}}}],Out:[]},GetProperties:{In:[],Out:[{Name:"qProp"}]},GetInfo:{In:[],Out:[{Name:"qInfo"}]},Apply:{In:[],Out:[{Name:"qSuccess"}]},Publish:{In:[],Out:[]},UnPublish:{In:[],Out:[]},Approve:{In:[],Out:[]},UnApprove:{In:[],Out:[]}},GenericVariable:{GetLayout:{In:[],Out:[{Name:"qLayout"}]},ApplyPatches:{In:[{Name:"qPatches",DefaultValue:[{qOp:0,qPath:"",qValue:""}]}],Out:[]},SetProperties:{In:[{Name:"qProp",DefaultValue:{qInfo:{qId:"",qType:""},qMetaDef:{},qName:"",qComment:"",qNumberPresentation:{qType:0,qnDec:0,qUseThou:0,qFmt:"",qDec:"",qThou:""},qIncludeInBookmark:false,qDefinition:""}}],Out:[]},GetProperties:{In:[],Out:[{Name:"qProp"}]},GetInfo:{In:[],Out:[{Name:"qInfo"}]},SetStringValue:{In:[{Name:"qVal",DefaultValue:""}],Out:[]},SetNumValue:{In:[{Name:"qVal",DefaultValue:0}],Out:[]},SetDualValue:{In:[{Name:"qText",DefaultValue:""},{Name:"qNum",DefaultValue:0}],Out:[]}},GenericMeasure:{GetLayout:{In:[],Out:[{Name:"qLayout"}]},ApplyPatches:{In:[{Name:"qPatches",DefaultValue:[{qOp:0,qPath:"",qValue:""}]}],Out:[]},SetProperties:{In:[{Name:"qProp",DefaultValue:{qInfo:{qId:"",qType:""},qMeasure:{qLabel:"",qDef:"",qGrouping:0,qExpressions:[""],qActiveExpression:0,qLabelExpression:""},qMetaDef:{}}}],Out:[]},GetProperties:{In:[],Out:[{Name:"qProp"}]},GetInfo:{In:[],Out:[{Name:"qInfo"}]},GetMeasure:{In:[],Out:[{Name:"qMeasure"}]},GetLinkedObjects:{In:[],Out:[{Name:"qItems"}]},Publish:{In:[],Out:[]},UnPublish:{In:[],Out:[]},Approve:{In:[],Out:[]},UnApprove:{In:[],Out:[]}},Doc:{GetField:{In:[{Name:"qFieldName",DefaultValue:""},{Name:"qStateName",DefaultValue:"",Optional:true}],Out:[]},GetFieldDescription:{In:[{Name:"qFieldName",DefaultValue:""}],Out:[]},GetVariable:{In:[{Name:"qName",DefaultValue:""}],Out:[]},GetLooselyCoupledVector:{In:[],Out:[{Name:"qv"}]},SetLooselyCoupledVector:{In:[{Name:"qv",DefaultValue:[0]}],Out:[]},Evaluate:{In:[{Name:"qExpression",DefaultValue:""}],Out:[]},EvaluateEx:{In:[{Name:"qExpression",DefaultValue:""}],Out:[{Name:"qValue"}]},ClearAll:{In:[{Name:"qLockedAlso",DefaultValue:false,Optional:true},{Name:"qStateName",DefaultValue:"",Optional:true}],Out:[]},LockAll:{In:[{Name:"qStateName",DefaultValue:"",Optional:true}],Out:[]},UnlockAll:{In:[{Name:"qStateName",DefaultValue:"",Optional:true}],Out:[]},Back:{In:[],Out:[]},Forward:{In:[],Out:[]},CreateVariable:{In:[{Name:"qName",DefaultValue:""}],Out:[]},RemoveVariable:{In:[{Name:"qName",DefaultValue:""}],Out:[]},GetLocaleInfo:{In:[],Out:[]},GetTablesAndKeys:{In:[{Name:"qWindowSize",DefaultValue:{qcx:0,qcy:0}},{Name:"qNullSize",DefaultValue:{qcx:0,qcy:0}},{Name:"qCellHeight",DefaultValue:0},{Name:"qSyntheticMode",DefaultValue:false},{Name:"qIncludeSysVars",DefaultValue:false}],Out:[{Name:"qtr"},{Name:"qk"}]},GetViewDlgSaveInfo:{In:[],Out:[]},SetViewDlgSaveInfo:{In:[{Name:"qInfo",DefaultValue:{qPos:{qLeft:0,qTop:0,qWidth:0,qHeight:0},qCtlInfo:{qInternalView:{qTables:[{qPos:{qLeft:0,qTop:0,qWidth:0,qHeight:0},qCaption:""}],qBroomPoints:[{qPos:{qx:0,qy:0},qTable:"",qFields:[""]}],qConnectionPoints:[{qPos:{qx:0,qy:0},qFields:[""]}],qZoomFactor:0},qSourceView:{qTables:[{qPos:{qLeft:0,qTop:0,qWidth:0,qHeight:0},qCaption:""}],qBroomPoints:[{qPos:{qx:0,qy:0},qTable:"",qFields:[""]}],qConnectionPoints:[{qPos:{qx:0,qy:0},qFields:[""]}],qZoomFactor:0}},qMode:0}}],Out:[]},GetEmptyScript:{In:[{Name:"qLocalizedMainSection",DefaultValue:"",Optional:true}],Out:[]},DoReload:{In:[{Name:"qMode",DefaultValue:0,Optional:true},{Name:"qPartial",DefaultValue:false,Optional:true},{Name:"qDebug",DefaultValue:false,Optional:true}],Out:[]},GetScriptBreakpoints:{In:[],Out:[{Name:"qBreakpoints"}]},SetScriptBreakpoints:{In:[{Name:"qBreakpoints",DefaultValue:[{qbufferName:"",qlineIx:0,qEnabled:false}]}],Out:[]},GetScript:{In:[],Out:[{Name:"qScript"}]},GetTextMacros:{In:[],Out:[{Name:"qMacros"}]},SetFetchLimit:{In:[{Name:"qLimit",DefaultValue:0}],Out:[]},DoSave:{In:[{Name:"qFileName",DefaultValue:"",Optional:true}],Out:[]},GetTableData:{In:[{Name:"qOffset",DefaultValue:0},{Name:"qRows",DefaultValue:0},{Name:"qSyntheticMode",DefaultValue:false},{Name:"qTableName",DefaultValue:""}],Out:[{Name:"qData"}]},GetAppLayout:{In:[],Out:[{Name:"qLayout"}]},SetAppProperties:{In:[{Name:"qProp",DefaultValue:{qTitle:"",qLastReloadTime:"",qMigrationHash:"",qSavedInProductVersion:"",qThumbnail:{qUrl:""},qHasSectionAccess:false}}],Out:[]},GetAppProperties:{In:[],Out:[{Name:"qProp"}]},GetLineage:{In:[],Out:[{Name:"qLineage"}]},CreateSessionObject:{In:[{Name:"qProp",DefaultValue:{qInfo:{qId:"",qType:""},qExtendsId:"",qMetaDef:{},qStateName:""}}],Out:[]},DestroySessionObject:{In:[{Name:"qId",DefaultValue:""}],Out:[{Name:"qSuccess"}]},CreateObject:{In:[{Name:"qProp",DefaultValue:{qInfo:{qId:"",qType:""},qExtendsId:"",qMetaDef:{},qStateName:""}}],Out:[{Name:"qInfo"}]},DestroyObject:{In:[{Name:"qId",DefaultValue:""}],Out:[{Name:"qSuccess"}]},GetObject:{In:[{Name:"qId",DefaultValue:""}],Out:[]},GetObjects:{In:[{Name:"qOptions",DefaultValue:{qTypes:[""],qIncludeSessionObjects:false,qData:{}}}],Out:[{Name:"qList"}]},GetBookmarks:{In:[{Name:"qOptions",DefaultValue:{qTypes:[""],qData:{}}}],Out:[{Name:"qList"}]},CloneObject:{In:[{Name:"qId",DefaultValue:""}],Out:[{Name:"qCloneId"}]},CreateDraft:{In:[{Name:"qId",DefaultValue:""}],Out:[{Name:"qDraftId"}]},CommitDraft:{In:[{Name:"qId",DefaultValue:""}],Out:[]},DestroyDraft:{In:[{Name:"qId",DefaultValue:""},{Name:"qSourceId",DefaultValue:""}],Out:[{Name:"qSuccess"}]},Undo:{In:[],Out:[{Name:"qSuccess"}]},Redo:{In:[],Out:[{Name:"qSuccess"}]},ClearUndoBuffer:{In:[],Out:[]},CreateDimension:{In:[{Name:"qProp",DefaultValue:{qInfo:{qId:"",qType:""},qDim:{qGrouping:0,qFieldDefs:[""],qFieldLabels:[""],qLabelExpression:""},qMetaDef:{}}}],Out:[{Name:"qInfo"}]},DestroyDimension:{In:[{Name:"qId",DefaultValue:""}],Out:[{Name:"qSuccess"}]},GetDimension:{In:[{Name:"qId",DefaultValue:""}],Out:[]},CloneDimension:{In:[{Name:"qId",DefaultValue:""}],Out:[{Name:"qCloneId"}]},CreateMeasure:{In:[{Name:"qProp",DefaultValue:{qInfo:{qId:"",qType:""},qMeasure:{qLabel:"",qDef:"",qGrouping:0,qExpressions:[""],qActiveExpression:0,qLabelExpression:""},qMetaDef:{}}}],Out:[{Name:"qInfo"}]},DestroyMeasure:{In:[{Name:"qId",DefaultValue:""}],Out:[{Name:"qSuccess"}]},GetMeasure:{In:[{Name:"qId",DefaultValue:""}],Out:[]},CloneMeasure:{In:[{Name:"qId",DefaultValue:""}],Out:[{Name:"qCloneId"}]},CreateSessionVariable:{In:[{Name:"qProp",DefaultValue:{qInfo:{qId:"",qType:""},qMetaDef:{},qName:"",qComment:"",qNumberPresentation:{qType:0,qnDec:0,qUseThou:0,qFmt:"",qDec:"",qThou:""},qIncludeInBookmark:false,qDefinition:""}}],Out:[]},DestroySessionVariable:{In:[{Name:"qId",DefaultValue:""}],Out:[{Name:"qSuccess"}]},CreateVariableEx:{In:[{Name:"qProp",DefaultValue:{qInfo:{qId:"",qType:""},qMetaDef:{},qName:"",qComment:"",qNumberPresentation:{qType:0,qnDec:0,qUseThou:0,qFmt:"",qDec:"",qThou:""},qIncludeInBookmark:false,qDefinition:""}}],Out:[{Name:"qInfo"}]},DestroyVariableById:{In:[{Name:"qId",DefaultValue:""}],Out:[{Name:"qSuccess"}]},DestroyVariableByName:{In:[{Name:"qName",DefaultValue:""}],Out:[{Name:"qSuccess"}]},GetVariableById:{In:[{Name:"qId",DefaultValue:""}],Out:[]},GetVariableByName:{In:[{Name:"qName",DefaultValue:""}],Out:[]},MigrateVariables:{In:[],Out:[]},MigrateDerivedFields:{In:[],Out:[]},CheckExpression:{In:[{Name:"qExpr",DefaultValue:""},{Name:"qLabels",DefaultValue:[""],Optional:true}],Out:[{Name:"qErrorMsg"},{Name:"qBadFieldNames"},{Name:"qDangerousFieldNames"}]},CheckNumberOrExpression:{In:[{Name:"qExpr",DefaultValue:""}],Out:[{Name:"qErrorMsg"},{Name:"qBadFieldNames"}]},AddAlternateState:{In:[{Name:"qStateName",DefaultValue:""}],Out:[]},RemoveAlternateState:{In:[{Name:"qStateName",DefaultValue:""}],Out:[]},CreateBookmark:{In:[{Name:"qProp",DefaultValue:{qInfo:{qId:"",qType:""},qMetaDef:{}}}],Out:[{Name:"qInfo"}]},DestroyBookmark:{In:[{Name:"qId",DefaultValue:""}],Out:[{Name:"qSuccess"}]},GetBookmark:{In:[{Name:"qId",DefaultValue:""}],Out:[]},ApplyBookmark:{In:[{Name:"qId",DefaultValue:""}],Out:[{Name:"qSuccess"}]},CloneBookmark:{In:[{Name:"qId",DefaultValue:""}],Out:[{Name:"qCloneId"}]},AddFieldFromExpression:{In:[{Name:"qName",DefaultValue:""},{Name:"qExpr",DefaultValue:""}],Out:[{Name:"qSuccess"}]},GetFieldOnTheFlyByName:{In:[{Name:"qReadableName",DefaultValue:""}],Out:[{Name:"qName"}]},GetAllInfos:{In:[],Out:[{Name:"qInfos"}]},Resume:{In:[],Out:[]},AbortModal:{In:[{Name:"qAccept",DefaultValue:false}],Out:[]},Publish:{In:[{Name:"qStreamId",DefaultValue:""},{Name:"qName",DefaultValue:"",Optional:true}],Out:[]},UnPublish:{In:[],Out:[]},GetMatchingFields:{In:[{Name:"qTags",DefaultValue:[""]},{Name:"qMatchingFieldMode",DefaultValue:0,Optional:true}],Out:[{Name:"qFieldNames"}]},FindMatchingFields:{In:[{Name:"qFieldName",DefaultValue:""},{Name:"qTags",DefaultValue:[""]}],Out:[{Name:"qFieldNames"}]},Scramble:{In:[{Name:"qFieldName",DefaultValue:""}],Out:[]},SaveObjects:{In:[],Out:[]},GetAssociationScores:{In:[{Name:"qTable1",DefaultValue:""},{Name:"qTable2",DefaultValue:""}],Out:[{Name:"qScore"}]},GetMediaList:{In:[],Out:[{Name:"qList"}]},GetContentLibraries:{In:[],Out:[{Name:"qList"}]},GetLibraryContent:{In:[{Name:"qName",DefaultValue:""}],Out:[{Name:"qList"}]},DoReloadEx:{In:[{Name:"qParams",DefaultValue:{qMode:0,qPartial:false,qDebug:false,qReloadId:""},Optional:true}],Out:[{Name:"qResult"}]},BackCount:{In:[],Out:[]},ForwardCount:{In:[],Out:[]},ExportReducedData:{In:[{Name:"qOptions",DefaultValue:{qBookmarkId:"",qExpires:0},Optional:true}],Out:[{Name:"qDownloadInfo"}]},GetSetAnalysis:{In:[{Name:"qStateName",DefaultValue:"",Optional:true},{Name:"qBookmarkId",DefaultValue:"",Optional:true}],Out:[{Name:"qSetExpression"}]},SetScript:{In:[{Name:"qScript",DefaultValue:""}],Out:[]},CheckScriptSyntax:{In:[],Out:[{Name:"qErrors"}]},GetFavoriteVariables:{In:[],Out:[{Name:"qNames"}]},SetFavoriteVariables:{In:[{Name:"qNames",DefaultValue:[""]}],Out:[]},GetIncludeFileContent:{In:[{Name:"qPath",DefaultValue:""}],Out:[{Name:"qContent"}]},CreateConnection:{In:[{Name:"qConnection",DefaultValue:{qId:"",qName:"",qConnectionString:"",qType:"",qUserName:"",qPassword:"",qModifiedDate:"",qMeta:{qName:""},qLogOn:0}}],Out:[{Name:"qConnectionId"}]},ModifyConnection:{In:[{Name:"qConnectionId",DefaultValue:""},{Name:"qConnection",DefaultValue:{qId:"",qName:"",qConnectionString:"",qType:"",qUserName:"",qPassword:"",qModifiedDate:"",qMeta:{qName:""},qLogOn:0}},{Name:"qOverrideCredentials",DefaultValue:false,Optional:true}],Out:[]},DeleteConnection:{In:[{Name:"qConnectionId",DefaultValue:""}],Out:[]},GetConnection:{In:[{Name:"qConnectionId",DefaultValue:""}],Out:[{Name:"qConnection"}]},GetConnections:{In:[],Out:[{Name:"qConnections"}]},GetDatabaseInfo:{In:[{Name:"qConnectionId",DefaultValue:""}],Out:[{Name:"qInfo"}]},GetDatabases:{In:[{Name:"qConnectionId",DefaultValue:""}],Out:[{Name:"qDatabases"}]},GetDatabaseOwners:{In:[{Name:"qConnectionId",DefaultValue:""},{Name:"qDatabase",DefaultValue:"",Optional:true}],Out:[{Name:"qOwners"}]},GetDatabaseTables:{In:[{Name:"qConnectionId",DefaultValue:""},{Name:"qDatabase",DefaultValue:"",Optional:true},{Name:"qOwner",DefaultValue:"",Optional:true}],Out:[{Name:"qTables"}]},GetDatabaseTableFields:{In:[{Name:"qConnectionId",DefaultValue:""},{Name:"qDatabase",DefaultValue:"",Optional:true},{Name:"qOwner",DefaultValue:"",Optional:true},{Name:"qTable",DefaultValue:""}],Out:[{Name:"qFields"}]},GetDatabaseTablePreview:{In:[{Name:"qConnectionId",DefaultValue:""},{Name:"qDatabase",DefaultValue:"",Optional:true},{Name:"qOwner",DefaultValue:"",Optional:true},{Name:"qTable",DefaultValue:""},{Name:"qConditions",DefaultValue:{qType:0,qWherePredicate:""},Optional:true}],Out:[{Name:"qPreview"},{Name:"qRowCount"}]},GetFolderItemsForConnection:{In:[{Name:"qConnectionId",DefaultValue:""},{Name:"qRelativePath",DefaultValue:"",Optional:true}],Out:[{Name:"qFolderItems"}]},GuessFileType:{In:[{Name:"qConnectionId",DefaultValue:""},{Name:"qRelativePath",DefaultValue:"",Optional:true}],Out:[{Name:"qDataFormat"}]},GetFileTables:{In:[{Name:"qConnectionId",DefaultValue:""},{Name:"qRelativePath",DefaultValue:"",Optional:true},{Name:"qDataFormat",DefaultValue:{qType:0,qLabel:"",qQuote:"",qComment:"",qDelimiter:{qName:"",qScriptCode:"",qNumber:0,qIsMultiple:false},qCodePage:0,qHeaderSize:0,qRecordSize:0,qTabSize:0,qIgnoreEOF:false,qFixedWidthDelimiters:""}}],Out:[{Name:"qTables"}]},GetFileTableFields:{In:[{Name:"qConnectionId",DefaultValue:""},{Name:"qRelativePath",DefaultValue:"",Optional:true},{Name:"qDataFormat",DefaultValue:{qType:0,qLabel:"",qQuote:"",qComment:"",qDelimiter:{qName:"",qScriptCode:"",qNumber:0,qIsMultiple:false},qCodePage:0,qHeaderSize:0,qRecordSize:0,qTabSize:0,qIgnoreEOF:false,qFixedWidthDelimiters:""}},{Name:"qTable",DefaultValue:""}],Out:[{Name:"qFields"},{Name:"qFormatSpec"}]},GetFileTablePreview:{In:[{Name:"qConnectionId",DefaultValue:""},{Name:"qRelativePath",DefaultValue:"",Optional:true},{Name:"qDataFormat",DefaultValue:{qType:0,qLabel:"",qQuote:"",qComment:"",qDelimiter:{qName:"",qScriptCode:"",qNumber:0,qIsMultiple:false},qCodePage:0,qHeaderSize:0,qRecordSize:0,qTabSize:0,qIgnoreEOF:false,qFixedWidthDelimiters:""}},{Name:"qTable",DefaultValue:""}],Out:[{Name:"qPreview"},{Name:"qFormatSpec"}]},GetFileTablesEx:{In:[{Name:"qConnectionId",DefaultValue:""},{Name:"qRelativePath",DefaultValue:"",Optional:true},{Name:"qDataFormat",DefaultValue:{qType:0,qLabel:"",qQuote:"",qComment:"",qDelimiter:{qName:"",qScriptCode:"",qNumber:0,qIsMultiple:false},qCodePage:0,qHeaderSize:0,qRecordSize:0,qTabSize:0,qIgnoreEOF:false,qFixedWidthDelimiters:""}}],Out:[{Name:"qTables"}]},SendGenericCommandToCustomConnector:{In:[{Name:"qProvider",DefaultValue:""},{Name:"qCommand",DefaultValue:""},{Name:"qMethod",DefaultValue:""},{Name:"qParameters",DefaultValue:[""]},{Name:"qAppendConnection",DefaultValue:""}],Out:[{Name:"qResult"}]},SearchSuggest:{In:[{Name:"qOptions",DefaultValue:{qSearchFields:[""],qContext:0,qCharEncoding:0,qAttributes:[""]}},{Name:"qTerms",DefaultValue:[""]}],Out:[{Name:"qResult"}]},SearchAssociations:{In:[{Name:"qOptions",DefaultValue:{qSearchFields:[""],qContext:0,qCharEncoding:0,qAttributes:[""]}},{Name:"qTerms",DefaultValue:[""]},{Name:"qPage",DefaultValue:{qOffset:0,qCount:0,qMaxNbrFieldMatches:0,qGroupOptions:[{qGroupType:0,qOffset:0,qCount:0}],qGroupItemOptions:[{qGroupItemType:0,qOffset:0,qCount:0}]}}],Out:[{Name:"qResults"}]},SelectAssociations:{In:[{Name:"qOptions",DefaultValue:{qSearchFields:[""],qContext:0,qCharEncoding:0,qAttributes:[""]}},{Name:"qTerms",DefaultValue:[""]},{Name:"qMatchIx",DefaultValue:0},{Name:"qSoftLock",DefaultValue:null,Optional:true}],Out:[]},SearchResults:{In:[{Name:"qOptions",DefaultValue:{qSearchFields:[""],qContext:0,qCharEncoding:0,qAttributes:[""]}},{Name:"qTerms",DefaultValue:[""]},{Name:"qPage",DefaultValue:{qOffset:0,qCount:0,qMaxNbrFieldMatches:0,qGroupOptions:[{qGroupType:0,qOffset:0,qCount:0}],qGroupItemOptions:[{qGroupItemType:0,qOffset:0,qCount:0}]}}],Out:[{Name:"qResult"}]},SearchObjects:{In:[{Name:"qOptions",DefaultValue:{qAttributes:[""],qCharEncoding:0}},{Name:"qTerms",DefaultValue:[""]},{Name:"qPage",DefaultValue:{qOffset:0,qCount:0,qMaxNbrFieldMatches:0,qGroupOptions:[{qGroupType:0,qOffset:0,qCount:0}],qGroupItemOptions:[{qGroupItemType:0,qOffset:0,qCount:0}]}}],Out:[{Name:"qResult"}]},GetFieldAndColumnSamples:{In:[{Name:"qFieldsOrColumnsWithWildcards",DefaultValue:[{qFieldName:"",qTableName:""}]},{Name:"qMaxNumberOfValues",DefaultValue:0},{Name:"qRandSeed",DefaultValue:0,Optional:true}],Out:[{Name:"qResult"}]},GetScriptEx:{In:[],Out:[{Name:"qScript"}]},GetVariables:{In:[{Name:"qListDef",DefaultValue:{qType:"",qShowReserved:false,qShowConfig:false,qData:{},qShowSession:false}}],Out:[{Name:"qList"}]},ExpandExpression:{In:[{Name:"qExpression",DefaultValue:""}],Out:[{Name:"qExpandedExpression"}]},DestroySessionVariableById:{In:[{Name:"qId",DefaultValue:""}],Out:[{Name:"qSuccess"}]},DestroySessionVariableByName:{In:[{Name:"qName",DefaultValue:""}],Out:[{Name:"qSuccess"}]},SetAppObjectSortingRank:{In:[{Name:"qId",DefaultValue:""},{Name:"qRank",DefaultValue:0}],Out:[]},GetActiveSheetId:{In:[],Out:[{Name:"qId"}]},GetLayoutProperties:{In:[],Out:[{Name:"qLayoutProp"}]}},Global:{AbortRequest:{In:[{Name:"qRequestId",DefaultValue:0}],Out:[]},AbortAll:{In:[],Out:[]},GetProgress:{In:[{Name:"qRequestId",DefaultValue:0}],Out:[{Name:"qProgressData"}]},QvVersion:{In:[],Out:[]},OSVersion:{In:[],Out:[]},OSName:{In:[],Out:[]},QTProduct:{In:[],Out:[]},GetDocList:{In:[],Out:[{Name:"qDocList"}]},GetInteract:{In:[{Name:"qRequestId",DefaultValue:0}],Out:[{Name:"qDef"}]},InteractDone:{In:[{Name:"qRequestId",DefaultValue:0},{Name:"qDef",DefaultValue:{qType:0,qTitle:"",qMsg:"",qButtons:0,qLine:"",qOldLineNr:0,qNewLineNr:0,qPath:"",qHidden:false,qResult:0,qInput:""}}],Out:[]},GetAuthenticatedUser:{In:[],Out:[]},CreateDocEx:{In:[{Name:"qDocName",DefaultValue:""},{Name:"qUserName",DefaultValue:"",Optional:true},{Name:"qPassword",DefaultValue:"",Optional:true},{Name:"qSerial",DefaultValue:"",Optional:true},{Name:"qLocalizedScriptMainSection",DefaultValue:"",Optional:true}],Out:[{Name:"qDocId"}]},GetActiveDoc:{In:[],Out:[]},AllowCreateApp:{In:[],Out:[]},CreateApp:{In:[{Name:"qAppName",DefaultValue:""},{Name:"qLocalizedScriptMainSection",DefaultValue:"",Optional:true}],Out:[{Name:"qSuccess"},{Name:"qAppId"}]},DeleteApp:{In:[{Name:"qAppId",DefaultValue:""}],Out:[{Name:"qSuccess"}]},IsDesktopMode:{In:[],Out:[]},GetConfiguration:{In:[],Out:[{Name:"qConfig"}]},CancelRequest:{In:[{Name:"qRequestId",DefaultValue:0}],Out:[]},ShutdownProcess:{In:[],Out:[]},ReloadExtensionList:{In:[],Out:[]},ReplaceAppFromID:{In:[{Name:"qTargetAppId",DefaultValue:""},{Name:"qSrcAppID",DefaultValue:""},{Name:"qIds",DefaultValue:[""]}],Out:[{Name:"qSuccess"}]},ReplaceAppFromPath:{In:[{Name:"qTargetAppId",DefaultValue:""},{Name:"qSrcPath",DefaultValue:""},{Name:"qIds",DefaultValue:[""]},{Name:"qNoData",DefaultValue:false}],Out:[]},CopyApp:{In:[{Name:"qTargetAppId",DefaultValue:""},{Name:"qSrcAppId",DefaultValue:""},{Name:"qIds",DefaultValue:[""]}],Out:[{Name:"qSuccess"}]},ImportApp:{In:[{Name:"qAppId",DefaultValue:""},{Name:"qSrcPath",DefaultValue:""},{Name:"qIds",DefaultValue:[""]}],Out:[{Name:"qSuccess"}]},ImportAppEx:{In:[{Name:"qAppId",DefaultValue:""},{Name:"qSrcPath",DefaultValue:""},{Name:"qIds",DefaultValue:[""]},{Name:"qExcludeConnections",DefaultValue:false}],Out:[]},ExportApp:{In:[{Name:"qTargetPath",DefaultValue:""},{Name:"qSrcAppId",DefaultValue:""},{Name:"qIds",DefaultValue:[""]},{Name:"qNoData",DefaultValue:false,Optional:true}],Out:[{Name:"qSuccess"}]},PublishApp:{In:[{Name:"qAppId",DefaultValue:""},{Name:"qName",DefaultValue:""},{Name:"qStreamId",DefaultValue:""}],Out:[]},IsPersonalMode:{In:[],Out:[]},GetUniqueID:{In:[],Out:[{Name:"qUniqueID"}]},OpenDoc:{In:[{Name:"qDocName",DefaultValue:""},{Name:"qUserName",DefaultValue:"",Optional:true},{Name:"qPassword",DefaultValue:"",Optional:true},{Name:"qSerial",DefaultValue:"",Optional:true},{Name:"qNoData",DefaultValue:false,Optional:true}],Out:[]},CreateSessionApp:{In:[],Out:[{Name:"qSessionAppId"}]},CreateSessionAppFromApp:{In:[{Name:"qSrcAppId",DefaultValue:""}],Out:[{Name:"qSessionAppId"}]},ProductVersion:{In:[],Out:[]},GetAppEntry:{In:[{Name:"qAppID",DefaultValue:""}],Out:[{Name:"qEntry"}]},ConfigureReload:{In:[{Name:"qCancelOnScriptError",DefaultValue:false},{Name:"qUseErrorData",DefaultValue:false},{Name:"qInteractOnError",DefaultValue:false}],Out:[]},CancelReload:{In:[],Out:[]},GetBNF:{In:[{Name:"qBnfType",DefaultValue:0}],Out:[{Name:"qBnfDefs"}]},GetFunctions:{In:[{Name:"qGroup",DefaultValue:0,Optional:true}],Out:[{Name:"qFunctions"}]},GetOdbcDsns:{In:[],Out:[{Name:"qOdbcDsns"}]},GetOleDbProviders:{In:[],Out:[{Name:"qOleDbProviders"}]},GetDatabasesFromConnectionString:{In:[{Name:"qConnection",DefaultValue:{qId:"",qName:"",qConnectionString:"",qType:"",qUserName:"",qPassword:"",qModifiedDate:"",qMeta:{qName:""},qLogOn:0}}],Out:[{Name:"qDatabases"}]},IsValidConnectionString:{In:[{Name:"qConnection",DefaultValue:{qId:"",qName:"",qConnectionString:"",qType:"",qUserName:"",qPassword:"",qModifiedDate:"",qMeta:{qName:""},qLogOn:0}}],Out:[]},GetDefaultAppFolder:{In:[],Out:[{Name:"qPath"}]},GetMyDocumentsFolder:{In:[],Out:[{Name:"qFolder"}]},GetLogicalDriveStrings:{In:[],Out:[{Name:"qDrives"}]},GetFolderItemsForPath:{In:[{Name:"qPath",DefaultValue:""}],Out:[{Name:"qFolderItems"}]},GetSupportedCodePages:{In:[],Out:[{Name:"qCodePages"}]},GetCustomConnectors:{In:[{Name:"qReloadList",DefaultValue:false,Optional:true}],Out:[{Name:"qConnectors"}]},GetStreamList:{In:[],Out:[{Name:"qStreamList"}]},EngineVersion:{In:[],Out:[{Name:"qVersion"}]},GetBaseBNF:{In:[{Name:"qBnfType",DefaultValue:0}],Out:[{Name:"qBnfDefs"},{Name:"qBnfHash"}]},GetBaseBNFHash:{In:[{Name:"qBnfType",DefaultValue:0}],Out:[{Name:"qBnfHash"}]},GetBaseBNFString:{In:[{Name:"qBnfType",DefaultValue:0}],Out:[{Name:"qBnfStr"},{Name:"qBnfHash"}]}}},enums:{LocalizedMessageCode:{LOCMSG_SCRIPTEDITOR_EMPTY_MESSAGE:0,LOCMSG_SCRIPTEDITOR_PROGRESS_SAVING_STARTED:1,LOCMSG_SCRIPTEDITOR_PROGRESS_BYTES_LEFT:2,LOCMSG_SCRIPTEDITOR_PROGRESS_STORING_TABLES:3,LOCMSG_SCRIPTEDITOR_PROGRESS_QVD_ROWS_SO_FAR:4,LOCMSG_SCRIPTEDITOR_PROGRESS_CONNECTED:5,LOCMSG_SCRIPTEDITOR_PROGRESS_CONNECTING_TO:6,LOCMSG_SCRIPTEDITOR_PROGRESS_CONNECT_FAILED:7,LOCMSG_SCRIPTEDITOR_PROGRESS_QVD_ROWISH:8,LOCMSG_SCRIPTEDITOR_PROGRESS_QVD_COLUMNAR:9,LOCMSG_SCRIPTEDITOR_ERROR:10,LOCMSG_SCRIPTEDITOR_DONE:11,LOCMSG_SCRIPTEDITOR_LOAD_EXTERNAL_DATA:12,LOCMSG_SCRIPTEDITOR_PROGRESS_OLD_QVD_ISLOADING:13,LOCMSG_SCRIPTEDITOR_PROGRESS_QVC_LOADING:14,LOCMSG_SCRIPTEDITOR_PROGRESS_QVD_BUFFERED:15,LOCMSG_SCRIPTEDITOR_PROGRESS_QVC_PREPARING:16,LOCMSG_SCRIPTEDITOR_PROGRESS_QVC_APPENDING:17,LOCMSG_SCRIPTEDITOR_REMOVE_SYNTHETIC:18,LOCMSG_SCRIPTEDITOR_PENDING_LINKEDTABLE_FETCHING:19,LOCMSG_SCRIPTEDITOR_RELOAD:20,LOCMSG_SCRIPTEDITOR_LINES_FETCHED:21,LOCMSG_SCRIPTEDITOR_SEARCHINDEX_START:22,LOCMSG_SCRIPTEDITOR_SEARCHINDEX_FIELD:23,LOCMSG_SCRIPTEDITOR_SEARCHINDEX_SUCCESS:24,LOCMSG_SCRIPTEDITOR_SEARCHINDEX_FAILURE:25,LOCMSG_SCRIPTEDITOR_SEARCHINDEX_STARTABORT:26,LOCMSG_SCRIPTEDITOR_SEARCHINDEX_ENDABORT:27,LOCMSG_SCRIPTEDITOR_SEARCHINDEX_TIMEOUT:28,LOCMSG_SCRIPTEDITOR_SEARCHINDEX_OUTOFMEMORY:29,LOCMSG_SCRIPTEDITOR_ACCESS_DENIED_AFTER_RELOAD:30},LocalizedErrorCode:{LOCERR_INTERNAL_ERROR:-128,LOCERR_GENERIC_UNKNOWN:-1,LOCERR_GENERIC_OK:0,LOCERR_GENERIC_NOT_SET:1,LOCERR_GENERIC_NOT_FOUND:2,LOCERR_GENERIC_ALREADY_EXISTS:3,LOCERR_GENERIC_INVALID_PATH:4,LOCERR_GENERIC_ACCESS_DENIED:5,LOCERR_GENERIC_OUT_OF_MEMORY:6,LOCERR_GENERIC_NOT_INITIALIZED:7,LOCERR_GENERIC_INVALID_PARAMETERS:8,LOCERR_GENERIC_EMPTY_PARAMETERS:9,LOCERR_GENERIC_INTERNAL_ERROR:10,LOCERR_GENERIC_CORRUPT_DATA:11,LOCERR_GENERIC_MEMORY_INCONSISTENCY:12,LOCERR_GENERIC_INVISIBLE_OWNER_ABORT:13,LOCERR_GENERIC_PROHIBIT_VALIDATE:14,LOCERR_GENERIC_ABORTED:15,LOCERR_GENERIC_CONNECTION_LOST:16,LOCERR_GENERIC_UNSUPPORTED_IN_PRODUCT_VERSION:17,LOCERR_GENERIC_REST_CONNECTION_FAILURE:18,LOCERR_GENERIC_MEMORY_LIMIT_REACHED:19,LOCERR_GENERIC_NOT_IMPLEMENTED:20,LOCERR_HTTP_400:400,LOCERR_HTTP_401:401,LOCERR_HTTP_402:402,LOCERR_HTTP_403:403,LOCERR_HTTP_404:404,LOCERR_HTTP_405:405,LOCERR_HTTP_406:406,LOCERR_HTTP_407:407,LOCERR_HTTP_408:408,LOCERR_HTTP_409:409,LOCERR_HTTP_410:410,LOCERR_HTTP_411:411,LOCERR_HTTP_412:412,LOCERR_HTTP_413:413,LOCERR_HTTP_414:414,LOCERR_HTTP_415:415,LOCERR_HTTP_416:416,LOCERR_HTTP_417:417,LOCERR_HTTP_422:422,LOCERR_HTTP_429:429,LOCERR_HTTP_500:500,LOCERR_HTTP_501:501,LOCERR_HTTP_502:502,LOCERR_HTTP_503:503,LOCERR_HTTP_504:504,LOCERR_HTTP_505:505,LOCERR_HTTP_509:509,LOCERR_HTTP_COULD_NOT_RESOLVE_HOST:700,LOCERR_APP_ALREADY_EXISTS:1e3,LOCERR_APP_INVALID_NAME:1001,LOCERR_APP_ALREADY_OPEN:1002,LOCERR_APP_NOT_FOUND:1003,LOCERR_APP_IMPORT_FAILED:1004,LOCERR_APP_SAVE_FAILED:1005,LOCERR_APP_CREATE_FAILED:1006,LOCERR_APP_INVALID:1007,LOCERR_APP_CONNECT_FAILED:1008,LOCERR_APP_ALREADY_OPEN_IN_DIFFERENT_MODE:1009,LOCERR_APP_MIGRATION_COULD_NOT_CONTACT_MIGRATION_SERVICE:1010,LOCERR_APP_MIGRATION_COULD_NOT_START_MIGRATION:1011,LOCERR_APP_MIGRATION_FAILURE:1012,LOCERR_APP_SCRIPT_MISSING:1013,LOCERR_APP_EXPORT_FAILED:1014,LOCERR_CONNECTION_ALREADY_EXISTS:2e3,LOCERR_CONNECTION_NOT_FOUND:2001,LOCERR_CONNECTION_FAILED_TO_LOAD:2002,LOCERR_CONNECTION_FAILED_TO_IMPORT:2003,LOCERR_CONNECTION_NAME_IS_INVALID:2004,LOCERR_CONNECTOR_NO_FILE_STREAMING_SUPPORT:2300,LOCERR_CONNECTOR_FILESIZE_EXCEEDED_BUFFER_SIZE:2301,LOCERR_FILE_ACCESS_DENIED:3e3,LOCERR_FILE_NAME_INVALID:3001,LOCERR_FILE_CORRUPT:3002,LOCERR_FILE_NOT_FOUND:3003,LOCERR_FILE_FORMAT_UNSUPPORTED:3004,LOCERR_FILE_OPENED_IN_UNSUPPORTED_MODE:3005,LOCERR_FILE_TABLE_NOT_FOUND:3006,LOCERR_USER_ACCESS_DENIED:4e3,LOCERR_USER_IMPERSONATION_FAILED:4001,LOCERR_SERVER_OUT_OF_SESSION_AND_USER_CALS:5e3,LOCERR_SERVER_OUT_OF_SESSION_CALS:5001,LOCERR_SERVER_OUT_OF_USAGE_CALS:5002,LOCERR_SERVER_OUT_OF_CALS:5003,LOCERR_SERVER_OUT_OF_NAMED_CALS:5004,LOCERR_SERVER_OFF_DUTY:5005,LOCERR_SERVER_BUSY:5006,LOCERR_SERVER_LICENSE_EXPIRED:5007,LOCERR_SERVER_AJAX_DISABLED:5008,LOCERR_SERVER_NO_TOKEN:5009,LOCERR_HC_INVALID_OBJECT:6e3,LOCERR_HC_RESULT_TOO_LARGE:6001,LOCERR_HC_INVALID_OBJECT_STATE:6002,LOCERR_HC_MODAL_OBJECT_ERROR:6003,LOCERR_CALC_INVALID_DEF:7e3,LOCERR_CALC_NOT_IN_LIB:7001,LOCERR_CALC_HEAP_ERROR:7002,LOCERR_CALC_TOO_LARGE:7003,LOCERR_CALC_TIMEOUT:7004,LOCERR_CALC_EVAL_CONDITION_FAILED:7005,LOCERR_CALC_MIXED_LINKED_AGGREGATION:7006,LOCERR_CALC_MISSING_LINKED:7007,LOCERR_CALC_INVALID_COL_SORT:7008,LOCERR_CALC_PAGES_TOO_LARGE:7009,LOCERR_CALC_SEMANTIC_FIELD_NOT_ALLOWED:7010,LOCERR_CALC_VALIDATION_STATE_INVALID:7011,LOCERR_CALC_PIVOT_DIMENSIONS_ALREADY_EXISTS:7012,LOCERR_CALC_MISSING_LINKED_FIELD:7013,LOCERR_CALC_NOT_CALCULATED:7014,LOCERR_LAYOUT_EXTENDS_INVALID_ID:8e3,LOCERR_LAYOUT_LINKED_OBJECT_NOT_FOUND:8001,LOCERR_LAYOUT_LINKED_OBJECT_INVALID:8002,LOCERR_PERSISTENCE_WRITE_FAILED:9e3,LOCERR_PERSISTENCE_READ_FAILED:9001,LOCERR_PERSISTENCE_DELETE_FAILED:9002,LOCERR_PERSISTENCE_NOT_FOUND:9003,LOCERR_PERSISTENCE_UNSUPPORTED_VERSION:9004,LOCERR_PERSISTENCE_MIGRATION_FAILED_READ_ONLY:9005,LOCERR_PERSISTENCE_MIGRATION_CANCELLED:9006,LOCERR_PERSISTENCE_MIGRATION_BACKUP_FAILED:9007,LOCERR_PERSISTENCE_DISK_FULL:9008,LOCERR_PERSISTENCE_NOT_SUPPORTED_FOR_SESSION_APP:9009,LOCERR_PERSISTENCE_MOVE_FAILED:9010,LOCERR_PERSISTENCE_SYNC_SET_CHUNK_INVALID_PARAMETERS:9510,LOCERR_PERSISTENCE_SYNC_GET_CHUNK_INVALID_PARAMETERS:9511,LOCERR_SCRIPT_DATASOURCE_ACCESS_DENIED:1e4,LOCERR_RELOAD_IN_PROGRESS:11e3,LOCERR_RELOAD_TABLE_X_NOT_FOUND:11001,LOCERR_RELOAD_UNKNOWN_STATEMENT:11002,LOCERR_RELOAD_EXPECTED_SOMETHING_FOUND_UNKNOWN:11003,LOCERR_RELOAD_EXPECTED_NOTHING_FOUND_UNKNOWN:11004,LOCERR_RELOAD_EXPECTED_ONE_OF_1_TOKENS_FOUND_UNKNOWN:11005,LOCERR_RELOAD_EXPECTED_ONE_OF_2_TOKENS_FOUND_UNKNOWN:11006,LOCERR_RELOAD_EXPECTED_ONE_OF_3_TOKENS_FOUND_UNKNOWN:11007,LOCERR_RELOAD_EXPECTED_ONE_OF_4_TOKENS_FOUND_UNKNOWN:11008,LOCERR_RELOAD_EXPECTED_ONE_OF_5_TOKENS_FOUND_UNKNOWN:11009,LOCERR_RELOAD_EXPECTED_ONE_OF_6_TOKENS_FOUND_UNKNOWN:11010,LOCERR_RELOAD_EXPECTED_ONE_OF_7_TOKENS_FOUND_UNKNOWN:11011,LOCERR_RELOAD_EXPECTED_ONE_OF_8_OR_MORE_TOKENS_FOUND_UNKNOWN:11012,LOCERR_RELOAD_FIELD_X_NOT_FOUND:11013,LOCERR_RELOAD_MAPPING_TABLE_X_NOT_FOUND:11014,LOCERR_RELOAD_LIB_CONNECTION_X_NOT_FOUND:11015,LOCERR_RELOAD_NAME_ALREADY_TAKEN:11016,LOCERR_RELOAD_WRONG_FILE_FORMAT_DIF:11017,LOCERR_RELOAD_WRONG_FILE_FORMAT_BIFF:11018,LOCERR_RELOAD_WRONG_FILE_FORMAT_ENCRYPTED:11019,LOCERR_RELOAD_OPEN_FILE_ERROR:11020,LOCERR_RELOAD_AUTO_GENERATE_COUNT:11021,LOCERR_RELOAD_PE_ILLEGAL_PREFIX_COMB:11022,LOCERR_RELOAD_MATCHING_CONTROL_STATEMENT_ERROR:11023,LOCERR_RELOAD_MATCHING_LIBPATH_X_NOT_FOUND:11024,LOCERR_RELOAD_MATCHING_LIBPATH_X_INVALID:11025,LOCERR_RELOAD_MATCHING_LIBPATH_X_OUTSIDE:11026,LOCERR_RELOAD_NO_QUALIFIED_PATH_FOR_FILE:11027,LOCERR_RELOAD_MODE_STATEMENT_ONLY_FOR_LIB_PATHS:11028,LOCERR_RELOAD_INCONSISTENT_USE_OF_SEMANTIC_FIELDS:11029,LOCERR_RELOAD_NO_OPEN_DATABASE:11030,LOCERR_RELOAD_AGGREGATION_REQUIRED_BY_GROUP_BY:11031,LOCERR_RELOAD_CONNECT_MUST_USE_LIB_PREFIX_IN_THIS_MODE:11032,LOCERR_RELOAD_ODBC_CONNECT_FAILED:11033,LOCERR_RELOAD_OLEDB_CONNECT_FAILED:11034,LOCERR_RELOAD_CUSTOM_CONNECT_FAILED:11035,LOCERR_RELOAD_ODBC_READ_FAILED:11036,LOCERR_RELOAD_OLEDB_READ_FAILED:11037,LOCERR_RELOAD_CUSTOM_READ_FAILED:11038,LOCERR_RELOAD_BINARY_LOAD_PROHIBITED:11039,LOCERR_RELOAD_CONNECTOR_START_FAILED:11040,LOCERR_RELOAD_CONNECTOR_NOT_RESPONDING:11041,LOCERR_RELOAD_CONNECTOR_REPLY_ERROR:11042,LOCERR_RELOAD_CONNECTOR_CONNECT_ERROR:11043,LOCERR_RELOAD_CONNECTOR_NOT_FOUND_ERROR:11044,LOCERR_RELOAD_INPUT_FIELD_WITH_DUPLICATE_KEYS:11045,LOCERR_RELOAD_CONCATENATE_LOAD_NO_PREVIOUS_TABLE:11046,LOCERR_RELOAD_WRONG_FILE_FORMAT_QVD:11047,LOCERR_PERSONAL_NEW_VERSION_AVAILABLE:12e3,LOCERR_PERSONAL_VERSION_EXPIRED:12001,LOCERR_PERSONAL_SECTION_ACCESS_DETECTED:12002,LOCERR_PERSONAL_APP_DELETION_FAILED:12003,LOCERR_USER_AUTHENTICATION_FAILURE:12004,LOCERR_EXPORT_OUT_OF_MEMORY:13e3,LOCERR_EXPORT_NO_DATA:13001,LOCERR_SYNC_INVALID_OFFSET:14e3,LOCERR_SEARCH_TIMEOUT:15e3,LOCERR_DIRECT_DISCOVERY_LINKED_EXPRESSION_FAIL:16e3,LOCERR_DIRECT_DISCOVERY_ROWCOUNT_OVERFLOW:16001,LOCERR_DIRECT_DISCOVERY_EMPTY_RESULT:16002,LOCERR_DIRECT_DISCOVERY_DB_CONNECTION_FAILED:16003,LOCERR_DIRECT_DISCOVERY_MEASURE_NOT_ALLOWED:16004,LOCERR_DIRECT_DISCOVERY_DETAIL_NOT_ALLOWED:16005,LOCERR_DIRECT_DISCOVERY_NOT_SYNTH_CIRCULAR_ALLOWED:16006,LOCERR_DIRECT_DISCOVERY_ONLY_ONE_DD_TABLE_ALLOWED:16007,LOCERR_DIRECT_DISCOVERY_DB_AUTHORIZATION_FAILED:16008,LOCERR_SMART_LOAD_TABLE_NOT_FOUND:17e3,LOCERR_SMART_LOAD_TABLE_DUPLICATED:17001,LOCERR_VARIABLE_NO_NAME:18e3,LOCERR_VARIABLE_DUPLICATE_NAME:18001,LOCERR_VARIABLE_INCONSISTENCY:18002,LOCERR_MEDIA_LIBRARY_LIST_FAILED:19e3,LOCERR_MEDIA_LIBRARY_CONTENT_FAILED:19001,LOCERR_MEDIA_BUNDLING_FAILED:19002,LOCERR_MEDIA_UNBUNDLING_FAILED:19003,LOCERR_MEDIA_LIBRARY_NOT_FOUND:19004,LOCERR_FEATURE_DISABLED:2e4,LOCERR_JSON_RPC_INVALID_REQUEST:-32600,LOCERR_JSON_RPC_METHOD_NOT_FOUND:-32601,LOCERR_JSON_RPC_INVALID_PARAMETERS:-32602,LOCERR_JSON_RPC_INTERNAL_ERROR:-32603,LOCERR_JSON_RPC_PARSE_ERROR:-32700,LOCERR_MQ_SOCKET_CONNECT_FAILURE:33e3,LOCERR_MQ_SOCKET_OPEN_FAILURE:33001,LOCERR_MQ_PROTOCOL_NO_RESPONE:33002,LOCERR_MQ_PROTOCOL_LIBRARY_EXCEPTION:33003,LOCERR_MQ_PROTOCOL_CONNECTION_CLOSED:33004,LOCERR_MQ_PROTOCOL_CHANNEL_CLOSED:33005,LOCERR_MQ_PROTOCOL_UNKNOWN_ERROR:33006,LOCERR_MQ_PROTOCOL_INVALID_STATUS:33007,LOCERR_EXTENGINE_GRPC_STATUS_OK:22e3,LOCERR_EXTENGINE_GRPC_STATUS_CANCELLED:22001,LOCERR_EXTENGINE_GRPC_STATUS_UNKNOWN:22002,LOCERR_EXTENGINE_GRPC_STATUS_INVALID_ARGUMENT:22003,LOCERR_EXTENGINE_GRPC_STATUS_DEADLINE_EXCEEDED:22004,LOCERR_EXTENGINE_GRPC_STATUS_NOT_FOUND:22005,LOCERR_EXTENGINE_GRPC_STATUS_ALREADY_EXISTS:22006,LOCERR_EXTENGINE_GRPC_STATUS_PERMISSION_DENIED:22007,LOCERR_EXTENGINE_GRPC_STATUS_RESOURCE_EXHAUSTED:22008,LOCERR_EXTENGINE_GRPC_STATUS_FAILED_PRECONDITION:22009,LOCERR_EXTENGINE_GRPC_STATUS_ABORTED:22010,LOCERR_EXTENGINE_GRPC_STATUS_OUT_OF_RANGE:22011,LOCERR_EXTENGINE_GRPC_STATUS_UNIMPLEMENTED:22012,LOCERR_EXTENGINE_GRPC_STATUS_INTERNAL:22013,LOCERR_EXTENGINE_GRPC_STATUS_UNAVAILABLE:22014,LOCERR_EXTENGINE_GRPC_STATUS_DATA_LOSS:22015,LOCERR_EXTENGINE_GRPC_STATUS_UNAUTHENTICATED:22016,LOCERR_LXW_INVALID_OBJ:23001,LOCERR_LXW_INVALID_FILE:23002,LOCERR_LXW_INVALID_SHEET:23003,LOCERR_LXW_INVALID_EXPORT_RANGE:23004,LOCERR_LXW_ERROR:23005,LOCERR_LXW_ERROR_MEMORY_MALLOC_FAILED:23006,LOCERR_LXW_ERROR_CREATING_XLSX_FILE:23007,LOCERR_LXW_ERROR_CREATING_TMPFILE:23008,LOCERR_LXW_ERROR_ZIP_FILE_OPERATION:23009,LOCERR_LXW_ERROR_ZIP_FILE_ADD:23010,LOCERR_LXW_ERROR_ZIP_CLOSE:23011,LOCERR_LXW_ERROR_NULL_PARAMETER_IGNORED:23012,LOCERR_LXW_ERROR_MAX_STRING_LENGTH_EXCEEDED:23013,LOCERR_LXW_ERROR_255_STRING_LENGTH_EXCEEDED:23014,LOCERR_LXW_ERROR_SHARED_STRING_INDEX_NOT_FOUND:23015,LOCERR_LXW_ERROR_WORKSHEET_INDEX_OUT_OF_RANGE:23016,LOCERR_LXW_ERROR_WORKSHEET_MAX_NUMBER_URLS_EXCEEDED:23017,LOCERR_CURL_UNSUPPORTED_PROTOCOL:3e4,LOCERR_CURL_COULDNT_RESOLVE_PROXY:30001,LOCERR_CURL_COULDNT_CONNECT:30002,LOCERR_CURL_REMOTE_ACCESS_DENIED:30003,LOCERR_CURL_FTP_ACCEPT_FAILED:30004,LOCERR_CURL_FTP_ACCEPT_TIMEOUT:30005,LOCERR_CURL_FTP_CANT_GET_HOST:30006,LOCERR_CURL_PARTIAL_FILE:30007,LOCERR_CURL_QUOTE_ERROR:30008,LOCERR_CURL_WRITE_ERROR:30009,LOCERR_CURL_UPLOAD_FAILED:30010,LOCERR_CURL_OUT_OF_MEMORY:30011,LOCERR_CURL_OPERATION_TIMEDOUT:30012,LOCERR_CURL_FTP_COULDNT_USE_REST:30013,LOCERR_CURL_HTTP_POST_ERROR:30014,LOCERR_CURL_SSL_CONNECT_ERROR:30015,LOCERR_CURL_FILE_COULDNT_READ_FILE:30016,LOCERR_CURL_LDAP_CANNOT_BIND:30017,LOCERR_CURL_LDAP_SEARCH_FAILED:30018,LOCERR_CURL_TOO_MANY_REDIRECTS:30019,LOCERR_CURL_PEER_FAILED_VERIFICATION:30020,LOCERR_CURL_GOT_NOTHING:30021,LOCERR_CURL_SSL_ENGINE_NOTFOUND:30022,LOCERR_CURL_SSL_ENGINE_SETFAILED:30023,LOCERR_CURL_SSL_CERTPROBLEM:30024,LOCERR_CURL_SSL_CIPHER:30025,LOCERR_CURL_SSL_CACERT:30026,LOCERR_CURL_BAD_CONTENT_ENCODING:30027,LOCERR_CURL_LDAP_INVALID_URL:30028,LOCERR_CURL_USE_SSL_FAILED:30029,LOCERR_CURL_SSL_ENGINE_INITFAILED:30030,LOCERR_CURL_LOGIN_DENIED:30031,LOCERR_CURL_TFTP_NOTFOUND:30032,LOCERR_CURL_TFTP_ILLEGAL:30033,LOCERR_CURL_SSH:30034,LOCERR_SETEXPRESSION_TOO_LARGE:30100},LocalizedWarningCode:{LOCWARN_PERSONAL_RELOAD_REQUIRED:0,LOCWARN_PERSONAL_VERSION_EXPIRES_SOON:1,LOCWARN_EXPORT_DATA_TRUNCATED:1e3,LOCWARN_COULD_NOT_OPEN_ALL_OBJECTS:2e3},GrpType:{GRP_NX_NONE:0,GRP_NX_HIEARCHY:1,GRP_NX_COLLECTION:2},ExportFileType:{EXPORT_CSV_C:0,EXPORT_CSV_T:1,EXPORT_OOXML:2},ExportState:{EXPORT_POSSIBLE:0,EXPORT_ALL:1},DimCellType:{NX_DIM_CELL_VALUE:0,NX_DIM_CELL_EMPTY:1,NX_DIM_CELL_NORMAL:2,NX_DIM_CELL_TOTAL:3,NX_DIM_CELL_OTHER:4,NX_DIM_CELL_AGGR:5,NX_DIM_CELL_PSEUDO:6,NX_DIM_CELL_ROOT:7,NX_DIM_CELL_NULL:8,NX_DIM_CELL_GENERATED:9},StackElemType:{NX_STACK_CELL_NORMAL:0,NX_STACK_CELL_TOTAL:1,NX_STACK_CELL_OTHER:2,NX_STACK_CELL_SUM:3,NX_STACK_CELL_VALUE:4,NX_STACK_CELL_PSEUDO:5},SortIndicatorType:{NX_SORT_INDICATE_NONE:0,NX_SORT_INDICATE_ASC:1,NX_SORT_INDICATE_DESC:2},DimensionType:{NX_DIMENSION_TYPE_DISCRETE:0,NX_DIMENSION_TYPE_NUMERIC:1,NX_DIMENSION_TYPE_TIME:2},FieldSelectionMode:{SELECTION_MODE_NORMAL:0,SELECTION_MODE_AND:1,SELECTION_MODE_NOT:2},FrequencyMode:{NX_FREQUENCY_NONE:0,NX_FREQUENCY_VALUE:1,NX_FREQUENCY_PERCENT:2,NX_FREQUENCY_RELATIVE:3},DataReductionMode:{DATA_REDUCTION_NONE:0,DATA_REDUCTION_ONEDIM:1,DATA_REDUCTION_SCATTERED:2,DATA_REDUCTION_CLUSTERED:3,DATA_REDUCTION_STACKED:4},HypercubeMode:{DATA_MODE_STRAIGHT:0,DATA_MODE_PIVOT:1,DATA_MODE_PIVOT_STACK:2,DATA_MODE_TREE:3},PatchOperationType:{Add:0,Remove:1,Replace:2},SelectionCellType:{NX_CELL_DATA:0,NX_CELL_TOP:1,NX_CELL_LEFT:2},MatchingFieldMode:{MATCHINGFIELDMODE_MATCH_ALL:0,MATCHINGFIELDMODE_MATCH_ONE:1},SessionState:{SESSION_CREATED:0,SESSION_ATTACHED:1,SESSION_ERROR_NO_LICENSE:2,SESSION_ERROR_LICENSE_RENEW:3,SESSION_ERROR_LIMIT_EXCEEDED:4,SESSION_ERROR_SECURITY_HEADER_CHANGED:5,SESSION_ACCESS_CONTROL_SETUP_FAILURE:6},ReloadState:{RELOAD_PAUSED:0,RELOAD_STARTED:1,RELOAD_ABORTED:2},OpenApiVersion:{V2:0,V3:1},QrsChangeType:{QRS_CHANGE_UNDEFINED:0,QRS_CHANGE_ADD:1,QRS_CHANGE_UPDATE:2,QRS_CHANGE_DELETE:3},ExtEngineDataType:{NX_EXT_DATATYPE_STRING:0,NX_EXT_DATATYPE_DOUBLE:1,NX_EXT_DATATYPE_BOTH:2},ExtEngineFunctionType:{NX_EXT_FUNCTIONTYPE_SCALAR:0,NX_EXT_FUNCTIONTYPE_AGGR:1,NX_EXT_FUNCTIONTYPE_TENSOR:2},ExtEngineMsgType:{NX_EXT_MSGTYPE_FUNCTION_CALL:1,NX_EXT_MSGTYPE_SCRIPT_CALL:2,NX_EXT_MSGTYPE_RETURN_VALUE:3,NX_EXT_MSGTYPE_RETURN_MULTIPLE:4,NX_EXT_MSGTYPE_RETURN_ERROR:5}}}},function(e,t,n){(function(t,n){e.exports=n()})(this,function(){"use strict";function e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function n(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function i(e,i,a,s){i=i||"&";a=a||"=";null===e&&(e=void 0);if("object"===typeof e)return r(o(e),function(o){var s=encodeURIComponent(n(o))+a;return t(e[o])?r(e[o],function(e){return s+encodeURIComponent(n(e))}).join(i):s+encodeURIComponent(n(e[o]))}).join(i);if(!s)return"";return encodeURIComponent(n(s))+a+encodeURIComponent(n(e))}function r(e,t){if(e.map)return e.map(t);var n=[];for(var i=0;i<e.length;i++)n.push(t(e[i],i));return n}var o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t};function a(n,i,r,o){i=i||"&";r=r||"=";var a={};if("string"!==typeof n||0===n.length)return a;var s=/\+/g;n=n.split(i);var l=1e3;o&&"number"===typeof o.maxKeys&&(l=o.maxKeys);var c=n.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var d=n[u].replace(s,"%20"),f=d.indexOf(r),p,h,v,g;if(f>=0){p=d.substr(0,f);h=d.substr(f+1)}else{p=d;h=""}v=decodeURIComponent(p);g=decodeURIComponent(h);e(a,v)?t(a[v])?a[v].push(g):a[v]=[a[v],g]:a[v]=g}return a}var s={encode:i,stringify:i,decode:a,parse:a};var l=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;"value"in i&&(i.writable=true);Object.defineProperty(e,i.key,i)}}return function(t,n,i){n&&e(t.prototype,n);i&&e(t,i);return t}}();function u(e){return e.replace(/(^[/]+)|([/]+$)/g,"")}var d=function(){function e(){l(this,e)}c(e,null,[{key:"configureDefaults",value:function e(t){t.host||(t.host="localhost");"undefined"===typeof t.secure&&(t.secure=true);t.appId||t.route||(t.route="app/engineData");"undefined"===typeof t.noData&&(t.noData=false)}},{key:"buildUrl",value:function t(n){e.configureDefaults(n);var i=n.secure,r=n.host,o=n.port,a=n.prefix,l=n.subpath,c=n.route,d=n.identity,f=n.urlParams,p=n.ttl,h=n.appId;var v="";v+=(i?"wss":"ws")+"://";v+=r||"localhost";o&&(v+=":"+o);a&&(v+="/"+u(a));l&&(v+="/"+u(l));c?v+="/"+u(c):h&&""!==h&&(v+="/app/"+encodeURIComponent(h));d&&(v+="/identity/"+encodeURIComponent(d));p&&(v+="/ttl/"+p);f&&(v+="?"+s.stringify(f));return v}}]);return e}();return d})},function(e,t,n){!function(t,n){var i,r;true;e.exports=n()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){e.exports=function(){var e=e||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),i={},r=i.lib={},o=r.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,r=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<r;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=a<<24-(i+o)%4*8}else for(var o=0;o<r;o+=4)t[i+o>>>2]=n[o>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,i=[],r=function(t){var t=t,n=987654321,i=4294967295;return function(){var r=((n=36969*(65535&n)+(n>>16)&i)<<16)+(t=18e3*(65535&t)+(t>>16)&i)&i;return r/=4294967296,(r+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var s=r(4294967296*(n||e.random()));n=987654071*s(),i.push(4294967296*s()|0)}return new a.init(i,t)}}),s=i.enc={},l=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new a.init(n,t/2)}},c=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new a.init(n,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,r=n.sigBytes,o=this.blockSize,s=4*o,l=r/s,c=(l=t?e.ceil(l):e.max((0|l)-this._minBufferSize,0))*o,u=e.min(4*c,r);if(c){for(var d=0;d<c;d+=o)this._doProcessBlock(i,d);var f=i.splice(0,c);n.sigBytes-=u}return new a.init(f,u)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),f=(r.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}}),i.algo={});return i}(Math);return e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectMerge=t.isLocalStorageAvailable=t.createSession=t.generateId=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){return e&&e.__esModule?e:{default:e}}(n(8));var a=t.generateId=o.default;t.createSession=function(){return(new Date).getTime()+"_"+a()},t.isLocalStorageAvailable=function(){try{return window.localStorage.setItem("is this","supported?"),window.localStorage.removeItem("is this"),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==window.localStorage.length}},t.objectMerge=function(e,t){var n=e||{},o=t||{};return Object.keys(n).reduce(function(e,t){return"object"===r(n[t])?e[t]=i({},n[t],o[t]):e[t]=void 0===o[t]?n[t]:o[t],e},{})}},function(e,t){!function(e){"use strict";if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=function(e){return e&&DataView.prototype.isPrototypeOf(e)},r=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};u.prototype.append=function(e,t){e=s(e),t=l(t);var n=this.map[e];this.map[e]=n?n+","+t:t},u.prototype.delete=function(e){delete this.map[s(e)]},u.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},u.prototype.set=function(e,t){this.map[s(e)]=l(t)},u.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),c(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),c(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),c(e)},t.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},v.call(g.prototype),v.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var a=[301,302,303,307,308];b.redirect=function(e,t){if(-1===a.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},e.Headers=u,e.Request=g,e.Response=b,e.fetch=function(e,n){return new Promise(function(i,r){var o=new g(e,n),a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:function(e){var t=new u;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}}),t}(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;i(new b(t,e))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&t.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(n[Symbol.iterator]=function(){return n}),n}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function p(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function h(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&i(e))this._bodyArrayBuffer=h(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!r(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=h(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=f(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function g(e,t){var n=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new u(t.headers)),this.method=function(e){var t=e.toUpperCase();return o.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function b(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.location=function(){return{origin:function(){if(!window.location.origin){var e=window.location.port?":"+window.location.port:"";return window.location.protocol+"//"+window.location.hostname+e}return window.location.origin}(),pathname:window.location.pathname}},t.system=function(){return{language:navigator.language,platform:navigator.platform,referrer:document.referrer,screen:{devicePixelRatio:window.devicePixelRatio,height:window.screen.height,width:window.screen.width},timezoneOffset:(new Date).getTimezoneOffset(),userAgent:navigator.userAgent}}},function(e,t,n){e.exports=function(e){return function(t){var n=e,i=n.lib,r=i.WordArray,o=i.Hasher,a=n.algo,s=[],l=[];!function(){function e(e){for(var n=t.sqrt(e),i=2;i<=n;i++)if(!(e%i))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var i=2,r=0;r<64;)e(i)&&(r<8&&(s[r]=n(t.pow(i,.5))),l[r]=n(t.pow(i,1/3)),r++),i++}();var c=[],u=a.SHA256=o.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],u=n[5],d=n[6],f=n[7],p=0;p<64;p++){if(p<16)c[p]=0|e[t+p];else{var h=c[p-15],v=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,g=c[p-2],m=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[p]=v+c[p-7]+m+c[p-16]}var b=i&r^i&o^r&o,y=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),x=f+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&d)+l[p]+c[p];f=d,d=u,u=s,s=a+x|0,a=o,o=r,r=i,i=x+(y+b)|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=t.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=o._createHelper(u),n.HmacSHA256=o._createHmacHelper(u)}(Math),e.SHA256}(n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=f(n(6)),s=f(n(15)),l=f(n(16)),c=f(n(17)),u=n(1),d=n(3);function f(e){return e&&e.__esModule?e:{default:e}}var p={apiKey:"",mouseTracker:{enable:!1,timer:500},integrationId:"",productInfo:void 0},h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.configure=this.configure.bind(this),this.setPropOnEvents=this.setPropOnEvents.bind(this),this.setupDataHandler=this.setupDataHandler.bind(this),this.setupListeners=this.setupListeners.bind(this),this.start=this.start.bind(this),this.trackEvent=this.trackEvent.bind(this);var n=(0,u.objectMerge)(p,t);this.setupDataHandler(n)}return o(e,[{key:"configure",value:function(t){var n=(0,u.objectMerge)(this.config||p,t);if(this.config){if(!e.validateConfig(n))return;this.config=n,this.setupListeners()}else this.setupDataHandler(n)}}]),o(e,[{key:"setPropOnEvents",value:function(e,t){this.dataHandler&&this.dataHandler.setCustomProp(e,t)}},{key:"setupDataHandler",value:function(t){if(e.validateConfig(t)){this.config=t;var n=this.config,i=n.apiKey,r=n.integrationId,o=n.productInfo;this.dataHandler=new a.default({apiKey:i,integrationId:r,productInfo:o})}}},{key:"setupListeners",value:function(){if(this.config){var e=this.config.mouseTracker;this.loadTracker.addListener(),this.mousemoveTracker.addListener(r({},e))}}},{key:"start",value:function(e){if(this.dataHandler){var t=this.dataHandler.addLocalStorageToBackupQueue;this.eventTracker=new s.default(this.dataHandler),this.loadTracker=new l.default(t),this.mousemoveTracker=new c.default(this.trackEvent),"function"==typeof e&&e(),this.setupListeners(),this.trackEvent("sessionStarted",(0,d.system)(),"qlikmetricsEvent")}}},{key:"trackEvent",value:function(e,t,n){this.eventTracker&&this.eventTracker.trackEvent(e,t,n)}}],[{key:"validateConfig",value:function(e){if(!e)return!1;var t=e.apiKey,n=e.integrationId,r=e.productInfo;return!(!t||t.length<=1)&&!(!n||n.length<=1)&&(!r||!Array.isArray(r)&&"object"===(void 0===r?"undefined":i(r)))}}]),e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(7),a=n(1),s=u(n(11)),l=n(3),c=u(n(12));function u(e){return e&&e.__esModule?e:{default:e}}var d=["eventCategory","eventName","location","qlikmetricsId","qlikmetricsVersion","properties","sessionId","timestamp"],f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.addLocalStorageToBackupQueue=this.addLocalStorageToBackupQueue.bind(this),this.addToBackupQueue=this.addToBackupQueue.bind(this),this.getSQS=this.getSQS.bind(this),this.sendBackupQueueToLocalStorage=this.sendBackupQueueToLocalStorage.bind(this),this.sendBackupQueueToSQS=this.sendBackupQueueToSQS.bind(this),this.sendMessage=this.sendMessage.bind(this),this.sendMessageToSQS=this.sendMessageToSQS.bind(this),this.setCustomProp=this.setCustomProp.bind(this),this.setupIds=this.setupIds.bind(this),this.backupQueue=[],this.config=t,this.customProps={},this.envInfo={},this.localStorageKey="backupQueue";var n=this.config,i=n.apiKey,r=n.integrationId,o=n.productInfo;this.credentialsHandler=new s.default({apiKey:i,integrationId:r,productInfo:o}),this.setupIds()}return r(e,[{key:"addLocalStorageToBackupQueue",value:function(){if((0,a.isLocalStorageAvailable)()){var e=JSON.parse(window.localStorage.getItem(this.localStorageKey));e&&(this.backupQueue=this.backupQueue.concat(e),window.localStorage.removeItem(this.localStorageKey))}}},{key:"addToBackupQueue",value:function(e){this.backupQueue.every(function(t){return e.timestamp!==t.timestamp})&&this.backupQueue.push(e)}},{key:"getSQS",value:function(){var e=this;return this.sqs?Promise.resolve(this.sqs):this.credentialsHandler.getCredentials().then(function(t){var n=t.accessKeyId,i=t.queueUrl,r=t.region,o=t.secretAccessKey,a=t.sessionToken,s=t.deploymentEnv,l=t.packagingEnv,u=t.productVersion;return e.sqs=new c.default({accessKeyId:n,apiVersion:"2012-11-05",region:r,secretAccessKey:o,sessionToken:a}),e.envInfo={deploymentEnv:s,packagingEnv:l,productVersion:u},e.queueUrl=i,e.sqs})}},{key:"sendMessage",value:function(e){var t=this,n=i({location:(0,l.location)()},e,{qlikmetricsId:this.qlikmetricsId,qlikmetricsVersion:"2.0.0",sessionId:this.sessionId,timestamp:(new Date).getTime()},this.customProps);return this.sendMessageToSQS(n).then(function(){return t.sendBackupQueueToSQS()}).catch(function(){t.addToBackupQueue(n),t.sendBackupQueueToLocalStorage()})}},{key:"sendMessageToSQS",value:function(e){var t=this;return this.getSQS().then(function(n){return new Promise(function(r,o){var a={DelaySeconds:10,MessageBody:JSON.stringify(i({},e,t.envInfo)),QueueUrl:t.queueUrl};n.sendMessage(a,function(e,t){e?o(e):r(t.MessageId)})})}).catch(function(e){throw"InvalidClientTokenId"!==e.Code&&"ExpiredToken"!==e.Code||(t.sqs=void 0),e})}},{key:"sendBackupQueueToLocalStorage",value:function(){if(!(0,a.isLocalStorageAvailable)())return!1;if(0!==this.backupQueue.length)try{window.localStorage.setItem(this.localStorageKey,JSON.stringify(this.backupQueue))}catch(e){window.localStorage.removeItem(this.localStorageKey);try{window.localStorage.setItem(this.localStorageKey,JSON.stringify(this.backupQueue))}catch(e){return!1}}return!0}},{key:"sendBackupQueueToSQS",value:function(){for((0,a.isLocalStorageAvailable)()&&window.localStorage.removeItem(this.localStorageKey);0!==this.backupQueue.length;)this.sendMessageToSQS(this.backupQueue.pop())}},{key:"setCustomProp",value:function(e,t){e&&"string"==typeof e&&-1===d.indexOf(e)&&void 0!==t&&(this.customProps[e]=t)}},{key:"setupIds",value:function(){var e=(0,o.getQlikmetricsIdCookie)();""===e&&(e=(0,a.generateId)(),(0,o.createQlikmetricsIdCookie)(e)),this.qlikmetricsId=e,this.sessionId=(0,a.createSession)()}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getQlikmetricsIdCookie=function(){for(var e="qlikmetricsId=",t=document.cookie.split(";"),n=0;n<t.length;n+=1){for(var i=t[n];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(e))return i.substring(e.length,i.length)}return""},t.createQlikmetricsIdCookie=function(e){var t=new Date;t.setFullYear(t.getFullYear()+2),document.cookie="qlikmetricsId="+e+";Expires="+t+";"}},function(e,t,n){var i=n(9),r=n(10);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||r(a)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,r=n;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(2);var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.getCredentials=this.getCredentials.bind(this)}return i(e,[{key:"getCredentials",value:function(){var e=this;if(this.fetchingCredentials)return Promise.reject({name:"FetchingCredentials"});this.fetchingCredentials=!0;var t=this.config,n=t.apiKey,i=t.integrationId,r=t.productInfo,o={headers:{Accept:"application/json","x-api-key":n}};return r&&(o.headers["x-product-info"]=JSON.stringify(r)),fetch("https://api.qlikdataengineering.com/sqs-proxy/v1/"+i+"/credentials",o).then(function(e){return e.json()}).then(function(t){return e.fetchingCredentials=!1,t}).catch(function(t){throw e.fetchingCredentials=!1,t})}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(2);var r=a(n(13)),o=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t}return i(e,[{key:"authorizationHeader",value:function(e,t){var n=this.config,i=n.accessKeyId,r=n.region,o="AWS4-HMAC-SHA256 Credential="+i+"/"+e.substring(0,8)+"/"+r+"/sqs/aws4_request, SignedHeaders=host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature="+t;return o}}]),i(e,[{key:"messageParams",value:function(e){var t=this.config.apiVersion,n=e.DelaySeconds,i=e.MessageBody,r=e.QueueUrl;return"Action=SendMessage&DelaySeconds="+n+"&MessageBody="+encodeURIComponent(i)+"&QueueUrl="+r+"&Version="+t}},{key:"sendMessage",value:function(e,t){var n=e.QueueUrl,i=this.config.sessionToken,r=n.match(/^(?:https?:)?(?:\/\/)?([^/?]+)/)[1];if(r){var a=this.messageParams(e),s=(0,o.default)(a),l=((new Date).toISOString().split(".")[0]+"Z").replace(/-/g,"").replace(/:/g,""),c={host:r,origin:"https://"+r},u=this.signature(c.host,s,l),d=this.authorizationHeader(l,u);fetch(c.origin,{body:a,headers:{Accept:"application/json",Authorization:d,"Content-Type":"application/x-www-form-urlencoded","X-Amz-Content-Sha256":s,"X-Amz-Date":l,"X-Amz-Security-Token":i},method:"POST"}).then(function(e){return e.json()}).then(function(e){e.SendMessageResponse?t(void 0,e.SendMessageResponse.SendMessageResult):e.Error&&t(e.Error,void 0)}).catch(function(e){return t(e,void 0)})}}},{key:"signature",value:function(e,t,n){var i=this.config,a=i.sessionToken,s=i.region,l="POST\n/\n\nhost:"+e+"\nx-amz-content-sha256:"+t+"\nx-amz-date:"+n+"\nx-amz-security-token:"+a+"\n\nhost;x-amz-content-sha256;x-amz-date;x-amz-security-token\n"+t,c=(0,o.default)(l).toString(),u="AWS4-HMAC-SHA256\n"+n+"\n"+n.substring(0,8)+"/"+s+"/sqs/aws4_request\n"+c,d=this.signatureKey(n),f=(0,r.default)(u,d).toString();return f}},{key:"signatureKey",value:function(e){var t=this.config,n=t.region,i=t.secretAccessKey,o=e.substring(0,8),a=(0,r.default)(o,"AWS4"+i),s=(0,r.default)(n,a),l=(0,r.default)("sqs",s);return(0,r.default)("aws4_request",l)}}]),e}();t.default=s},function(e,t,n){e.exports=function(e){return e.HmacSHA256}(n(0),n(4),n(14))},function(e,t,n){e.exports=function(e){!function(){var t=e,n=t.lib,i=n.Base,r=t.enc,o=r.Utf8,a=t.algo;a.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),a=this._iKey=t.clone(),s=r.words,l=a.words,c=0;c<n;c++)s[c]^=1549556828,l[c]^=909522486;r.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);t.reset();var i=t.finalize(this._oKey.clone().concat(n));return i}})}()}(n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.trackEvent=this.trackEvent.bind(this),this.dataHandler=t}return r(e,[{key:"trackEvent",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={eventCategory:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",eventName:t,properties:n};e.validateMessageBody(i)&&this.dataHandler.sendMessage(i)}}],[{key:"validateMessageBody",value:function(e){return!!e.eventName&&!(e.eventName.length<=1)&&"object"===i(e.properties)}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.addListener=this.addListener.bind(this),this.removeListener=this.removeListener.bind(this),this.addLocalStorageToBackupQueue=t}return i(e,[{key:"addListener",value:function(){var e=this;this.removeListener(),this.listener=function(){e.addLocalStorageToBackupQueue()},window.addEventListener("load",this.listener,!0)}},{key:"removeListener",value:function(){this.listener&&window.removeEventListener("load",this.listener,!0)}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.addListener=this.addListener.bind(this),this.eventListener=this.eventListener.bind(this),this.removeListener=this.removeListener.bind(this),this.points=[],this.trackEvent=t}return i(e,[{key:"addListener",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.removeListener();var t=e.enable,n=e.timer;t&&(this.timer=n,window.addEventListener("mousemove",this.eventListener,!0))}},{key:"eventListener",value:function(e){var t=this;clearTimeout(this.timeout);var n=e.pageX,i=e.pageY,r=e.timeStamp;this.points.push({pageX:n,pageY:i,timeStamp:r}),this.timeout=setTimeout(function(){var e=document.body,n=e.scrollHeight,i=e.scrollWidth,r={points:t.points,documentHeight:n,documentWidth:i};t.points=[],t.trackEvent("mousemove",r,"qlikmetricsEvent")},this.timer)}},{key:"removeListener",value:function(){window.removeEventListener("mousemove",this.eventListener,!0)}}]),e}();t.default=r}]).default})},,,,,,,,function(e,t,n){"use strict";var i,r;!(i=[n(48),n(11),n(1e3),n(1023),n(91),n(49),n(404)],r=function(e,t,n,i,r,o,a){e.directive("qvRain",[function(){return{replace:true,template:i,restrict:"E",scope:{show:"=",model:"=",resize:"=?",messageObj:"=?"},link:function e(i,s){var l;i.objectSRloading=r.get("Accessibility.object.Loading");i.rainStyle={};i.isLoadingCardImageFlag=o.getFlag("LOADING_CARD_IMAGES");i.animation=null;function c(){var e=s[0].getBoundingClientRect(),t=Math.min(e.width,e.height);t*=.3;i.rainStyle.height=t+"px";i.rainStyle.width=t+"px";i.rainStyle.top=(e.height-t)/2;i.rainStyle.left=(e.width-t)/2}function u(e){var r={container:s.find(".rain-image-container")[0],renderer:"svg",loop:true,autoplay:true};n().then(function(n){t.getJSON(e,function(e){r.animationData=e;i.animation=n.loadAnimation(r);i.animation.play()})})}function d(){if(i.animation){i.animation.stop();i.animation.destroy();i.animation=null}}i.$watch("show",function(e){if(void 0===e)return;e&&c()});i.$watch("model",function(e){if(i.isLoadingCardImageFlag){var t=e?e.genericType:"";e&&e.layout&&e.layout.qUndoExclude&&e.layout.qUndoExclude.generated&&(t=e.layout.qUndoExclude.generated.visualization);u(a.getLoadingImageAnimationUrlFromChartType(t))}});i.resize&&(l=i.resize(c));c();i.$on("$destroy",function(){l&&l();i.isLoadingCardImageFlag&&d()})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=function e(){return n.e(73).then(n.t.bind(null,1271,7)).then(function(e){return e})};t.default=i;e.exports=t.default},,,,function(e,t,n){var i;(function(r){function o(e,t,n,i,r){this._listener=t;this._isOnce=n;this.context=i;this._signal=e;this._priority=r||0}o.prototype={active:true,params:null,execute:function(e){var t,n;if(this.active&&!!this._listener){n=this.params?this.params.concat(e):e;t=this._listener.apply(this.context,n);this._isOnce&&this.detach()}return t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal;delete this._listener;delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}};function a(e,t){if("function"!==typeof e)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function s(){this._bindings=[];this._prevParams=null;var e=this;this.dispatch=function(){s.prototype.dispatch.apply(e,arguments)}}s.prototype={VERSION:"1.0.0",memorize:false,_shouldPropagate:true,active:true,_registerListener:function(e,t,n,i){var r=this._indexOfListener(e,n),a;if(-1!==r){a=this._bindings[r];if(a.isOnce()!==t)throw new Error("You cannot add"+(t?"":"Once")+"() then add"+(t?"Once":"")+"() the same listener without removing the relationship first.")}else{a=new o(this,e,t,n,i);this._addBinding(a)}this.memorize&&this._prevParams&&a.execute(this._prevParams);return a},_addBinding:function(e){var t=this._bindings.length;do{--t}while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){var n=this._bindings.length,i;while(n--){i=this._bindings[n];if(i._listener===e&&i.context===t)return n}return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,n){a(e,"add");return this._registerListener(e,false,t,n)},addOnce:function(e,t,n){a(e,"addOnce");return this._registerListener(e,true,t,n)},remove:function(e,t){a(e,"remove");var n=this._indexOfListener(e,t);if(-1!==n){this._bindings[n]._destroy();this._bindings.splice(n,1)}return e},removeAll:function(){var e=this._bindings.length;while(e--)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=false},dispatch:function(e){if(!this.active)return;var t=Array.prototype.slice.call(arguments),n=this._bindings.length,i;this.memorize&&(this._prevParams=t);if(!n)return;i=this._bindings.slice();this._shouldPropagate=true;do{n--}while(i[n]&&this._shouldPropagate&&false!==i[n].execute(t))},forget:function(){this._prevParams=null},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var l=s;l.Signal=s;true;!(i=function(){return l}.call(t,n,t,e),void 0!==i&&(e.exports=i))})(this)},,,,,,,function(e,t){e.exports='<div qva-direction class="qv-selection-toolbar qvt-selection-toolbar"\n\t ng-style="toolbar.style"\n\t ng-class="{ \'sel-toolbar-card\': !options.isPopover, \'sel-toolbar-popover\': options.isPopover, \'sel-toolbar-click-to-unlock-bg\': locked, \'sel-toolbar-menu-item\': locked }"\n\t ng-click="locked && toggleLock($event);">\n    <div class="sel-toolbar-list-wrapper">\n\t\t<table class="sel-toolbar-list">\n            <tr>\n                <td ng-if="toolbar.showLock || locked" class="sel-toolbar-list-item sel-toolbar-list-item-lockunlock">\n                    <button tid="selection-toolbar.lock"\n                            class="sel-toolbar-btn sel-toolbar-icon"\n                            q-title-translation="{{locked ? \'SelectionToolbar.ClickToUnlock\' : \'SelectionToolbar.ClickToLock\'}}"\n                            ng-disabled="locked ? false : !toolbar.backendApi.hasSelections()"\n                            ng-click="!locked && toggleLock($event);">\n                        <span class="lui-icon sel-toolbar-span-icon" ng-class="!locked ? \'lui-icon--unlock\':\'lui-icon--lock sel-toolbar-menu-span-icon\'"></span>\n                    </button>\n                </td>\n\t\t\t\t<td class="sel-toolbar-list-item" ng-class="{ \'sel-toolbar-list-item-hide-more\': !shouldShowBtnMore() }">\n\t\t\t\t\t<button tid="selection-toolbar.toggleShowMenu"\n\t\t\t\t\t\t\t\t\tclass="sel-toolbar-btn sel-toolbar-icon sel-toolbar-icon-toggle"\n\t\t\t\t\t\t\t\t\tng-class="{ \'menu-active\': toolbar.showMenu }"\n\t\t\t\t\t\t\t\t\tq-title-translation="{{toolbar.showMenu ? \'Tooltip.CloseSelectionMenu\' : \'Tooltip.SelectionMenu\'}}"\n\t\t\t\t\t\t\t\t\tng-click="toggleShowMenu($event)">\n\t\t\t\t\t\t<span class="lui-icon  lui-icon--more"></span>\n\t\t\t\t\t</button>\n\t\t\t\t</td>\n                <td ng-show="locked" class="sel-toolbar-list-item-locked">\n                    <p class="sel-toolbar-menu-text" q-translation="SelectionToolbar.ClickToUnlock"></p>\n                </td>\n                <td ng-show="locked && options.smallDevice" ng-click="toolbar.selectionsApi.confirm()" class="sel-toolbar-list-item-close">\n                    <qui-toolbarbutton>\n                        <span class="sel-toolbar-menu-text sel-toolbar-btn-close-text" q-translation="Common.Close"></span>\n                    </qui-toolbarbutton>\n\t\t\t\t</td>\n\t\t\t\t<td ng-repeat="select in selectComponents" class="sel-toolbar-list-item-optionslist">\n\t\t\t\t\t<select ng-show="shouldShowSelect(select)" ng-disabled="shouldDisableSelect(select)" tid="select.tid" q-title-translation="{{select.name}}" ng-style="{width: select.width}" class="lui-select" ng-model="select.value" ng-change="select.action(select)">\n\t\t\t\t\t\t<option ng-if="select.noSelectOption" value="{{select.noSelectOption.value || \'\'}}">{{select.noSelectOption.label || select.noSelectOption.value || ""}}</option>\n\t\t\t\t\t\t<option ng-repeat="option in select.options" value="{{option.value}}">{{option.label || option.value}}</option>\n\t\t\t\t\t</select>\n\t\t\t\t</td>\n                <td ng-show="!locked" ng-repeat="button in filteredButtons" class="sel-toolbar-list-item" ng-class="button.clazz">\n                    <button tid="{{button.tid}}"\n                            ng-click="buttonAction($event, button)"\n                            q-title-translation="{{button.name}}"\n                            ng-disabled="buttonIsDisabled(button)"\n                            class="sel-toolbar-btn"\n                            ng-class="[button.buttonClass, button.isIcon ? \'sel-toolbar-icon\' : \'\', button.isActive(this) ? \'menu-active\' : \'\']">\n                        <span class="sel-toolbar-span-icon lui-icon" ng-class="button.iconClass"></span>\n                    </button>\n                </td>\n            </tr>\n        </table>\n\n\t</div>\n\t\n\t\x3c!-- Menu container (drop-down) --\x3e\n\t<div ng-if="toolbar.showMenu" class="sel-toolbar-menu" ng-style="toolbar.menuStyle"\n\t\t qva-delegated-activate="div:not(.disabled)#menuAction($event);">\n\n\t\t \x3c!-- Menu "go back"-button for sub-levels --\x3e\n\t\t <div ng-if="levels.length > 0" class="sel-toolbar-menu-item back-item" tid="sel-toolbar-menu-back">\n\t\t\t<table class="sel-toolbar-menu-table">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<span class="sel-toolbar-menu-span-icon lui-icon lui-icon--triangle-left" ng-class="button.iconClass"></span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<p class="sel-toolbar-menu-text" q-translation="Back"></p>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\n\t\t\x3c!-- Menu buttons --\x3e\n\t\t<div ng-repeat="button in currentMenuButtons" class="sel-toolbar-menu-item"\n\t\t\t tid="{{button.tid}}"\n\t\t\t q-title-translation="{{button.name}}"\n\t\t\t ng-class="{\'disabled\': buttonIsDisabled(button), \'selected\': isButtonSelected( button ) }">\n\t\t\t<table class="sel-toolbar-menu-table" ng-class="{ \'selection-toolbar-menu-table-align-center\': !filteredButtons.length }">\n\t\t\t\t<tr>\n\n\t\t\t\t\t\x3c!-- Button icon --\x3e\n\t\t\t\t\t<td ng-if="button.iconClass">\n\t\t\t\t\t\t<span class="sel-toolbar-menu-span-icon lui-icon" ng-class="button.iconClass"></span>\n\t\t\t\t\t</td>\n\n\t\t\t\t\t\x3c!-- Button label --\x3e\n\t\t\t\t\t<td ng-if="filteredButtons.length || ( button.name && !button.iconClass )" ng-class="{\'menu-text-with-right-icon\': button.items}">\n\t\t\t\t\t\t<p class="sel-toolbar-menu-text" ng-class="{\'menu-text-without-left-icon\': !button.iconClass}" q-translation="{{button.name}}"></p>\n\t\t\t\t\t</td>\n\n\t\t\t\t\t\x3c!-- "Click to see more"-icon --\x3e\n\t\t\t\t\t<td ng-if="button.items">\n\t\t\t\t\t\t<span class="sel-toolbar-menu-span-icon next-icon lui-list__aside lui-icon lui-icon--triangle-right"></span>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t</div>\n\t</div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={BUTTON_WIDTH:44,SEPARATOR_WIDTH:1,BORDER_SPACING:8,SELECT_DEFAULT_WIDTH:200,EXTRA_EDGE_PADDING:2,TYPE_BUTTON:"button",TYPE_SEPARATOR:"separator",TYPE_SELECT:"select"};Object.freeze(e);return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div class="qv-object-wrapper" ng-class="wrapperClassList" x-ms-format-detection="none">\n\n\t<article class="qv-object qvt-visualization" ng-class="classList" tid="{{objectClass}}">\n\t\t<div class="qv-inner-object" ng-style="styles.backgroundColor">\n\t\t\t<qv-rain ng-if="object.throbberApi.isVisible" show="object.throbberApi.isVisible" resize="object.throbberApi.watchResize" model="object.model"></qv-rain>\n\t\t\t<div class="retry-overlay" ng-if="object.throbberApi.isQueryCanceled">\n\t\t\t\t<ul class="cancelled-list">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<div class="retry-text" q-translation="Object.Cancelled"></div>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<button class="retry-button lui-button" qva-activate="retry()" q-translation="Dialog.Button.Retry" tid="retry-calculations"></button>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class="cancel-overlay" ng-if="object.throbberApi.isLongRunningQuery && !object.throbberApi.isQueryCanceled">\n\t\t\t\t<button class="cancel-button lui-button" ng-if="!object.throbberApi.isQueryCanceled" qva-activate="cancel()"\n\t\t\t\t\t\tq-translation="Common.Cancel" tid="cancel-calculations"></button>\n\t\t\t</div>\n\n\t\t\t<label class="hidden-screen-reader-label" q-translation="{{object.type.libraryInfo.isThirdParty ? object.type.libraryInfo.name : object.type.libraryInfo.translationKey}}"></label>\n\t\t\t<label ng-if="!layout.title" class="hidden-screen-reader-label" q-translation="Accessibility.Object.NoTitle"></label>\n\t\t\t<header qva-direction x-dir-setting="{{options.direction}}" ng-show="object.hasFrame" class="qv-object-header" ng-class="{\'thin\' : !object.showTitles || ( layout.title === \'\' && layout.subtitle === \'\' && !object._inEditState )}">\n\t\t\t\t<h1 ng-show="object.showTitles" qva-direction x-dir-setting="{{options.direction}}" ng-attr-title="{{layout.title}}" class="qv-object-title qvt-visualization-title" qva-activate="titleClicked();" ng-style="styles.title">\n\t\t\t\t\t<a ng-if="options.showSearch && object.isInteractive && !object.backendApi.isLocked() && !object._inEditState" q-title-translation="Common.Search" class="qv-object-search lui-icon lui-icon--search"\n\t\t\t\t\t   qva-activate="options.showSearch && options.search.toggle()"></a>\n\t\t\t\t\t<a ng-if="options.showSearch && object.isInteractive && object.backendApi.isLocked()" class="qv-object-locked lui-icon lui-icon--lock"\n\t\t\t\t\t   qva-activate="titleClicked()"></a>\n\t\t\t\t\t<span ng-if="options.showSearch && object.backendApi.isDrillDown()" class="lui-icon lui-icon--drill-down" q-title-translation="Tooltip.dimensions.drilldown"></span>\n\t\t\t\t\t<div ng-if="options.highlightTitle && (!object._inEditState || object._inEditState && object.isReadonly)" qve-highlight text="{{layout.title}}" query="options.highlightQuery" class="qv-object-title-text" qva-direction x-dir-setting="{{options.direction}}" x-dir-text="{{layout.title}}"></div>\n\t\t\t\t\t<div ng-if="!options.highlightTitle && (!object._inEditState || object._inEditState && object.isReadonly)" class="qv-object-title-text" qva-direction x-dir-setting="{{options.direction}}" x-dir-text="{{layout.title}}">{{layout.title}}</div>\n\t\t\t\t\t<div ng-if="options.showDisclaimerStar && !!layout.title && !object._inEditState" class="disclaimer qv-object-title-text">*</div>\n\t\t\t\t\t<div ng-if="object._inEditState && !object.isReadonly" qv-inline-title-edit x-dir-setting="{{options.direction}}" x-model="model" x-property-path="title" x-layout-path="title"\n\t\t\t\t\t\t x-empty-translation="Object.AddTitle" class="qv-object-title-edit" qva-direction x-dir-setting="{{options.direction}}"></div>\n\t\t\t\t</h1>\n\n\t\t\t\t<h2 ng-if="!!layout.subtitle && object.showTitles" ng-style="styles.subTitle" qva-direction x-dir-setting="{{options.direction}}" x-dir-text="{{layout.subtitle}}" ng-attr-title="{{layout.subtitle}}" ng-show="!!layout.subtitle" class="qv-object-subtitle qvt-visualization-subtitle">{{layout.subtitle}}</h2>\n\t\t\t</header>\n\n\t\t\t<div class="qv-object-content-container">\n\t\t\t\t<div class="qv-object-content" qv-object-content component="object.content" options="options" object="object" backend-api="object.backendApi" layout="layout"\n\t\t\t\t\t ext="object.ext" selections-api="object.selectionsApi" tooltip-api="object.tooltipApi" throbber-api="object.throbberApi" on-init="onInit">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="qv-footer-wrapper" ng-show="object.hasFrame && object.showTitles && !!layout.footnote" ng-style="styles.footer">\n\t\t\t<footer qva-direction x-dir-setting="{{options.direction}}" x-dir-text="{{layout.footnote}}" ng-attr-title="{{layout.footnote}}" ng-if="object.hasFrame && object.showTitles && !!layout.footnote" class="qv-object-footnote qvt-visualization-footnote">{{layout.footnote}}</footer>\n\t\t</div>\n\n\t</article>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(11),n(1015),n(94),n(89),n(205),n(97),n(321),n(402),n(403),n(1019),n(108)],r=function(e,t,n,i,r,o,a,s,l,c,u){var d=null;var f=r.extend({$scope:null,init:function t(i,r){this.$scope=i;this.$scope.hyperCubePath=i.object.ext.options.hyperCubePath;this.titleRetriever=l.create();function f(){n.model?i.showAdd=c.updateShowAdd(u.inClient(),n.isInEditMode(),i.object.isReadonly):i.showAdd=false}n.StateChanged.bind(f);i.$on("$destroy",function(){n.StateChanged.unbind(f)});f();i.removeDimension=function(e){i.object.model.getProperties().then(function(t){var n=i.object.getCreatePropertyHandler();n.setProperties(t);n.removeDimension(e).then(function(){i.object.model.setProperties(t)})})};i.removeMeasure=function(e){i.object.model.getProperties().then(function(t){var n=i.object.getCreatePropertyHandler();n.setProperties(t);n.removeMeasure(e).then(function(){i.object.model.setProperties(t)})})};function p(e){return i.object.ext.addFieldDimension(e,i.object).then(function(){b()})}function h(e){return i.object.ext.addLibraryDimension(e,i.object).then(function(){b()})}function v(e){return i.object.ext.addLibraryMeasure(e,i.object).then(function(){b()})}function g(e){return i.object.ext.addExpressionMeasure(e,i.object).then(function(){b()})}var m;i.showAddDimension=function(t,n){if(d&&d===n){m&&m.close();m=null;d=null;return}var o=i.ext.addDimensionPopoverComponent||a;var s;m=r.show({template:o.template,controller:o.controller,input:{app:i.object.model.app,closeAddPopover:b,addFieldDimension:p,addLibraryDimension:h},alignTo:t.target,closeOnEscape:true,outsideIgnore:".add-button",dock:"right"});m.closing.then(function(t){s=t;t&&!e(t.target).hasClass("add-button")&&(d=null)});m.closed.then(function(){m=null;n.active=false;s||(d=null)});n.active=true;d=n};i.showAddMeasure=function(t,n){if(d&&d===n){m&&m.close();m=null;d=null;return}var o=i.ext.addMeasurePopoverComponent||s;var a;m=r.show({template:o.template,controller:o.controller,input:{app:i.object.model.app,closeAddPopover:b,addLibraryMeasure:v,addExpressionMeasure:g},alignTo:t.target,closeOnEscape:true,dock:"right",outsideIgnore:'[tid="add-measure"]'});m.closing.then(function(t){a=t;t&&!e(t.target).hasClass("add-button")&&(d=null)});m.closed.then(function(){m=null;n.active=false;a||(d=null)});n.active=true;d=n};function b(t){if(m){m.close();m=null}d&&(d.active=false);t&&!e(t.target).hasClass("add-button")&&(d=null)}o.on("start",b);i.$on("$destroy",function(){o.off("start",b);b()})},onPaint:p});f.$inject=["$scope","luiPopover"];return{template:t,controller:f};function p(e){var t=this.$scope;var r=this;return this.$scope.object.model.getEffectiveProperties().then(function(o){var a;var s=r.titleRetriever;t.showAdd=c.updateShowAdd(u.inClient(),n.isInEditMode(),t.object.isReadonly);c.updateMinMax(t,e);t.iconName=t.object.ext.libraryInfo.icon;if(t.type!==t.object.type.type){a=t.object.getCreatePropertyHandler();r.propertyHandler=a;t.canRemoveDim=!!a.removeDimension;t.type=t.object.type.type;t.addDimensionLabel=a.getAddDimensionLabel()}else a=r.propertyHandler;a.setLayout(e);a.setProperties(o);s.resetTitles();var l=a.getDimensions().map(function(e){var t=e.qDef.cId;var n=a.getDimensionLayout(t);var i=n.qError&&n.qError.qErrorCode;return{invalid:!!i,title:s.getDimensionTitle(n,e,true)}});return i.all(a.getMeasures().map(function(e,t){var n=e.qDef.cId;var i=a.getMeasureLayout(n);i||(i=a.getMeasureLayouts()[t]);var r=i.qError&&i.qError.qErrorCode;return s.getMeasureTitle(i,e,true,a.app).then(function(e){return{invalid:!!r,title:e}})})).then(function(e){t.finishedDimensions=l;t.finishedMeasures=e;var n=!l.length&&t.maxDimensions>0;var i=!e.length&&t.maxMeasures>0;t.unfinishedDimensions=c.getArray(Math.max(0,t.minDimensions-l.length,n?1:0));t.unfinishedMeasures=c.getArray(Math.max(0,t.minMeasures-e.length,i?1:0));t.show=true})})}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div qv-requirements class="requirements-wrapper" ng-show="show" ng-class="{\'incomplete\': !showAdd}">\n\t<div class="requirements">\n\t\t<h2 class="header">\n\t\t\t<i class="object-icon  lui-icon  lui-icon--{{iconName}}"></i>\n\t\t</h2>\n\t<p class="incomplete-text" ng-if="!showAdd" q-translation="Visualization.Requirements.IncompleteVisualization"></p>\n\t\t\x3c!-- finished dimensions --\x3e\n\t\t<ul ng-if="showAdd && finishedDimensions.length">\n\t\t\t<li ng-repeat="dimension in finishedDimensions" class="item" ng-class="{ finished: !dimension.invalid, invalid: dimension.invalid }"\n\t\t\t\ttid="{{ dimension.invalid ? \'invalid-dimension\' : \'added-dimension\'}}">\n\t\t\t\t<span class="text" ng-class="{ \'no-icon\': !canRemoveDim }" title="{{dimension.title}}">{{dimension.title}}</span>\n\t\t\t\t<i ng-if="canRemoveDim" class="lui-icon lui-icon--remove" qva-activate="removeDimension($index)" q-title-translation="Common.Delete"></i>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t\x3c!-- unfinished dimensions --\x3e\n\t\t<ul ng-if="showAdd && unfinishedDimensions.length">\n\t\t\t<li ng-repeat="d in unfinishedDimensions" class="item missing" tid="missing-dimension">\n\t\t\t\t<button class="add-button lui-button"  ng-class="{ \'lui-active\': d.active }" ng-click="showAddDimension($event,d)"\n\t\t\t\t\t\t\ttid="add-dimension">{{addDimensionLabel}}</button>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t\x3c!-- finished measures --\x3e\n\t\t<ul ng-if="showAdd && finishedMeasures.length">\n\t\t\t<li ng-repeat="measure in finishedMeasures" class="item" ng-class="{ finished: !measure.invalid, invalid: measure.invalid }"\n\t\t\t\ttid="{{ measure.invalid ? \'invalid-measure\' : \'added-measure\'}}">\n\t\t\t\t<span class="text" title="{{measure.title}}">{{measure.title}}</span>\n\t\t\t\t<i class="lui-icon lui-icon--remove" qva-activate="removeMeasure($index)" q-title-translation="Common.Delete"></i>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t\x3c!-- unfinished measures --\x3e\n\t\t<ul ng-if="showAdd && unfinishedMeasures.length">\n\t\t\t<li ng-repeat="m in unfinishedMeasures" class="item missing" tid="missing-measure">\n\t\t\t<button class="add-button lui-button"  ng-class="{ \'lui-active\': m.active }" ng-click="showAddMeasure($event,m)"\n\t\t\t\t\tq-translation="Visualization.Requirements.AddMeasure" tid="add-measure"></button>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>\n'},function(e,t){e.exports='<lui-popover class="add-popover-wrapper" style="min-width: 200px;width: 230px;" align-to="alignTo" position="position" collision="\'flipfit\'" on-close-view="closeAddPopover(event)" qva-outside-ignore-for="{{qvaOutsideIgnoreFor}}">\n\t<div ng-show="!step2">\n\t\t<object-add-typeahead>\n\t\t\t<lui-popover-header>\n\t\t\t\t\t<div class="lui-input-group">\n\t\t\t\t\t\t<input class="lui-input  lui-input-group__item  lui-input-group__input" type="text" name="new-measure" autocomplete="off" ng-model="search.term" tid="add-measure-input" qva-focus="autoFocus"\n\t\t\t\t\t\t\t   maxlength="255" object-add-typeahead-input on-escape="onEscape($event)" on-enter="onEnter($event)"/>\n\n\t\t\t\t\t\t<button ng-if="allowExpressionEditor !== false" class="lui-button  lui-input-group__item  lui-input-group__button" qva-activate="close()"\n\t\t\t\t\t\t\t\tpp-expression-editor="search.term" pp-expression-editor-on-apply="addExpressionMeasure({value:value})" expression-type="measure"\n\t\t\t\t\t\t\t\tq-title-translation="Tooltip.OpenExpressionEditor" tid="fx-button">\n\t\t\t\t\t\t\t<span class="lui-button__icon  lui-icon  lui-icon--expression  edit-expression"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t</lui-popover-header>\n\t\t\t<div class="object-add-popover-content" object-add-typeahead-menu>\n\t\t\t\t<ul class="lui-list">\n\t\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="measure in activeMeasures" tid="measure-item"\n\t\t\t\t\t\tobject-add-typeahead-item="measure" on-select="addActiveMeasure(measure)">\n\t\t\t\t\t\t<span qve-highlight text="{{measure.translatedTitle}}" title="{{measure.translatedTitle}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class="object-add-popover-list-header" ng-if="measures.length"  q-translation="Common.Measures"></div>\n\t\t\t\t<ul class="lui-list">\n\t\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="measure in measures" tid="measure-item"\n\t\t\t\t\t\tobject-add-typeahead-item="measure" on-select="addLibraryMeasure(measure)">\n\t\t\t\t\t\t<span qve-highlight text="{{measure.value}}" title="{{measure.value}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class="object-add-popover-list-header" ng-if="fields.length" q-translation="Visualization.Requirements.FromField"></div>\n\t\t\t\t<ul class="lui-list">\n\t\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="field in fields" tid="field-item"\n\t\t\t\t\t\tobject-add-typeahead-item="field" on-select="showFromField(field)"\n\t\t\t\t\t\tng-class="{\'derived-field\': (field.isDerived && search.term === \'\')}"\t>\n\t\t\t\t\t\t<i ng-if="isDirectDiscoveryField( field )" class="lui-icon  lui-icon--direct-discovery  lui-list__aside" q-title-translation="{{ getDirectDiscoveryTypeTranslationKey( field.qTags ) }}"></i>\n\t\t\t\t\t\t<span ng-if="field.isGeoField" class="lui-icon lui-icon--map lui-list__aside"></span>\n\t\t\t\t\t\t<span ng-if="field.isDateField" class="lui-icon lui-icon--calendar lui-list__aside"></span>\n\t\t\t\t\t\t<span qve-highlight text="{{getFieldDisplayName(field)}}" title="{{field.toolTip}}" query="search.term" class="lui-list__text lui-list__text--ellipsis"></span>\n\t\t\t\t\t\t<i class="object-add-popover-toogle-step2-icon  lui-list__aside lui-icon  lui-icon--triangle-right"></i>\n\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class="object-add-popover-nohits" ng-if="!measures.length && !fields.length" q-translation="Toolbox.Search.Nohits"></div>\n\t\t\t</div>\n\t\t</object-add-typeahead>\n\t</div>\n\t<div class="object-add-popover back" ng-show="step2">\n\t\t<div class="object-add-popover-header">\n\t\t\t<div qva-activate="goBack($event);">\n\t\t\t\t<i class="object-add-popover-back-icon  lui-icon  lui-icon--triangle-left"></i>\n\t\t\t\t<span q-translation="Visualization.Requirements.Back"></span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="object-add-popover-content">\n\t\t\t<div class="object-add-popover-list-header" q-translation="Visualization.Requirements.Aggregation"></div>\n\t\t\t<ul class="lui-list">\n\t\t\t\t<li class="lui-list__item lui-list__action" ng-repeat="suggestion in fieldSuggestions" qva-activate="addFromField(suggestion)" tid="from-field-item">\n\t\t\t\t\t<span class="lui-list__text lui-list__text--ellipsis" title="{{suggestion.aggregation}}({{suggestion.field}})">{{suggestion.aggregation}}({{suggestion.field}})</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</lui-popover>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(272),n(231),n(147)],r=function(e,t,n,i){function r(){this.measureTitles={}}r.prototype.getDimensionTitle=o;r.prototype.getMeasureTitle=a;r.prototype.resetTitles=s;return r;function o(e,i,r){if(!e)return"";if(e.qError&&!t.isCalcCondNotCalculatedErr(e.qError))return n.getDimensionError(e.qError.qErrorCode);var o=i.qLibraryId,a="H"===e.qGrouping;return a||o&&r?e.title||"":!o&&r?i.qDef.qLabelExpression||e.qFallbackTitle||"":e.qFallbackTitle||""}function a(e,t,n,i){var r=l(e,this.measureTitles);if(r)return r.promise;r=c(e,this.measureTitles);r.promise=u(e,t,n,i);return r.promise}function s(){this.measureTitles={}}function l(e,t){var n=d(e);return t[n]}function c(e,t){var n=d(e);var i={id:n,promise:null};t[n]=i;return i}function u(t,r,o,a){if(!t)return e.when("");var s=r.qLibraryId;if(t.qError)return e.when(n.getMeasureError(t.qError.qErrorCode));if(s&&o){if(!a)throw new Error("TitleRetriever: Argument 'app' is required");return i.get(s,a).then(function(e){return e.getProperties()}).then(function(e){return e.qMeasure.qLabel||""})}return!s&&o?e.when(r.qDef.qLabelExpression||t.qFallbackTitle||""):e.when(t.qFallbackTitle||"")}function d(e){return e&&e.cId}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div qv-errorhandler class="object-error" ng-class="error.class" tid="object.Error">\n\t<div class="object-error-content">\n\t\t<div class="object-error-title">\n\t\t\t<span>{{error.title}}</span>\n\t\t\t<i class="object-error-more lui-icon lui-icon--info lui-icon--large" ng-click="showMore($event)"></i>\n\t\t</div>\n\t\t<div ng-if="error.message" class="object-error-message">{{error.message}}</div>\n\t</div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(281)],r=function(e){function t(e,t,n){return e?t&&!n:!n}function n(e){var t=new Array(e),n;for(n=0;n<e;++n)t[n]={index:n};return t}function i(t,n){if(t.layers&&t.layers[0]){var i=t.layers[0],r=i.qHyperCube.qDimensionInfo;return"point"===i.type?r[1].qError&&r[1].qError.qErrorCode?[r[1]]:[r[0]]:t.layers[0].qHyperCube.qDimensionInfo||[]}var o=e.getHyperCube(t,n);if(o)return o.qDimensionInfo||[];if(t.qChildList){var a=t.qChildList.qItems||[];return a.map(function(){return{}})}return t.qListObject&&t.qListObject.qDimensionInfo?[t.qListObject.qDimensionInfo]:[]}function r(t,n){var i=e.getHyperCube(t,n);return i&&i.qMeasureInfo||[]}function o(e,t){var n=e.ext.dimensionDefinition?e.ext.dimensionDefinition.min:0,o=e.ext.dimensionDefinition?e.ext.dimensionDefinition.max:0,a=e.ext.measureDefinition?e.ext.measureDefinition.min:0,s=e.ext.measureDefinition?e.ext.measureDefinition.max:0;var l=i(t,e.hyperCubePath),c=r(t,e.hyperCubePath);e.minDimensions="function"===typeof n?n.call(null,c.length):n;e.minMeasures="function"===typeof a?a.call(null,l.length):a;e.maxDimensions="function"===typeof o?o.call(null,c.length):o;e.maxMeasures="function"===typeof s?s.call(null,l.length):s}return{updateShowAdd:t,getArray:n,getDimensionInfo:i,getMeasureInfo:r,updateMinMax:o}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(95)],r=function(e){function t(t){t=t||{};e.publish("/ui/object/resize",t)}["/resize/end","/ui/panel/toggle","/ui/grid/cellswap","/ui/grid/cellresize","/ui/grid/cellsplitting","/ui/grid/zoom/activated","/ui/grid/zoom/deactivated"].forEach(function(n){e.subscribe(n,t)})}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(1022)],r=function(e,t){e.directive("qvThrobber",["$timeout",function(e){return{replace:true,template:t,restrict:"E",scope:{model:"=",progress:"=",delay:"=",disabled:"="},link:function t(n){var i;n.$watch("model.isValidating",function(t){if(true===n.disabled){n.progress=false;return}if(n.model&&void 0===n.model.state)n.progress=true;else if(t){i&&e.cancel(i);i=e(function(){n.model&&n.model.isValidating&&(n.progress=true)},n.delay||1e3)}else n.progress=false})}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div ng-show="progress" class="qv-animate progress ng-hide">\n\t<div class="progress-loader" style="width:20%;height:20%;position:absolute;top:40%;left:40%"></div>\n</div>\n'},function(e,t){e.exports='<div class="rain progress" ng-class="{\'qv-fade-out\': fadeOut}">\n\t<div class="rain-image-container" ng-if="isLoadingCardImageFlag"></div>\n\n\t<div ng-if="!isLoadingCardImageFlag" class="rain-progress" ng-style="rainStyle" aria-label="{{objectSRloading}}">\n\t\t<div class="progress-div rotating" ng-class="ngClasses">\n\t</div>\n\n\t<div class="qv-loader-text" ng-if="messageObj" ng-class="ngClasses">\n\t\t<div ng-show="messageObj.task" q-translation="{{messageObj.task}}"></div>\n\t\t<div ng-show="messageObj.message" q-translation="{{messageObj.message}}"></div>\n\t</div>\n</div>\n'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(1025),n(1026)],r=function(e,t){e.directive("qvaNavMenu",[function(){return{template:t,replace:true,scope:{menu:"=",options:"="},controller:["$scope","$element",function(e,t){e.menu.getSize=function(){var n=t[0].getBoundingClientRect();return{width:e.menu.visible?n.width:0,height:e.menu.visible?n.height:0}}}]}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div qva-direction x-dir-setting="{{options.direction}}" class="qv-object-nav" aria-hidden="true" ng-style="styles.backgroundColor" ng-class="{\'zero-top\' : options.isZoomed, \'visible\' : menu.visible, \'active\': options.isActive, \'inline\' : options.thinHeader}">\n  <qva-nav-menu-item ng-repeat="menuItem in menu.items | orderBy:\'+\':true" model="menuItem"></qva-nav-menu-item>\t\n</div>'},function(e,t,n){"use strict";var i,r;!(i=[n(48),n(1027)],r=function(e,t){e.directive("qvaNavMenuItem",[function(){return{template:t,replace:true,scope:{model:"="},link:function e(t,n){t.model.mounted&&t.model.mounted(n)}}}])}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<a\n  ng-show="model.isVisible()"\n  ng-class="[model.cssClasses, model.dynamicCssClasses()]"\n  qva-activate="model.action($event)"\n  q-title-translation="{{model.translation}}"\n  tid="{{model.tid}}">\n</a>'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e){e.exports={_variables:{"@B20":"#333333","@B35":"#595959","@B45":"#737373","@B50":"#808080","@B60":"#999999","@B80":"#cccccc","@B90":"#e6e6e6","@B98":"#fbfbfb","@B100":"#ffffff","@H1":"24px","@H2":"18px","@H3":"14px","@H4":"13px","@H5":"12px","@H6":"10px"},color:"@B35",fontSize:"13px",backgroundColor:"transparent",object:{line:{highContrast:{color:"@B60"},major:{color:"@B80"},minor:{color:"@B90"}},title:{main:{color:"@B50",fontSize:"15px"},subTitle:{color:"@B50",fontSize:"12px"},footer:{color:"@B50",fontSize:"12px",backgroundColor:"transparent"}},label:{name:{color:"@B20",fontSize:"13px"},value:{color:"@B20",fontSize:"13px"}},axis:{title:{fontSize:"12px",color:"@B20"},label:{name:{color:"@B35",fontSize:"12px"}},line:{major:{color:"@B80"},minor:{color:"@B90"}}},grid:{line:{highContrast:{color:"@B60"},major:{color:"@B80"},minor:{color:"@B90"}}},referenceLine:{label:{name:{color:"@B20",fontSize:"12px"}},outOfBounds:{color:"@B90",backgroundColor:"@B45",fontSize:"@H6"}},legend:{title:{fontSize:"15px",color:"@B20"},label:{fontSize:"13px",color:"@B35"}},barChart:{outOfRange:{color:"@B60"},label:{value:{color:"@B35",fontSize:"11px"}}},gauge:{label:{value:{color:"@B20",fontSize:"42px"}}},treemap:{branch:{backgroundColor:".alpha(5)",label:{color:".inherit()",fontSize:"14px"}},leaf:{label:{fontSize:"12px"}}},scatterPlot:{label:{value:{color:"@B35",fontSize:"12px"}}},lineChart:{outOfRange:{color:"@B60"},label:{value:{color:"@B35",fontSize:"12px"}}},pieChart:{axis:{title:{fontSize:"12px"}},label:{name:{color:"@B20",fontSize:"14px"},value:{fontSize:"12px"}}},straightTable:{header:{fontSize:"@H4",color:"@B35"},content:{fontSize:"@H4",color:"@B35"}},listBox:{title:{main:{color:"@B35",fontSize:"13px"}},content:{color:"@B35",fontSize:"12px"}},boxPlot:{box:{whisker:{stroke:"@B35"},line:{stroke:"@B35"},box:{fill:"@B90",stroke:"@B35"}}},distributionPlot:{box:{fill:"@B90"}},histogram:{label:{value:{color:"@B35",fontSize:"12px"}}},waterfallChart:{label:{value:{color:"@B35",fontSize:"12px"}},value:{color:{default:"@B35",dark:"@B35",light:"@B90"}},shape:{positiveValue:{fill:"#4477AA"},negativeValue:{fill:"#cc6677"},subtotal:{fill:"#c3c3c3"},bridge:{stroke:"@B50"}}},mapChart:{label:{value:{color:"@B35",fontSize:"12px"}}}},dataColors:{primaryColor:"#4477aa",othersColor:"#a5a5a5",errorColor:"#ff4444",nullColor:"#d2d2d2"},palettes:{data:[{name:"12 Colors",translation:"properties.colorNumberOfColors.12",propertyValue:"12",type:"pyramid",scale:[["#4477aa"],["#4477aa","#cc6677"],["#4477aa","#ddcc77","#cc6677"],["#4477aa","#117733","#ddcc77","#cc6677"],["#332288","#88ccee","#117733","#ddcc77","#cc6677"],["#332288","#88ccee","#117733","#ddcc77","#cc6677","#aa4499"],["#332288","#44aa99","#88ccee","#117733","#ddcc77","#cc6677","#aa4499"],["#332288","#44aa99","#88ccee","#117733","#999933","#ddcc77","#cc6677","#aa4499"],["#332288","#44aa99","#88ccee","#117733","#999933","#ddcc77","#cc6677","#882255","#aa4499"],["#332288","#44aa99","#88ccee","#117733","#999933","#ddcc77","#661100","#cc6677","#882255","#aa4499"],["#332288","#6699cc","#44aa99","#88ccee","#117733","#999933","#ddcc77","#661100","#cc6677","#882255","#aa4499"],["#332288","#6699cc","#88ccee","#44aa99","#117733","#999933","#ddcc77","#661100","#cc6677","#aa4466","#882255","#aa4499"]]},{name:"100 Colors",translation:"properties.colorNumberOfColors.100",propertyValue:"100",type:"row",scale:["#99c867","#e43cd0","#e2402a","#66a8db","#3f1a20","#e5aa87","#3c6b59","#aa2a6b","#e9b02e","#7864dd","#65e93c","#5ce4ba","#d0e0da","#d796dd","#64487b","#e4e72b","#6f7330","#932834","#ae6c7d","#986717","#e3cb70","#408c1d","#dd325f","#533d1c","#2a3c54","#db7127","#72e3e2","#e2c1da","#d47555","#7d7f81","#54ae9b","#e9daa6","#3a8855","#5be66e","#ab39a4","#a6e332","#6c469d","#e39e51","#4f1c42","#273c1c","#aa972e","#8bb32a","#bdeca5","#63ec9b","#9c3519","#aaa484","#72256d","#4d749f","#9884df","#e590b8","#44b62b","#ad5792","#c65dea","#e670ca","#e38783","#29312d","#6a2c1e","#d7b1aa","#b1e7c3","#cdc134","#9ee764","#56b8ce","#2c6323","#65464a","#b1cfea","#3c7481","#3a4e96","#6493e1","#db5656","#747259","#bbabe4","#e33f92","#d0607d","#759f79","#9d6b5e","#8574ae","#7e304c","#ad8fac","#4b77de","#647e17","#b9c379","#8da8b0","#b972d9","#786279","#7ec07d","#916436","#2d274f","#dce680","#759748","#dae65a","#459c49","#b7934a","#51c671","#9ead3f","#969a5c","#b9976a","#46531a","#c0f084","#76c146","#bad0ad"]}],ui:[{name:"Palette",colors:["#ffffff","#46c646","#276e27","#b6d7ea","#7db8da","#4477aa","#8e477d","#ffcf02","#f8981d","#f93f17","#633d0c","#b0afae","#7b7a78","#545352","#000000"]}]},scales:[{name:"Sequential Gradient",translation:"properties.colorScheme.sequential",type:"gradient",propertyValue:"sg",scale:["#662506","#993404","#cc4c02","#ec7014","#fb9a29","#fec44f","#fee391","#fff7bc"]},{name:"Sequential Classes",translation:"properties.colorScheme.sequentialC",propertyValue:"sc",type:"class",scale:["#662506","#993404","#cc4c02","#ec7014","#fb9a29","#fec44f","#fee391"]},{name:"Diverging gradient",translation:"properties.colorScheme.diverging",propertyValue:"dg",type:"gradient",scale:["#ae1c3e","#d24d3e","#ed875e","#f9bd7e","#e6f5fe","#b4ddf7","#77b7e5","#3a89c9","#3d52a1"]},{name:"Diverging Classes",translation:"properties.colorScheme.divergingC",propertyValue:"dc",type:"class",scale:["#ae1c3e","#d24d3e","#ed875e","#f9bd7e","#ffe3aa","#e6f5fe","#b4ddf7","#77b7e5","#3a89c9","#3d52a1"]}]}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e){e.exports={id:"qlik-dashboard-bundle",name:"Qlik dashboard bundle",description:"N/A",eula:"generic",content:[{id:"qlik-show-hide-container",name:"Show/hide container",version:"2.5.0",dependencies:{"qlik-sense":">=5.5.x"}},{id:"qlik-variable-input",name:"Variable input",version:"6.3.0",dependencies:{"qlik-sense":">=5.5.x"}},{id:"qlik-button-for-navigation",name:"Button for navigation",version:"2.3.0",dependencies:{"qlik-sense":">=5.5.x"}},{id:"qlik-date-picker",name:"Date picker",version:"2.3.0",dependencies:{"qlik-sense":">=5.5.x"}},{id:"qlik-tabbed-container",name:"Tabbed container",version:"3.5.0",dependencies:{"qlik-sense":">=5.5.x"}},{id:"qlik-on-demand-reporting",name:"On demand reporting",version:"2.3.0",dependencies:{"qlik-sense":">=5.5.x"}},{id:"qlik-share-button",name:"Share button",version:"0.23.0",dependencies:{"qlik-sense":">=5.5.x"}}]}},function(e){e.exports={content:[{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-multi-kpi",name:"Multi KPI",source:{repo:"qsSimpleKPI",service:"github",user:"qlik-oss"},version:"0.79.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-heatmap-chart",name:"Heatmap chart",source:{repo:"QlikSense_Extension_2DimHeatmap",service:"github",user:"qlik-oss"},version:"0.53.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-word-cloud",name:"Word cloud chart",source:{repo:"br.com.clever.wordcloud",service:"github",user:"qlik-oss"},version:"0.28.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-network-chart",name:"Network chart",source:{repo:"network-vis-chart",service:"github",user:"qlik-oss"},version:"0.25.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-radar-chart",name:"Radar chart",source:{repo:"D3ImprovedRadarChart",service:"github",user:"qlik-oss"},version:"0.33.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-barplus-chart",name:"Bar plus chart",source:{repo:"barsPlus",service:"github",user:"qlik-oss"},version:"0.56.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-bullet-chart",name:"Bullet chart",source:{repo:"D3-Bullet-Chart",service:"github",user:"qlik-oss"},version:"0.22.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-smart-pivot",name:"Smart pivot",source:{repo:"PLSmartPivot",service:"github",user:"qlik-oss"},version:"0.50.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-trellis-container",name:"Trellis container",source:{repo:"qwik-trellis",service:"github",user:"qlik-oss"},version:"0.14.0"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-sankey-chart-ext",name:"Sankey chart",source:{path:"@qlik/sankey-chart-ext/dist",service:"npm"},version:"0.7.4"},{dependencies:{"qlik-sense":">=5.5.x"},id:"qlik-funnel-chart-ext",name:"Funnel chart",source:{path:"@qlik/funnel-chart-ext/dist",service:"npm"},version:"0.7.8"}],description:"This is a set of supported extensions that expands the visualization capabilities of Qlik Sense. These can be used in addition to the native objects found under 'Charts'. For support conditions and limitations, see the documentation.",eula:"generic",id:"qlik-visualization-bundle",name:"Qlik Visualization bundle"}},function(e,t,n){(function(e){true;e(n(190))})(function(e){var t=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8);var n=e.Pos;var i={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function r(e,t,r,a){var s=e.getLineHandle(t.line),l=t.ch-1;var c=l>=0&&i[s.text.charAt(l)]||i[s.text.charAt(++l)];if(!c)return null;var u=">"==c.charAt(1)?1:-1;if(r&&u>0!=(l==t.ch))return null;var d=e.getTokenTypeAt(n(t.line,l+1));var f=o(e,n(t.line,l+(u>0?1:0)),u,d||null,a);if(null==f)return null;return{from:n(t.line,l),to:f&&f.pos,match:f&&f.ch==c.charAt(0),forward:u>0}}function o(e,t,r,o,a){var s=a&&a.maxScanLineLength||1e4;var l=a&&a.maxScanLines||1e3;var c=[];var u=a&&a.bracketRegex?a.bracketRegex:/[(){}[\]]/;var d=r>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l);for(var f=t.line;f!=d;f+=r){var p=e.getLine(f);if(!p)continue;var h=r>0?0:p.length-1,v=r>0?p.length:-1;if(p.length>s)continue;f==t.line&&(h=t.ch-(r<0?1:0));for(;h!=v;h+=r){var g=p.charAt(h);if(u.test(g)&&(void 0===o||e.getTokenTypeAt(n(f,h+1))==o)){var m=i[g];if(">"==m.charAt(1)==r>0)c.push(g);else{if(!c.length)return{pos:n(f,h),ch:g};c.pop()}}}}return f-r!=(r>0?e.lastLine():e.firstLine())&&null}function a(e,i,o){var a=e.state.matchBrackets.maxHighlightLineLength||1e3;var s=[],l=e.listSelections();for(var c=0;c<l.length;c++){var u=l[c].empty()&&r(e,l[c].head,false,o);if(u&&e.getLine(u.from.line).length<=a){var d=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";s.push(e.markText(u.from,n(u.from.line,u.from.ch+1),{className:d}));u.to&&e.getLine(u.to.line).length<=a&&s.push(e.markText(u.to,n(u.to.line,u.to.ch+1),{className:d}))}}if(s.length){t&&e.state.focused&&e.focus();var f=function(){e.operation(function(){for(var e=0;e<s.length;e++)s[e].clear()})};if(!i)return f;setTimeout(f,800)}}var s=null;function l(e){e.operation(function(){if(s){s();s=null}s=a(e,false,e.state.matchBrackets)})}e.defineOption("matchBrackets",false,function(t,n,i){i&&i!=e.Init&&t.off("cursorActivity",l);if(n){t.state.matchBrackets="object"==typeof n?n:{};t.on("cursorActivity",l)}});e.defineExtension("matchBrackets",function(){a(this,true)});e.defineExtension("findMatchingBracket",function(e,t,n){return r(this,e,t,n)});e.defineExtension("scanForBracket",function(e,t,n,i){return o(this,e,t,n,i)})})},function(e,t,n){(function(e){true;e(n(190))})(function(e){"use strict";var t={};var n=/[^\s\u00a0]/;var i=e.Pos;function r(e){var t=e.search(n);return-1==t?0:t}e.commands.toggleComment=function(e){e.toggleComment()};e.defineExtension("toggleComment",function(e){e||(e=t);var n=this;var r=Infinity,o=this.listSelections(),a=null;for(var s=o.length-1;s>=0;s--){var l=o[s].from(),c=o[s].to();if(l.line>=r)continue;c.line>=r&&(c=i(r,0));r=l.line;if(null==a)if(n.uncomment(l,c,e))a="un";else{n.lineComment(l,c,e);a="line"}else"un"==a?n.uncomment(l,c,e):n.lineComment(l,c,e)}});e.defineExtension("lineComment",function(e,o,a){a||(a=t);var s=this,l=s.getModeAt(e);var c=a.lineComment||l.lineComment;if(!c){if(a.blockCommentStart||l.blockCommentStart){a.fullLines=true;s.blockComment(e,o,a)}return}var u=s.getLine(e.line);if(null==u)return;var d=Math.min(0!=o.ch||o.line==e.line?o.line+1:o.line,s.lastLine()+1);var f=null==a.padding?" ":a.padding;var p=a.commentBlankLines||e.line==o.line;s.operation(function(){if(a.indent){var t=null;for(var o=e.line;o<d;++o){var l=s.getLine(o);var u=l.slice(0,r(l));(null==t||t.length>u.length)&&(t=u)}for(var o=e.line;o<d;++o){var l=s.getLine(o),h=t.length;if(!p&&!n.test(l))continue;l.slice(0,h)!=t&&(h=r(l));s.replaceRange(t+c+f,i(o,0),i(o,h))}}else for(var o=e.line;o<d;++o)(p||n.test(s.getLine(o)))&&s.replaceRange(c+f,i(o,0))})});e.defineExtension("blockComment",function(e,r,o){o||(o=t);var a=this,s=a.getModeAt(e);var l=o.blockCommentStart||s.blockCommentStart;var c=o.blockCommentEnd||s.blockCommentEnd;if(!l||!c){(o.lineComment||s.lineComment)&&false!=o.fullLines&&a.lineComment(e,r,o);return}var u=Math.min(r.line,a.lastLine());u!=e.line&&0==r.ch&&n.test(a.getLine(u))&&--u;var d=null==o.padding?" ":o.padding;if(e.line>u)return;a.operation(function(){if(false!=o.fullLines){var t=n.test(a.getLine(u));a.replaceRange(d+c,i(u));a.replaceRange(l+d,i(e.line,0));var f=o.blockCommentLead||s.blockCommentLead;if(null!=f)for(var p=e.line+1;p<=u;++p)(p!=u||t)&&a.replaceRange(f+d,i(p,0))}else{a.replaceRange(c,r);a.replaceRange(l,e)}})});e.defineExtension("uncomment",function(e,r,o){o||(o=t);var a=this,s=a.getModeAt(e);var l=Math.min(0!=r.ch||r.line==e.line?r.line:r.line-1,a.lastLine()),c=Math.min(e.line,l);var u=o.lineComment||s.lineComment,d=[];var f=null==o.padding?" ":o.padding,p;e:{if(!u)break e;for(var h=c;h<=l;++h){var v=a.getLine(h);var g=v.indexOf(u);g>-1&&!/comment/.test(a.getTokenTypeAt(i(h,g+1)))&&(g=-1);if(-1==g&&(h!=l||h==c)&&n.test(v))break e;if(g>-1&&n.test(v.slice(0,g)))break e;d.push(v)}a.operation(function(){for(var e=c;e<=l;++e){var t=d[e-c];var n=t.indexOf(u),r=n+u.length;if(n<0)continue;t.slice(r,r+f.length)==f&&(r+=f.length);p=true;a.replaceRange("",i(e,n),i(e,r))}});if(p)return true}var m=o.blockCommentStart||s.blockCommentStart;var b=o.blockCommentEnd||s.blockCommentEnd;if(!m||!b)return false;var y=o.blockCommentLead||s.blockCommentLead;var x=a.getLine(c),S=l==c?x:a.getLine(l);var w=x.indexOf(m),q=S.lastIndexOf(b);if(-1==q&&c!=l){S=a.getLine(--l);q=S.lastIndexOf(b)}if(-1==w||-1==q||!/comment/.test(a.getTokenTypeAt(i(c,w+1)))||!/comment/.test(a.getTokenTypeAt(i(l,q+1))))return false;var C=x.lastIndexOf(m,e.ch);var _=-1==C?-1:x.slice(0,e.ch).indexOf(b,C+m.length);if(-1!=C&&-1!=_&&_+b.length!=e.ch)return false;_=S.indexOf(b,r.ch);var I=S.slice(r.ch).lastIndexOf(m,_-r.ch);C=-1==_||-1==I?-1:r.ch+I;if(-1!=_&&-1!=C&&C!=r.ch)return false;a.operation(function(){a.replaceRange("",i(l,q-(f&&S.slice(q-f.length,q)==f?f.length:0)),i(l,q+b.length));var e=w+m.length;f&&x.slice(e,e+f.length)==f&&(e+=f.length);a.replaceRange("",i(c,w),i(c,e));if(y)for(var t=c+1;t<=l;++t){var r=a.getLine(t),o=r.indexOf(y);if(-1==o||n.test(r.slice(0,o)))continue;var s=o+y.length;f&&r.slice(s,s+f.length)==f&&(s+=f.length);a.replaceRange("",i(t,o),i(t,s))}});return true})})},function(e,t,n){"use strict";var i,r;!(i=[n(89),n(97)],r=function(e,t){var n={template:null,controller:["$scope","$element","$timeout",function(n,i,r){var o=this;o.selectionsActivated=function(){};o.selectionsDeactivated=function(){};o.close=function(){a()};function a(){r(function(){n.destroyComponent();i.remove()});t.off("start.listbox-popover-error",a)}function s(){return r(function(){return i.find(".toolbar-wrapper").outerWidth()})}n.closeView=function(e){n.onPopoverClose(e);a()};e.all({object:n.getVisualization(),width:s()}).then(function(e){var i=e.object,r=e.width;i.getSelectionToolbar().then(function(e){n.toolbar=e;n.toolbar.showLock=n.options.showLock;n.toolbar.position={width:r};i.activateSelections()});i.loaded.then(function(){i.ext.hasError(i)&&t.on("start.listbox-popover-error",a)});i.selectionsApi.watchActivated(function(){o.selectionsActivated()});i.selectionsApi.watchDeactivated(function(){o.selectionsDeactivated();a()});n.closeView=function(e){i.selectionsApi.confirm();n.onPopoverClose(e);a()}})}]};return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t){e.exports='<div\n\tclass="qv-listbox-popover-small-device">\n\t<div class="toolbar-wrapper"\n\t\tqva-include-selection-toolbar\n\t\tcomponent="selectionToolbarComponent"\n\t\ttoolbar="toolbar"\n\t\toptions="options">\n\t</div>\n\t<h1 qva-direction x-dir-setting="{{options.direction}}" x-dir-text="{{model.layout.title || model.layout.qListObject.qDimensionInfo.qFallbackTitle}}" class="qvt-visualization-title">{{model.layout.title || model.layout.qListObject.qDimensionInfo.qFallbackTitle}}</h1>\n\t<div class="listbox-wrapper">\n\t\t<qv-object object="object" model="model" options="options"></qv-object>\n\t</div>\n</div>\n'},,function(e,t,n){"use strict";var i,r;!(i=[n(379),n(89)],r=function(e,t){function n(){return e.get().then(function(e){return e.getRestService()})}function i(e){return e}function r(e){if(e.stats.dims>9||e.stats.msrs>9)return t.resolve([]);var r={exploreSupplemental:["appNMinExplore"]};return n().then(function(t){return t.getVisRecommendations(e,true,r,[]).then(function(t){var n=[];var i=e.stats;t.appRecommendations.forEach(function(e){o(e)&&e.recAnalyses.forEach(function(e){a(e,i)&&n.push(e)})});return n})}).catch(i)}function o(e){return e&&e.group&&"insight"!==e.group}function a(e,t){if(e.isExtendedAnalysis)return false;var n=e.analysis.dims||[];var i=e.analysis.msrs||[];return n.length===t.dims&&i.length===t.msrs}function s(e){function t(e){if(e.isLibraryItem())return{libId:e.libId,cType:"eLibItem"};if(e.isFieldItem())return{field:e.name,expr:e.expr,cType:"eField"};return{expr:e.expr,cType:"eInlineExpr"}}var n={analysis:{analysis:"list",dims:e.dimensions.map(t),msrs:e.measures.map(t)}};return n}return{getChartRecommendations:r,getFallbackRecommendation:s}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;function o(e){o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return o(e)}!(i=[n(54),n(878),n(1113),n(90),n(186)],r=function(e,t,n,i,r){var a={createChartDataProperties:s,findPossibleCharts:u,findChartsByAnalysis:f};return a;function s(e,t){var n=e.analysis.dims||[];var i=e.analysis.msrs||[];function r(e,t){var n=-1;e.some(function(e,i){if(e.mapLayer&&e.mapLayer===t){n=i;return true}return false});return n}function o(e,t){var o,a;var s={};if(void 0!==t.index){o=t.index;a=t.index}else if(void 0!==t.indexRange){o=t.indexRange.start;a=t.indexRange.end}else if("area"===t.key){var l=r(n,"geo_poly");if(l>-1){o=l;a=l;var c=n[l];c.relatedGeoDim&&(s.mapProperties=c.relatedGeoDim)}}else if("points"===t.key){var u=r(n,"geo_point");if(u>-1){o=u;a=u;var f=n[u];f.relatedGeoDim&&(s.mapProperties=f.relatedGeoDim)}}else{o=-1;a=-1}for(var p=o;p<=a;p++){var h=d(t.key,t.classification,t.adapt,p,n,i,s);h&&e.push(h)}return e}var a=[];t.forEach(function(e){var t={type:e.chartType,score:e.score,encodings:e.analysis.encodings.reduce(o,[]),adapt:e.adapt};a.push(t)});return a}function l(e,t,n,i,r){for(var a in e){var s=e[a];if("object"==o(s)&&null!==s){var c=s.classification;if(c){var u=Number.isNaN(+s.max)?1:s.max,d=s.min||0;if(-1!==c.indexOf("measure")){s.pseudoDim&&u>1&&t.unallocated>1&&n.unallocated++;u>1?s.indexRange={start:t.capacity,end:t.capacity+u-1}:s.index=t.capacity;t.unallocated=t.unallocated-u;t.capacity+=u;t.required+=d;i.push(s)}if(-1!==c.indexOf("dimension")&&"color"!==s.key){var f=-1!==c.indexOf("numeric"),p=false;r.dimensions.length&&(p="N"===r.dimensions[0].qDimensionType);if(!f||f&&p){u>1?s.indexRange={start:n.capacity,end:n.capacity+u-1}:s.index=n.capacity;n.unallocated=n.unallocated-u;n.capacity+=u;n.required+=d;i.push(s)}}}l(s,t,n,i,r)}}}function c(e){e=e||[];var t=e.map(function(e){if(!e.qGroupFieldDefs&&e.libId)return e.libId;var t=e.qGroupFieldDefs||[];return t.map(function(e){return r.normalizeExpression(e)}).join(",")});return i.getUnique(t).length!==t.length}function u(e,n){var i=[];e.forEach(function(e){var r=[],o=t.getChartDataDefinition(e);if(o.encodings){var a={length:n.measures?n.measures.length:0,capacity:0,required:0,unallocated:n.measures?n.measures.length:null,isSupported:function e(){return this.unallocated<1&&this.capacity>=this.length&&this.required<=this.length}},s={length:n.dimensions?n.dimensions.length:0,capacity:0,required:0,unallocated:n.dimensions?n.dimensions.length:null,isSupported:function e(){var t=o.supportsDuplicateDimensions||!c(n.dimensions);return this.unallocated<1&&this.capacity>=this.length&&this.required<=this.length&&t}};l(o.encodings,a,s,r,n);if(a.isSupported()&&s.isSupported()){var u={chartType:e,score:-1,analysis:{encodings:r}};i.push(u)}}});return i}function d(e,t,i,r,o,a,s){var l=-1!==t.indexOf("dimension");var c=l?o:a;if(c.length<=r)return;var u=new n.Value(c[r]);var d=new n.Encoding(e,t,u,i,s);return d}function f(e,n){var i=[];var r=e.analysis;t.getSupportedChartTypes().forEach(function(e){var o=t.getChartDataDefinition(e);if(o.analyses){var a=o.analyses.filter(function(e){if(e.analysis!==r.analysis)return false;if(!p(r.dims,e.dimensions))return false;if(!p(r.msrs,e.measures))return false;if(e.criteria&&!e.criteria(n))return false;var t=o.supportsDuplicateDimensions||!c(n.dimensions);if(!t)return false;return true});a.forEach(function(t){var n={chartType:e,encodings:o.encodings,score:t.score||0,adapt:t.adapt,analysis:t};i.push(n)})}});return i}function p(t,n){if(e.isObject(n)){if(h(t?t.length:0,n.min,n.max))return true}else if(h(t?t.length:0,n,n))return true;return false}function h(e,t,n){return e>=t&&e<=n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(49)],r=function(e){var t={type:"barchart",supportsDuplicateDimensions:true,encodings:[{key:"bars",classification:"dimension",path:"qHyperCubeDef.qDimensions.0.qDef.qFieldDefs.0",min:e.getFlag("BARCHART")?0:1,encodings:[{key:"height",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",pseudoDim:true,min:1,max:15},{key:"groupStack",classification:"dimension",path:"qHyperCubeDef.qDimensions.$dimensionIndex.qDef.qFieldDefs.0"},{key:"color",classification:"dimension",path:"qHyperCubeDef.qDimensions.0.qDef.qAttrDims.0"}]}],analyses:[{analysis:"rank",dimensions:1,measures:1,score:5,encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"height",classification:"measure",index:"0"}]},{analysis:"timeCycle",dimensions:1,measures:2,encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"height",classification:"measure",indexRange:{start:0,end:1}}]},{analysis:"trend",dimensions:1,measures:1,score:101,criteria:function e(t){var n=t.getMetaDataForDimension(0);if(n)return n.qCardinal&&n.qCardinal<5&&n.qCardinal>1;return false},encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"height",classification:"measure",index:"0"}]},{analysis:"ytdAnalysis",dimensions:2,measures:1,encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"group",classification:"dimension",index:"1"},{key:"height",classification:"measure",indexRange:{start:0,end:1}}],adapt:function e(t){t.qHyperCubeDef.qDimensions[1].qNullSuppression=true}},{analysis:"countBasedRank",dimensions:1,measures:1,encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"height",classification:"measure",index:"0"}]},{analysis:"breakdown",dimensions:1,measures:{min:2,max:15},encodings:[{key:"bars",classification:"dimension",index:"0"},{key:"height",classification:"measure",indexRange:{start:0,end:14}}]},{analysis:"breakdown",dimensions:2,measures:1,criteria:function e(t){var n=t.getMetaDataForDimension(0);if(n)return n.qCardinal&&n.qCardinal<13&&t.isPerfectHierarchy();return false},encodings:[{key:"bars",classification:"dimension",index:"1"},{key:"color",classification:"dimension",index:"0"},{key:"height",classification:"measure",index:"0"}]},{analysis:"breakdown",dimensions:2,measures:1,criteria:function e(t){return t.isPerfectHierarchy()},encodings:[{key:"bars",classification:"dimension",index:"1"},{key:"group",classification:"dimension",index:"0"},{key:"height",classification:"measure",index:"0"}]}]};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={type:"kpi",supportsDuplicateDimensions:true,encodings:[{key:"values",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",classification:"measure",min:1,max:2}],analyses:[{analysis:"list",dimensions:0,measures:{min:1,max:1},score:10,encodings:[{key:"values",classification:"measure",index:0}]},{analysis:"fact",dimensions:0,measures:{min:1,max:2},score:15,encodings:[{key:"values",classification:"measure",indexRange:{start:0,end:1}}]}]};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){var t={type:"gauge",supportsDuplicateDimensions:true,encodings:[{key:"values",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",classification:"measure",min:1}],analyses:[{analysis:"fact",dimensions:0,measures:1,criteria:function e(t){var n=t.getMetaDataForMeasure(0);if(n){if(!t.hasOwnProperty("intermediateHyperCube")||t.intermediateHyperCube)return n.qMin>0&&n.qMax<1;if(n.classification&&"percentage"===n.classification)return true}return false},score:20,encodings:[{key:"values",classification:"measure",index:"0"}],adapt:function t(n){e.setValue(n,"measureAxis.max",1);n.disclaimerClosed=true}}]};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={type:"scatterplot",supportsDuplicateDimensions:true,encodings:[{key:"dots",path:"qHyperCubeDef.qDimensions.0.qDef.qFieldDefs.0",classification:"dimension",min:1,encodings:[{key:"x-axis",classification:"measure",path:"qHyperCubeDef.qMeasures.0.qDef.qDef",min:1},{key:"y-axis",classification:"measure",path:"qHyperCubeDef.qMeasures.1.qDef.qDef",min:1},{key:"size",classification:"measure",path:"qHyperCubeDef.qMeasures.2.qDef.qDef"},{key:"color",classification:"dimension",path:"qHyperCubeDef.qDimensions.0.qDef.qAttrDims.0"},{key:"color",classification:"measure",path:"qHyperCubeDef.qDimensions.0.qAttributeExpressions.0"}]}],analyses:[{analysis:"comparison",dimensions:1,measures:{min:2,max:4},score:10,encodings:[{key:"dots",classification:"dimension",index:"0"},{key:"x-axis",classification:"measure",index:"0"},{key:"y-axis",classification:"measure",index:"1"},{key:"size",classification:"measure",index:"2"},{key:"color",classification:"measure",index:"3"}]},{analysis:"comparison",dimensions:2,measures:{min:2,max:3},criteria:function e(t){return t.isPerfectHierarchy()},score:10,encodings:[{key:"dots",classification:"dimension",index:"1"},{key:"color",classification:"dimension",index:"0"},{key:"x-axis",classification:"measure",index:"0"},{key:"y-axis",classification:"measure",index:"1"},{key:"size",classification:"measure",index:"2"}]}]};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={type:"linechart",supportsDuplicateDimensions:false,encodings:[{key:"linePoints",path:"qHyperCubeDef.qDimensions.0.qDef.qFieldDefs.0",classification:"dimension",min:1,encodings:[{key:"lines",classification:"dimension",path:"qHyperCubeDef.qDimensions.1.qDef.qFieldDefs.0"},{key:"position",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",pseudoDim:true,min:1,max:15}]}],analyses:[{analysis:"trend",dimensions:1,measures:{min:1,max:4},encodings:[{key:"linePoints",classification:"dimension",index:"0"},{key:"position",classification:"measure",indexRange:{start:0,end:3}}]},{analysis:"trend",dimensions:2,measures:1,criteria:function e(t){if(!t.qSize)return false;var n=t.getMetaDataForDimension(1);if(n&&n.qCardinal>12)return false;var i=t.getMetaDataForDimension(0);var r=t.getMetaDataForDimension(1);var o=i.qCardinal*r.qCardinal;return o===t.qSize.qcy},encodings:[{key:"linePoints",classification:"dimension",index:"0"},{key:"lines",classification:"dimension",index:"1"},{key:"position",classification:"measure",index:"0"}],adapt:function e(t){t.lineType="area";t.stackedArea=true}},{analysis:"trend",dimensions:2,measures:1,criteria:function e(t){var n=t.getMetaDataForDimension(1);return n&&n.qCardinal<13},encodings:[{key:"linePoints",classification:"dimension",index:"0"},{key:"lines",classification:"dimension",index:"1"},{key:"position",classification:"measure",index:"0"}]}]};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={type:"table",supportsDuplicateDimensions:true,encodings:[{key:"columns",classification:"dimension",path:"qHyperCubeDef.qDimensions.$dimensionIndex.qDef.qFieldDefs.0",min:0,max:15},{key:"columns",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",max:15}],analyses:[{analysis:"list",dimensions:{min:0,max:15},measures:{min:0,max:15},encodings:[{key:"columns",classification:"dimension",indexRange:{start:0,end:14}},{key:"columns",classification:"measure",indexRange:{start:0,end:14}}]}]};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(49)],r=function(e){var t=e.getFlag("PIE_RADIUS");var n={type:"piechart",supportsDuplicateDimensions:true,encodings:[{key:"slices",path:"qHyperCubeDef.qDimensions.0",classification:"dimension",min:1,encodings:t?[{key:"angle",path:"qHyperCubeDef.qMeasures.0",classification:"measure",min:1},{key:"radius",path:"qHyperCubeDef.qMeasures.1",classification:"measure"}]:[{key:"angle",path:"qHyperCubeDef.qMeasures.0",classification:"measure",min:1},{key:"color",path:"qHyperCubeDef.qDimensions.0.qDef.qAttrDims.0",classification:"dimension"},{key:"color",classification:"measure"}]}],analyses:[{analysis:"rank",dimensions:1,measures:1,score:10,criteria:function e(t){var n=t.getMetaDataForDimension(0);var i=t.getMetaDataForMeasure(0);if(n&&n.qCardinal<13&&i&&i.aggregation&&"sum"===i.aggregation.toLowerCase()&&t.isSummable())return true;return false},encodings:t?[{key:"slices",classification:"dimension",index:"0"},{key:"angle",classification:"measure",index:"0"},{key:"radius",classification:"measure",index:"1"}]:[{key:"slices",classification:"dimension",index:"0"},{key:"color",classification:"dimension",index:"0"},{key:"angle",classification:"measure",index:"0"}]}]};return n}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={type:"combochart",supportsDuplicateDimensions:false,encodings:[{key:"records",classification:"dimension",path:"qHyperCubeDef.qDimensions.0.qDef.qFieldDefs.0",min:1,encodings:[{key:"bars",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef"},{key:"lines",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.series",min:1,max:15}]}],analyses:[{analysis:"trend",dimensions:1,measures:2,score:10,criteria:function e(t){function n(e){return Math.log(e)/Math.LN10}var i=t.getMetaDataForMeasure(0);var r=t.getMetaDataForMeasure(1);var o=Math.floor(n(i.qMax));var a=Math.floor(n(r.qMax));var s=Math.abs(o-a);return s>=1},encodings:[{key:"records",classification:"dimension",index:"0"},{key:"bars",classification:"measure",index:"0"},{key:"lines",classification:"measure",index:"1"}]},{analysis:"contribution",dimensions:1,measures:2,score:20,adapt:function e(t){var n=[{qSortByState:0,qSortByFrequency:0,qSortByNumeric:-1,qSortByAscii:-1,qSortByLoadOrder:-1,qExpression:{qv:t.qHyperCubeDef.qMeasures[0].qDef.qDef},qSortByExpression:-1,qSortByGreyness:0}];var i={qType:"R",qnDec:2,qUseThou:0,qFmt:"#,##0.00%",qDec:".",qThou:","};t.qHyperCubeDef.qDimensions[0].qDef.qSortCriterias=n;t.qHyperCubeDef.qMeasures[1].qDef.qNumFormat=i},encodings:[{key:"records",classification:"dimension",index:"0"},{key:"bars",classification:"measure",index:"0"},{key:"lines",classification:"measure",index:"1"}]}]};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={type:"treemap",supportsDuplicateDimensions:false,encodings:[{key:"blocks",classification:"dimension",path:["qHyperCubeDef.qDimensions.$dimensionIndex.qDef.qFieldDefs.0","qHyperCubeDef.qDimensions.$dimensionIndex.qDef.qFieldLabels.0"],min:1,max:15,encodings:[{key:"color",classification:"dimension",path:"qHyperCubeDef.qDimensions.0.qDef.qAttrDims.0"},{key:"size",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",min:1},{key:"color",classification:"measure",path:"qHyperCubeDef.qDimensions.0.qDef.qAttrExps.0"}]}],analyses:[{analysis:"breakdown",dimensions:{min:2,max:15},measures:{min:1,max:2},criteria:function e(t){var n=t.getMetaDataForDimension(0);if(n&&n.qCardinal>12)return false;if(!t.isPerfectHierarchy())return false;var i=false;var r=t.getMetaDataForMeasure(0);var o=t.getMetaDataForMeasure(1);r&&r.qMin>=0&&(i=!o||o.qMin>=0);return i},score:10,encodings:[{key:"blocks",classification:"dimension",index:"0"},{key:"group",classification:"dimension",indexRange:{start:1,end:14}},{key:"size",classification:"measure",index:"0"},{key:"color",classification:"measure",index:"1"}]},{analysis:"breakdown",dimensions:2,measures:{min:1,max:2},criteria:function e(t){var n=t.getMetaDataForDimension(1);if(n&&n.qCardinal>12)return false;var i=t.getMetaDataForMeasure(0);var r=t.getMetaDataForMeasure(1);if(i&&i.qMin>=0)return!r;return false},encodings:[{key:"blocks",classification:"dimension",index:"1"},{key:"group",classification:"dimension",index:"0"},{key:"size",classification:"measure",index:"0"},{key:"color",classification:"measure",index:"1"}]}]};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){var t={type:"map",supportsDuplicateDimensions:true,encodings:[{key:"point",classification:"dimension",min:1,encodings:[{key:"size",classification:"dimension"},{key:"color",classification:"measure"}]}],analyses:[{analysis:"polymapdistribution",dimensions:1,measures:{min:0,max:1},criteria:function e(){return true},score:100,encodings:[{key:"area",classification:"dimension",index:"0"},{key:"color",classification:"measure",index:"0"}]},{analysis:"pointmapdistribution",dimensions:1,measures:{min:0,max:2},criteria:function e(){return true},score:100,encodings:[{key:"points",classification:"dimension",index:"0"},{key:"custom",classification:"measure",index:"0",adapt:function t(n,i){if(i.isFieldValue()||i.isExpressionValue()){e.setValue(n,"size.expression.key",i.getExpression());e.setValue(n,"size.expression.label",i.getExpression());e.setValue(n,"size.expression.type","expression")}else if(i.isLibraryValue()){e.setValue(n,"size.expression.key",i.getLibraryId());e.setValue(n,"size.expression.label","");e.setValue(n,"size.expression.type","libraryItem")}}},{key:"color",classification:"measure",index:"1"}]},{analysis:"geoAnalysis",dimensions:{min:1,max:2},measures:{min:0,max:2},criteria:function e(){return true},score:100,encodings:[{key:"area",classification:"dimension"},{key:"points",classification:"dimension"},{key:"color",classification:"measure",index:"0"},{key:"custom",classification:"measure",index:"1",adapt:function t(n,i){if(i.isFieldValue()||i.isExpressionValue()){e.setValue(n,"size.expression.key",i.getExpression());e.setValue(n,"size.expression.label",i.getExpression());e.setValue(n,"size.expression.type","expression")}else if(i.isLibraryValue()){e.setValue(n,"size.expression.key",i.getLibraryId());e.setValue(n,"size.expression.label","");e.setValue(n,"size.expression.type","libraryItem")}}}]}]};return t}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={type:"distributionplot",supportsDuplicateDimensions:false,encodings:[{key:"records",classification:"dimension",min:1,encodings:[{key:"bars",classification:"dimension"},{key:"lines",classification:"measure",min:1}]}],analyses:[{analysis:"overview",dimensions:{min:1,max:2},measures:1,criteria:function e(t){var n=false;var i=t.getMetaDataForDimension(0);var r=t.getMetaDataForDimension(1);i&&i.qCardinal<=500&&(r?r&&r.qCardinal<=500&&(n=true):n=true);return n},encodings:[{key:"records",classification:"dimension",index:"1"},{key:"bars",classification:"dimension",index:"0"},{key:"lines",classification:"measure",index:"0"}]}]};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={type:"boxplot",supportsDuplicateDimensions:true,encodings:[{key:"records",classification:"dimension",min:1,encodings:[{key:"bars",classification:"dimension"},{key:"lines",classification:"measure",min:1}]}],analyses:[{analysis:"overview",dimensions:{min:1,max:2},measures:1,criteria:function e(t){var n=false;var i=t.getMetaDataForDimension(0);var r=t.getMetaDataForDimension(1);i&&i.qCardinal>500?n=true:r&&r.qCardinal>500&&(n=true);return n},encodings:[{key:"records",classification:"dimension",index:"1"},{key:"bars",classification:"dimension",index:"0"},{key:"lines",classification:"measure",index:"0"}]}]};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={type:"histogram",supportsDuplicateDimensions:true,encodings:[{key:"values",path:"qHyperCubeDef.qDimensions.0.qDef.qFieldDefs.0",classification:"numeric dimension",min:1}],analyses:[{analysis:"values",dimensions:1,measures:0,criteria:function e(t){var n=t.getMetaDataForDimension(0);if(n&&("integer"===n.dataType||"double"===n.dataType))return true;return false},encodings:[{key:"values",classification:"dimension",index:0}]}]};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){var e={type:"pivot-table",supportsDuplicateDimensions:false,encodings:[{key:"rows",classification:"dimension",path:"qHyperCubeDef.qDimensions.$dimensionIndex.qDef.qFieldDefs.0",min:1,max:15},{key:"values",classification:"measure",path:"qHyperCubeDef.qMeasures.$measureIndex.qDef.qDef",min:1,max:15}],analyses:[{analysis:"rank",dimensions:{min:2,max:15},measures:{min:1,max:15},encodings:[{key:"rows",classification:"dimension",indexRange:{start:0,end:14}},{key:"values",classification:"measure",indexRange:{start:0,end:14}}]}]};return e}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){this.type="eLibItem"===e.cType?"library":"eField"===e.cType?"field":"eInlineExpr"===e.cType?"expression":"unknown";this.expr=e.expr;this.field=e.field;this.libId=e.libId}e.prototype.isLibraryValue=function(){return"library"===this.type};e.prototype.getLibraryId=function(){return this.libId};e.prototype.isFieldValue=function(){return"field"===this.type};e.prototype.getFieldName=function(){return this.field||this.expr};e.prototype.isExpressionValue=function(){return"expression"===this.type};e.prototype.getExpression=function(){return this.expr};function t(e,t,n,i,r){this.key=e;this.classification=t;this.value=n;this.adapt=i;this.optionalObj=r}t.prototype.isMeasure=function(){return-1!==this.classification.indexOf("measure")};t.prototype.isDimension=function(){return-1!==this.classification.indexOf("dimension")};t.prototype.isColorBy=function(){return"color"===this.key};t.prototype.isCustom=function(){return"custom"===this.key};return{Value:e,Encoding:t}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90),n(282),n(204),n(483),n(879),n(89),n(186)],r=function(e,t,n,i,r,o,a){r=r.default;return{generateProperties:d};function s(t,o,a,s,l,c,u){var d=r.getInitialProperties(t);d.cId=e.generateId();var p=r.getDataSection().items.data;o.gaLayers.unshift(d);var h=d;var v=new n({app:a,dimensionDefinition:p.dimension||{},measureDefinition:p.measure||{},dimensionProperties:d.qHyperCubeDef.qDimensions,measureProperties:d.qHyperCubeDef.qMeasures,globalChangeListeners:[function(e){i.colorByUpdater(e,"qHyperCubeDef.",e.color)}]});v.setProperties(h);return f(v,o,h,s,l,c,u)}function l(e,t,n){var i=["points","custom"];var r=["area"];var o=["color"];var a=[];if(e||t){var s=[];var l=[];if(e){s=u(r,o,n);a[e]=s}if(t){l=s.length>0?u(i,[],n):u(i,o,n);a[t]=l}}return a}function c(e,t){var n=[];t.forEach(function(t){var i=t.key;e.indexOf(i)>=0&&n.push(t)});return n}function u(e,t,n){var i=[];var r=c(e,n);if(r.length>0){i.push.apply(i,r);if(t.length>0){var o=c(t,n);i.push.apply(i,o)}}return i}function d(e,n,i){var r=e.type;return o.all([t.getExtensionType(r),t.getInitialProperties(r)]).then(function(t){var a=t[0];var c=t[1];c.isRecommended=e.score>-1;var u;var d=c;if("map"===r){var p="AreaLayer";var h="PointLayer";var v=[];var g=[];var m=l(p,h,e.encodings);m[p]&&(g=m[p]);m[h]&&(v=m[h]);if(v.length>0&&g.length>0){s(h,c,i,n,e,v,a);return s(p,c,i,n,e,g,a)}return v.length>0?s(h,c,i,n,e,v,a):p.length>0?s(p,c,i,n,e,g,a):o.resolve()}d=c;a.mapProperties();u=a.getCreatePropertyHandler.call(a,i);u.setProperties(d);return f(u,c,d,n,e,e.encodings,a)})}function f(e,t,n,i,r,o,a){var s={dimensions:i?i.qHyperCubeDef.qDimensions.map(function(e){return e}):[],measures:i?i.qHyperCubeDef.qMeasures.map(function(e){return e}):[]};return p(o,0,s,n,e).then(function(){r.adapt&&r.adapt(t);m(t);var e=a.exportProperties&&a.importProperties;return e?a.importProperties(a.exportProperties({qProperty:t},a.options.hyperCubePath),t,a,a.options.hyperCubePath).qProperty:t})}function p(e,t,n,i,r){if(t>=e.length)return o.resolve();return h(e[t],n,i,r).then(function(){return p(e,t+1,n,i,r)})}function h(t,n,r,s){var l=t.value;if(t.isColorBy()){if(r.color){var c=t.isMeasure();var u=v(t,n);var d;if(l.isFieldValue()||l.isExpressionValue()){d={type:c?"expression":"field",name:c||l.isExpressionValue()?l.getExpression():l.getFieldName()};u&&(d.label=c?u.qDef.qLabel:u.qDef.qFieldLabels[0]);d.label||(d.label=a.convertEvaluationExpressionToLabel(d.name))}else l.isLibraryValue()&&(d={type:c?"measure":"dimension",id:l.getLibraryId()});if(d){t.adapt&&t.adapt(d);i.setColorByPropertyDef(r.color,d);s.updateGlobalChangeListeners()}}}else if(t.isCustom())t.adapt(r,l);else if(t.isMeasure()){var f;var p=v(t,n);if(p)f=e.extend(true,{},p);else if(l.isFieldValue()||l.isExpressionValue()){var h=l.getExpression();var g=a.convertEvaluationExpressionToLabel(h);f=s.createExpressionMeasure(h,g)}else if(l.isLibraryValue()){var m=l.getLibraryId();f=s.createLibraryMeasure(m)}if(f){t.adapt&&t.adapt(f);return s.addMeasure(f,void 0,void 0,true)}}else if(t.isDimension()){var b;var y=v(t,n);if(y)b=e.extend(true,{},y);else if(l.isFieldValue()){var x=a.convertEvaluationExpressionToLabel(l.getFieldName());var S=l.getExpression();b=s.createFieldDimension(S,x)}else if(l.isExpressionValue()){var w=l.getExpression();var q=a.convertEvaluationExpressionToLabel(w);b=s.createFieldDimension(w,q)}else if(l.isLibraryValue()){var C=l.getLibraryId();b=s.createLibraryDimension(C)}if(b){t.adapt&&t.adapt(b);return s.addDimension(b).then(function(){var e=t.optionalObj;if(e&&e.mapProperties){var n=e.mapProperties;var i="";b.qDef&&b.qDef.qFieldDefs&&b.qDef.qFieldDefs.length>0&&(i=b.qDef.qFieldDefs[0]);s.properties.locationOrLatitude.key=n.expr;s.properties.locationOrLatitude.label=n.field;s.properties.locationOrLatitude.type="expression";s.properties.locationDefault=s.properties.locationOrLatitude.key;s.properties.label.expression.key=i;s.properties.label.expression.type="expression";s.properties.label.expression.label="dimension.qDef.qFieldDefs[0]"}})}}return o.resolve()}function v(e,t){var n=e.value;if(e.isMeasure()){if(n.isFieldValue()||n.isExpressionValue()){var i=n.getExpression();var r=a.normalizeExpression(i);var o=g(t.measures,function(e){return e.qDef&&a.normalizeExpression(e.qDef.qDef)===r});return o}if(n.isLibraryValue()){var s=n.getLibraryId();var l=g(t.measures,function(e){return e.qLibraryId===s});return l}}else if(e.isDimension()){if(n.isFieldValue()){var c=n.getExpression();var u=a.normalizeExpression(c);var d=g(t.dimensions,function(e){return e.qDef&&e.qDef.qFieldDefs&&a.normalizeExpression(e.qDef.qFieldDefs[0])===u});return d}if(n.isExpressionValue()){var f=n.getExpression();var p=a.normalizeExpression(f);var h=g(t.dimensions,function(e){return e.qDef&&e.qDef.qFieldDefs&&a.normalizeExpression(e.qDef.qFieldDefs[0])===p});return h}if(n.isLibraryValue()){var v=n.getLibraryId();var m=g(t.dimensions,function(e){return e.qLibraryId===v});return m}}return}function g(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(t(i)){e.splice(n,1);return i}}return}function m(t){if(t.qHyperCubeDef){var n=t.qHyperCubeDef.qDimensions;var i=t.qHyperCubeDef.qMeasures;n.forEach(function(t){t.qDef.cId=e.generateId()});i.forEach(function(t){t.qDef.cId=e.generateId()})}}}.apply(t,i),void 0!==r&&(e.exports=r))},,function(e,t,n){"use strict";var i,r;!(i=[n(48),n(54),n(89),n(186),n(1117),n(229),n(233)],r=function(e,t,n,i,r,o){return{createDataCollection:a,adaptDataCollectionForRecommendations:s};function a(t,a,s){if(s)return r.createDataCollection(s,a.qHyperCubeDef.qDimensions,a.qHyperCubeDef.qMeasures);return n.all({appFieldList:t.getFieldList(),classificationsResult:e.getService("classificationService").getClassification()}).then(function(e){var t=e.appFieldList;var n=e.classificationsResult;var s=n?new o(n):void 0;i.addClassificationDataToFields(t,s);return r.createDataCollection(t,a.qHyperCubeDef.qDimensions,a.qHyperCubeDef.qMeasures)})}function s(e,t){var n={fields:[],libItems:[],expressions:[]};e.dimensions.forEach(function(e,r){var o={};if(t.qDimensionInfo&&t.qDimensionInfo.length>r){var a=t.qDimensionInfo[r];o.distinctCount=a.qCardinal}if(e.isLibraryItem())n.libItems.push({libId:e.libId,overrides:o});else if(e.isFieldItem()){n.fields.push({name:e.name,overrides:o});i.isDimension(e.defaultClassifications)||(o.classifications=[i.Constants.dimension])}else{n.expressions.push({expr:e.expr,overrides:o});l(e.expr,t)?o.classifications=[i.Constants.temporal]:o.classifications=[i.Constants.dimension]}});e.measures.forEach(function(e,r){var o={};if(t.qMeasureInfo&&t.qMeasureInfo.length>r){var a=t.qMeasureInfo[r];o.valueRange={min:a.qMin,max:a.qMax}}if(e.isLibraryItem())n.libItems.push({libId:e.libId,overrides:o});else if(e.isFieldItem()){n.fields.push({name:e.name,overrides:o});o.defaultAggregation=e.aggregation;i.isMeasure(e.defaultClassifications)||(o.classifications=[i.Constants.measure])}else{n.expressions.push({expr:e.expr,overrides:o});o.classifications=[i.Constants.measure]}});n.stats={total:e.dimensions.length+e.measures.length,dims:e.dimensions.length,msrs:e.measures.length};return n}function l(e,n){if(n&&n.qDimensionInfo){var i=t.find(n.qDimensionInfo,function(t){return t.qGroupFieldDefs&&t.qGroupFieldDefs.indexOf(e)>=0});return i&&i.qDerivedField}return false}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(54),n(92),n(1118)],r=function(e,t,n){var i=["sum","count","avg","min","max"];var r=t.extend("DataCollectionFactory",{getField:function t(n,i){return e.find(n,function(e){return e.qName===i})},isAggregation:function e(t){return t&&i.indexOf(t.toLowerCase())>=0},unwrapName:function e(t){var n="["===t.charAt(0)&&"]"===t.charAt(t.length-1)?t.substring(1,t.length-1):t;return n},createDataCollection:function e(t,i,r){var o=this;var a=new n.DataCollection;i.forEach(function(e){var i;if(e.qLibraryId)i=new n.Dimension({libId:e.qLibraryId});else{var r=e.qDef.qFieldDefs[0];var s=o.unwrapName(r);var l=o.getField(t,s);i=l?new n.Dimension({dataTypes:l.dataTypes,defaultClassifications:l.classifications,name:s,expr:r}):new n.Dimension({expr:r})}i&&a.dimensions.push(i)});r.forEach(function(e){var i;if(e.qLibraryId)i=new n.Measure({libId:e.qLibraryId});else{var r=e.qDef.qDef;var s=/^=?(.+)\(((\[(.+)\])|((.+)))\)$/;var l=s.exec(r);if(l){l=l.filter(function(e){return e});if(l.length>=5){var c=l[1];var u=l[4];c&&(c=c.trim());if(o.isAggregation(c)){var d=o.getField(t,u);d&&(i=new n.Measure({dataTypes:d.dataTypes,defaultClassifications:d.classifications,defaultAggregation:d.defaultAggregation,aggregation:c,name:u,expr:r}))}}}i||(i=new n.Measure({expr:r}))}i&&a.measures.push(i)});return a},merge:function e(t){var i=new n.DataCollection;t.forEach(function(e){i.dimensions=i.dimensions.concat(e.dimensions);i.measures=i.measures.concat(e.measures)});return i}});return new r}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[],r=function(){function e(e){this.name=e.name;this.expr=e.expr;this.defaultClassifications=e.defaultClassifications;this.libId=e.libId;this.dataTypes=e.dataTypes}e.prototype.isLibraryItem=function(){return!!this.libId};e.prototype.isFieldItem=function(){return!!this.name};function t(e){this.name=e.name;this.aggregation=e.aggregation;this.defaultAggregation=e.defaultAggregation;this.defaultClassifications=e.defaultClassifications;this.expr=e.expr;this.libId=e.libId;this.dataTypes=e.dataTypes}t.prototype.isLibraryItem=function(){return!!this.libId};t.prototype.isFieldItem=function(){return!!this.name};function n(){this.dimensions=[];this.measures=[]}n.prototype.size=function(){return this.dimensions.length+this.measures.length};return{Dimension:e,Measure:t,DataCollection:n}}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(54),n(90),n(1120),n(186)],r=function(e,t,n,i){var r={collectFromRecommendation:a,merge:l};function o(e,t,n,r){r=r||[];var o=-1;e&&t&&t.some(function(t,a){"dimension"===n?(e.qLibraryId&&e.qLibraryId===t.libId||i.normalizeExpression(e.qDef.qFieldDefs[0])===i.normalizeExpression(t.expr))&&-1===r.indexOf(a)&&(o=a):"measure"===n&&(e.qLibraryId&&e.qLibraryId===t.libId||i.normalizeExpression(e.qDef.qDef)===i.normalizeExpression(t.expr))&&(o=a);return-1!==o});return o}function a(t){var i=t.analysis.dims?t.analysis.dims:[];var r=t.analysis.msrs?t.analysis.msrs:[];var o=t.matchRecord?t.matchRecord.matches:[];var a=i.map(function(e){var t={dataType:"",qCardinal:0};if("eField"===e.cType){t.expr=e.expr;t.qGroupFieldDefs=[e.field]}else"eInlineExpr"===e.cType?t.expr=e.expr:"eLibItem"===e.cType&&(t.libId=e.libId);if(e.fieldStats){t.dataType=e.fieldStats.dataType||"";t.qCardinal=e.fieldStats.distinctCount||0}return t});var l=r.map(function(t){var n={dataType:"",qMax:0,qMin:0,aggregation:"",libItemLabel:""};if("eField"===t.cType){n.expr=t.expr;var i=e.findWhere(o,{field:t.field});i&&i.aggr&&(n.aggregation=i.aggr)}else"eInlineExpr"===t.cType?n.expr=t.expr:"eLibItem"===t.cType&&(n.libId=t.libId);if(t.fieldStats){n.dataType=t.fieldStats.dataType||"";if(t.fieldStats.valueRange){n.qMax=t.fieldStats.valueRange.max;n.qMin=t.fieldStats.valueRange.min}if("eLibItem"===t.cType&&t.fieldStats.classification&&t.fieldStats.classification.length>0){var r=t.fieldStats.classification[0];n.classification=r}}return n});var c=s(t);var u={};u.intermediateHyperCube=false;return new n(a,l,c,u)}function s(t){var n=[];var i=t.analysis;var r=t.matchRecord;if(r&&i.dims&&i.dims.length>1){var o=true;for(var a=1;a<i.dims.length;a++){var s=i.dims[a];if("eField"!==s.cType){o=false;break}var l=e.findWhere(r.matches,{field:s.field});if(!l.groupCriteria||l.groupCriteria.indexOf("sameHierarchy")<0){o=false;break}}o&&n.push({name:"perfectHierarchy",result:"1"})}return n}function l(e,i,r,a){var l=a.analysis.dims?a.analysis.dims:[];var c=a.analysis.msrs?a.analysis.msrs:[];var u=new Array(c.length);var f=new Array(l.length);var p=[];e.qDimensionInfo.forEach(function(t,n){var s=i.qDimensions[n];var l=o(s,a.analysis.dims,"dimension",p);p.push(l);f.splice(l,1,d(e.qDimensionInfo[n],n,"dimension",i,r))});e.qMeasureInfo.forEach(function(t,n){var s=i.qMeasures[n];var l=o(s,a.analysis.msrs,"measure");u.splice(l,1,d(e.qMeasureInfo[n],n,"measure",i,r))});var h={qSize:t.extend(true,{},e.qSize)};var v=s(a);return new n(f,u,v,h)}function c(e,t,n,i,r){var o;var a=[];switch(i){case"dimension":a=r.dimensions;break;case"measure":a=r.measures;break}a.some(function(i){var r=false;if(t){r=i.expr===t;e.dataType=i.dataTypes&&i.dataTypes.length>0?i.dataTypes[0]:null;e.aggregation=i.aggregation?i.aggregation:null}else n&&(r=i.libId===n);o=r?i:o;return r})}function u(e,t,n,i,r){var o;var a;var s;function l(e,t){var n=!!o.qLibraryId;n?s=o.qLibraryId:"dimension"===t?a=o.qDef.qFieldDefs[0]:"measure"===t&&(a=o.qDef.qDef)}if("dimension"===n){o=i.qDimensions[t];l(o,"dimension")}else if("measure"===n){o=i.qMeasures[t];l(o,"measure")}c(e,a,s,n,r)}function d(e,n,i,r,o){var a=t.extend(true,{},e,n);u(a,n,i,r,o);return a}return r}.apply(t,i),void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i,r;!(i=[n(90)],r=function(e){function t(t,n,i,r){this.measures=n;this.dimensions=t;this.overallIndicators=i;e.extend(true,this,r)}t.prototype.getMetaDataForDimension=function(e){if(this.dimensions.length>e){var t=this.dimensions[e];return t}return};t.prototype.getMetaDataForMeasure=function(e){if(this.measures.length>e){var t=this.measures[e];return t}return};t.prototype.getIndicatorByName=function(e){var t=void 0;this.overallIndicators&&this.overallIndicators.some(function(n){var i=n.name===e;i&&(t=n);return i});return t};t.prototype.isSummable=function(){var e=this.getIndicatorByName("summable");return e&&"1"===e.result};t.prototype.isPerfectHierarchy=function(){var e=this.getIndicatorByName("perfectHierarchy");return e&&"1"===e.result};return t}.apply(t,i),void 0!==r&&(e.exports=r))}])]);